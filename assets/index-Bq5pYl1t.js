function Pie(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $ie(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var NA={exports:{}},mg={};var mR;function zie(){if(mR)return mg;mR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var s in i)s!=="key"&&(o[s]=i[s])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:o}}return mg.Fragment=e,mg.jsx=n,mg.jsxs=n,mg}var gR;function Uie(){return gR||(gR=1,NA.exports=zie()),NA.exports}var _=Uie(),DA={exports:{}},Kt={};var vR;function Hie(){if(vR)return Kt;vR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),d=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=d&&W[d]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(W,K,I){this.props=W,this.context=K,this.refs=b,this.updater=I||m}x.prototype.isReactComponent={},x.prototype.setState=function(W,K){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,K,"setState")},x.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=x.prototype;function w(W,K,I){this.props=W,this.context=K,this.refs=b,this.updater=I||m}var A=w.prototype=new C;A.constructor=w,v(A,x.prototype),A.isPureReactComponent=!0;var E=Array.isArray;function T(){}var N={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(W,K,I){var ee=I.ref;return{$$typeof:t,type:W,key:K,ref:ee!==void 0?ee:null,props:I}}function k(W,K){return M(W.type,K,W.props)}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function P(W){var K={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(I){return K[I]})}var $=/\/+/g;function z(W,K){return typeof W=="object"&&W!==null&&W.key!=null?P(""+W.key):K.toString(36)}function j(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(T,T):(W.status="pending",W.then(function(K){W.status==="pending"&&(W.status="fulfilled",W.value=K)},function(K){W.status==="pending"&&(W.status="rejected",W.reason=K)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function L(W,K,I,ee,Q){var ce=typeof W;(ce==="undefined"||ce==="boolean")&&(W=null);var ve=!1;if(W===null)ve=!0;else switch(ce){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(W.$$typeof){case t:case e:ve=!0;break;case c:return ve=W._init,L(ve(W._payload),K,I,ee,Q)}}if(ve)return Q=Q(W),ve=ee===""?"."+z(W,0):ee,E(Q)?(I="",ve!=null&&(I=ve.replace($,"$&/")+"/"),L(Q,K,I,"",function(le){return le})):Q!=null&&(B(Q)&&(Q=k(Q,I+(Q.key==null||W&&W.key===Q.key?"":(""+Q.key).replace($,"$&/")+"/")+ve)),K.push(Q)),1;ve=0;var ie=ee===""?".":ee+":";if(E(W))for(var X=0;X<W.length;X++)ee=W[X],ce=ie+z(ee,X),ve+=L(ee,K,I,ce,Q);else if(X=h(W),typeof X=="function")for(W=X.call(W),X=0;!(ee=W.next()).done;)ee=ee.value,ce=ie+z(ee,X++),ve+=L(ee,K,I,ce,Q);else if(ce==="object"){if(typeof W.then=="function")return L(j(W),K,I,ee,Q);throw K=String(W),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ve}function U(W,K,I){if(W==null)return W;var ee=[],Q=0;return L(W,ee,"","",function(ce){return K.call(I,ce,Q++)}),ee}function G(W){if(W._status===-1){var K=W._result;K=K(),K.then(function(I){(W._status===0||W._status===-1)&&(W._status=1,W._result=I)},function(I){(W._status===0||W._status===-1)&&(W._status=2,W._result=I)}),W._status===-1&&(W._status=0,W._result=K)}if(W._status===1)return W._result.default;throw W._result}var Z=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},H={map:U,forEach:function(W,K,I){U(W,function(){K.apply(this,arguments)},I)},count:function(W){var K=0;return U(W,function(){K++}),K},toArray:function(W){return U(W,function(K){return K})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return Kt.Activity=f,Kt.Children=H,Kt.Component=x,Kt.Fragment=n,Kt.Profiler=i,Kt.PureComponent=w,Kt.StrictMode=r,Kt.Suspense=l,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(W){return N.H.useMemoCache(W)}},Kt.cache=function(W){return function(){return W.apply(null,arguments)}},Kt.cacheSignal=function(){return null},Kt.cloneElement=function(W,K,I){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var ee=v({},W.props),Q=W.key;if(K!=null)for(ce in K.key!==void 0&&(Q=""+K.key),K)!D.call(K,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&K.ref===void 0||(ee[ce]=K[ce]);var ce=arguments.length-2;if(ce===1)ee.children=I;else if(1<ce){for(var ve=Array(ce),ie=0;ie<ce;ie++)ve[ie]=arguments[ie+2];ee.children=ve}return M(W.type,Q,ee)},Kt.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:o,_context:W},W},Kt.createElement=function(W,K,I){var ee,Q={},ce=null;if(K!=null)for(ee in K.key!==void 0&&(ce=""+K.key),K)D.call(K,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(Q[ee]=K[ee]);var ve=arguments.length-2;if(ve===1)Q.children=I;else if(1<ve){for(var ie=Array(ve),X=0;X<ve;X++)ie[X]=arguments[X+2];Q.children=ie}if(W&&W.defaultProps)for(ee in ve=W.defaultProps,ve)Q[ee]===void 0&&(Q[ee]=ve[ee]);return M(W,ce,Q)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(W){return{$$typeof:s,render:W}},Kt.isValidElement=B,Kt.lazy=function(W){return{$$typeof:c,_payload:{_status:-1,_result:W},_init:G}},Kt.memo=function(W,K){return{$$typeof:u,type:W,compare:K===void 0?null:K}},Kt.startTransition=function(W){var K=N.T,I={};N.T=I;try{var ee=W(),Q=N.S;Q!==null&&Q(I,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(T,Z)}catch(ce){Z(ce)}finally{K!==null&&I.types!==null&&(K.types=I.types),N.T=K}},Kt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Kt.use=function(W){return N.H.use(W)},Kt.useActionState=function(W,K,I){return N.H.useActionState(W,K,I)},Kt.useCallback=function(W,K){return N.H.useCallback(W,K)},Kt.useContext=function(W){return N.H.useContext(W)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(W,K){return N.H.useDeferredValue(W,K)},Kt.useEffect=function(W,K){return N.H.useEffect(W,K)},Kt.useEffectEvent=function(W){return N.H.useEffectEvent(W)},Kt.useId=function(){return N.H.useId()},Kt.useImperativeHandle=function(W,K,I){return N.H.useImperativeHandle(W,K,I)},Kt.useInsertionEffect=function(W,K){return N.H.useInsertionEffect(W,K)},Kt.useLayoutEffect=function(W,K){return N.H.useLayoutEffect(W,K)},Kt.useMemo=function(W,K){return N.H.useMemo(W,K)},Kt.useOptimistic=function(W,K){return N.H.useOptimistic(W,K)},Kt.useReducer=function(W,K,I){return N.H.useReducer(W,K,I)},Kt.useRef=function(W){return N.H.useRef(W)},Kt.useState=function(W){return N.H.useState(W)},Kt.useSyncExternalStore=function(W,K,I){return N.H.useSyncExternalStore(W,K,I)},Kt.useTransition=function(){return N.H.useTransition()},Kt.version="19.2.3",Kt}var bR;function Lm(){return bR||(bR=1,DA.exports=Hie()),DA.exports}var q=Lm();const xr=Qs(q),eV=Pie({__proto__:null,default:xr},[q]);var MA={exports:{}},gg={},kA={exports:{}},_A={};var yR;function Vie(){return yR||(yR=1,(function(t){function e(L,U){var G=L.length;L.push(U);e:for(;0<G;){var Z=G-1>>>1,H=L[Z];if(0<i(H,U))L[Z]=U,L[G]=H,G=Z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],G=L.pop();if(G!==U){L[0]=G;e:for(var Z=0,H=L.length,W=H>>>1;Z<W;){var K=2*(Z+1)-1,I=L[K],ee=K+1,Q=L[ee];if(0>i(I,G))ee<H&&0>i(Q,I)?(L[Z]=Q,L[ee]=G,Z=ee):(L[Z]=I,L[K]=G,Z=K);else if(ee<H&&0>i(Q,G))L[Z]=Q,L[ee]=G,Z=ee;else break e}}return U}function i(L,U){var G=L.sortIndex-U.sortIndex;return G!==0?G:L.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A(L){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=L)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function E(L){if(v=!1,A(L),!m)if(n(l)!==null)m=!0,T||(T=!0,P());else{var U=n(u);U!==null&&j(E,U.startTime-L)}}var T=!1,N=-1,D=5,M=-1;function k(){return b?!0:!(t.unstable_now()-M<D)}function B(){if(b=!1,T){var L=t.unstable_now();M=L;var U=!0;try{e:{m=!1,v&&(v=!1,C(N),N=-1),h=!0;var G=d;try{t:{for(A(L),f=n(l);f!==null&&!(f.expirationTime>L&&k());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var H=Z(f.expirationTime<=L);if(L=t.unstable_now(),typeof H=="function"){f.callback=H,A(L),U=!0;break t}f===n(l)&&r(l),A(L)}else r(l);f=n(l)}if(f!==null)U=!0;else{var W=n(u);W!==null&&j(E,W.startTime-L),U=!1}}break e}finally{f=null,d=G,h=!1}U=void 0}}finally{U?P():T=!1}}}var P;if(typeof w=="function")P=function(){w(B)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=B,P=function(){z.postMessage(null)}}else P=function(){x(B,0)};function j(L,U){N=x(function(){L(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(L){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var G=d;d=U;try{return L()}finally{d=G}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=d;d=L;try{return U()}finally{d=G}},t.unstable_scheduleCallback=function(L,U,G){var Z=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Z+G:Z):G=Z,L){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=G+H,L={id:c++,callback:U,priorityLevel:L,startTime:G,expirationTime:H,sortIndex:-1},G>Z?(L.sortIndex=G,e(u,L),n(l)===null&&L===n(u)&&(v?(C(N),N=-1):v=!0,j(E,G-Z))):(L.sortIndex=H,e(l,L),m||h||(m=!0,T||(T=!0,P()))),L},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(L){var U=d;return function(){var G=d;d=U;try{return L.apply(this,arguments)}finally{d=G}}}})(_A)),_A}var xR;function qie(){return xR||(xR=1,kA.exports=Vie()),kA.exports}var OA={exports:{}},Ki={};var wR;function jie(){if(wR)return Ki;wR=1;var t=Lm();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(l,u,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:u,implementation:c}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ki.createPortal=function(l,u){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return o(l,u,null,c)},Ki.flushSync=function(l){var u=a.T,c=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=u,r.p=c,r.d.f()}},Ki.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Ki.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ki.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var c=u.as,f=s(c,u.crossOrigin),d=typeof u.integrity=="string"?u.integrity:void 0,h=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;c==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:d,fetchPriority:h}):c==="script"&&r.d.X(l,{crossOrigin:f,integrity:d,fetchPriority:h,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ki.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var c=s(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Ki.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var c=u.as,f=s(c,u.crossOrigin);r.d.L(l,c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ki.preloadModule=function(l,u){if(typeof l=="string")if(u){var c=s(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Ki.requestFormReset=function(l){r.d.r(l)},Ki.unstable_batchedUpdates=function(l,u){return l(u)},Ki.useFormState=function(l,u,c){return a.H.useFormState(l,u,c)},Ki.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ki.version="19.2.3",Ki}var ER;function tV(){if(ER)return OA.exports;ER=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),OA.exports=jie(),OA.exports}var CR;function Gie(){if(CR)return gg;CR=1;var t=qie(),e=Lm(),n=tV();function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function o(p){var g=p,y=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(y=g.return),p=g.return;while(p)}return g.tag===3?y:null}function a(p){if(p.tag===13){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function s(p){if(p.tag===31){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function l(p){if(o(p)!==p)throw Error(r(188))}function u(p){var g=p.alternate;if(!g){if(g=o(p),g===null)throw Error(r(188));return g!==p?null:p}for(var y=p,S=g;;){var O=y.return;if(O===null)break;var R=O.alternate;if(R===null){if(S=O.return,S!==null){y=S;continue}break}if(O.child===R.child){for(R=O.child;R;){if(R===y)return l(O),p;if(R===S)return l(O),g;R=R.sibling}throw Error(r(188))}if(y.return!==S.return)y=O,S=R;else{for(var Y=!1,ne=O.child;ne;){if(ne===y){Y=!0,y=O,S=R;break}if(ne===S){Y=!0,S=O,y=R;break}ne=ne.sibling}if(!Y){for(ne=R.child;ne;){if(ne===y){Y=!0,y=R,S=O;break}if(ne===S){Y=!0,S=R,y=O;break}ne=ne.sibling}if(!Y)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?p:g}function c(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=c(p),g!==null)return g;p=p.sibling}return null}var f=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function P(p){return p===null||typeof p!="object"?null:(p=B&&p[B]||p["@@iterator"],typeof p=="function"?p:null)}var $=Symbol.for("react.client.reference");function z(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===$?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList";case M:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case m:return"Portal";case w:return p.displayName||"Context";case C:return(p._context.displayName||"Context")+".Consumer";case A:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case N:return g=p.displayName||null,g!==null?g:z(p.type)||"Memo";case D:g=p._payload,p=p._init;try{return z(p(g))}catch{}}return null}var j=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Z=[],H=-1;function W(p){return{current:p}}function K(p){0>H||(p.current=Z[H],Z[H]=null,H--)}function I(p,g){H++,Z[H]=p.current,p.current=g}var ee=W(null),Q=W(null),ce=W(null),ve=W(null);function ie(p,g){switch(I(ce,g),I(Q,p),I(ee,null),g.nodeType){case 9:case 11:p=(p=g.documentElement)&&(p=p.namespaceURI)?PI(p):0;break;default:if(p=g.tagName,g=g.namespaceURI)g=PI(g),p=$I(g,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}K(ee),I(ee,p)}function X(){K(ee),K(Q),K(ce)}function le(p){p.memoizedState!==null&&I(ve,p);var g=ee.current,y=$I(g,p.type);g!==y&&(I(Q,p),I(ee,y))}function Ce(p){Q.current===p&&(K(ee),K(Q)),ve.current===p&&(K(ve),fg._currentValue=G)}var he,Te;function Ae(p){if(he===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);he=g&&g[1]||"",Te=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+p+Te}var qe=!1;function rt(p,g){if(!p||qe)return"";qe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(g){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(Fe){var Re=Fe}Reflect.construct(p,[],Ge)}else{try{Ge.call()}catch(Fe){Re=Fe}p.call(Ge.prototype)}}else{try{throw Error()}catch(Fe){Re=Fe}(Ge=p())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(Fe){if(Fe&&Re&&typeof Fe.stack=="string")return[Fe.stack,Re.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=S.DetermineComponentFrameRoot(),Y=R[0],ne=R[1];if(Y&&ne){var Ee=Y.split(`
`),_e=ne.split(`
`);for(O=S=0;S<Ee.length&&!Ee[S].includes("DetermineComponentFrameRoot");)S++;for(;O<_e.length&&!_e[O].includes("DetermineComponentFrameRoot");)O++;if(S===Ee.length||O===_e.length)for(S=Ee.length-1,O=_e.length-1;1<=S&&0<=O&&Ee[S]!==_e[O];)O--;for(;1<=S&&0<=O;S--,O--)if(Ee[S]!==_e[O]){if(S!==1||O!==1)do if(S--,O--,0>O||Ee[S]!==_e[O]){var Ve=`
`+Ee[S].replace(" at new "," at ");return p.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",p.displayName)),Ve}while(1<=S&&0<=O);break}}}finally{qe=!1,Error.prepareStackTrace=y}return(y=p?p.displayName||p.name:"")?Ae(y):""}function lt(p,g){switch(p.tag){case 26:case 27:case 5:return Ae(p.type);case 16:return Ae("Lazy");case 13:return p.child!==g&&g!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return rt(p.type,!1);case 11:return rt(p.type.render,!1);case 1:return rt(p.type,!0);case 31:return Ae("Activity");default:return""}}function Qe(p){try{var g="",y=null;do g+=lt(p,y),y=p,p=p.return;while(p);return g}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var st=Object.prototype.hasOwnProperty,dt=t.unstable_scheduleCallback,te=t.unstable_cancelCallback,me=t.unstable_shouldYield,J=t.unstable_requestPaint,ae=t.unstable_now,ge=t.unstable_getCurrentPriorityLevel,se=t.unstable_ImmediatePriority,fe=t.unstable_UserBlockingPriority,we=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Je=t.log,Pe=t.unstable_setDisableYieldValue,ht=null,Ct=null;function Ut(p){if(typeof Je=="function"&&Pe(p),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(ht,p)}catch{}}var pt=Math.clz32?Math.clz32:be,_n=Math.log,V=Math.LN2;function be(p){return p>>>=0,p===0?32:31-(_n(p)/V|0)|0}var Ie=256,Xe=262144,gt=4194304;function At(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Xr(p,g,y){var S=p.pendingLanes;if(S===0)return 0;var O=0,R=p.suspendedLanes,Y=p.pingedLanes;p=p.warmLanes;var ne=S&134217727;return ne!==0?(S=ne&~R,S!==0?O=At(S):(Y&=ne,Y!==0?O=At(Y):y||(y=ne&~p,y!==0&&(O=At(y))))):(ne=S&~R,ne!==0?O=At(ne):Y!==0?O=At(Y):y||(y=S&~p,y!==0&&(O=At(y)))),O===0?0:g!==0&&g!==O&&(g&R)===0&&(R=O&-O,y=g&-g,R>=y||R===32&&(y&4194048)!==0)?g:O}function La(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function E0(p,g){switch(p){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qv(){var p=gt;return gt<<=1,(gt&62914560)===0&&(gt=4194304),p}function C0(p){for(var g=[],y=0;31>y;y++)g.push(p);return g}function Qf(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function vS(p,g,y,S,O,R){var Y=p.pendingLanes;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=y,p.entangledLanes&=y,p.errorRecoveryDisabledLanes&=y,p.shellSuspendCounter=0;var ne=p.entanglements,Ee=p.expirationTimes,_e=p.hiddenUpdates;for(y=Y&~y;0<y;){var Ve=31-pt(y),Ge=1<<Ve;ne[Ve]=0,Ee[Ve]=-1;var Re=_e[Ve];if(Re!==null)for(_e[Ve]=null,Ve=0;Ve<Re.length;Ve++){var Fe=Re[Ve];Fe!==null&&(Fe.lane&=-536870913)}y&=~Ge}S!==0&&jv(p,S,0),R!==0&&O===0&&p.tag!==0&&(p.suspendedLanes|=R&~(Y&~g))}function jv(p,g,y){p.pendingLanes|=g,p.suspendedLanes&=~g;var S=31-pt(g);p.entangledLanes|=g,p.entanglements[S]=p.entanglements[S]|1073741824|y&261930}function Gv(p,g){var y=p.entangledLanes|=g;for(p=p.entanglements;y;){var S=31-pt(y),O=1<<S;O&g|p[S]&g&&(p[S]|=g),y&=~O}}function Yv(p,g){var y=g&-g;return y=(y&42)!==0?1:S0(y),(y&(p.suspendedLanes|g))!==0?0:y}function S0(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function T0(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Wv(){var p=U.p;return p!==0?p:(p=window.event,p===void 0?32:lR(p.type))}function Kv(p,g){var y=U.p;try{return U.p=p,g()}finally{U.p=y}}var vl=Math.random().toString(36).slice(2),li="__reactFiber$"+vl,Wi="__reactProps$"+vl,oc="__reactContainer$"+vl,A0="__reactEvents$"+vl,bS="__reactListeners$"+vl,yS="__reactHandles$"+vl,Xv="__reactResources$"+vl,Jf="__reactMarker$"+vl;function N0(p){delete p[li],delete p[Wi],delete p[A0],delete p[bS],delete p[yS]}function ac(p){var g=p[li];if(g)return g;for(var y=p.parentNode;y;){if(g=y[oc]||y[li]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(p=GI(p);p!==null;){if(y=p[li])return y;p=GI(p)}return g}p=y,y=p.parentNode}return null}function sc(p){if(p=p[li]||p[oc]){var g=p.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return p}return null}function As(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p.stateNode;throw Error(r(33))}function wn(p){var g=p[Xv];return g||(g=p[Xv]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function In(p){p[Jf]=!0}var Zv=new Set,ed={};function ua(p,g){lc(p,g),lc(p+"Capture",g)}function lc(p,g){for(ed[p]=g,p=0;p<g.length;p++)Zv.add(g[p])}var Mne=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),D6={},M6={};function kne(p){return st.call(M6,p)?!0:st.call(D6,p)?!1:Mne.test(p)?M6[p]=!0:(D6[p]=!0,!1)}function Qv(p,g,y){if(kne(g))if(y===null)p.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":p.removeAttribute(g);return;case"boolean":var S=g.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){p.removeAttribute(g);return}}p.setAttribute(g,""+y)}}function Jv(p,g,y){if(y===null)p.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(g);return}p.setAttribute(g,""+y)}}function Kl(p,g,y,S){if(S===null)p.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(y);return}p.setAttributeNS(g,y,""+S)}}function Fa(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function k6(p){var g=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function _ne(p,g,y){var S=Object.getOwnPropertyDescriptor(p.constructor.prototype,g);if(!p.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var O=S.get,R=S.set;return Object.defineProperty(p,g,{configurable:!0,get:function(){return O.call(this)},set:function(Y){y=""+Y,R.call(this,Y)}}),Object.defineProperty(p,g,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){p._valueTracker=null,delete p[g]}}}}function xS(p){if(!p._valueTracker){var g=k6(p)?"checked":"value";p._valueTracker=_ne(p,g,""+p[g])}}function _6(p){if(!p)return!1;var g=p._valueTracker;if(!g)return!0;var y=g.getValue(),S="";return p&&(S=k6(p)?p.checked?"true":"false":p.value),p=S,p!==y?(g.setValue(p),!0):!1}function eb(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var One=/[\n"\\]/g;function Pa(p){return p.replace(One,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function wS(p,g,y,S,O,R,Y,ne){p.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?p.type=Y:p.removeAttribute("type"),g!=null?Y==="number"?(g===0&&p.value===""||p.value!=g)&&(p.value=""+Fa(g)):p.value!==""+Fa(g)&&(p.value=""+Fa(g)):Y!=="submit"&&Y!=="reset"||p.removeAttribute("value"),g!=null?ES(p,Y,Fa(g)):y!=null?ES(p,Y,Fa(y)):S!=null&&p.removeAttribute("value"),O==null&&R!=null&&(p.defaultChecked=!!R),O!=null&&(p.checked=O&&typeof O!="function"&&typeof O!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?p.name=""+Fa(ne):p.removeAttribute("name")}function O6(p,g,y,S,O,R,Y,ne){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(p.type=R),g!=null||y!=null){if(!(R!=="submit"&&R!=="reset"||g!=null)){xS(p);return}y=y!=null?""+Fa(y):"",g=g!=null?""+Fa(g):y,ne||g===p.value||(p.value=g),p.defaultValue=g}S=S??O,S=typeof S!="function"&&typeof S!="symbol"&&!!S,p.checked=ne?p.checked:!!S,p.defaultChecked=!!S,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(p.name=Y),xS(p)}function ES(p,g,y){g==="number"&&eb(p.ownerDocument)===p||p.defaultValue===""+y||(p.defaultValue=""+y)}function Ih(p,g,y,S){if(p=p.options,g){g={};for(var O=0;O<y.length;O++)g["$"+y[O]]=!0;for(y=0;y<p.length;y++)O=g.hasOwnProperty("$"+p[y].value),p[y].selected!==O&&(p[y].selected=O),O&&S&&(p[y].defaultSelected=!0)}else{for(y=""+Fa(y),g=null,O=0;O<p.length;O++){if(p[O].value===y){p[O].selected=!0,S&&(p[O].defaultSelected=!0);return}g!==null||p[O].disabled||(g=p[O])}g!==null&&(g.selected=!0)}}function I6(p,g,y){if(g!=null&&(g=""+Fa(g),g!==p.value&&(p.value=g),y==null)){p.defaultValue!==g&&(p.defaultValue=g);return}p.defaultValue=y!=null?""+Fa(y):""}function R6(p,g,y,S){if(g==null){if(S!=null){if(y!=null)throw Error(r(92));if(j(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),g=y}y=Fa(g),p.defaultValue=y,S=p.textContent,S===y&&S!==""&&S!==null&&(p.value=S),xS(p)}function Rh(p,g){if(g){var y=p.firstChild;if(y&&y===p.lastChild&&y.nodeType===3){y.nodeValue=g;return}}p.textContent=g}var Ine=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B6(p,g,y){var S=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?p.setProperty(g,""):g==="float"?p.cssFloat="":p[g]="":S?p.setProperty(g,y):typeof y!="number"||y===0||Ine.has(g)?g==="float"?p.cssFloat=y:p[g]=(""+y).trim():p[g]=y+"px"}function L6(p,g,y){if(g!=null&&typeof g!="object")throw Error(r(62));if(p=p.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||g!=null&&g.hasOwnProperty(S)||(S.indexOf("--")===0?p.setProperty(S,""):S==="float"?p.cssFloat="":p[S]="");for(var O in g)S=g[O],g.hasOwnProperty(O)&&y[O]!==S&&B6(p,O,S)}else for(var R in g)g.hasOwnProperty(R)&&B6(p,R,g[R])}function CS(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rne=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bne=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tb(p){return Bne.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}function Xl(){}var SS=null;function TS(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Bh=null,Lh=null;function F6(p){var g=sc(p);if(g&&(p=g.stateNode)){var y=p[Wi]||null;e:switch(p=g.stateNode,g.type){case"input":if(wS(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=p;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Pa(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var S=y[g];if(S!==p&&S.form===p.form){var O=S[Wi]||null;if(!O)throw Error(r(90));wS(S,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(g=0;g<y.length;g++)S=y[g],S.form===p.form&&_6(S)}break e;case"textarea":I6(p,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&Ih(p,!!y.multiple,g,!1)}}}var AS=!1;function P6(p,g,y){if(AS)return p(g,y);AS=!0;try{var S=p(g);return S}finally{if(AS=!1,(Bh!==null||Lh!==null)&&(Hb(),Bh&&(g=Bh,p=Lh,Lh=Bh=null,F6(g),p)))for(g=0;g<p.length;g++)F6(p[g])}}function D0(p,g){var y=p.stateNode;if(y===null)return null;var S=y[Wi]||null;if(S===null)return null;y=S[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(p=p.type,S=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!S;break e;default:p=!1}if(p)return null;if(y&&typeof y!="function")throw Error(r(231,g,typeof y));return y}var Zl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NS=!1;if(Zl)try{var M0={};Object.defineProperty(M0,"passive",{get:function(){NS=!0}}),window.addEventListener("test",M0,M0),window.removeEventListener("test",M0,M0)}catch{NS=!1}var uc=null,DS=null,nb=null;function $6(){if(nb)return nb;var p,g=DS,y=g.length,S,O="value"in uc?uc.value:uc.textContent,R=O.length;for(p=0;p<y&&g[p]===O[p];p++);var Y=y-p;for(S=1;S<=Y&&g[y-S]===O[R-S];S++);return nb=O.slice(p,1<S?1-S:void 0)}function rb(p){var g=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&g===13&&(p=13)):p=g,p===10&&(p=13),32<=p||p===13?p:0}function ib(){return!0}function z6(){return!1}function Bo(p){function g(y,S,O,R,Y){this._reactName=y,this._targetInst=O,this.type=S,this.nativeEvent=R,this.target=Y,this.currentTarget=null;for(var ne in p)p.hasOwnProperty(ne)&&(y=p[ne],this[ne]=y?y(R):R[ne]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?ib:z6,this.isPropagationStopped=z6,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=ib)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=ib)},persist:function(){},isPersistent:ib}),g}var td={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ob=Bo(td),k0=f({},td,{view:0,detail:0}),Lne=Bo(k0),MS,kS,_0,ab=f({},k0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OS,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==_0&&(_0&&p.type==="mousemove"?(MS=p.screenX-_0.screenX,kS=p.screenY-_0.screenY):kS=MS=0,_0=p),MS)},movementY:function(p){return"movementY"in p?p.movementY:kS}}),U6=Bo(ab),Fne=f({},ab,{dataTransfer:0}),Pne=Bo(Fne),$ne=f({},k0,{relatedTarget:0}),_S=Bo($ne),zne=f({},td,{animationName:0,elapsedTime:0,pseudoElement:0}),Une=Bo(zne),Hne=f({},td,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Vne=Bo(Hne),qne=f({},td,{data:0}),H6=Bo(qne),jne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wne(p){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(p):(p=Yne[p])?!!g[p]:!1}function OS(){return Wne}var Kne=f({},k0,{key:function(p){if(p.key){var g=jne[p.key]||p.key;if(g!=="Unidentified")return g}return p.type==="keypress"?(p=rb(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Gne[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OS,charCode:function(p){return p.type==="keypress"?rb(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?rb(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Xne=Bo(Kne),Zne=f({},ab,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V6=Bo(Zne),Qne=f({},k0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OS}),Jne=Bo(Qne),ere=f({},td,{propertyName:0,elapsedTime:0,pseudoElement:0}),tre=Bo(ere),nre=f({},ab,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),rre=Bo(nre),ire=f({},td,{newState:0,oldState:0}),ore=Bo(ire),are=[9,13,27,32],IS=Zl&&"CompositionEvent"in window,O0=null;Zl&&"documentMode"in document&&(O0=document.documentMode);var sre=Zl&&"TextEvent"in window&&!O0,q6=Zl&&(!IS||O0&&8<O0&&11>=O0),j6=" ",G6=!1;function Y6(p,g){switch(p){case"keyup":return are.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W6(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Fh=!1;function lre(p,g){switch(p){case"compositionend":return W6(g);case"keypress":return g.which!==32?null:(G6=!0,j6);case"textInput":return p=g.data,p===j6&&G6?null:p;default:return null}}function ure(p,g){if(Fh)return p==="compositionend"||!IS&&Y6(p,g)?(p=$6(),nb=DS=uc=null,Fh=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return q6&&g.locale!=="ko"?null:g.data;default:return null}}var cre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K6(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g==="input"?!!cre[p.type]:g==="textarea"}function X6(p,g,y,S){Bh?Lh?Lh.push(S):Lh=[S]:Bh=S,g=Kb(g,"onChange"),0<g.length&&(y=new ob("onChange","change",null,y,S),p.push({event:y,listeners:g}))}var I0=null,R0=null;function fre(p){OI(p,0)}function sb(p){var g=As(p);if(_6(g))return p}function Z6(p,g){if(p==="change")return g}var Q6=!1;if(Zl){var RS;if(Zl){var BS="oninput"in document;if(!BS){var J6=document.createElement("div");J6.setAttribute("oninput","return;"),BS=typeof J6.oninput=="function"}RS=BS}else RS=!1;Q6=RS&&(!document.documentMode||9<document.documentMode)}function eO(){I0&&(I0.detachEvent("onpropertychange",tO),R0=I0=null)}function tO(p){if(p.propertyName==="value"&&sb(R0)){var g=[];X6(g,R0,p,TS(p)),P6(fre,g)}}function dre(p,g,y){p==="focusin"?(eO(),I0=g,R0=y,I0.attachEvent("onpropertychange",tO)):p==="focusout"&&eO()}function hre(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return sb(R0)}function pre(p,g){if(p==="click")return sb(g)}function mre(p,g){if(p==="input"||p==="change")return sb(g)}function gre(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var ca=typeof Object.is=="function"?Object.is:gre;function B0(p,g){if(ca(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var y=Object.keys(p),S=Object.keys(g);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var O=y[S];if(!st.call(g,O)||!ca(p[O],g[O]))return!1}return!0}function nO(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function rO(p,g){var y=nO(p);p=0;for(var S;y;){if(y.nodeType===3){if(S=p+y.textContent.length,p<=g&&S>=g)return{node:y,offset:g-p};p=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=nO(y)}}function iO(p,g){return p&&g?p===g?!0:p&&p.nodeType===3?!1:g&&g.nodeType===3?iO(p,g.parentNode):"contains"in p?p.contains(g):p.compareDocumentPosition?!!(p.compareDocumentPosition(g)&16):!1:!1}function oO(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var g=eb(p.document);g instanceof p.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)p=g.contentWindow;else break;g=eb(p.document)}return g}function LS(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g&&(g==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||g==="textarea"||p.contentEditable==="true")}var vre=Zl&&"documentMode"in document&&11>=document.documentMode,Ph=null,FS=null,L0=null,PS=!1;function aO(p,g,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;PS||Ph==null||Ph!==eb(S)||(S=Ph,"selectionStart"in S&&LS(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),L0&&B0(L0,S)||(L0=S,S=Kb(FS,"onSelect"),0<S.length&&(g=new ob("onSelect","select",null,g,y),p.push({event:g,listeners:S}),g.target=Ph)))}function nd(p,g){var y={};return y[p.toLowerCase()]=g.toLowerCase(),y["Webkit"+p]="webkit"+g,y["Moz"+p]="moz"+g,y}var $h={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionrun:nd("Transition","TransitionRun"),transitionstart:nd("Transition","TransitionStart"),transitioncancel:nd("Transition","TransitionCancel"),transitionend:nd("Transition","TransitionEnd")},$S={},sO={};Zl&&(sO=document.createElement("div").style,"AnimationEvent"in window||(delete $h.animationend.animation,delete $h.animationiteration.animation,delete $h.animationstart.animation),"TransitionEvent"in window||delete $h.transitionend.transition);function rd(p){if($S[p])return $S[p];if(!$h[p])return p;var g=$h[p],y;for(y in g)if(g.hasOwnProperty(y)&&y in sO)return $S[p]=g[y];return p}var lO=rd("animationend"),uO=rd("animationiteration"),cO=rd("animationstart"),bre=rd("transitionrun"),yre=rd("transitionstart"),xre=rd("transitioncancel"),fO=rd("transitionend"),dO=new Map,zS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zS.push("scrollEnd");function Ns(p,g){dO.set(p,g),ua(g,[p])}var lb=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},$a=[],zh=0,US=0;function ub(){for(var p=zh,g=US=zh=0;g<p;){var y=$a[g];$a[g++]=null;var S=$a[g];$a[g++]=null;var O=$a[g];$a[g++]=null;var R=$a[g];if($a[g++]=null,S!==null&&O!==null){var Y=S.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),S.pending=O}R!==0&&hO(y,O,R)}}function cb(p,g,y,S){$a[zh++]=p,$a[zh++]=g,$a[zh++]=y,$a[zh++]=S,US|=S,p.lanes|=S,p=p.alternate,p!==null&&(p.lanes|=S)}function HS(p,g,y,S){return cb(p,g,y,S),fb(p)}function id(p,g){return cb(p,null,null,g),fb(p)}function hO(p,g,y){p.lanes|=y;var S=p.alternate;S!==null&&(S.lanes|=y);for(var O=!1,R=p.return;R!==null;)R.childLanes|=y,S=R.alternate,S!==null&&(S.childLanes|=y),R.tag===22&&(p=R.stateNode,p===null||p._visibility&1||(O=!0)),p=R,R=R.return;return p.tag===3?(R=p.stateNode,O&&g!==null&&(O=31-pt(y),p=R.hiddenUpdates,S=p[O],S===null?p[O]=[g]:S.push(g),g.lane=y|536870912),R):null}function fb(p){if(50<ig)throw ig=0,ZT=null,Error(r(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}var Uh={};function wre(p,g,y,S){this.tag=p,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(p,g,y,S){return new wre(p,g,y,S)}function VS(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Ql(p,g){var y=p.alternate;return y===null?(y=fa(p.tag,g,p.key,p.mode),y.elementType=p.elementType,y.type=p.type,y.stateNode=p.stateNode,y.alternate=p,p.alternate=y):(y.pendingProps=g,y.type=p.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=p.flags&65011712,y.childLanes=p.childLanes,y.lanes=p.lanes,y.child=p.child,y.memoizedProps=p.memoizedProps,y.memoizedState=p.memoizedState,y.updateQueue=p.updateQueue,g=p.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=p.sibling,y.index=p.index,y.ref=p.ref,y.refCleanup=p.refCleanup,y}function pO(p,g){p.flags&=65011714;var y=p.alternate;return y===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,g=y.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function db(p,g,y,S,O,R){var Y=0;if(S=p,typeof p=="function")VS(p)&&(Y=1);else if(typeof p=="string")Y=Aie(p,y,ee.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case M:return p=fa(31,y,g,O),p.elementType=M,p.lanes=R,p;case v:return od(y.children,O,R,g);case b:Y=8,O|=24;break;case x:return p=fa(12,y,g,O|2),p.elementType=x,p.lanes=R,p;case E:return p=fa(13,y,g,O),p.elementType=E,p.lanes=R,p;case T:return p=fa(19,y,g,O),p.elementType=T,p.lanes=R,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case w:Y=10;break e;case C:Y=9;break e;case A:Y=11;break e;case N:Y=14;break e;case D:Y=16,S=null;break e}Y=29,y=Error(r(130,p===null?"null":typeof p,"")),S=null}return g=fa(Y,y,g,O),g.elementType=p,g.type=S,g.lanes=R,g}function od(p,g,y,S){return p=fa(7,p,S,g),p.lanes=y,p}function qS(p,g,y){return p=fa(6,p,null,g),p.lanes=y,p}function mO(p){var g=fa(18,null,null,0);return g.stateNode=p,g}function jS(p,g,y){return g=fa(4,p.children!==null?p.children:[],p.key,g),g.lanes=y,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}var gO=new WeakMap;function za(p,g){if(typeof p=="object"&&p!==null){var y=gO.get(p);return y!==void 0?y:(g={value:p,source:g,stack:Qe(g)},gO.set(p,g),g)}return{value:p,source:g,stack:Qe(g)}}var Hh=[],Vh=0,hb=null,F0=0,Ua=[],Ha=0,cc=null,bl=1,yl="";function Jl(p,g){Hh[Vh++]=F0,Hh[Vh++]=hb,hb=p,F0=g}function vO(p,g,y){Ua[Ha++]=bl,Ua[Ha++]=yl,Ua[Ha++]=cc,cc=p;var S=bl;p=yl;var O=32-pt(S)-1;S&=~(1<<O),y+=1;var R=32-pt(g)+O;if(30<R){var Y=O-O%5;R=(S&(1<<Y)-1).toString(32),S>>=Y,O-=Y,bl=1<<32-pt(g)+O|y<<O|S,yl=R+p}else bl=1<<R|y<<O|S,yl=p}function GS(p){p.return!==null&&(Jl(p,1),vO(p,1,0))}function YS(p){for(;p===hb;)hb=Hh[--Vh],Hh[Vh]=null,F0=Hh[--Vh],Hh[Vh]=null;for(;p===cc;)cc=Ua[--Ha],Ua[Ha]=null,yl=Ua[--Ha],Ua[Ha]=null,bl=Ua[--Ha],Ua[Ha]=null}function bO(p,g){Ua[Ha++]=bl,Ua[Ha++]=yl,Ua[Ha++]=cc,bl=g.id,yl=g.overflow,cc=p}var _i=null,Er=null,Tn=!1,fc=null,Va=!1,WS=Error(r(519));function dc(p){var g=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw P0(za(g,p)),WS}function yO(p){var g=p.stateNode,y=p.type,S=p.memoizedProps;switch(g[li]=p,g[Wi]=S,y){case"dialog":bn("cancel",g),bn("close",g);break;case"iframe":case"object":case"embed":bn("load",g);break;case"video":case"audio":for(y=0;y<ag.length;y++)bn(ag[y],g);break;case"source":bn("error",g);break;case"img":case"image":case"link":bn("error",g),bn("load",g);break;case"details":bn("toggle",g);break;case"input":bn("invalid",g),O6(g,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":bn("invalid",g);break;case"textarea":bn("invalid",g),R6(g,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||S.suppressHydrationWarning===!0||LI(g.textContent,y)?(S.popover!=null&&(bn("beforetoggle",g),bn("toggle",g)),S.onScroll!=null&&bn("scroll",g),S.onScrollEnd!=null&&bn("scrollend",g),S.onClick!=null&&(g.onclick=Xl),g=!0):g=!1,g||dc(p,!0)}function xO(p){for(_i=p.return;_i;)switch(_i.tag){case 5:case 31:case 13:Va=!1;return;case 27:case 3:Va=!0;return;default:_i=_i.return}}function qh(p){if(p!==_i)return!1;if(!Tn)return xO(p),Tn=!0,!1;var g=p.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=p.type,y=!(y!=="form"&&y!=="button")||dA(p.type,p.memoizedProps)),y=!y),y&&Er&&dc(p),xO(p),g===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Er=jI(p)}else if(g===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Er=jI(p)}else g===27?(g=Er,Ac(p.type)?(p=vA,vA=null,Er=p):Er=g):Er=_i?ja(p.stateNode.nextSibling):null;return!0}function ad(){Er=_i=null,Tn=!1}function KS(){var p=fc;return p!==null&&($o===null?$o=p:$o.push.apply($o,p),fc=null),p}function P0(p){fc===null?fc=[p]:fc.push(p)}var XS=W(null),sd=null,eu=null;function hc(p,g,y){I(XS,g._currentValue),g._currentValue=y}function tu(p){p._currentValue=XS.current,K(XS)}function ZS(p,g,y){for(;p!==null;){var S=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,S!==null&&(S.childLanes|=g)):S!==null&&(S.childLanes&g)!==g&&(S.childLanes|=g),p===y)break;p=p.return}}function QS(p,g,y,S){var O=p.child;for(O!==null&&(O.return=p);O!==null;){var R=O.dependencies;if(R!==null){var Y=O.child;R=R.firstContext;e:for(;R!==null;){var ne=R;R=O;for(var Ee=0;Ee<g.length;Ee++)if(ne.context===g[Ee]){R.lanes|=y,ne=R.alternate,ne!==null&&(ne.lanes|=y),ZS(R.return,y,p),S||(Y=null);break e}R=ne.next}}else if(O.tag===18){if(Y=O.return,Y===null)throw Error(r(341));Y.lanes|=y,R=Y.alternate,R!==null&&(R.lanes|=y),ZS(Y,y,p),Y=null}else Y=O.child;if(Y!==null)Y.return=O;else for(Y=O;Y!==null;){if(Y===p){Y=null;break}if(O=Y.sibling,O!==null){O.return=Y.return,Y=O;break}Y=Y.return}O=Y}}function jh(p,g,y,S){p=null;for(var O=g,R=!1;O!==null;){if(!R){if((O.flags&524288)!==0)R=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var Y=O.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var ne=O.type;ca(O.pendingProps.value,Y.value)||(p!==null?p.push(ne):p=[ne])}}else if(O===ve.current){if(Y=O.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(p!==null?p.push(fg):p=[fg])}O=O.return}p!==null&&QS(g,p,y,S),g.flags|=262144}function pb(p){for(p=p.firstContext;p!==null;){if(!ca(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function ld(p){sd=p,eu=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Oi(p){return wO(sd,p)}function mb(p,g){return sd===null&&ld(p),wO(p,g)}function wO(p,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},eu===null){if(p===null)throw Error(r(308));eu=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else eu=eu.next=g;return y}var Ere=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(y,S){p.push(S)}};this.abort=function(){g.aborted=!0,p.forEach(function(y){return y()})}},Cre=t.unstable_scheduleCallback,Sre=t.unstable_NormalPriority,Zr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function JS(){return{controller:new Ere,data:new Map,refCount:0}}function $0(p){p.refCount--,p.refCount===0&&Cre(Sre,function(){p.controller.abort()})}var z0=null,eT=0,Gh=0,Yh=null;function Tre(p,g){if(z0===null){var y=z0=[];eT=0,Gh=rA(),Yh={status:"pending",value:void 0,then:function(S){y.push(S)}}}return eT++,g.then(EO,EO),g}function EO(){if(--eT===0&&z0!==null){Yh!==null&&(Yh.status="fulfilled");var p=z0;z0=null,Gh=0,Yh=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function Are(p,g){var y=[],S={status:"pending",value:null,reason:null,then:function(O){y.push(O)}};return p.then(function(){S.status="fulfilled",S.value=g;for(var O=0;O<y.length;O++)(0,y[O])(g)},function(O){for(S.status="rejected",S.reason=O,O=0;O<y.length;O++)(0,y[O])(void 0)}),S}var CO=L.S;L.S=function(p,g){aI=ae(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Tre(p,g),CO!==null&&CO(p,g)};var ud=W(null);function tT(){var p=ud.current;return p!==null?p:ar.pooledCache}function gb(p,g){g===null?I(ud,ud.current):I(ud,g.pool)}function SO(){var p=tT();return p===null?null:{parent:Zr._currentValue,pool:p}}var Wh=Error(r(460)),nT=Error(r(474)),vb=Error(r(542)),bb={then:function(){}};function TO(p){return p=p.status,p==="fulfilled"||p==="rejected"}function AO(p,g,y){switch(y=p[y],y===void 0?p.push(g):y!==g&&(g.then(Xl,Xl),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,DO(p),p;default:if(typeof g.status=="string")g.then(Xl,Xl);else{if(p=ar,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=g,p.status="pending",p.then(function(S){if(g.status==="pending"){var O=g;O.status="fulfilled",O.value=S}},function(S){if(g.status==="pending"){var O=g;O.status="rejected",O.reason=S}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,DO(p),p}throw fd=g,Wh}}function cd(p){try{var g=p._init;return g(p._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(fd=y,Wh):y}}var fd=null;function NO(){if(fd===null)throw Error(r(459));var p=fd;return fd=null,p}function DO(p){if(p===Wh||p===vb)throw Error(r(483))}var Kh=null,U0=0;function yb(p){var g=U0;return U0+=1,Kh===null&&(Kh=[]),AO(Kh,p,g)}function H0(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function xb(p,g){throw g.$$typeof===d?Error(r(525)):(p=Object.prototype.toString.call(g),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function MO(p){function g(Ne,Se){if(p){var Me=Ne.deletions;Me===null?(Ne.deletions=[Se],Ne.flags|=16):Me.push(Se)}}function y(Ne,Se){if(!p)return null;for(;Se!==null;)g(Ne,Se),Se=Se.sibling;return null}function S(Ne){for(var Se=new Map;Ne!==null;)Ne.key!==null?Se.set(Ne.key,Ne):Se.set(Ne.index,Ne),Ne=Ne.sibling;return Se}function O(Ne,Se){return Ne=Ql(Ne,Se),Ne.index=0,Ne.sibling=null,Ne}function R(Ne,Se,Me){return Ne.index=Me,p?(Me=Ne.alternate,Me!==null?(Me=Me.index,Me<Se?(Ne.flags|=67108866,Se):Me):(Ne.flags|=67108866,Se)):(Ne.flags|=1048576,Se)}function Y(Ne){return p&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function ne(Ne,Se,Me,je){return Se===null||Se.tag!==6?(Se=qS(Me,Ne.mode,je),Se.return=Ne,Se):(Se=O(Se,Me),Se.return=Ne,Se)}function Ee(Ne,Se,Me,je){var kt=Me.type;return kt===v?Ve(Ne,Se,Me.props.children,je,Me.key):Se!==null&&(Se.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===D&&cd(kt)===Se.type)?(Se=O(Se,Me.props),H0(Se,Me),Se.return=Ne,Se):(Se=db(Me.type,Me.key,Me.props,null,Ne.mode,je),H0(Se,Me),Se.return=Ne,Se)}function _e(Ne,Se,Me,je){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Me.containerInfo||Se.stateNode.implementation!==Me.implementation?(Se=jS(Me,Ne.mode,je),Se.return=Ne,Se):(Se=O(Se,Me.children||[]),Se.return=Ne,Se)}function Ve(Ne,Se,Me,je,kt){return Se===null||Se.tag!==7?(Se=od(Me,Ne.mode,je,kt),Se.return=Ne,Se):(Se=O(Se,Me),Se.return=Ne,Se)}function Ge(Ne,Se,Me){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=qS(""+Se,Ne.mode,Me),Se.return=Ne,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case h:return Me=db(Se.type,Se.key,Se.props,null,Ne.mode,Me),H0(Me,Se),Me.return=Ne,Me;case m:return Se=jS(Se,Ne.mode,Me),Se.return=Ne,Se;case D:return Se=cd(Se),Ge(Ne,Se,Me)}if(j(Se)||P(Se))return Se=od(Se,Ne.mode,Me,null),Se.return=Ne,Se;if(typeof Se.then=="function")return Ge(Ne,yb(Se),Me);if(Se.$$typeof===w)return Ge(Ne,mb(Ne,Se),Me);xb(Ne,Se)}return null}function Re(Ne,Se,Me,je){var kt=Se!==null?Se.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return kt!==null?null:ne(Ne,Se,""+Me,je);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case h:return Me.key===kt?Ee(Ne,Se,Me,je):null;case m:return Me.key===kt?_e(Ne,Se,Me,je):null;case D:return Me=cd(Me),Re(Ne,Se,Me,je)}if(j(Me)||P(Me))return kt!==null?null:Ve(Ne,Se,Me,je,null);if(typeof Me.then=="function")return Re(Ne,Se,yb(Me),je);if(Me.$$typeof===w)return Re(Ne,Se,mb(Ne,Me),je);xb(Ne,Me)}return null}function Fe(Ne,Se,Me,je,kt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Ne=Ne.get(Me)||null,ne(Se,Ne,""+je,kt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case h:return Ne=Ne.get(je.key===null?Me:je.key)||null,Ee(Se,Ne,je,kt);case m:return Ne=Ne.get(je.key===null?Me:je.key)||null,_e(Se,Ne,je,kt);case D:return je=cd(je),Fe(Ne,Se,Me,je,kt)}if(j(je)||P(je))return Ne=Ne.get(Me)||null,Ve(Se,Ne,je,kt,null);if(typeof je.then=="function")return Fe(Ne,Se,Me,yb(je),kt);if(je.$$typeof===w)return Fe(Ne,Se,Me,mb(Se,je),kt);xb(Se,je)}return null}function vt(Ne,Se,Me,je){for(var kt=null,$n=null,wt=Se,on=Se=0,Cn=null;wt!==null&&on<Me.length;on++){wt.index>on?(Cn=wt,wt=null):Cn=wt.sibling;var zn=Re(Ne,wt,Me[on],je);if(zn===null){wt===null&&(wt=Cn);break}p&&wt&&zn.alternate===null&&g(Ne,wt),Se=R(zn,Se,on),$n===null?kt=zn:$n.sibling=zn,$n=zn,wt=Cn}if(on===Me.length)return y(Ne,wt),Tn&&Jl(Ne,on),kt;if(wt===null){for(;on<Me.length;on++)wt=Ge(Ne,Me[on],je),wt!==null&&(Se=R(wt,Se,on),$n===null?kt=wt:$n.sibling=wt,$n=wt);return Tn&&Jl(Ne,on),kt}for(wt=S(wt);on<Me.length;on++)Cn=Fe(wt,Ne,on,Me[on],je),Cn!==null&&(p&&Cn.alternate!==null&&wt.delete(Cn.key===null?on:Cn.key),Se=R(Cn,Se,on),$n===null?kt=Cn:$n.sibling=Cn,$n=Cn);return p&&wt.forEach(function(_c){return g(Ne,_c)}),Tn&&Jl(Ne,on),kt}function Lt(Ne,Se,Me,je){if(Me==null)throw Error(r(151));for(var kt=null,$n=null,wt=Se,on=Se=0,Cn=null,zn=Me.next();wt!==null&&!zn.done;on++,zn=Me.next()){wt.index>on?(Cn=wt,wt=null):Cn=wt.sibling;var _c=Re(Ne,wt,zn.value,je);if(_c===null){wt===null&&(wt=Cn);break}p&&wt&&_c.alternate===null&&g(Ne,wt),Se=R(_c,Se,on),$n===null?kt=_c:$n.sibling=_c,$n=_c,wt=Cn}if(zn.done)return y(Ne,wt),Tn&&Jl(Ne,on),kt;if(wt===null){for(;!zn.done;on++,zn=Me.next())zn=Ge(Ne,zn.value,je),zn!==null&&(Se=R(zn,Se,on),$n===null?kt=zn:$n.sibling=zn,$n=zn);return Tn&&Jl(Ne,on),kt}for(wt=S(wt);!zn.done;on++,zn=Me.next())zn=Fe(wt,Ne,on,zn.value,je),zn!==null&&(p&&zn.alternate!==null&&wt.delete(zn.key===null?on:zn.key),Se=R(zn,Se,on),$n===null?kt=zn:$n.sibling=zn,$n=zn);return p&&wt.forEach(function(Fie){return g(Ne,Fie)}),Tn&&Jl(Ne,on),kt}function nr(Ne,Se,Me,je){if(typeof Me=="object"&&Me!==null&&Me.type===v&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case h:e:{for(var kt=Me.key;Se!==null;){if(Se.key===kt){if(kt=Me.type,kt===v){if(Se.tag===7){y(Ne,Se.sibling),je=O(Se,Me.props.children),je.return=Ne,Ne=je;break e}}else if(Se.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===D&&cd(kt)===Se.type){y(Ne,Se.sibling),je=O(Se,Me.props),H0(je,Me),je.return=Ne,Ne=je;break e}y(Ne,Se);break}else g(Ne,Se);Se=Se.sibling}Me.type===v?(je=od(Me.props.children,Ne.mode,je,Me.key),je.return=Ne,Ne=je):(je=db(Me.type,Me.key,Me.props,null,Ne.mode,je),H0(je,Me),je.return=Ne,Ne=je)}return Y(Ne);case m:e:{for(kt=Me.key;Se!==null;){if(Se.key===kt)if(Se.tag===4&&Se.stateNode.containerInfo===Me.containerInfo&&Se.stateNode.implementation===Me.implementation){y(Ne,Se.sibling),je=O(Se,Me.children||[]),je.return=Ne,Ne=je;break e}else{y(Ne,Se);break}else g(Ne,Se);Se=Se.sibling}je=jS(Me,Ne.mode,je),je.return=Ne,Ne=je}return Y(Ne);case D:return Me=cd(Me),nr(Ne,Se,Me,je)}if(j(Me))return vt(Ne,Se,Me,je);if(P(Me)){if(kt=P(Me),typeof kt!="function")throw Error(r(150));return Me=kt.call(Me),Lt(Ne,Se,Me,je)}if(typeof Me.then=="function")return nr(Ne,Se,yb(Me),je);if(Me.$$typeof===w)return nr(Ne,Se,mb(Ne,Me),je);xb(Ne,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,Se!==null&&Se.tag===6?(y(Ne,Se.sibling),je=O(Se,Me),je.return=Ne,Ne=je):(y(Ne,Se),je=qS(Me,Ne.mode,je),je.return=Ne,Ne=je),Y(Ne)):y(Ne,Se)}return function(Ne,Se,Me,je){try{U0=0;var kt=nr(Ne,Se,Me,je);return Kh=null,kt}catch(wt){if(wt===Wh||wt===vb)throw wt;var $n=fa(29,wt,null,Ne.mode);return $n.lanes=je,$n.return=Ne,$n}}}var dd=MO(!0),kO=MO(!1),pc=!1;function rT(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iT(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function mc(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function gc(p,g,y){var S=p.updateQueue;if(S===null)return null;if(S=S.shared,(Hn&2)!==0){var O=S.pending;return O===null?g.next=g:(g.next=O.next,O.next=g),S.pending=g,g=fb(p),hO(p,null,y),g}return cb(p,S,g,y),fb(p)}function V0(p,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var S=g.lanes;S&=p.pendingLanes,y|=S,g.lanes=y,Gv(p,y)}}function oT(p,g){var y=p.updateQueue,S=p.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var O=null,R=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};R===null?O=R=Y:R=R.next=Y,y=y.next}while(y!==null);R===null?O=R=g:R=R.next=g}else O=R=g;y={baseState:S.baseState,firstBaseUpdate:O,lastBaseUpdate:R,shared:S.shared,callbacks:S.callbacks},p.updateQueue=y;return}p=y.lastBaseUpdate,p===null?y.firstBaseUpdate=g:p.next=g,y.lastBaseUpdate=g}var aT=!1;function q0(){if(aT){var p=Yh;if(p!==null)throw p}}function j0(p,g,y,S){aT=!1;var O=p.updateQueue;pc=!1;var R=O.firstBaseUpdate,Y=O.lastBaseUpdate,ne=O.shared.pending;if(ne!==null){O.shared.pending=null;var Ee=ne,_e=Ee.next;Ee.next=null,Y===null?R=_e:Y.next=_e,Y=Ee;var Ve=p.alternate;Ve!==null&&(Ve=Ve.updateQueue,ne=Ve.lastBaseUpdate,ne!==Y&&(ne===null?Ve.firstBaseUpdate=_e:ne.next=_e,Ve.lastBaseUpdate=Ee))}if(R!==null){var Ge=O.baseState;Y=0,Ve=_e=Ee=null,ne=R;do{var Re=ne.lane&-536870913,Fe=Re!==ne.lane;if(Fe?(En&Re)===Re:(S&Re)===Re){Re!==0&&Re===Gh&&(aT=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var vt=p,Lt=ne;Re=g;var nr=y;switch(Lt.tag){case 1:if(vt=Lt.payload,typeof vt=="function"){Ge=vt.call(nr,Ge,Re);break e}Ge=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=Lt.payload,Re=typeof vt=="function"?vt.call(nr,Ge,Re):vt,Re==null)break e;Ge=f({},Ge,Re);break e;case 2:pc=!0}}Re=ne.callback,Re!==null&&(p.flags|=64,Fe&&(p.flags|=8192),Fe=O.callbacks,Fe===null?O.callbacks=[Re]:Fe.push(Re))}else Fe={lane:Re,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ve===null?(_e=Ve=Fe,Ee=Ge):Ve=Ve.next=Fe,Y|=Re;if(ne=ne.next,ne===null){if(ne=O.shared.pending,ne===null)break;Fe=ne,ne=Fe.next,Fe.next=null,O.lastBaseUpdate=Fe,O.shared.pending=null}}while(!0);Ve===null&&(Ee=Ge),O.baseState=Ee,O.firstBaseUpdate=_e,O.lastBaseUpdate=Ve,R===null&&(O.shared.lanes=0),wc|=Y,p.lanes=Y,p.memoizedState=Ge}}function _O(p,g){if(typeof p!="function")throw Error(r(191,p));p.call(g)}function OO(p,g){var y=p.callbacks;if(y!==null)for(p.callbacks=null,p=0;p<y.length;p++)_O(y[p],g)}var Xh=W(null),wb=W(0);function IO(p,g){p=cu,I(wb,p),I(Xh,g),cu=p|g.baseLanes}function sT(){I(wb,cu),I(Xh,Xh.current)}function lT(){cu=wb.current,K(Xh),K(wb)}var da=W(null),qa=null;function vc(p){var g=p.alternate;I(Hr,Hr.current&1),I(da,p),qa===null&&(g===null||Xh.current!==null||g.memoizedState!==null)&&(qa=p)}function uT(p){I(Hr,Hr.current),I(da,p),qa===null&&(qa=p)}function RO(p){p.tag===22?(I(Hr,Hr.current),I(da,p),qa===null&&(qa=p)):bc()}function bc(){I(Hr,Hr.current),I(da,da.current)}function ha(p){K(da),qa===p&&(qa=null),K(Hr)}var Hr=W(0);function Eb(p){for(var g=p;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||mA(y)||gA(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var nu=0,en=null,er=null,Qr=null,Cb=!1,Zh=!1,hd=!1,Sb=0,G0=0,Qh=null,Nre=0;function Rr(){throw Error(r(321))}function cT(p,g){if(g===null)return!1;for(var y=0;y<g.length&&y<p.length;y++)if(!ca(p[y],g[y]))return!1;return!0}function fT(p,g,y,S,O,R){return nu=R,en=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,L.H=p===null||p.memoizedState===null?v8:AT,hd=!1,R=y(S,O),hd=!1,Zh&&(R=LO(g,y,S,O)),BO(p),R}function BO(p){L.H=K0;var g=er!==null&&er.next!==null;if(nu=0,Qr=er=en=null,Cb=!1,G0=0,Qh=null,g)throw Error(r(300));p===null||Jr||(p=p.dependencies,p!==null&&pb(p)&&(Jr=!0))}function LO(p,g,y,S){en=p;var O=0;do{if(Zh&&(Qh=null),G0=0,Zh=!1,25<=O)throw Error(r(301));if(O+=1,Qr=er=null,p.updateQueue!=null){var R=p.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}L.H=b8,R=g(y,S)}while(Zh);return R}function Dre(){var p=L.H,g=p.useState()[0];return g=typeof g.then=="function"?Y0(g):g,p=p.useState()[0],(er!==null?er.memoizedState:null)!==p&&(en.flags|=1024),g}function dT(){var p=Sb!==0;return Sb=0,p}function hT(p,g,y){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~y}function pT(p){if(Cb){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Cb=!1}nu=0,Qr=er=en=null,Zh=!1,G0=Sb=0,Qh=null}function go(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?en.memoizedState=Qr=p:Qr=Qr.next=p,Qr}function Vr(){if(er===null){var p=en.alternate;p=p!==null?p.memoizedState:null}else p=er.next;var g=Qr===null?en.memoizedState:Qr.next;if(g!==null)Qr=g,er=p;else{if(p===null)throw en.alternate===null?Error(r(467)):Error(r(310));er=p,p={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},Qr===null?en.memoizedState=Qr=p:Qr=Qr.next=p}return Qr}function Tb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Y0(p){var g=G0;return G0+=1,Qh===null&&(Qh=[]),p=AO(Qh,p,g),g=en,(Qr===null?g.memoizedState:Qr.next)===null&&(g=g.alternate,L.H=g===null||g.memoizedState===null?v8:AT),p}function Ab(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Y0(p);if(p.$$typeof===w)return Oi(p)}throw Error(r(438,String(p)))}function mT(p){var g=null,y=en.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var S=en.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(g={data:S.data.map(function(O){return O.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=Tb(),en.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(p),S=0;S<p;S++)y[S]=k;return g.index++,y}function ru(p,g){return typeof g=="function"?g(p):g}function Nb(p){var g=Vr();return gT(g,er,p)}function gT(p,g,y){var S=p.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var O=p.baseQueue,R=S.pending;if(R!==null){if(O!==null){var Y=O.next;O.next=R.next,R.next=Y}g.baseQueue=O=R,S.pending=null}if(R=p.baseState,O===null)p.memoizedState=R;else{g=O.next;var ne=Y=null,Ee=null,_e=g,Ve=!1;do{var Ge=_e.lane&-536870913;if(Ge!==_e.lane?(En&Ge)===Ge:(nu&Ge)===Ge){var Re=_e.revertLane;if(Re===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Ge===Gh&&(Ve=!0);else if((nu&Re)===Re){_e=_e.next,Re===Gh&&(Ve=!0);continue}else Ge={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},Ee===null?(ne=Ee=Ge,Y=R):Ee=Ee.next=Ge,en.lanes|=Re,wc|=Re;Ge=_e.action,hd&&y(R,Ge),R=_e.hasEagerState?_e.eagerState:y(R,Ge)}else Re={lane:Ge,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},Ee===null?(ne=Ee=Re,Y=R):Ee=Ee.next=Re,en.lanes|=Ge,wc|=Ge;_e=_e.next}while(_e!==null&&_e!==g);if(Ee===null?Y=R:Ee.next=ne,!ca(R,p.memoizedState)&&(Jr=!0,Ve&&(y=Yh,y!==null)))throw y;p.memoizedState=R,p.baseState=Y,p.baseQueue=Ee,S.lastRenderedState=R}return O===null&&(S.lanes=0),[p.memoizedState,S.dispatch]}function vT(p){var g=Vr(),y=g.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var S=y.dispatch,O=y.pending,R=g.memoizedState;if(O!==null){y.pending=null;var Y=O=O.next;do R=p(R,Y.action),Y=Y.next;while(Y!==O);ca(R,g.memoizedState)||(Jr=!0),g.memoizedState=R,g.baseQueue===null&&(g.baseState=R),y.lastRenderedState=R}return[R,S]}function FO(p,g,y){var S=en,O=Vr(),R=Tn;if(R){if(y===void 0)throw Error(r(407));y=y()}else y=g();var Y=!ca((er||O).memoizedState,y);if(Y&&(O.memoizedState=y,Jr=!0),O=O.queue,xT(zO.bind(null,S,O,p),[p]),O.getSnapshot!==g||Y||Qr!==null&&Qr.memoizedState.tag&1){if(S.flags|=2048,Jh(9,{destroy:void 0},$O.bind(null,S,O,y,g),null),ar===null)throw Error(r(349));R||(nu&127)!==0||PO(S,g,y)}return y}function PO(p,g,y){p.flags|=16384,p={getSnapshot:g,value:y},g=en.updateQueue,g===null?(g=Tb(),en.updateQueue=g,g.stores=[p]):(y=g.stores,y===null?g.stores=[p]:y.push(p))}function $O(p,g,y,S){g.value=y,g.getSnapshot=S,UO(g)&&HO(p)}function zO(p,g,y){return y(function(){UO(g)&&HO(p)})}function UO(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!ca(p,y)}catch{return!0}}function HO(p){var g=id(p,2);g!==null&&zo(g,p,2)}function bT(p){var g=go();if(typeof p=="function"){var y=p;if(p=y(),hd){Ut(!0);try{y()}finally{Ut(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:p},g}function VO(p,g,y,S){return p.baseState=y,gT(p,er,typeof S=="function"?S:ru)}function Mre(p,g,y,S,O){if(kb(p))throw Error(r(485));if(p=g.action,p!==null){var R={payload:O,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){R.listeners.push(Y)}};L.T!==null?y(!0):R.isTransition=!1,S(R),y=g.pending,y===null?(R.next=g.pending=R,qO(g,R)):(R.next=y.next,g.pending=y.next=R)}}function qO(p,g){var y=g.action,S=g.payload,O=p.state;if(g.isTransition){var R=L.T,Y={};L.T=Y;try{var ne=y(O,S),Ee=L.S;Ee!==null&&Ee(Y,ne),jO(p,g,ne)}catch(_e){yT(p,g,_e)}finally{R!==null&&Y.types!==null&&(R.types=Y.types),L.T=R}}else try{R=y(O,S),jO(p,g,R)}catch(_e){yT(p,g,_e)}}function jO(p,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){GO(p,g,S)},function(S){return yT(p,g,S)}):GO(p,g,y)}function GO(p,g,y){g.status="fulfilled",g.value=y,YO(g),p.state=y,g=p.pending,g!==null&&(y=g.next,y===g?p.pending=null:(y=y.next,g.next=y,qO(p,y)))}function yT(p,g,y){var S=p.pending;if(p.pending=null,S!==null){S=S.next;do g.status="rejected",g.reason=y,YO(g),g=g.next;while(g!==S)}p.action=null}function YO(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function WO(p,g){return g}function KO(p,g){if(Tn){var y=ar.formState;if(y!==null){e:{var S=en;if(Tn){if(Er){t:{for(var O=Er,R=Va;O.nodeType!==8;){if(!R){O=null;break t}if(O=ja(O.nextSibling),O===null){O=null;break t}}R=O.data,O=R==="F!"||R==="F"?O:null}if(O){Er=ja(O.nextSibling),S=O.data==="F!";break e}}dc(S)}S=!1}S&&(g=y[0])}}return y=go(),y.memoizedState=y.baseState=g,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WO,lastRenderedState:g},y.queue=S,y=p8.bind(null,en,S),S.dispatch=y,S=bT(!1),R=TT.bind(null,en,!1,S.queue),S=go(),O={state:g,dispatch:null,action:p,pending:null},S.queue=O,y=Mre.bind(null,en,O,R,y),O.dispatch=y,S.memoizedState=p,[g,y,!1]}function XO(p){var g=Vr();return ZO(g,er,p)}function ZO(p,g,y){if(g=gT(p,g,WO)[0],p=Nb(ru)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var S=Y0(g)}catch(Y){throw Y===Wh?vb:Y}else S=g;g=Vr();var O=g.queue,R=O.dispatch;return y!==g.memoizedState&&(en.flags|=2048,Jh(9,{destroy:void 0},kre.bind(null,O,y),null)),[S,R,p]}function kre(p,g){p.action=g}function QO(p){var g=Vr(),y=er;if(y!==null)return ZO(g,y,p);Vr(),g=g.memoizedState,y=Vr();var S=y.queue.dispatch;return y.memoizedState=p,[g,S,!1]}function Jh(p,g,y,S){return p={tag:p,create:y,deps:S,inst:g,next:null},g=en.updateQueue,g===null&&(g=Tb(),en.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=p.next=p:(S=y.next,y.next=p,p.next=S,g.lastEffect=p),p}function JO(){return Vr().memoizedState}function Db(p,g,y,S){var O=go();en.flags|=p,O.memoizedState=Jh(1|g,{destroy:void 0},y,S===void 0?null:S)}function Mb(p,g,y,S){var O=Vr();S=S===void 0?null:S;var R=O.memoizedState.inst;er!==null&&S!==null&&cT(S,er.memoizedState.deps)?O.memoizedState=Jh(g,R,y,S):(en.flags|=p,O.memoizedState=Jh(1|g,R,y,S))}function e8(p,g){Db(8390656,8,p,g)}function xT(p,g){Mb(2048,8,p,g)}function _re(p){en.flags|=4;var g=en.updateQueue;if(g===null)g=Tb(),en.updateQueue=g,g.events=[p];else{var y=g.events;y===null?g.events=[p]:y.push(p)}}function t8(p){var g=Vr().memoizedState;return _re({ref:g,nextImpl:p}),function(){if((Hn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}function n8(p,g){return Mb(4,2,p,g)}function r8(p,g){return Mb(4,4,p,g)}function i8(p,g){if(typeof g=="function"){p=p();var y=g(p);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function o8(p,g,y){y=y!=null?y.concat([p]):null,Mb(4,4,i8.bind(null,g,p),y)}function wT(){}function a8(p,g){var y=Vr();g=g===void 0?null:g;var S=y.memoizedState;return g!==null&&cT(g,S[1])?S[0]:(y.memoizedState=[p,g],p)}function s8(p,g){var y=Vr();g=g===void 0?null:g;var S=y.memoizedState;if(g!==null&&cT(g,S[1]))return S[0];if(S=p(),hd){Ut(!0);try{p()}finally{Ut(!1)}}return y.memoizedState=[S,g],S}function ET(p,g,y){return y===void 0||(nu&1073741824)!==0&&(En&261930)===0?p.memoizedState=g:(p.memoizedState=y,p=lI(),en.lanes|=p,wc|=p,y)}function l8(p,g,y,S){return ca(y,g)?y:Xh.current!==null?(p=ET(p,y,S),ca(p,g)||(Jr=!0),p):(nu&42)===0||(nu&1073741824)!==0&&(En&261930)===0?(Jr=!0,p.memoizedState=y):(p=lI(),en.lanes|=p,wc|=p,g)}function u8(p,g,y,S,O){var R=U.p;U.p=R!==0&&8>R?R:8;var Y=L.T,ne={};L.T=ne,TT(p,!1,g,y);try{var Ee=O(),_e=L.S;if(_e!==null&&_e(ne,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ve=Are(Ee,S);W0(p,g,Ve,ga(p))}else W0(p,g,S,ga(p))}catch(Ge){W0(p,g,{then:function(){},status:"rejected",reason:Ge},ga())}finally{U.p=R,Y!==null&&ne.types!==null&&(Y.types=ne.types),L.T=Y}}function Ore(){}function CT(p,g,y,S){if(p.tag!==5)throw Error(r(476));var O=c8(p).queue;u8(p,O,g,G,y===null?Ore:function(){return f8(p),y(S)})}function c8(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:G},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:y},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function f8(p){var g=c8(p);g.next===null&&(g=p.alternate.memoizedState),W0(p,g.next.queue,{},ga())}function ST(){return Oi(fg)}function d8(){return Vr().memoizedState}function h8(){return Vr().memoizedState}function Ire(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var y=ga();p=mc(y);var S=gc(g,p,y);S!==null&&(zo(S,g,y),V0(S,g,y)),g={cache:JS()},p.payload=g;return}g=g.return}}function Rre(p,g,y){var S=ga();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},kb(p)?m8(g,y):(y=HS(p,g,y,S),y!==null&&(zo(y,p,S),g8(y,g,S)))}function p8(p,g,y){var S=ga();W0(p,g,y,S)}function W0(p,g,y,S){var O={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(kb(p))m8(g,O);else{var R=p.alternate;if(p.lanes===0&&(R===null||R.lanes===0)&&(R=g.lastRenderedReducer,R!==null))try{var Y=g.lastRenderedState,ne=R(Y,y);if(O.hasEagerState=!0,O.eagerState=ne,ca(ne,Y))return cb(p,g,O,0),ar===null&&ub(),!1}catch{}if(y=HS(p,g,O,S),y!==null)return zo(y,p,S),g8(y,g,S),!0}return!1}function TT(p,g,y,S){if(S={lane:2,revertLane:rA(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},kb(p)){if(g)throw Error(r(479))}else g=HS(p,y,S,2),g!==null&&zo(g,p,2)}function kb(p){var g=p.alternate;return p===en||g!==null&&g===en}function m8(p,g){Zh=Cb=!0;var y=p.pending;y===null?g.next=g:(g.next=y.next,y.next=g),p.pending=g}function g8(p,g,y){if((y&4194048)!==0){var S=g.lanes;S&=p.pendingLanes,y|=S,g.lanes=y,Gv(p,y)}}var K0={readContext:Oi,use:Ab,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useLayoutEffect:Rr,useInsertionEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useSyncExternalStore:Rr,useId:Rr,useHostTransitionStatus:Rr,useFormState:Rr,useActionState:Rr,useOptimistic:Rr,useMemoCache:Rr,useCacheRefresh:Rr};K0.useEffectEvent=Rr;var v8={readContext:Oi,use:Ab,useCallback:function(p,g){return go().memoizedState=[p,g===void 0?null:g],p},useContext:Oi,useEffect:e8,useImperativeHandle:function(p,g,y){y=y!=null?y.concat([p]):null,Db(4194308,4,i8.bind(null,g,p),y)},useLayoutEffect:function(p,g){return Db(4194308,4,p,g)},useInsertionEffect:function(p,g){Db(4,2,p,g)},useMemo:function(p,g){var y=go();g=g===void 0?null:g;var S=p();if(hd){Ut(!0);try{p()}finally{Ut(!1)}}return y.memoizedState=[S,g],S},useReducer:function(p,g,y){var S=go();if(y!==void 0){var O=y(g);if(hd){Ut(!0);try{y(g)}finally{Ut(!1)}}}else O=g;return S.memoizedState=S.baseState=O,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:O},S.queue=p,p=p.dispatch=Rre.bind(null,en,p),[S.memoizedState,p]},useRef:function(p){var g=go();return p={current:p},g.memoizedState=p},useState:function(p){p=bT(p);var g=p.queue,y=p8.bind(null,en,g);return g.dispatch=y,[p.memoizedState,y]},useDebugValue:wT,useDeferredValue:function(p,g){var y=go();return ET(y,p,g)},useTransition:function(){var p=bT(!1);return p=u8.bind(null,en,p.queue,!0,!1),go().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,y){var S=en,O=go();if(Tn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=g(),ar===null)throw Error(r(349));(En&127)!==0||PO(S,g,y)}O.memoizedState=y;var R={value:y,getSnapshot:g};return O.queue=R,e8(zO.bind(null,S,R,p),[p]),S.flags|=2048,Jh(9,{destroy:void 0},$O.bind(null,S,R,y,g),null),y},useId:function(){var p=go(),g=ar.identifierPrefix;if(Tn){var y=yl,S=bl;y=(S&~(1<<32-pt(S)-1)).toString(32)+y,g="_"+g+"R_"+y,y=Sb++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=Nre++,g="_"+g+"r_"+y.toString(32)+"_";return p.memoizedState=g},useHostTransitionStatus:ST,useFormState:KO,useActionState:KO,useOptimistic:function(p){var g=go();g.memoizedState=g.baseState=p;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=TT.bind(null,en,!0,y),y.dispatch=g,[p,g]},useMemoCache:mT,useCacheRefresh:function(){return go().memoizedState=Ire.bind(null,en)},useEffectEvent:function(p){var g=go(),y={impl:p};return g.memoizedState=y,function(){if((Hn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},AT={readContext:Oi,use:Ab,useCallback:a8,useContext:Oi,useEffect:xT,useImperativeHandle:o8,useInsertionEffect:n8,useLayoutEffect:r8,useMemo:s8,useReducer:Nb,useRef:JO,useState:function(){return Nb(ru)},useDebugValue:wT,useDeferredValue:function(p,g){var y=Vr();return l8(y,er.memoizedState,p,g)},useTransition:function(){var p=Nb(ru)[0],g=Vr().memoizedState;return[typeof p=="boolean"?p:Y0(p),g]},useSyncExternalStore:FO,useId:d8,useHostTransitionStatus:ST,useFormState:XO,useActionState:XO,useOptimistic:function(p,g){var y=Vr();return VO(y,er,p,g)},useMemoCache:mT,useCacheRefresh:h8};AT.useEffectEvent=t8;var b8={readContext:Oi,use:Ab,useCallback:a8,useContext:Oi,useEffect:xT,useImperativeHandle:o8,useInsertionEffect:n8,useLayoutEffect:r8,useMemo:s8,useReducer:vT,useRef:JO,useState:function(){return vT(ru)},useDebugValue:wT,useDeferredValue:function(p,g){var y=Vr();return er===null?ET(y,p,g):l8(y,er.memoizedState,p,g)},useTransition:function(){var p=vT(ru)[0],g=Vr().memoizedState;return[typeof p=="boolean"?p:Y0(p),g]},useSyncExternalStore:FO,useId:d8,useHostTransitionStatus:ST,useFormState:QO,useActionState:QO,useOptimistic:function(p,g){var y=Vr();return er!==null?VO(y,er,p,g):(y.baseState=p,[p,y.queue.dispatch])},useMemoCache:mT,useCacheRefresh:h8};b8.useEffectEvent=t8;function NT(p,g,y,S){g=p.memoizedState,y=y(S,g),y=y==null?g:f({},g,y),p.memoizedState=y,p.lanes===0&&(p.updateQueue.baseState=y)}var DT={enqueueSetState:function(p,g,y){p=p._reactInternals;var S=ga(),O=mc(S);O.payload=g,y!=null&&(O.callback=y),g=gc(p,O,S),g!==null&&(zo(g,p,S),V0(g,p,S))},enqueueReplaceState:function(p,g,y){p=p._reactInternals;var S=ga(),O=mc(S);O.tag=1,O.payload=g,y!=null&&(O.callback=y),g=gc(p,O,S),g!==null&&(zo(g,p,S),V0(g,p,S))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var y=ga(),S=mc(y);S.tag=2,g!=null&&(S.callback=g),g=gc(p,S,y),g!==null&&(zo(g,p,y),V0(g,p,y))}};function y8(p,g,y,S,O,R,Y){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(S,R,Y):g.prototype&&g.prototype.isPureReactComponent?!B0(y,S)||!B0(O,R):!0}function x8(p,g,y,S){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,S),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,S),g.state!==p&&DT.enqueueReplaceState(g,g.state,null)}function pd(p,g){var y=g;if("ref"in g){y={};for(var S in g)S!=="ref"&&(y[S]=g[S])}if(p=p.defaultProps){y===g&&(y=f({},y));for(var O in p)y[O]===void 0&&(y[O]=p[O])}return y}function w8(p){lb(p)}function E8(p){console.error(p)}function C8(p){lb(p)}function _b(p,g){try{var y=p.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(S){setTimeout(function(){throw S})}}function S8(p,g,y){try{var S=p.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function MT(p,g,y){return y=mc(y),y.tag=3,y.payload={element:null},y.callback=function(){_b(p,g)},y}function T8(p){return p=mc(p),p.tag=3,p}function A8(p,g,y,S){var O=y.type.getDerivedStateFromError;if(typeof O=="function"){var R=S.value;p.payload=function(){return O(R)},p.callback=function(){S8(g,y,S)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(p.callback=function(){S8(g,y,S),typeof O!="function"&&(Ec===null?Ec=new Set([this]):Ec.add(this));var ne=S.stack;this.componentDidCatch(S.value,{componentStack:ne!==null?ne:""})})}function Bre(p,g,y,S,O){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(g=y.alternate,g!==null&&jh(g,y,O,!0),y=da.current,y!==null){switch(y.tag){case 31:case 13:return qa===null?Vb():y.alternate===null&&Br===0&&(Br=3),y.flags&=-257,y.flags|=65536,y.lanes=O,S===bb?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([S]):g.add(S),eA(p,S,O)),!1;case 22:return y.flags|=65536,S===bb?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([S]):y.add(S)),eA(p,S,O)),!1}throw Error(r(435,y.tag))}return eA(p,S,O),Vb(),!1}if(Tn)return g=da.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=O,S!==WS&&(p=Error(r(422),{cause:S}),P0(za(p,y)))):(S!==WS&&(g=Error(r(423),{cause:S}),P0(za(g,y))),p=p.current.alternate,p.flags|=65536,O&=-O,p.lanes|=O,S=za(S,y),O=MT(p.stateNode,S,O),oT(p,O),Br!==4&&(Br=2)),!1;var R=Error(r(520),{cause:S});if(R=za(R,y),rg===null?rg=[R]:rg.push(R),Br!==4&&(Br=2),g===null)return!0;S=za(S,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,p=O&-O,y.lanes|=p,p=MT(y.stateNode,S,p),oT(y,p),!1;case 1:if(g=y.type,R=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Ec===null||!Ec.has(R))))return y.flags|=65536,O&=-O,y.lanes|=O,O=T8(O),A8(O,p,y,S),oT(y,O),!1}y=y.return}while(y!==null);return!1}var kT=Error(r(461)),Jr=!1;function Ii(p,g,y,S){g.child=p===null?kO(g,null,y,S):dd(g,p.child,y,S)}function N8(p,g,y,S,O){y=y.render;var R=g.ref;if("ref"in S){var Y={};for(var ne in S)ne!=="ref"&&(Y[ne]=S[ne])}else Y=S;return ld(g),S=fT(p,g,y,Y,R,O),ne=dT(),p!==null&&!Jr?(hT(p,g,O),iu(p,g,O)):(Tn&&ne&&GS(g),g.flags|=1,Ii(p,g,S,O),g.child)}function D8(p,g,y,S,O){if(p===null){var R=y.type;return typeof R=="function"&&!VS(R)&&R.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=R,M8(p,g,R,S,O)):(p=db(y.type,null,S,g,g.mode,O),p.ref=g.ref,p.return=g,g.child=p)}if(R=p.child,!PT(p,O)){var Y=R.memoizedProps;if(y=y.compare,y=y!==null?y:B0,y(Y,S)&&p.ref===g.ref)return iu(p,g,O)}return g.flags|=1,p=Ql(R,S),p.ref=g.ref,p.return=g,g.child=p}function M8(p,g,y,S,O){if(p!==null){var R=p.memoizedProps;if(B0(R,S)&&p.ref===g.ref)if(Jr=!1,g.pendingProps=S=R,PT(p,O))(p.flags&131072)!==0&&(Jr=!0);else return g.lanes=p.lanes,iu(p,g,O)}return _T(p,g,y,S,O)}function k8(p,g,y,S){var O=S.children,R=p!==null?p.memoizedState:null;if(p===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((g.flags&128)!==0){if(R=R!==null?R.baseLanes|y:y,p!==null){for(S=g.child=p.child,O=0;S!==null;)O=O|S.lanes|S.childLanes,S=S.sibling;S=O&~R}else S=0,g.child=null;return _8(p,g,R,y,S)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&gb(g,R!==null?R.cachePool:null),R!==null?IO(g,R):sT(),RO(g);else return S=g.lanes=536870912,_8(p,g,R!==null?R.baseLanes|y:y,y,S)}else R!==null?(gb(g,R.cachePool),IO(g,R),bc(),g.memoizedState=null):(p!==null&&gb(g,null),sT(),bc());return Ii(p,g,O,y),g.child}function X0(p,g){return p!==null&&p.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function _8(p,g,y,S,O){var R=tT();return R=R===null?null:{parent:Zr._currentValue,pool:R},g.memoizedState={baseLanes:y,cachePool:R},p!==null&&gb(g,null),sT(),RO(g),p!==null&&jh(p,g,S,!0),g.childLanes=O,null}function Ob(p,g){return g=Rb({mode:g.mode,children:g.children},p.mode),g.ref=p.ref,p.child=g,g.return=p,g}function O8(p,g,y){return dd(g,p.child,null,y),p=Ob(g,g.pendingProps),p.flags|=2,ha(g),g.memoizedState=null,p}function Lre(p,g,y){var S=g.pendingProps,O=(g.flags&128)!==0;if(g.flags&=-129,p===null){if(Tn){if(S.mode==="hidden")return p=Ob(g,S),g.lanes=536870912,X0(null,p);if(uT(g),(p=Er)?(p=qI(p,Va),p=p!==null&&p.data==="&"?p:null,p!==null&&(g.memoizedState={dehydrated:p,treeContext:cc!==null?{id:bl,overflow:yl}:null,retryLane:536870912,hydrationErrors:null},y=mO(p),y.return=g,g.child=y,_i=g,Er=null)):p=null,p===null)throw dc(g);return g.lanes=536870912,null}return Ob(g,S)}var R=p.memoizedState;if(R!==null){var Y=R.dehydrated;if(uT(g),O)if(g.flags&256)g.flags&=-257,g=O8(p,g,y);else if(g.memoizedState!==null)g.child=p.child,g.flags|=128,g=null;else throw Error(r(558));else if(Jr||jh(p,g,y,!1),O=(y&p.childLanes)!==0,Jr||O){if(S=ar,S!==null&&(Y=Yv(S,y),Y!==0&&Y!==R.retryLane))throw R.retryLane=Y,id(p,Y),zo(S,p,Y),kT;Vb(),g=O8(p,g,y)}else p=R.treeContext,Er=ja(Y.nextSibling),_i=g,Tn=!0,fc=null,Va=!1,p!==null&&bO(g,p),g=Ob(g,S),g.flags|=4096;return g}return p=Ql(p.child,{mode:S.mode,children:S.children}),p.ref=g.ref,g.child=p,p.return=g,p}function Ib(p,g){var y=g.ref;if(y===null)p!==null&&p.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(p===null||p.ref!==y)&&(g.flags|=4194816)}}function _T(p,g,y,S,O){return ld(g),y=fT(p,g,y,S,void 0,O),S=dT(),p!==null&&!Jr?(hT(p,g,O),iu(p,g,O)):(Tn&&S&&GS(g),g.flags|=1,Ii(p,g,y,O),g.child)}function I8(p,g,y,S,O,R){return ld(g),g.updateQueue=null,y=LO(g,S,y,O),BO(p),S=dT(),p!==null&&!Jr?(hT(p,g,R),iu(p,g,R)):(Tn&&S&&GS(g),g.flags|=1,Ii(p,g,y,R),g.child)}function R8(p,g,y,S,O){if(ld(g),g.stateNode===null){var R=Uh,Y=y.contextType;typeof Y=="object"&&Y!==null&&(R=Oi(Y)),R=new y(S,R),g.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=DT,g.stateNode=R,R._reactInternals=g,R=g.stateNode,R.props=S,R.state=g.memoizedState,R.refs={},rT(g),Y=y.contextType,R.context=typeof Y=="object"&&Y!==null?Oi(Y):Uh,R.state=g.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(NT(g,y,Y,S),R.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Y=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Y!==R.state&&DT.enqueueReplaceState(R,R.state,null),j0(g,S,R,O),q0(),R.state=g.memoizedState),typeof R.componentDidMount=="function"&&(g.flags|=4194308),S=!0}else if(p===null){R=g.stateNode;var ne=g.memoizedProps,Ee=pd(y,ne);R.props=Ee;var _e=R.context,Ve=y.contextType;Y=Uh,typeof Ve=="object"&&Ve!==null&&(Y=Oi(Ve));var Ge=y.getDerivedStateFromProps;Ve=typeof Ge=="function"||typeof R.getSnapshotBeforeUpdate=="function",ne=g.pendingProps!==ne,Ve||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ne||_e!==Y)&&x8(g,R,S,Y),pc=!1;var Re=g.memoizedState;R.state=Re,j0(g,S,R,O),q0(),_e=g.memoizedState,ne||Re!==_e||pc?(typeof Ge=="function"&&(NT(g,y,Ge,S),_e=g.memoizedState),(Ee=pc||y8(g,y,Ee,S,Re,_e,Y))?(Ve||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(g.flags|=4194308)):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=S,g.memoizedState=_e),R.props=S,R.state=_e,R.context=Y,S=Ee):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),S=!1)}else{R=g.stateNode,iT(p,g),Y=g.memoizedProps,Ve=pd(y,Y),R.props=Ve,Ge=g.pendingProps,Re=R.context,_e=y.contextType,Ee=Uh,typeof _e=="object"&&_e!==null&&(Ee=Oi(_e)),ne=y.getDerivedStateFromProps,(_e=typeof ne=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Y!==Ge||Re!==Ee)&&x8(g,R,S,Ee),pc=!1,Re=g.memoizedState,R.state=Re,j0(g,S,R,O),q0();var Fe=g.memoizedState;Y!==Ge||Re!==Fe||pc||p!==null&&p.dependencies!==null&&pb(p.dependencies)?(typeof ne=="function"&&(NT(g,y,ne,S),Fe=g.memoizedState),(Ve=pc||y8(g,y,Ve,S,Re,Fe,Ee)||p!==null&&p.dependencies!==null&&pb(p.dependencies))?(_e||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(S,Fe,Ee),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(S,Fe,Ee)),typeof R.componentDidUpdate=="function"&&(g.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof R.componentDidUpdate!="function"||Y===p.memoizedProps&&Re===p.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===p.memoizedProps&&Re===p.memoizedState||(g.flags|=1024),g.memoizedProps=S,g.memoizedState=Fe),R.props=S,R.state=Fe,R.context=Ee,S=Ve):(typeof R.componentDidUpdate!="function"||Y===p.memoizedProps&&Re===p.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===p.memoizedProps&&Re===p.memoizedState||(g.flags|=1024),S=!1)}return R=S,Ib(p,g),S=(g.flags&128)!==0,R||S?(R=g.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:R.render(),g.flags|=1,p!==null&&S?(g.child=dd(g,p.child,null,O),g.child=dd(g,null,y,O)):Ii(p,g,y,O),g.memoizedState=R.state,p=g.child):p=iu(p,g,O),p}function B8(p,g,y,S){return ad(),g.flags|=256,Ii(p,g,y,S),g.child}var OT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function IT(p){return{baseLanes:p,cachePool:SO()}}function RT(p,g,y){return p=p!==null?p.childLanes&~y:0,g&&(p|=ma),p}function L8(p,g,y){var S=g.pendingProps,O=!1,R=(g.flags&128)!==0,Y;if((Y=R)||(Y=p!==null&&p.memoizedState===null?!1:(Hr.current&2)!==0),Y&&(O=!0,g.flags&=-129),Y=(g.flags&32)!==0,g.flags&=-33,p===null){if(Tn){if(O?vc(g):bc(),(p=Er)?(p=qI(p,Va),p=p!==null&&p.data!=="&"?p:null,p!==null&&(g.memoizedState={dehydrated:p,treeContext:cc!==null?{id:bl,overflow:yl}:null,retryLane:536870912,hydrationErrors:null},y=mO(p),y.return=g,g.child=y,_i=g,Er=null)):p=null,p===null)throw dc(g);return gA(p)?g.lanes=32:g.lanes=536870912,null}var ne=S.children;return S=S.fallback,O?(bc(),O=g.mode,ne=Rb({mode:"hidden",children:ne},O),S=od(S,O,y,null),ne.return=g,S.return=g,ne.sibling=S,g.child=ne,S=g.child,S.memoizedState=IT(y),S.childLanes=RT(p,Y,y),g.memoizedState=OT,X0(null,S)):(vc(g),BT(g,ne))}var Ee=p.memoizedState;if(Ee!==null&&(ne=Ee.dehydrated,ne!==null)){if(R)g.flags&256?(vc(g),g.flags&=-257,g=LT(p,g,y)):g.memoizedState!==null?(bc(),g.child=p.child,g.flags|=128,g=null):(bc(),ne=S.fallback,O=g.mode,S=Rb({mode:"visible",children:S.children},O),ne=od(ne,O,y,null),ne.flags|=2,S.return=g,ne.return=g,S.sibling=ne,g.child=S,dd(g,p.child,null,y),S=g.child,S.memoizedState=IT(y),S.childLanes=RT(p,Y,y),g.memoizedState=OT,g=X0(null,S));else if(vc(g),gA(ne)){if(Y=ne.nextSibling&&ne.nextSibling.dataset,Y)var _e=Y.dgst;Y=_e,S=Error(r(419)),S.stack="",S.digest=Y,P0({value:S,source:null,stack:null}),g=LT(p,g,y)}else if(Jr||jh(p,g,y,!1),Y=(y&p.childLanes)!==0,Jr||Y){if(Y=ar,Y!==null&&(S=Yv(Y,y),S!==0&&S!==Ee.retryLane))throw Ee.retryLane=S,id(p,S),zo(Y,p,S),kT;mA(ne)||Vb(),g=LT(p,g,y)}else mA(ne)?(g.flags|=192,g.child=p.child,g=null):(p=Ee.treeContext,Er=ja(ne.nextSibling),_i=g,Tn=!0,fc=null,Va=!1,p!==null&&bO(g,p),g=BT(g,S.children),g.flags|=4096);return g}return O?(bc(),ne=S.fallback,O=g.mode,Ee=p.child,_e=Ee.sibling,S=Ql(Ee,{mode:"hidden",children:S.children}),S.subtreeFlags=Ee.subtreeFlags&65011712,_e!==null?ne=Ql(_e,ne):(ne=od(ne,O,y,null),ne.flags|=2),ne.return=g,S.return=g,S.sibling=ne,g.child=S,X0(null,S),S=g.child,ne=p.child.memoizedState,ne===null?ne=IT(y):(O=ne.cachePool,O!==null?(Ee=Zr._currentValue,O=O.parent!==Ee?{parent:Ee,pool:Ee}:O):O=SO(),ne={baseLanes:ne.baseLanes|y,cachePool:O}),S.memoizedState=ne,S.childLanes=RT(p,Y,y),g.memoizedState=OT,X0(p.child,S)):(vc(g),y=p.child,p=y.sibling,y=Ql(y,{mode:"visible",children:S.children}),y.return=g,y.sibling=null,p!==null&&(Y=g.deletions,Y===null?(g.deletions=[p],g.flags|=16):Y.push(p)),g.child=y,g.memoizedState=null,y)}function BT(p,g){return g=Rb({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function Rb(p,g){return p=fa(22,p,null,g),p.lanes=0,p}function LT(p,g,y){return dd(g,p.child,null,y),p=BT(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function F8(p,g,y){p.lanes|=g;var S=p.alternate;S!==null&&(S.lanes|=g),ZS(p.return,g,y)}function FT(p,g,y,S,O,R){var Y=p.memoizedState;Y===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:O,treeForkCount:R}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=S,Y.tail=y,Y.tailMode=O,Y.treeForkCount=R)}function P8(p,g,y){var S=g.pendingProps,O=S.revealOrder,R=S.tail;S=S.children;var Y=Hr.current,ne=(Y&2)!==0;if(ne?(Y=Y&1|2,g.flags|=128):Y&=1,I(Hr,Y),Ii(p,g,S,y),S=Tn?F0:0,!ne&&p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&F8(p,y,g);else if(p.tag===19)F8(p,y,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(O){case"forwards":for(y=g.child,O=null;y!==null;)p=y.alternate,p!==null&&Eb(p)===null&&(O=y),y=y.sibling;y=O,y===null?(O=g.child,g.child=null):(O=y.sibling,y.sibling=null),FT(g,!1,O,y,R,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,O=g.child,g.child=null;O!==null;){if(p=O.alternate,p!==null&&Eb(p)===null){g.child=O;break}p=O.sibling,O.sibling=y,y=O,O=p}FT(g,!0,y,null,R,S);break;case"together":FT(g,!1,null,null,void 0,S);break;default:g.memoizedState=null}return g.child}function iu(p,g,y){if(p!==null&&(g.dependencies=p.dependencies),wc|=g.lanes,(y&g.childLanes)===0)if(p!==null){if(jh(p,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(r(153));if(g.child!==null){for(p=g.child,y=Ql(p,p.pendingProps),g.child=y,y.return=g;p.sibling!==null;)p=p.sibling,y=y.sibling=Ql(p,p.pendingProps),y.return=g;y.sibling=null}return g.child}function PT(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&pb(p)))}function Fre(p,g,y){switch(g.tag){case 3:ie(g,g.stateNode.containerInfo),hc(g,Zr,p.memoizedState.cache),ad();break;case 27:case 5:le(g);break;case 4:ie(g,g.stateNode.containerInfo);break;case 10:hc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,uT(g),null;break;case 13:var S=g.memoizedState;if(S!==null)return S.dehydrated!==null?(vc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?L8(p,g,y):(vc(g),p=iu(p,g,y),p!==null?p.sibling:null);vc(g);break;case 19:var O=(p.flags&128)!==0;if(S=(y&g.childLanes)!==0,S||(jh(p,g,y,!1),S=(y&g.childLanes)!==0),O){if(S)return P8(p,g,y);g.flags|=128}if(O=g.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),I(Hr,Hr.current),S)break;return null;case 22:return g.lanes=0,k8(p,g,y,g.pendingProps);case 24:hc(g,Zr,p.memoizedState.cache)}return iu(p,g,y)}function $8(p,g,y){if(p!==null)if(p.memoizedProps!==g.pendingProps)Jr=!0;else{if(!PT(p,y)&&(g.flags&128)===0)return Jr=!1,Fre(p,g,y);Jr=(p.flags&131072)!==0}else Jr=!1,Tn&&(g.flags&1048576)!==0&&vO(g,F0,g.index);switch(g.lanes=0,g.tag){case 16:e:{var S=g.pendingProps;if(p=cd(g.elementType),g.type=p,typeof p=="function")VS(p)?(S=pd(p,S),g.tag=1,g=R8(null,g,p,S,y)):(g.tag=0,g=_T(null,g,p,S,y));else{if(p!=null){var O=p.$$typeof;if(O===A){g.tag=11,g=N8(null,g,p,S,y);break e}else if(O===N){g.tag=14,g=D8(null,g,p,S,y);break e}}throw g=z(p)||p,Error(r(306,g,""))}}return g;case 0:return _T(p,g,g.type,g.pendingProps,y);case 1:return S=g.type,O=pd(S,g.pendingProps),R8(p,g,S,O,y);case 3:e:{if(ie(g,g.stateNode.containerInfo),p===null)throw Error(r(387));S=g.pendingProps;var R=g.memoizedState;O=R.element,iT(p,g),j0(g,S,null,y);var Y=g.memoizedState;if(S=Y.cache,hc(g,Zr,S),S!==R.cache&&QS(g,[Zr],y,!0),q0(),S=Y.element,R.isDehydrated)if(R={element:S,isDehydrated:!1,cache:Y.cache},g.updateQueue.baseState=R,g.memoizedState=R,g.flags&256){g=B8(p,g,S,y);break e}else if(S!==O){O=za(Error(r(424)),g),P0(O),g=B8(p,g,S,y);break e}else for(p=g.stateNode.containerInfo,p.nodeType===9?p=p.body:p=p.nodeName==="HTML"?p.ownerDocument.body:p,Er=ja(p.firstChild),_i=g,Tn=!0,fc=null,Va=!0,y=kO(g,null,S,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(ad(),S===O){g=iu(p,g,y);break e}Ii(p,g,S,y)}g=g.child}return g;case 26:return Ib(p,g),p===null?(y=XI(g.type,null,g.pendingProps,null))?g.memoizedState=y:Tn||(y=g.type,p=g.pendingProps,S=Xb(ce.current).createElement(y),S[li]=g,S[Wi]=p,Ri(S,y,p),In(S),g.stateNode=S):g.memoizedState=XI(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:return le(g),p===null&&Tn&&(S=g.stateNode=YI(g.type,g.pendingProps,ce.current),_i=g,Va=!0,O=Er,Ac(g.type)?(vA=O,Er=ja(S.firstChild)):Er=O),Ii(p,g,g.pendingProps.children,y),Ib(p,g),p===null&&(g.flags|=4194304),g.child;case 5:return p===null&&Tn&&((O=S=Er)&&(S=hie(S,g.type,g.pendingProps,Va),S!==null?(g.stateNode=S,_i=g,Er=ja(S.firstChild),Va=!1,O=!0):O=!1),O||dc(g)),le(g),O=g.type,R=g.pendingProps,Y=p!==null?p.memoizedProps:null,S=R.children,dA(O,R)?S=null:Y!==null&&dA(O,Y)&&(g.flags|=32),g.memoizedState!==null&&(O=fT(p,g,Dre,null,null,y),fg._currentValue=O),Ib(p,g),Ii(p,g,S,y),g.child;case 6:return p===null&&Tn&&((p=y=Er)&&(y=pie(y,g.pendingProps,Va),y!==null?(g.stateNode=y,_i=g,Er=null,p=!0):p=!1),p||dc(g)),null;case 13:return L8(p,g,y);case 4:return ie(g,g.stateNode.containerInfo),S=g.pendingProps,p===null?g.child=dd(g,null,S,y):Ii(p,g,S,y),g.child;case 11:return N8(p,g,g.type,g.pendingProps,y);case 7:return Ii(p,g,g.pendingProps,y),g.child;case 8:return Ii(p,g,g.pendingProps.children,y),g.child;case 12:return Ii(p,g,g.pendingProps.children,y),g.child;case 10:return S=g.pendingProps,hc(g,g.type,S.value),Ii(p,g,S.children,y),g.child;case 9:return O=g.type._context,S=g.pendingProps.children,ld(g),O=Oi(O),S=S(O),g.flags|=1,Ii(p,g,S,y),g.child;case 14:return D8(p,g,g.type,g.pendingProps,y);case 15:return M8(p,g,g.type,g.pendingProps,y);case 19:return P8(p,g,y);case 31:return Lre(p,g,y);case 22:return k8(p,g,y,g.pendingProps);case 24:return ld(g),S=Oi(Zr),p===null?(O=tT(),O===null&&(O=ar,R=JS(),O.pooledCache=R,R.refCount++,R!==null&&(O.pooledCacheLanes|=y),O=R),g.memoizedState={parent:S,cache:O},rT(g),hc(g,Zr,O)):((p.lanes&y)!==0&&(iT(p,g),j0(g,null,null,y),q0()),O=p.memoizedState,R=g.memoizedState,O.parent!==S?(O={parent:S,cache:S},g.memoizedState=O,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=O),hc(g,Zr,S)):(S=R.cache,hc(g,Zr,S),S!==O.cache&&QS(g,[Zr],y,!0))),Ii(p,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function ou(p){p.flags|=4}function $T(p,g,y,S,O){if((g=(p.mode&32)!==0)&&(g=!1),g){if(p.flags|=16777216,(O&335544128)===O)if(p.stateNode.complete)p.flags|=8192;else if(dI())p.flags|=8192;else throw fd=bb,nT}else p.flags&=-16777217}function z8(p,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!tR(g))if(dI())p.flags|=8192;else throw fd=bb,nT}function Bb(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?qv():536870912,p.lanes|=g,rp|=g)}function Z0(p,g){if(!Tn)switch(p.tailMode){case"hidden":g=p.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?p.tail=null:y.sibling=null;break;case"collapsed":y=p.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:S.sibling=null}}function Cr(p){var g=p.alternate!==null&&p.alternate.child===p.child,y=0,S=0;if(g)for(var O=p.child;O!==null;)y|=O.lanes|O.childLanes,S|=O.subtreeFlags&65011712,S|=O.flags&65011712,O.return=p,O=O.sibling;else for(O=p.child;O!==null;)y|=O.lanes|O.childLanes,S|=O.subtreeFlags,S|=O.flags,O.return=p,O=O.sibling;return p.subtreeFlags|=S,p.childLanes=y,g}function Pre(p,g,y){var S=g.pendingProps;switch(YS(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(g),null;case 1:return Cr(g),null;case 3:return y=g.stateNode,S=null,p!==null&&(S=p.memoizedState.cache),g.memoizedState.cache!==S&&(g.flags|=2048),tu(Zr),X(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(p===null||p.child===null)&&(qh(g)?ou(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,KS())),Cr(g),null;case 26:var O=g.type,R=g.memoizedState;return p===null?(ou(g),R!==null?(Cr(g),z8(g,R)):(Cr(g),$T(g,O,null,S,y))):R?R!==p.memoizedState?(ou(g),Cr(g),z8(g,R)):(Cr(g),g.flags&=-16777217):(p=p.memoizedProps,p!==S&&ou(g),Cr(g),$T(g,O,p,S,y)),null;case 27:if(Ce(g),y=ce.current,O=g.type,p!==null&&g.stateNode!=null)p.memoizedProps!==S&&ou(g);else{if(!S){if(g.stateNode===null)throw Error(r(166));return Cr(g),null}p=ee.current,qh(g)?yO(g):(p=YI(O,S,y),g.stateNode=p,ou(g))}return Cr(g),null;case 5:if(Ce(g),O=g.type,p!==null&&g.stateNode!=null)p.memoizedProps!==S&&ou(g);else{if(!S){if(g.stateNode===null)throw Error(r(166));return Cr(g),null}if(R=ee.current,qh(g))yO(g);else{var Y=Xb(ce.current);switch(R){case 1:R=Y.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":R=Y.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":R=Y.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof S.is=="string"?Y.createElement("select",{is:S.is}):Y.createElement("select"),S.multiple?R.multiple=!0:S.size&&(R.size=S.size);break;default:R=typeof S.is=="string"?Y.createElement(O,{is:S.is}):Y.createElement(O)}}R[li]=g,R[Wi]=S;e:for(Y=g.child;Y!==null;){if(Y.tag===5||Y.tag===6)R.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===g)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===g)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}g.stateNode=R;e:switch(Ri(R,O,S),O){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&ou(g)}}return Cr(g),$T(g,g.type,p===null?null:p.memoizedProps,g.pendingProps,y),null;case 6:if(p&&g.stateNode!=null)p.memoizedProps!==S&&ou(g);else{if(typeof S!="string"&&g.stateNode===null)throw Error(r(166));if(p=ce.current,qh(g)){if(p=g.stateNode,y=g.memoizedProps,S=null,O=_i,O!==null)switch(O.tag){case 27:case 5:S=O.memoizedProps}p[li]=g,p=!!(p.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||LI(p.nodeValue,y)),p||dc(g,!0)}else p=Xb(p).createTextNode(S),p[li]=g,g.stateNode=p}return Cr(g),null;case 31:if(y=g.memoizedState,p===null||p.memoizedState!==null){if(S=qh(g),y!==null){if(p===null){if(!S)throw Error(r(318));if(p=g.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));p[li]=g}else ad(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cr(g),p=!1}else y=KS(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=y),p=!0;if(!p)return g.flags&256?(ha(g),g):(ha(g),null);if((g.flags&128)!==0)throw Error(r(558))}return Cr(g),null;case 13:if(S=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(O=qh(g),S!==null&&S.dehydrated!==null){if(p===null){if(!O)throw Error(r(318));if(O=g.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));O[li]=g}else ad(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cr(g),O=!1}else O=KS(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=O),O=!0;if(!O)return g.flags&256?(ha(g),g):(ha(g),null)}return ha(g),(g.flags&128)!==0?(g.lanes=y,g):(y=S!==null,p=p!==null&&p.memoizedState!==null,y&&(S=g.child,O=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(O=S.alternate.memoizedState.cachePool.pool),R=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(R=S.memoizedState.cachePool.pool),R!==O&&(S.flags|=2048)),y!==p&&y&&(g.child.flags|=8192),Bb(g,g.updateQueue),Cr(g),null);case 4:return X(),p===null&&sA(g.stateNode.containerInfo),Cr(g),null;case 10:return tu(g.type),Cr(g),null;case 19:if(K(Hr),S=g.memoizedState,S===null)return Cr(g),null;if(O=(g.flags&128)!==0,R=S.rendering,R===null)if(O)Z0(S,!1);else{if(Br!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(R=Eb(p),R!==null){for(g.flags|=128,Z0(S,!1),p=R.updateQueue,g.updateQueue=p,Bb(g,p),g.subtreeFlags=0,p=y,y=g.child;y!==null;)pO(y,p),y=y.sibling;return I(Hr,Hr.current&1|2),Tn&&Jl(g,S.treeForkCount),g.child}p=p.sibling}S.tail!==null&&ae()>zb&&(g.flags|=128,O=!0,Z0(S,!1),g.lanes=4194304)}else{if(!O)if(p=Eb(R),p!==null){if(g.flags|=128,O=!0,p=p.updateQueue,g.updateQueue=p,Bb(g,p),Z0(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!Tn)return Cr(g),null}else 2*ae()-S.renderingStartTime>zb&&y!==536870912&&(g.flags|=128,O=!0,Z0(S,!1),g.lanes=4194304);S.isBackwards?(R.sibling=g.child,g.child=R):(p=S.last,p!==null?p.sibling=R:g.child=R,S.last=R)}return S.tail!==null?(p=S.tail,S.rendering=p,S.tail=p.sibling,S.renderingStartTime=ae(),p.sibling=null,y=Hr.current,I(Hr,O?y&1|2:y&1),Tn&&Jl(g,S.treeForkCount),p):(Cr(g),null);case 22:case 23:return ha(g),lT(),S=g.memoizedState!==null,p!==null?p.memoizedState!==null!==S&&(g.flags|=8192):S&&(g.flags|=8192),S?(y&536870912)!==0&&(g.flags&128)===0&&(Cr(g),g.subtreeFlags&6&&(g.flags|=8192)):Cr(g),y=g.updateQueue,y!==null&&Bb(g,y.retryQueue),y=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(y=p.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==y&&(g.flags|=2048),p!==null&&K(ud),null;case 24:return y=null,p!==null&&(y=p.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),tu(Zr),Cr(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function $re(p,g){switch(YS(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return tu(Zr),X(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return Ce(g),null;case 31:if(g.memoizedState!==null){if(ha(g),g.alternate===null)throw Error(r(340));ad()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 13:if(ha(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(r(340));ad()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return K(Hr),null;case 4:return X(),null;case 10:return tu(g.type),null;case 22:case 23:return ha(g),lT(),p!==null&&K(ud),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return tu(Zr),null;case 25:return null;default:return null}}function U8(p,g){switch(YS(g),g.tag){case 3:tu(Zr),X();break;case 26:case 27:case 5:Ce(g);break;case 4:X();break;case 31:g.memoizedState!==null&&ha(g);break;case 13:ha(g);break;case 19:K(Hr);break;case 10:tu(g.type);break;case 22:case 23:ha(g),lT(),p!==null&&K(ud);break;case 24:tu(Zr)}}function Q0(p,g){try{var y=g.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var O=S.next;y=O;do{if((y.tag&p)===p){S=void 0;var R=y.create,Y=y.inst;S=R(),Y.destroy=S}y=y.next}while(y!==O)}}catch(ne){Wn(g,g.return,ne)}}function yc(p,g,y){try{var S=g.updateQueue,O=S!==null?S.lastEffect:null;if(O!==null){var R=O.next;S=R;do{if((S.tag&p)===p){var Y=S.inst,ne=Y.destroy;if(ne!==void 0){Y.destroy=void 0,O=g;var Ee=y,_e=ne;try{_e()}catch(Ve){Wn(O,Ee,Ve)}}}S=S.next}while(S!==R)}}catch(Ve){Wn(g,g.return,Ve)}}function H8(p){var g=p.updateQueue;if(g!==null){var y=p.stateNode;try{OO(g,y)}catch(S){Wn(p,p.return,S)}}}function V8(p,g,y){y.props=pd(p.type,p.memoizedProps),y.state=p.memoizedState;try{y.componentWillUnmount()}catch(S){Wn(p,g,S)}}function J0(p,g){try{var y=p.ref;if(y!==null){switch(p.tag){case 26:case 27:case 5:var S=p.stateNode;break;case 30:S=p.stateNode;break;default:S=p.stateNode}typeof y=="function"?p.refCleanup=y(S):y.current=S}}catch(O){Wn(p,g,O)}}function xl(p,g){var y=p.ref,S=p.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(O){Wn(p,g,O)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(O){Wn(p,g,O)}else y.current=null}function q8(p){var g=p.type,y=p.memoizedProps,S=p.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(O){Wn(p,p.return,O)}}function zT(p,g,y){try{var S=p.stateNode;sie(S,p.type,y,g),S[Wi]=g}catch(O){Wn(p,p.return,O)}}function j8(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&Ac(p.type)||p.tag===4}function UT(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||j8(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&Ac(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function HT(p,g,y){var S=p.tag;if(S===5||S===6)p=p.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(p,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(p),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Xl));else if(S!==4&&(S===27&&Ac(p.type)&&(y=p.stateNode,g=null),p=p.child,p!==null))for(HT(p,g,y),p=p.sibling;p!==null;)HT(p,g,y),p=p.sibling}function Lb(p,g,y){var S=p.tag;if(S===5||S===6)p=p.stateNode,g?y.insertBefore(p,g):y.appendChild(p);else if(S!==4&&(S===27&&Ac(p.type)&&(y=p.stateNode),p=p.child,p!==null))for(Lb(p,g,y),p=p.sibling;p!==null;)Lb(p,g,y),p=p.sibling}function G8(p){var g=p.stateNode,y=p.memoizedProps;try{for(var S=p.type,O=g.attributes;O.length;)g.removeAttributeNode(O[0]);Ri(g,S,y),g[li]=p,g[Wi]=y}catch(R){Wn(p,p.return,R)}}var au=!1,ei=!1,VT=!1,Y8=typeof WeakSet=="function"?WeakSet:Set,gi=null;function zre(p,g){if(p=p.containerInfo,cA=ry,p=oO(p),LS(p)){if("selectionStart"in p)var y={start:p.selectionStart,end:p.selectionEnd};else e:{y=(y=p.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var O=S.anchorOffset,R=S.focusNode;S=S.focusOffset;try{y.nodeType,R.nodeType}catch{y=null;break e}var Y=0,ne=-1,Ee=-1,_e=0,Ve=0,Ge=p,Re=null;t:for(;;){for(var Fe;Ge!==y||O!==0&&Ge.nodeType!==3||(ne=Y+O),Ge!==R||S!==0&&Ge.nodeType!==3||(Ee=Y+S),Ge.nodeType===3&&(Y+=Ge.nodeValue.length),(Fe=Ge.firstChild)!==null;)Re=Ge,Ge=Fe;for(;;){if(Ge===p)break t;if(Re===y&&++_e===O&&(ne=Y),Re===R&&++Ve===S&&(Ee=Y),(Fe=Ge.nextSibling)!==null)break;Ge=Re,Re=Ge.parentNode}Ge=Fe}y=ne===-1||Ee===-1?null:{start:ne,end:Ee}}else y=null}y=y||{start:0,end:0}}else y=null;for(fA={focusedElem:p,selectionRange:y},ry=!1,gi=g;gi!==null;)if(g=gi,p=g.child,(g.subtreeFlags&1028)!==0&&p!==null)p.return=g,gi=p;else for(;gi!==null;){switch(g=gi,R=g.alternate,p=g.flags,g.tag){case 0:if((p&4)!==0&&(p=g.updateQueue,p=p!==null?p.events:null,p!==null))for(y=0;y<p.length;y++)O=p[y],O.ref.impl=O.nextImpl;break;case 11:case 15:break;case 1:if((p&1024)!==0&&R!==null){p=void 0,y=g,O=R.memoizedProps,R=R.memoizedState,S=y.stateNode;try{var vt=pd(y.type,O);p=S.getSnapshotBeforeUpdate(vt,R),S.__reactInternalSnapshotBeforeUpdate=p}catch(Lt){Wn(y,y.return,Lt)}}break;case 3:if((p&1024)!==0){if(p=g.stateNode.containerInfo,y=p.nodeType,y===9)pA(p);else if(y===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":pA(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=g.sibling,p!==null){p.return=g.return,gi=p;break}gi=g.return}}function W8(p,g,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:lu(p,y),S&4&&Q0(5,y);break;case 1:if(lu(p,y),S&4)if(p=y.stateNode,g===null)try{p.componentDidMount()}catch(Y){Wn(y,y.return,Y)}else{var O=pd(y.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(O,g,p.__reactInternalSnapshotBeforeUpdate)}catch(Y){Wn(y,y.return,Y)}}S&64&&H8(y),S&512&&J0(y,y.return);break;case 3:if(lu(p,y),S&64&&(p=y.updateQueue,p!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{OO(p,g)}catch(Y){Wn(y,y.return,Y)}}break;case 27:g===null&&S&4&&G8(y);case 26:case 5:lu(p,y),g===null&&S&4&&q8(y),S&512&&J0(y,y.return);break;case 12:lu(p,y);break;case 31:lu(p,y),S&4&&Z8(p,y);break;case 13:lu(p,y),S&4&&Q8(p,y),S&64&&(p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(y=Kre.bind(null,y),mie(p,y))));break;case 22:if(S=y.memoizedState!==null||au,!S){g=g!==null&&g.memoizedState!==null||ei,O=au;var R=ei;au=S,(ei=g)&&!R?uu(p,y,(y.subtreeFlags&8772)!==0):lu(p,y),au=O,ei=R}break;case 30:break;default:lu(p,y)}}function K8(p){var g=p.alternate;g!==null&&(p.alternate=null,K8(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&N0(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Dr=null,Lo=!1;function su(p,g,y){for(y=y.child;y!==null;)X8(p,g,y),y=y.sibling}function X8(p,g,y){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(ht,y)}catch{}switch(y.tag){case 26:ei||xl(y,g),su(p,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ei||xl(y,g);var S=Dr,O=Lo;Ac(y.type)&&(Dr=y.stateNode,Lo=!1),su(p,g,y),lg(y.stateNode),Dr=S,Lo=O;break;case 5:ei||xl(y,g);case 6:if(S=Dr,O=Lo,Dr=null,su(p,g,y),Dr=S,Lo=O,Dr!==null)if(Lo)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(y.stateNode)}catch(R){Wn(y,g,R)}else try{Dr.removeChild(y.stateNode)}catch(R){Wn(y,g,R)}break;case 18:Dr!==null&&(Lo?(p=Dr,HI(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,y.stateNode),fp(p)):HI(Dr,y.stateNode));break;case 4:S=Dr,O=Lo,Dr=y.stateNode.containerInfo,Lo=!0,su(p,g,y),Dr=S,Lo=O;break;case 0:case 11:case 14:case 15:yc(2,y,g),ei||yc(4,y,g),su(p,g,y);break;case 1:ei||(xl(y,g),S=y.stateNode,typeof S.componentWillUnmount=="function"&&V8(y,g,S)),su(p,g,y);break;case 21:su(p,g,y);break;case 22:ei=(S=ei)||y.memoizedState!==null,su(p,g,y),ei=S;break;default:su(p,g,y)}}function Z8(p,g){if(g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{fp(p)}catch(y){Wn(g,g.return,y)}}}function Q8(p,g){if(g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{fp(p)}catch(y){Wn(g,g.return,y)}}function Ure(p){switch(p.tag){case 31:case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new Y8),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new Y8),g;default:throw Error(r(435,p.tag))}}function Fb(p,g){var y=Ure(p);g.forEach(function(S){if(!y.has(S)){y.add(S);var O=Xre.bind(null,p,S);S.then(O,O)}})}function Fo(p,g){var y=g.deletions;if(y!==null)for(var S=0;S<y.length;S++){var O=y[S],R=p,Y=g,ne=Y;e:for(;ne!==null;){switch(ne.tag){case 27:if(Ac(ne.type)){Dr=ne.stateNode,Lo=!1;break e}break;case 5:Dr=ne.stateNode,Lo=!1;break e;case 3:case 4:Dr=ne.stateNode.containerInfo,Lo=!0;break e}ne=ne.return}if(Dr===null)throw Error(r(160));X8(R,Y,O),Dr=null,Lo=!1,R=O.alternate,R!==null&&(R.return=null),O.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)J8(g,p),g=g.sibling}var Ds=null;function J8(p,g){var y=p.alternate,S=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Fo(g,p),Po(p),S&4&&(yc(3,p,p.return),Q0(3,p),yc(5,p,p.return));break;case 1:Fo(g,p),Po(p),S&512&&(ei||y===null||xl(y,y.return)),S&64&&au&&(p=p.updateQueue,p!==null&&(S=p.callbacks,S!==null&&(y=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var O=Ds;if(Fo(g,p),Po(p),S&512&&(ei||y===null||xl(y,y.return)),S&4){var R=y!==null?y.memoizedState:null;if(S=p.memoizedState,y===null)if(S===null)if(p.stateNode===null){e:{S=p.type,y=p.memoizedProps,O=O.ownerDocument||O;t:switch(S){case"title":R=O.getElementsByTagName("title")[0],(!R||R[Jf]||R[li]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=O.createElement(S),O.head.insertBefore(R,O.querySelector("head > title"))),Ri(R,S,y),R[li]=p,In(R),S=R;break e;case"link":var Y=JI("link","href",O).get(S+(y.href||""));if(Y){for(var ne=0;ne<Y.length;ne++)if(R=Y[ne],R.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&R.getAttribute("rel")===(y.rel==null?null:y.rel)&&R.getAttribute("title")===(y.title==null?null:y.title)&&R.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(ne,1);break t}}R=O.createElement(S),Ri(R,S,y),O.head.appendChild(R);break;case"meta":if(Y=JI("meta","content",O).get(S+(y.content||""))){for(ne=0;ne<Y.length;ne++)if(R=Y[ne],R.getAttribute("content")===(y.content==null?null:""+y.content)&&R.getAttribute("name")===(y.name==null?null:y.name)&&R.getAttribute("property")===(y.property==null?null:y.property)&&R.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&R.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(ne,1);break t}}R=O.createElement(S),Ri(R,S,y),O.head.appendChild(R);break;default:throw Error(r(468,S))}R[li]=p,In(R),S=R}p.stateNode=S}else eR(O,p.type,p.stateNode);else p.stateNode=QI(O,S,p.memoizedProps);else R!==S?(R===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):R.count--,S===null?eR(O,p.type,p.stateNode):QI(O,S,p.memoizedProps)):S===null&&p.stateNode!==null&&zT(p,p.memoizedProps,y.memoizedProps)}break;case 27:Fo(g,p),Po(p),S&512&&(ei||y===null||xl(y,y.return)),y!==null&&S&4&&zT(p,p.memoizedProps,y.memoizedProps);break;case 5:if(Fo(g,p),Po(p),S&512&&(ei||y===null||xl(y,y.return)),p.flags&32){O=p.stateNode;try{Rh(O,"")}catch(vt){Wn(p,p.return,vt)}}S&4&&p.stateNode!=null&&(O=p.memoizedProps,zT(p,O,y!==null?y.memoizedProps:O)),S&1024&&(VT=!0);break;case 6:if(Fo(g,p),Po(p),S&4){if(p.stateNode===null)throw Error(r(162));S=p.memoizedProps,y=p.stateNode;try{y.nodeValue=S}catch(vt){Wn(p,p.return,vt)}}break;case 3:if(Jb=null,O=Ds,Ds=Zb(g.containerInfo),Fo(g,p),Ds=O,Po(p),S&4&&y!==null&&y.memoizedState.isDehydrated)try{fp(g.containerInfo)}catch(vt){Wn(p,p.return,vt)}VT&&(VT=!1,eI(p));break;case 4:S=Ds,Ds=Zb(p.stateNode.containerInfo),Fo(g,p),Po(p),Ds=S;break;case 12:Fo(g,p),Po(p);break;case 31:Fo(g,p),Po(p),S&4&&(S=p.updateQueue,S!==null&&(p.updateQueue=null,Fb(p,S)));break;case 13:Fo(g,p),Po(p),p.child.flags&8192&&p.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&($b=ae()),S&4&&(S=p.updateQueue,S!==null&&(p.updateQueue=null,Fb(p,S)));break;case 22:O=p.memoizedState!==null;var Ee=y!==null&&y.memoizedState!==null,_e=au,Ve=ei;if(au=_e||O,ei=Ve||Ee,Fo(g,p),ei=Ve,au=_e,Po(p),S&8192)e:for(g=p.stateNode,g._visibility=O?g._visibility&-2:g._visibility|1,O&&(y===null||Ee||au||ei||md(p)),y=null,g=p;;){if(g.tag===5||g.tag===26){if(y===null){Ee=y=g;try{if(R=Ee.stateNode,O)Y=R.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ne=Ee.stateNode;var Ge=Ee.memoizedProps.style,Re=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null;ne.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(vt){Wn(Ee,Ee.return,vt)}}}else if(g.tag===6){if(y===null){Ee=g;try{Ee.stateNode.nodeValue=O?"":Ee.memoizedProps}catch(vt){Wn(Ee,Ee.return,vt)}}}else if(g.tag===18){if(y===null){Ee=g;try{var Fe=Ee.stateNode;O?VI(Fe,!0):VI(Ee.stateNode,!1)}catch(vt){Wn(Ee,Ee.return,vt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}S&4&&(S=p.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,Fb(p,y))));break;case 19:Fo(g,p),Po(p),S&4&&(S=p.updateQueue,S!==null&&(p.updateQueue=null,Fb(p,S)));break;case 30:break;case 21:break;default:Fo(g,p),Po(p)}}function Po(p){var g=p.flags;if(g&2){try{for(var y,S=p.return;S!==null;){if(j8(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var O=y.stateNode,R=UT(p);Lb(p,R,O);break;case 5:var Y=y.stateNode;y.flags&32&&(Rh(Y,""),y.flags&=-33);var ne=UT(p);Lb(p,ne,Y);break;case 3:case 4:var Ee=y.stateNode.containerInfo,_e=UT(p);HT(p,_e,Ee);break;default:throw Error(r(161))}}catch(Ve){Wn(p,p.return,Ve)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function eI(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;eI(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),p=p.sibling}}function lu(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)W8(p,g.alternate,g),g=g.sibling}function md(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:yc(4,g,g.return),md(g);break;case 1:xl(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&V8(g,g.return,y),md(g);break;case 27:lg(g.stateNode);case 26:case 5:xl(g,g.return),md(g);break;case 22:g.memoizedState===null&&md(g);break;case 30:md(g);break;default:md(g)}p=p.sibling}}function uu(p,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var S=g.alternate,O=p,R=g,Y=R.flags;switch(R.tag){case 0:case 11:case 15:uu(O,R,y),Q0(4,R);break;case 1:if(uu(O,R,y),S=R,O=S.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(_e){Wn(S,S.return,_e)}if(S=R,O=S.updateQueue,O!==null){var ne=S.stateNode;try{var Ee=O.shared.hiddenCallbacks;if(Ee!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Ee.length;O++)_O(Ee[O],ne)}catch(_e){Wn(S,S.return,_e)}}y&&Y&64&&H8(R),J0(R,R.return);break;case 27:G8(R);case 26:case 5:uu(O,R,y),y&&S===null&&Y&4&&q8(R),J0(R,R.return);break;case 12:uu(O,R,y);break;case 31:uu(O,R,y),y&&Y&4&&Z8(O,R);break;case 13:uu(O,R,y),y&&Y&4&&Q8(O,R);break;case 22:R.memoizedState===null&&uu(O,R,y),J0(R,R.return);break;case 30:break;default:uu(O,R,y)}g=g.sibling}}function qT(p,g){var y=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(y=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==y&&(p!=null&&p.refCount++,y!=null&&$0(y))}function jT(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&$0(p))}function Ms(p,g,y,S){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)tI(p,g,y,S),g=g.sibling}function tI(p,g,y,S){var O=g.flags;switch(g.tag){case 0:case 11:case 15:Ms(p,g,y,S),O&2048&&Q0(9,g);break;case 1:Ms(p,g,y,S);break;case 3:Ms(p,g,y,S),O&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&$0(p)));break;case 12:if(O&2048){Ms(p,g,y,S),p=g.stateNode;try{var R=g.memoizedProps,Y=R.id,ne=R.onPostCommit;typeof ne=="function"&&ne(Y,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ee){Wn(g,g.return,Ee)}}else Ms(p,g,y,S);break;case 31:Ms(p,g,y,S);break;case 13:Ms(p,g,y,S);break;case 23:break;case 22:R=g.stateNode,Y=g.alternate,g.memoizedState!==null?R._visibility&2?Ms(p,g,y,S):eg(p,g):R._visibility&2?Ms(p,g,y,S):(R._visibility|=2,ep(p,g,y,S,(g.subtreeFlags&10256)!==0||!1)),O&2048&&qT(Y,g);break;case 24:Ms(p,g,y,S),O&2048&&jT(g.alternate,g);break;default:Ms(p,g,y,S)}}function ep(p,g,y,S,O){for(O=O&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var R=p,Y=g,ne=y,Ee=S,_e=Y.flags;switch(Y.tag){case 0:case 11:case 15:ep(R,Y,ne,Ee,O),Q0(8,Y);break;case 23:break;case 22:var Ve=Y.stateNode;Y.memoizedState!==null?Ve._visibility&2?ep(R,Y,ne,Ee,O):eg(R,Y):(Ve._visibility|=2,ep(R,Y,ne,Ee,O)),O&&_e&2048&&qT(Y.alternate,Y);break;case 24:ep(R,Y,ne,Ee,O),O&&_e&2048&&jT(Y.alternate,Y);break;default:ep(R,Y,ne,Ee,O)}g=g.sibling}}function eg(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=p,S=g,O=S.flags;switch(S.tag){case 22:eg(y,S),O&2048&&qT(S.alternate,S);break;case 24:eg(y,S),O&2048&&jT(S.alternate,S);break;default:eg(y,S)}g=g.sibling}}var tg=8192;function tp(p,g,y){if(p.subtreeFlags&tg)for(p=p.child;p!==null;)nI(p,g,y),p=p.sibling}function nI(p,g,y){switch(p.tag){case 26:tp(p,g,y),p.flags&tg&&p.memoizedState!==null&&Nie(y,Ds,p.memoizedState,p.memoizedProps);break;case 5:tp(p,g,y);break;case 3:case 4:var S=Ds;Ds=Zb(p.stateNode.containerInfo),tp(p,g,y),Ds=S;break;case 22:p.memoizedState===null&&(S=p.alternate,S!==null&&S.memoizedState!==null?(S=tg,tg=16777216,tp(p,g,y),tg=S):tp(p,g,y));break;default:tp(p,g,y)}}function rI(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function ng(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var S=g[y];gi=S,oI(S,p)}rI(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)iI(p),p=p.sibling}function iI(p){switch(p.tag){case 0:case 11:case 15:ng(p),p.flags&2048&&yc(9,p,p.return);break;case 3:ng(p);break;case 12:ng(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&2&&(p.return===null||p.return.tag!==13)?(g._visibility&=-3,Pb(p)):ng(p);break;default:ng(p)}}function Pb(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var S=g[y];gi=S,oI(S,p)}rI(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:yc(8,g,g.return),Pb(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,Pb(g));break;default:Pb(g)}p=p.sibling}}function oI(p,g){for(;gi!==null;){var y=gi;switch(y.tag){case 0:case 11:case 15:yc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:$0(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,gi=S;else e:for(y=p;gi!==null;){S=gi;var O=S.sibling,R=S.return;if(K8(S),S===y){gi=null;break e}if(O!==null){O.return=R,gi=O;break e}gi=R}}}var Hre={getCacheForType:function(p){var g=Oi(Zr),y=g.data.get(p);return y===void 0&&(y=p(),g.data.set(p,y)),y},cacheSignal:function(){return Oi(Zr).controller.signal}},Vre=typeof WeakMap=="function"?WeakMap:Map,Hn=0,ar=null,vn=null,En=0,Yn=0,pa=null,xc=!1,np=!1,GT=!1,cu=0,Br=0,wc=0,gd=0,YT=0,ma=0,rp=0,rg=null,$o=null,WT=!1,$b=0,aI=0,zb=1/0,Ub=null,Ec=null,ui=0,Cc=null,ip=null,fu=0,KT=0,XT=null,sI=null,ig=0,ZT=null;function ga(){return(Hn&2)!==0&&En!==0?En&-En:L.T!==null?rA():Wv()}function lI(){if(ma===0)if((En&536870912)===0||Tn){var p=Xe;Xe<<=1,(Xe&3932160)===0&&(Xe=262144),ma=p}else ma=536870912;return p=da.current,p!==null&&(p.flags|=32),ma}function zo(p,g,y){(p===ar&&(Yn===2||Yn===9)||p.cancelPendingCommit!==null)&&(op(p,0),Sc(p,En,ma,!1)),Qf(p,y),((Hn&2)===0||p!==ar)&&(p===ar&&((Hn&2)===0&&(gd|=y),Br===4&&Sc(p,En,ma,!1)),wl(p))}function uI(p,g,y){if((Hn&6)!==0)throw Error(r(327));var S=!y&&(g&127)===0&&(g&p.expiredLanes)===0||La(p,g),O=S?Gre(p,g):JT(p,g,!0),R=S;do{if(O===0){np&&!S&&Sc(p,g,0,!1);break}else{if(y=p.current.alternate,R&&!qre(y)){O=JT(p,g,!1),R=!1;continue}if(O===2){if(R=g,p.errorRecoveryDisabledLanes&R)var Y=0;else Y=p.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){g=Y;e:{var ne=p;O=rg;var Ee=ne.current.memoizedState.isDehydrated;if(Ee&&(op(ne,Y).flags|=256),Y=JT(ne,Y,!1),Y!==2){if(GT&&!Ee){ne.errorRecoveryDisabledLanes|=R,gd|=R,O=4;break e}R=$o,$o=O,R!==null&&($o===null?$o=R:$o.push.apply($o,R))}O=Y}if(R=!1,O!==2)continue}}if(O===1){op(p,0),Sc(p,g,0,!0);break}e:{switch(S=p,R=O,R){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:Sc(S,g,ma,!xc);break e;case 2:$o=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(O=$b+300-ae(),10<O)){if(Sc(S,g,ma,!xc),Xr(S,0,!0)!==0)break e;fu=g,S.timeoutHandle=zI(cI.bind(null,S,y,$o,Ub,WT,g,ma,gd,rp,xc,R,"Throttled",-0,0),O);break e}cI(S,y,$o,Ub,WT,g,ma,gd,rp,xc,R,null,-0,0)}}break}while(!0);wl(p)}function cI(p,g,y,S,O,R,Y,ne,Ee,_e,Ve,Ge,Re,Fe){if(p.timeoutHandle=-1,Ge=g.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xl},nI(g,R,Ge);var vt=(R&62914560)===R?$b-ae():(R&4194048)===R?aI-ae():0;if(vt=Die(Ge,vt),vt!==null){fu=R,p.cancelPendingCommit=vt(bI.bind(null,p,g,R,y,S,O,Y,ne,Ee,Ve,Ge,null,Re,Fe)),Sc(p,R,Y,!_e);return}}bI(p,g,R,y,S,O,Y,ne,Ee)}function qre(p){for(var g=p;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var O=y[S],R=O.getSnapshot;O=O.value;try{if(!ca(R(),O))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Sc(p,g,y,S){g&=~YT,g&=~gd,p.suspendedLanes|=g,p.pingedLanes&=~g,S&&(p.warmLanes|=g),S=p.expirationTimes;for(var O=g;0<O;){var R=31-pt(O),Y=1<<R;S[R]=-1,O&=~Y}y!==0&&jv(p,y,g)}function Hb(){return(Hn&6)===0?(og(0),!1):!0}function QT(){if(vn!==null){if(Yn===0)var p=vn.return;else p=vn,eu=sd=null,pT(p),Kh=null,U0=0,p=vn;for(;p!==null;)U8(p.alternate,p),p=p.return;vn=null}}function op(p,g){var y=p.timeoutHandle;y!==-1&&(p.timeoutHandle=-1,cie(y)),y=p.cancelPendingCommit,y!==null&&(p.cancelPendingCommit=null,y()),fu=0,QT(),ar=p,vn=y=Ql(p.current,null),En=g,Yn=0,pa=null,xc=!1,np=La(p,g),GT=!1,rp=ma=YT=gd=wc=Br=0,$o=rg=null,WT=!1,(g&8)!==0&&(g|=g&32);var S=p.entangledLanes;if(S!==0)for(p=p.entanglements,S&=g;0<S;){var O=31-pt(S),R=1<<O;g|=p[O],S&=~R}return cu=g,ub(),y}function fI(p,g){en=null,L.H=K0,g===Wh||g===vb?(g=NO(),Yn=3):g===nT?(g=NO(),Yn=4):Yn=g===kT?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,pa=g,vn===null&&(Br=1,_b(p,za(g,p.current)))}function dI(){var p=da.current;return p===null?!0:(En&4194048)===En?qa===null:(En&62914560)===En||(En&536870912)!==0?p===qa:!1}function hI(){var p=L.H;return L.H=K0,p===null?K0:p}function pI(){var p=L.A;return L.A=Hre,p}function Vb(){Br=4,xc||(En&4194048)!==En&&da.current!==null||(np=!0),(wc&134217727)===0&&(gd&134217727)===0||ar===null||Sc(ar,En,ma,!1)}function JT(p,g,y){var S=Hn;Hn|=2;var O=hI(),R=pI();(ar!==p||En!==g)&&(Ub=null,op(p,g)),g=!1;var Y=Br;e:do try{if(Yn!==0&&vn!==null){var ne=vn,Ee=pa;switch(Yn){case 8:QT(),Y=6;break e;case 3:case 2:case 9:case 6:da.current===null&&(g=!0);var _e=Yn;if(Yn=0,pa=null,ap(p,ne,Ee,_e),y&&np){Y=0;break e}break;default:_e=Yn,Yn=0,pa=null,ap(p,ne,Ee,_e)}}jre(),Y=Br;break}catch(Ve){fI(p,Ve)}while(!0);return g&&p.shellSuspendCounter++,eu=sd=null,Hn=S,L.H=O,L.A=R,vn===null&&(ar=null,En=0,ub()),Y}function jre(){for(;vn!==null;)mI(vn)}function Gre(p,g){var y=Hn;Hn|=2;var S=hI(),O=pI();ar!==p||En!==g?(Ub=null,zb=ae()+500,op(p,g)):np=La(p,g);e:do try{if(Yn!==0&&vn!==null){g=vn;var R=pa;t:switch(Yn){case 1:Yn=0,pa=null,ap(p,g,R,1);break;case 2:case 9:if(TO(R)){Yn=0,pa=null,gI(g);break}g=function(){Yn!==2&&Yn!==9||ar!==p||(Yn=7),wl(p)},R.then(g,g);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:TO(R)?(Yn=0,pa=null,gI(g)):(Yn=0,pa=null,ap(p,g,R,7));break;case 5:var Y=null;switch(vn.tag){case 26:Y=vn.memoizedState;case 5:case 27:var ne=vn;if(Y?tR(Y):ne.stateNode.complete){Yn=0,pa=null;var Ee=ne.sibling;if(Ee!==null)vn=Ee;else{var _e=ne.return;_e!==null?(vn=_e,qb(_e)):vn=null}break t}}Yn=0,pa=null,ap(p,g,R,5);break;case 6:Yn=0,pa=null,ap(p,g,R,6);break;case 8:QT(),Br=6;break e;default:throw Error(r(462))}}Yre();break}catch(Ve){fI(p,Ve)}while(!0);return eu=sd=null,L.H=S,L.A=O,Hn=y,vn!==null?0:(ar=null,En=0,ub(),Br)}function Yre(){for(;vn!==null&&!me();)mI(vn)}function mI(p){var g=$8(p.alternate,p,cu);p.memoizedProps=p.pendingProps,g===null?qb(p):vn=g}function gI(p){var g=p,y=g.alternate;switch(g.tag){case 15:case 0:g=I8(y,g,g.pendingProps,g.type,void 0,En);break;case 11:g=I8(y,g,g.pendingProps,g.type.render,g.ref,En);break;case 5:pT(g);default:U8(y,g),g=vn=pO(g,cu),g=$8(y,g,cu)}p.memoizedProps=p.pendingProps,g===null?qb(p):vn=g}function ap(p,g,y,S){eu=sd=null,pT(g),Kh=null,U0=0;var O=g.return;try{if(Bre(p,O,g,y,En)){Br=1,_b(p,za(y,p.current)),vn=null;return}}catch(R){if(O!==null)throw vn=O,R;Br=1,_b(p,za(y,p.current)),vn=null;return}g.flags&32768?(Tn||S===1?p=!0:np||(En&536870912)!==0?p=!1:(xc=p=!0,(S===2||S===9||S===3||S===6)&&(S=da.current,S!==null&&S.tag===13&&(S.flags|=16384))),vI(g,p)):qb(g)}function qb(p){var g=p;do{if((g.flags&32768)!==0){vI(g,xc);return}p=g.return;var y=Pre(g.alternate,g,cu);if(y!==null){vn=y;return}if(g=g.sibling,g!==null){vn=g;return}vn=g=p}while(g!==null);Br===0&&(Br=5)}function vI(p,g){do{var y=$re(p.alternate,p);if(y!==null){y.flags&=32767,vn=y;return}if(y=p.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(p=p.sibling,p!==null)){vn=p;return}vn=p=y}while(p!==null);Br=6,vn=null}function bI(p,g,y,S,O,R,Y,ne,Ee){p.cancelPendingCommit=null;do jb();while(ui!==0);if((Hn&6)!==0)throw Error(r(327));if(g!==null){if(g===p.current)throw Error(r(177));if(R=g.lanes|g.childLanes,R|=US,vS(p,y,R,Y,ne,Ee),p===ar&&(vn=ar=null,En=0),ip=g,Cc=p,fu=y,KT=R,XT=O,sI=S,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,Zre(we,function(){return CI(),null})):(p.callbackNode=null,p.callbackPriority=0),S=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||S){S=L.T,L.T=null,O=U.p,U.p=2,Y=Hn,Hn|=4;try{zre(p,g,y)}finally{Hn=Y,U.p=O,L.T=S}}ui=1,yI(),xI(),wI()}}function yI(){if(ui===1){ui=0;var p=Cc,g=ip,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=L.T,L.T=null;var S=U.p;U.p=2;var O=Hn;Hn|=4;try{J8(g,p);var R=fA,Y=oO(p.containerInfo),ne=R.focusedElem,Ee=R.selectionRange;if(Y!==ne&&ne&&ne.ownerDocument&&iO(ne.ownerDocument.documentElement,ne)){if(Ee!==null&&LS(ne)){var _e=Ee.start,Ve=Ee.end;if(Ve===void 0&&(Ve=_e),"selectionStart"in ne)ne.selectionStart=_e,ne.selectionEnd=Math.min(Ve,ne.value.length);else{var Ge=ne.ownerDocument||document,Re=Ge&&Ge.defaultView||window;if(Re.getSelection){var Fe=Re.getSelection(),vt=ne.textContent.length,Lt=Math.min(Ee.start,vt),nr=Ee.end===void 0?Lt:Math.min(Ee.end,vt);!Fe.extend&&Lt>nr&&(Y=nr,nr=Lt,Lt=Y);var Ne=rO(ne,Lt),Se=rO(ne,nr);if(Ne&&Se&&(Fe.rangeCount!==1||Fe.anchorNode!==Ne.node||Fe.anchorOffset!==Ne.offset||Fe.focusNode!==Se.node||Fe.focusOffset!==Se.offset)){var Me=Ge.createRange();Me.setStart(Ne.node,Ne.offset),Fe.removeAllRanges(),Lt>nr?(Fe.addRange(Me),Fe.extend(Se.node,Se.offset)):(Me.setEnd(Se.node,Se.offset),Fe.addRange(Me))}}}}for(Ge=[],Fe=ne;Fe=Fe.parentNode;)Fe.nodeType===1&&Ge.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<Ge.length;ne++){var je=Ge[ne];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}ry=!!cA,fA=cA=null}finally{Hn=O,U.p=S,L.T=y}}p.current=g,ui=2}}function xI(){if(ui===2){ui=0;var p=Cc,g=ip,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=L.T,L.T=null;var S=U.p;U.p=2;var O=Hn;Hn|=4;try{W8(p,g.alternate,g)}finally{Hn=O,U.p=S,L.T=y}}ui=3}}function wI(){if(ui===4||ui===3){ui=0,J();var p=Cc,g=ip,y=fu,S=sI;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?ui=5:(ui=0,ip=Cc=null,EI(p,p.pendingLanes));var O=p.pendingLanes;if(O===0&&(Ec=null),T0(y),g=g.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(ht,g,void 0,(g.current.flags&128)===128)}catch{}if(S!==null){g=L.T,O=U.p,U.p=2,L.T=null;try{for(var R=p.onRecoverableError,Y=0;Y<S.length;Y++){var ne=S[Y];R(ne.value,{componentStack:ne.stack})}}finally{L.T=g,U.p=O}}(fu&3)!==0&&jb(),wl(p),O=p.pendingLanes,(y&261930)!==0&&(O&42)!==0?p===ZT?ig++:(ig=0,ZT=p):ig=0,og(0)}}function EI(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,$0(g)))}function jb(){return yI(),xI(),wI(),CI()}function CI(){if(ui!==5)return!1;var p=Cc,g=KT;KT=0;var y=T0(fu),S=L.T,O=U.p;try{U.p=32>y?32:y,L.T=null,y=XT,XT=null;var R=Cc,Y=fu;if(ui=0,ip=Cc=null,fu=0,(Hn&6)!==0)throw Error(r(331));var ne=Hn;if(Hn|=4,iI(R.current),tI(R,R.current,Y,y),Hn=ne,og(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(ht,R)}catch{}return!0}finally{U.p=O,L.T=S,EI(p,g)}}function SI(p,g,y){g=za(y,g),g=MT(p.stateNode,g,2),p=gc(p,g,2),p!==null&&(Qf(p,2),wl(p))}function Wn(p,g,y){if(p.tag===3)SI(p,p,y);else for(;g!==null;){if(g.tag===3){SI(g,p,y);break}else if(g.tag===1){var S=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ec===null||!Ec.has(S))){p=za(y,p),y=T8(2),S=gc(g,y,2),S!==null&&(A8(y,S,g,p),Qf(S,2),wl(S));break}}g=g.return}}function eA(p,g,y){var S=p.pingCache;if(S===null){S=p.pingCache=new Vre;var O=new Set;S.set(g,O)}else O=S.get(g),O===void 0&&(O=new Set,S.set(g,O));O.has(y)||(GT=!0,O.add(y),p=Wre.bind(null,p,g,y),g.then(p,p))}function Wre(p,g,y){var S=p.pingCache;S!==null&&S.delete(g),p.pingedLanes|=p.suspendedLanes&y,p.warmLanes&=~y,ar===p&&(En&y)===y&&(Br===4||Br===3&&(En&62914560)===En&&300>ae()-$b?(Hn&2)===0&&op(p,0):YT|=y,rp===En&&(rp=0)),wl(p)}function TI(p,g){g===0&&(g=qv()),p=id(p,g),p!==null&&(Qf(p,g),wl(p))}function Kre(p){var g=p.memoizedState,y=0;g!==null&&(y=g.retryLane),TI(p,y)}function Xre(p,g){var y=0;switch(p.tag){case 31:case 13:var S=p.stateNode,O=p.memoizedState;O!==null&&(y=O.retryLane);break;case 19:S=p.stateNode;break;case 22:S=p.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(g),TI(p,y)}function Zre(p,g){return dt(p,g)}var Gb=null,sp=null,tA=!1,Yb=!1,nA=!1,Tc=0;function wl(p){p!==sp&&p.next===null&&(sp===null?Gb=sp=p:sp=sp.next=p),Yb=!0,tA||(tA=!0,Jre())}function og(p,g){if(!nA&&Yb){nA=!0;do for(var y=!1,S=Gb;S!==null;){if(p!==0){var O=S.pendingLanes;if(O===0)var R=0;else{var Y=S.suspendedLanes,ne=S.pingedLanes;R=(1<<31-pt(42|p)+1)-1,R&=O&~(Y&~ne),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(y=!0,MI(S,R))}else R=En,R=Xr(S,S===ar?R:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(R&3)===0||La(S,R)||(y=!0,MI(S,R));S=S.next}while(y);nA=!1}}function Qre(){AI()}function AI(){Yb=tA=!1;var p=0;Tc!==0&&uie()&&(p=Tc);for(var g=ae(),y=null,S=Gb;S!==null;){var O=S.next,R=NI(S,g);R===0?(S.next=null,y===null?Gb=O:y.next=O,O===null&&(sp=y)):(y=S,(p!==0||(R&3)!==0)&&(Yb=!0)),S=O}ui!==0&&ui!==5||og(p),Tc!==0&&(Tc=0)}function NI(p,g){for(var y=p.suspendedLanes,S=p.pingedLanes,O=p.expirationTimes,R=p.pendingLanes&-62914561;0<R;){var Y=31-pt(R),ne=1<<Y,Ee=O[Y];Ee===-1?((ne&y)===0||(ne&S)!==0)&&(O[Y]=E0(ne,g)):Ee<=g&&(p.expiredLanes|=ne),R&=~ne}if(g=ar,y=En,y=Xr(p,p===g?y:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),S=p.callbackNode,y===0||p===g&&(Yn===2||Yn===9)||p.cancelPendingCommit!==null)return S!==null&&S!==null&&te(S),p.callbackNode=null,p.callbackPriority=0;if((y&3)===0||La(p,y)){if(g=y&-y,g===p.callbackPriority)return g;switch(S!==null&&te(S),T0(y)){case 2:case 8:y=fe;break;case 32:y=we;break;case 268435456:y=Oe;break;default:y=we}return S=DI.bind(null,p),y=dt(y,S),p.callbackPriority=g,p.callbackNode=y,g}return S!==null&&S!==null&&te(S),p.callbackPriority=2,p.callbackNode=null,2}function DI(p,g){if(ui!==0&&ui!==5)return p.callbackNode=null,p.callbackPriority=0,null;var y=p.callbackNode;if(jb()&&p.callbackNode!==y)return null;var S=En;return S=Xr(p,p===ar?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),S===0?null:(uI(p,S,g),NI(p,ae()),p.callbackNode!=null&&p.callbackNode===y?DI.bind(null,p):null)}function MI(p,g){if(jb())return null;uI(p,g,!0)}function Jre(){fie(function(){(Hn&6)!==0?dt(se,Qre):AI()})}function rA(){if(Tc===0){var p=Gh;p===0&&(p=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),Tc=p}return Tc}function kI(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:tb(""+p)}function _I(p,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,p.id&&y.setAttribute("form",p.id),g.parentNode.insertBefore(y,g),p=new FormData(p),y.parentNode.removeChild(y),p}function eie(p,g,y,S,O){if(g==="submit"&&y&&y.stateNode===O){var R=kI((O[Wi]||null).action),Y=S.submitter;Y&&(g=(g=Y[Wi]||null)?kI(g.formAction):Y.getAttribute("formAction"),g!==null&&(R=g,Y=null));var ne=new ob("action","action",null,S,O);p.push({event:ne,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Tc!==0){var Ee=Y?_I(O,Y):new FormData(O);CT(y,{pending:!0,data:Ee,method:O.method,action:R},null,Ee)}}else typeof R=="function"&&(ne.preventDefault(),Ee=Y?_I(O,Y):new FormData(O),CT(y,{pending:!0,data:Ee,method:O.method,action:R},R,Ee))},currentTarget:O}]})}}for(var iA=0;iA<zS.length;iA++){var oA=zS[iA],tie=oA.toLowerCase(),nie=oA[0].toUpperCase()+oA.slice(1);Ns(tie,"on"+nie)}Ns(lO,"onAnimationEnd"),Ns(uO,"onAnimationIteration"),Ns(cO,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(bre,"onTransitionRun"),Ns(yre,"onTransitionStart"),Ns(xre,"onTransitionCancel"),Ns(fO,"onTransitionEnd"),lc("onMouseEnter",["mouseout","mouseover"]),lc("onMouseLeave",["mouseout","mouseover"]),lc("onPointerEnter",["pointerout","pointerover"]),lc("onPointerLeave",["pointerout","pointerover"]),ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ua("onBeforeInput",["compositionend","keypress","textInput","paste"]),ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ag="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rie=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ag));function OI(p,g){g=(g&4)!==0;for(var y=0;y<p.length;y++){var S=p[y],O=S.event;S=S.listeners;e:{var R=void 0;if(g)for(var Y=S.length-1;0<=Y;Y--){var ne=S[Y],Ee=ne.instance,_e=ne.currentTarget;if(ne=ne.listener,Ee!==R&&O.isPropagationStopped())break e;R=ne,O.currentTarget=_e;try{R(O)}catch(Ve){lb(Ve)}O.currentTarget=null,R=Ee}else for(Y=0;Y<S.length;Y++){if(ne=S[Y],Ee=ne.instance,_e=ne.currentTarget,ne=ne.listener,Ee!==R&&O.isPropagationStopped())break e;R=ne,O.currentTarget=_e;try{R(O)}catch(Ve){lb(Ve)}O.currentTarget=null,R=Ee}}}}function bn(p,g){var y=g[A0];y===void 0&&(y=g[A0]=new Set);var S=p+"__bubble";y.has(S)||(II(g,p,2,!1),y.add(S))}function aA(p,g,y){var S=0;g&&(S|=4),II(y,p,S,g)}var Wb="_reactListening"+Math.random().toString(36).slice(2);function sA(p){if(!p[Wb]){p[Wb]=!0,Zv.forEach(function(y){y!=="selectionchange"&&(rie.has(y)||aA(y,!1,p),aA(y,!0,p))});var g=p.nodeType===9?p:p.ownerDocument;g===null||g[Wb]||(g[Wb]=!0,aA("selectionchange",!1,g))}}function II(p,g,y,S){switch(lR(g)){case 2:var O=_ie;break;case 8:O=Oie;break;default:O=EA}y=O.bind(null,g,y,p),O=void 0,!NS||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(O=!0),S?O!==void 0?p.addEventListener(g,y,{capture:!0,passive:O}):p.addEventListener(g,y,!0):O!==void 0?p.addEventListener(g,y,{passive:O}):p.addEventListener(g,y,!1)}function lA(p,g,y,S,O){var R=S;if((g&1)===0&&(g&2)===0&&S!==null)e:for(;;){if(S===null)return;var Y=S.tag;if(Y===3||Y===4){var ne=S.stateNode.containerInfo;if(ne===O)break;if(Y===4)for(Y=S.return;Y!==null;){var Ee=Y.tag;if((Ee===3||Ee===4)&&Y.stateNode.containerInfo===O)return;Y=Y.return}for(;ne!==null;){if(Y=ac(ne),Y===null)return;if(Ee=Y.tag,Ee===5||Ee===6||Ee===26||Ee===27){S=R=Y;continue e}ne=ne.parentNode}}S=S.return}P6(function(){var _e=R,Ve=TS(y),Ge=[];e:{var Re=dO.get(p);if(Re!==void 0){var Fe=ob,vt=p;switch(p){case"keypress":if(rb(y)===0)break e;case"keydown":case"keyup":Fe=Xne;break;case"focusin":vt="focus",Fe=_S;break;case"focusout":vt="blur",Fe=_S;break;case"beforeblur":case"afterblur":Fe=_S;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=U6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Pne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=Jne;break;case lO:case uO:case cO:Fe=Une;break;case fO:Fe=tre;break;case"scroll":case"scrollend":Fe=Lne;break;case"wheel":Fe=rre;break;case"copy":case"cut":case"paste":Fe=Vne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=V6;break;case"toggle":case"beforetoggle":Fe=ore}var Lt=(g&4)!==0,nr=!Lt&&(p==="scroll"||p==="scrollend"),Ne=Lt?Re!==null?Re+"Capture":null:Re;Lt=[];for(var Se=_e,Me;Se!==null;){var je=Se;if(Me=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Me===null||Ne===null||(je=D0(Se,Ne),je!=null&&Lt.push(sg(Se,je,Me))),nr)break;Se=Se.return}0<Lt.length&&(Re=new Fe(Re,vt,null,y,Ve),Ge.push({event:Re,listeners:Lt}))}}if((g&7)===0){e:{if(Re=p==="mouseover"||p==="pointerover",Fe=p==="mouseout"||p==="pointerout",Re&&y!==SS&&(vt=y.relatedTarget||y.fromElement)&&(ac(vt)||vt[oc]))break e;if((Fe||Re)&&(Re=Ve.window===Ve?Ve:(Re=Ve.ownerDocument)?Re.defaultView||Re.parentWindow:window,Fe?(vt=y.relatedTarget||y.toElement,Fe=_e,vt=vt?ac(vt):null,vt!==null&&(nr=o(vt),Lt=vt.tag,vt!==nr||Lt!==5&&Lt!==27&&Lt!==6)&&(vt=null)):(Fe=null,vt=_e),Fe!==vt)){if(Lt=U6,je="onMouseLeave",Ne="onMouseEnter",Se="mouse",(p==="pointerout"||p==="pointerover")&&(Lt=V6,je="onPointerLeave",Ne="onPointerEnter",Se="pointer"),nr=Fe==null?Re:As(Fe),Me=vt==null?Re:As(vt),Re=new Lt(je,Se+"leave",Fe,y,Ve),Re.target=nr,Re.relatedTarget=Me,je=null,ac(Ve)===_e&&(Lt=new Lt(Ne,Se+"enter",vt,y,Ve),Lt.target=Me,Lt.relatedTarget=nr,je=Lt),nr=je,Fe&&vt)t:{for(Lt=iie,Ne=Fe,Se=vt,Me=0,je=Ne;je;je=Lt(je))Me++;je=0;for(var kt=Se;kt;kt=Lt(kt))je++;for(;0<Me-je;)Ne=Lt(Ne),Me--;for(;0<je-Me;)Se=Lt(Se),je--;for(;Me--;){if(Ne===Se||Se!==null&&Ne===Se.alternate){Lt=Ne;break t}Ne=Lt(Ne),Se=Lt(Se)}Lt=null}else Lt=null;Fe!==null&&RI(Ge,Re,Fe,Lt,!1),vt!==null&&nr!==null&&RI(Ge,nr,vt,Lt,!0)}}e:{if(Re=_e?As(_e):window,Fe=Re.nodeName&&Re.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&Re.type==="file")var $n=Z6;else if(K6(Re))if(Q6)$n=mre;else{$n=hre;var wt=dre}else Fe=Re.nodeName,!Fe||Fe.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?_e&&CS(_e.elementType)&&($n=Z6):$n=pre;if($n&&($n=$n(p,_e))){X6(Ge,$n,y,Ve);break e}wt&&wt(p,Re,_e),p==="focusout"&&_e&&Re.type==="number"&&_e.memoizedProps.value!=null&&ES(Re,"number",Re.value)}switch(wt=_e?As(_e):window,p){case"focusin":(K6(wt)||wt.contentEditable==="true")&&(Ph=wt,FS=_e,L0=null);break;case"focusout":L0=FS=Ph=null;break;case"mousedown":PS=!0;break;case"contextmenu":case"mouseup":case"dragend":PS=!1,aO(Ge,y,Ve);break;case"selectionchange":if(vre)break;case"keydown":case"keyup":aO(Ge,y,Ve)}var on;if(IS)e:{switch(p){case"compositionstart":var Cn="onCompositionStart";break e;case"compositionend":Cn="onCompositionEnd";break e;case"compositionupdate":Cn="onCompositionUpdate";break e}Cn=void 0}else Fh?Y6(p,y)&&(Cn="onCompositionEnd"):p==="keydown"&&y.keyCode===229&&(Cn="onCompositionStart");Cn&&(q6&&y.locale!=="ko"&&(Fh||Cn!=="onCompositionStart"?Cn==="onCompositionEnd"&&Fh&&(on=$6()):(uc=Ve,DS="value"in uc?uc.value:uc.textContent,Fh=!0)),wt=Kb(_e,Cn),0<wt.length&&(Cn=new H6(Cn,p,null,y,Ve),Ge.push({event:Cn,listeners:wt}),on?Cn.data=on:(on=W6(y),on!==null&&(Cn.data=on)))),(on=sre?lre(p,y):ure(p,y))&&(Cn=Kb(_e,"onBeforeInput"),0<Cn.length&&(wt=new H6("onBeforeInput","beforeinput",null,y,Ve),Ge.push({event:wt,listeners:Cn}),wt.data=on)),eie(Ge,p,_e,y,Ve)}OI(Ge,g)})}function sg(p,g,y){return{instance:p,listener:g,currentTarget:y}}function Kb(p,g){for(var y=g+"Capture",S=[];p!==null;){var O=p,R=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||R===null||(O=D0(p,y),O!=null&&S.unshift(sg(p,O,R)),O=D0(p,g),O!=null&&S.push(sg(p,O,R))),p.tag===3)return S;p=p.return}return[]}function iie(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function RI(p,g,y,S,O){for(var R=g._reactName,Y=[];y!==null&&y!==S;){var ne=y,Ee=ne.alternate,_e=ne.stateNode;if(ne=ne.tag,Ee!==null&&Ee===S)break;ne!==5&&ne!==26&&ne!==27||_e===null||(Ee=_e,O?(_e=D0(y,R),_e!=null&&Y.unshift(sg(y,_e,Ee))):O||(_e=D0(y,R),_e!=null&&Y.push(sg(y,_e,Ee)))),y=y.return}Y.length!==0&&p.push({event:g,listeners:Y})}var oie=/\r\n?/g,aie=/\u0000|\uFFFD/g;function BI(p){return(typeof p=="string"?p:""+p).replace(oie,`
`).replace(aie,"")}function LI(p,g){return g=BI(g),BI(p)===g}function tr(p,g,y,S,O,R){switch(y){case"children":typeof S=="string"?g==="body"||g==="textarea"&&S===""||Rh(p,S):(typeof S=="number"||typeof S=="bigint")&&g!=="body"&&Rh(p,""+S);break;case"className":Jv(p,"class",S);break;case"tabIndex":Jv(p,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Jv(p,y,S);break;case"style":L6(p,S,R);break;case"data":if(g!=="object"){Jv(p,"data",S);break}case"src":case"href":if(S===""&&(g!=="a"||y!=="href")){p.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){p.removeAttribute(y);break}S=tb(""+S),p.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){p.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(y==="formAction"?(g!=="input"&&tr(p,g,"name",O.name,O,null),tr(p,g,"formEncType",O.formEncType,O,null),tr(p,g,"formMethod",O.formMethod,O,null),tr(p,g,"formTarget",O.formTarget,O,null)):(tr(p,g,"encType",O.encType,O,null),tr(p,g,"method",O.method,O,null),tr(p,g,"target",O.target,O,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){p.removeAttribute(y);break}S=tb(""+S),p.setAttribute(y,S);break;case"onClick":S!=null&&(p.onclick=Xl);break;case"onScroll":S!=null&&bn("scroll",p);break;case"onScrollEnd":S!=null&&bn("scrollend",p);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(O.children!=null)throw Error(r(60));p.innerHTML=y}}break;case"multiple":p.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":p.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){p.removeAttribute("xlink:href");break}y=tb(""+S),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?p.setAttribute(y,""+S):p.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?p.setAttribute(y,""):p.removeAttribute(y);break;case"capture":case"download":S===!0?p.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?p.setAttribute(y,S):p.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?p.setAttribute(y,S):p.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?p.removeAttribute(y):p.setAttribute(y,S);break;case"popover":bn("beforetoggle",p),bn("toggle",p),Qv(p,"popover",S);break;case"xlinkActuate":Kl(p,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Kl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Kl(p,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Kl(p,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Kl(p,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Kl(p,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Kl(p,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Kl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Kl(p,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Qv(p,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Rne.get(y)||y,Qv(p,y,S))}}function uA(p,g,y,S,O,R){switch(y){case"style":L6(p,S,R);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(O.children!=null)throw Error(r(60));p.innerHTML=y}}break;case"children":typeof S=="string"?Rh(p,S):(typeof S=="number"||typeof S=="bigint")&&Rh(p,""+S);break;case"onScroll":S!=null&&bn("scroll",p);break;case"onScrollEnd":S!=null&&bn("scrollend",p);break;case"onClick":S!=null&&(p.onclick=Xl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ed.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(O=y.endsWith("Capture"),g=y.slice(2,O?y.length-7:void 0),R=p[Wi]||null,R=R!=null?R[y]:null,typeof R=="function"&&p.removeEventListener(g,R,O),typeof S=="function")){typeof R!="function"&&R!==null&&(y in p?p[y]=null:p.hasAttribute(y)&&p.removeAttribute(y)),p.addEventListener(g,S,O);break e}y in p?p[y]=S:S===!0?p.setAttribute(y,""):Qv(p,y,S)}}}function Ri(p,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bn("error",p),bn("load",p);var S=!1,O=!1,R;for(R in y)if(y.hasOwnProperty(R)){var Y=y[R];if(Y!=null)switch(R){case"src":S=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:tr(p,g,R,Y,y,null)}}O&&tr(p,g,"srcSet",y.srcSet,y,null),S&&tr(p,g,"src",y.src,y,null);return;case"input":bn("invalid",p);var ne=R=Y=O=null,Ee=null,_e=null;for(S in y)if(y.hasOwnProperty(S)){var Ve=y[S];if(Ve!=null)switch(S){case"name":O=Ve;break;case"type":Y=Ve;break;case"checked":Ee=Ve;break;case"defaultChecked":_e=Ve;break;case"value":R=Ve;break;case"defaultValue":ne=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,g));break;default:tr(p,g,S,Ve,y,null)}}O6(p,R,ne,Ee,_e,Y,O,!1);return;case"select":bn("invalid",p),S=Y=R=null;for(O in y)if(y.hasOwnProperty(O)&&(ne=y[O],ne!=null))switch(O){case"value":R=ne;break;case"defaultValue":Y=ne;break;case"multiple":S=ne;default:tr(p,g,O,ne,y,null)}g=R,y=Y,p.multiple=!!S,g!=null?Ih(p,!!S,g,!1):y!=null&&Ih(p,!!S,y,!0);return;case"textarea":bn("invalid",p),R=O=S=null;for(Y in y)if(y.hasOwnProperty(Y)&&(ne=y[Y],ne!=null))switch(Y){case"value":S=ne;break;case"defaultValue":O=ne;break;case"children":R=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(91));break;default:tr(p,g,Y,ne,y,null)}R6(p,S,O,R);return;case"option":for(Ee in y)y.hasOwnProperty(Ee)&&(S=y[Ee],S!=null)&&(Ee==="selected"?p.selected=S&&typeof S!="function"&&typeof S!="symbol":tr(p,g,Ee,S,y,null));return;case"dialog":bn("beforetoggle",p),bn("toggle",p),bn("cancel",p),bn("close",p);break;case"iframe":case"object":bn("load",p);break;case"video":case"audio":for(S=0;S<ag.length;S++)bn(ag[S],p);break;case"image":bn("error",p),bn("load",p);break;case"details":bn("toggle",p);break;case"embed":case"source":case"link":bn("error",p),bn("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in y)if(y.hasOwnProperty(_e)&&(S=y[_e],S!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:tr(p,g,_e,S,y,null)}return;default:if(CS(g)){for(Ve in y)y.hasOwnProperty(Ve)&&(S=y[Ve],S!==void 0&&uA(p,g,Ve,S,y,void 0));return}}for(ne in y)y.hasOwnProperty(ne)&&(S=y[ne],S!=null&&tr(p,g,ne,S,y,null))}function sie(p,g,y,S){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,R=null,Y=null,ne=null,Ee=null,_e=null,Ve=null;for(Fe in y){var Ge=y[Fe];if(y.hasOwnProperty(Fe)&&Ge!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":Ee=Ge;default:S.hasOwnProperty(Fe)||tr(p,g,Fe,null,S,Ge)}}for(var Re in S){var Fe=S[Re];if(Ge=y[Re],S.hasOwnProperty(Re)&&(Fe!=null||Ge!=null))switch(Re){case"type":R=Fe;break;case"name":O=Fe;break;case"checked":_e=Fe;break;case"defaultChecked":Ve=Fe;break;case"value":Y=Fe;break;case"defaultValue":ne=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,g));break;default:Fe!==Ge&&tr(p,g,Re,Fe,S,Ge)}}wS(p,Y,ne,Ee,_e,Ve,R,O);return;case"select":Fe=Y=ne=Re=null;for(R in y)if(Ee=y[R],y.hasOwnProperty(R)&&Ee!=null)switch(R){case"value":break;case"multiple":Fe=Ee;default:S.hasOwnProperty(R)||tr(p,g,R,null,S,Ee)}for(O in S)if(R=S[O],Ee=y[O],S.hasOwnProperty(O)&&(R!=null||Ee!=null))switch(O){case"value":Re=R;break;case"defaultValue":ne=R;break;case"multiple":Y=R;default:R!==Ee&&tr(p,g,O,R,S,Ee)}g=ne,y=Y,S=Fe,Re!=null?Ih(p,!!y,Re,!1):!!S!=!!y&&(g!=null?Ih(p,!!y,g,!0):Ih(p,!!y,y?[]:"",!1));return;case"textarea":Fe=Re=null;for(ne in y)if(O=y[ne],y.hasOwnProperty(ne)&&O!=null&&!S.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:tr(p,g,ne,null,S,O)}for(Y in S)if(O=S[Y],R=y[Y],S.hasOwnProperty(Y)&&(O!=null||R!=null))switch(Y){case"value":Re=O;break;case"defaultValue":Fe=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:O!==R&&tr(p,g,Y,O,S,R)}I6(p,Re,Fe);return;case"option":for(var vt in y)Re=y[vt],y.hasOwnProperty(vt)&&Re!=null&&!S.hasOwnProperty(vt)&&(vt==="selected"?p.selected=!1:tr(p,g,vt,null,S,Re));for(Ee in S)Re=S[Ee],Fe=y[Ee],S.hasOwnProperty(Ee)&&Re!==Fe&&(Re!=null||Fe!=null)&&(Ee==="selected"?p.selected=Re&&typeof Re!="function"&&typeof Re!="symbol":tr(p,g,Ee,Re,S,Fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in y)Re=y[Lt],y.hasOwnProperty(Lt)&&Re!=null&&!S.hasOwnProperty(Lt)&&tr(p,g,Lt,null,S,Re);for(_e in S)if(Re=S[_e],Fe=y[_e],S.hasOwnProperty(_e)&&Re!==Fe&&(Re!=null||Fe!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,g));break;default:tr(p,g,_e,Re,S,Fe)}return;default:if(CS(g)){for(var nr in y)Re=y[nr],y.hasOwnProperty(nr)&&Re!==void 0&&!S.hasOwnProperty(nr)&&uA(p,g,nr,void 0,S,Re);for(Ve in S)Re=S[Ve],Fe=y[Ve],!S.hasOwnProperty(Ve)||Re===Fe||Re===void 0&&Fe===void 0||uA(p,g,Ve,Re,S,Fe);return}}for(var Ne in y)Re=y[Ne],y.hasOwnProperty(Ne)&&Re!=null&&!S.hasOwnProperty(Ne)&&tr(p,g,Ne,null,S,Re);for(Ge in S)Re=S[Ge],Fe=y[Ge],!S.hasOwnProperty(Ge)||Re===Fe||Re==null&&Fe==null||tr(p,g,Ge,Re,S,Fe)}function FI(p){switch(p){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lie(){if(typeof performance.getEntriesByType=="function"){for(var p=0,g=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var O=y[S],R=O.transferSize,Y=O.initiatorType,ne=O.duration;if(R&&ne&&FI(Y)){for(Y=0,ne=O.responseEnd,S+=1;S<y.length;S++){var Ee=y[S],_e=Ee.startTime;if(_e>ne)break;var Ve=Ee.transferSize,Ge=Ee.initiatorType;Ve&&FI(Ge)&&(Ee=Ee.responseEnd,Y+=Ve*(Ee<ne?1:(ne-_e)/(Ee-_e)))}if(--S,g+=8*(R+Y)/(O.duration/1e3),p++,10<p)break}}if(0<p)return g/p/1e6}return navigator.connection&&(p=navigator.connection.downlink,typeof p=="number")?p:5}var cA=null,fA=null;function Xb(p){return p.nodeType===9?p:p.ownerDocument}function PI(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $I(p,g){if(p===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&g==="foreignObject"?0:p}function dA(p,g){return p==="textarea"||p==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var hA=null;function uie(){var p=window.event;return p&&p.type==="popstate"?p===hA?!1:(hA=p,!0):(hA=null,!1)}var zI=typeof setTimeout=="function"?setTimeout:void 0,cie=typeof clearTimeout=="function"?clearTimeout:void 0,UI=typeof Promise=="function"?Promise:void 0,fie=typeof queueMicrotask=="function"?queueMicrotask:typeof UI<"u"?function(p){return UI.resolve(null).then(p).catch(die)}:zI;function die(p){setTimeout(function(){throw p})}function Ac(p){return p==="head"}function HI(p,g){var y=g,S=0;do{var O=y.nextSibling;if(p.removeChild(y),O&&O.nodeType===8)if(y=O.data,y==="/$"||y==="/&"){if(S===0){p.removeChild(O),fp(g);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")lg(p.ownerDocument.documentElement);else if(y==="head"){y=p.ownerDocument.head,lg(y);for(var R=y.firstChild;R;){var Y=R.nextSibling,ne=R.nodeName;R[Jf]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&R.rel.toLowerCase()==="stylesheet"||y.removeChild(R),R=Y}}else y==="body"&&lg(p.ownerDocument.body);y=O}while(y);fp(g)}function VI(p,g){var y=p;p=0;do{var S=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(p===0)break;p--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||p++;y=S}while(y)}function pA(p){var g=p.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":pA(y),N0(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}p.removeChild(y)}}function hie(p,g,y,S){for(;p.nodeType===1;){var O=y;if(p.nodeName.toLowerCase()!==g.toLowerCase()){if(!S&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(S){if(!p[Jf])switch(g){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(R=p.getAttribute("rel"),R==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(R!==O.rel||p.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||p.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||p.getAttribute("title")!==(O.title==null?null:O.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(R=p.getAttribute("src"),(R!==(O.src==null?null:O.src)||p.getAttribute("type")!==(O.type==null?null:O.type)||p.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&R&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(g==="input"&&p.type==="hidden"){var R=O.name==null?null:""+O.name;if(O.type==="hidden"&&p.getAttribute("name")===R)return p}else return p;if(p=ja(p.nextSibling),p===null)break}return null}function pie(p,g,y){if(g==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!y||(p=ja(p.nextSibling),p===null))return null;return p}function qI(p,g){for(;p.nodeType!==8;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!g||(p=ja(p.nextSibling),p===null))return null;return p}function mA(p){return p.data==="$?"||p.data==="$~"}function gA(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState!=="loading"}function mie(p,g){var y=p.ownerDocument;if(p.data==="$~")p._reactRetry=g;else if(p.data!=="$?"||y.readyState!=="loading")g();else{var S=function(){g(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),p._reactRetry=S}}function ja(p){for(;p!=null;p=p.nextSibling){var g=p.nodeType;if(g===1||g===3)break;if(g===8){if(g=p.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return p}var vA=null;function jI(p){p=p.nextSibling;for(var g=0;p;){if(p.nodeType===8){var y=p.data;if(y==="/$"||y==="/&"){if(g===0)return ja(p.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}p=p.nextSibling}return null}function GI(p){p=p.previousSibling;for(var g=0;p;){if(p.nodeType===8){var y=p.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return p;g--}else y!=="/$"&&y!=="/&"||g++}p=p.previousSibling}return null}function YI(p,g,y){switch(g=Xb(y),p){case"html":if(p=g.documentElement,!p)throw Error(r(452));return p;case"head":if(p=g.head,!p)throw Error(r(453));return p;case"body":if(p=g.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function lg(p){for(var g=p.attributes;g.length;)p.removeAttributeNode(g[0]);N0(p)}var Ga=new Map,WI=new Set;function Zb(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var du=U.d;U.d={f:gie,r:vie,D:bie,C:yie,L:xie,m:wie,X:Cie,S:Eie,M:Sie};function gie(){var p=du.f(),g=Hb();return p||g}function vie(p){var g=sc(p);g!==null&&g.tag===5&&g.type==="form"?f8(g):du.r(p)}var lp=typeof document>"u"?null:document;function KI(p,g,y){var S=lp;if(S&&typeof g=="string"&&g){var O=Pa(g);O='link[rel="'+p+'"][href="'+O+'"]',typeof y=="string"&&(O+='[crossorigin="'+y+'"]'),WI.has(O)||(WI.add(O),p={rel:p,crossOrigin:y,href:g},S.querySelector(O)===null&&(g=S.createElement("link"),Ri(g,"link",p),In(g),S.head.appendChild(g)))}}function bie(p){du.D(p),KI("dns-prefetch",p,null)}function yie(p,g){du.C(p,g),KI("preconnect",p,g)}function xie(p,g,y){du.L(p,g,y);var S=lp;if(S&&p&&g){var O='link[rel="preload"][as="'+Pa(g)+'"]';g==="image"&&y&&y.imageSrcSet?(O+='[imagesrcset="'+Pa(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(O+='[imagesizes="'+Pa(y.imageSizes)+'"]')):O+='[href="'+Pa(p)+'"]';var R=O;switch(g){case"style":R=up(p);break;case"script":R=cp(p)}Ga.has(R)||(p=f({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:p,as:g},y),Ga.set(R,p),S.querySelector(O)!==null||g==="style"&&S.querySelector(ug(R))||g==="script"&&S.querySelector(cg(R))||(g=S.createElement("link"),Ri(g,"link",p),In(g),S.head.appendChild(g)))}}function wie(p,g){du.m(p,g);var y=lp;if(y&&p){var S=g&&typeof g.as=="string"?g.as:"script",O='link[rel="modulepreload"][as="'+Pa(S)+'"][href="'+Pa(p)+'"]',R=O;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=cp(p)}if(!Ga.has(R)&&(p=f({rel:"modulepreload",href:p},g),Ga.set(R,p),y.querySelector(O)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(cg(R)))return}S=y.createElement("link"),Ri(S,"link",p),In(S),y.head.appendChild(S)}}}function Eie(p,g,y){du.S(p,g,y);var S=lp;if(S&&p){var O=wn(S).hoistableStyles,R=up(p);g=g||"default";var Y=O.get(R);if(!Y){var ne={loading:0,preload:null};if(Y=S.querySelector(ug(R)))ne.loading=5;else{p=f({rel:"stylesheet",href:p,"data-precedence":g},y),(y=Ga.get(R))&&bA(p,y);var Ee=Y=S.createElement("link");In(Ee),Ri(Ee,"link",p),Ee._p=new Promise(function(_e,Ve){Ee.onload=_e,Ee.onerror=Ve}),Ee.addEventListener("load",function(){ne.loading|=1}),Ee.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,Qb(Y,g,S)}Y={type:"stylesheet",instance:Y,count:1,state:ne},O.set(R,Y)}}}function Cie(p,g){du.X(p,g);var y=lp;if(y&&p){var S=wn(y).hoistableScripts,O=cp(p),R=S.get(O);R||(R=y.querySelector(cg(O)),R||(p=f({src:p,async:!0},g),(g=Ga.get(O))&&yA(p,g),R=y.createElement("script"),In(R),Ri(R,"link",p),y.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},S.set(O,R))}}function Sie(p,g){du.M(p,g);var y=lp;if(y&&p){var S=wn(y).hoistableScripts,O=cp(p),R=S.get(O);R||(R=y.querySelector(cg(O)),R||(p=f({src:p,async:!0,type:"module"},g),(g=Ga.get(O))&&yA(p,g),R=y.createElement("script"),In(R),Ri(R,"link",p),y.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},S.set(O,R))}}function XI(p,g,y,S){var O=(O=ce.current)?Zb(O):null;if(!O)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=up(y.href),y=wn(O).hoistableStyles,S=y.get(g),S||(S={type:"style",instance:null,count:0,state:null},y.set(g,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){p=up(y.href);var R=wn(O).hoistableStyles,Y=R.get(p);if(Y||(O=O.ownerDocument||O,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(p,Y),(R=O.querySelector(ug(p)))&&!R._p&&(Y.instance=R,Y.state.loading=5),Ga.has(p)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Ga.set(p,y),R||Tie(O,p,y,Y.state))),g&&S===null)throw Error(r(528,""));return Y}if(g&&S!==null)throw Error(r(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=cp(y),y=wn(O).hoistableScripts,S=y.get(g),S||(S={type:"script",instance:null,count:0,state:null},y.set(g,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function up(p){return'href="'+Pa(p)+'"'}function ug(p){return'link[rel="stylesheet"]['+p+"]"}function ZI(p){return f({},p,{"data-precedence":p.precedence,precedence:null})}function Tie(p,g,y,S){p.querySelector('link[rel="preload"][as="style"]['+g+"]")?S.loading=1:(g=p.createElement("link"),S.preload=g,g.addEventListener("load",function(){return S.loading|=1}),g.addEventListener("error",function(){return S.loading|=2}),Ri(g,"link",y),In(g),p.head.appendChild(g))}function cp(p){return'[src="'+Pa(p)+'"]'}function cg(p){return"script[async]"+p}function QI(p,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var S=p.querySelector('style[data-href~="'+Pa(y.href)+'"]');if(S)return g.instance=S,In(S),S;var O=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(p.ownerDocument||p).createElement("style"),In(S),Ri(S,"style",O),Qb(S,y.precedence,p),g.instance=S;case"stylesheet":O=up(y.href);var R=p.querySelector(ug(O));if(R)return g.state.loading|=4,g.instance=R,In(R),R;S=ZI(y),(O=Ga.get(O))&&bA(S,O),R=(p.ownerDocument||p).createElement("link"),In(R);var Y=R;return Y._p=new Promise(function(ne,Ee){Y.onload=ne,Y.onerror=Ee}),Ri(R,"link",S),g.state.loading|=4,Qb(R,y.precedence,p),g.instance=R;case"script":return R=cp(y.src),(O=p.querySelector(cg(R)))?(g.instance=O,In(O),O):(S=y,(O=Ga.get(R))&&(S=f({},y),yA(S,O)),p=p.ownerDocument||p,O=p.createElement("script"),In(O),Ri(O,"link",S),p.head.appendChild(O),g.instance=O);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(S=g.instance,g.state.loading|=4,Qb(S,y.precedence,p));return g.instance}function Qb(p,g,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=S.length?S[S.length-1]:null,R=O,Y=0;Y<S.length;Y++){var ne=S[Y];if(ne.dataset.precedence===g)R=ne;else if(R!==O)break}R?R.parentNode.insertBefore(p,R.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(p,g.firstChild))}function bA(p,g){p.crossOrigin==null&&(p.crossOrigin=g.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=g.referrerPolicy),p.title==null&&(p.title=g.title)}function yA(p,g){p.crossOrigin==null&&(p.crossOrigin=g.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=g.referrerPolicy),p.integrity==null&&(p.integrity=g.integrity)}var Jb=null;function JI(p,g,y){if(Jb===null){var S=new Map,O=Jb=new Map;O.set(y,S)}else O=Jb,S=O.get(y),S||(S=new Map,O.set(y,S));if(S.has(p))return S;for(S.set(p,null),y=y.getElementsByTagName(p),O=0;O<y.length;O++){var R=y[O];if(!(R[Jf]||R[li]||p==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=R.getAttribute(g)||"";Y=p+Y;var ne=S.get(Y);ne?ne.push(R):S.set(Y,[R])}}return S}function eR(p,g,y){p=p.ownerDocument||p,p.head.insertBefore(y,g==="title"?p.querySelector("head > title"):null)}function Aie(p,g,y){if(y===1||g.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(p=g.disabled,typeof g.precedence=="string"&&p==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function tR(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}function Nie(p,g,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var O=up(S.href),R=g.querySelector(ug(O));if(R){g=R._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(p.count++,p=ey.bind(p),g.then(p,p)),y.state.loading|=4,y.instance=R,In(R);return}R=g.ownerDocument||g,S=ZI(S),(O=Ga.get(O))&&bA(S,O),R=R.createElement("link"),In(R);var Y=R;Y._p=new Promise(function(ne,Ee){Y.onload=ne,Y.onerror=Ee}),Ri(R,"link",S),y.instance=R}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(p.count++,y=ey.bind(p),g.addEventListener("load",y),g.addEventListener("error",y))}}var xA=0;function Die(p,g){return p.stylesheets&&p.count===0&&ny(p,p.stylesheets),0<p.count||0<p.imgCount?function(y){var S=setTimeout(function(){if(p.stylesheets&&ny(p,p.stylesheets),p.unsuspend){var R=p.unsuspend;p.unsuspend=null,R()}},6e4+g);0<p.imgBytes&&xA===0&&(xA=62500*lie());var O=setTimeout(function(){if(p.waitingForImages=!1,p.count===0&&(p.stylesheets&&ny(p,p.stylesheets),p.unsuspend)){var R=p.unsuspend;p.unsuspend=null,R()}},(p.imgBytes>xA?50:800)+g);return p.unsuspend=y,function(){p.unsuspend=null,clearTimeout(S),clearTimeout(O)}}:null}function ey(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ny(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var ty=null;function ny(p,g){p.stylesheets=null,p.unsuspend!==null&&(p.count++,ty=new Map,g.forEach(Mie,p),ty=null,ey.call(p))}function Mie(p,g){if(!(g.state.loading&4)){var y=ty.get(p);if(y)var S=y.get(null);else{y=new Map,ty.set(p,y);for(var O=p.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<O.length;R++){var Y=O[R];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),S=Y)}S&&y.set(null,S)}O=g.instance,Y=O.getAttribute("data-precedence"),R=y.get(Y)||S,R===S&&y.set(null,O),y.set(Y,O),this.count++,S=ey.bind(this),O.addEventListener("load",S),O.addEventListener("error",S),R?R.parentNode.insertBefore(O,R.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(O,p.firstChild)),g.state.loading|=4}}var fg={$$typeof:w,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function kie(p,g,y,S,O,R,Y,ne,Ee){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C0(0),this.hiddenUpdates=C0(null),this.identifierPrefix=S,this.onUncaughtError=O,this.onCaughtError=R,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function nR(p,g,y,S,O,R,Y,ne,Ee,_e,Ve,Ge){return p=new kie(p,g,y,Y,Ee,_e,Ve,Ge,ne),g=1,R===!0&&(g|=24),R=fa(3,null,null,g),p.current=R,R.stateNode=p,g=JS(),g.refCount++,p.pooledCache=g,g.refCount++,R.memoizedState={element:S,isDehydrated:y,cache:g},rT(R),p}function rR(p){return p?(p=Uh,p):Uh}function iR(p,g,y,S,O,R){O=rR(O),S.context===null?S.context=O:S.pendingContext=O,S=mc(g),S.payload={element:y},R=R===void 0?null:R,R!==null&&(S.callback=R),y=gc(p,S,g),y!==null&&(zo(y,p,g),V0(y,p,g))}function oR(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var y=p.retryLane;p.retryLane=y!==0&&y<g?y:g}}function wA(p,g){oR(p,g),(p=p.alternate)&&oR(p,g)}function aR(p){if(p.tag===13||p.tag===31){var g=id(p,67108864);g!==null&&zo(g,p,67108864),wA(p,67108864)}}function sR(p){if(p.tag===13||p.tag===31){var g=ga();g=S0(g);var y=id(p,g);y!==null&&zo(y,p,g),wA(p,g)}}var ry=!0;function _ie(p,g,y,S){var O=L.T;L.T=null;var R=U.p;try{U.p=2,EA(p,g,y,S)}finally{U.p=R,L.T=O}}function Oie(p,g,y,S){var O=L.T;L.T=null;var R=U.p;try{U.p=8,EA(p,g,y,S)}finally{U.p=R,L.T=O}}function EA(p,g,y,S){if(ry){var O=CA(S);if(O===null)lA(p,g,S,iy,y),uR(p,S);else if(Rie(O,p,g,y,S))S.stopPropagation();else if(uR(p,S),g&4&&-1<Iie.indexOf(p)){for(;O!==null;){var R=sc(O);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Y=At(R.pendingLanes);if(Y!==0){var ne=R;for(ne.pendingLanes|=2,ne.entangledLanes|=2;Y;){var Ee=1<<31-pt(Y);ne.entanglements[1]|=Ee,Y&=~Ee}wl(R),(Hn&6)===0&&(zb=ae()+500,og(0))}}break;case 31:case 13:ne=id(R,2),ne!==null&&zo(ne,R,2),Hb(),wA(R,2)}if(R=CA(S),R===null&&lA(p,g,S,iy,y),R===O)break;O=R}O!==null&&S.stopPropagation()}else lA(p,g,S,null,y)}}function CA(p){return p=TS(p),SA(p)}var iy=null;function SA(p){if(iy=null,p=ac(p),p!==null){var g=o(p);if(g===null)p=null;else{var y=g.tag;if(y===13){if(p=a(g),p!==null)return p;p=null}else if(y===31){if(p=s(g),p!==null)return p;p=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;p=null}else g!==p&&(p=null)}}return iy=p,null}function lR(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case se:return 2;case fe:return 8;case we:case Be:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var TA=!1,Nc=null,Dc=null,Mc=null,dg=new Map,hg=new Map,kc=[],Iie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uR(p,g){switch(p){case"focusin":case"focusout":Nc=null;break;case"dragenter":case"dragleave":Dc=null;break;case"mouseover":case"mouseout":Mc=null;break;case"pointerover":case"pointerout":dg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":hg.delete(g.pointerId)}}function pg(p,g,y,S,O,R){return p===null||p.nativeEvent!==R?(p={blockedOn:g,domEventName:y,eventSystemFlags:S,nativeEvent:R,targetContainers:[O]},g!==null&&(g=sc(g),g!==null&&aR(g)),p):(p.eventSystemFlags|=S,g=p.targetContainers,O!==null&&g.indexOf(O)===-1&&g.push(O),p)}function Rie(p,g,y,S,O){switch(g){case"focusin":return Nc=pg(Nc,p,g,y,S,O),!0;case"dragenter":return Dc=pg(Dc,p,g,y,S,O),!0;case"mouseover":return Mc=pg(Mc,p,g,y,S,O),!0;case"pointerover":var R=O.pointerId;return dg.set(R,pg(dg.get(R)||null,p,g,y,S,O)),!0;case"gotpointercapture":return R=O.pointerId,hg.set(R,pg(hg.get(R)||null,p,g,y,S,O)),!0}return!1}function cR(p){var g=ac(p.target);if(g!==null){var y=o(g);if(y!==null){if(g=y.tag,g===13){if(g=a(y),g!==null){p.blockedOn=g,Kv(p.priority,function(){sR(y)});return}}else if(g===31){if(g=s(y),g!==null){p.blockedOn=g,Kv(p.priority,function(){sR(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){p.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}p.blockedOn=null}function oy(p){if(p.blockedOn!==null)return!1;for(var g=p.targetContainers;0<g.length;){var y=CA(p.nativeEvent);if(y===null){y=p.nativeEvent;var S=new y.constructor(y.type,y);SS=S,y.target.dispatchEvent(S),SS=null}else return g=sc(y),g!==null&&aR(g),p.blockedOn=y,!1;g.shift()}return!0}function fR(p,g,y){oy(p)&&y.delete(g)}function Bie(){TA=!1,Nc!==null&&oy(Nc)&&(Nc=null),Dc!==null&&oy(Dc)&&(Dc=null),Mc!==null&&oy(Mc)&&(Mc=null),dg.forEach(fR),hg.forEach(fR)}function ay(p,g){p.blockedOn===g&&(p.blockedOn=null,TA||(TA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bie)))}var sy=null;function dR(p){sy!==p&&(sy=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sy===p&&(sy=null);for(var g=0;g<p.length;g+=3){var y=p[g],S=p[g+1],O=p[g+2];if(typeof S!="function"){if(SA(S||y)===null)continue;break}var R=sc(y);R!==null&&(p.splice(g,3),g-=3,CT(R,{pending:!0,data:O,method:y.method,action:S},S,O))}}))}function fp(p){function g(Ee){return ay(Ee,p)}Nc!==null&&ay(Nc,p),Dc!==null&&ay(Dc,p),Mc!==null&&ay(Mc,p),dg.forEach(g),hg.forEach(g);for(var y=0;y<kc.length;y++){var S=kc[y];S.blockedOn===p&&(S.blockedOn=null)}for(;0<kc.length&&(y=kc[0],y.blockedOn===null);)cR(y),y.blockedOn===null&&kc.shift();if(y=(p.ownerDocument||p).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var O=y[S],R=y[S+1],Y=O[Wi]||null;if(typeof R=="function")Y||dR(y);else if(Y){var ne=null;if(R&&R.hasAttribute("formAction")){if(O=R,Y=R[Wi]||null)ne=Y.formAction;else if(SA(O)!==null)continue}else ne=Y.action;typeof ne=="function"?y[S+1]=ne:(y.splice(S,3),S-=3),dR(y)}}}function hR(){function p(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(Y){return O=Y})},focusReset:"manual",scroll:"manual"})}function g(){O!==null&&(O(),O=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,O=null;return navigation.addEventListener("navigate",p),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",p),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),O!==null&&(O(),O=null)}}}function AA(p){this._internalRoot=p}ly.prototype.render=AA.prototype.render=function(p){var g=this._internalRoot;if(g===null)throw Error(r(409));var y=g.current,S=ga();iR(y,S,p,g,null,null)},ly.prototype.unmount=AA.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var g=p.containerInfo;iR(p.current,2,null,p,null,null),Hb(),g[oc]=null}};function ly(p){this._internalRoot=p}ly.prototype.unstable_scheduleHydration=function(p){if(p){var g=Wv();p={blockedOn:null,target:p,priority:g};for(var y=0;y<kc.length&&g!==0&&g<kc[y].priority;y++);kc.splice(y,0,p),y===0&&cR(p)}};var pR=e.version;if(pR!=="19.2.3")throw Error(r(527,pR,"19.2.3"));U.findDOMNode=function(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=u(g),p=p!==null?c(p):null,p=p===null?null:p.stateNode,p};var Lie={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uy.isDisabled&&uy.supportsFiber)try{ht=uy.inject(Lie),Ct=uy}catch{}}return gg.createRoot=function(p,g){if(!i(p))throw Error(r(299));var y=!1,S="",O=w8,R=E8,Y=C8;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(S=g.identifierPrefix),g.onUncaughtError!==void 0&&(O=g.onUncaughtError),g.onCaughtError!==void 0&&(R=g.onCaughtError),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),g=nR(p,1,!1,null,null,y,S,null,O,R,Y,hR),p[oc]=g.current,sA(p),new AA(g)},gg.hydrateRoot=function(p,g,y){if(!i(p))throw Error(r(299));var S=!1,O="",R=w8,Y=E8,ne=C8,Ee=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(O=y.identifierPrefix),y.onUncaughtError!==void 0&&(R=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(ne=y.onRecoverableError),y.formState!==void 0&&(Ee=y.formState)),g=nR(p,1,!0,g,y??null,S,O,Ee,R,Y,ne,hR),g.context=rR(null),y=g.current,S=ga(),S=S0(S),O=mc(S),O.callback=null,gc(y,O,S),y=S,g.current.lanes=y,Qf(g,y),wl(g),p[oc]=g.current,sA(p),new ly(g)},gg.version="19.2.3",gg}var SR;function Yie(){if(SR)return MA.exports;SR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),MA.exports=Gie(),MA.exports}var Wie=Yie();const Kie=Qs(Wie);var IA={exports:{}},RA={};var TR;function Xie(){if(TR)return RA;TR=1;var t=Lm().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return RA.c=function(e){return t.H.useMemoCache(e)},RA}var AR;function Zie(){return AR||(AR=1,IA.exports=Xie()),IA.exports}var _r=Zie();function Qie(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:r,onScriptLoadError:i}=t,[o,a]=q.useState(!1),s=q.useRef(r);s.current=r;const l=q.useRef(i);return l.current=i,q.useEffect(()=>{const u=document.createElement("script");return u.src="https://accounts.google.com/gsi/client",n&&(u.src+=`?hl=${n}`),u.async=!0,u.defer=!0,u.nonce=e,u.onload=()=>{var c;a(!0),(c=s.current)===null||c===void 0||c.call(s)},u.onerror=()=>{var c;a(!1),(c=l.current)===null||c===void 0||c.call(l)},document.body.appendChild(u),()=>{document.body.removeChild(u)}},[e]),o}const Jie=q.createContext(null);function eoe({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:r,onScriptLoadError:i,children:o}){const a=Qie({nonce:e,onScriptLoadSuccess:r,onScriptLoadError:i,locale:n}),s=q.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:a}),[t,a]);return xr.createElement(Jie.Provider,{value:s},o)}const nV=["shift","alt","meta","mod","ctrl","control"],toe={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function rf(t){return(toe[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function rV(t){return nV.includes(t)}function BA(t,e=","){return t.toLowerCase().split(e)}function LA(t,e="+",n=">",r=!1,i){let o=[],a=!1;t=t.trim(),t.includes(n)?(a=!0,o=t.toLocaleLowerCase().split(n).map(u=>rf(u))):o=t.toLocaleLowerCase().split(e).map(u=>rf(u));const s={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod"),useKey:r},l=o.filter(u=>!nV.includes(u));return{...s,keys:l,description:i,isSequence:a,hotkey:t}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&iV([rf(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&oV([rf(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Su.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Su.clear()},0)}));const Su=new Set;function sM(t){return Array.isArray(t)}function noe(t,e=","){return(sM(t)?t:t.split(e)).every(n=>Su.has(n.trim().toLowerCase()))}function iV(t){const e=Array.isArray(t)?t:[t];Su.has("meta")&&Su.forEach(n=>!rV(n)&&Su.delete(n.toLowerCase())),e.forEach(n=>Su.add(n.toLowerCase()))}function oV(t){const e=Array.isArray(t)?t:[t];t==="meta"?Su.clear():e.forEach(n=>Su.delete(n.toLowerCase()))}function roe(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function ioe(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}const ooe=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function aoe(t){return aV(t,ooe)}function aV(t,e=!1){const{target:n,composed:r}=t;let i,o;return soe(n)&&r?(i=t.composedPath()[0]&&t.composedPath()[0].tagName,o=t.composedPath()[0]&&t.composedPath()[0].role):(i=n&&n.tagName,o=n&&n.role),sM(e)?!!(i&&e&&e.some(a=>a.toLowerCase()===i.toLowerCase()||a===o)):!!(i&&e&&e)}function soe(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function loe(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(n=>e.includes(n))||t.includes("*"):!0}const uoe=(t,e,n=!1)=>{const{alt:r,meta:i,mod:o,shift:a,ctrl:s,keys:l,useKey:u}=e,{code:c,key:f,ctrlKey:d,metaKey:h,shiftKey:m,altKey:v}=t,b=rf(c);if(u&&l?.length===1&&l.includes(f))return!0;if(!l?.includes(b)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(b))return!1;if(!n){if(r!==v&&b!=="alt"||a!==m&&b!=="shift")return!1;if(o){if(!h&&!d)return!1}else if(i!==h&&b!=="meta"&&b!=="os"||s!==d&&b!=="ctrl"&&b!=="control")return!1}return l&&l.length===1&&l.includes(b)?!0:l?noe(l):!l},coe=q.createContext(void 0),foe=()=>q.useContext(coe);function sV(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce((n,r)=>n&&sV(t[r],e[r]),!0):t===e}const doe=q.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),hoe=()=>q.useContext(doe);function poe(t){const e=q.useRef(void 0);return sV(e.current,t)||(e.current=t),e.current}const NR=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},moe=typeof window<"u"?q.useLayoutEffect:q.useEffect;function lV(t,e,n,r){const i=q.useRef(null),o=q.useRef(!1),a=Array.isArray(n)?Array.isArray(r)?void 0:r:n,s=sM(t)?t.join(a?.delimiter):t,l=Array.isArray(n)?n:Array.isArray(r)?r:void 0,u=q.useCallback(e,l??[]),c=q.useRef(u);l?c.current=u:c.current=e;const f=poe(a),{activeScopes:d}=hoe(),h=foe();return moe(()=>{if(f?.enabled===!1||!loe(d,f?.scopes))return;let m=[],v;const b=(A,E=!1)=>{if(!(aoe(A)&&!aV(A,f?.enableOnFormTags))){if(i.current!==null){const T=i.current.getRootNode();if((T instanceof Document||T instanceof ShadowRoot)&&T.activeElement!==i.current&&!i.current.contains(T.activeElement)){NR(A);return}}A.target?.isContentEditable&&!f?.enableOnContentEditable||BA(s,f?.delimiter).forEach(T=>{if(T.includes(f?.splitKey??"+")&&T.includes(f?.sequenceSplitKey??">")){console.warn(`Hotkey ${T} contains both ${f?.splitKey??"+"} and ${f?.sequenceSplitKey??">"} which is not supported.`);return}const N=LA(T,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description);if(N.isSequence){v=setTimeout(()=>{m=[]},f?.sequenceTimeoutMs??1e3);const D=N.useKey?A.key:rf(A.code);if(rV(D.toLowerCase()))return;m.push(D);const M=N.keys?.[m.length-1];if(D!==M){m=[],v&&clearTimeout(v);return}m.length===N.keys?.length&&(c.current(A,N),v&&clearTimeout(v),m=[])}else if(uoe(A,N,f?.ignoreModifiers)||N.keys?.includes("*")){if(f?.ignoreEventWhen?.(A)||E&&o.current)return;if(roe(A,N,f?.preventDefault),!ioe(A,N,f?.enabled)){NR(A);return}c.current(A,N),E||(o.current=!0)}})}},x=A=>{A.code!==void 0&&(iV(rf(A.code)),(f?.keydown===void 0&&f?.keyup!==!0||f?.keydown)&&b(A))},C=A=>{A.code!==void 0&&(oV(rf(A.code)),o.current=!1,f?.keyup&&b(A,!0))},w=i.current||a?.document||document;return w.addEventListener("keyup",C,a?.eventListenerOptions),w.addEventListener("keydown",x,a?.eventListenerOptions),h&&BA(s,f?.delimiter).forEach(A=>h.addHotkey(LA(A,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description))),()=>{w.removeEventListener("keyup",C,a?.eventListenerOptions),w.removeEventListener("keydown",x,a?.eventListenerOptions),h&&BA(s,f?.delimiter).forEach(A=>h.removeHotkey(LA(A,f?.splitKey,f?.sequenceSplitKey,f?.useKey,f?.description))),m=[],v&&clearTimeout(v)}},[s,f,d]),i}function goe(t){const e=_r.c(30),{isOpen:n,title:r,message:i,confirmLabel:o,cancelLabel:a,onConfirm:s,onCancel:l,isDestructive:u}=t,c=o===void 0?"Confirm":o,f=a===void 0?"Cancel":a,d=u===void 0?!1:u,[h,m]=q.useState(!1);let v,b;if(e[0]!==n?(v=()=>{if(n)m(!0);else{const $=setTimeout(()=>m(!1),200);return()=>clearTimeout($)}},b=[n],e[0]=n,e[1]=v,e[2]=b):(v=e[1],b=e[2]),q.useEffect(v,b),!h&&!n)return null;const x=`fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-200 ${n?"opacity-100 visible":"opacity-0 invisible"}`;let C;e[3]!==l?(C=_.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:l}),e[3]=l,e[4]=C):C=e[4];const w=`bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all duration-200 relative z-10 ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}`;let A;e[5]!==r?(A=_.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-slate-900 mb-2",children:r}),e[5]=r,e[6]=A):A=e[6];let E;e[7]!==i?(E=_.jsx("p",{className:"text-sm text-slate-500",children:i}),e[7]=i,e[8]=E):E=e[8];let T;e[9]!==E||e[10]!==A?(T=_.jsxs("div",{className:"p-6",children:[A,E]}),e[9]=E,e[10]=A,e[11]=T):T=e[11];let N;e[12]!==f||e[13]!==l?(N=_.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-200 transition-colors shadow-sm",children:f}),e[12]=f,e[13]=l,e[14]=N):N=e[14];const D=`px-4 py-2 text-sm font-medium text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all shadow-sm ${d?"bg-rose-500 hover:bg-rose-600 focus:ring-rose-500":"bg-sky-500 hover:bg-sky-600 focus:ring-sky-500"}`;let M;e[15]!==c||e[16]!==s||e[17]!==D?(M=_.jsx("button",{onClick:s,className:D,children:c}),e[15]=c,e[16]=s,e[17]=D,e[18]=M):M=e[18];let k;e[19]!==N||e[20]!==M?(k=_.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end gap-3 border-t border-slate-100",children:[N,M]}),e[19]=N,e[20]=M,e[21]=k):k=e[21];let B;e[22]!==T||e[23]!==k||e[24]!==w?(B=_.jsxs("div",{className:w,onClick:voe,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[T,k]}),e[22]=T,e[23]=k,e[24]=w,e[25]=B):B=e[25];let P;return e[26]!==B||e[27]!==x||e[28]!==C?(P=_.jsxs("div",{className:x,children:[C,B]}),e[26]=B,e[27]=x,e[28]=C,e[29]=P):P=e[29],P}function voe(t){return t.stopPropagation()}function boe(t){const e=_r.c(14),{x:n,y:r,options:i,onClose:o}=t,a=q.useRef(null);let s,l;e[0]!==o?(s=()=>{const h=m=>{a.current&&!a.current.contains(m.target)&&o()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},l=[o],e[0]=o,e[1]=s,e[2]=l):(s=e[1],l=e[2]),q.useEffect(s,l);let u;e[3]!==n||e[4]!==r?(u={top:r,left:n},e[3]=n,e[4]=r,e[5]=u):u=e[5];const c=u;let f;if(e[6]!==o||e[7]!==i){let h;e[9]!==o?(h=(m,v)=>_.jsx("button",{onClick:()=>{m.action(),o()},className:`text-left px-3 py-1.5 text-sm hover:bg-slate-50 transition-colors ${m.className||"text-slate-700"}`,children:m.label},v),e[9]=o,e[10]=h):h=e[10],f=i.map(h),e[6]=o,e[7]=i,e[8]=f}else f=e[8];let d;return e[11]!==c||e[12]!==f?(d=_.jsx("div",{ref:a,className:"fixed z-50 bg-white border border-slate-200 shadow-xl rounded-lg py-1 min-w-[150px] flex flex-col",style:c,children:f}),e[11]=c,e[12]=f,e[13]=d):d=e[13],d}function yoe(t){const e=_r.c(56),{isOpen:n,onClose:r,onCreate:i,initialType:o}=t,a=o===void 0?"text":o,[s,l]=q.useState(!1),[u,c]=q.useState(""),[f,d]=q.useState(a),h=q.useRef(null);let m,v;e[0]!==a||e[1]!==n?(m=()=>{if(n)l(!0),c(""),d(a),setTimeout(()=>h.current?.focus(),50);else{const he=setTimeout(()=>l(!1),200);return()=>clearTimeout(he)}},v=[n,a],e[0]=a,e[1]=n,e[2]=m,e[3]=v):(m=e[2],v=e[3]),q.useEffect(m,v);let b;e[4]!==u||e[5]!==r||e[6]!==i||e[7]!==f?(b=he=>{he?.preventDefault(),u.trim()&&(i(u,f),r())},e[4]=u,e[5]=r,e[6]=i,e[7]=f,e[8]=b):b=e[8];const x=b;if(!s&&!n)return null;const C=`fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-200 ${n?"opacity-100 visible":"opacity-0 invisible"}`;let w;e[9]!==r?(w=_.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:r}),e[9]=r,e[10]=w):w=e[10];const A=`bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all duration-200 relative z-10 ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}`;let E;e[11]===Symbol.for("react.memo_cache_sentinel")?(E=_.jsx("h3",{id:"create-modal-title",className:"text-lg font-semibold text-slate-900 mb-4",children:"Create New Item"}),e[11]=E):E=e[11];let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T=_.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-slate-700",children:"Name"}),e[12]=T):T=e[12];let N;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=he=>c(he.target.value),e[13]=N):N=e[13];let D;e[14]!==u?(D=_.jsxs("div",{className:"space-y-1",children:[T,_.jsx("input",{ref:h,id:"item-name",type:"text",value:u,onChange:N,placeholder:"e.g. My Project",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:border-sky-500 transition-shadow",autoComplete:"off"})]}),e[14]=u,e[15]=D):D=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=_.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Type"}),e[16]=M):M=e[16];const k=f==="text";let B;e[17]===Symbol.for("react.memo_cache_sentinel")?(B=()=>d("text"),e[17]=B):B=e[17];let P;e[18]===Symbol.for("react.memo_cache_sentinel")?(P=_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e[18]=P):P=e[18];let $;e[19]!==k?($=_.jsx(FA,{label:"Note",selected:k,onClick:B,icon:P}),e[19]=k,e[20]=$):$=e[20];const z=f==="table";let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j=()=>d("table"),e[21]=j):j=e[21];let L;e[22]===Symbol.for("react.memo_cache_sentinel")?(L=_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e[22]=L):L=e[22];let U;e[23]!==z?(U=_.jsx(FA,{label:"Table",selected:z,onClick:j,icon:L}),e[23]=z,e[24]=U):U=e[24];const G=f==="folder";let Z;e[25]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>d("folder"),e[25]=Z):Z=e[25];let H;e[26]===Symbol.for("react.memo_cache_sentinel")?(H=_.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsx("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),e[26]=H):H=e[26];let W;e[27]!==G?(W=_.jsx(FA,{label:"Folder",selected:G,onClick:Z,icon:H}),e[27]=G,e[28]=W):W=e[28];let K;e[29]!==$||e[30]!==U||e[31]!==W?(K=_.jsxs("div",{className:"space-y-1",children:[M,_.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[$,U,W]})]}),e[29]=$,e[30]=U,e[31]=W,e[32]=K):K=e[32];let I;e[33]!==D||e[34]!==K?(I=_.jsxs("div",{className:"p-6",children:[E,_.jsxs("div",{className:"space-y-4",children:[D,K]})]}),e[33]=D,e[34]=K,e[35]=I):I=e[35];let ee;e[36]!==r?(ee=_.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-200 transition-colors shadow-sm",children:"Cancel"}),e[36]=r,e[37]=ee):ee=e[37];let Q;e[38]!==u?(Q=u.trim(),e[38]=u,e[39]=Q):Q=e[39];const ce=!Q;let ve;e[40]!==ce?(ve=_.jsx("button",{type:"submit",disabled:ce,className:"px-4 py-2 text-sm font-medium text-white bg-sky-500 rounded-lg hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"}),e[40]=ce,e[41]=ve):ve=e[41];let ie;e[42]!==ee||e[43]!==ve?(ie=_.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end gap-3 border-t border-slate-100",children:[ee,ve]}),e[42]=ee,e[43]=ve,e[44]=ie):ie=e[44];let X;e[45]!==x||e[46]!==I||e[47]!==ie?(X=_.jsxs("form",{onSubmit:x,children:[I,ie]}),e[45]=x,e[46]=I,e[47]=ie,e[48]=X):X=e[48];let le;e[49]!==X||e[50]!==A?(le=_.jsx("div",{className:A,onClick:xoe,role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:X}),e[49]=X,e[50]=A,e[51]=le):le=e[51];let Ce;return e[52]!==le||e[53]!==C||e[54]!==w?(Ce=_.jsxs("div",{className:C,children:[w,le]}),e[52]=le,e[53]=C,e[54]=w,e[55]=Ce):Ce=e[55],Ce}function xoe(t){return t.stopPropagation()}function FA(t){const e=_r.c(10),{label:n,selected:r,onClick:i,icon:o}=t,a=`cursor-pointer flex flex-col items-center gap-2 p-3 rounded-lg border transition-all ${r?"bg-sky-50 border-sky-500 text-sky-700 ring-1 ring-sky-500":"bg-white border-slate-200 text-slate-600 hover:border-slate-300 hover:bg-slate-50"}`,s=r?"text-sky-500":"text-slate-400";let l;e[0]!==o||e[1]!==s?(l=_.jsx("div",{className:s,children:o}),e[0]=o,e[1]=s,e[2]=l):l=e[2];let u;e[3]!==n?(u=_.jsx("span",{className:"text-xs font-semibold",children:n}),e[3]=n,e[4]=u):u=e[4];let c;return e[5]!==i||e[6]!==a||e[7]!==l||e[8]!==u?(c=_.jsxs("div",{onClick:i,className:a,children:[l,u]}),e[5]=i,e[6]=a,e[7]=l,e[8]=u,e[9]=c):c=e[9],c}var Vs=tV();const woe=Qs(Vs);const cy="0123456789abcdef";class Td{constructor(e){this.bytes=e}static ofInner(e){if(e.length!==16)throw new TypeError("not 128-bit length");return new Td(e)}static fromFieldsV7(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");const o=new Uint8Array(16);return o[0]=e/2**40,o[1]=e/2**32,o[2]=e/2**24,o[3]=e/2**16,o[4]=e/2**8,o[5]=e,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new Td(o)}static parse(e){var n,r,i,o;let a;switch(e.length){case 32:a=(n=/^[0-9a-f]{32}$/i.exec(e))===null||n===void 0?void 0:n[0];break;case 36:a=(r=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||r===void 0?void 0:r.slice(1,6).join("");break;case 38:a=(i=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e))===null||i===void 0?void 0:i.slice(1,6).join("");break;case 45:a=(o=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||o===void 0?void 0:o.slice(1,6).join("");break}if(a){const s=new Uint8Array(16);for(let l=0;l<16;l+=4){const u=parseInt(a.substring(2*l,2*l+8),16);s[l+0]=u>>>24,s[l+1]=u>>>16,s[l+2]=u>>>8,s[l+3]=u}return new Td(s)}else throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let n=0;n<this.bytes.length;n++)e+=cy.charAt(this.bytes[n]>>>4),e+=cy.charAt(this.bytes[n]&15),(n===3||n===5||n===7||n===9)&&(e+="-");return e}toHex(){let e="";for(let n=0;n<this.bytes.length;n++)e+=cy.charAt(this.bytes[n]>>>4),e+=cy.charAt(this.bytes[n]&15);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every(n=>n===0)?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every(n=>n===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new Td(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let n=0;n<16;n++){const r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class Eoe{constructor(e){this.timestamp_biased=0,this.counter=0,this.random=e??Coe()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,n){let r=this.generateOrAbortCore(e,n);return r===void 0&&(this.timestamp_biased=0,r=this.generateOrAbortCore(e,n)),r}generateOrAbortCore(e,n){if(!Number.isInteger(e)||e<0||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit unsigned integer");if(n<0||n>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e++,e>this.timestamp_biased)this.timestamp_biased=e,this.resetCounter();else if(e+n>=this.timestamp_biased)this.counter++,this.counter>4398046511103&&(this.timestamp_biased++,this.resetCounter());else return;return Td.fromFieldsV7(this.timestamp_biased-1,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,Td.ofInner(e)}}const Coe=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new Soe;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class Soe{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let DR;const vo=()=>Toe().toString(),Toe=()=>(DR||(DR=new Eoe)).generate(),xo=()=>new Map,Z3=t=>{const e=xo();return t.forEach((n,r)=>{e.set(r,n)}),e},Js=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Aoe=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},Noe=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},cf=()=>new Set,PA=t=>t[t.length-1],Doe=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Uu=Array.from,lM=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},uM=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Moe=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},am=Array.isArray;class uV{constructor(){this._observers=xo()}on(e,n){return Js(this._observers,e,cf).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Uu((this._observers.get(e)||xo()).values()).forEach(r=>r(...n))}destroy(){this._observers=xo()}}class koe{constructor(){this._observers=xo()}on(e,n){Js(this._observers,e,cf).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Uu((this._observers.get(e)||xo()).values()).forEach(r=>r(...n))}destroy(){this._observers=xo()}}const qs=Math.floor,x2=Math.abs,ku=(t,e)=>t<e?t:e,js=(t,e)=>t>e?t:e,cV=t=>t!==0?t<0:1/t<0,MR=1,kR=2,$A=4,zA=8,f1=32,_u=64,wo=128,_oe=1<<29,pE=31,Q3=63,Id=127,Ooe=2147483647,ex=Number.MAX_SAFE_INTEGER,_R=Number.MIN_SAFE_INTEGER,Ioe=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&qs(t)===t),fV=String.fromCharCode,Roe=t=>t.toLowerCase(),Boe=/^\s*/g,Loe=t=>t.replace(Boe,""),Foe=/([A-Z])/g,OR=(t,e)=>Loe(t.replace(Foe,n=>`${e}${Roe(n)}`)),Poe=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},d1=typeof TextEncoder<"u"?new TextEncoder:null,$oe=t=>d1.encode(t),zoe=d1?$oe:Poe;let Ug=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ug&&Ug.decode(new Uint8Array).length===1&&(Ug=null);const Uoe=(t,e)=>Moe(e,()=>t).join("");class J1{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ev=()=>new J1,Hoe=t=>{const e=ev();return t(e),Rs(e)},Voe=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Rs=t=>{const e=new Uint8Array(Voe(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},qoe=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(js(n,e)*2),t.cpos=0)},xi=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},J3=xi,Sn=(t,e)=>{for(;e>Id;)xi(t,wo|Id&e),e=qs(e/128);xi(t,Id&e)},cM=(t,e)=>{const n=cV(e);for(n&&(e=-e),xi(t,(e>Q3?wo:0)|(n?_u:0)|Q3&e),e=qs(e/64);e>0;)xi(t,(e>Id?wo:0)|Id&e),e=qs(e/128)},eD=new Uint8Array(3e4),joe=eD.length/3,Goe=(t,e)=>{if(e.length<joe){const n=d1.encodeInto(e,eD).written||0;Sn(t,n);for(let r=0;r<n;r++)xi(t,eD[r])}else ba(t,zoe(e))},Yoe=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Sn(t,r);for(let i=0;i<r;i++)xi(t,n.codePointAt(i))},Hp=d1&&d1.encodeInto?Goe:Yoe,mE=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=ku(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(js(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},ba=(t,e)=>{Sn(t,e.byteLength),mE(t,e)},fM=(t,e)=>{qoe(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Woe=(t,e)=>fM(t,4).setFloat32(0,e,!1),Koe=(t,e)=>fM(t,8).setFloat64(0,e,!1),Xoe=(t,e)=>fM(t,8).setBigInt64(0,e,!1),IR=new DataView(new ArrayBuffer(4)),Zoe=t=>(IR.setFloat32(0,t),IR.getFloat32(0)===t),sm=(t,e)=>{switch(typeof e){case"string":xi(t,119),Hp(t,e);break;case"number":Ioe(e)&&x2(e)<=Ooe?(xi(t,125),cM(t,e)):Zoe(e)?(xi(t,124),Woe(t,e)):(xi(t,123),Koe(t,e));break;case"bigint":xi(t,122),Xoe(t,e);break;case"object":if(e===null)xi(t,126);else if(am(e)){xi(t,117),Sn(t,e.length);for(let n=0;n<e.length;n++)sm(t,e[n])}else if(e instanceof Uint8Array)xi(t,116),ba(t,e);else{xi(t,118);const n=Object.keys(e);Sn(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Hp(t,i),sm(t,e[i])}}break;case"boolean":xi(t,e?120:121);break;default:xi(t,127)}};class RR extends J1{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Sn(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const BR=t=>{t.count>0&&(cM(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Sn(t.encoder,t.count-2))};class w2{constructor(){this.encoder=new J1,this.s=0,this.count=0}write(e){this.s===e?this.count++:(BR(this),this.count=1,this.s=e)}toUint8Array(){return BR(this),Rs(this.encoder)}}const LR=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);cM(t.encoder,e),t.count>1&&Sn(t.encoder,t.count-2)}};class UA{constructor(){this.encoder=new J1,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(LR(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return LR(this),Rs(this.encoder)}}class Qoe{constructor(){this.sarr=[],this.s="",this.lensE=new w2}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new J1;return this.sarr.push(this.s),this.s="",Hp(e,this.sarr.join("")),mE(e,this.lensE.toUint8Array()),Rs(e)}}const Gs=t=>new Error(t),ls=()=>{throw Gs("Method unimplemented")},Ao=()=>{throw Gs("Unexpected case")},dV=Gs("Unexpected end of array"),hV=Gs("Integer out of Range");class gE{constructor(e){this.arr=e,this.pos=0}}const Fm=t=>new gE(t),Joe=t=>t.pos!==t.arr.length,eae=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},ya=t=>eae(t,mn(t)),lm=t=>t.arr[t.pos++],mn=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Id)*n,n*=128,i<wo)return e;if(e>ex)throw hV}throw dV},dM=t=>{let e=t.arr[t.pos++],n=e&Q3,r=64;const i=(e&_u)>0?-1:1;if((e&wo)===0)return i*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&Id)*r,r*=128,e<wo)return i*n;if(n>ex)throw hV}throw dV},tae=t=>{let e=mn(t);if(e===0)return"";{let n=String.fromCodePoint(lm(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(lm(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},nae=t=>Ug.decode(ya(t)),Vp=Ug?nae:tae,hM=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},rae=t=>hM(t,4).getFloat32(0,!1),iae=t=>hM(t,8).getFloat64(0,!1),oae=t=>hM(t,8).getBigInt64(0,!1),aae=[t=>{},t=>null,dM,rae,iae,oae,t=>!1,t=>!0,Vp,t=>{const e=mn(t),n={};for(let r=0;r<e;r++){const i=Vp(t);n[i]=h1(t)}return n},t=>{const e=mn(t),n=[];for(let r=0;r<e;r++)n.push(h1(t));return n},ya],h1=t=>aae[127-lm(t)](t);class FR extends gE{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Joe(this)?this.count=mn(this)+1:this.count=-1),this.count--,this.s}}class E2 extends gE{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=dM(this);const e=cV(this.s);this.count=1,e&&(this.s=-this.s,this.count=mn(this)+2)}return this.count--,this.s}}class HA extends gE{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=dM(this),n=e&1;this.diff=qs(e/2),this.count=1,n&&(this.count=mn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class sae{constructor(e){this.decoder=new E2(e),this.str=Vp(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const lae=crypto.getRandomValues.bind(crypto),uae=Math.random,pV=()=>lae(new Uint32Array(1))[0],cae=t=>t[qs(uae()*t.length)],fae="10000000-1000-4000-8000"+-1e11,dae=()=>fae.replace(/[018]/g,t=>(t^pV()&15>>t/4).toString(16)),hae=Date.now,um=t=>new Promise(t);Promise.all.bind(Promise);const PR=t=>t===void 0?null:t;class pae{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let mV=new pae,mae=!0;try{typeof localStorage<"u"&&localStorage&&(mV=localStorage,mae=!1)}catch{}const gae=mV,p1=Symbol("Equality"),gV=(t,e)=>t===e||!!t?.[p1]?.(e)||!1,vae=t=>typeof t=="object",bae=Object.assign,vV=Object.keys,yae=(t,e)=>{for(const n in t)e(t[n],n)},tx=t=>vV(t).length,xae=t=>{for(const e in t)return!1;return!0},Pm=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},pM=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),wae=(t,e)=>t===e||tx(t)===tx(e)&&Pm(t,(n,r)=>(n!==void 0||pM(e,r))&&gV(e[r],n)),Eae=Object.freeze,bV=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&bV(t[e])}return Eae(t)},mM=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&mM(t,e,n+1)}},Cae=t=>t,C2=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[p1]!=null)return t[p1](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!C2(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(tx(t)!==tx(e))return!1;for(const n in t)if(!pM(t,n)||!C2(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!C2(t[n],e[n]))return!1;break;default:return!1}return!0},Sae=(t,e)=>e.includes(t);var yV={};const cm=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",xV=typeof window<"u"&&typeof document<"u"&&!cm;let El;const Tae=()=>{if(El===void 0)if(cm){El=xo();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&El.set(e,""),e=r):e!==null&&(El.set(e,r),e=null)}e!==null&&El.set(e,"")}else typeof location=="object"?(El=xo(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");El.set(`--${OR(e,"-")}`,n),El.set(`-${OR(e,"-")}`,n)}})):El=xo();return El},tD=t=>Tae().has(t),nx=t=>PR(cm?yV[t.toUpperCase().replaceAll("-","_")]:gae.getItem(t)),wV=t=>tD("--"+t)||nx(t)!==null,Aae=wV("production"),Nae=cm&&Sae(yV.FORCE_COLOR,["true","1","2"]),Dae=Nae||!tD("--no-colors")&&!wV("no-color")&&(!cm||process.stdout.isTTY)&&(!cm||tD("--color")||nx("COLORTERM")!==null||(nx("TERM")||"").includes("color")),Mae=t=>new Uint8Array(t),kae=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=fV(t[n]);return btoa(e)},_ae=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Oae=xV?kae:_ae,Iae=t=>{const e=Mae(t.byteLength);return e.set(t),e},Rae=t=>Hoe(e=>sm(e,t));class Bae{constructor(e,n){this.left=e,this.right=n}}const hu=(t,e)=>new Bae(t,e),$R=t=>t.next()>=.5,VA=(t,e,n)=>qs(t.next()*(n+1-e)+e),EV=(t,e,n)=>qs(t.next()*(n+1-e)+e),gM=(t,e,n)=>EV(t,e,n),Lae=t=>fV(gM(t,97,122)),Fae=(t,e=0,n=20)=>{const r=gM(t,e,n);let i="";for(let o=0;o<r;o++)i+=Lae(t);return i},qA=(t,e)=>e[gM(t,0,e.length-1)],Pae=Symbol("0schema");class $ae{constructor(){this._rerrs=[]}extend(e,n,r,i=null){this._rerrs.push({path:e,expected:n,has:r,message:i})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(Uoe(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const nD=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[p1]?gV(t,e):am(t)?lM(t,n=>uM(e,r=>nD(n,r))):vae(t)?Pm(t,(n,r)=>nD(n,e[r])):!1;let _o=class{static _dilutes=!1;extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),nD(n,r)}equals(e){return this.constructor===e.constructor&&C2(this.shape,e.shape)}[Pae](){return!0}[p1](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){ls()}get nullable(){return $m(this,wE)}get optional(){return new TV(this)}cast(e){return zR(e,this),e}expect(e){return zR(e,this),e}};class vM extends _o{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=e?.constructor===this.shape&&(this._c==null||this._c(e));return!r&&n?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),r}}const si=(t,e=null)=>new vM(t,e);si(vM);class bM extends _o{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&n?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),r}}const ki=t=>new bM(t);si(bM);class vE extends _o{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(i=>i===e);return!r&&n?.extend(null,this.shape.join(" | "),e.toString()),r}}const bE=(...t)=>new vE(t),CV=si(vE),zae=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),SV=t=>{if(fm.check(t))return[zae(t)];if(CV.check(t))return t.shape.map(e=>e+"");if(RV.check(t))return["[+-]?\\d+.?\\d*"];if(BV.check(t))return[".*"];if(rx.check(t))return t.shape.map(SV).flat(1);Ao()};class Uae extends _o{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(SV).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&n?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),r}}si(Uae);const Hae=Symbol("optional");class TV extends _o{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&n?.extend(null,"undefined (optional)","()"),r}get[Hae](){return!0}}const Vae=si(TV);class qae extends _o{check(e,n){return n?.extend(null,"never",typeof e),!1}}si(qae);class yE extends _o{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}static _dilutes=!0;get partial(){return new yE(this.shape,!0)}check(e,n){return e==null?(n?.extend(null,"object","null"),!1):Pm(this.shape,(r,i)=>{const o=this._isPartial&&!pM(e,i)||r.check(e[i],n);return!o&&n?.extend(i.toString(),r.toString(),typeof e[i],"Object property does not match"),o})}}const jae=t=>new yE(t),Gae=si(yE),Yae=ki(t=>t!=null&&(t.constructor===Object||t.constructor==null));class AV extends _o{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&Pm(e,(r,i)=>{const o=this.shape.keys.check(i,n);return!o&&n?.extend(i+"","Record",typeof e,o?"Key doesn't match schema":"Value doesn't match value"),o&&this.shape.values.check(r,n)})}}const NV=(t,e)=>new AV(t,e),Wae=si(AV);class DV extends _o{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&Pm(this.shape,(r,i)=>{const o=r.check(e[i],n);return!o&&n?.extend(i.toString(),"Tuple",typeof r),o})}}const Kae=(...t)=>new DV(t);si(DV);class MV extends _o{constructor(e){super(),this.shape=e.length===1?e[0]:new yM(e)}check(e,n){const r=am(e)&&lM(e,i=>this.shape.check(i));return!r&&n?.extend(null,"Array",""),r}}const kV=(...t)=>new MV(t),Xae=si(MV),Zae=ki(t=>am(t));class _V extends _o{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&n?.extend(null,this.shape.name,e?.constructor.name),r}}const Qae=(t,e=null)=>new _V(t,e);si(_V);const Jae=Qae(_o);class ese extends _o{constructor(e){super(),this.len=e.length-1,this.args=Kae(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&n?.extend(null,"function",typeof e),r}}const tse=si(ese),nse=ki(t=>typeof t=="function");class rse extends _o{constructor(e){super(),this.shape=e}check(e,n){const r=lM(this.shape,i=>i.check(e,n));return!r&&n?.extend(null,"Intersectinon",typeof e),r}}si(rse,t=>t.shape.length>0);class yM extends _o{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,n){const r=uM(this.shape,i=>i.check(e,n));return n?.extend(null,"Union",typeof e),r}}const $m=(...t)=>t.findIndex(e=>rx.check(e))>=0?$m(...t.map(e=>m1(e)).map(e=>rx.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new yM(t),rx=si(yM),OV=()=>!0,ix=ki(OV),ise=si(bM,t=>t.shape===OV),xM=ki(t=>typeof t=="bigint"),ose=ki(t=>t===xM),IV=ki(t=>typeof t=="symbol");ki(t=>t===IV);const qp=ki(t=>typeof t=="number"),RV=ki(t=>t===qp),fm=ki(t=>typeof t=="string"),BV=ki(t=>t===fm),xE=ki(t=>typeof t=="boolean"),ase=ki(t=>t===xE),LV=bE(void 0);si(vE,t=>t.shape.length===1&&t.shape[0]===void 0);bE(void 0);const wE=bE(null),sse=si(vE,t=>t.shape.length===1&&t.shape[0]===null);si(Uint8Array);si(vM,t=>t.shape===Uint8Array);const lse=$m(qp,fm,wE,LV,xM,xE,IV);(()=>{const t=kV(ix),e=NV(fm,ix),n=$m(qp,fm,wE,xE,t,e);return t.shape=n,e.shape.values=n,n})();const m1=t=>{if(Jae.check(t))return t;if(Yae.check(t)){const e={};for(const n in t)e[n]=m1(t[n]);return jae(e)}else{if(Zae.check(t))return $m(...t.map(m1));if(lse.check(t))return bE(t);if(nse.check(t))return si(t)}Ao()},zR=Aae?()=>{}:(t,e)=>{const n=new $ae;if(!e.check(t,n))throw Gs(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class use{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:m1(e),h:n}),this}else(e){return this.if(ix,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const i=this.patterns[r];if(i.if.check(e))return i.h(e,n)}throw Gs("Unhandled pattern")}}}const cse=t=>new use(t),FV=cse(ix).if(RV,(t,e)=>VA(e,_R,ex)).if(BV,(t,e)=>Fae(e)).if(ase,(t,e)=>$R(e)).if(ose,(t,e)=>BigInt(VA(e,_R,ex))).if(rx,(t,e)=>dp(e,qA(e,t.shape))).if(Gae,(t,e)=>{const n={};for(const r in t.shape){let i=t.shape[r];if(Vae.check(i)){if($R(e))continue;i=i.shape}n[r]=FV(i,e)}return n}).if(Xae,(t,e)=>{const n=[],r=EV(e,0,42);for(let i=0;i<r;i++)n.push(dp(e,t.shape));return n}).if(CV,(t,e)=>qA(e,t.shape)).if(sse,(t,e)=>null).if(tse,(t,e)=>{const n=dp(e,t.res);return()=>n}).if(ise,(t,e)=>dp(e,qA(e,[qp,fm,wE,LV,xM,xE,kV(qp),NV($m("a","b","c"),qp)]))).if(Wae,(t,e)=>{const n={},r=VA(e,0,3);for(let i=0;i<r;i++){const o=dp(e,t.shape.keys),a=dp(e,t.shape.values);n[o]=a}return n}).done(),dp=(t,e)=>FV(m1(e),t),tv=typeof document<"u"?document:{};ki(t=>t.nodeType===mse);typeof DOMParser<"u"&&new DOMParser;ki(t=>t.nodeType===dse);ki(t=>t.nodeType===hse);const fse=t=>Aoe(t,(e,n)=>`${n}:${e};`).join(""),dse=tv.ELEMENT_NODE,hse=tv.TEXT_NODE,pse=tv.DOCUMENT_NODE,mse=tv.DOCUMENT_FRAGMENT_NODE;ki(t=>t.nodeType===pse);const gse=t=>class{constructor(n){this._=n}destroy(){t(this._)}},vse=gse(clearTimeout),wM=(t,e)=>new vse(setTimeout(e,t)),Zu=Symbol,PV=Zu(),$V=Zu(),bse=Zu(),yse=Zu(),xse=Zu(),zV=Zu(),wse=Zu(),EM=Zu(),Ese=Zu(),Cse=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},Sse={[PV]:hu("font-weight","bold"),[$V]:hu("font-weight","normal"),[bse]:hu("color","blue"),[xse]:hu("color","green"),[yse]:hu("color","grey"),[zV]:hu("color","red"),[wse]:hu("color","purple"),[EM]:hu("color","orange"),[Ese]:hu("color","black")},Tse=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=xo();let i=[],o=0;for(;o<t.length;o++){const a=t[o],s=Sse[a];if(s!==void 0)r.set(s.left,s.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const l=fse(r);o>0||l.length>0?(e.push("%c"+a),n.push(l)):e.push(a)}else break}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const a=t[o];a instanceof Symbol||i.push(a)}return i},UV=Dae?Tse:Cse,Ase=(...t)=>{console.log(...UV(t)),VV.forEach(e=>e.print(t))},HV=(...t)=>{console.warn(...UV(t)),t.unshift(EM),VV.forEach(e=>e.print(t))},VV=cf(),qV=t=>({[Symbol.iterator](){return this},next:t}),Nse=(t,e)=>qV(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),jA=(t,e)=>qV(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class CM{constructor(e,n){this.clock=e,this.len=n}}class zm{constructor(){this.clients=new Map}}const ff=(t,e,n)=>e.clients.forEach((r,i)=>{const o=t.doc.store.clients.get(i);if(o!=null){const a=o[o.length-1],s=a.id.clock+a.length;for(let l=0,u=r[l];l<r.length&&u.clock<s;u=r[++l])iq(t,o,u.clock,u.len,n)}}),Dse=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=qs((n+r)/2),o=t[i],a=o.clock;if(a<=e){if(e<a+o.len)return i;n=i+1}else r=i-1}return null},Um=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Dse(n,e.clock)!==null},SM=t=>{t.clients.forEach(e=>{e.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],o=e[n];i.clock+i.len>=o.clock?i.len=js(i.len,o.clock+o.len-i.clock):(r<n&&(e[r]=o),r++)}e.length=r})},rD=t=>{const e=new zm;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const o=r.slice();for(let a=n+1;a<t.length;a++)Doe(o,t[a].clients.get(i)||[]);e.clients.set(i,o)}});return SM(e),e},g1=(t,e,n,r)=>{Js(t.clients,e,()=>[]).push(new CM(n,r))},jV=()=>new zm,GV=t=>{const e=jV();return t.clients.forEach((n,r)=>{const i=[];for(let o=0;o<n.length;o++){const a=n[o];if(a.deleted){const s=a.id.clock;let l=a.length;if(o+1<n.length)for(let u=n[o+1];o+1<n.length&&u.deleted;u=n[++o+1])l+=u.length;i.push(new CM(s,l))}}i.length>0&&e.clients.set(r,i)}),e},Hm=(t,e)=>{Sn(t.restEncoder,e.clients.size),Uu(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Sn(t.restEncoder,n);const i=r.length;Sn(t.restEncoder,i);for(let o=0;o<i;o++){const a=r[o];t.writeDsClock(a.clock),t.writeDsLen(a.len)}})},TM=t=>{const e=new zm,n=mn(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=mn(t.restDecoder),o=mn(t.restDecoder);if(o>0){const a=Js(e.clients,i,()=>[]);for(let s=0;s<o;s++)a.push(new CM(t.readDsClock(),t.readDsLen()))}}return e},UR=(t,e,n)=>{const r=new zm,i=mn(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const a=mn(t.restDecoder),s=mn(t.restDecoder),l=n.clients.get(a)||[],u=Gr(n,a);for(let c=0;c<s;c++){const f=t.readDsClock(),d=f+t.readDsLen();if(f<u){u<d&&g1(r,a,u,d-u);let h=ms(l,f),m=l[h];for(!m.deleted&&m.id.clock<f&&(l.splice(h+1,0,dx(e,m,f-m.id.clock)),h++);h<l.length&&(m=l[h++],m.id.clock<d);)m.deleted||(d<m.id.clock+m.length&&l.splice(h,0,dx(e,m,d-m.id.clock)),m.delete(e))}else g1(r,a,f,d-f)}}if(r.clients.size>0){const o=new qd;return Sn(o.restEncoder,0),Hm(o,r),o.toUint8Array()}return null},YV=pV;class Qu extends uV{constructor({guid:e=dae(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:a=!1,shouldLoad:s=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=YV(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new nq,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=a,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=um(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>um(u=>{const c=f=>{(f===void 0||f===!0)&&(this.off("sync",c),u())};this.on("sync",c)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&ir(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Uu(this.subdocs).map(e=>e.guid))}transact(e,n=null){return ir(this,e,n)}get(e,n=Ti){const r=Js(this.share,e,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Ti&&i!==n)if(i===Ti){const o=new n;o._map=r._map,r._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=o}),o._start=r._start;for(let a=o._start;a!==null;a=a.right)a.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Yp)}getText(e=""){return this.get(e,df)}getMap(e=""){return this.get(e,jd)}getXmlElement(e=""){return this.get(e,zi)}getXmlFragment(e=""){return this.get(e,Gd)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Uu(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Qu({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,ir(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class WV{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return mn(this.restDecoder)}readDsLen(){return mn(this.restDecoder)}}class KV extends WV{readLeftID(){return Qt(mn(this.restDecoder),mn(this.restDecoder))}readRightID(){return Qt(mn(this.restDecoder),mn(this.restDecoder))}readClient(){return mn(this.restDecoder)}readInfo(){return lm(this.restDecoder)}readString(){return Vp(this.restDecoder)}readParentInfo(){return mn(this.restDecoder)===1}readTypeRef(){return mn(this.restDecoder)}readLen(){return mn(this.restDecoder)}readAny(){return h1(this.restDecoder)}readBuf(){return Iae(ya(this.restDecoder))}readJSON(){return JSON.parse(Vp(this.restDecoder))}readKey(){return Vp(this.restDecoder)}}class Mse{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=mn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=mn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class dm extends Mse{constructor(e){super(e),this.keys=[],mn(e),this.keyClockDecoder=new HA(ya(e)),this.clientDecoder=new E2(ya(e)),this.leftClockDecoder=new HA(ya(e)),this.rightClockDecoder=new HA(ya(e)),this.infoDecoder=new FR(ya(e),lm),this.stringDecoder=new sae(ya(e)),this.parentInfoDecoder=new FR(ya(e),lm),this.typeRefDecoder=new E2(ya(e)),this.lenDecoder=new E2(ya(e))}readLeftID(){return new jp(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new jp(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return h1(this.restDecoder)}readBuf(){return ya(this.restDecoder)}readJSON(){return h1(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class XV{constructor(){this.restEncoder=ev()}toUint8Array(){return Rs(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Sn(this.restEncoder,e)}writeDsLen(e){Sn(this.restEncoder,e)}}class nv extends XV{writeLeftID(e){Sn(this.restEncoder,e.client),Sn(this.restEncoder,e.clock)}writeRightID(e){Sn(this.restEncoder,e.client),Sn(this.restEncoder,e.clock)}writeClient(e){Sn(this.restEncoder,e)}writeInfo(e){J3(this.restEncoder,e)}writeString(e){Hp(this.restEncoder,e)}writeParentInfo(e){Sn(this.restEncoder,e?1:0)}writeTypeRef(e){Sn(this.restEncoder,e)}writeLen(e){Sn(this.restEncoder,e)}writeAny(e){sm(this.restEncoder,e)}writeBuf(e){ba(this.restEncoder,e)}writeJSON(e){Hp(this.restEncoder,JSON.stringify(e))}writeKey(e){Hp(this.restEncoder,e)}}class ZV{constructor(){this.restEncoder=ev(),this.dsCurrVal=0}toUint8Array(){return Rs(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Sn(this.restEncoder,n)}writeDsLen(e){e===0&&Ao(),Sn(this.restEncoder,e-1),this.dsCurrVal+=e}}class qd extends ZV{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new UA,this.clientEncoder=new w2,this.leftClockEncoder=new UA,this.rightClockEncoder=new UA,this.infoEncoder=new RR(J3),this.stringEncoder=new Qoe,this.parentInfoEncoder=new RR(J3),this.typeRefEncoder=new w2,this.lenEncoder=new w2}toUint8Array(){const e=ev();return Sn(e,0),ba(e,this.keyClockEncoder.toUint8Array()),ba(e,this.clientEncoder.toUint8Array()),ba(e,this.leftClockEncoder.toUint8Array()),ba(e,this.rightClockEncoder.toUint8Array()),ba(e,Rs(this.infoEncoder)),ba(e,this.stringEncoder.toUint8Array()),ba(e,Rs(this.parentInfoEncoder)),ba(e,this.typeRefEncoder.toUint8Array()),ba(e,this.lenEncoder.toUint8Array()),mE(e,Rs(this.restEncoder)),Rs(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){sm(this.restEncoder,e)}writeBuf(e){ba(this.restEncoder,e)}writeJSON(e){sm(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const kse=(t,e,n,r)=>{r=js(r,e[0].id.clock);const i=ms(e,r);Sn(t.restEncoder,e.length-i),t.writeClient(n),Sn(t.restEncoder,r);const o=e[i];o.write(t,r-o.id.clock);for(let a=i+1;a<e.length;a++)e[a].write(t,0)},AM=(t,e,n)=>{const r=new Map;n.forEach((i,o)=>{Gr(e,o)>i&&r.set(o,i)}),rv(e).forEach((i,o)=>{n.has(o)||r.set(o,0)}),Sn(t.restEncoder,r.size),Uu(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{kse(t,e.clients.get(i),i,o)})},_se=(t,e)=>{const n=xo(),r=mn(t.restDecoder);for(let i=0;i<r;i++){const o=mn(t.restDecoder),a=new Array(o),s=t.readClient();let l=mn(t.restDecoder);n.set(s,{i:0,refs:a});for(let u=0;u<o;u++){const c=t.readInfo();switch(pE&c){case 0:{const f=t.readLen();a[u]=new rs(Qt(s,l),f),l+=f;break}case 10:{const f=mn(t.restDecoder);a[u]=new is(Qt(s,l),f),l+=f;break}default:{const f=(c&(_u|wo))===0,d=new yr(Qt(s,l),null,(c&wo)===wo?t.readLeftID():null,null,(c&_u)===_u?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(c&f1)===f1?t.readString():null,Aq(t,c));a[u]=d,l+=d.length}}}}return n},Ose=(t,e,n)=>{const r=[];let i=Uu(n.keys()).sort((h,m)=>h-m);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let h=n.get(i[i.length-1]);for(;h.refs.length===h.i;)if(i.pop(),i.length>0)h=n.get(i[i.length-1]);else return null;return h};let a=o();if(a===null)return null;const s=new nq,l=new Map,u=(h,m)=>{const v=l.get(h);(v==null||v>m)&&l.set(h,m)};let c=a.refs[a.i++];const f=new Map,d=()=>{for(const h of r){const m=h.id.client,v=n.get(m);v?(v.i--,s.clients.set(m,v.refs.slice(v.i)),n.delete(m),v.i=0,v.refs=[]):s.clients.set(m,[h]),i=i.filter(b=>b!==m)}r.length=0};for(;;){if(c.constructor!==is){const m=Js(f,c.id.client,()=>Gr(e,c.id.client))-c.id.clock;if(m<0)r.push(c),u(c.id.client,c.id.clock-1),d();else{const v=c.getMissing(t,e);if(v!==null){r.push(c);const b=n.get(v)||{refs:[],i:0};if(b.refs.length===b.i)u(v,Gr(e,v)),d();else{c=b.refs[b.i++];continue}}else(m===0||m<c.length)&&(c.integrate(t,m),f.set(c.id.client,c.id.clock+c.length))}}if(r.length>0)c=r.pop();else if(a!==null&&a.i<a.refs.length)c=a.refs[a.i++];else{if(a=o(),a===null)break;c=a.refs[a.i++]}}if(s.clients.size>0){const h=new qd;return AM(h,s,new Map),Sn(h.restEncoder,0),{missing:l,update:h.toUint8Array()}}return null},Ise=(t,e)=>AM(t,e.doc.store,e.beforeState),Rse=(t,e,n,r=new dm(t))=>ir(e,i=>{i.local=!1;let o=!1;const a=i.doc,s=a.store,l=_se(r,a),u=Ose(i,s,l),c=s.pendingStructs;if(c){for(const[d,h]of c.missing)if(h<Gr(s,d)){o=!0;break}if(u){for(const[d,h]of u.missing){const m=c.missing.get(d);(m==null||m>h)&&c.missing.set(d,h)}c.update=sx([c.update,u.update])}}else s.pendingStructs=u;const f=UR(r,i,s);if(s.pendingDs){const d=new dm(Fm(s.pendingDs));mn(d.restDecoder);const h=UR(d,i,s);f&&h?s.pendingDs=sx([f,h]):s.pendingDs=f||h}else s.pendingDs=f;if(o){const d=s.pendingStructs.update;s.pendingStructs=null,ox(i.doc,d)}},n,!1),ox=(t,e,n,r=dm)=>{const i=Fm(e);Rse(i,t,n,new r(i))},ax=(t,e,n)=>ox(t,e,n,KV),Bse=(t,e,n=new Map)=>{AM(t,e.store,n),Hm(t,GV(e.store))},Lse=(t,e=new Uint8Array([0]),n=new qd)=>{const r=QV(e);Bse(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(tle(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===nv)return Jse(i.map((o,a)=>a===0?o:rle(o)));if(n.constructor===qd)return sx(i)}return i[0]},hm=(t,e)=>Lse(t,e,new nv),Fse=t=>{const e=new Map,n=mn(t.restDecoder);for(let r=0;r<n;r++){const i=mn(t.restDecoder),o=mn(t.restDecoder);e.set(i,o)}return e},QV=t=>Fse(new WV(Fm(t))),JV=(t,e)=>(Sn(t.restEncoder,e.size),Uu(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Sn(t.restEncoder,n),Sn(t.restEncoder,r)}),t),Pse=(t,e)=>JV(t,rv(e.store)),$se=(t,e=new ZV)=>(t instanceof Map?JV(e,t):Pse(e,t),e.toUint8Array()),zse=t=>$se(t,new XV);class Use{constructor(){this.l=[]}}const HR=()=>new Use,VR=(t,e)=>t.l.push(e),qR=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},eq=(t,e,n)=>mM(t.l,[e,n]);class jp{constructor(e,n){this.client=e,this.clock=n}}const Lp=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Qt=(t,e)=>new jp(t,e),v1=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Ao()},b1=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class y1{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}}const Hg=t=>new y1(t.type==null?null:Qt(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Qt(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class Hse{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const Vse=(t,e,n=0)=>new Hse(t,e,n),fy=(t,e,n)=>{let r=null,i=null;return t._item===null?i=v1(t):r=Qt(t._item.id.client,t._item.id.clock),new y1(r,i,e,n)},GA=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return fy(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return fy(t,Qt(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return fy(t,r.lastId,n);r=r.right}return fy(t,null,n)},qse=(t,e)=>{const n=Gp(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},jse=(t,e,n=!0)=>{const r=e.store,i=t.item,o=t.type,a=t.tname,s=t.assoc;let l=null,u=0;if(i!==null){if(Gr(r,i.client)<=i.clock)return null;const c=n?sD(r,i):qse(r,i),f=c.item;if(!(f instanceof yr))return null;if(l=f.parent,l._item===null||!l._item.deleted){u=f.deleted||!f.countable?0:c.diff+(s>=0?0:1);let d=f.left;for(;d!==null;)!d.deleted&&d.countable&&(u+=d.length),d=d.left}}else{if(a!==null)l=e.get(a);else if(o!==null){if(Gr(r,o.client)<=o.clock)return null;const{item:c}=n?sD(r,o):{item:Gp(r,o)};if(c instanceof yr&&c.content instanceof el)l=c.content.type;else return null}else throw Ao();s>=0?u=l._length:u=0}return Vse(l,u,t.assoc)},jR=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Lp(t.item,e.item)&&Lp(t.type,e.type)&&t.assoc===e.assoc;class NM{constructor(e,n){this.ds=e,this.sv=n}}const tq=(t,e)=>new NM(t,e),YA=t=>tq(GV(t.store),rv(t.store)),Ed=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Um(e.ds,t.id),iD=(t,e)=>{const n=Js(t.meta,iD,cf),r=t.doc.store;n.has(e)||(e.sv.forEach((i,o)=>{i<Gr(r,o)&&Wo(t,Qt(o,i))}),ff(t,e.ds,i=>{}),n.add(e))};class nq{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const rv=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Gr=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},rq=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ao()}n.push(e)},ms=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let a=qs(e/(o+i.length-1)*r);for(;n<=r;){if(i=t[a],o=i.id.clock,o<=e){if(e<o+i.length)return a;n=a+1}else r=a-1;a=qs((n+r)/2)}throw Ao()},Gse=(t,e)=>{const n=t.clients.get(e.client);return n[ms(n,e.clock)]},Gp=Gse,oD=(t,e,n)=>{const r=ms(e,n),i=e[r];return i.id.clock<n&&i instanceof yr?(e.splice(r+1,0,dx(t,i,n-i.id.clock)),r+1):r},Wo=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[oD(t,n,e.clock)]},GR=(t,e,n)=>{const r=e.clients.get(n.client),i=ms(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==rs&&r.splice(i+1,0,dx(t,o,n.clock-o.id.clock+1)),o},Yse=(t,e,n)=>{const r=t.clients.get(e.id.client);r[ms(r,e.id.clock)]=n},iq=(t,e,n,r,i)=>{if(r===0)return;const o=n+r;let a=oD(t,e,n),s;do s=e[a++],o<s.id.clock+s.length&&oD(t,e,o),i(s);while(a<e.length&&e[a].id.clock<o)};let Wse=class{constructor(e,n,r){this.doc=e,this.deleteSet=new zm,this.beforeState=rv(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}};const YR=(t,e)=>e.deleteSet.clients.size===0&&!Noe(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(SM(e.deleteSet),Ise(t,e),Hm(t,e.deleteSet),!0),WR=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Js(t.changed,e,cf).add(n)},S2=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof yr&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=e-i;return o&&t.splice(e+1-o,o),o},Kse=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const o=e.clients.get(r);for(let a=i.length-1;a>=0;a--){const s=i[a],l=s.clock+s.len;for(let u=ms(o,s.clock),c=o[u];u<o.length&&c.id.clock<l;c=o[++u]){const f=o[u];if(s.clock+s.len<=f.id.clock)break;f instanceof yr&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},Xse=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let o=n.length-1;o>=0;o--){const a=n[o],s=ku(i.length-1,1+ms(i,a.clock+a.len-1));for(let l=s,u=i[l];l>0&&u.id.clock>=a.clock;u=i[l])l-=1+S2(i,l)}})},oq=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,o=n.deleteSet,a=n._mergeStructs;try{SM(o),n.afterState=rv(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const s=[];n.changed.forEach((l,u)=>s.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(n,l)})),s.push(()=>{n.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(c=>c.target._item===null||!c.target._item.deleted),l.forEach(c=>{c.currentTarget=u,c._path=null}),l.sort((c,f)=>c.path.length-f.path.length),s.push(()=>{eq(u._dEH,l,n)}))}),s.push(()=>r.emit("afterTransaction",[n,r])),s.push(()=>{n._needFormattingCleanup&&vle(n)})}),mM(s,[])}finally{r.gc&&Kse(o,i,r.gcFilter),Xse(o,i),n.afterState.forEach((c,f)=>{const d=n.beforeState.get(f)||0;if(d!==c){const h=i.clients.get(f),m=js(ms(h,d),1);for(let v=h.length-1;v>=m;)v-=1+S2(h,v)}});for(let c=a.length-1;c>=0;c--){const{client:f,clock:d}=a[c].id,h=i.clients.get(f),m=ms(h,d);m+1<h.length&&S2(h,m+1)>1||m>0&&S2(h,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Ase(EM,PV,"[yjs] ",$V,zV,"Changed the client-id because another client seems to be using it."),r.clientID=YV()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const c=new nv;YR(c,n)&&r.emit("update",[c.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const c=new qd;YR(c,n)&&r.emit("updateV2",[c.toUint8Array(),n.origin,r,n])}const{subdocsAdded:s,subdocsLoaded:l,subdocsRemoved:u}=n;(s.size>0||u.size>0||l.size>0)&&(s.forEach(c=>{c.clientID=r.clientID,c.collectionid==null&&(c.collectionid=r.collectionid),r.subdocs.add(c)}),u.forEach(c=>r.subdocs.delete(c)),r.emit("subdocs",[{loaded:l,added:s,removed:u},r,n]),u.forEach(c=>c.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):oq(t,e+1)}}},ir=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,a=null;t._transaction===null&&(o=!0,t._transaction=new Wse(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{a=e(t._transaction)}finally{if(o){const s=t._transaction===i[0];t._transaction=null,s&&oq(i,0)}}return a};class Zse{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const KR=(t,e,n)=>{ff(t,n.deletions,r=>{r instanceof yr&&e.scope.some(i=>i===t.doc||b1(i,r))&&BM(r,!1)})},XR=(t,e,n)=>{let r=null;const i=t.doc,o=t.scope;ir(i,s=>{for(;e.length>0&&t.currStackItem===null;){const l=i.store,u=e.pop(),c=new Set,f=[];let d=!1;ff(s,u.insertions,h=>{if(h instanceof yr){if(h.redone!==null){let{item:m,diff:v}=sD(l,h.id);v>0&&(m=Wo(s,Qt(m.id.client,m.id.clock+v))),h=m}!h.deleted&&o.some(m=>m===s.doc||b1(m,h))&&f.push(h)}}),ff(s,u.deletions,h=>{h instanceof yr&&o.some(m=>m===s.doc||b1(m,h))&&!Um(u.insertions,h.id)&&c.add(h)}),c.forEach(h=>{d=Tq(s,h,c,u.insertions,t.ignoreRemoteMapChanges,t)!==null||d});for(let h=f.length-1;h>=0;h--){const m=f[h];t.deleteFilter(m)&&(m.delete(s),d=!0)}t.currStackItem=d?u:null}s.changed.forEach((l,u)=>{l.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),r=s},t);const a=t.currStackItem;if(a!=null){const s=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:s,origin:t},t]),t.currStackItem=null}return a};class aq extends uV{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:i=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:a=!1,doc:s=am(e)?e[0].doc:e instanceof Qu?e:e.doc}={}){super(),this.scope=[],this.doc=s,this.addToScope(e),this.deleteFilter=i,o.add(this),this.trackedOrigins=o,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=a,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b)||b===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const u=this.undoing,c=this.redoing,f=u?this.redoStack:this.undoStack;u?this.stopCapturing():c||this.clear(!1,!0);const d=new zm;l.afterState.forEach((b,x)=>{const C=l.beforeState.get(x)||0,w=b-C;w>0&&g1(d,x,C,w)});const h=hae();let m=!1;if(this.lastChange>0&&h-this.lastChange<this.captureTimeout&&f.length>0&&!u&&!c){const b=f[f.length-1];b.deletions=rD([b.deletions,l.deleteSet]),b.insertions=rD([b.insertions,d])}else f.push(new Zse(l.deleteSet,d)),m=!0;!u&&!c&&(this.lastChange=h),ff(l,l.deleteSet,b=>{b instanceof yr&&this.scope.some(x=>x===l.doc||b1(x,b))&&BM(b,!0)});const v=[{stackItem:f[f.length-1],origin:l.origin,type:u?"redo":"undo",changedParentTypes:l.changedParentTypes},this];m?this.emit("stack-item-added",v):this.emit("stack-item-updated",v)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=am(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Ti?r.doc!==this.doc:r!==this.doc)&&HV("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>KR(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>KR(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=XR(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=XR(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Qse(t){const e=mn(t.restDecoder);for(let n=0;n<e;n++){const r=mn(t.restDecoder),i=t.readClient();let o=mn(t.restDecoder);for(let a=0;a<r;a++){const s=t.readInfo();if(s===10){const l=mn(t.restDecoder);yield new is(Qt(i,o),l),o+=l}else if((pE&s)!==0){const l=(s&(_u|wo))===0,u=new yr(Qt(i,o),null,(s&wo)===wo?t.readLeftID():null,null,(s&_u)===_u?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(s&f1)===f1?t.readString():null,Aq(t,s));yield u,o+=u.length}else{const l=t.readLen();yield new rs(Qt(i,o),l),o+=l}}}}class DM{constructor(e,n){this.gen=Qse(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===is);return this.curr}}class MM{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Jse=t=>sx(t,KV,nv),ele=(t,e)=>{if(t.constructor===rs){const{client:n,clock:r}=t.id;return new rs(Qt(n,r+e),t.length-e)}else if(t.constructor===is){const{client:n,clock:r}=t.id;return new is(Qt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new yr(Qt(r,i+e),null,Qt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},sx=(t,e=dm,n=qd)=>{if(t.length===1)return t[0];const r=t.map(c=>new e(Fm(c)));let i=r.map(c=>new DM(c,!0)),o=null;const a=new n,s=new MM(a);for(;i=i.filter(d=>d.curr!==null),i.sort((d,h)=>{if(d.curr.id.client===h.curr.id.client){const m=d.curr.id.clock-h.curr.id.clock;return m===0?d.curr.constructor===h.curr.constructor?0:d.curr.constructor===is?1:-1:m}else return h.curr.id.client-d.curr.id.client}),i.length!==0;){const c=i[0],f=c.curr.id.client;if(o!==null){let d=c.curr,h=!1;for(;d!==null&&d.id.clock+d.length<=o.struct.id.clock+o.struct.length&&d.id.client>=o.struct.id.client;)d=c.next(),h=!0;if(d===null||d.id.client!==f||h&&d.id.clock>o.struct.id.clock+o.struct.length)continue;if(f!==o.struct.id.client)Vc(s,o.struct,o.offset),o={struct:d,offset:0},c.next();else if(o.struct.id.clock+o.struct.length<d.id.clock)if(o.struct.constructor===is)o.struct.length=d.id.clock+d.length-o.struct.id.clock;else{Vc(s,o.struct,o.offset);const m=d.id.clock-o.struct.id.clock-o.struct.length;o={struct:new is(Qt(f,o.struct.id.clock+o.struct.length),m),offset:0}}else{const m=o.struct.id.clock+o.struct.length-d.id.clock;m>0&&(o.struct.constructor===is?o.struct.length-=m:d=ele(d,m)),o.struct.mergeWith(d)||(Vc(s,o.struct,o.offset),o={struct:d,offset:0},c.next())}}else o={struct:c.curr,offset:0},c.next();for(let d=c.curr;d!==null&&d.id.client===f&&d.id.clock===o.struct.id.clock+o.struct.length&&d.constructor!==is;d=c.next())Vc(s,o.struct,o.offset),o={struct:d,offset:0}}o!==null&&(Vc(s,o.struct,o.offset),o=null),kM(s);const l=r.map(c=>TM(c)),u=rD(l);return Hm(a,u),a.toUint8Array()},tle=(t,e,n=dm,r=qd)=>{const i=QV(e),o=new r,a=new MM(o),s=new n(Fm(t)),l=new DM(s,!1);for(;l.curr;){const c=l.curr,f=c.id.client,d=i.get(f)||0;if(l.curr.constructor===is){l.next();continue}if(c.id.clock+c.length>d)for(Vc(a,c,js(d-c.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)Vc(a,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=d;)l.next()}kM(a);const u=TM(s);return Hm(o,u),o.toUint8Array()},sq=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Rs(t.encoder.restEncoder)}),t.encoder.restEncoder=ev(),t.written=0)},Vc=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&sq(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Sn(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},kM=t=>{sq(t);const e=t.encoder.restEncoder;Sn(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Sn(e,r.written),mE(e,r.restEncoder)}},nle=(t,e,n,r)=>{const i=new n(Fm(t)),o=new DM(i,!1),a=new r,s=new MM(a);for(let u=o.curr;u!==null;u=o.next())Vc(s,e(u),0);kM(s);const l=TM(i);return Hm(a,l),a.toUint8Array()},rle=t=>nle(t,Cae,dm,nv),ZR="You must not compute changes after the event-handler fired.";class EE{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ile(this.currentTarget,this.target))}deletes(e){return Um(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Gs(ZR);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let a,s;if(this.adds(o)){let l=o.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(o))if(l!==null&&this.deletes(l))a="delete",s=PA(l.content.getContent());else return;else l!==null&&this.deletes(l)?(a="update",s=PA(l.content.getContent())):(a="add",s=void 0)}else if(this.deletes(o))a="delete",s=PA(o.content.getContent());else return;e.set(i,{action:a,oldValue:s})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Gs(ZR);const n=this.target,r=cf(),i=cf(),o=[];if(e={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let s=null;const l=()=>{s&&o.push(s)};for(let u=n._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((s===null||s.delete===void 0)&&(l(),s={delete:0}),s.delete+=u.length,i.add(u)):this.adds(u)?((s===null||s.insert===void 0)&&(l(),s={insert:[]}),s.insert=s.insert.concat(u.content.getContent()),r.add(u)):((s===null||s.retain===void 0)&&(l(),s={retain:0}),s.retain+=u.length);s!==null&&s.retain===void 0&&l()}this._changes=e}return e}}const ile=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},to=()=>{HV("Invalid access: Add Yjs type to a document before reading data.")},lq=80;let _M=0;class ole{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=_M++}}const ale=t=>{t.timestamp=_M++},uq=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=_M++},sle=(t,e,n)=>{if(t.length>=lq){const r=t.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return uq(r,e,n),r}else{const r=new ole(e,n);return t.push(r),r}},CE=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((o,a)=>x2(e-o.index)<x2(e-a.index)?o:a);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,ale(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&x2(n.index-i)<r.parent.length/lq?(uq(n,r,i),n):sle(t._searchMarker,r,i)},x1=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){t.splice(r,1);continue}i.p=o,o.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=js(e,i.index+n))}},SE=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Js(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;eq(r._eH,n,e)};class Ti{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=HR(),this._dEH=HR(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw ls()}clone(){throw ls()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){VR(this._eH,e)}observeDeep(e){VR(this._dEH,e)}unobserve(e){qR(this._eH,e)}unobserveDeep(e){qR(this._dEH,e)}toJSON(){}}const cq=(t,e,n)=>{t.doc??to(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const a=o.content.getContent();if(a.length<=e)e-=a.length;else{for(let s=e;s<a.length&&r>0;s++)i.push(a[s]),r--;e=0}}o=o.right}return i},fq=t=>{t.doc??to();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},dq=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&Ed(r,e)){const i=r.content.getContent();for(let o=0;o<i.length;o++)n.push(i[o])}r=r.right}return n},w1=(t,e)=>{let n=0,r=t._start;for(t.doc??to();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)e(i[o],n++,t)}r=r.right}},hq=(t,e)=>{const n=[];return w1(t,(r,i)=>{n.push(e(r,i,t))}),n},lle=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},pq=(t,e)=>{t.doc??to();const n=CE(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},lx=(t,e,n,r)=>{let i=n;const o=t.doc,a=o.clientID,s=o.store,l=n===null?e._start:n.right;let u=[];const c=()=>{u.length>0&&(i=new yr(Qt(a,Gr(s,a)),i,i&&i.lastId,l,l&&l.id,e,null,new Yd(u)),i.integrate(t,0),u=[])};r.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(c(),f.constructor){case Uint8Array:case ArrayBuffer:i=new yr(Qt(a,Gr(s,a)),i,i&&i.lastId,l,l&&l.id,e,null,new iv(new Uint8Array(f))),i.integrate(t,0);break;case Qu:i=new yr(Qt(a,Gr(s,a)),i,i&&i.lastId,l,l&&l.id,e,null,new ov(f)),i.integrate(t,0);break;default:if(f instanceof Ti)i=new yr(Qt(a,Gr(s,a)),i,i&&i.lastId,l,l&&l.id,e,null,new el(f)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},mq=()=>Gs("Length exceeded!"),gq=(t,e,n,r)=>{if(n>e._length)throw mq();if(n===0)return e._searchMarker&&x1(e._searchMarker,n,r.length),lx(t,e,null,r);const i=n,o=CE(e,n);let a=e._start;for(o!==null&&(a=o.p,n-=o.index,n===0&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Wo(t,Qt(a.id.client,a.id.clock+n));break}n-=a.length}return e._searchMarker&&x1(e._searchMarker,i,r.length),lx(t,e,a,r)},ule=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((o,a)=>a.index>o.index?a:o,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return lx(t,e,i,n)},vq=(t,e,n,r)=>{if(r===0)return;const i=n,o=r,a=CE(e,n);let s=e._start;for(a!==null&&(s=a.p,n-=a.index);s!==null&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&Wo(t,Qt(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&s!==null;)s.deleted||(r<s.length&&Wo(t,Qt(s.id.client,s.id.clock+r)),s.delete(t),r-=s.length),s=s.right;if(r>0)throw mq();e._searchMarker&&x1(e._searchMarker,i,-o+r)},ux=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},OM=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,a=o.clientID;let s;if(r==null)s=new Yd([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:s=new Yd([r]);break;case Uint8Array:s=new iv(r);break;case Qu:s=new ov(r);break;default:if(r instanceof Ti)s=new el(r);else throw new Error("Unexpected content type")}new yr(Qt(a,Gr(o.store,a)),i,i&&i.lastId,null,null,e,n,s).integrate(t,0)},IM=(t,e)=>{t.doc??to();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},bq=t=>{const e={};return t.doc??to(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},yq=(t,e)=>{t.doc??to();const n=t._map.get(e);return n!==void 0&&!n.deleted},cle=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&Ed(o,e)&&(n[i]=o.content.getContent()[o.length-1])}),n},dy=t=>(t.doc??to(),Nse(t._map.entries(),e=>!e[1].deleted));class fle extends EE{}class Yp extends Ti{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Yp;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Yp}clone(){const e=new Yp;return e.insert(0,this.toArray().map(n=>n instanceof Ti?n.clone():n)),e}get length(){return this.doc??to(),this._length}_callObserver(e,n){super._callObserver(e,n),SE(this,e,new fle(this,e))}insert(e,n){this.doc!==null?ir(this.doc,r=>{gq(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?ir(this.doc,n=>{ule(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?ir(this.doc,r=>{vq(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return pq(this,e)}toArray(){return fq(this)}slice(e=0,n=this.length){return cq(this,e,n)}toJSON(){return this.map(e=>e instanceof Ti?e.toJSON():e)}map(e){return hq(this,e)}forEach(e){w1(this,e)}[Symbol.iterator](){return lle(this)}_write(e){e.writeTypeRef(Lle)}}const dle=t=>new Yp;class hle extends EE{constructor(e,n,r){super(e,n),this.keysChanged=r}}class jd extends Ti{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new jd}clone(){const e=new jd;return this.forEach((n,r)=>{e.set(r,n instanceof Ti?n.clone():n)}),e}_callObserver(e,n){SE(this,e,new hle(this,e,n))}toJSON(){this.doc??to();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Ti?i.toJSON():i}}),e}get size(){return[...dy(this)].length}keys(){return jA(dy(this),e=>e[0])}values(){return jA(dy(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return jA(dy(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??to(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ir(this.doc,n=>{ux(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return IM(this,e)}has(e){return yq(this,e)}clear(){this.doc!==null?ir(this.doc,e=>{this.forEach(function(n,r,i){ux(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Fle)}}const ple=t=>new jd,Yc=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&wae(t,e);class aD{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){this.right===null&&Ao(),this.right.content.constructor===ai?this.right.deleted||Vm(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const QR=(t,e,n)=>{for(;e.right!==null&&n>0;)e.right.content.constructor===ai?e.right.deleted||Vm(e.currentAttributes,e.right.content):e.right.deleted||(n<e.right.length&&Wo(t,Qt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length),e.left=e.right,e.right=e.right.right;return e},hy=(t,e,n,r)=>{const i=new Map,o=r?CE(e,n):null;if(o){const a=new aD(o.p.left,o.p,o.index,i);return QR(t,a,n-o.index)}else{const a=new aD(null,e._start,0,i);return QR(t,a,n)}},xq=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ai&&Yc(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach((a,s)=>{const l=n.left,u=n.right,c=new yr(Qt(o,Gr(i.store,o)),l,l&&l.lastId,u,u&&u.id,e,null,new ai(s,a));c.integrate(t,0),n.right=c,n.forward()})},Vm=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},wq=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===ai&&Yc(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},Eq=(t,e,n,r)=>{const i=t.doc,o=i.clientID,a=new Map;for(const s in r){const l=r[s],u=n.currentAttributes.get(s)??null;if(!Yc(u,l)){a.set(s,u);const{left:c,right:f}=n;n.right=new yr(Qt(o,Gr(i.store,o)),c,c&&c.lastId,f,f&&f.id,e,null,new ai(s,l)),n.right.integrate(t,0),n.forward()}}return a},WA=(t,e,n,r,i)=>{n.currentAttributes.forEach((d,h)=>{i[h]===void 0&&(i[h]=null)});const o=t.doc,a=o.clientID;wq(n,i);const s=Eq(t,e,n,i),l=r.constructor===String?new Ys(r):r instanceof Ti?new el(r):new fh(r);let{left:u,right:c,index:f}=n;e._searchMarker&&x1(e._searchMarker,n.index,l.getLength()),c=new yr(Qt(a,Gr(o.store,a)),u,u&&u.lastId,c,c&&c.id,e,null,l),c.integrate(t,0),n.right=c,n.index=f,n.forward(),xq(t,e,n,s)},JR=(t,e,n,r,i)=>{const o=t.doc,a=o.clientID;wq(n,i);const s=Eq(t,e,n,i);e:for(;n.right!==null&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===ai));){if(!n.right.deleted)switch(n.right.content.constructor){case ai:{const{key:l,value:u}=n.right.content,c=i[l];if(c!==void 0){if(Yc(c,u))s.delete(l);else{if(r===0)break e;s.set(l,u)}n.right.delete(t)}else n.currentAttributes.set(l,u);break}default:r<n.right.length&&Wo(t,Qt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new yr(Qt(a,Gr(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ys(l)),n.right.integrate(t,0),n.forward()}xq(t,e,n,s)},Cq=(t,e,n,r,i)=>{let o=e;const a=xo();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ai){const u=o.content;a.set(u.key,u)}o=o.right}let s=0,l=!1;for(;e!==o;){if(n===e&&(l=!0),!e.deleted){const u=e.content;if(u.constructor===ai){const{key:c,value:f}=u,d=r.get(c)??null;(a.get(c)!==u||d===f)&&(e.delete(t),s++,!l&&(i.get(c)??null)===f&&d!==f&&(d===null?i.delete(c):i.set(c,d))),!l&&!e.deleted&&Vm(i,u)}}e=e.right}return s},mle=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===ai){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},gle=t=>{let e=0;return ir(t.doc,n=>{let r=t._start,i=t._start,o=xo();const a=Z3(o);for(;i;)i.deleted===!1&&(i.content.constructor===ai?Vm(a,i.content):(e+=Cq(n,r,i,o,a),o=Z3(a),r=i)),i=i.right}),e},vle=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&iq(t,n.store.clients.get(r),o,i,a=>{!a.deleted&&a.content.constructor===ai&&a.constructor!==rs&&e.add(a.parent)})}ir(n,r=>{ff(t,t.deleteSet,i=>{if(i instanceof rs||!i.parent._hasFormatting||e.has(i.parent))return;const o=i.parent;i.content.constructor===ai?e.add(o):mle(r,i)});for(const i of e)gle(i)})},e9=(t,e,n)=>{const r=n,i=Z3(e.currentAttributes),o=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case el:case fh:case Ys:n<e.right.length&&Wo(t,Qt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&Cq(t,o,e.right,i,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&x1(a._searchMarker,e.index,-r+n),e};class ble extends EE{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];ir(e,r=>{const i=new Map,o=new Map;let a=this.target._start,s=null;const l={};let u="",c=0,f=0;const d=()=>{if(s!==null){let h=null;switch(s){case"delete":f>0&&(h={delete:f}),f=0;break;case"insert":(typeof u=="object"||u.length>0)&&(h={insert:u},i.size>0&&(h.attributes={},i.forEach((m,v)=>{m!==null&&(h.attributes[v]=m)}))),u="";break;case"retain":c>0&&(h={retain:c},xae(l)||(h.attributes=bae({},l))),c=0;break}h&&n.push(h),s=null}};for(;a!==null;){switch(a.content.constructor){case el:case fh:this.adds(a)?this.deletes(a)||(d(),s="insert",u=a.content.getContent()[0],d()):this.deletes(a)?(s!=="delete"&&(d(),s="delete"),f+=1):a.deleted||(s!=="retain"&&(d(),s="retain"),c+=1);break;case Ys:this.adds(a)?this.deletes(a)||(s!=="insert"&&(d(),s="insert"),u+=a.content.str):this.deletes(a)?(s!=="delete"&&(d(),s="delete"),f+=a.length):a.deleted||(s!=="retain"&&(d(),s="retain"),c+=a.length);break;case ai:{const{key:h,value:m}=a.content;if(this.adds(a)){if(!this.deletes(a)){const v=i.get(h)??null;Yc(v,m)?m!==null&&a.delete(r):(s==="retain"&&d(),Yc(m,o.get(h)??null)?delete l[h]:l[h]=m)}}else if(this.deletes(a)){o.set(h,m);const v=i.get(h)??null;Yc(v,m)||(s==="retain"&&d(),l[h]=v)}else if(!a.deleted){o.set(h,m);const v=l[h];v!==void 0&&(Yc(v,m)?v!==null&&a.delete(r):(s==="retain"&&d(),m===null?delete l[h]:l[h]=m))}a.deleted||(s==="insert"&&d(),Vm(i,a.content));break}}a=a.right}for(d();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class df extends Ti{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??to(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new df}clone(){const e=new df;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new ble(this,e,n);SE(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??to();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Ys&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?ir(this.doc,r=>{const i=new aD(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const a=e[o];if(a.insert!==void 0){const s=!n&&typeof a.insert=="string"&&o===e.length-1&&i.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof s!="string"||s.length>0)&&WA(r,this,i,s,a.attributes||{})}else a.retain!==void 0?JR(r,this,i,a.retain,a.attributes||{}):a.delete!==void 0&&e9(r,i,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??to();const i=[],o=new Map,a=this.doc;let s="",l=this._start;function u(){if(s.length>0){const f={};let d=!1;o.forEach((m,v)=>{d=!0,f[v]=m});const h={insert:s};d&&(h.attributes=f),i.push(h),s=""}}const c=()=>{for(;l!==null;){if(Ed(l,e)||n!==void 0&&Ed(l,n))switch(l.content.constructor){case Ys:{const f=o.get("ychange");e!==void 0&&!Ed(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),o.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Ed(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),o.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(u(),o.delete("ychange")),s+=l.content.str;break}case el:case fh:{u();const f={insert:l.content.getContent()[0]};if(o.size>0){const d={};f.attributes=d,o.forEach((h,m)=>{d[m]=h})}i.push(f);break}case ai:Ed(l,e)&&(u(),Vm(o,l.content));break}l=l.right}u()};return e||n?ir(a,f=>{e&&iD(f,e),n&&iD(f,n),c()},"cleanup"):c(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?ir(i,o=>{const a=hy(o,this,e,!r);r||(r={},a.currentAttributes.forEach((s,l)=>{r[l]=s})),WA(o,this,a,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?ir(i,o=>{const a=hy(o,this,e,!r);WA(o,this,a,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?ir(r,i=>{e9(i,hy(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?ir(i,o=>{const a=hy(o,this,e,!1);a.right!==null&&JR(o,this,a,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?ir(this.doc,n=>{ux(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return IM(this,e)}getAttributes(){return bq(this)}_write(e){e.writeTypeRef(Ple)}}const yle=t=>new df;class KA{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??to()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===zi||n.constructor===Gd)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Gd extends Ti{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gd}clone(){const e=new Gd;return e.insert(0,this.toArray().map(n=>n instanceof Ti?n.clone():n)),e}get length(){return this.doc??to(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new KA(this,e)}querySelector(e){e=e.toUpperCase();const r=new KA(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Uu(new KA(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){SE(this,e,new Ele(this,n,e))}toString(){return hq(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),w1(this,o=>{i.insertBefore(o.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?ir(this.doc,r=>{gq(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)ir(this.doc,r=>{const i=e&&e instanceof Ti?e._item:e;lx(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(o=>o===e)+1;if(i===0&&e!==null)throw Gs("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?ir(this.doc,r=>{vq(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return fq(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return pq(this,e)}slice(e=0,n=this.length){return cq(this,e,n)}forEach(e){w1(this,e)}_write(e){e.writeTypeRef(zle)}}const xle=t=>new Gd;class zi extends Gd{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new zi(this.nodeName)}clone(){const e=new zi(this.nodeName),n=this.getAttributes();return yae(n,(r,i)=>{e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Ti?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const s in e)r.push(s);r.sort();const i=r.length;for(let s=0;s<i;s++){const l=r[s];n.push(l+'="'+e[l]+'"')}const o=this.nodeName.toLocaleLowerCase(),a=n.length>0?" "+n.join(" "):"";return`<${o}${a}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?ir(this.doc,n=>{ux(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return IM(this,e)}hasAttribute(e){return yq(this,e)}getAttributes(e){return e?cle(this,e):bq(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),o=this.getAttributes();for(const a in o){const s=o[a];typeof s=="string"&&i.setAttribute(a,s)}return w1(this,a=>{i.appendChild(a.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef($le),e.writeKey(this.nodeName)}}const wle=t=>new zi(t.readKey());class Ele extends EE{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class cx extends jd{constructor(e){super(),this.hookName=e}_copy(){return new cx(this.hookName)}clone(){const e=new cx(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(Ule),e.writeKey(this.hookName)}}const Cle=t=>new cx(t.readKey());class Ca extends df{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Ca}clone(){const e=new Ca;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const o=[];for(const a in e.attributes[i])o.push({key:a,value:e.attributes[i][a]});o.sort((a,s)=>a.key<s.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let a=0;a<o.attrs.length;a++){const s=o.attrs[a];r+=` ${s.key}="${s.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Hle)}}const Sle=t=>new Ca;class RM{constructor(e,n){this.id=e,this.length=n}get deleted(){throw ls()}mergeWith(e){return!1}write(e,n,r){throw ls()}integrate(e,n){throw ls()}}const Tle=0;class rs extends RM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),rq(e.doc.store,this)}write(e,n){e.writeInfo(Tle),e.writeLen(this.length-n)}getMissing(e,n){return null}}class iv{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new iv(this.content)}splice(e){throw ls()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const Ale=t=>new iv(t.readBuf());class E1{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new E1(this.len)}splice(e){const n=new E1(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){g1(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Nle=t=>new E1(t.readLen()),Sq=(t,e)=>new Qu({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class ov{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ov(Sq(this.doc.guid,this.opts))}splice(e){throw ls()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Dle=t=>new ov(Sq(t.readString(),t.readAny()));class fh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new fh(this.embed)}splice(e){throw ls()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const Mle=t=>new fh(t.readJSON());class ai{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ai(this.key,this.value)}splice(e){throw ls()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const kle=t=>new ai(t.readKey(),t.readJSON());class fx{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new fx(this.arr)}splice(e){const n=new fx(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const _le=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new fx(n)},Ole=nx("node_env")==="development";class Yd{constructor(e){this.arr=e,Ole&&bV(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Yd(this.arr)}splice(e){const n=new Yd(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeAny(o)}}getRef(){return 8}}const Ile=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Yd(n)};class Ys{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ys(this.str)}splice(e){const n=new Ys(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Rle=t=>new Ys(t.readString()),Ble=[dle,ple,yle,wle,xle,Cle,Sle],Lle=0,Fle=1,Ple=2,$le=3,zle=4,Ule=5,Hle=6;class el{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new el(this.type._copy())}splice(e){throw ls()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const Vle=t=>new el(Ble[t.readTypeRef()](t)),sD=(t,e)=>{let n=e,r=0,i;do r>0&&(n=Qt(n.client,n.clock+r)),i=Gp(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof yr);return{item:i,diff:r}},BM=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},dx=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new yr(Qt(r,i+n),e,Qt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=Qt(e.redone.client,e.redone.clock+n)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=n,o},t9=(t,e)=>uM(t,n=>Um(n.deletions,e)),Tq=(t,e,n,r,i,o)=>{const a=t.doc,s=a.store,l=a.clientID,u=e.redone;if(u!==null)return Wo(t,u);let c=e.parent._item,f=null,d;if(c!==null&&c.deleted===!0){if(c.redone===null&&(!n.has(c)||Tq(t,c,n,r,i,o)===null))return null;for(;c.redone!==null;)c=Wo(t,c.redone)}const h=c===null?e.parent:c.content.type;if(e.parentSub===null){for(f=e.left,d=e;f!==null;){let x=f;for(;x!==null&&x.parent._item!==c;)x=x.redone===null?null:Wo(t,x.redone);if(x!==null&&x.parent._item===c){f=x;break}f=f.left}for(;d!==null;){let x=d;for(;x!==null&&x.parent._item!==c;)x=x.redone===null?null:Wo(t,x.redone);if(x!==null&&x.parent._item===c){d=x;break}d=d.right}}else if(d=null,e.right&&!i){for(f=e;f!==null&&f.right!==null&&(f.right.redone||Um(r,f.right.id)||t9(o.undoStack,f.right.id)||t9(o.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Wo(t,f.redone);if(f&&f.right!==null)return null}else f=h._map.get(e.parentSub)||null;const m=Gr(s,l),v=Qt(l,m),b=new yr(v,f,f&&f.lastId,d,d&&d.id,h,e.parentSub,e.content.copy());return e.redone=v,BM(b,!0),b.integrate(t,0),b};let yr=class lD extends RM{constructor(e,n,r,i,o,a,s,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=a,this.parentSub=s,this.redone=null,this.content=l,this.info=this.content.isCountable()?kR:0}set marker(e){(this.info&zA)>0!==e&&(this.info^=zA)}get marker(){return(this.info&zA)>0}get keep(){return(this.info&MR)>0}set keep(e){this.keep!==e&&(this.info^=MR)}get countable(){return(this.info&kR)>0}get deleted(){return(this.info&$A)>0}set deleted(e){this.deleted!==e&&(this.info^=$A)}markDeleted(){this.info|=$A}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Gr(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Gr(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===jp&&this.id.client!==this.parent.client&&this.parent.clock>=Gr(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=GR(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Wo(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===rs||this.right&&this.right.constructor===rs)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===lD?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===lD&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===jp){const r=Gp(n,this.parent);r.constructor===rs?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=GR(e,e.doc.store,Qt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,a=new Set;for(;i!==null&&i!==this.right;){if(a.add(i),o.add(i),Lp(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Lp(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&a.has(Gp(e.doc.store,i.origin)))o.has(Gp(e.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),rq(e.doc.store,this),this.content.integrate(e,this),WR(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new rs(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Qt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Lp(e.origin,this.lastId)&&this.right===e&&Lp(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),g1(e.deleteSet,this.id.client,this.id.clock,this.length),WR(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Ao();this.content.gc(e),n?Yse(e,this,new rs(this.id,this.length)):this.content=new E1(this.length)}write(e,n){const r=n>0?Qt(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,a=this.content.getRef()&pE|(r===null?0:wo)|(i===null?0:_u)|(o===null?0:f1);if(e.writeInfo(a),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const s=this.parent;if(s._item!==void 0){const l=s._item;if(l===null){const u=v1(s);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else s.constructor===String?(e.writeParentInfo(!0),e.writeString(s)):s.constructor===jp?(e.writeParentInfo(!1),e.writeLeftID(s)):Ao();o!==null&&e.writeString(o)}this.content.write(e,n)}};const Aq=(t,e)=>qle[e&pE](t),qle=[()=>{Ao()},Nle,_le,Ale,Rle,Mle,kle,Vle,Ile,Dle,()=>{Ao()}],jle=10;class is extends RM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Ao()}write(e,n){e.writeInfo(jle),Sn(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const Nq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Dq="__ $YJS$ __";Nq[Dq]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Nq[Dq]=!0;const dh=t=>um((e,n)=>{t.onerror=r=>n(new Error(r.target.error)),t.onsuccess=r=>e(r.target.result)}),Gle=(t,e)=>um((n,r)=>{const i=indexedDB.open(t);i.onupgradeneeded=o=>e(o.target.result),i.onerror=o=>r(Gs(o.target.error)),i.onsuccess=o=>{const a=o.target.result;a.onversionchange=()=>{a.close()},n(a)}}),Yle=t=>dh(indexedDB.deleteDatabase(t)),Wle=(t,e)=>e.forEach(n=>t.createObjectStore.apply(t,n)),Og=(t,e,n="readwrite")=>{const r=t.transaction(e,n);return e.map(i=>nue(r,i))},Mq=(t,e)=>dh(t.count(e)),Kle=(t,e)=>dh(t.get(e)),kq=(t,e)=>dh(t.delete(e)),Xle=(t,e,n)=>dh(t.put(e,n)),uD=(t,e)=>dh(t.add(e)),Zle=(t,e,n)=>dh(t.getAll(e,n)),Qle=(t,e,n)=>{let r=null;return tue(t,e,i=>(r=i,!1),n).then(()=>r)},Jle=(t,e=null)=>Qle(t,e,"prev"),eue=(t,e)=>um((n,r)=>{t.onerror=r,t.onsuccess=async i=>{const o=i.target.result;if(o===null||await e(o)===!1)return n();o.continue()}}),tue=(t,e,n,r="next")=>eue(t.openKeyCursor(e,r),i=>n(i.key)),nue=(t,e)=>t.objectStore(e),rue=(t,e)=>IDBKeyRange.upperBound(t,e),iue=(t,e)=>IDBKeyRange.lowerBound(t,e),XA="custom",_q="updates",Oq=500,Iq=(t,e=()=>{},n=()=>{})=>{const[r]=Og(t.db,[_q]);return Zle(r,iue(t._dbref,!1)).then(i=>{t._destroyed||(e(r),ir(t.doc,()=>{i.forEach(o=>ax(t.doc,o))},t,!1),n(r))}).then(()=>Jle(r).then(i=>{t._dbref=i+1})).then(()=>Mq(r).then(i=>{t._dbsize=i})).then(()=>r)},oue=(t,e=!0)=>Iq(t).then(n=>{(e||t._dbsize>=Oq)&&uD(n,hm(t.doc)).then(()=>kq(n,rue(t._dbref,!0))).then(()=>Mq(n).then(r=>{t._dbsize=r}))});class aue extends koe{constructor(e,n){super(),this.doc=n,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=Gle(e,r=>Wle(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=um(r=>this.on("synced",()=>r(this))),this._db.then(r=>{this.db=r,Iq(this,a=>uD(a,hm(n)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,i)=>{if(this.db&&i!==this){const[o]=Og(this.db,[_q]);uD(o,r),++this._dbsize>=Oq&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{oue(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{Yle(this.name)})}get(e){return this._db.then(n=>{const[r]=Og(n,[XA],"readonly");return Kle(r,e)})}set(e,n){return this._db.then(r=>{const[i]=Og(r,[XA]);return Xle(i,n,e)})}del(e){return this._db.then(n=>{const[r]=Og(n,[XA]);return kq(r,e)})}}const sue=()=>{const t=_r.c(7),[e]=q.useState(lue),[n,r]=q.useState(null),[i,o]=q.useState(!1);let a,s;t[0]!==e?(a=()=>{const u=new aue("diegesis-notes",e);return u.on("synced",()=>{o(!0)}),r(u),()=>{u.destroy()}},s=[e],t[0]=e,t[1]=a,t[2]=s):(a=t[1],s=t[2]),q.useEffect(a,s);let l;return t[3]!==e||t[4]!==n||t[5]!==i?(l={doc:e,provider:n,synced:i},t[3]=e,t[4]=n,t[5]=i,t[6]=l):l=t[6],l};function lue(){return new Qu}const Rq=q.createContext(null);function uue(t){const e=_r.c(8),{children:n}=t,{doc:r,provider:i,synced:o}=sue(),[a,s]=q.useState(null);let l;e[0]!==r||e[1]!==a||e[2]!==i||e[3]!==o?(l={editor:a,setEditor:s,doc:r,synced:o,provider:i},e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=l):l=e[4];let u;return e[5]!==n||e[6]!==l?(u=_.jsx(Rq.Provider,{value:l,children:n}),e[5]=n,e[6]=l,e[7]=u):u=e[7],u}function Df(){const t=q.useContext(Rq);if(!t)throw new Error("useNotes must be used within a NotesProvider");return t}const n9=[{color:"#ef4444",name:"Red"},{color:"#f97316",name:"Orange"},{color:"#eab308",name:"Yellow"},{color:"#22c55e",name:"Green"},{color:"#06b6d4",name:"Cyan"},{color:"#3b82f6",name:"Blue"},{color:"#8b5cf6",name:"Purple"},{color:"#ec4899",name:"Pink"},{color:"#64748b",name:"Gray"}],Bq=q.createContext(null);function cue(t){const e=_r.c(46),{children:n}=t,{doc:r,synced:i}=Df();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[a,s]=q.useState(o);let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[1]=l):l=e[1];const[u,c]=q.useState(l),[f,d]=q.useState(null);let h;e[2]!==r?(h=r.getMap("file_system"),e[2]=r,e[3]=h):h=e[3];const m=h;let v;e[4]!==r?(v=r.getMap("tag_definitions"),e[4]=r,e[5]=v):v=e[5];const b=v;let x,C;e[6]!==r||e[7]!==m||e[8]!==i||e[9]!==b?(x=()=>{if(!i)return;const H=()=>{const K=[],I=[];m.forEach(ee=>{if(ee.type==="file"){const Q={...ee,type:"text"};K.push(Q),I.push(Q)}else K.push(ee)}),I.length>0&&r.transact(()=>{I.forEach(ee=>{m.set(ee.id,ee)})}),K.sort(fue),s(K)};m.observe(H);const W=()=>{b.size===0&&n9.forEach(ee=>b.set(ee.color,ee.name));const K=new Map;b.forEach((ee,Q)=>{K.set(Q,ee)});const I=[];n9.forEach(ee=>{K.has(ee.color)&&(I.push({color:ee.color,name:K.get(ee.color)??""}),K.delete(ee.color))}),K.forEach((ee,Q)=>{I.push({color:Q,name:ee})}),c(I)};if(b.observe(W),H(),W(),m.size===0){const K=vo(),I={id:K,name:"Welcome / Migrated Note",type:"text",parentId:null,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};m.set(K,I),d(K)}return()=>{m.unobserve(H),b.unobserve(W)}},C=[m,b,i,r],e[6]=r,e[7]=m,e[8]=i,e[9]=b,e[10]=x,e[11]=C):(x=e[10],C=e[11]),q.useEffect(x,C);let w;e[12]!==m?(w=(H,W)=>{const K=W===void 0?null:W,I=vo(),ee={id:I,name:H,type:"text",parentId:K,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return m.set(I,ee),I},e[12]=m,e[13]=w):w=e[13];const A=w;let E;e[14]!==m?(E=(H,W)=>{const K=W===void 0?null:W,I=vo(),ee={id:I,name:H,type:"table",parentId:K,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return m.set(I,ee),I},e[14]=m,e[15]=E):E=e[15];const T=E;let N;e[16]!==m?(N=(H,W)=>{const K=W===void 0?null:W,I=vo(),ee={id:I,name:H,type:"folder",parentId:K,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return m.set(I,ee),I},e[16]=m,e[17]=N):N=e[17];const D=N;let M;e[18]!==f||e[19]!==m?(M=H=>{Array.from(m.values()).filter(K=>K.parentId===H).forEach(K=>M(K.id)),m.delete(H),f===H&&d(null)},e[18]=f,e[19]=m,e[20]=M):M=e[20];let k;e[21]!==m?(k=(H,W)=>{const K=m.get(H);K&&m.set(H,{...K,name:W,updatedAt:new Date().toISOString()})},e[21]=m,e[22]=k):k=e[22];const B=k;let P;e[23]!==m?(P=(H,W)=>{const K=m.get(H);if(K){if(H===W)return;let I=W;for(;I;){if(I===H)return;I=m.get(I)?.parentId||null}m.set(H,{...K,parentId:W,updatedAt:new Date().toISOString()})}},e[23]=m,e[24]=P):P=e[24];const $=P;let z;e[25]!==m?(z=(H,W)=>{const K=m.get(H);K&&m.set(H,{...K,tags:W,updatedAt:new Date().toISOString()})},e[25]=m,e[26]=z):z=e[26];const j=z;let L;e[27]!==b?(L=(H,W)=>{b.set(H,W)},e[27]=b,e[28]=L):L=e[28];const U=L;let G;e[29]!==f||e[30]!==A||e[31]!==D||e[32]!==T||e[33]!==M||e[34]!==r||e[35]!==m||e[36]!==a||e[37]!==$||e[38]!==B||e[39]!==j||e[40]!==u||e[41]!==U?(G={fileMap:m,createFile:A,createFolder:D,createTable:T,deleteItem:M,renameItem:B,moveItem:$,setFileTags:j,updateTagName:U,fileTree:a,tagDefs:u,activeFileId:f,setActiveFileId:d,doc:r},e[29]=f,e[30]=A,e[31]=D,e[32]=T,e[33]=M,e[34]=r,e[35]=m,e[36]=a,e[37]=$,e[38]=B,e[39]=j,e[40]=u,e[41]=U,e[42]=G):G=e[42];let Z;return e[43]!==n||e[44]!==G?(Z=_.jsx(Bq.Provider,{value:G,children:n}),e[43]=n,e[44]=G,e[45]=Z):Z=e[45],Z}function fue(t,e){return t.type===e.type?t.name.localeCompare(e.name):t.type==="folder"?-1:1}function hh(){const t=q.useContext(Bq);if(!t)throw new Error("useFileSystem must be used within a FileSystemProvider");return t}function due(t){const e=_r.c(17),{fileId:n}=t,{fileTree:r,setFileTags:i,tagDefs:o,updateTagName:a}=hh(),[s,l]=q.useState(!1),[u,c]=q.useState(!1),f=q.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={top:0,left:0},e[0]=d):d=e[0];const[h,m]=q.useState(d);let v,b;if(e[1]!==h||e[2]!==n||e[3]!==r||e[4]!==u||e[5]!==s||e[6]!==i||e[7]!==o||e[8]!==a){b=Symbol.for("react.early_return_sentinel");e:{let x;e[11]!==n?(x=D=>D.id===n,e[11]=n,e[12]=x):x=e[12];const C=r.find(x);if(!C){b=null;break e}const w=C.tags||[];let A;e[13]!==s?(A=()=>{if(!s&&f.current){const D=f.current.getBoundingClientRect(),M=Math.min(D.left,window.innerWidth-300);m({top:D.bottom+8,left:Math.max(8,M)})}l(!s),c(!1)},e[13]=s,e[14]=A):A=e[14];const E=A,T=D=>{w.includes(D)?i(n,w.filter(M=>M!==D)):i(n,[...w,D])};let N;e[15]!==E?(N=D=>{D.stopPropagation(),E()},e[15]=E,e[16]=N):N=e[16],v=_.jsxs("div",{className:"relative",children:[_.jsx("button",{ref:f,onClick:N,className:"p-1.5 hover:bg-slate-100 rounded-lg flex items-center gap-1.5 transition-colors group",title:"Manage Tags",children:_.jsxs("div",{className:"flex gap-0.5",children:[w.slice(0,3).map(pue),w.length>3&&_.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-200"}),w.length===0&&_.jsx("svg",{className:"w-4 h-4 text-slate-400 group-hover:text-slate-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]})}),s&&Vs.createPortal(_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-[60] bg-slate-900/10 backdrop-blur-[1px] transition-opacity",onClick:D=>{D.stopPropagation(),l(!1)}}),_.jsxs("div",{style:{top:window.innerWidth>=768?h.top:"auto",left:window.innerWidth>=768?h.left:0},className:"fixed bottom-0 left-0 right-0 md:bottom-auto md:right-auto z-[70] bg-white border border-slate-200 shadow-2xl rounded-t-2xl md:rounded-xl p-4 w-full md:w-72 flex flex-col gap-4 animate-in slide-in-from-bottom md:slide-in-from-top duration-200",onClick:hue,children:[_.jsx("div",{className:"w-12 h-1 bg-slate-200 rounded-full mx-auto md:hidden mb-1"}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-sm font-bold text-slate-700",children:u?"Customize Tags":"Assign Tags"}),_.jsx("button",{onClick:()=>c(!u),className:"text-xs font-semibold px-2 py-1 bg-sky-50 text-sky-600 hover:bg-sky-100 rounded-md transition-colors",children:u?"Done":"Manage"})]}),_.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:u?_.jsx("div",{className:"flex flex-col gap-3",children:o.map(D=>_.jsxs("div",{className:"flex items-center gap-3 p-2 bg-slate-50 rounded-lg border border-slate-100",children:[_.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 shadow-sm border border-black/5",style:{backgroundColor:D.color}}),_.jsx("input",{className:"flex-1 bg-transparent border-none focus:ring-0 text-sm font-medium text-slate-700 placeholder:text-slate-400",value:D.name,onChange:M=>a(D.color,M.target.value),placeholder:"Unnamed Tag"})]},D.color))}):_.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(D=>{const M=w.includes(D.color);return _.jsxs("button",{onClick:()=>T(D.color),className:`group flex items-center gap-2 p-2 rounded-xl border transition-all text-left ${M?"bg-white border-slate-300 shadow-sm ring-1 ring-slate-200":"bg-slate-50 border-transparent hover:bg-slate-100"}`,children:[_.jsx("div",{className:`w-5 h-5 rounded-full flex-shrink-0 flex items-center justify-center transition-transform ${M?"scale-110 shadow-sm":"scale-100"}`,style:{backgroundColor:D.color},children:M&&_.jsx("svg",{className:"w-3.5 h-3.5 text-white drop-shadow-sm",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),_.jsx("span",{className:`text-xs font-medium truncate ${M?"text-slate-900":"text-slate-500"}`,children:D.name||"Unnamed"})]},D.color)})})}),_.jsx("button",{onClick:()=>l(!1),className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-sm md:hidden mt-2 active:scale-95 transition-transform",children:"Close"})]})]}),document.body)]})}e[1]=h,e[2]=n,e[3]=r,e[4]=u,e[5]=s,e[6]=i,e[7]=o,e[8]=a,e[9]=v,e[10]=b}else v=e[9],b=e[10];return b!==Symbol.for("react.early_return_sentinel")?b:v}function hue(t){return t.stopPropagation()}function pue(t){return _.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t}},t)}function mue({className:t}){const{fileTree:e,createFolder:n,createFile:r,createTable:i,moveItem:o}=hh(),[a,s]=q.useState(!1),[l,u]=q.useState(null),[c,f]=q.useState("text"),d=(x,C="text")=>{u(x),f(C),s(!0)},h=(x,C)=>{C==="folder"?n(x,l):C==="table"?i(x,l):r(x,l)},m=e.filter(x=>x.parentId===null),v=(x,C)=>{x.preventDefault();try{const w=JSON.parse(x.dataTransfer.getData("application/json"));w&&w.id&&o(w.id,C)}catch(w){console.error("Failed to parse drag data",w)}},b=x=>{x.preventDefault()};return _.jsxs("div",{className:`p-2 ${t}`,children:[_.jsx(yoe,{isOpen:a,onClose:()=>s(!1),onCreate:h,initialType:c}),_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Explorer"}),_.jsx("div",{className:"flex gap-1",children:_.jsx("button",{onClick:()=>d(null,"text"),title:"New Item",className:"p-1 hover:bg-slate-200 rounded flex items-center justify-center",children:_.jsx("svg",{className:"w-4 h-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]}),_.jsxs("div",{className:"space-y-0.5 min-h-[100px]",onDragOver:b,onDrop:x=>v(x,null),children:[m.map(x=>_.jsx(Lq,{node:x,onCreateItem:d},x.id)),m.length===0&&_.jsx("div",{className:"text-xs text-slate-400 italic px-2",children:"No files (Drop here to move to root)"})]})]})}function Lq({node:t,onCreateItem:e}){const{fileTree:n,activeFileId:r,setActiveFileId:i,deleteItem:o,renameItem:a,moveItem:s}=hh(),[l,u]=q.useState(!1),[c,f]=q.useState(!1),[d,h]=q.useState(t.name),[m,v]=q.useState(null),[b,x]=q.useState(!1),C=n.filter($=>$.parentId===t.id),w=()=>{t.type==="folder"?u(!l):i(t.id)},A=()=>{f(!1),d.trim()&&d!==t.name?a(t.id,d):h(t.name)},E=$=>{$.key==="Enter"&&A()},T=$=>{$.preventDefault(),$.stopPropagation(),v({x:$.clientX,y:$.clientY})},N=()=>{x(!0),v(null)},D=()=>{o(t.id),x(!1)},M=()=>{const $=[{label:"Rename",action:()=>f(!0)},{label:"Delete",action:N,className:"text-rose-500 font-medium"}];return t.type==="folder"&&$.unshift({label:"New Item",action:()=>{u(!0),e(t.id,"text")}}),$},k=$=>{$.dataTransfer.setData("application/json",JSON.stringify({id:t.id})),$.stopPropagation()},B=$=>{$.preventDefault(),$.stopPropagation();try{const z=JSON.parse($.dataTransfer.getData("application/json"));z&&z.id&&t.type==="folder"&&(s(z.id,t.id),u(!0))}catch(z){console.error(z)}},P=$=>{t.type==="folder"&&$.preventDefault()};return _.jsxs(_.Fragment,{children:[_.jsx(goe,{isOpen:b,title:`Delete ${t.type==="folder"?"Folder":"File"}`,message:`Are you sure you want to delete "${t.name}"? This action cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:D,onCancel:()=>x(!1)}),m&&_.jsx(boe,{x:m.x,y:m.y,options:M(),onClose:()=>v(null)}),_.jsxs("div",{draggable:!c,onDragStart:k,onDragOver:P,onDrop:B,onContextMenu:T,children:[_.jsxs("div",{className:`group flex items-center gap-1 px-2 py-1.5 rounded cursor-pointer select-none transition-colors
        ${r===t.id?"bg-sky-100 text-sky-700":"hover:bg-slate-100 text-slate-700"}
        `,onClick:w,onDoubleClick:$=>{$.stopPropagation(),f(!0)},children:[_.jsx("span",{className:"text-slate-400 shrink-0",children:t.type==="folder"?_.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-90":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t.type==="table"?"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z":"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),c?_.jsx("input",{autoFocus:!0,className:"flex-1 min-w-0 bg-white border border-sky-300 rounded px-1 text-sm outline-none py-0.5",value:d,onChange:$=>h($.target.value),onBlur:A,onKeyDown:E,onClick:$=>$.stopPropagation()}):_.jsxs("span",{className:"flex-1 truncate text-sm flex items-center gap-2 py-0.5",children:[t.name,t.tags.length>0&&_.jsx("div",{className:"flex -space-x-1",children:t.tags.map($=>_.jsx("div",{className:"w-2 h-2 rounded-full ring-1 ring-white",style:{backgroundColor:$}},$))})]}),!c&&_.jsxs("div",{className:"flex items-center gap-1 md:invisible md:group-hover:visible",children:[_.jsx(due,{fileId:t.id}),_.jsx("button",{onClick:$=>{$.stopPropagation(),N()},className:"p-1 hover:bg-slate-200 rounded text-slate-400 hover:text-rose-500",title:"Delete",children:_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),_.jsx("button",{onClick:$=>{$.stopPropagation(),T($)},className:"p-1 hover:bg-slate-200 rounded md:hidden text-slate-400",children:_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]}),l&&t.type==="folder"&&_.jsxs("div",{className:"pl-4 border-l border-slate-100 ml-2.5",children:[C.map($=>_.jsx(Lq,{node:$,onCreateItem:e},$.id)),C.length===0&&_.jsx("div",{className:"text-xs text-slate-300 py-1 pl-2",children:"Empty"})]})]})]})}function r9(t){const e=_r.c(25),{className:n,user:r,isSignedIn:i,onSignIn:o,onSignOut:a,onClose:s}=t,l=n===void 0?"":n,{synced:u}=Df(),c=`bg-slate-50 border-r border-slate-200 flex flex-col h-full ${l}`;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=_.jsxs("h1",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[_.jsx("div",{className:"w-6 h-6 bg-sky-500 rounded flex items-center justify-center text-white text-xs",children:"D"}),"Diegesis"]}),e[0]=f):f=e[0];let d;e[1]!==s?(d=s&&_.jsx("button",{onClick:s,className:"md:hidden p-1 text-slate-400 hover:text-slate-600",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e[1]=s,e[2]=d):d=e[2];let h;e[3]!==d?(h=_.jsxs("div",{className:"p-4 border-b border-slate-200 bg-white/50 flex items-center justify-between",children:[f,d]}),e[3]=d,e[4]=h):h=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=_.jsx("div",{className:"flex-1 overflow-y-auto",children:_.jsx(mue,{})}),e[5]=m):m=e[5];const v=`w-2 h-2 rounded-full ${u?"bg-emerald-500":"bg-amber-500"}`;let b;e[6]!==v?(b=_.jsx("span",{className:v}),e[6]=v,e[7]=b):b=e[7];const x=u?"Ready":"Offline";let C;e[8]!==x?(C=_.jsx("span",{className:"text-xs text-slate-500 font-medium",children:x}),e[8]=x,e[9]=C):C=e[9];let w;e[10]!==C||e[11]!==b?(w=_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b,C]}),e[10]=C,e[11]=b,e[12]=w):w=e[12];let A;e[13]!==i||e[14]!==o||e[15]!==a||e[16]!==r?(A=i?_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r?.imageUrl?_.jsx("img",{src:r.imageUrl,alt:r?.name,className:"w-6 h-6 rounded-full"}):_.jsx("div",{className:"w-6 h-6 rounded-full bg-sky-100 text-sky-600 text-xs flex items-center justify-center font-bold",children:r?.name?.[0]}),_.jsx("span",{className:"text-xs font-bold truncate",children:r?.name})]}),_.jsx("button",{onClick:a,className:"text-xs text-rose-500 hover:text-rose-600 font-bold block",children:"Sign Out"})]}):_.jsx("button",{onClick:o,className:"w-full bg-sky-500 text-white text-xs font-bold py-1.5 rounded hover:bg-sky-600 transition-colors",children:"Sign In"}),e[13]=i,e[14]=o,e[15]=a,e[16]=r,e[17]=A):A=e[17];let E;e[18]!==w||e[19]!==A?(E=_.jsxs("div",{className:"p-4 border-t border-slate-200 bg-white/50 shrink-0",children:[w,A]}),e[18]=w,e[19]=A,e[20]=E):E=e[20];let T;return e[21]!==E||e[22]!==c||e[23]!==h?(T=_.jsxs("div",{className:c,children:[h,m,E]}),e[21]=E,e[22]=c,e[23]=h,e[24]=T):T=e[24],T}function Li(t){this.content=t}Li.prototype={constructor:Li,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Li(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Li(n)},addToStart:function(t,e){return new Li([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Li(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Li(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Li.from(t),t.size?new Li(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Li.from(t),t.size?new Li(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Li.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Li.from=function(t){if(t instanceof Li)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Li(e)};function Fq(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){let a=Fq(i.content,o.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function Pq(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let a=t.child(--i),s=e.child(--o),l=a.nodeSize;if(a==s){n-=l,r-=l;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let u=0,c=Math.min(a.text.length,s.text.length);for(;u<c&&a.text[a.text.length-u-1]==s.text[s.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let u=Pq(a.content,s.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class Ue{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let a=0,s=0;s<n;a++){let l=this.content[a],u=s+l.nodeSize;if(u>e&&r(l,i+s,o||null,a)!==!1&&l.content.size){let c=s+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}s=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",a=!0;return this.nodesBetween(e,n,(s,l)=>{let u=s.isText?s.text.slice(Math.max(e,l)-l,n-l):s.isLeaf?i?typeof i=="function"?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&u||s.isTextblock)&&r&&(a?a=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Ue(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,a=0;a<n;o++){let s=this.content[o],l=a+s.nodeSize;l>e&&((a<e||l>n)&&(s.isText?s=s.cut(Math.max(0,e-a),Math.min(s.text.length,n-a)):s=s.cut(Math.max(0,e-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=l}return new Ue(r,i)}cutByIndex(e,n){return e==n?Ue.empty:e==0&&n==this.content.length?this:new Ue(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ue(i,o)}addToStart(e){return new Ue([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ue(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Fq(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Pq(this,e,n,r)}findIndex(e){if(e==0)return py(0,e);if(e==this.size)return py(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?py(n+1,o):py(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ue.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ue(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ue.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Ue(n||e,r)}static from(e){if(!e)return Ue.empty;if(e instanceof Ue)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ue([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ue.empty=new Ue([],0);const ZA={index:0,offset:0};function py(t,e){return ZA.index=t,ZA.offset=e,ZA}function hx(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!hx(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!hx(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let lr=class cD{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&hx(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return cD.none;if(e instanceof cD)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};lr.none=[];class px extends Error{}class ot{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=zq(this.content,e+this.openStart,n);return r&&new ot(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ot($q(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ot.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ot(Ue.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new ot(e,r,i)}}ot.empty=new ot(Ue.empty,0,0);function $q(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:a,offset:s}=t.findIndex(n);if(i==e||o.isText){if(s!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy($q(o.content,e-i-1,n-i-1)))}function zq(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),a=t.maybeChild(i);if(o==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let s=zq(a.content,e-o-1,n,a);return s&&t.replaceChild(i,a.copy(s))}function gue(t,e,n){if(n.openStart>t.depth)throw new px("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new px("Inconsistent open depths");return Uq(t,e,n,0)}function Uq(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let a=Uq(t,e,n,r+1);return o.copy(o.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,s=a.content;return Bd(a,s.cut(0,t.parentOffset).append(n.content).append(s.cut(e.parentOffset)))}else{let{start:a,end:s}=vue(n,t);return Bd(o,Vq(t,a,s,e,r))}else return Bd(o,mx(t,e,r))}function Hq(t,e){if(!e.type.compatibleContent(t.type))throw new px("Cannot join "+e.type.name+" onto "+t.type.name)}function fD(t,e,n){let r=t.node(n);return Hq(r,e.node(n)),r}function Rd(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Vg(t,e,n,r){let i=(e||t).node(n),o=0,a=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Rd(t.nodeAfter,r),o++));for(let s=o;s<a;s++)Rd(i.child(s),r);e&&e.depth==n&&e.textOffset&&Rd(e.nodeBefore,r)}function Bd(t,e){return t.type.checkContent(e),t.copy(e)}function Vq(t,e,n,r,i){let o=t.depth>i&&fD(t,e,i+1),a=r.depth>i&&fD(n,r,i+1),s=[];return Vg(null,t,i,s),o&&a&&e.index(i)==n.index(i)?(Hq(o,a),Rd(Bd(o,Vq(t,e,n,r,i+1)),s)):(o&&Rd(Bd(o,mx(t,e,i+1)),s),Vg(e,n,i,s),a&&Rd(Bd(a,mx(n,r,i+1)),s)),Vg(r,null,i,s),new Ue(s)}function mx(t,e,n){let r=[];if(Vg(null,t,n,r),t.depth>n){let i=fD(t,e,n+1);Rd(Bd(i,mx(t,e,n+1)),r)}return Vg(e,null,n,r),new Ue(r)}function vue(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(Ue.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class C1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return lr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let s=r;r=i,i=s}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new gx(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let a=e;;){let{index:s,offset:l}=a.content.findIndex(o),u=o-l;if(r.push(a,s,i+l),!u||(a=a.child(s),a.isText))break;o=u-1,i+=l+1}return new C1(n,r,o)}static resolveCached(e,n){let r=i9.get(e);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==n)return a}else i9.set(e,r=new bue);let i=r.elts[r.i]=C1.resolve(e,n);return r.i=(r.i+1)%yue,i}}class bue{constructor(){this.elts=[],this.i=0}}const yue=12,i9=new WeakMap;class gx{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const xue=Object.create(null);let Ou=class dD{constructor(e,n,r,i=lr.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ue.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&hx(this.attrs,n||e.defaultAttrs||xue)&&lr.sameSet(this.marks,r||lr.none)}copy(e=null){return e==this.content?this:new dD(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new dD(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ot.empty;let i=this.resolve(e),o=this.resolve(n),a=r?0:i.sharedDepth(n),s=i.start(a),u=i.node(a).content.cut(i.pos-s,o.pos-s);return new ot(u,i.depth-a,o.depth-a)}replace(e,n,r){return gue(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return C1.resolveCached(this,e)}resolveNoCache(e){return C1.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),qq(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ue.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),s=a&&a.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=lr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!lr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ue.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Ou.prototype.text=void 0;class vx extends Ou{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):qq(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vx(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vx(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function qq(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Wd{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new wue(e,n);if(r.next==null)return Wd.empty;let i=jq(r);r.next&&r.err("Unexpected trailing text");let o=Due(Nue(i));return Mue(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(a,s){let l=a.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ue.from(s.map(u=>u.createAndFill()));for(let u=0;u<a.next.length;u++){let{type:c,next:f}=a.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,s.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let s=i;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:l}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in n)&&(!i.type||l.validEnd)&&(r.push({match:s.contentMatch,type:s,via:i}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}Wd.empty=new Wd(!0);class wue{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function jq(t){let e=[];do e.push(Eue(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Eue(t){let e=[];do e.push(Cue(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Cue(t){let e=Aue(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Sue(t,e);else break;return e}function o9(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Sue(t,e){let n=o9(t),r=n;return t.eat(",")&&(t.next!="}"?r=o9(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Tue(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let a=n[o];a.isInGroup(e)&&i.push(a)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Aue(t){if(t.eat("(")){let e=jq(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Tue(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Nue(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(a,s,l){let u={term:l,to:s};return e[a].push(u),u}function i(a,s){a.forEach(l=>l.to=s)}function o(a,s){if(a.type=="choice")return a.exprs.reduce((l,u)=>l.concat(o(u,s)),[]);if(a.type=="seq")for(let l=0;;l++){let u=o(a.exprs[l],s);if(l==a.exprs.length-1)return u;i(u,s=n())}else if(a.type=="star"){let l=n();return r(s,l),i(o(a.expr,l),l),[r(l)]}else if(a.type=="plus"){let l=n();return i(o(a.expr,s),l),i(o(a.expr,l),l),[r(l)]}else{if(a.type=="opt")return[r(s)].concat(o(a.expr,s));if(a.type=="range"){let l=s;for(let u=0;u<a.min;u++){let c=n();i(o(a.expr,l),c),l=c}if(a.max==-1)i(o(a.expr,l),l);else for(let u=a.min;u<a.max;u++){let c=n();r(l,c),i(o(a.expr,l),c),l=c}return[r(l)]}else{if(a.type=="name")return[r(s,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Gq(t,e){return e-t}function a9(t,e){let n=[];return r(e),n.sort(Gq);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let a=0;a<o.length;a++){let{term:s,to:l}=o[a];!s&&n.indexOf(l)==-1&&r(l)}}}function Due(t){let e=Object.create(null);return n(a9(t,0));function n(r){let i=[];r.forEach(a=>{t[a].forEach(({term:s,to:l})=>{if(!s)return;let u;for(let c=0;c<i.length;c++)i[c][0]==s&&(u=i[c][1]);a9(t,l).forEach(c=>{u||i.push([s,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new Wd(r.indexOf(t.length-1)>-1);for(let a=0;a<i.length;a++){let s=i[a][1].sort(Gq);o.next.push({type:i[a][0],next:e[s.join(",")]||n(s)})}return o}}function Mue(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,a=[];for(let s=0;s<i.next.length;s++){let{type:l,next:u}=i.next[s];a.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Yq(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Wq(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Kq(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Xq(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new _ue(t,r,e[r]);return n}let s9=class Zq{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Xq(e,r.attrs),this.defaultAttrs=Yq(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Wq(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ou(this,this.computeAttrs(e),Ue.from(n),lr.setFrom(r))}createChecked(e=null,n,r){return n=Ue.from(n),this.checkContent(n),new Ou(this,this.computeAttrs(e),n,lr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ue.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(Ue.empty,!0);return o?new Ou(this,e,n.append(o),lr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Kq(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:lr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,a)=>r[o]=new Zq(o,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function kue(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class _ue{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?kue(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class TE{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Xq(e,i.attrs),this.excluded=null;let o=Yq(this.attrs);this.instance=o?new lr(this,o):null}create(e=null){return!e&&this.instance?this.instance:new lr(this,Wq(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new TE(o,i++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Kq(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let Qq=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Li.from(e.nodes),n.marks=Li.from(e.marks||{}),this.nodes=s9.compile(this.spec.nodes,this),this.marks=TE.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=Wd.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?l9(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:l9(this,a.split(" "))}this.nodeFromJSON=i=>Ou.fromJSON(this,i),this.markFromJSON=i=>lr.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof s9){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new vx(r,r.defaultAttrs,e,lr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function l9(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],a=o;if(o)n.push(o);else for(let s in t.marks){let l=t.marks[s];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Oue(t){return t.tag!=null}function Iue(t){return t.style!=null}let $s=class hD{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Oue(i))this.tags.push(i);else if(Iue(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new c9(this,n,!1);return r.addAll(e,lr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new c9(this,n,!0);return r.addAll(e,lr.none,n.from,n.to),ot.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(Lue(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],s=a.style;if(!(s.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||s.length>e.length&&(s.charCodeAt(e.length)!=61||s.slice(e.length+1)!=n))){if(a.getAttrs){let l=a.getAttrs(n);if(l===!1)continue;a.attrs=l||void 0}return a}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let s=n[a];if((s.priority==null?50:s.priority)<o)break}n.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=f9(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=f9(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new hD(e,hD.schemaRules(e)))}};const Jq={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Rue={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ej={ol:!0,ul:!0},S1=1,pD=2,qg=4;function u9(t,e,n){return e!=null?(e?S1:0)|(e==="full"?pD:0):t&&t.whitespace=="pre"?S1|pD:n&~qg}class my{constructor(e,n,r,i,o,a){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=lr.none,this.match=o||(a&qg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ue.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&S1)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=Ue.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ue.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Jq.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class c9{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,a=u9(null,n.preserveWhitespace,0)|(r?qg:0);i?o=new my(i.type,i.attrs,lr.none,!0,n.topMatch||i.type.contentMatch,a):r?o=new my(null,null,lr.none,!0,null,a):o=new my(e.schema.topNodeType,null,lr.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&pD?"full":this.localPreserveWS||(i.options&S1)>0,{schema:a}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let s=r.split(/\r?\n|\r/);for(let l=0;l<s.length;l++)l&&this.insertNode(a.linebreakReplacement.create(),n,!0),s[l]&&this.insertNode(a.text(s[l]),n,!/\S/.test(s[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),s;ej.hasOwnProperty(a)&&this.parser.normalizeLists&&Bue(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Rue.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(Jq.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,l,u,l.consuming===!1?s:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let s=void 0;;){let l=this.parser.matchStyle(o,a,this,s);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)s=l;else break}}return n}addElementByRule(e,n,r,i){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(a,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let s=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(s)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let a=r?e.childNodes[r]:e.firstChild,s=i==null?null:e.childNodes[i];a!=s;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let a=this.open,s=0;a>=0;a--){let l=this.nodes[a],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+s)&&(i=u,o=l,!u.length))break;if(l.solid){if(r)break;s+=2}}if(!i)return null;this.sync(o);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let a=lr.none;for(let s of i.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):d9(s.type,e.type))&&(a=s.addToSet(a));return o.content.push(e.mark(a)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let s=u9(e,o,a.options);a.options&qg&&a.content.length==0&&(s|=qg);let l=lr.none;return r=r.filter(u=>(a.type?a.type.allowsMarkType(u.type):d9(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new my(e,n,l,i,null,s)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=S1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(s,l)=>{for(;s>=0;s--){let u=n[s];if(u==""){if(s==n.length-1||s==0)continue;for(;l>=o;l--)if(a(s-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Bue(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ej.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Lue(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function f9(t){let e={};for(let n in t)e[n]=t[n];return e}function d9(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],a=s=>{o.push(s);for(let l=0;l<s.edgeCount;l++){let{type:u,next:c}=s.edge(l);if(u==e||o.indexOf(c)<0&&a(c))return!0}};if(a(i.contentMatch))return!0}}class Aa{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=QA(n).createDocumentFragment());let i=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let s=0,l=0;for(;s<o.length&&l<a.marks.length;){let u=a.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[s][0])||u.type.spec.spanning===!1)break;s++,l++}for(;s<o.length;)i=o.pop()[1];for(;l<a.marks.length;){let u=a.marks[l++],c=this.serializeMark(u,a.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=T2(QA(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&T2(QA(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return T2(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Aa(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=h9(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return h9(e.marks)}}function h9(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function QA(t){return t.document||window.document}const p9=new WeakMap;function Fue(t){let e=p9.get(t);return e===void 0&&p9.set(t,e=Pue(t)),e}function Pue(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function T2(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=Fue(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let s,l=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):f=="style"&&l.style?l.style.cssText=u[f]:l.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=T2(t,d,n,r);if(l.appendChild(h),m){if(s)throw new RangeError("Multiple content holes");s=m}}}return{dom:l,contentDOM:s}}const tj=65535,nj=Math.pow(2,16);function $ue(t,e){return t+e*nj}function m9(t){return t&tj}function zue(t){return(t-(t&tj))/nj}const rj=1,ij=2,A2=4,oj=8;class mD{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&oj)>0}get deletedBefore(){return(this.delInfo&(rj|A2))>0}get deletedAfter(){return(this.delInfo&(ij|A2))>0}get deletedAcross(){return(this.delInfo&A2)>0}}class wa{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&wa.empty)return wa.empty}recover(e){let n=0,r=m9(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+zue(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[s+o],c=this.ranges[s+a],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:c);if(r)return h;let m=e==(n<0?l:f)?null:$ue(s/3,e-l),v=e==l?ij:e==f?rj:A2;return(n<0?e!=l:e!=f)&&(v|=oj),new mD(h,v,m)}i+=c-u}return r?e+i:new mD(e+i,0,null)}touches(e,n){let r=0,i=m9(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[s+o],c=l+u;if(e<=c&&s==i*3)return!0;r+=this.ranges[s+a]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],s=a-(this.inverted?o:0),l=a+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(s,s+u,l,l+c),o+=c-u}}invert(){return new wa(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?wa.empty:new wa(e<0?[0,-e,0]:[0,0,e])}}wa.empty=new wa([]);class pm{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new pm(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new pm;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],s=a.mapResult(e,n);if(s.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(s.recover);continue}}i|=s.delInfo,e=s.pos}return r?e:new mD(e,i,null)}}const JA=Object.create(null);class so{getMap(){return wa.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=JA[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in JA)throw new RangeError("Duplicate use of step JSON ID "+e);return JA[e]=n,n.prototype.jsonID=e,n}}class ii{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ii(e,null)}static fail(e){return new ii(null,e)}static fromReplace(e,n,r,i){try{return ii.ok(e.replace(n,r,i))}catch(o){if(o instanceof px)return ii.fail(o.message);throw o}}}function LM(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(LM(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return Ue.fromArray(r)}class Wc extends so{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ot(LM(n.content,(a,s)=>!a.isAtom||!s.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return ii.fromReplace(e,this.from,this.to,o)}invert(){return new Bs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Wc(n.pos,r.pos,this.mark)}merge(e){return e instanceof Wc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Wc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Wc(n.from,n.to,e.markFromJSON(n.mark))}}so.jsonID("addMark",Wc);class Bs extends so{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ot(LM(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ii.fromReplace(e,this.from,this.to,r)}invert(){return new Wc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Bs(n.pos,r.pos,this.mark)}merge(e){return e instanceof Bs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bs(n.from,n.to,e.markFromJSON(n.mark))}}so.jsonID("removeMark",Bs);class Kc extends so{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ii.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ii.fromReplace(e,this.pos,this.pos+1,new ot(Ue.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Kc(this.pos,n.marks[i]);return new Kc(this.pos,this.mark)}}return new Kd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Kc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Kc(n.pos,e.markFromJSON(n.mark))}}so.jsonID("addNodeMark",Kc);class Kd extends so{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ii.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ii.fromReplace(e,this.pos,this.pos+1,new ot(Ue.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Kc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Kd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Kd(n.pos,e.markFromJSON(n.mark))}}so.jsonID("removeNodeMark",Kd);class ri extends so{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&gD(e,this.from,this.to)?ii.fail("Structure replace would overwrite content"):ii.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new wa([this.from,this.to-this.from,this.slice.size])}invert(e){return new ri(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ri(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ri)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ot.empty:new ot(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ri(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ot.empty:new ot(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ri(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ri(n.from,n.to,ot.fromJSON(e,n.slice),!!n.structure)}}so.jsonID("replace",ri);class Yr extends so{constructor(e,n,r,i,o,a,s=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=s}apply(e){if(this.structure&&(gD(e,this.from,this.gapFrom)||gD(e,this.gapTo,this.to)))return ii.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ii.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ii.fromReplace(e,this.from,this.to,r):ii.fail("Content does not fit in gap")}getMap(){return new wa([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Yr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Yr(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yr(n.from,n.to,n.gapFrom,n.gapTo,ot.fromJSON(e,n.slice),n.insert,!!n.structure)}}so.jsonID("replaceAround",Yr);function gD(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function Uue(t,e,n,r){let i=[],o=[],a,s;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,n),m=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(m)||(a&&a.to==d&&a.mark.eq(f[v])?a.to=h:i.push(a=new Bs(d,h,f[v])));s&&s.to==d?s.to=h:o.push(s=new Wc(d,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function Hue(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(a,s)=>{if(!a.isInline)return;o++;let l=null;if(r instanceof TE){let u=a.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(a.marks)&&(l=[r]):l=a.marks;if(l&&l.length){let u=Math.min(s+a.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let m=i[h];m.step==o-1&&f.eq(i[h].style)&&(d=m)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(s,e),to:u,step:o})}}}),i.forEach(a=>t.step(new Bs(a.from,a.to,a.style)))}function FM(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),a=[],s=e+1;for(let l=0;l<o.childCount;l++){let u=o.child(l),c=s+u.nodeSize,f=r.matchType(u.type);if(!f)a.push(new ri(s,c,ot.empty));else{r=f;for(let d=0;d<u.marks.length;d++)n.allowsMarkType(u.marks[d].type)||t.step(new Bs(s,c,u.marks[d]));if(i&&u.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,m;for(;d=h.exec(u.text);)m||(m=new ot(Ue.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),a.push(new ri(s+d.index,s+d.index+d[0].length,m))}}s=c}if(!r.validEnd){let l=r.fillBefore(Ue.empty,!0);t.replace(s,s,new ot(l,0,0))}for(let l=a.length-1;l>=0;l--)t.step(a[l])}function Vue(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function qm(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let a=t.$from.node(r),s=t.$from.index(r)+i,l=t.$to.indexAfter(r)-o;if(r<t.depth&&a.canReplace(s,l,n))return r;if(r==0||a.type.spec.isolating||!Vue(a,s,l))break;s&&(i=1),l<a.childCount&&(o=1)}return null}function que(t,e,n){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),s=i.after(o+1),l=a,u=s,c=Ue.empty,f=0;for(let m=o,v=!1;m>n;m--)v||r.index(m)>0?(v=!0,c=Ue.from(r.node(m).copy(c)),f++):l--;let d=Ue.empty,h=0;for(let m=o,v=!1;m>n;m--)v||i.after(m+1)<i.end(m)?(v=!0,d=Ue.from(i.node(m).copy(d)),h++):u++;t.step(new Yr(l,u,a,s,new ot(c.append(d),f,h),c.size-f,!0))}function aj(t,e,n=null,r=t){let i=jue(t,e),o=i&&Gue(r,e);return o?i.map(g9).concat({type:e,attrs:n}).concat(o.map(g9)):null}function g9(t){return{type:t,attrs:null}}function jue(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return n.canReplaceWith(r,i,a)?o:null}function Gue(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let l=(a.length?a[a.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:a}function Yue(t,e,n){let r=Ue.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let s=n[a].type.contentMatch.matchFragment(r);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ue.from(n[a].type.create(n[a].attrs,r))}let i=e.start,o=e.end;t.step(new Yr(i,o,i,o,new ot(r,0,0),n.length,!0))}function Wue(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(a,s)=>{let l=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,l)&&Kue(t.doc,t.mapping.slice(o).map(s),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?u=!1:!h&&m&&(u=!0)}u===!1&&lj(t,a,s,o),FM(t,t.mapping.slice(o).map(s,1),r,void 0,u===null);let c=t.mapping.slice(o),f=c.map(s,1),d=c.map(s+a.nodeSize,1);return t.step(new Yr(f,d,f+1,d-1,new ot(Ue.from(r.create(l,null,a.marks)),0,0),1,!0)),u===!0&&sj(t,a,s,o),!1}})}function sj(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+a.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function lj(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+o);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function Kue(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Xue(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Yr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ot(Ue.from(a),0,0),1,!0))}function Iu(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),m=r&&r[c+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let v=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!v.type.validContent(h))return!1}let s=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(s,s,l?l.type:i.node(o+1).type)}function Zue(t,e,n=1,r){let i=t.doc.resolve(e),o=Ue.empty,a=Ue.empty;for(let s=i.depth,l=i.depth-n,u=n-1;s>l;s--,u--){o=Ue.from(i.node(s).copy(o));let c=r&&r[u];a=Ue.from(c?c.type.create(c.attrs,a):i.node(s).copy(a))}t.step(new ri(e,e,new ot(o.append(a),n,n),!0))}function ph(t,e){let n=t.resolve(e),r=n.index();return uj(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Que(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),a=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function uj(t,e){return!!(t&&e&&!t.isLeaf&&Que(t,e))}function AE(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,a,s=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):n>0?(o=r.node(i+1),s++,a=r.node(i).maybeChild(s)):(o=r.node(i).maybeChild(s-1),a=r.node(i+1)),o&&!o.isTextblock&&uj(o,a)&&r.node(i).canReplace(s,s+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Jue(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),a=o.node().type;if(i&&a.inlineContent){let c=a.whitespace=="pre",f=!!a.contentMatch.matchType(i);c&&!f?r=!1:!c&&f&&(r=!0)}let s=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);lj(t,c.node(),c.before(),s)}a.inlineContent&&FM(t,e+n-1,a,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(s),u=l.map(e-n);if(t.step(new ri(u,l.map(e+n,-1),ot.empty,!0)),r===!0){let c=t.doc.resolve(u);sj(t,c.node(),c.before(),t.steps.length)}return t}function ece(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function cj(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let a=r.depth;a>=0;a--){let s=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(s>0?1:0),u=r.node(a),c=!1;if(o==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return s==0?r.pos:s<0?r.before(a+1):r.after(a+1)}return null}function NE(t,e,n=e,r=ot.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return fj(i,o,r)?new ri(e,n,r):new tce(i,o,r).fit()}function fj(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class tce{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ue.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ue.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,s=i.depth;for(;a&&s&&o.childCount==1;)o=o.firstChild.content,a--,s--;let l=new ot(o,a,s);return e>-1?new Yr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ri(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=eN(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let s=this.depth;s>=0;s--){let{type:l,match:u}=this.frontier[s],c,f=null;if(n==1&&(a?u.matchType(a.type)||(f=u.fillBefore(Ue.from(a),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:s,parent:o,inject:f};if(n==2&&a&&(c=u.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:s,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eN(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ot(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eN(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new ot(Ig(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ot(Ig(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let v=0;v<o.length;v++)this.openFrontierNode(o[v]);let a=this.unplaced,s=r?r.content:a.content,l=a.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let v=0;v<i.childCount;v++)c.push(i.child(v));f=f.matchFragment(i)}let h=s.size+e-(a.content.size-a.openEnd);for(;u<s.childCount;){let v=s.child(u),b=f.matchType(v.type);if(!b)break;u++,(u>1||l==0||v.content.size)&&(f=b,c.push(dj(v.mark(d.allowedMarks(v.marks)),u==1?l:0,u==s.childCount?h:-1)))}let m=u==s.childCount;m||(h=-1),this.placed=Rg(this.placed,n,Ue.from(c)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,b=s;v<h;v++){let x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=m?e==0?ot.empty:new ot(Ig(a.content,e-1,1),e-1,h<0?a.openEnd:e-1):new ot(Ig(a.content,e,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tN(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=tN(e,n,i,r,o);if(a){for(let s=n-1;s>=0;s--){let{match:l,type:u}=this.frontier[s],c=tN(e,s,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:a,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Rg(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Rg(this.placed,this.depth,Ue.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ue.empty,!0);n.childCount&&(this.placed=Rg(this.placed,this.frontier.length,n))}}function Ig(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ig(t.firstChild.content,e-1,n)))}function Rg(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Rg(t.lastChild.content,e-1,n)))}function eN(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function dj(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,dj(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ue.empty,!0)))),t.copy(r)}function tN(t,e,n,r,i){let o=t.node(e),a=i?t.indexAfter(e):t.index(e);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!nce(n,o.content,a)?s:null}function nce(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function rce(t){return t.spec.defining||t.spec.definingForContent}function ice(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(fj(i,o,r))return t.step(new ri(e,n,r));let a=pj(i,o);a[a.length-1]==0&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let m=i.node(d).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(d)>-1?s=d:i.before(d)==h&&a.splice(1,0,-d)}let l=a.indexOf(s),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let m=d.firstChild;if(u.push(m),h==r.openStart)break;d=m.content}for(let d=c-1;d>=0;d--){let h=u[d],m=rce(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(s)-1)))c=d;else if(m||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),m=u[h];if(m)for(let v=0;v<a.length;v++){let b=a[(v+l)%a.length],x=!0;b<0&&(x=!1,b=-b);let C=i.node(b-1),w=i.index(b-1);if(C.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(b),x?o.after(b):n,new ot(hj(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=a.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=a[d];h<0||(e=i.before(h),n=o.after(h))}}function hj(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(hj(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(t).append(t);t=a.append(o.matchFragment(a).fillBefore(Ue.empty,!0))}return t}function oce(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=ece(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ot(Ue.from(r),0,0))}function ace(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=pj(r,i);for(let a=0;a<o.length;a++){let s=o[a],l=a==o.length-1;if(l&&s==0||r.node(s).type.contentMatch.validEnd)return t.delete(r.start(s),i.end(s));if(s>0&&(l||r.node(s-1).canReplace(r.index(s-1),i.indexAfter(s-1))))return t.delete(r.before(s),i.after(s))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function pj(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Wp extends so{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ii.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ii.fromReplace(e,this.pos,this.pos+1,new ot(Ue.from(i),0,n.isLeaf?0:1))}getMap(){return wa.empty}invert(e){return new Wp(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Wp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Wp(n.pos,n.attr,n.value)}}so.jsonID("attr",Wp);class T1 extends so{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ii.ok(r)}getMap(){return wa.empty}invert(e){return new T1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new T1(n.attr,n.value)}}so.jsonID("docAttr",T1);let mm=class extends Error{};mm=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};mm.prototype=Object.create(Error.prototype);mm.prototype.constructor=mm;mm.prototype.name="TransformError";class PM{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new mm(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ot.empty){let i=NE(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ot(Ue.from(r),0,0))}delete(e,n){return this.replace(e,n,ot.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return ice(this,e,n,r),this}replaceRangeWith(e,n,r){return oce(this,e,n,r),this}deleteRange(e,n){return ace(this,e,n),this}lift(e,n){return que(this,e,n),this}join(e,n=1){return Jue(this,e,n),this}wrap(e,n){return Yue(this,e,n),this}setBlockType(e,n=e,r,i=null){return Wue(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Xue(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Wp(e,n,r)),this}setDocAttribute(e,n){return this.step(new T1(e,n)),this}addNodeMark(e,n){return this.step(new Kc(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof lr)n.isInSet(r.marks)&&this.step(new Kd(e,n));else{let i=r.marks,o,a=[];for(;o=n.isInSet(i);)a.push(new Kd(e,o)),i=o.removeFromSet(i);for(let s=a.length-1;s>=0;s--)this.step(a[s])}return this}split(e,n=1,r){return Zue(this,e,n,r),this}addMark(e,n,r){return Uue(this,e,n,r),this}removeMark(e,n,r){return Hue(this,e,n,r),this}clearIncompatible(e,n,r){return FM(this,e,n,r),this}}const nN=Object.create(null);class Bt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new mj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ot.empty){let r=n.content.lastChild,i=null;for(let s=0;s<n.openEnd;s++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:l,$to:u}=a[s],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),s?ot.empty:n),s==0&&y9(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:s}=i[o],l=e.mapping.slice(r),u=l.map(a.pos),c=l.map(s.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),y9(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new bt(e):Mp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=n<0?Mp(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Mp(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Jo(e.node(0))}static atStart(e){return Mp(e,e,0,0,1)||new Jo(e)}static atEnd(e){return Mp(e,e,e.content.size,e.childCount,-1)||new Jo(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nN[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nN)throw new RangeError("Duplicate use of selection JSON ID "+e);return nN[e]=n,n.prototype.jsonID=e,n}getBookmark(){return bt.between(this.$anchor,this.$head).getBookmark()}}Bt.prototype.visible=!0;class mj{constructor(e,n){this.$from=e,this.$to=n}}let v9=!1;function b9(t){!v9&&!t.parent.inlineContent&&(v9=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class bt extends Bt{constructor(e,n=e){b9(e),b9(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Bt.near(r);let i=e.resolve(n.map(this.anchor));return new bt(i.parent.inlineContent?i:r,r)}replace(e,n=ot.empty){if(super.replace(e,n),n==ot.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof bt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new DE(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new bt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Bt.findFrom(n,r,!0)||Bt.findFrom(n,-r,!0);if(o)n=o.$head;else return Bt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Bt.findFrom(e,-r,!0)||Bt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new bt(e,n)}}Bt.jsonID("text",bt);class DE{constructor(e,n){this.anchor=e,this.head=n}map(e){return new DE(e.map(this.anchor),e.map(this.head))}resolve(e){return bt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Et extends Bt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Bt.near(o):new Et(o)}content(){return new ot(Ue.from(this.node),0,0)}eq(e){return e instanceof Et&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new $M(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Et(e.resolve(n.anchor))}static create(e,n){return new Et(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Et.prototype.visible=!1;Bt.jsonID("node",Et);class $M{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new DE(r,r):new $M(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Et.isSelectable(r)?new Et(n):Bt.near(n)}}class Jo extends Bt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ot.empty){if(n==ot.empty){e.delete(0,e.doc.content.size);let r=Bt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Jo(e)}map(e){return new Jo(e)}eq(e){return e instanceof Jo}getBookmark(){return sce}}Bt.jsonID("all",Jo);const sce={map(){return this},resolve(t){return new Jo(t)}};function Mp(t,e,n,r,i,o=!1){if(e.inlineContent)return bt.create(t,n);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let s=e.child(a);if(s.isAtom){if(!o&&Et.isSelectable(s))return Et.create(t,n-(i<0?s.nodeSize:0))}else{let l=Mp(t,s,n+i,i<0?s.childCount:0,i,o);if(l)return l}n+=s.nodeSize*i}return null}function y9(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ri||i instanceof Yr))return;let o=t.mapping.maps[r],a;o.forEach((s,l,u,c)=>{a==null&&(a=c)}),t.setSelection(Bt.near(t.doc.resolve(a),n))}const x9=1,gy=2,w9=4;class lce extends PM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|x9)&~gy,this.storedMarks=null,this}get selectionSet(){return(this.updated&x9)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=gy,this}ensureMarks(e){return lr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&gy)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~gy,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||lr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(n);o=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Bt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=w9,this}get scrolledIntoView(){return(this.updated&w9)>0}}function E9(t,e){return!e||!t?t:t.bind(e)}class Bg{constructor(e,n,r){this.name=e,this.init=E9(n.init,r),this.apply=E9(n.apply,r)}}const uce=[new Bg("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Bg("selection",{init(t,e){return t.selection||Bt.atStart(e.doc)},apply(t){return t.selection}}),new Bg("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Bg("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rN{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=uce.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Bg(r.key,r.spec.state,r))})}}class Fp{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let s=this.config.plugins[a];if(s.spec.appendTransaction){let l=i?i[a].n:0,u=i?i[a].state:this,c=l<n.length&&s.spec.appendTransaction.call(s,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[a]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new lce(this)}static create(e){let n=new rN(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rN(this.schema,e.plugins),r=n.fields,i=new Fp(n);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rN(e.schema,e.plugins),o=new Fp(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=Ou.fromJSON(e.schema,n.doc);else if(a.name=="selection")o.selection=Bt.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let s in r){let l=r[s],u=l.spec.state;if(l.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,s)){o[a.name]=u.fromJSON.call(l,e,n[s],o);return}}o[a.name]=a.init(e,o)}}),o}}function gj(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=gj(i,e,{})),n[r]=i}return n}class Wt{constructor(e){this.spec=e,this.props={},e.props&&gj(e.props,this,this.props),this.key=e.key?e.key.key:vj("plugin")}getState(e){return e[this.key]}}const iN=Object.create(null);function vj(t){return t in iN?t+"$"+ ++iN[t]:(iN[t]=0,t+"$")}class gn{constructor(e="key"){this.key=vj(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const zM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function bj(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const yj=(t,e,n)=>{let r=bj(t,n);if(!r)return!1;let i=UM(r);if(!i){let a=r.blockRange(),s=a&&qm(a);return s==null?!1:(e&&e(t.tr.lift(a,s).scrollIntoView()),!0)}let o=i.nodeBefore;if(Dj(t,i,e,-1))return!0;if(r.parent.content.size==0&&(gm(o,"end")||Et.isSelectable(o)))for(let a=r.depth;;a--){let s=NE(t.doc,r.before(a),r.after(a),ot.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(gm(o,"end")?Bt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Et.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},cce=(t,e,n)=>{let r=bj(t,n);if(!r)return!1;let i=UM(r);return i?xj(t,i,e):!1},fce=(t,e,n)=>{let r=Ej(t,n);if(!r)return!1;let i=HM(r);return i?xj(t,i,e):!1};function xj(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let a=e.nodeAfter,s=a,l=e.pos+1;for(;!s.isTextblock;l++){if(s.type.spec.isolating)return!1;let c=s.firstChild;if(!c)return!1;s=c}let u=NE(t.doc,o,l,ot.empty);if(!u||u.from!=o||u instanceof ri&&u.slice.size>=l-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(bt.create(c.doc,o)),n(c.scrollIntoView())}return!0}function gm(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const wj=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=UM(r)}let a=o&&o.nodeBefore;return!a||!Et.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Et.create(t.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function UM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ej(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Cj=(t,e,n)=>{let r=Ej(t,n);if(!r)return!1;let i=HM(r);if(!i)return!1;let o=i.nodeAfter;if(Dj(t,i,e,1))return!0;if(r.parent.content.size==0&&(gm(o,"start")||Et.isSelectable(o))){let a=NE(t.doc,r.before(),r.after(),ot.empty);if(a&&a.slice.size<a.to-a.from){if(e){let s=t.tr.step(a);s.setSelection(gm(o,"start")?Bt.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Et.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Sj=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=HM(r)}let a=o&&o.nodeAfter;return!a||!Et.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Et.create(t.doc,o.pos)).scrollIntoView()),!0)};function HM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const dce=(t,e)=>{let n=t.selection,r=n instanceof Et,i;if(r){if(n.node.isTextblock||!ph(t.doc,n.from))return!1;i=n.from}else if(i=AE(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Et.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},hce=(t,e)=>{let n=t.selection,r;if(n instanceof Et){if(n.node.isTextblock||!ph(t.doc,n.to))return!1;r=n.to}else if(r=AE(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},pce=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&qm(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Tj=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function VM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const mce=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=VM(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let s=n.after(),l=t.tr.replaceWith(s,s,a.createAndFill());l.setSelection(Bt.near(l.doc.resolve(s),1)),e(l.scrollIntoView())}return!0},Aj=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Jo||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=VM(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=t.tr.insert(a,o.createAndFill());s.setSelection(bt.create(s.doc,a+1)),e(s.scrollIntoView())}return!0},Nj=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Iu(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&qm(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function gce(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Et&&e.selection.node.isBlock)return!r.parentOffset||!Iu(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],a,s,l=!1,u=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),u=r.start(h)==r.pos-(r.depth-h),s=VM(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),o.unshift(l&&s?{type:s}:null),a=h;break}else{if(h==1)return!1;o.unshift(null)}let c=e.tr;(e.selection instanceof bt||e.selection instanceof Jo)&&c.deleteSelection();let f=c.mapping.map(r.pos),d=Iu(c.doc,f,o.length,o);if(d||(o[0]=s?{type:s}:null,d=Iu(c.doc,f,o.length,o)),!d)return!1;if(c.split(f,o.length,o),!l&&u&&r.node(a).type!=s){let h=c.mapping.map(r.before(a)),m=c.doc.resolve(h);s&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,s)&&c.setNodeMarkup(c.mapping.map(r.before(a)),s)}return n&&n(c.scrollIntoView()),!0}}const vce=gce(),bce=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Et.create(t.doc,i))),!0)};function yce(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ph(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Dj(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,a,s,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&yce(t,e,n))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(a=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,m=Ue.empty;for(let x=a.length-1;x>=0;x--)m=Ue.from(a[x].create(null,m));m=Ue.from(i.copy(m));let v=t.tr.step(new Yr(e.pos-1,h,e.pos,h,new ot(m,1,0),a.length,!0)),b=v.doc.resolve(h+2*a.length);b.nodeAfter&&b.nodeAfter.type==i.type&&ph(v.doc,b.pos)&&v.join(b.pos),n(v.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&l?null:Bt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),d=f&&qm(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(u&&gm(o,"start",!0)&&gm(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let v=o,b=1;for(;!v.isTextblock;v=v.firstChild)b++;if(h.canReplace(h.childCount,h.childCount,v.content)){if(n){let x=Ue.empty;for(let w=m.length-1;w>=0;w--)x=Ue.from(m[w].copy(x));let C=t.tr.step(new Yr(e.pos-m.length,e.pos+o.nodeSize,e.pos+b,e.pos+o.nodeSize-b,new ot(x,m.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function Mj(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(bt.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const xce=Mj(-1),wce=Mj(1);function Ece(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&aj(a,t,e);return s?(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0):!1}}function C9(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(a,s,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[a];o.setBlockType(s,l,t,e)}r(o.scrollIntoView())}return!0}}function qM(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}qM(zM,yj,wj);qM(zM,Cj,Sj);qM(Tj,Aj,Nj,vce);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Cce(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o);if(!a)return!1;let s=r?n.tr:null;return Sce(s,a,t,e)?(r&&r(s.scrollIntoView()),!0):!1}}function Sce(t,e,n,r=null){let i=!1,o=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=a.resolve(e.start-2);o=new gx(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new gx(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let s=aj(o,n,r,e);return s?(t&&Tce(t,e,s,i,n),!0):!1}function Tce(t,e,n,r,i){let o=Ue.empty;for(let c=n.length-1;c>=0;c--)o=Ue.from(n[c].type.create(n[c].attrs,o));t.step(new Yr(e.start-(r?2:0),e.end,e.start,e.end,new ot(o,0,0),n.length,!0));let a=0;for(let c=0;c<n.length;c++)n[c].type==i&&(a=c+1);let s=n.length-a,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Iu(t.doc,l,s)&&(t.split(l,s),l+=2*s),l+=u.child(c).nodeSize;return t}function Ace(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Nce(e,n,t,o):Dce(e,n,o):!0:!1}}function Nce(t,e,n,r){let i=t.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new Yr(o-1,a,o,a,new ot(Ue.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new gx(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const s=qm(r);if(s==null)return!1;i.lift(r,s);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return ph(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Dce(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,v=n.startIndex;m>v;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=n.startIndex==0,l=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(s?0:1),c+1,a.content.append(l?Ue.empty:Ue.from(i))))return!1;let f=o.pos,d=f+a.nodeSize;return r.step(new Yr(f-(s?1:0),d+(l?1:0),f+1,d-1,new ot((s?Ue.empty:Ue.from(i.copy(Ue.empty))).append(l?Ue.empty:Ue.from(i.copy(Ue.empty))),s?0:1,l?0:1),s?0:1)),e(r.scrollIntoView()),!0}function Mce(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let s=o.parent,l=s.child(a-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==s.type,c=Ue.from(u?t.create():null),f=new ot(Ue.from(t.create(null,Ue.from(s.type.create(null,c)))),u?3:1,0),d=o.start,h=o.end;n(e.tr.step(new Yr(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}const Pi=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},vm=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let vD=null;const Eu=function(t,e,n){let r=vD||(vD=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},kce=function(){vD=null},Xd=function(t,e,n,r){return n&&(S9(t,e,n,r,-1)||S9(t,e,n,r,1))},_ce=/^(img|br|input|textarea|hr)$/i;function S9(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:as(t))){let a=t.parentNode;if(!a||a.nodeType!=1||av(t)||_ce.test(t.nodeName)||t.contentEditable=="false")return!1;e=Pi(t)+(i<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=a,e=i<0?as(t):0}else return!1}}function as(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Oce(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=as(t)}else if(t.parentNode&&!av(t))e=Pi(t),t=t.parentNode;else return null}}function Ice(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!av(t))e=Pi(t)+1,t=t.parentNode;else return null}}function Rce(t,e,n){for(let r=e==0,i=e==as(t);r||i;){if(t==n)return!0;let o=Pi(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==as(t)}}function av(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ME=function(t){return t.focusNode&&Xd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Cd(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Bce(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Lce(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(as(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(as(r.startContainer),r.startOffset)}}}const Ll=typeof navigator<"u"?navigator:null,T9=typeof document<"u"?document:null,Mf=Ll&&Ll.userAgent||"",bD=/Edge\/(\d+)/.exec(Mf),kj=/MSIE \d/.exec(Mf),yD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mf),ea=!!(kj||yD||bD),of=kj?document.documentMode:yD?+yD[1]:bD?+bD[1]:0,us=!ea&&/gecko\/(\d+)/i.test(Mf);us&&+(/Firefox\/(\d+)/.exec(Mf)||[0,0])[1];const xD=!ea&&/Chrome\/(\d+)/.exec(Mf),Ci=!!xD,_j=xD?+xD[1]:0,ro=!ea&&!!Ll&&/Apple Computer/.test(Ll.vendor),bm=ro&&(/Mobile\/\w+/.test(Mf)||!!Ll&&Ll.maxTouchPoints>2),Ja=bm||(Ll?/Mac/.test(Ll.platform):!1),Oj=Ll?/Win/.test(Ll.platform):!1,Tu=/Android \d/.test(Mf),sv=!!T9&&"webkitFontSmoothing"in T9.documentElement.style,Fce=sv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Pce(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function pu(t,e){return typeof t=="number"?t:t[e]}function $ce(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function A9(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=vm(a);continue}let s=a,l=s==o.body,u=l?Pce(o):$ce(s),c=0,f=0;if(e.top<u.top+pu(r,"top")?f=-(u.top-e.top+pu(i,"top")):e.bottom>u.bottom-pu(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+pu(i,"top")-u.top:e.bottom-u.bottom+pu(i,"bottom")),e.left<u.left+pu(r,"left")?c=-(u.left-e.left+pu(i,"left")):e.right>u.right-pu(r,"right")&&(c=e.right-u.right+pu(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{let h=s.scrollLeft,m=s.scrollTop;f&&(s.scrollTop+=f),c&&(s.scrollLeft+=c);let v=s.scrollLeft-h,b=s.scrollTop-m;e={left:e.left-v,top:e.top-b,right:e.right-v,bottom:e.bottom-b}}let d=l?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(d))break;a=d=="absolute"?a.offsetParent:vm(a)}}function zce(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let s=t.root.elementFromPoint(o,a);if(!s||s==t.dom||!t.dom.contains(s))continue;let l=s.getBoundingClientRect();if(l.top>=n-20){r=s,i=l.top;break}}return{refDOM:r,refTop:i,stack:Ij(t.dom)}}function Ij(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=vm(r));return e}function Uce({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Rj(n,r==0?0:r-e)}function Rj(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let hp=null;function Hce(t){if(t.setActive)return t.setActive();if(hp)return t.focus(hp);let e=Ij(t);t.focus(hp==null?{get preventScroll(){return hp={preventScroll:!0},!0}}:void 0),hp||(hp=!1,Rj(e,0))}function Bj(t,e){let n,r=2e8,i,o=0,a=e.top,s=e.top,l,u;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Eu(c).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.top<=a&&m.bottom>=s){a=Math.max(m.bottom,a),s=Math.min(m.top,s);let v=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(v<r){n=c,r=v,i=v&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&v&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?Vce(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Bj(n,i)}function Vce(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let a=Rc(r,1);if(a.top!=a.bottom&&jM(e,a)){i={node:t,offset:o+(e.left>=(a.left+a.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function jM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function qce(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function jce(t,e,n){let{node:r,offset:i}=Bj(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function Gce(t,e,n,r){let i=-1;for(let o=e,a=!1;o!=t.dom;){let s=t.docView.nearestDesc(o,!0),l;if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((l=s.dom.getBoundingClientRect()).width||l.height)&&(s.node.isBlock&&s.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(s.dom.nodeName)&&(!a&&l.left>r.left||l.top>r.top?i=s.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(i=s.posAfter),a=!0),!s.contentDOM&&i<0&&!s.node.isText))return(s.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?s.posBefore:s.posAfter;o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Lj(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let a=t.childNodes[o];if(a.nodeType==1){let s=a.getClientRects();for(let l=0;l<s.length;l++){let u=s[l];if(jM(e,u))return Lj(a,e,u)}}if((o=(o+1)%r)==i)break}return t}function Yce(t,e){let n=t.dom.ownerDocument,r,i=0,o=Lce(n,e.left,e.top);o&&({node:r,offset:i}=o);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),s;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let u=t.dom.getBoundingClientRect();if(!jM(e,u)||(a=Lj(t.dom,e,u),!a))return null}if(ro)for(let u=a;r&&u;u=vm(u))u.draggable&&(r=void 0);if(a=qce(a,e),r){if(us&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;sv&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=Gce(t,r,i,e))}s==null&&(s=jce(t,a,e));let l=t.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function N9(t){return t.top<t.bottom||t.left<t.right}function Rc(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(N9(r))return r}return Array.prototype.find.call(n,N9)||t.getBoundingClientRect()}const Wce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fj(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),a=sv||us;if(r.nodeType==3)if(a&&(Wce.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Rc(Eu(r,i,i),n);if(us&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Rc(Eu(r,i-1,i-1),-1);if(u.top==l.top){let c=Rc(Eu(r,i,i+1),-1);if(c.top!=l.top)return vg(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,vg(Rc(Eu(r,l,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==as(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return oN(l.getBoundingClientRect(),!1)}if(o==null&&i<as(r)){let l=r.childNodes[i];if(l.nodeType==1)return oN(l.getBoundingClientRect(),!0)}return oN(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==as(r))){let l=r.childNodes[i-1],u=l.nodeType==3?Eu(l,as(l)-(a?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return vg(Rc(u,1),!1)}if(o==null&&i<as(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Eu(l,0,a?0:1):l.nodeType==1?l:null:null;if(u)return vg(Rc(u,-1),!0)}return vg(Rc(r.nodeType==3?Eu(r):r,-n),n>=0)}function vg(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function oN(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Pj(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Kce(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Pj(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let s=t.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.contentDOM||s.dom;break}o=s.dom.parentNode}let a=Fj(t,i.pos,1);for(let s=o.firstChild;s;s=s.nextSibling){let l;if(s.nodeType==1)l=s.getClientRects();else if(s.nodeType==3)l=Eu(s,0,s.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?a.top-c.top>(c.bottom-a.top)*2:c.bottom-a.bottom>(a.bottom-c.top)*2))return!1}}return!0})}const Xce=/[\u0590-\u08ac]/;function Zce(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=t.domSelection();return s?!Xce.test(r.parent.textContent)||!s.modify?n=="left"||n=="backward"?o:a:Pj(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),d=s.caretBidiLevel;s.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:v}=t.domSelectionRange(),b=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==v;try{s.collapse(c,f),l&&(l!=c||u!=f)&&s.extend&&s.extend(l,u)}catch{}return d!=null&&(s.caretBidiLevel=d),b}):r.pos==r.start()||r.pos==r.end()}let D9=null,M9=null,k9=!1;function Qce(t,e,n){return D9==e&&M9==n?k9:(D9=e,M9=n,k9=n=="up"||n=="down"?Kce(t,e,n):Zce(t,e,n))}const cs=0,_9=1,Ad=2,Fl=3;class lv{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=cs,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Pi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!n||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let s=i.children[a];if(s.size){i=s;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],s=o+a.size;if(s>e||a instanceof zj){i=e-o;break}o=s}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof $j&&o.side>=0;r--);if(n<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&n&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Pi(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Pi(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,s=0;;s++){let l=this.children[s],u=a+l.size;if(i==-1&&e<=u){let c=a+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=a;for(let f=s;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Pi(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>n||s==this.children.length-1)){n=u;for(let c=s+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Pi(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),a=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let v=this.children[h],b=m+v.size;if(o>m&&a<b)return v.setSelection(e-m-v.border,n-m-v.border,r,i);m=b}let s=this.domFromPos(e,e?-1:1),l=n==e?s:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),f=!1;if((us||ro)&&e==n){let{node:h,offset:m}=s;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let v=h,b;v;v=v.parentNode){if(b=v.nextSibling){b.nodeName=="BR"&&(s=l={node:b.parentNode,offset:Pi(b)+1});break}let x=v.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let v=h.childNodes[m-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(us&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&ro)&&Xd(s.node,s.offset,c.anchorNode,c.anchorOffset)&&Xd(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((u.extend||e==n)&&!(f&&us)){u.collapse(s.node,s.offset);try{e!=n&&u.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let m=s;s=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(s.node,s.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let s=r+o.border,l=a-o.border;if(e>=s&&n<=l){this.dirty=e==r||n==a?Ad:_9,e==s&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Fl:o.markDirty(e-s,n-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ad:Fl}r=a}this.dirty=Ad}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ad:_9;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class $j extends lv{constructor(e,n,r,i){let o,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(a.nodeType!=1){let s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==cs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Jce extends lv{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Zd extends lv{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],a=o&&o(n,i,r);return(!a||!a.dom)&&(a=Aa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Zd(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Fl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Fl&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=cs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=cs}}slice(e,n,r){let i=Zd.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;n<a&&(o=ED(o,n,a,r)),e>0&&(o=ED(o,0,e,r));for(let s=0;s<o.length;s++)o[s].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class af extends lv{constructor(e,n,r,i,o,a,s,l,u){super(e,[],o,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=s}static create(e,n,r,i,o,a){let s=o.nodeViews[n.type.name],l,u=s&&s(n,o,()=>{if(!l)return a;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Aa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Vj(c,r,n),u?l=new efe(e,n,r,i,c,f||null,d,u,o,a+1):n.isText?new kE(e,n,r,i,c,d,o):new af(e,n,r,i,c,f||null,d,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ue.empty)}return e}matchesNode(e,n,r){return this.dirty==cs&&e.eq(this.node)&&bx(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,a=o&&o.pos>-1?o:null,s=o&&o.pos<0,l=new nfe(this,a&&a.node,e);ofe(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?lr.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,f,d)||s&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(u,c,f,h,e)||l.updateNextNode(u,c,f,e,d,i)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ad)&&(a&&this.protectLocalComposition(e,a),Uj(this.contentDOM,this.children,e),bm&&afe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof bt)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,s=sfe(this.node.content,a,r-n,i-n);return s<0?null:{node:o,pos:s,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new Jce(this,o,n,i);e.input.compositionNodes.push(a),this.children=ED(this.children,r,r+i.length,e,a)}update(e,n,r,i){return this.dirty==Fl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=cs}updateOuterDeco(e){if(bx(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Hj(this.dom,this.nodeDOM,wD(this.outerDeco,this.node,n),wD(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function O9(t,e,n,r,i){Vj(r,e,t);let o=new af(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class kE extends af{constructor(e,n,r,i,o,a,s){super(e,n,r,i,o,null,a,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Fl||this.dirty!=cs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=cs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=cs,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new kE(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Fl)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zj extends lv{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==cs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class efe extends af{constructor(e,n,r,i,o,a,s,l,u,c){super(e,n,r,i,o,a,s,u,c),this.spec=l}update(e,n,r,i){if(this.dirty==Fl)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Uj(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let a=e[o],s=a.dom;if(s.parentNode==t){for(;s!=r;)r=I9(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(s,r);if(a instanceof Zd){let l=r?r.previousSibling:t.lastChild;Uj(a.contentDOM,a.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=I9(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const jg=function(t){t&&(this.nodeName=t)};jg.prototype=Object.create(null);const Nd=[new jg];function wD(t,e,n){if(t.length==0)return Nd;let r=n?Nd[0]:new jg,i=[r];for(let o=0;o<t.length;o++){let a=t[o].type.attrs;if(a){a.nodeName&&i.push(r=new jg(a.nodeName));for(let s in a){let l=a[s];l!=null&&(n&&i.length==1&&i.push(r=new jg(e.isInline?"span":"div")),s=="class"?r.class=(r.class?r.class+" ":"")+l:s=="style"?r.style=(r.style?r.style+";":"")+l:s!="nodeName"&&(r[s]=l))}}}return i}function Hj(t,e,n,r){if(n==Nd&&r==Nd)return e;let i=e;for(let o=0;o<r.length;o++){let a=r[o],s=n[o];if(o){let l;s&&s.nodeName==a.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName),l.pmIsDeco=!0,l.appendChild(i),s=Nd[0]),i=l}tfe(i,s||Nd[0],a)}return i}function tfe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Vj(t,e,n){return Hj(t,t,Nd,wD(e,n,t.nodeType!=1))}function bx(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function I9(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class nfe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rfe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=cs,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){s=l;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let l=Zd.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))o=this.top.children.indexOf(a,this.index);else for(let s=this.index,l=Math.min(this.top.children.length,s+5);s<l;s++){let u=this.top.children[s];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let a=this.top.children[i];return a.dirty==Fl&&a.dom==a.contentDOM&&(a.dirty=Ad),a.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,a){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof af){let u=this.preMatch.matched.get(l);if(u!=null&&u!=o)return!1;let c=l.dom,f,d=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Fl&&bx(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,s),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,n,r,i,a)))return this.destroyBetween(this.index,s),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Ad,f.updateChildren(i,a+1),f.dirty=cs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!bx(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let s=af.create(this.top,n,r,i,o,a);if(s.contentDOM){s.children=e.children,e.children=[];for(let l of s.children)l.parent=s}return e.destroy(),s}addNode(e,n,r,i,o){let a=af.create(this.top,e,n,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new $j(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Zd;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof kE)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ro||Ci)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new zj(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function rfe(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,a=[];e:for(;i>0;){let s;for(;;)if(r){let u=n.children[r-1];if(u instanceof Zd)n=u,r=u.children.length;else{s=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=s.node;if(l){if(l!=t.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}function ife(t,e){return t.type.side-e.type.side}function ofe(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let a=0,s=[],l=null;for(let u=0;;){let c,f;for(;a<i.length&&i[a].to==o;){let b=i[a++];b.widget&&(c?(f||(f=[c])).push(b):c=b)}if(c)if(f){f.sort(ife);for(let b=0;b<f.length;b++)n(f[b],u,!!l)}else n(c,u,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(u<t.childCount)h=u,d=t.child(u++);else break;for(let b=0;b<s.length;b++)s[b].to<=o&&s.splice(b--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);let m=o+d.nodeSize;if(d.isText){let b=m;a<i.length&&i[a].from<b&&(b=i[a].from);for(let x=0;x<s.length;x++)s[x].to<b&&(b=s[x].to);b<m&&(l=d.cut(b-o),d=d.cut(0,b-o),m=b,h=-1)}else for(;a<i.length&&i[a].to<m;)a++;let v=d.isInline&&!d.isLeaf?s.filter(b=>!b.inline):s.slice();r(d,v,e.forChild(o,d),h),o=m}}function afe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function sfe(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let a=t.child(i++),s=o;if(o+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=n){if(o>=r&&l.slice(r-e.length-s,r-s)==e)return r-e.length;let u=s<r?l.lastIndexOf(e,r-s-1):-1;if(u>=0&&u+e.length+s>=n)return s+u;if(n==r&&l.length>=r+e.length-s&&l.slice(r-s,r-s+e.length)==e)return r}}return-1}function ED(t,e,n,r,i){let o=[];for(let a=0,s=0;a<t.length;a++){let l=t[a],u=s,c=s+=l.size;u>=n||c<=e?o.push(l):(u<e&&o.push(l.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(l.slice(n-u,l.size,r)))}return o}function GM(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let s=r.resolve(a),l,u;if(ME(n)){for(l=a;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Et.isSelectable(f)&&i.parent&&!(f.isInline&&Rce(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;u=new Et(a==d?s:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=a,d=a;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,a]=d==t.state.selection.anchor?[d,f]:[f,d],s=r.resolve(a)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let f=e=="pointer"||t.state.selection.head<s.pos&&!o?1:-1;u=YM(t,c,s,f)}return u}function qj(t){return t.editable?t.hasFocus():Gj(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ru(t,e=!1){let n=t.state.selection;if(jj(t,n),!!qj(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ci){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Xd(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ufe(t);else{let{anchor:r,head:i}=n,o,a;R9&&!(n instanceof bt)&&(n.$from.parent.inlineContent||(o=B9(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=B9(t,n.to))),t.docView.setSelection(r,i,t,e),R9&&(o&&L9(o),a&&L9(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&lfe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const R9=ro||Ci&&_j<63;function B9(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(ro&&i&&i.contentEditable=="false")return aN(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return aN(i);if(o)return aN(o)}}function aN(t){return t.contentEditable="true",ro&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function L9(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function lfe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!qj(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function ufe(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Pi(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&ea&&of<=11&&(n.disabled=!0,n.disabled=!1)}function jj(t,e){if(e instanceof Et){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(F9(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else F9(t)}function F9(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function YM(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||bt.between(e,n,r)}function P9(t){return t.editable&&!t.hasFocus()?!1:Gj(t)}function Gj(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cfe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Xd(e.node,e.offset,n.anchorNode,n.anchorOffset)}function CD(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Bt.findFrom(o,e)}function Pc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function $9(t,e,n){let r=t.state.selection;if(r instanceof bt)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Pc(t,new bt(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=CD(t.state,e);return i&&i instanceof Et?Pc(t,i):!1}else if(!(Ja&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let s=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=t.docView.descAt(s))&&!a.contentDOM?Et.isSelectable(o)?Pc(t,new Et(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):sv?Pc(t,new bt(t.state.doc.resolve(e<0?s:s+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Et&&r.node.isInline)return Pc(t,new bt(e>0?r.$to:r.$from));{let i=CD(t.state,e);return i?Pc(t,i):!1}}}function yx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gg(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function pp(t,e){return e<0?ffe(t):dfe(t)}function ffe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(us&&n.nodeType==1&&r<yx(n)&&Gg(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let s=n.childNodes[r-1];if(Gg(s,-1))i=n,o=--r;else if(s.nodeType==3)n=s,r=n.nodeValue.length;else break}}else{if(Yj(n))break;{let s=n.previousSibling;for(;s&&Gg(s,-1);)i=n.parentNode,o=Pi(s),s=s.previousSibling;if(s)n=s,r=yx(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?SD(t,n,r):i&&SD(t,i,o)}function dfe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=yx(n),o,a;for(;;)if(r<i){if(n.nodeType!=1)break;let s=n.childNodes[r];if(Gg(s,1))o=n,a=++r;else break}else{if(Yj(n))break;{let s=n.nextSibling;for(;s&&Gg(s,1);)o=s.parentNode,a=Pi(s)+1,s=s.nextSibling;if(s)n=s,r=0,i=yx(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&SD(t,o,a)}function Yj(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function hfe(t,e){for(;t&&e==t.childNodes.length&&!av(t);)e=Pi(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function pfe(t,e){for(;t&&!e&&!av(t);)e=Pi(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function SD(t,e,n){if(e.nodeType!=3){let o,a;(a=hfe(e,n))?(e=a,n=0):(o=pfe(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(ME(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ru(t)},50)}function z9(t,e){let n=t.state.doc.resolve(e);if(!(Ci||Oj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function U9(t,e,n){let r=t.state.selection;if(r instanceof bt&&!r.empty||n.indexOf("s")>-1||Ja&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=CD(t.state,e);if(a&&a instanceof Et)return Pc(t,a)}if(!i.parent.inlineContent){let a=e<0?i:o,s=r instanceof Jo?Bt.near(a,e):Bt.findFrom(a,e);return s?Pc(t,s):!1}return!1}function H9(t,e){if(!(t.state.selection instanceof bt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let a=t.state.tr;return e<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),t.dispatch(a),!0}return!1}function V9(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function mfe(t){if(!ro||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;V9(t,r,"true"),setTimeout(()=>V9(t,r,"false"),20)}return!1}function gfe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function vfe(t,e){let n=e.keyCode,r=gfe(e);if(n==8||Ja&&n==72&&r=="c")return H9(t,-1)||pp(t,-1);if(n==46&&!e.shiftKey||Ja&&n==68&&r=="c")return H9(t,1)||pp(t,1);if(n==13||n==27)return!0;if(n==37||Ja&&n==66&&r=="c"){let i=n==37?z9(t,t.state.selection.from)=="ltr"?-1:1:-1;return $9(t,i,r)||pp(t,i)}else if(n==39||Ja&&n==70&&r=="c"){let i=n==39?z9(t,t.state.selection.from)=="ltr"?1:-1:1;return $9(t,i,r)||pp(t,i)}else{if(n==38||Ja&&n==80&&r=="c")return U9(t,-1,r)||pp(t,-1);if(n==40||Ja&&n==78&&r=="c")return mfe(t)||U9(t,1,r)||pp(t,1);if(r==(Ja?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function WM(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let a=t.someProp("clipboardSerializer")||Aa.fromSchema(t.state.schema),s=Jj(),l=s.createElement("div");l.appendChild(a.serializeFragment(r,{document:s}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=Qj[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let m=s.createElement(c[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function Wj(t,e,n,r,i){let o=i.parent.type.spec.code,a,s;if(!n&&!e)return null;let l=!!e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,o||r,t)}),o)return s=new ot(Ue.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",d=>{s=d(s,t,!0)}),s;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)s=f;else{let d=i.marks(),{schema:h}=t.state,m=Aa.fromSchema(h);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let b=a.appendChild(document.createElement("p"));v&&b.appendChild(m.serializeNode(h.text(v,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),a=wfe(n),sv&&Efe(a);let u=a&&a.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=a.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;a=d}if(s||(s=(t.someProp("clipboardParser")||t.someProp("domParser")||$s.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!bfe.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)s=Cfe(q9(s,+c[1],+c[2]),c[4]);else if(s=ot.maxOpen(yfe(s.content,i),!0),s.openStart||s.openEnd){let f=0,d=0;for(let h=s.content.firstChild;f<s.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=s.content.lastChild;d<s.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);s=q9(s,f,d)}return t.someProp("transformPasted",f=>{s=f(s,t,l)}),s}const bfe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function yfe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,a=[];if(t.forEach(s=>{if(!a)return;let l=i.findWrapping(s.type),u;if(!l)return a=null;if(u=a.length&&o.length&&Xj(l,o,s,a[a.length-1],0))a[a.length-1]=u;else{a.length&&(a[a.length-1]=Zj(a[a.length-1],o.length));let c=Kj(s,l);a.push(c),i=i.matchType(c.type),o=l}}),a)return Ue.from(a)}return t}function Kj(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ue.from(t));return t}function Xj(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Xj(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ue.from(Kj(n,t,i+1))))}}function Zj(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Zj(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ue.empty,!0);return t.copy(n.append(r))}function TD(t,e,n,r,i,o){let a=e<0?t.firstChild:t.lastChild,s=a.content;return t.childCount>1&&(o=0),i<r-1&&(s=TD(s,e,n,r,i+1,o)),i>=n&&(s=e<0?a.contentMatchAt(0).fillBefore(s,o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(Ue.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(s))}function q9(t,e,n){return e<t.openStart&&(t=new ot(TD(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ot(TD(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Qj={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let j9=null;function Jj(){return j9||(j9=document.implementation.createHTMLDocument("title"))}let sN=null;function xfe(t){let e=window.trustedTypes;return e?(sN||(sN=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),sN.createHTML(t)):t}function wfe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Jj().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Qj[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=xfe(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Efe(t){let e=t.querySelectorAll(Ci?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Cfe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:a}=t;for(let s=r.length-2;s>=0;s-=2){let l=n.nodes[r[s]];if(!l||l.hasRequiredAttrs())break;i=Ue.from(l.create(r[s+1],i)),o++,a++}return new ot(i,o,a)}const No={},Do={},Sfe={touchstart:!0,touchmove:!0};class Tfe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Afe(t){for(let e in No){let n=No[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Dfe(t,r)&&!KM(t,r)&&(t.editable||!(r.type in Do))&&n(t,r)},Sfe[e]?{passive:!0}:void 0)}ro&&t.dom.addEventListener("input",()=>null),AD(t)}function Xc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Nfe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function AD(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>KM(t,r))})}function KM(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Dfe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Mfe(t,e){!KM(t,e)&&No[e.type]&&(t.editable||!(e.type in Do))&&No[e.type](t,e)}Do.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!tG(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Tu&&Ci&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),bm&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Cd(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||vfe(t,n)?n.preventDefault():Xc(t,"key")};Do.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Do.keypress=(t,e)=>{let n=e;if(tG(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ja&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof bt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",a=>a(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function _E(t){return{left:t.clientX,top:t.clientY}}function kfe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function XM(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(t.someProp(e,s=>a>o.depth?s(t,n,o.nodeAfter,o.before(a),i,!0):s(t,n,o.node(a),o.before(a),i,!1)))return!0;return!1}function Kp(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function _fe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Et.isSelectable(r)?(Kp(t,new Et(n)),!0):!1}function Ofe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Et&&(r=n.node);let o=t.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let s=a>o.depth?o.nodeAfter:o.node(a);if(Et.isSelectable(s)){r&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(a);break}}return i!=null?(Kp(t,Et.create(t.state.doc,i)),!0):!1}function Ife(t,e,n,r,i){return XM(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?Ofe(t,n):_fe(t,n))}function Rfe(t,e,n,r){return XM(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Bfe(t,e,n,r){return XM(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Lfe(t,n,r)}function Lfe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Kp(t,bt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),s=i.before(o);if(a.inlineContent)Kp(t,bt.create(r,s+1,s+1+a.content.size));else if(Et.isSelectable(a))Kp(t,Et.create(r,s));else continue;return!0}}function ZM(t){return xx(t)}const eG=Ja?"metaKey":"ctrlKey";No.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ZM(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&kfe(n,t.input.lastClick)&&!n[eG]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let a=t.posAtCoords(_E(n));a&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ffe(t,a,n,!!r)):(o=="doubleClick"?Rfe:Bfe)(t,a.pos,a.inside,n)?n.preventDefault():Xc(t,"pointer"))};class Ffe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[eG],this.allowDefault=r.shiftKey;let o,a;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),a=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,a=c.depth?c.before():0}const s=i?null:r.target,l=s?e.docView.nearestDesc(s,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof Et&&u.from<=a&&u.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&us&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ru(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(_E(e))),this.updateAllowDefault(e),this.allowDefault||!n?Xc(this.view,"pointer"):Ife(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ro&&this.mightDrag&&!this.mightDrag.node.isAtom||Ci&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Kp(this.view,Bt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Xc(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}No.touchstart=t=>{t.input.lastTouch=Date.now(),ZM(t),Xc(t,"pointer")};No.touchmove=t=>{t.input.lastTouch=Date.now(),Xc(t,"pointer")};No.contextmenu=t=>ZM(t);function tG(t,e){return t.composing?!0:ro&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Pfe=Tu?5e3:-1;Do.compositionstart=Do.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof bt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ci&&Oj&&$fe(t)))t.markCursor=t.state.storedMarks||n.marks(),xx(t,!0),t.markCursor=null;else if(xx(t,!e.selection.empty),us&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){let s=t.domSelection();s&&s.collapse(a,a.nodeValue.length);break}else i=a,o=-1}}t.input.composing=!0}nG(t,Pfe)};function $fe(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Do.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,nG(t,20))};function nG(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>xx(t),e))}function rG(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Ufe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function zfe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Oce(e.focusNode,e.focusOffset),r=Ice(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function Ufe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function xx(t,e=!1){if(!(Tu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),rG(t),e||t.docView&&t.docView.dirty){let n=GM(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Hfe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const A1=ea&&of<15||bm&&Fce<604;No.copy=Do.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=A1?null:n.clipboardData,a=r.content(),{dom:s,text:l}=WM(t,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",l)):Hfe(t,s),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Vfe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function qfe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?N1(t,r.value,null,i,e):N1(t,r.textContent,r.innerHTML,i,e)},50)}function N1(t,e,n,r,i){let o=Wj(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||ot.empty)))return!0;if(!o)return!1;let a=Vfe(o),s=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function iG(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Do.paste=(t,e)=>{let n=e;if(t.composing&&!Tu)return;let r=A1?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&N1(t,iG(r),r.getData("text/html"),i,n)?n.preventDefault():qfe(t,n)};class oG{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const jfe=Ja?"altKey":"ctrlKey";function aG(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[jfe]}No.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(_E(n)),a;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Et?i.to-1:i.to))){if(r&&r.mightDrag)a=Et.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(a=Et.create(t.state.doc,f.posBefore))}}let s=(a||t.state.selection).content(),{dom:l,text:u,slice:c}=WM(t,s);(!n.dataTransfer.files.length||!Ci||_j>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(A1?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",A1||n.dataTransfer.setData("text/plain",u),t.dragging=new oG(c,aG(t,n),a)};No.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Do.dragover=Do.dragenter=(t,e)=>e.preventDefault();Do.drop=(t,e)=>{try{Gfe(t,e,t.dragging)}finally{t.dragging=null}};function Gfe(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(_E(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",h=>{o=h(o,t,!1)}):o=Wj(t,iG(e.dataTransfer),A1?null:e.dataTransfer.getData("text/html"),!1,i);let a=!!(n&&aG(t,e));if(t.someProp("handleDrop",h=>h(t,e,o||ot.empty,a))){e.preventDefault();return}if(!o)return;e.preventDefault();let s=o?cj(t.state.doc,i.pos,o):i.pos;s==null&&(s=i.pos);let l=t.state.tr;if(a){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let u=l.mapping.map(s),c=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(c?l.replaceRangeWith(u,u,o.content.firstChild):l.replaceRange(u,u,o),l.doc.eq(f))return;let d=l.doc.resolve(u);if(c&&Et.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new Et(d));else{let h=l.mapping.map(s);l.mapping.maps[l.mapping.maps.length-1].forEach((m,v,b,x)=>h=x),l.setSelection(YM(t,d,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}No.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ru(t)},20))};No.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};No.beforeinput=(t,e)=>{if(Ci&&Tu&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Cd(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Do)No[t]=Do[t];function D1(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class wx{constructor(e,n){this.toDOM=e,this.spec=n||Ld,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:a}=e.mapResult(n.from+i,this.side<0?-1:1);return a?null:new Un(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof wx&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&D1(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class sf{constructor(e,n){this.attrs=e,this.spec=n||Ld}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new Un(o,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof sf&&D1(this.attrs,e.attrs)&&D1(this.spec,e.spec)}static is(e){return e.type instanceof sf}destroy(){}}class QM{constructor(e,n){this.attrs=e,this.spec=n||Ld}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let a=e.mapResult(n.to+i,-1);return a.deleted||a.pos<=o.pos?null:new Un(o.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof QM&&D1(this.attrs,e.attrs)&&D1(this.spec,e.spec)}destroy(){}}class Un{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Un(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Un(e,e,new wx(n,r))}static inline(e,n,r,i){return new Un(e,n,new sf(r,i))}static node(e,n,r,i){return new Un(e,n,new QM(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof sf}get widget(){return this.type instanceof wx}}const kp=[],Ld={};class nn{constructor(e,n){this.local=e.length?e:kp,this.children=n.length?n:kp}static create(e,n){return n.length?Ex(n,e,0,Ld):Qi}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let a=0;a<this.local.length;a++){let s=this.local[a];s.from<=n&&s.to>=e&&(!o||o(s.spec))&&r.push(s.copy(s.from+i,s.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let s=this.children[a]+1;this.children[a+2].findInner(e-s,n-s,r,i+s,o)}}map(e,n,r){return this==Qi||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ld)}mapInner(e,n,r,i,o){let a;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(e,r,i);l&&l.type.valid(n,l)?(a||(a=[])).push(l):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Yfe(this.children,a||[],e,n,r,i,o):a?new nn(a.sort(Fd),kp):Qi}add(e,n){return n.length?this==Qi?nn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((s,l)=>{let u=l+r,c;if(c=lG(n,s,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(s,c,u+1):i.splice(o,0,l,l+s.nodeSize,Ex(c,s,u+1,Ld)),o+=3}});let a=sG(o?uG(n):n,-r);for(let s=0;s<a.length;s++)a[s].type.valid(e,a[s])||a.splice(s--,1);return new nn(a.length?this.local.concat(a).sort(Fd):this.local,i||this.children)}remove(e){return e.length==0||this==Qi?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,s=r[o]+n,l=r[o+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>s&&f.to<l&&(e[c]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(a,s+1);u!=Qi?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let s=0;s<i.length;s++)i[s].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(s--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new nn(i,r):Qi}forChild(e,n){if(this==Qi)return this;if(n.isLeaf)return nn.empty;let r,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(r=this.children[s+2]);break}let o=e+1,a=o+n.content.size;for(let s=0;s<this.local.length;s++){let l=this.local[s];if(l.from<a&&l.to>o&&l.type instanceof sf){let u=Math.max(o,l.from)-o,c=Math.min(a,l.to)-o;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let s=new nn(i.sort(Fd),kp);return r?new qc([s,r]):s}return r||Qi}eq(e){if(this==e)return!0;if(!(e instanceof nn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return JM(this.localsInner(e))}localsInner(e){if(this==Qi)return kp;if(e.inlineContent||!this.local.some(sf.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof sf||n.push(this.local[r]);return n}forEachSet(e){e(this)}}nn.empty=new nn([],[]);nn.removeOverlap=JM;const Qi=nn.empty;class qc{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ld));return qc.from(r)}forChild(e,n){if(n.isLeaf)return nn.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Qi&&(o instanceof qc?r=r.concat(o.members):r.push(o))}return qc.from(r)}eq(e){if(!(e instanceof qc)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let a=0;a<o.length;a++)n.push(o[a])}}return n?JM(r?n:n.sort(Fd)):kp}static from(e){switch(e.length){case 0:return Qi;case 1:return e[0];default:return new qc(e.every(n=>n instanceof nn)?e:e.reduce((n,r)=>n.concat(r instanceof nn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Yfe(t,e,n,r,i,o,a){let s=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let f=0;n.maps[u].forEach((d,h,m,v)=>{let b=v-m-(h-d);for(let x=0;x<s.length;x+=3){let C=s[x+1];if(C<0||d>C+c-f)continue;let w=s[x]+c-f;h>=w?s[x+1]=d<=w?-2:-1:d>=c&&b&&(s[x]+=b,s[x+1]+=b)}f+=b}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<s.length;u+=3)if(s[u+1]<0){if(s[u+1]==-2){l=!0,s[u+1]=-1;continue}let c=n.map(t[u]+o),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let d=n.map(t[u+1]+o,-1),h=d-i,{index:m,offset:v}=r.content.findIndex(f),b=r.maybeChild(m);if(b&&v==f&&v+b.nodeSize==h){let x=s[u+2].mapInner(n,b,c+1,t[u]+o+1,a);x!=Qi?(s[u]=f,s[u+1]=h,s[u+2]=x):(s[u+1]=-2,l=!0)}else l=!0}if(l){let u=Wfe(s,t,e,n,i,o,a),c=Ex(u,r,0,a);e=c.local;for(let f=0;f<s.length;f+=3)s[f+1]<0&&(s.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<s.length&&s[d]<h;)d+=3;s.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new nn(e.sort(Fd),s)}function sG(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Un(i.from+e,i.to+e,i.type))}return n}function Wfe(t,e,n,r,i,o,a){function s(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?n.push(f):a.onRemove&&a.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)s(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&s(t[l+2],e[l]+o+1);return n}function lG(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,a;o<t.length;o++)(a=t[o])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),t[o]=null);return i}function uG(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ex(t,e,n,r){let i=[],o=!1;e.forEach((s,l)=>{let u=lG(t,s,l+n);if(u){o=!0;let c=Ex(u,s,n+l+1,r);c!=Qi&&i.push(l,l+s.nodeSize,c)}});let a=sG(o?uG(t):t,-n).sort(Fd);for(let s=0;s<a.length;s++)a[s].type.valid(e,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new nn(a,i):Qi}function Fd(t,e){return t.from-e.from||t.to-e.to}function JM(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),G9(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),G9(e,i,r.copy(o.from,r.to)));break}}}return e}function G9(t,e,n){for(;e<t.length&&Fd(n,t[e])>0;)e++;t.splice(e,0,n)}function lN(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Qi&&e.push(r)}),t.cursorWrapper&&e.push(nn.create(t.state.doc,[t.cursorWrapper.deco])),qc.from(e)}const Kfe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xfe=ea&&of<=11;class Zfe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Qfe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zfe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ea&&of<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Xfe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Kfe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(P9(this.view)){if(this.suppressingSelectionUpdates)return Ru(this.view);if(ea&&of<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=vm(o))n.add(o);for(let o=e.anchorNode;o;o=vm(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&P9(e)&&!this.ignoreSelectionChange(r),o=-1,a=-1,s=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],l);f&&(o=o<0?f.from:Math.min(f.from,o),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(s=!0))}if(us&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||tde(e,f)!=h)&&d.remove()}}}else if((Ci||ro)&&l.some(c=>c.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let f=c.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&c.parentNode.removeChild(c)}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ME(r)&&(u=GM(e))&&u.eq(Bt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ru(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,a),Jfe(e)),this.handleDOMChange(o,a,s,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ru(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(ea&&of<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let a=i&&i.parentNode==e.target?Pi(i)+1:0,s=r.localPosFromDOM(e.target,a,-1),l=o&&o.parentNode==e.target?Pi(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:s,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Y9=new WeakMap,W9=!1;function Jfe(t){if(!Y9.has(t)&&(Y9.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=us,W9)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),W9=!0}}function K9(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Xd(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function ede(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return K9(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?K9(t,n):null}function tde(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function nde(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:a,to:s}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],ME(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Ci&&t.input.lastKeyCode===8)for(let b=o;b>i;b--){let x=r.childNodes[b-1],C=x.pmViewDesc;if(x.nodeName=="BR"&&!C){o=b;break}if(!C||C.size)break}let f=t.state.doc,d=t.someProp("domParser")||$s.fromSchema(t.state.schema),h=f.resolve(a),m=null,v=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:rde,context:h});if(u&&u[0].pos!=null){let b=u[0].pos,x=u[1]&&u[1].pos;x==null&&(x=b),m={anchor:b+a,head:x+a}}return{doc:v,sel:m,from:a,to:s}}function rde(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ro&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ro&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ide=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ode(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=GM(t,N);if(D&&!t.state.selection.eq(D)){if(Ci&&Tu&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",k=>k(t,Cd(13,"Enter"))))return;let M=t.state.tr.setSelection(D);N=="pointer"?M.setMeta("pointer",!0):N=="key"&&M.scrollIntoView(),o&&M.setMeta("composition",o),t.dispatch(M)}return}let a=t.state.doc.resolve(e),s=a.sharedDepth(n);e=a.before(s+1),n=t.state.doc.resolve(n).after(s+1);let l=t.state.selection,u=nde(t,e,n),c=t.state.doc,f=c.slice(u.from,u.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=lde(f.content,u.doc.content,u.from,d,h);if(m&&t.input.domChangeCount++,(bm&&t.input.lastIOSEnter>Date.now()-225||Tu)&&i.some(N=>N.nodeType==1&&!ide.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Cd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof bt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let N=X9(t,t.state.doc,u.sel);if(N&&!N.eq(t.state.selection)){let D=t.state.tr.setSelection(N);o&&D.setMeta("composition",o),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof bt&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ea&&of<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let v=u.doc.resolveNoCache(m.start-u.from),b=u.doc.resolveNoCache(m.endB-u.from),x=c.resolve(m.start),C=v.sameParent(b)&&v.parent.inlineContent&&x.end()>=m.endA;if((bm&&t.input.lastIOSEnter>Date.now()-225&&(!C||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!C&&v.pos<u.doc.content.size&&(!v.sameParent(b)||!v.parent.inlineContent)&&v.pos<b.pos&&!/\S/.test(u.doc.textBetween(v.pos,b.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Cd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&sde(c,m.start,m.endA,v,b)&&t.someProp("handleKeyDown",N=>N(t,Cd(8,"Backspace")))){Tu&&Ci&&t.domObserver.suppressSelectionUpdates();return}Ci&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Tu&&!C&&v.start()!=b.start()&&b.parentOffset==0&&v.depth==b.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,b=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Cd(13,"Enter"))})},20));let w=m.start,A=m.endA,E=N=>{let D=N||t.state.tr.replace(w,A,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let M=X9(t,D.doc,u.sel);M&&!(Ci&&t.composing&&M.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==w||M.head==D.mapping.map(A)-1)||ea&&M.empty&&M.head==w)&&D.setSelection(M)}return o&&D.setMeta("composition",o),D.scrollIntoView()},T;if(C)if(v.pos==b.pos){ea&&of<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ru(t),20));let N=E(t.state.tr.delete(w,A)),D=c.resolve(m.start).marksAcross(c.resolve(m.endA));D&&N.ensureMarks(D),t.dispatch(N)}else if(m.endA==m.endB&&(T=ade(v.parent.content.cut(v.parentOffset,b.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let N=E(t.state.tr);T.type=="add"?N.addMark(w,A,T.mark):N.removeMark(w,A,T.mark),t.dispatch(N)}else if(v.parent.child(v.index()).isText&&v.index()==b.index()-(b.textOffset?0:1)){let N=v.parent.textBetween(v.parentOffset,b.parentOffset),D=()=>E(t.state.tr.insertText(N,w,A));t.someProp("handleTextInput",M=>M(t,w,A,N,D))||t.dispatch(D())}else t.dispatch(E());else t.dispatch(E())}function X9(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:YM(t,e.resolve(n.anchor),e.resolve(n.head))}function ade(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,a,s,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)s=i[0],a="add",l=c=>c.mark(s.addToSet(c.marks));else if(i.length==0&&o.length==1)s=o[0],a="remove",l=c=>c.mark(s.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(Ue.from(u).eq(t))return{mark:s,type:a}}function sde(t,e,n,r,i){if(n-e<=i.pos-r.pos||uN(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let s=o.nodeAfter;return s!=null&&n==e+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=t.resolve(uN(o,!0,!0));return!a.parent.isTextblock||a.pos>n||uN(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function uN(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function lde(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a,b:s}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(a,s));r-=a+l-o}if(a<o&&t.size<e.size){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<e.size&&Z9(e.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}else if(s<o){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<t.size&&Z9(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}return{start:o,endA:a,endB:s}}function Z9(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class cG{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Tfe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(n7),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=e7(this),J9(this),this.nodeViews=t7(this),this.docView=O9(this.state.doc,Q9(this),lN(this),this.dom,this),this.domObserver=new Qfe(this,(r,i,o,a)=>ode(this,r,i,o,a)),this.domObserver.start(),Afe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&AD(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(n7),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(rG(this),a=!0),this.state=e;let s=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=t7(this);cde(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&AD(this),this.editable=e7(this),J9(this);let l=lN(this),u=Q9(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(a=!0);let d=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&zce(this);if(a){this.domObserver.stop();let h=f&&(ea||Ci)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&ude(i.selection,e.selection);if(f){let m=Ci?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zfe(this)),(o||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=O9(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cfe(this))?Ru(this,h):(jj(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&Uce(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Et){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&A9(this,n.getBoundingClientRect(),e)}else A9(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new oG(e.slice,e.move,i<0?void 0:Et.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let s=this.directPlugins[a].props[e];if(s!=null&&(i=n?n(s):s))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let s=o[a].props[e];if(s!=null&&(i=n?n(s):s))return i}}hasFocus(){if(ea){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Hce(this.dom),Ru(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Yce(this,e)}coordsAtPos(e,n=1){return Fj(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return Qce(this,n||this.state,e)}pasteHTML(e,n){return N1(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return N1(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return WM(this,e)}destroy(){this.docView&&(Nfe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lN(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,kce())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Mfe(this,e)}domSelectionRange(){let e=this.domSelection();return e?ro&&this.root.nodeType===11&&Bce(this.dom.ownerDocument)==this.dom&&ede(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}cG.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Q9(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Un.node(0,t.state.doc.content.size,e)]}function J9(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Un.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function e7(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ude(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function t7(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function cde(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function n7(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var hf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fde=typeof navigator<"u"&&/Mac/.test(navigator.platform),dde=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $i=0;$i<10;$i++)hf[48+$i]=hf[96+$i]=String($i);for(var $i=1;$i<=24;$i++)hf[$i+111]="F"+$i;for(var $i=65;$i<=90;$i++)hf[$i]=String.fromCharCode($i+32),Cx[$i]=String.fromCharCode($i);for(var cN in hf)Cx.hasOwnProperty(cN)||(Cx[cN]=hf[cN]);function hde(t){var e=fde&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dde&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cx:hf)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const pde=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),mde=typeof navigator<"u"&&/Win/.test(navigator.platform);function gde(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<e.length-1;s++){let l=e[s];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))pde?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function vde(t){let e=Object.create(null);for(let n in t)e[gde(n)]=t[n];return e}function fN(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function fG(t){return new Wt({props:{handleKeyDown:ek(t)}})}function ek(t){let e=vde(t);return function(n,r){let i=hde(r),o,a=e[fN(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let s=e[fN(i,r,!1)];if(s&&s(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(mde&&r.ctrlKey&&r.altKey)&&(o=hf[r.keyCode])&&o!=i){let s=e[fN(o,r)];if(s&&s(n.state,n.dispatch,n))return!0}}return!1}}var bde=Object.defineProperty,tk=(t,e)=>{for(var n in e)bde(t,n,{get:e[n],enumerable:!0})};function OE(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var IE=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,s])=>[a,(...u)=>{const c=s(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a=[],s=!!t,l=t||i.tr,u=()=>(!s&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),a.every(f=>f===!0)),c={...Object.fromEntries(Object.entries(n).map(([f,d])=>[f,(...m)=>{const v=this.buildProps(l,e),b=d(...m)(v);return a.push(b),c}])),run:u};return c}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([s,l])=>[s,(...u)=>l(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a={tr:t,editor:r,view:o,state:OE({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([s,l])=>[s,(...u)=>l(...u)(a)]))}};return a}},dG={};tk(dG,{blur:()=>yde,clearContent:()=>xde,clearNodes:()=>wde,command:()=>Ede,createParagraphNear:()=>Cde,cut:()=>Sde,deleteCurrentNode:()=>Tde,deleteNode:()=>Ade,deleteRange:()=>Nde,deleteSelection:()=>Dde,enter:()=>Mde,exitCode:()=>kde,extendMarkRange:()=>_de,first:()=>Ode,focus:()=>Rde,forEach:()=>Bde,insertContent:()=>Lde,insertContentAt:()=>Pde,joinBackward:()=>Ude,joinDown:()=>zde,joinForward:()=>Hde,joinItemBackward:()=>Vde,joinItemForward:()=>qde,joinTextblockBackward:()=>jde,joinTextblockForward:()=>Gde,joinUp:()=>$de,keyboardShortcut:()=>Wde,lift:()=>Kde,liftEmptyBlock:()=>Xde,liftListItem:()=>Zde,newlineInCode:()=>Qde,resetAttributes:()=>Jde,scrollIntoView:()=>ehe,selectAll:()=>the,selectNodeBackward:()=>nhe,selectNodeForward:()=>rhe,selectParentNode:()=>ihe,selectTextblockEnd:()=>ohe,selectTextblockStart:()=>ahe,setContent:()=>she,setMark:()=>Che,setMeta:()=>She,setNode:()=>The,setNodeSelection:()=>Ahe,setTextDirection:()=>Nhe,setTextSelection:()=>Dhe,sinkListItem:()=>Mhe,splitBlock:()=>khe,splitListItem:()=>_he,toggleList:()=>Ohe,toggleMark:()=>Ihe,toggleNode:()=>Rhe,toggleWrap:()=>Bhe,undoInputRule:()=>Lhe,unsetAllMarks:()=>Fhe,unsetMark:()=>Phe,unsetTextDirection:()=>$he,updateAttributes:()=>zhe,wrapIn:()=>Uhe,wrapInList:()=>Hhe});var yde=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),xde=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),wde=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:a})=>{t.doc.nodesBetween(o.pos,a.pos,(s,l)=>{if(s.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+s.nodeSize)),h=f.blockRange(d);if(!h)return;const m=qm(h);if(s.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,v)}(m||m===0)&&e.lift(h,m)})}),!0},Ede=t=>e=>t(e),Cde=()=>({state:t,dispatch:e})=>Aj(t,e),Sde=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,o.content),r.setSelection(new bt(r.doc.resolve(Math.max(a-1,0)))),!0},Tde=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const s=i.before(o),l=i.after(o);t.delete(s,l).scrollIntoView()}return!0}return!1};function Ni(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Ade=t=>({tr:e,state:n,dispatch:r})=>{const i=Ni(t,n.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const l=o.before(a),u=o.after(a);e.delete(l,u).scrollIntoView()}return!0}return!1},Nde=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Dde=()=>({state:t,dispatch:e})=>zM(t,e),Mde=()=>({commands:t})=>t.keyboardShortcut("Enter"),kde=()=>({state:t,dispatch:e})=>mce(t,e);function nk(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Sx(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:nk(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function hG(t,e,n={}){return t.find(r=>r.type===e&&Sx(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function r7(t,e,n={}){return!!hG(t,e,n)}function RE(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!hG([...i.node.marks],e,n)))return;let a=i.index,s=t.start()+i.offset,l=a+1,u=s+i.node.nodeSize;for(;a>0&&r7([...t.parent.child(a-1).marks],e,n);)a-=1,s-=t.parent.child(a).nodeSize;for(;l<t.parent.childCount&&r7([...t.parent.child(l).marks],e,n);)u+=t.parent.child(l).nodeSize,l+=1;return{from:s,to:u}}function Ju(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var _de=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ju(t,r.schema),{doc:a,selection:s}=n,{$from:l,from:u,to:c}=s;if(i){const f=RE(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=bt.create(a,f.from,f.to);n.setSelection(d)}}return!0},Ode=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function pG(t){return t instanceof bt}function Au(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function mG(t,e=null){if(!e)return null;const n=Bt.atStart(t),r=Bt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?bt.create(t,Au(0,i,o),Au(t.content.size,i,o)):bt.create(t,Au(e,i,o),Au(e,i,o))}function Ide(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Rde=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{(rk()||Ide())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!pG(n.state.selection))return a(),!0;const s=mG(i.doc,t)||n.state.selection,l=n.state.selection.eq(s);return o&&(l||i.setSelection(s),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},Bde=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Lde=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),gG=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&gG(r)}return t};function vy(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return gG(n)}function M1(t,e,n){if(t instanceof Ou||t instanceof Ue)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ue.fromArray(t.map(s=>e.nodeFromJSON(s)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),M1("",e,n)}if(i){if(n.errorOnInvalidContent){let a=!1,s="";const l=new Qq({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(a=!0,s=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?$s.fromSchema(l).parseSlice(vy(t),n.parseOptions):$s.fromSchema(l).parse(vy(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const o=$s.fromSchema(e);return n.slice?o.parseSlice(vy(t),n.parseOptions).content:o.parse(vy(t),n.parseOptions)}return M1("",e,n)}function vG(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof ri||i instanceof Yr))return;const o=t.mapping.maps[r];let a=0;o.forEach((s,l,u,c)=>{a===0&&(a=c)}),t.setSelection(Bt.near(t.doc.resolve(a),n))}var Fde=t=>!("type"in t),Pde=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var a;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let s;const l=b=>{o.emit("contentError",{editor:o,error:b,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{M1(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(b){l(b)}try{s=M1(e,o.schema,{parseOptions:u,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(b){return l(b),!1}let{from:c,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,h=!0;if((Fde(s)?s:[s]).forEach(b=>{b.check(),d=d?b.isText&&b.marks.length===0:!1,h=h?b.isBlock:!1}),c===f&&h){const{parent:b}=r.doc.resolve(c);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(c-=1,f+=1)}let v;if(d){if(Array.isArray(e))v=e.map(b=>b.text||"").join("");else if(e instanceof Ue){let b="";e.forEach(x=>{x.text&&(b+=x.text)}),v=b}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,c,f)}else{v=s;const b=r.doc.resolve(c),x=b.node(),C=b.parentOffset===0,w=x.isText||x.isTextblock,A=x.content.size>0;C&&w&&A&&(c=Math.max(0,c-1)),r.replaceWith(c,f,v)}n.updateSelection&&vG(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:v})}return!0},$de=()=>({state:t,dispatch:e})=>dce(t,e),zde=()=>({state:t,dispatch:e})=>hce(t,e),Ude=()=>({state:t,dispatch:e})=>yj(t,e),Hde=()=>({state:t,dispatch:e})=>Cj(t,e),Vde=()=>({state:t,dispatch:e,tr:n})=>{try{const r=AE(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qde=()=>({state:t,dispatch:e,tr:n})=>{try{const r=AE(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},jde=()=>({state:t,dispatch:e})=>cce(t,e),Gde=()=>({state:t,dispatch:e})=>fce(t,e);function bG(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Yde(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<e.length-1;s+=1){const l=e[s];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))rk()||bG()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Wde=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Yde(t).split(/-(?!$)/),a=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),s=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,s))});return l?.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function k1(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,a=e?Ni(e,t.schema):null,s=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),m=Math.min(i,d+f.nodeSize);s.push({node:f,from:h,to:m})});const l=i-r,u=s.filter(f=>a?a.name===f.node.type.name:!0).filter(f=>Sx(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}var Kde=(t,e={})=>({state:n,dispatch:r})=>{const i=Ni(t,n.schema);return k1(n,i,e)?pce(n,r):!1},Xde=()=>({state:t,dispatch:e})=>Nj(t,e),Zde=t=>({state:e,dispatch:n})=>{const r=Ni(t,e.schema);return Ace(r)(e,n)},Qde=()=>({state:t,dispatch:e})=>Tj(t,e);function BE(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function i7(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Jde=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=BE(typeof t=="string"?t:t.name,r.schema);if(!s)return!1;s==="node"&&(o=Ni(t,r.schema)),s==="mark"&&(a=Ju(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(c,f)=>{o&&o===c.type&&(l=!0,i&&n.setNodeMarkup(f,void 0,i7(c.attrs,e))),a&&c.marks.length&&c.marks.forEach(d=>{a===d.type&&(l=!0,i&&n.addMark(f,f+c.nodeSize,a.create(i7(d.attrs,e))))})})}),l},ehe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),the=()=>({tr:t,dispatch:e})=>{if(e){const n=new Jo(t.doc);t.setSelection(n)}return!0},nhe=()=>({state:t,dispatch:e})=>wj(t,e),rhe=()=>({state:t,dispatch:e})=>Sj(t,e),ihe=()=>({state:t,dispatch:e})=>bce(t,e),ohe=()=>({state:t,dispatch:e})=>wce(t,e),ahe=()=>({state:t,dispatch:e})=>xce(t,e);function Tx(t,e,n={},r={}){return M1(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var she=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:a,commands:s})=>{const{doc:l}=o;if(r.preserveWhitespace!=="full"){const u=Tx(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&o.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0}return a&&o.setMeta("preventUpdate",!n),s.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function yG(t,e){const n=Ju(e,t.schema),{from:r,to:i,empty:o}=t.selection,a=[];o?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{a.push(...l.marks)});const s=a.find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function LE(t,e){const n=new PM(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function lhe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function o7(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function xG(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function uhe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function FE(t){return e=>uhe(e.$from,t)}function Nt(t,e,n){return t.config[e]===void 0&&t.parent?Nt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Nt(t.parent,e,n):null}):t.config[e]}function ik(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Nt(e,"addExtensions",n);return r?[e,...ik(r())]:e}).flat(10)}function ok(t,e){const n=Aa.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function wG(t){return typeof t=="function"}function sr(t,e=void 0,...n){return wG(t)?e?t.bind(e)(...n):t(...n):t}function che(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ym(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function EG(t){const e=[],{nodeExtensions:n,markExtensions:r}=ym(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage,extensions:i},l=Nt(a,"addGlobalAttributes",s);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...o,...h}})})})})}),i.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage},l=Nt(a,"addAttributes",s);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{const d={...o,...f};typeof d?.default=="function"&&(d.default=d.default()),d?.isRequired&&d?.default===void 0&&delete d.default,e.push({type:a.name,name:c,attribute:d})})}),e}function Na(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const s=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],u=s.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else if(i==="style"){const s=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[f,d]=c.split(":").map(h=>h.trim());u.set(f,d)}),s.forEach(c=>{const[f,d]=c.split(":").map(h=>h.trim());u.set(f,d)}),r[i]=Array.from(u.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else r[i]=o}),r},{})}function Ax(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Na(n,r),{})}function fhe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function a7(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,a)=>{const s=a.attribute.parseHTML?a.attribute.parseHTML(n):fhe(n.getAttribute(a.name));return s==null?o:{...o,[a.name]:s}},{});return{...r,...i}}}}function s7(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&che(n)?!1:n!=null))}function l7(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function CG(t,e){var n;const r=EG(t),{nodeExtensions:i,markExtensions:o}=ym(t),a=(n=i.find(u=>Nt(u,"topNode")))==null?void 0:n.name,s=Object.fromEntries(i.map(u=>{const c=r.filter(x=>x.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((x,C)=>{const w=Nt(C,"extendNodeSchema",f);return{...x,...w?w(u):{}}},{}),h=s7({...d,content:sr(Nt(u,"content",f)),marks:sr(Nt(u,"marks",f)),group:sr(Nt(u,"group",f)),inline:sr(Nt(u,"inline",f)),atom:sr(Nt(u,"atom",f)),selectable:sr(Nt(u,"selectable",f)),draggable:sr(Nt(u,"draggable",f)),code:sr(Nt(u,"code",f)),whitespace:sr(Nt(u,"whitespace",f)),linebreakReplacement:sr(Nt(u,"linebreakReplacement",f)),defining:sr(Nt(u,"defining",f)),isolating:sr(Nt(u,"isolating",f)),attrs:Object.fromEntries(c.map(l7))}),m=sr(Nt(u,"parseHTML",f));m&&(h.parseDOM=m.map(x=>a7(x,c)));const v=Nt(u,"renderHTML",f);v&&(h.toDOM=x=>v({node:x,HTMLAttributes:Ax(x,c)}));const b=Nt(u,"renderText",f);return b&&(h.toText=b),[u.name,h]})),l=Object.fromEntries(o.map(u=>{const c=r.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((b,x)=>{const C=Nt(x,"extendMarkSchema",f);return{...b,...C?C(u):{}}},{}),h=s7({...d,inclusive:sr(Nt(u,"inclusive",f)),excludes:sr(Nt(u,"excludes",f)),group:sr(Nt(u,"group",f)),spanning:sr(Nt(u,"spanning",f)),code:sr(Nt(u,"code",f)),attrs:Object.fromEntries(c.map(l7))}),m=sr(Nt(u,"parseHTML",f));m&&(h.parseDOM=m.map(b=>a7(b,c)));const v=Nt(u,"renderHTML",f);return v&&(h.toDOM=b=>v({mark:b,HTMLAttributes:Ax(b,c)})),[u.name,h]}));return new Qq({topNode:a,nodes:s,marks:l})}function dhe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function ak(t){return t.sort((n,r)=>{const i=Nt(n,"priority")||100,o=Nt(r,"priority")||100;return i>o?-1:i<o?1:0})}function sk(t){const e=ak(ik(t)),n=dhe(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function hhe(t,e){const n=sk(t);return CG(n,e)}function SG(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:a={}}=n||{};let s="";return t.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(s+=o);const h=a?.[l.type.name];if(h)return c&&(s+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(s+=(d=l?.text)==null?void 0:d.slice(Math.max(r,u)-u,i-u))}),s}function phe(t,e){const n={from:0,to:t.content.size};return SG(t,n,e)}function TG(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function mhe(t,e){const n=Ni(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,s=>{o.push(s)});const a=o.reverse().find(s=>s.type.name===n.name);return a?{...a.attrs}:{}}function AG(t,e){const n=BE(typeof e=="string"?e:e.name,t.schema);return n==="node"?mhe(t,e):n==="mark"?yG(t,e):{}}function ghe(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function vhe(t){const e=ghe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,a)=>a!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function lk(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((s,l)=>{a.push({from:s,to:l})});else{const{from:s,to:l}=n[o];if(s===void 0||l===void 0)return;a.push({from:s,to:l})}a.forEach(({from:s,to:l})=>{const u=e.slice(o).map(s,-1),c=e.slice(o).map(l),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),vhe(r)}function uk(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),a=RE(o,i.type);a&&r.push({mark:i,...a})}):n.nodesBetween(t,e,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(a=>({from:o,to:o+i.nodeSize,mark:a})))}),r}function dN(t,e){return e.nodes[t]||e.marks[t]||null}function N2(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var bhe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,a,s)=>{var l,u;const c=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:o,parent:a,index:s}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-o))}),n};function ND(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ju(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Sx(f.attrs,n,{strict:!1}));let a=0;const s=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,m=d.pos;t.doc.nodesBetween(h,m,(v,b)=>{if(!v.isText&&!v.marks.length)return;const x=Math.max(h,b),C=Math.min(m,b+v.nodeSize),w=C-x;a+=w,s.push(...v.marks.map(A=>({mark:A,from:x,to:C})))})}),a===0)return!1;const l=s.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Sx(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=s.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=a}function yhe(t,e,n={}){if(!e)return k1(t,null,n)||ND(t,null,n);const r=BE(e,t.schema);return r==="node"?k1(t,e,n):r==="mark"?ND(t,e,n):!1}function u7(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function c7(t,e){const{nodeExtensions:n}=ym(e),r=n.find(a=>a.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=sr(Nt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function PE(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(PE(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function NG(t){return t instanceof Et}var DG=class MG{constructor(e){this.position=e}static fromJSON(e){return new MG(e.position)}toJSON(){return{position:this.position}}};function xhe(t,e){const n=e.mapping.mapResult(t.position);return{position:new DG(n.pos),mapResult:n}}function whe(t){return new DG(t)}function ck(t,e,n){const i=t.state.doc.content.size,o=Au(e,0,i),a=Au(n,0,i),s=t.coordsAtPos(o),l=t.coordsAtPos(a,-1),u=Math.min(s.top,l.top),c=Math.max(s.bottom,l.bottom),f=Math.min(s.left,l.left),d=Math.max(s.right,l.right),h=d-f,m=c-u,x={top:u,bottom:c,left:f,right:d,width:h,height:m,x:f,y:u};return{...x,toJSON:()=>x}}function Ehe(t,e,n){var r;const{selection:i}=e;let o=null;if(pG(i)&&(o=i.$cursor),o){const s=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(s)||!s.some(u=>u.type.excludes(n)))}const{ranges:a}=i;return a.some(({$from:s,$to:l})=>{let u=s.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(s.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(v=>v.type.excludes(n));u=h&&m}return!u}),u})}var Che=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:a,ranges:s}=o,l=Ju(t,r.schema);if(i)if(a){const u=yG(r,l);n.addStoredMark(l.create({...u,...e}))}else s.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const m=Math.max(h,c),v=Math.min(h+d.nodeSize,f);d.marks.find(x=>x.type===l)?d.marks.forEach(x=>{l===x.type&&n.addMark(m,v,l.create({...x.attrs,...e}))}):n.addMark(m,v,l.create(e))})});return Ehe(r,n,l)},She=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),The=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Ni(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:s})=>C9(o,{...a,...e})(n)?!0:s.clearNodes()).command(({state:s})=>C9(o,{...a,...e})(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ahe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Au(t,0,r.content.size),o=Et.create(r,i);e.setSelection(o)}return!0},Nhe=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let a,s;return typeof e=="number"?(a=e,s=e):e&&"from"in e&&"to"in e?(a=e.from,s=e.to):(a=o.from,s=o.to),i&&n.doc.nodesBetween(a,s,(l,u)=>{l.isText||n.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},Dhe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,a=bt.atStart(r).from,s=bt.atEnd(r).to,l=Au(i,a,s),u=Au(o,a,s),c=bt.create(r,l,u);e.setSelection(c)}return!0},Mhe=t=>({state:e,dispatch:n})=>{const r=Ni(t,e.schema);return Mce(r)(e,n)};function f7(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var khe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:a}=e,{$from:s,$to:l}=o,u=i.extensionManager.attributes,c=N2(u,s.node().type.name,s.node().attrs);if(o instanceof Et&&o.node.isBlock)return!s.parentOffset||!Iu(a,s.pos)?!1:(r&&(t&&f7(n,i.extensionManager.splittableMarks),e.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,d=s.depth===0?void 0:lhe(s.node(-1).contentMatchAt(s.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,m=Iu(e.doc,e.mapping.map(s.pos),1,h);if(!h&&!m&&Iu(e.doc,e.mapping.map(s.pos),1,d?[{type:d}]:void 0)&&(m=!0,h=d?[{type:d,attrs:c}]:void 0),r){if(m&&(o instanceof bt&&e.deleteSelection(),e.split(e.mapping.map(s.pos),1,h),d&&!f&&!s.parentOffset&&s.parent.type!==d)){const v=e.mapping.map(s.before()),b=e.doc.resolve(v);s.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(s.before()),d)}t&&f7(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},_he=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var a;const s=Ni(t,r.schema),{$from:l,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const f=l.node(-1);if(f.type!==s)return!1;const d=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==s||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Ue.empty;const C=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-C;D>=l.depth-3;D-=1)x=Ue.from(l.node(D).copy(x));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,A={...N2(d,l.node().type.name,l.node().attrs),...e},E=((a=s.contentMatch.defaultType)==null?void 0:a.createAndFill(A))||void 0;x=x.append(Ue.from(s.createAndFill(null,E)||void 0));const T=l.before(l.depth-(C-1));n.replace(T,l.after(-w),new ot(x,4-C,0));let N=-1;n.doc.nodesBetween(T,n.doc.content.size,(D,M)=>{if(N>-1)return!1;D.isTextblock&&D.content.size===0&&(N=M+1)}),N>-1&&n.setSelection(bt.near(n.doc.resolve(N))),n.scrollIntoView()}return!0}const h=u.pos===l.end()?f.contentMatchAt(0).defaultType:null,m={...N2(d,f.type.name,f.attrs),...e},v={...N2(d,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,u.pos);const b=h?[{type:s,attrs:m},{type:h,attrs:v}]:[{type:s,attrs:m}];if(!Iu(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:C}=r,{splittableMarks:w}=o.extensionManager,A=C||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,b).scrollIntoView(),!A||!i)return!0;const E=A.filter(T=>w.includes(T.type.name));n.ensureMarks(E)}return!0},hN=(t,e)=>{const n=FE(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&ph(t.doc,n.pos)&&t.join(n.pos),!0},pN=(t,e)=>{const n=FE(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&ph(t.doc,r)&&t.join(r),!0},Ohe=(t,e,n,r={})=>({editor:i,tr:o,state:a,dispatch:s,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=Ni(t,a.schema),m=Ni(e,a.schema),{selection:v,storedMarks:b}=a,{$from:x,$to:C}=v,w=x.blockRange(C),A=b||v.$to.parentOffset&&v.$from.marks();if(!w)return!1;const E=FE(T=>c7(T.type.name,f))(v);if(w.depth>=1&&E&&w.depth-E.depth<=1){if(E.node.type===h)return u.liftListItem(m);if(c7(E.node.type.name,f)&&h.validContent(E.node.content)&&s)return l().command(()=>(o.setNodeMarkup(E.pos,h),!0)).command(()=>hN(o,h)).command(()=>pN(o,h)).run()}return!n||!A||!s?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>hN(o,h)).command(()=>pN(o,h)).run():l().command(()=>{const T=c().wrapInList(h,r),N=A.filter(D=>d.includes(D.type.name));return o.ensureMarks(N),T?!0:u.clearNodes()}).wrapInList(h,r).command(()=>hN(o,h)).command(()=>pN(o,h)).run()},Ihe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,a=Ju(t,r.schema);return ND(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,e)},Rhe=(t,e,n={})=>({state:r,commands:i})=>{const o=Ni(t,r.schema),a=Ni(e,r.schema),s=k1(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),s?i.setNode(a,l):i.setNode(o,{...l,...n})},Bhe=(t,e={})=>({state:n,commands:r})=>{const i=Ni(t,n.schema);return k1(n,i,e)?r.lift(i):r.wrapIn(i,e)},Lhe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const a=t.tr,s=o.transform;for(let l=s.steps.length-1;l>=0;l-=1)a.step(s.steps[l].invert(s.docs[l]));if(o.text){const l=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else a.delete(o.from,o.to)}return!0}}return!1},Fhe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Phe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:s}=n,l=Ju(t,r.schema),{$from:u,empty:c,ranges:f}=s;if(!i)return!0;if(c&&a){let{from:d,to:h}=s;const m=(o=u.marks().find(b=>b.type===l))==null?void 0:o.attrs,v=RE(u,l,m);v&&(d=v.from,h=v.to),n.removeMark(d,h,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},$he=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=i.from,a=i.to),r&&e.doc.nodesBetween(o,a,(s,l)=>{if(s.isText)return;const u={...s.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},zhe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=BE(typeof t=="string"?t:t.name,r.schema);if(!s)return!1;s==="node"&&(o=Ni(t,r.schema)),s==="mark"&&(a=Ju(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;let d,h,m,v;n.selection.empty?r.doc.nodesBetween(c,f,(b,x)=>{o&&o===b.type&&(l=!0,m=Math.max(x,c),v=Math.min(x+b.nodeSize,f),d=x,h=b)}):r.doc.nodesBetween(c,f,(b,x)=>{x<c&&o&&o===b.type&&(l=!0,m=Math.max(x,c),v=Math.min(x+b.nodeSize,f),d=x,h=b),x>=c&&x<=f&&(o&&o===b.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...b.attrs,...e})),a&&b.marks.length&&b.marks.forEach(C=>{if(a===C.type&&(l=!0,i)){const w=Math.max(x,c),A=Math.min(x+b.nodeSize,f);n.addMark(w,A,a.create({...C.attrs,...e}))}}))}),h&&(d!==void 0&&i&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),a&&h.marks.length&&h.marks.forEach(b=>{a===b.type&&i&&n.addMark(m,v,a.create({...b.attrs,...e}))}))}),l},Uhe=(t,e={})=>({state:n,dispatch:r})=>{const i=Ni(t,n.schema);return Ece(i,e)(n,r)},Hhe=(t,e={})=>({state:n,dispatch:r})=>{const i=Ni(t,n.schema);return Cce(i,e)(n,r)},Vhe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},qhe=class{constructor(e){var n;this.find=e.find,this.handler=e.handler,this.undoable=(n=e.undoable)!=null?n:!0}},jhe=(t,e)=>{if(nk(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function by(t){var e;const{editor:n,from:r,to:i,text:o,rules:a,plugin:s}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=bhe(u)+o;return a.forEach(d=>{if(c)return;const h=jhe(f,d.find);if(!h)return;const m=l.state.tr,v=OE({state:l.state,transaction:m}),b={from:r-(h[0].length-o.length),to:i},{commands:x,chain:C,can:w}=new IE({editor:n,state:v});d.handler({state:v,range:b,match:h,commands:x,chain:C,can:w})===null||!m.steps.length||(d.undoable&&m.setMeta(s,{transform:m,from:r,to:i,text:o}),l.dispatch(m),c=!0)}),c}function Ghe(t){const{editor:e,rules:n}=t,r=new Wt({state:{init(){return null},apply(i,o,a){const s=i.getMeta(r);if(s)return s;const l=i.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=ok(Ue.from(c),a.schema);const{from:f}=l,d=f+c.length;by({editor:e,from:f,to:d,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,a,s){return by({editor:e,from:o,to:a,text:s,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&by({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?by({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Yhe(t){return Object.prototype.toString.call(t).slice(8,-1)}function yy(t){return Yhe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function kG(t,e){const n={...t};return yy(t)&&yy(e)&&Object.keys(e).forEach(r=>{yy(e[r])&&yy(t[r])?n[r]=kG(t[r],e[r]):n[r]=e[r]}),n}var fk=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...sr(Nt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...sr(Nt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>kG(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ys=class _G extends fk{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new _G(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(u=>u?.type.name===n.name))return!1;const l=a.find(u=>u?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Whe(t){return typeof t=="number"}var Khe=class{constructor(t){this.find=t.find,this.handler=t.handler}},Xhe=(t,e,n)=>{if(nk(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function Zhe(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:a,dropEvent:s}=t,{commands:l,chain:u,can:c}=new IE({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{var v,b,x,C,w;if((b=(v=h.type)==null?void 0:v.spec)!=null&&b.code||!(h.isText||h.isTextblock||h.isInline))return;const A=(w=(C=(x=h.content)==null?void 0:x.size)!=null?C:h.nodeSize)!=null?w:0,E=Math.max(r,m),T=Math.min(i,m+A);if(E>=T)return;const N=h.isText?h.text||"":h.textBetween(E-m,T-m,void 0,"");Xhe(N,o.find,a).forEach(M=>{if(M.index===void 0)return;const k=E+M.index+1,B=k+M[0].length,P={from:n.tr.mapping.map(k),to:n.tr.mapping.map(B)},$=o.handler({state:n,range:P,match:M,commands:l,chain:u,can:c,pasteEvent:a,dropEvent:s});f.push($)})}),f.every(h=>h!==null)}var xy=null,Qhe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function Jhe(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,s;try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}const l=({state:c,from:f,to:d,rule:h,pasteEvt:m})=>{const v=c.tr,b=OE({state:c,transaction:v});if(!(!Zhe({editor:e,state:b,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:m,dropEvent:s})||!v.steps.length)){try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(c=>new Wt({view(f){const d=m=>{var v;r=(v=f.dom.parentElement)!=null&&v.contains(m.target)?f.dom.parentElement:null,r&&(xy=e)},h=()=>{xy&&(xy=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(o=r===f.dom.parentElement,s=d,!o){const h=xy;h?.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,d)=>{var h;const m=(h=d.clipboardData)==null?void 0:h.getData("text/html");return a=d,i=!!m?.includes("data-pm-slice"),!1}}},appendTransaction:(f,d,h)=>{const m=f[0],v=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!o,x=m.getMeta("applyPasteRules"),C=!!x;if(!v&&!b&&!C)return;if(C){let{text:E}=x;typeof E=="string"?E=E:E=ok(Ue.from(E),h.schema);const{from:T}=x,N=T+E.length,D=Qhe(E);return l({rule:c,state:h,from:T,to:{b:N},pasteEvt:D})}const w=d.doc.content.findDiffStart(h.doc.content),A=d.doc.content.findDiffEnd(h.doc.content);if(!(!Whe(w)||!A||w===A.b))return l({rule:c,state:h,from:w,to:A,pasteEvt:a})}}))}var $E=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=sk(t),this.schema=CG(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:dN(e.name,this.schema)},r=Nt(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return ak([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:dN(r.name,this.schema)},o=[],a=Nt(r,"addKeyboardShortcuts",i);let s={};if(r.type==="mark"&&Nt(r,"exitable",i)&&(s.ArrowRight=()=>ys.handleExit({editor:t,mark:r})),a){const d=Object.fromEntries(Object.entries(a()).map(([h,m])=>[h,()=>m({editor:t})]));s={...s,...d}}const l=fG(s);o.push(l);const u=Nt(r,"addInputRules",i);if(u7(r,t.options.enableInputRules)&&u){const d=u();if(d&&d.length){const h=Ghe({editor:t,rules:d}),m=Array.isArray(h)?h:[h];o.push(...m)}}const c=Nt(r,"addPasteRules",i);if(u7(r,t.options.enablePasteRules)&&c){const d=c();if(d&&d.length){const h=Jhe({editor:t,rules:d});o.push(...h)}}const f=Nt(r,"addProseMirrorPlugins",i);if(f){const d=f();o.push(...d)}return o})}get attributes(){return EG(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ym(this.extensions);return Object.fromEntries(e.filter(n=>!!Nt(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ni(n.name,this.schema)},o=Nt(n,"addNodeView",i);if(!o)return[];const a=o();if(!a)return[];const s=(l,u,c,f,d)=>{const h=Ax(l,r);return a({node:l,view:u,getPos:c,decorations:f,innerDecorations:d,editor:t,extension:n,HTMLAttributes:h})};return[n.name,s]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=ym(this.extensions);return Object.fromEntries(e.filter(n=>!!Nt(n,"addMarkView")).map(n=>{const r=this.attributes.filter(s=>s.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ju(n.name,this.schema)},o=Nt(n,"addMarkView",i);if(!o)return[];const a=(s,l,u)=>{const c=Ax(s,r);return o()({mark:s,view:l,inline:u,editor:t,extension:n,HTMLAttributes:c,updateAttributes:f=>{dpe(s,t,f)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:dN(e.name,this.schema)};e.type==="mark"&&((n=sr(Nt(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Nt(e,"onBeforeCreate",r),o=Nt(e,"onCreate",r),a=Nt(e,"onUpdate",r),s=Nt(e,"onSelectionUpdate",r),l=Nt(e,"onTransaction",r),u=Nt(e,"onFocus",r),c=Nt(e,"onBlur",r),f=Nt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),a&&this.editor.on("update",a),s&&this.editor.on("selectionUpdate",s),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}};$E.resolve=sk;$E.sort=ak;$E.flatten=ik;var _p={};tk(_p,{ClipboardTextSerializer:()=>IG,Commands:()=>RG,Delete:()=>BG,Drop:()=>LG,Editable:()=>FG,FocusEvents:()=>$G,Keymap:()=>zG,Paste:()=>UG,Tabindex:()=>HG,TextDirection:()=>VG,focusEventsPluginKey:()=>PG});var Gn=class OG extends fk{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new OG(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},IG=Gn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wt({key:new gn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,a=Math.min(...o.map(c=>c.$from.pos)),s=Math.max(...o.map(c=>c.$to.pos)),l=TG(n);return SG(r,{from:a,to:s},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),RG=Gn.create({name:"commands",addCommands(){return{...dG}}}),BG=Gn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var a,s,l,u;if((u=(l=(s=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:s.filterTransaction)==null?void 0:l.call(s,t))!=null?u:t.getMeta("y-sync$"))return;const c=LE(t.before,[t,...e]);lk(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(m,v)=>{const b=v+m.nodeSize-2,x=h.oldRange.from<=v&&b<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:v,to:b,newFrom:c.mapping.map(v),newTo:c.mapping.map(b),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:c})})});const d=c.mapping;c.steps.forEach((h,m)=>{var v,b;if(h instanceof Bs){const x=d.slice(m).map(h.from,-1),C=d.slice(m).map(h.to),w=d.invert().map(x,-1),A=d.invert().map(C),E=(v=c.doc.nodeAt(x-1))==null?void 0:v.marks.some(N=>N.eq(h.mark)),T=(b=c.doc.nodeAt(C))==null?void 0:b.marks.some(N=>N.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:w,to:A},newRange:{from:x,to:C},partial:!!(T||E),editor:this.editor,transaction:t,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),LG=Gn.create({name:"drop",addProseMirrorPlugins(){return[new Wt({key:new gn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),FG=Gn.create({name:"editable",addProseMirrorPlugins(){return[new Wt({key:new gn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),PG=new gn("focusEvents"),$G=Gn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Wt({key:PG,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),zG=Gn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:s})=>{const{selection:l,doc:u}=s,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,m=f.parent.isTextblock&&d>0?s.doc.resolve(d-1):f,v=m.parent.type.spec.isolating,b=f.pos-f.parentOffset,x=v&&m.parent.childCount===1?b===f.pos:Bt.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&f.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rk()||bG()?o:i},addProseMirrorPlugins(){return[new Wt({key:new gn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),i=t.some(v=>v.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:a,to:s}=e.selection,l=Bt.atStart(e.doc).from,u=Bt.atEnd(e.doc).to;if(o||!(a===l&&s===u)||!PE(n.doc))return;const d=n.tr,h=OE({state:n,transaction:d}),{commands:m}=new IE({editor:this.editor,state:h});if(m.clearNodes(),!!d.steps.length)return d}})]}}),UG=Gn.create({name:"paste",addProseMirrorPlugins(){return[new Wt({key:new gn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),HG=Gn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wt({key:new gn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),VG=Gn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ym(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Wt({key:new gn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),epe=class Op{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Op(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Op(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Op(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,a=this.pos+r+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const s=this.resolvedPos.doc.resolve(a);if(!i&&s.depth<=this.depth)return;const l=new Op(s,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Op(s,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,a=Object.keys(n);for(let s=0;s<a.length;s+=1){const l=a[s];if(o[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&o.every(l=>n[l]===a.node.attrs[l])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},tpe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function npe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var rpe=class extends Vhe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:i})=>{throw i},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:xhe,createMappablePosition:whe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:i,slice:o,moved:a})=>this.options.onDrop(i,o,a)),this.on("paste",({event:i,slice:o})=>this.options.onPaste(i,o)),this.on("delete",this.options.onDelete);const n=this.createDoc(),r=mG(n,this.options.autofocus);this.editorState=Fp.create({doc:n,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=npe(tpe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,n)=>{if(this.editorView)return this.editorView[n];if(n==="state")return this.editorState;if(n in e)return Reflect.get(e,n);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${n}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,n){const r=wG(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const a=typeof o=="string"?`${o}$`:o.key;r=r.filter(s=>!s.key.startsWith(a))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[FG,IG.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:n.blockSeparator}),RG,$G,zG,HG,LG,UG,BG,VG.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new $E(i,this)}createCommandManager(){this.commandManager=new IE({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=Tx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(n){if(!(n instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(n.message))throw n;this.emit("contentError",{editor:this,error:n,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=Tx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var n;this.editorView=new cG(e,{...this.options.editorProps,attributes:{role:"textbox",...(n=this.options.editorProps)==null?void 0:n.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(c)});return}const{state:n,transactions:r}=this.state.applyTransaction(e),i=!this.state.selection.eq(n.selection),o=r.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),!o)return;this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),l=s?.getMeta("focus"),u=s?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:s}),u&&this.emit("blur",{editor:this,event:u.event,transaction:s}),!(e.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||a.doc.eq(n.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return AG(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return yhe(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ok(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return phe(this.state.doc,{blockSeparator:n,textSerializers:{...TG(this.schema),...r}})}get isEmpty(){return PE(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,n;return(n=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?n:!0}$node(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new epe(n,this)}get $doc(){return this.$pos(0)}};function xm(t){return new qhe({find:t.find,handler:({state:e,range:n,match:r})=>{const i=sr(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],s=r[0];if(a){const l=s.search(/\S/),u=n.from+s.indexOf(a),c=u+a.length;if(uk(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(v=>v===t.type&&v!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+l,u);const d=n.from+l+a.length;o.addMark(n.from+l,d,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}var ipe={};tk(ipe,{createAtomBlockMarkdownSpec:()=>ope,createBlockMarkdownSpec:()=>ape,createInlineMarkdownSpec:()=>upe,parseAttributes:()=>dk,parseIndentedBlocks:()=>cpe,renderNestedMarkdownContent:()=>fpe,serializeAttributes:()=>hk});function dk(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(c=>c.trim().slice(1));e.class=u.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,u,c])=>{var f;const d=parseInt(((f=c.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),h=n[d];h&&(e[u]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(e[c]=!0)}),e}function hk(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function ope(t){const{nodeName:e,name:n,parseAttributes:r=dk,serializeAttributes:i=hk,defaultAttributes:o={},requiredAttributes:a=[],allowedAttributes:s}=t,l=n||e,u=c=>{if(!s)return c;const f={};return s.forEach(d=>{d in c&&(f[d]=c[d])}),f};return{parseMarkdown:(c,f)=>{const d={...o,...c.attributes};return f.createNode(e,d,[])},markdownTokenizer:{name:e,level:"block",start(c){var f;const d=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(f=c.match(d))==null?void 0:f.index;return h!==void 0?h:-1},tokenize(c,f,d){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=c.match(h);if(!m)return;const v=m[1]||"",b=r(v);if(!a.find(C=>!(C in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:c=>{const f=u(c.attrs||{}),d=i(f),h=d?` {${d}}`:"";return`:::${l}${h} :::`}}}function ape(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=dk,serializeAttributes:o=hk,defaultAttributes:a={},content:s="block",allowedAttributes:l}=t,u=n||e,c=f=>{if(!l)return f;const d={};return l.forEach(h=>{h in f&&(d[h]=f[h])}),d};return{parseMarkdown:(f,d)=>{let h;if(r){const v=r(f);h=typeof v=="string"?[{type:"text",text:v}]:v}else s==="block"?h=d.parseChildren(f.tokens||[]):h=d.parseInline(f.tokens||[]);const m={...a,...f.attributes};return d.createNode(e,m,h)},markdownTokenizer:{name:e,level:"block",start(f){var d;const h=new RegExp(`^:::${u}`,"m"),m=(d=f.match(h))==null?void 0:d.index;return m!==void 0?m:-1},tokenize(f,d,h){var m;const v=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(v);if(!b)return;const[x,C=""]=b,w=i(C);let A=1;const E=x.length;let T="";const N=/^:::([\w-]*)(\s.*)?/gm,D=f.slice(E);for(N.lastIndex=0;;){const M=N.exec(D);if(M===null)break;const k=M.index,B=M[1];if(!((m=M[2])!=null&&m.endsWith(":::"))){if(B)A+=1;else if(A-=1,A===0){const P=D.slice(0,k);T=P.trim();const $=f.slice(0,E+k+M[0].length);let z=[];if(T)if(s==="block")for(z=h.blockTokens(P),z.forEach(j=>{j.text&&(!j.tokens||j.tokens.length===0)&&(j.tokens=h.inlineTokens(j.text))});z.length>0;){const j=z[z.length-1];if(j.type==="paragraph"&&(!j.text||j.text.trim()===""))z.pop();else break}else z=h.inlineTokens(T);return{type:e,raw:$,attributes:w,content:T,tokens:z}}}}}},renderMarkdown:(f,d)=>{const h=c(f.attrs||{}),m=o(h),v=m?` {${m}}`:"",b=d.renderChildren(f.content||[],`

`);return`:::${u}${v}

${b}

:::`}}}function spe(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,a]=r;e[i]=o||a,r=n.exec(t)}return e}function lpe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function upe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=spe,serializeAttributes:o=lpe,defaultAttributes:a={},selfClosing:s=!1,allowedAttributes:l}=t,u=n||e,c=d=>{if(!l)return d;const h={};return l.forEach(m=>{const v=typeof m=="string"?m:m.name,b=typeof m=="string"?void 0:m.skipIfDefault;if(v in d){const x=d[v];if(b!==void 0&&x===b)return;h[v]=x}}),h},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(d,h)=>{const m={...a,...d.attributes};if(s)return h.createNode(e,m);const v=r?r(d):d.content||"";return v?h.createNode(e,m,[h.createTextNode(v)]):h.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(d){const h=s?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=d.match(h),v=m?.index;return v!==void 0?v:-1},tokenize(d,h,m){const v=s?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=d.match(v);if(!b)return;let x="",C="";if(s){const[,A]=b;C=A}else{const[,A,E]=b;C=A,x=E||""}const w=i(C.trim());return{type:e,raw:b[0],content:x.trim(),attributes:w}}},renderMarkdown:d=>{let h="";r?h=r(d):d.content&&d.content.length>0&&(h=d.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const m=c(d.attrs||{}),v=o(m),b=v?` ${v}`:"";return s?`[${u}${b}]`:`[${u}${b}]${h}[/${u}]`}}}function cpe(t,e,n){var r,i,o,a;const s=t.split(`
`),l=[];let u="",c=0;const f=e.baseIndentSize||2;for(;c<s.length;){const d=s[c],h=d.match(e.itemPattern);if(!h){if(l.length>0)break;if(d.trim()===""){c+=1,u=`${u}${d}
`;continue}else return}const m=e.extractItemData(h),{indentLevel:v,mainContent:b}=m;u=`${u}${d}
`;const x=[b];for(c+=1;c<s.length;){const E=s[c];if(E.trim()===""){const N=s.slice(c+1).findIndex(k=>k.trim()!=="");if(N===-1)break;if((((i=(r=s[c+1+N].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>v){x.push(E),u=`${u}${E}
`,c+=1;continue}else break}if((((a=(o=E.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:a.length)||0)>v)x.push(E),u=`${u}${E}
`,c+=1;else break}let C;const w=x.slice(1);if(w.length>0){const E=w.map(T=>T.slice(v+f)).join(`
`);E.trim()&&(e.customNestedParser?C=e.customNestedParser(E):C=n.blockTokens(E))}const A=e.createToken(m,C);l.push(A)}if(l.length!==0)return{items:l,raw:u}}function fpe(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...a]=t.content,s=e.renderChildren([o]),l=[`${i}${s}`];return a&&a.length>0&&a.forEach(u=>{const c=e.renderChildren([u]);if(c){const f=c.split(`
`).map(d=>d?e.indent(d):"").join(`
`);l.push(f)}}),l.join(`
`)}function dpe(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,a=t;i.descendants((s,l)=>{const u=o.mapping.map(l),c=o.mapping.map(l)+s.nodeSize;let f=null;if(s.marks.forEach(h=>{if(h!==a)return!1;f=h}),!f)return;let d=!1;if(Object.keys(n).forEach(h=>{n[h]!==f.attrs[h]&&(d=!0)}),d){const h=t.type.create({...t.attrs,...n});o.removeMark(u,c,t.type),o.addMark(u,c,h)}}),o.docChanged&&e.view.dispatch(o)}var tl=class qG extends fk{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new qG(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Qd(t){return new Khe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=sr(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:a}=e,s=r[r.length-1],l=r[0];let u=n.to;if(s){const c=l.search(/\S/),f=n.from+l.indexOf(s),d=f+s.length;if(uk(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>f).length)return null;d<n.to&&a.delete(d,n.to),f>n.from&&a.delete(n.from+c,f),u=n.from+c+s.length,a.addMark(n.from+c,u,t.type.create(o||{})),a.removeStoredMark(t.type)}}})}var wy,hpe=new Uint8Array(16);function ppe(){if(!wy&&(wy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!wy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wy(hpe)}const mpe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gpe(t){return typeof t=="string"&&mpe.test(t)}var Bi=[];for(var mN=0;mN<256;++mN)Bi.push((mN+256).toString(16).substr(1));function vpe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Bi[t[e+0]]+Bi[t[e+1]]+Bi[t[e+2]]+Bi[t[e+3]]+"-"+Bi[t[e+4]]+Bi[t[e+5]]+"-"+Bi[t[e+6]]+Bi[t[e+7]]+"-"+Bi[t[e+8]]+Bi[t[e+9]]+"-"+Bi[t[e+10]]+Bi[t[e+11]]+Bi[t[e+12]]+Bi[t[e+13]]+Bi[t[e+14]]+Bi[t[e+15]]).toLowerCase();if(!gpe(n))throw TypeError("Stringified UUID is invalid");return n}function jG(t,e,n){t=t||{};var r=t.random||(t.rng||ppe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,vpe(r)}function bpe(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function ype(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return bpe(e)}const zE=Gn.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return jG()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new Wt({key:new gn("uniqueID"),appendTransaction:(n,r,i)=>{const o=n.some(h=>h.docChanged)&&!r.doc.eq(i.doc),a=this.options.filterTransaction&&n.some(h=>{var m,v;return!((v=(m=this.options).filterTransaction)!=null&&v.call(m,h))});if(!o||a)return;const{tr:s}=i,{types:l,attributeName:u,generateID:c}=this.options,f=LE(r.doc,n),{mapping:d}=f;if(lk(f).forEach(({newRange:h})=>{const m=xG(i.doc,h,x=>l.includes(x.type.name)),v=m.map(({node:x})=>x.attrs[u]).filter(x=>x!==null),b=ype(v);m.forEach(({node:x,pos:C})=>{var w;const A=(w=s.doc.nodeAt(C))==null?void 0:w.attrs[u];if(A===null){const T=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(T)===null){const N=JSON.parse(JSON.stringify(i.doc.toJSON()));if(N.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(N.content)===JSON.stringify(T.toJSON())){s.setNodeMarkup(C,void 0,{...x.attrs,[u]:"initialBlockId"});return}}s.setNodeMarkup(C,void 0,{...x.attrs,[u]:c()});return}const{deleted:E}=d.invert().mapResult(C);E&&b.includes(A)&&s.setNodeMarkup(C,void 0,{...x.attrs,[u]:c()})})}),!!s.steps.length)return s.setMeta("uniqueID",!0),s},view(n){const r=i=>{let o;t=!((o=n.dom.parentElement)===null||o===void 0)&&o.contains(i.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let i;return t!==n.dom.parentElement||((i=r.dataTransfer)===null||i===void 0?void 0:i.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:i}=this.options,o=a=>{const s=[];return a.forEach(l=>{if(l.isText){s.push(l);return}if(!r.includes(l.type.name)){s.push(l.copy(o(l.content)));return}const u=l.type.create({...l.attrs,[i]:null},o(l.content),l.marks);s.push(u)}),Ue.from(s)};return e=!1,new ot(o(n.content),n.openStart,n.openEnd)}}})]}});function d7(t){return t.type==="link"}function GG(t){return typeof t!="string"&&t.type==="link"}function Jd(t){return typeof t!="string"&&t.type==="text"}function pf(t){var e,n,r,i,o;return mf(t)?{...t}:_1(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((i=t.props)==null?void 0:i.colspan)??1,rowspan:((o=t.props)==null?void 0:o.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function _1(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function mf(t){return _1(t)&&t.props!==void 0&&t.content!==void 0}function eh(t){return mf(t)?t.props.colspan??1:1}function O1(t){return mf(t)?t.props.rowspan??1:1}let Pl=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};function fn(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}function gf(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,i=n.node(r);for(;r>0;){if(i.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:i};r--,i=n.node(r)}const o=[];t.descendants((s,l)=>{s.type.isInGroup("bnBlock")&&o.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const a=t.resolve(o.find(s=>s>=e)||o[o.length-1]);return{posBeforeNode:a.pos,node:a.nodeAfter}}function pk(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,i=r+n.nodeSize,o={node:n,beforePos:r,afterPos:i};if(n.type.name==="blockContainer"){let a,s;if(n.forEach((l,u)=>{if(l.type.spec.group==="blockContent"){const c=l,f=r+u+1,d=f+l.nodeSize;a={node:c,beforePos:f,afterPos:d}}else if(l.type.name==="blockGroup"){const c=l,f=r+u+1,d=f+l.nodeSize;s={node:c,beforePos:f,afterPos:d}}}),!a)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:o,blockContent:a,childContainer:s,blockNoteType:a.node.type.name}}else{if(!o.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${o.node}`);return{isBlockContainer:!1,bnBlock:o,childContainer:o,blockNoteType:o.node.type.name}}}function vf(t){return pk(t.node,t.posBeforeNode)}function UE(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return pk(t.nodeAfter,t.pos)}function Vo(t){const e=gf(t.doc,t.selection.anchor);return vf(e)}function uv(t){const e=gf(t.doc,t.selection.anchor);return vf(e)}function Kr(t){return"doc"in t?t.doc.type.schema:t.type.schema}function YG(t){return t.cached.blockNoteEditor}function cv(t){return YG(t).schema}function mk(t){return cv(t).blockSchema}function gk(t){return cv(t).inlineContentSchema}function jm(t){return cv(t).styleSchema}function vk(t){return YG(t).blockCache}function WG(t,e,n){var r,i;const o={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},a=[];t.content.forEach((s,l,u)=>{const c={cells:[]};u===0&&s.content.forEach(f=>{let d=f.attrs.colwidth;d==null&&(d=new Array(f.attrs.colspan??1).fill(void 0)),o.columnWidths.push(...d)}),c.cells=s.content.content.map((f,d)=>(a[u]||(a[u]=[]),a[u][d]=f.type.name==="tableHeader",{type:"tableCell",content:f.content.content.map(h=>HE(h,e,n)).reduce((h,m)=>{if(!h.length)return m;const v=h[h.length-1],b=m[0];return b&&Jd(v)&&Jd(b)&&JSON.stringify(v.styles)===JSON.stringify(b.styles)?(v.text+=`
`+b.text,h.push(...m.slice(1)),h):(h.push(...m),h)},[]),props:{colspan:f.attrs.colspan,rowspan:f.attrs.rowspan,backgroundColor:f.attrs.backgroundColor,textColor:f.attrs.textColor,textAlignment:f.attrs.textAlignment}})),o.rows.push(c)});for(let s=0;s<a.length;s++)(r=a[s])!=null&&r.every(l=>l)&&(o.headerRows=(o.headerRows??0)+1);for(let s=0;s<((i=a[0])==null?void 0:i.length);s++)a!=null&&a.every(l=>l[s])&&(o.headerCols=(o.headerCols??0)+1);return o}function HE(t,e,n){const r=[];let i;return t.content.forEach(o=>{if(o.type.name==="hardBreak"){if(i)if(Jd(i))i.text+=`
`;else if(d7(i))i.content[i.content.length-1].text+=`
`;else throw new Error("unexpected");else i={type:"text",text:`
`,styles:{}};return}if(o.type.name!=="link"&&o.type.name!=="text"){if(!e[o.type.name]){console.warn("unrecognized inline content type",o.type.name);return}i&&(r.push(i),i=void 0),r.push(bk(o,e,n));return}const a={};let s;for(const l of o.marks)if(l.type.name==="link")s=l;else{const u=n[l.type.name];if(!u){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(u.propSchema==="boolean")a[u.type]=!0;else if(u.propSchema==="string")a[u.type]=l.attrs.stringValue;else throw new Pl(u.propSchema)}i?Jd(i)?s?(r.push(i),i={type:"link",href:s.attrs.href,content:[{type:"text",text:o.textContent,styles:a}]}):JSON.stringify(i.styles)===JSON.stringify(a)?i.text+=o.textContent:(r.push(i),i={type:"text",text:o.textContent,styles:a}):d7(i)&&(s?i.href===s.attrs.href?JSON.stringify(i.content[i.content.length-1].styles)===JSON.stringify(a)?i.content[i.content.length-1].text+=o.textContent:i.content.push({type:"text",text:o.textContent,styles:a}):(r.push(i),i={type:"link",href:s.attrs.href,content:[{type:"text",text:o.textContent,styles:a}]}):(r.push(i),i={type:"text",text:o.textContent,styles:a})):s?i={type:"link",href:s.attrs.href,content:[{type:"text",text:o.textContent,styles:a}]}:i={type:"text",text:o.textContent,styles:a}}),i&&r.push(i),r}function bk(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},i=e[t.type.name];for(const[a,s]of Object.entries(t.attrs)){if(!i)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=i.propSchema;a in l&&(r[a]=s)}let o;return i.content==="styled"?o=HE(t,e,n):o=void 0,{type:t.type.name,props:r,content:o}}function Ir(t,e,n=mk(e),r=gk(e),i=jm(e),o=vk(e)){var a;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const s=o?.get(t);if(s)return s;const l=pk(t,0);let u=l.bnBlock.node.attrs.id;u===null&&(u=zE.options.generateID());const c=n[l.blockNoteType];if(!c)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const f={};for(const[b,x]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const C=c.propSchema;b in C&&!(C[b].default===void 0&&x===void 0)&&(f[b]=x)}const d=n[l.blockNoteType],h=[];(a=l.childContainer)==null||a.node.forEach(b=>{h.push(Ir(b,e,n,r,i,o))});let m;if(d.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");m=HE(l.blockContent.node,r,i)}else if(d.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");m=WG(l.blockContent.node,r,i)}else if(d.content==="none")m=void 0;else throw new Pl(d.content);const v={id:u,type:d.type,props:f,content:m,children:h};return o?.set(t,v),v}function xpe(t,e=Kr(t),n=mk(e),r=gk(e),i=jm(e),o=vk(e)){const a=[];return t.firstChild&&t.firstChild.descendants(s=>(a.push(Ir(s,e,n,r,i,o)),!1)),a}function wpe(t,e,n=mk(e),r=gk(e),i=jm(e),o=vk(e)){function a(s,l,u){if(s.type.name!=="blockGroup")throw new Error("unexpected");const c=[];let f,d;return s.forEach((h,m,v)=>{if(h.type.name!=="blockContainer")throw new Error("unexpected");if(h.childCount===0)return;if(h.childCount===0||h.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+h.childCount);const b=v===0,x=v===s.childCount-1;if(h.firstChild.type.name==="blockGroup"){if(!b)throw new Error("unexpected");const E=a(h.firstChild,Math.max(0,l-1),x?Math.max(0,u-1):0);f=E.blockCutAtStart,x&&(d=E.blockCutAtEnd),c.push(...E.blocks);return}const C=Ir(h,e,n,r,i,o),w=h.childCount>1?h.child(1):void 0;let A=[];if(w){const E=a(w,0,x?Math.max(0,u-1):0);A=E.blocks,x&&(d=E.blockCutAtEnd)}x&&!w&&u>1&&(d=C.id),b&&l>1&&(f=C.id),c.push({...C,children:A})}),{blocks:c,blockCutAtStart:f,blockCutAtEnd:d}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return a(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function kf(t){const{height:e,width:n}=yk(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),i=(o,a)=>{for(let s=o;s<e;s++)for(let l=a;l<n;l++)if(!r[s][l])return{row:s,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let o=0;o<t.content.rows.length;o++)for(let a=0;a<t.content.rows[o].cells.length;a++){const s=pf(t.content.rows[o].cells[a]),l=O1(s),u=eh(s),{row:c,col:f}=i(o,a);for(let d=c;d<c+l;d++)for(let h=f;h<f+u;h++){if(r[d][h])throw new Error(`Unable to create occupancy grid for table, cell at ${d},${h} is already occupied`);r[d][h]={row:o,col:a,rowspan:l,colspan:u,cell:s}}}return r}function I1(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function th(t,e,n=kf(e)){for(let r=0;r<n.length;r++)for(let i=0;i<n[r].length;i++){const o=n[r][i];if(o&&o.row===t.row&&o.col===t.col)return{row:r,col:i,cell:o.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function yk(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let i=0;r.cells.forEach(o=>{i+=eh(o)}),n=Math.max(n,i)}),{height:e,width:n}}function KG(t,e,n=kf(e)){var r;const i=(r=n[t.row])==null?void 0:r[t.col];if(i)return{row:i.row,col:i.col,cell:i.cell}}function DD(t,e){var n;const r=kf(t);if(e<0||e>=r.length)return[];let i=0;for(let a=0;a<e;a++){const s=(n=r[i])==null?void 0:n[0];if(!s)return[];i+=s.rowspan}const o=new Array(r[0].length).fill(!1).map((a,s)=>KG({row:i,col:s},t,r)).filter(a=>a!==void 0);return o.filter((a,s)=>o.findIndex(l=>l.row===a.row&&l.col===a.col)===s)}function MD(t,e){var n;const r=kf(t);if(e<0||e>=r[0].length)return[];let i=0;for(let a=0;a<e;a++){const s=(n=r[0])==null?void 0:n[i];if(!s)return[];i+=s.colspan}const o=new Array(r.length).fill(!1).map((a,s)=>KG({row:s,col:i},t,r)).filter(a=>a!==void 0);return o.filter((a,s)=>o.findIndex(l=>l.row===a.row&&l.col===a.col)===s)}function Epe(t,e,n,r=kf(t)){const{col:i}=th({row:0,col:e},t,r),{col:o}=th({row:0,col:n},t,r);return r.forEach(a=>{const[s]=a.splice(i,1);a.splice(o,0,s)}),I1(r)}function Cpe(t,e,n,r=kf(t)){const{row:i}=th({row:e,col:0},t,r),{row:o}=th({row:n,col:0},t,r),[a]=r.splice(i,1);return r.splice(o,0,a),I1(r)}function kD(t){return t?_1(t)?kD(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:Jd(e)?e.text.length===0:GG(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function Spe(t,e,n=kf(t)){if(e==="columns"){let o=0;for(let a=n[0].length-1;a>=0&&n.every(s=>kD(s[a].cell)&&s[a].colspan===1);a--)o++;for(let a=n.length-1;a>=0;a--){const s=Math.max(n[a].length-o,1);n[a]=n[a].slice(0,s)}return I1(n)}let r=0;for(let o=n.length-1;o>=0&&n[o].every(a=>kD(a.cell)&&a.rowspan===1);o--)r++;const i=Math.min(r,n.length-1);return n.splice(n.length-i,i),I1(n)}function Tpe(t,e,n,r=kf(t)){const{width:i,height:o}=yk(t);if(e==="columns")r.forEach((a,s)=>{if(n>=0)for(let l=0;l<n;l++)a.push({row:s,col:Math.max(...a.map(u=>u.col))+1,rowspan:1,colspan:1,cell:pf("")});else a.splice(i+n,-1*n)});else if(n>0)for(let a=0;a<n;a++){const s=new Array(i).fill(null).map((l,u)=>({row:o+a,col:u,rowspan:1,colspan:1,cell:pf("")}));r.push(s)}else n<0&&r.splice(o+n,-1*n);return I1(r)}function XG(t,e,n){const r=DD(t,n);if(!r.some(a=>O1(a.cell)>1))return!0;let i=n,o=n;return r.forEach(a=>{const s=O1(a.cell);i=Math.max(i,a.row+s-1),o=Math.min(o,a.row)}),e<n?n===i:n===o}function ZG(t,e,n){const r=MD(t,n);if(!r.some(a=>eh(a.cell)>1))return!0;let i=n,o=n;return r.forEach(a=>{const s=eh(a.cell);i=Math.max(i,a.col+s-1),o=Math.min(o,a.col)}),e<n?n===i:n===o}function Ape(t,e,n){const r=th(t,n),i=th(e,n);return r.col===i.col}function h7(t,e,n,r){const i=[];for(const[o,a]of Object.entries(t.styles||{})){const s=n[o];if(!s)throw new Error(`style ${o} not found in styleSchema`);if(s.propSchema==="boolean")a&&i.push(e.mark(o));else if(s.propSchema==="string")a&&i.push(e.mark(o,{stringValue:a}));else throw new Pl(s.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(o=>o.length>0).map(o=>o===`
`?e.nodes.hardBreak.createChecked():e.text(o,i)):t.text.length>0?[e.text(t.text,i)]:[]}function Npe(t,e,n){const r=e.marks.link.create({href:t.href});return _D(t.content,e,n).map(i=>{if(i.type.name==="text")return i.mark([...i.marks,r]);if(i.type.name==="hardBreak")return i;throw new Error("unexpected node type")})}function _D(t,e,n,r){const i=[];if(typeof t=="string")return i.push(...h7({text:t,styles:{}},e,n,r)),i;for(const o of t)i.push(...h7(o,e,n,r));return i}function Ws(t,e,n,r=jm(e)){const i=[];for(const o of t)typeof o=="string"?i.push(..._D(o,e,r,n)):GG(o)?i.push(...Npe(o,e,r)):Jd(o)?i.push(..._D([o],e,r,n)):i.push(QG(o,e,r));return i}function VE(t,e,n=jm(e)){const r=[],i=new Array(t.headerRows??0).fill(!0),o=new Array(t.headerCols??0).fill(!0),a=t.columnWidths??[];for(let s=0;s<t.rows.length;s++){const l=t.rows[s],u=[],c=i[s];for(let d=0;d<l.cells.length;d++){const h=l.cells[d],m=o[d],v=void 0;let b=null;const x=th({row:s,col:d},{content:t});let C=a[x.col]?[a[x.col]]:null;if(h)if(typeof h=="string")b=e.text(h);else if(_1(h)){h.content&&(b=Ws(h.content,e,"tableParagraph",n));const A=eh(h);A>1&&(C=new Array(A).fill(!1).map((E,T)=>a[x.col+T]??void 0))}else b=Ws(h,e,"tableParagraph",n);const w=e.nodes[m||c?"tableHeader":"tableCell"].createChecked({..._1(h)?h.props:{},colwidth:C},e.nodes.tableParagraph.createChecked(v,b));u.push(w)}const f=e.nodes.tableRow.createChecked({},u);r.push(f)}return r}function QG(t,e,n){let r,i=t.type;if(i===void 0&&(i="paragraph"),!e.nodes[i])throw new Error(`node type ${i} not found in schema`);if(!t.content)r=e.nodes[i].createChecked(t.props);else if(typeof t.content=="string"){const o=Ws([t.content],e,i,n);r=e.nodes[i].createChecked(t.props,o)}else if(Array.isArray(t.content)){const o=Ws(t.content,e,i,n);r=e.nodes[i].createChecked(t.props,o)}else if(t.content.type==="tableContent"){const o=VE(t.content,e,n);r=e.nodes[i].createChecked(t.props,o)}else throw new Pl(t.content.type);return r}function mh(t,e,n=jm(e)){let r=t.id;r===void 0&&(r=zE.options.generateID());const i=[];if(t.children)for(const o of t.children)i.push(mh(o,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const o=QG(t,e,n),a=i.length>0?e.nodes.blockGroup.createChecked({},i):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},a?[o,a]:o)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},i);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}let OD,ID;if(typeof WeakMap<"u"){let t=new WeakMap;OD=e=>t.get(e),ID=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;OD=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},ID=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var gr=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,a=i+1;for(let s=1;o<this.width&&this.map[e+s]==n;s++)o++;for(let s=1;a<this.height&&this.map[e+this.width*s]==n;s++)a++;return{left:r,top:i,right:o,bottom:a}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:a}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:a==this.height)?null:this.map[r+this.width*(n<0?o-1:a)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:a,right:s,top:l,bottom:u}=this.findCell(e);return{left:Math.min(n,a),top:Math.min(i,l),right:Math.max(r,s),bottom:Math.max(o,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,a=this.map[o];n[a]||(n[a]=!0,!(i==t.left&&i&&this.map[o-1]==a||r==t.top&&r&&this.map[o-this.width]==a)&&e.push(a))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let a=e+t*this.width;const s=(t+1)*this.width;for(;a<s&&this.map[a]<i;)a++;return a==s?o-1:this.map[a]}i=o}}static get(t){return OD(t)||ID(t,Dpe(t))}};function Dpe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Mpe(t),n=t.childCount,r=[];let i=0,o=null;const a=[];for(let u=0,c=e*n;u<c;u++)r[u]=0;for(let u=0,c=0;u<n;u++){const f=t.child(u);c++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==f.childCount)break;const v=f.child(m),{colspan:b,rowspan:x,colwidth:C}=v.attrs;for(let w=0;w<x;w++){if(w+u>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:x-w});break}const A=i+w*e;for(let E=0;E<b;E++){r[A+E]==0?r[A+E]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:b-E});const T=C&&C[E];if(T){const N=(A+E)%e*2,D=a[N];D==null||D!=T&&a[N+1]==1?(a[N]=T,a[N+1]=1):D==T&&a[N+1]++}}}i+=b,c+=v.nodeSize}const d=(u+1)*e;let h=0;for(;i<d;)r[i++]==0&&h++;h&&(o||(o=[])).push({type:"missing",row:u,n:h}),c++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const s=new gr(e,n,r,o);let l=!1;for(let u=0;!l&&u<a.length;u+=2)a[u]!=null&&a[u+1]<n&&(l=!0);return l&&kpe(s,a,t),s}function Mpe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let a=0;a<r;a++){const s=t.child(a);for(let l=0;l<s.childCount;l++){const u=s.child(l);a+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const s=i.child(a);o+=s.attrs.colspan,s.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function kpe(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const a=n.nodeAt(o);if(!a)throw new RangeError(`No cell with offset ${o} found`);let s=null;const l=a.attrs;for(let u=0;u<l.colspan;u++){const c=e[(i+u)%t.width*2];c!=null&&(!l.colwidth||l.colwidth[u]!=c)&&((s||(s=_pe(l)))[u]=c)}s&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:s})}}function _pe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function io(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const jc=new gn("selectingCells");function nh(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Ope(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ul(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function xk(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=nh(e.$head)||Ipe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Ipe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function RD(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Rpe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function wk(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function JG(t,e,n){const r=t.node(-1),i=gr.get(r),o=t.start(-1),a=i.nextCell(t.pos-o,e,n);return a==null?null:t.node(0).resolve(o+a)}function rh(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function eY(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Bpe(t,e,n){const r=io(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Qn=class xu extends Bt{constructor(e,n=e){const r=e.node(-1),i=gr.get(r),o=e.start(-1),a=i.rectBetween(e.pos-o,n.pos-o),s=e.node(0),l=i.cellsInRect(a).filter(c=>c!=n.pos-o);l.unshift(n.pos-o);const u=l.map(c=>{const f=r.nodeAt(c);if(!f)throw new RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new mj(s.resolve(d),s.resolve(d+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(RD(r)&&RD(i)&&wk(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?xu.rowSelection(r,i):o&&this.isColSelection()?xu.colSelection(r,i):new xu(r,i)}return bt.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=gr.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},a=[];for(let l=i.top;l<i.bottom;l++){const u=[];for(let c=l*n.width+i.left,f=i.left;f<i.right;f++,c++){const d=n.map[c];if(o[d])continue;o[d]=!0;const h=n.findCell(d);let m=e.nodeAt(d);if(!m)throw new RangeError(`No cell with offset ${d} found`);const v=i.left-h.left,b=h.right-i.right;if(v>0||b>0){let x=m.attrs;if(v>0&&(x=rh(x,0,v)),b>0&&(x=rh(x,x.colspan-b,b)),h.left<i.left){if(m=m.type.createAndFill(x),!m)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(x)}`)}else m=m.type.create(x,m.content)}if(h.top<i.top||h.bottom>i.bottom){const x={...m.attrs,rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)};h.top<i.top?m=m.type.createAndFill(x):m=m.type.create(x,m.content)}u.push(m)}a.push(e.child(l).copy(Ue.from(u)))}const s=this.isColSelection()&&this.isRowSelection()?e:a;return new ot(Ue.from(s),1,1)}replace(e,n=ot.empty){const r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:s,$to:l}=i[a],u=e.mapping.slice(r);e.replace(u.map(s.pos),u.map(l.pos),a?ot.empty:n)}const o=Bt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new ot(Ue.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=gr.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<o.length;a++)e(n.nodeAt(o[a]),i+o[a])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=gr.get(r),o=e.start(-1),a=i.findCell(e.pos-o),s=i.findCell(n.pos-o),l=e.node(0);return a.top<=s.top?(a.top>0&&(e=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(n=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))):(s.top>0&&(n=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(e=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))),new xu(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=gr.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,s)==n.width}eq(e){return e instanceof xu&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=gr.get(r),o=e.start(-1),a=i.findCell(e.pos-o),s=i.findCell(n.pos-o),l=e.node(0);return a.left<=s.left?(a.left>0&&(e=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(n=l.resolve(o+i.map[i.width*(s.top+1)-1]))):(s.left>0&&(n=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(e=l.resolve(o+i.map[i.width*(a.top+1)-1]))),new xu(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new xu(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new xu(e.resolve(n),e.resolve(r))}getBookmark(){return new Lpe(this.$anchorCell.pos,this.$headCell.pos)}};Qn.prototype.visible=!1;Bt.jsonID("cell",Qn);var Lpe=class tY{constructor(e,n){this.anchor=e,this.head=n}map(e){return new tY(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&wk(n,r)?new Qn(n,r):Bt.near(r,1)}};function Fpe(t){if(!(t.selection instanceof Qn))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Un.node(r,r+n.nodeSize,{class:"selectedCell"}))}),nn.create(t.doc,e)}function Ppe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function $pe({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&e.parentOffset===0}function zpe(t,e,n){const r=(e||t).selection,i=(e||t).doc;let o,a;if(r instanceof Et&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")o=Qn.create(i,r.from);else if(a=="row"){const s=i.resolve(r.from+1);o=Qn.rowSelection(s,s)}else if(!n){const s=gr.get(r.node),l=r.from+1,u=l+s.map[s.width*s.height-1];o=Qn.create(i,l+1,u)}}else r instanceof bt&&Ppe(r)?o=bt.create(i,r.from):r instanceof bt&&$pe(r)&&(o=bt.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}const Upe=new gn("fix-tables");function nY(t,e,n,r){const i=t.childCount,o=e.childCount;e:for(let a=0,s=0;a<o;a++){const l=e.child(a);for(let u=s,c=Math.min(i,a+3);u<c;u++)if(t.child(u)==l){s=u+1,n+=l.nodeSize;continue e}r(l,n),s<i&&t.child(s).sameMarkup(l)?nY(t.child(s),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Hpe(t,e){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=Vpe(t,i,o,n))};return e?e.doc!=t.doc&&nY(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Vpe(t,e,n,r){const i=gr.get(e);if(!i.problems)return r;r||(r=t.tr);const o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){const u=i.problems[l];if(u.type=="collision"){const c=e.nodeAt(u.pos);if(!c)continue;const f=c.attrs;for(let d=0;d<f.rowspan;d++)o[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,rh(f,f.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const c=r.mapping.map(n);r.delete(c,c+e.nodeSize)}}let a,s;for(let l=0;l<o.length;l++)o[l]&&(a==null&&(a=l),s=l);for(let l=0,u=n+1;l<i.height;l++){const c=e.child(l),f=u+c.nodeSize,d=o[l];if(d>0){let h="cell";c.firstChild&&(h=c.firstChild.type.spec.tableRole);const m=[];for(let b=0;b<d;b++){const x=io(t.schema)[h].createAndFill();x&&m.push(x)}const v=(l==0||a==l-1)&&s==l?u+1:f-1;r.insert(r.mapping.map(v),m)}u=f}return r.setMeta(Upe,{fixTables:!0})}function Hl(t){const e=t.selection,n=xk(t),r=n.node(-1),i=n.start(-1),o=gr.get(r);return{...e instanceof Qn?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function rY(t,{map:e,tableStart:n,table:r},i){let o=i>0?-1:0;Bpe(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let a=0;a<e.height;a++){const s=a*e.width+i;if(i>0&&i<e.width&&e.map[s-1]==e.map[s]){const l=e.map[s],u=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,eY(u.attrs,i-e.colCount(l))),a+=u.attrs.rowspan-1}else{const l=o==null?io(r.type.schema).cell:r.nodeAt(e.map[s+o]).type,u=e.positionAt(a,i,r);t.insert(t.mapping.map(n+u),l.createAndFill())}}return t}function qpe(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t);e(rY(t.tr,n,n.left))}return!0}function jpe(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t);e(rY(t.tr,n,n.right))}return!0}function Gpe(t,{map:e,table:n,tableStart:r},i){const o=t.mapping.maps.length;for(let a=0;a<e.height;){const s=a*e.width+i,l=e.map[s],u=n.nodeAt(l),c=u.attrs;if(i>0&&e.map[s-1]==l||i<e.width-1&&e.map[s+1]==l)t.setNodeMarkup(t.mapping.slice(o).map(r+l),null,rh(c,i-e.colCount(l)));else{const f=t.mapping.slice(o).map(r+l);t.delete(f,f+u.nodeSize)}a+=c.rowspan}}function Ype(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Gpe(r,n,i),i!=n.left;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw new RangeError("No table found");n.table=o,n.map=gr.get(o)}e(r)}return!0}function Wpe(t,e,n){var r;const i=io(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=e.nodeAt(t.map[o+n*t.width]))===null||r===void 0?void 0:r.type)!=i)return!1;return!0}function iY(t,{map:e,tableStart:n,table:r},i){let o=n;for(let u=0;u<i;u++)o+=r.child(u).nodeSize;const a=[];let s=i>0?-1:0;Wpe(e,r,i+s)&&(s=i==0||i==e.height?null:0);for(let u=0,c=e.width*i;u<e.width;u++,c++)if(i>0&&i<e.height&&e.map[c]==e.map[c-e.width]){const f=e.map[c],d=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,{...d,rowspan:d.rowspan+1}),u+=d.colspan-1}else{var l;const f=s==null?io(r.type.schema).cell:(l=r.nodeAt(e.map[c+s*e.width]))===null||l===void 0?void 0:l.type,d=f?.createAndFill();d&&a.push(d)}return t.insert(o,io(r.type.schema).row.create(null,a)),t}function Kpe(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t);e(iY(t.tr,n,n.top))}return!0}function Xpe(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t);e(iY(t.tr,n,n.bottom))}return!0}function Zpe(t,{map:e,table:n,tableStart:r},i){let o=0;for(let u=0;u<i;u++)o+=n.child(u).nodeSize;const a=o+n.child(i).nodeSize,s=t.mapping.maps.length;t.delete(o+r,a+r);const l=new Set;for(let u=0,c=i*e.width;u<e.width;u++,c++){const f=e.map[c];if(!l.has(f)){if(l.add(f),i>0&&f==e.map[c-e.width]){const d=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(s).map(f+r),null,{...d,rowspan:d.rowspan-1}),u+=d.colspan-1}else if(i<e.height&&f==e.map[c+e.width]){const d=n.nodeAt(f),h=d.attrs,m=d.type.create({...h,rowspan:d.attrs.rowspan-1},d.content),v=e.positionAt(i+1,u,n);t.insert(t.mapping.slice(s).map(r+v),m),u+=h.colspan-1}}}}function Qpe(t,e){if(!Ul(t))return!1;if(e){const n=Hl(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;Zpe(r,n,i),i!=n.top;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw new RangeError("No table found");n.table=o,n.map=gr.get(n.table)}e(r)}return!0}function p7(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function Jpe({width:t,height:e,map:n},r){let i=r.top*t+r.left,o=i,a=(r.bottom-1)*t+r.left,s=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[o]==n[o-1]||r.right<t&&n[s]==n[s+1])return!0;o+=t,s+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[a]==n[a+t])return!0;i++,a++}return!1}function eme(t,e){const n=t.selection;if(!(n instanceof Qn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Hl(t),{map:i}=r;if(Jpe(i,r))return!1;if(e){const o=t.tr,a={};let s=Ue.empty,l,u;for(let c=r.top;c<r.bottom;c++)for(let f=r.left;f<r.right;f++){const d=i.map[c*i.width+f],h=r.table.nodeAt(d);if(!(a[d]||!h))if(a[d]=!0,l==null)l=d,u=h;else{p7(h)||(s=s.append(h.content));const m=o.mapping.map(d+r.tableStart);o.delete(m,m+h.nodeSize)}}if(l==null||u==null)return!0;if(o.setNodeMarkup(l+r.tableStart,null,{...eY(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),s.size>0){const c=l+1+u.content.size,f=p7(u)?l+1:c;o.replaceWith(f+r.tableStart,c+r.tableStart,s)}o.setSelection(new Qn(o.doc.resolve(l+r.tableStart))),e(o)}return!0}function tme(t,e){const n=io(t.schema);return nme(({node:r})=>n[r.type.spec.tableRole])(t,e)}function nme(t){return(e,n)=>{const r=e.selection;let i,o;if(r instanceof Qn){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,o=r.$anchorCell.pos}else{var a;if(i=Ope(r.$from),!i)return!1;o=(a=nh(r.$from))===null||a===void 0?void 0:a.pos}if(i==null||o==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let s=i.attrs;const l=[],u=s.colwidth;s.rowspan>1&&(s={...s,rowspan:1}),s.colspan>1&&(s={...s,colspan:1});const c=Hl(e),f=e.tr;for(let h=0;h<c.right-c.left;h++)l.push(u?{...s,colwidth:u&&u[h]?[u[h]]:null}:s);let d;for(let h=c.top;h<c.bottom;h++){let m=c.map.positionAt(h,c.left,c.table);h==c.top&&(m+=i.nodeSize);for(let v=c.left,b=0;v<c.right;v++,b++)v==c.left&&h==c.top||f.insert(d=f.mapping.map(m+c.tableStart,1),t({node:i,row:h,col:v}).createAndFill(l[b]))}f.setNodeMarkup(o,t({node:i,row:c.top,col:c.left}),l[0]),r instanceof Qn&&f.setSelection(new Qn(f.doc.resolve(r.$anchorCell.pos),d?f.doc.resolve(d):void 0)),n(f)}return!0}}function rme(t){return function(e,n){if(!Ul(e))return!1;if(n){const r=io(e.schema),i=Hl(e),o=e.tr,a=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),s=a.map(l=>i.table.nodeAt(l));for(let l=0;l<a.length;l++)s[l].type==r.header_cell&&o.setNodeMarkup(i.tableStart+a[l],r.cell,s[l].attrs);if(o.steps.length===0)for(let l=0;l<a.length;l++)o.setNodeMarkup(i.tableStart+a[l],r.header_cell,s[l].attrs);n(o)}return!0}}function m7(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Ek(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?rme(t):function(n,r){if(!Ul(n))return!1;if(r){const i=io(n.schema),o=Hl(n),a=n.tr,s=m7("row",o,i),l=m7("column",o,i),u=(t==="column"?s:t==="row"&&l)?1:0,c=t=="column"?{left:0,top:u,right:1,bottom:o.map.height}:t=="row"?{left:u,top:0,right:o.map.width,bottom:1}:o,f=t=="column"?l?i.cell:i.header_cell:t=="row"?s?i.cell:i.header_cell:i.cell;o.map.cellsInRect(c).forEach(d=>{const h=d+o.tableStart,m=a.doc.nodeAt(h);m&&a.setNodeMarkup(h,f,m.attrs)}),r(a)}return!0}}Ek("row",{useDeprecatedLogic:!0});Ek("column",{useDeprecatedLogic:!0});Ek("cell",{useDeprecatedLogic:!0});function ime(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const o=t.node(-1).child(r),a=o.lastChild;if(a)return i-1-a.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function g7(t){return function(e,n){if(!Ul(e))return!1;const r=ime(xk(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(bt.between(i,Rpe(i))).scrollIntoView())}return!0}}function Ey(t,e){const n=t.selection;if(!(n instanceof Qn))return!1;if(e){const r=t.tr,i=io(t.schema).cell.createAndFill().content;n.forEachCell((o,a)=>{o.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+o.nodeSize-1),new ot(i,0,0))}),r.docChanged&&e(r)}return!0}function ome(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,a=i.type.schema,s=[];if(o=="row")for(let l=0;l<e.childCount;l++){let u=e.child(l).content;const c=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(c||f)&&(u=BD(io(a).row,new ot(u,c,f)).content),s.push(u)}else if(o=="cell"||o=="header_cell")s.push(n||r?BD(io(a).row,new ot(e,n,r)).content:e);else return null;return ame(a,s)}function ame(t,e){const n=[];for(let i=0;i<e.length;i++){const o=e[i];for(let a=o.childCount-1;a>=0;a--){const{rowspan:s,colspan:l}=o.child(a).attrs;for(let u=i;u<i+s;u++)n[u]=(n[u]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ue.empty),n[i]<r){const o=io(t).cell.createAndFill(),a=[];for(let s=n[i];s<r;s++)a.push(o);e[i]=e[i].append(Ue.from(a))}return{height:e.length,width:r,rows:e}}function BD(t,e){const n=t.createAndFill();return new PM(n).replace(0,n.content.size,e).doc}function sme({width:t,height:e,rows:n},r,i){if(t!=r){const o=[],a=[];for(let s=0;s<n.length;s++){const l=n[s],u=[];for(let c=o[s]||0,f=0;c<r;f++){let d=l.child(f%l.childCount);c+d.attrs.colspan>r&&(d=d.type.createChecked(rh(d.attrs,d.attrs.colspan,c+d.attrs.colspan-r),d.content)),u.push(d),c+=d.attrs.colspan;for(let h=1;h<d.attrs.rowspan;h++)o[s+h]=(o[s+h]||0)+d.attrs.colspan}a.push(Ue.from(u))}n=a,t=r}if(e!=i){const o=[];for(let a=0,s=0;a<i;a++,s++){const l=[],u=n[s%e];for(let c=0;c<u.childCount;c++){let f=u.child(c);a+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),l.push(f)}o.push(Ue.from(l))}n=o,e=i}return{width:t,height:e,rows:n}}function lme(t,e,n,r,i,o,a){const s=t.doc.type.schema,l=io(s);let u,c;if(i>e.width)for(let f=0,d=0;f<e.height;f++){const h=n.child(f);d+=h.nodeSize;const m=[];let v;h.lastChild==null||h.lastChild.type==l.cell?v=u||(u=l.cell.createAndFill()):v=c||(c=l.header_cell.createAndFill());for(let b=e.width;b<i;b++)m.push(v);t.insert(t.mapping.slice(a).map(d-1+r),m)}if(o>e.height){const f=[];for(let m=0,v=(e.height-1)*e.width;m<Math.max(e.width,i);m++){const b=m>=e.width?!1:n.nodeAt(e.map[v+m]).type==l.header_cell;f.push(b?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}const d=l.row.create(null,Ue.from(f)),h=[];for(let m=e.height;m<o;m++)h.push(d);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),h)}return!!(u||c)}function v7(t,e,n,r,i,o,a,s){if(a==0||a==e.height)return!1;let l=!1;for(let u=i;u<o;u++){const c=a*e.width+u,f=e.map[c];if(e.map[c-e.width]==f){l=!0;const d=n.nodeAt(f),{top:h,left:m}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(s).map(f+r),null,{...d.attrs,rowspan:a-h}),t.insert(t.mapping.slice(s).map(e.positionAt(a,m,n)),d.type.createAndFill({...d.attrs,rowspan:h+d.attrs.rowspan-a})),u+=d.attrs.colspan-1}}return l}function b7(t,e,n,r,i,o,a,s){if(a==0||a==e.width)return!1;let l=!1;for(let u=i;u<o;u++){const c=u*e.width+a,f=e.map[c];if(e.map[c-1]==f){l=!0;const d=n.nodeAt(f),h=e.colCount(f),m=t.mapping.slice(s).map(f+r);t.setNodeMarkup(m,null,rh(d.attrs,a-h,d.attrs.colspan-(a-h))),t.insert(m+d.nodeSize,d.type.createAndFill(rh(d.attrs,0,a-h))),u+=d.attrs.rowspan-1}}return l}function y7(t,e,n,r,i){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let a=gr.get(o);const{top:s,left:l}=r,u=l+i.width,c=s+i.height,f=t.tr;let d=0;function h(){if(o=n?f.doc.nodeAt(n-1):f.doc,!o)throw new Error("No table found");a=gr.get(o),d=f.mapping.maps.length}lme(f,a,o,n,u,c,d)&&h(),v7(f,a,o,n,l,u,s,d)&&h(),v7(f,a,o,n,l,u,c,d)&&h(),b7(f,a,o,n,s,c,l,d)&&h(),b7(f,a,o,n,s,c,u,d)&&h();for(let m=s;m<c;m++){const v=a.positionAt(m,l,o),b=a.positionAt(m,u,o);f.replace(f.mapping.slice(d).map(v+n),f.mapping.slice(d).map(b+n),new ot(i.rows[m-s],0,0))}h(),f.setSelection(new Qn(f.doc.resolve(n+a.positionAt(s,l,o)),f.doc.resolve(n+a.positionAt(c-1,u-1,o)))),e(f)}const ume=ek({ArrowLeft:Cy("horiz",-1),ArrowRight:Cy("horiz",1),ArrowUp:Cy("vert",-1),ArrowDown:Cy("vert",1),"Shift-ArrowLeft":Sy("horiz",-1),"Shift-ArrowRight":Sy("horiz",1),"Shift-ArrowUp":Sy("vert",-1),"Shift-ArrowDown":Sy("vert",1),Backspace:Ey,"Mod-Backspace":Ey,Delete:Ey,"Mod-Delete":Ey});function D2(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Cy(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof Qn)return D2(n,r,Bt.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const a=oY(i,t,e);if(a==null)return!1;if(t=="horiz")return D2(n,r,Bt.near(n.doc.resolve(o.head+e),e));{const s=n.doc.resolve(a),l=JG(s,t,e);let u;return l?u=Bt.near(l,1):e<0?u=Bt.near(n.doc.resolve(s.before(-1)),-1):u=Bt.near(n.doc.resolve(s.after(-1)),1),D2(n,r,u)}}}function Sy(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let a;if(o instanceof Qn)a=o;else{const l=oY(i,t,e);if(l==null)return!1;a=new Qn(n.doc.resolve(l))}const s=JG(a.$headCell,t,e);return s?D2(n,r,new Qn(a.$anchorCell,s)):!1}}function cme(t,e){const n=t.state.doc,r=nh(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Qn(r))),!0):!1}function fme(t,e,n){if(!Ul(t.state))return!1;let r=ome(n);const i=t.state.selection;if(i instanceof Qn){r||(r={width:1,height:1,rows:[Ue.from(BD(io(t.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),s=gr.get(o).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=sme(r,s.right-s.left,s.bottom-s.top),y7(t.state,t.dispatch,a,s,r),!0}else if(r){const o=xk(t.state),a=o.start(-1);return y7(t.state,t.dispatch,a,gr.get(o.node(-1)).findCell(o.pos-a),r),!0}else return!1}function dme(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=x7(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Qn)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=nh(t.state.selection.$anchor))!=null&&((n=gN(t,e))===null||n===void 0?void 0:n.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(l,u){let c=gN(t,u);const f=jc.getState(t.state)==null;if(!c||!wk(l,c))if(f)c=l;else return;const d=new Qn(l,c);if(f||!t.state.selection.eq(d)){const h=t.state.tr.setSelection(d);f&&h.setMeta(jc,l.pos),t.dispatch(h)}}function a(){t.root.removeEventListener("mouseup",a),t.root.removeEventListener("dragstart",a),t.root.removeEventListener("mousemove",s),jc.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(jc,-1))}function s(l){const u=l,c=jc.getState(t.state);let f;if(c!=null)f=t.state.doc.resolve(c);else if(x7(t,u.target)!=r&&(f=gN(t,e),!f))return a();f&&o(f,u)}t.root.addEventListener("mouseup",a),t.root.addEventListener("dragstart",a),t.root.addEventListener("mousemove",s)}function oY(t,e,n){if(!(t.state.selection instanceof bt))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const a=r.before(i),s=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(s)?a:null}}return null}function x7(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function gN(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:i}=n;return r>=0&&nh(t.state.doc.resolve(r))||nh(t.state.doc.resolve(i))}var aY=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),LD(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,LD(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function LD(t,e,n,r,i,o){let a=0,s=!0,l=e.firstChild;const u=t.firstChild;if(u){for(let f=0,d=0;f<u.childCount;f++){const{colspan:h,colwidth:m}=u.child(f).attrs;for(let v=0;v<h;v++,d++){const b=i==d?o:m&&m[v],x=b?b+"px":"";if(a+=b||r,b||(s=!1),l)l.style.width!=x&&(l.style.width=x),l=l.nextSibling;else{const C=document.createElement("col");C.style.width=x,e.appendChild(C)}}}for(;l;){var c;const f=l.nextSibling;(c=l.parentNode)===null||c===void 0||c.removeChild(l),l=f}s?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}const Ea=new gn("tableColumnResizing");function hme({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=aY,lastColumnResizable:i=!0}={}){const o=new Wt({key:Ea,state:{init(a,s){var l;const u=(l=o.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,c=io(s.schema).table.name;return r&&u&&(u[c]=(f,d)=>new r(f,n,d)),new pme(-1,!1)},apply(a,s){return s.apply(a)}},props:{attributes:a=>{const s=Ea.getState(a);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,s)=>{mme(a,s,t,i)},mouseleave:a=>{gme(a)},mousedown:(a,s)=>{vme(a,s,e,n)}},decorations:a=>{const s=Ea.getState(a);if(s&&s.activeHandle>-1)return Eme(a,s.activeHandle)},nodeViews:{}}});return o}var pme=class M2{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ea);if(r&&r.setHandle!=null)return new M2(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new M2(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return RD(e.doc.resolve(i))||(i=-1),new M2(i,n.dragging)}return n}};function mme(t,e,n,r){if(!t.editable)return;const i=Ea.getState(t.state);if(i&&!i.dragging){const o=yme(e.target);let a=-1;if(o){const{left:s,right:l}=o.getBoundingClientRect();e.clientX-s<=n?a=w7(t,e,"left",n):l-e.clientX<=n&&(a=w7(t,e,"right",n))}if(a!=i.activeHandle){if(!r&&a!==-1){const s=t.state.doc.resolve(a),l=s.node(-1),u=gr.get(l),c=s.start(-1);if(u.colCount(s.pos-c)+s.nodeAfter.attrs.colspan-1==u.width-1)return}sY(t,a)}}}function gme(t){if(!t.editable)return;const e=Ea.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&sY(t,-1)}function vme(t,e,n,r){var i;if(!t.editable)return!1;const o=(i=t.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,a=Ea.getState(t.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const s=t.state.doc.nodeAt(a.activeHandle),l=bme(t,a.activeHandle,s.attrs);t.dispatch(t.state.tr.setMeta(Ea,{setDragging:{startX:e.clientX,startWidth:l}}));function u(f){o.removeEventListener("mouseup",u),o.removeEventListener("mousemove",c);const d=Ea.getState(t.state);d?.dragging&&(xme(t,d.activeHandle,E7(d.dragging,f,n)),t.dispatch(t.state.tr.setMeta(Ea,{setDragging:null})))}function c(f){if(!f.which)return u(f);const d=Ea.getState(t.state);if(d&&d.dragging){const h=E7(d.dragging,f,n);C7(t,d.activeHandle,h,r)}}return C7(t,a.activeHandle,l,r),o.addEventListener("mouseup",u),o.addEventListener("mousemove",c),e.preventDefault(),!0}function bme(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=t.domAtPos(e);let a=o.node.childNodes[o.offset].offsetWidth,s=n;if(r)for(let l=0;l<n;l++)r[l]&&(a-=r[l],s--);return a/s}function yme(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function w7(t,e,n,r){const i=n=="right"?-r:r,o=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:a}=o,s=nh(t.state.doc.resolve(a));if(!s)return-1;if(n=="right")return s.pos;const l=gr.get(s.node(-1)),u=s.start(-1),c=l.map.indexOf(s.pos-u);return c%l.width==0?-1:u+l.map[c-1]}function E7(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function sY(t,e){t.dispatch(t.state.tr.setMeta(Ea,{setHandle:e}))}function xme(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),o=gr.get(i),a=r.start(-1),s=o.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let u=0;u<o.height;u++){const c=u*o.width+s;if(u&&o.map[c]==o.map[c-o.width])continue;const f=o.map[c],d=i.nodeAt(f).attrs,h=d.colspan==1?0:s-o.colCount(f);if(d.colwidth&&d.colwidth[h]==n)continue;const m=d.colwidth?d.colwidth.slice():wme(d.colspan);m[h]=n,l.setNodeMarkup(a+f,null,{...d,colwidth:m})}l.docChanged&&t.dispatch(l)}function C7(t,e,n,r){const i=t.state.doc.resolve(e),o=i.node(-1),a=i.start(-1),s=gr.get(o).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&LD(o,l.firstChild,l,r,s,n)}function wme(t){return Array(t).fill(0)}function Eme(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return nn.empty;const o=gr.get(i),a=r.start(-1),s=o.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1;for(let u=0;u<o.height;u++){const c=s+u*o.width;if((s==o.width-1||o.map[c]!=o.map[c+1])&&(u==0||o.map[c]!=o.map[c-o.width])){var l;const f=o.map[c],d=a+f+i.nodeAt(f).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",!((l=Ea.getState(t))===null||l===void 0)&&l.dragging&&n.push(Un.node(a+f,a+f+i.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),n.push(Un.widget(d,h))}}return nn.create(t.doc,n)}function Cme({allowTableNodeSelection:t=!1}={}){return new Wt({key:jc,state:{init(){return null},apply(e,n){const r=e.getMeta(jc);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:o}=e.mapping.mapResult(n);return i?null:o}},props:{decorations:Fpe,handleDOMEvents:{mousedown:dme},createSelectionBetween(e){return jc.getState(e.state)!=null?e.state.selection:null},handleTripleClick:cme,handleKeyDown:ume,handlePaste:fme},appendTransaction(e,n,r){return zpe(r,Hpe(r,n),t)}})}const Sme=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},Tme=/[\uD800-\uDBFF]/,Ame=/[\uDC00-\uDFFF]/,Nme=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&Tme.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&Ame.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},Dme=Nme,mr=new gn("y-sync"),Ol=new gn("y-undo"),Ty=new gn("yjs-cursor"),Il=(t,e)=>t>>>e|t<<32-e,Mme=t=>Il(t,2)^Il(t,13)^Il(t,22),kme=t=>Il(t,6)^Il(t,11)^Il(t,25),_me=t=>Il(t,7)^Il(t,18)^t>>>3,Ome=t=>Il(t,17)^Il(t,19)^t>>>10,Ime=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rme=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class Bme{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(Rme),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let f=16;f<64;f++)n[f]=Ome(n[f-2])+n[f-7]+_me(n[f-15])+n[f-16];let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7];for(let f=0,d,h;f<64;f++)d=c+kme(s)+(s&l^~s&u)+Ime[f]+n[f]>>>0,h=Mme(r)+(r&i^r&o^i&o)>>>0,c=u,u=l,l=s,s=a+d>>>0,a=o,o=i,i=r,r=d+h>>>0;e[0]+=r,e[1]+=i,e[2]+=o,e[3]+=a,e[4]+=s,e[5]+=l,e[6]+=u,e[7]+=c}digest(e){let n=0;for(;n+56<=e.length;){let a=0;for(;a<16&&n+3<e.length;a++)this._W[a]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,a,16);n<e.length;)this._W[a]|=e[n]<<(3-n%4)*8,n++;this._W[a]|=wo<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let i=0;for(;n<e.length;i++)for(let a=3;a>=0&&n<e.length;a--)this._W[i]|=e[n++]<<a*8;r||(this._W[i-(n%4===0?0:1)]|=wo<<(3-n%4)*8),this._W[14]=e.byteLength/_oe,this._W[15]=e.byteLength*8,this._updateHash();const o=new Uint8Array(32);for(let a=0;a<this._H.length;a++)for(let s=0;s<4;s++)o[a*4+s]=this._H[a]>>>(3-s)*8;return o}}const Lme=t=>new Bme().digest(t),Fme=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},Pme=t=>Oae(Fme(Lme(Rae(t)))),Nx=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!Um(e.ds,t.id),$me=[{light:"#ecd44433",dark:"#ecd444"}],zme=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=cf();t.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}t.set(n,cae(e))}return t.get(n)},Ume=(t,{colors:e=$me,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:o}={})=>{let a=!1;const s=new Vme(t,o),l=new Wt({props:{editable:u=>{const c=mr.getState(u);return c.snapshot==null&&c.prevSnapshot==null}},key:mr,state:{init:(u,c)=>({type:t,doc:t.doc,binding:s,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(u,c)=>{const f=u.getMeta(mr);if(f!==void 0){c=Object.assign({},c);for(const d in f)c[d]=f[d]}return c.addToHistory=u.getMeta("addToHistory")!==!1,c.isChangeOrigin=f!==void 0&&!!f.isChangeOrigin,c.isUndoRedoOperation=f!==void 0&&!!f.isChangeOrigin&&!!f.isUndoRedoOperation,s.prosemirrorView!==null&&f!==void 0&&(f.snapshot!=null||f.prevSnapshot!=null)&&wM(0,()=>{s.prosemirrorView!=null&&(f.restore==null?s._renderSnapshot(f.snapshot,f.prevSnapshot,c):(s._renderSnapshot(f.snapshot,f.snapshot,c),delete c.restore,delete c.snapshot,delete c.prevSnapshot,s.mux(()=>{s._prosemirrorChanged(s.prosemirrorView.state.doc)})))}),c}},view:u=>(s.initView(u),o==null&&s._forceRerender(),i(),{update:()=>{const c=l.getState(u.state);if(c.snapshot==null&&c.prevSnapshot==null&&(a||u.state.doc.content.findDiffStart(u.state.doc.type.createAndFill().content)!==null)){if(a=!0,c.addToHistory===!1&&!c.isChangeOrigin){const f=Ol.getState(u.state),d=f&&f.undoManager;d&&d.stopCapturing()}s.mux(()=>{c.doc.transact(f=>{f.meta.set("addToHistory",c.addToHistory),s._prosemirrorChanged(u.state.doc)},mr)})}},destroy:()=>{s.destroy()}})});return l},Hme=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new Jo(t.doc));else if(e.type==="node"){const r=Pd(n.doc,n.type,e.anchor,n.mapping);t.setSelection(Et.create(t.doc,r))}else{const r=Pd(n.doc,n.type,e.anchor,n.mapping),i=Pd(n.doc,n.type,e.head,n.mapping);if(r!==null&&i!==null){const o=bt.between(t.doc.resolve(r),t.doc.resolve(i));t.setSelection(o)}}},Dx=(t,e)=>({type:e.selection.jsonID,anchor:B1(e.selection.anchor,t.type,t.mapping),head:B1(e.selection.head,t.type,t.mapping)});class Vme{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=Sme(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=Dx(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(xV&&this._domSelectionInView===null&&(wM(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),o=tv.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||o.clientWidth||0)&&i.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(e,n){n||(n=tq(jV(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(mr,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>k2(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ot(Ue.from(e),0,0));n.setMeta(mr,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>k2(i,this.prosemirrorView.state.schema,this)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ot(Ue.from(n),0,0));if(e){const i=ku(js(e.anchor,0),r.doc.content.size),o=ku(js(e.head,0),r.doc.content.size);r.setSelection(bt.create(r.doc,i,o))}this.prosemirrorView.dispatch(r.setMeta(mr,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let i=this.doc,o=this.type;if(e||(e=YA(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Ao(),i=new Qu({gc:!1}),ox(i,n),n=YA(i),ox(i,e),e=YA(i),o._item===null){const a=Array.from(this.doc.share.keys()).find(s=>this.doc.share.get(s)===this.type);o=i.getXmlFragment(a)}else{const a=i.store.clients.get(o._item.id.client)??[],s=ms(a,o._item.id.clock);o=a[s].content.type}this.mapping.clear(),this.mux(()=>{i.transact(a=>{const s=r.permanentUserData;s&&s.dss.forEach(f=>{ff(a,f,d=>{})});const l=(f,d)=>{const h=f==="added"?s.getUserByClientId(d.client):s.getUserByDeletedId(d);return{user:h,type:f,color:zme(r.colorMapping,r.colors,h)}},u=dq(o,new NM(n.ds,e.sv)).map(f=>!f._item.deleted||Nx(f._item,e)||Nx(f._item,n)?k2(f,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(f=>f!==null),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ot(Ue.from(u),0,0));this.prosemirrorView.dispatch(c.setMeta(mr,{isChangeOrigin:!0}))},mr)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=mr.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(s,l)=>this.mapping.delete(l);ff(n,n.deleteSet,s=>{if(s.constructor===yr){const l=s.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const o=this.type.toArray().map(s=>lY(s,this.prosemirrorView.state.schema,this)).filter(s=>s!==null);let a=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ot(Ue.from(o),0,0));Hme(a,this.beforeTransactionSelection,this),a=a.setMeta(mr,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof aq}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&a.scrollIntoView(),this.prosemirrorView.dispatch(a)})}_prosemirrorChanged(e){this.doc.transact(()=>{PD(this.doc,this.type,e,this),this.beforeTransactionSelection=Dx(this,this.prosemirrorView.state)},mr)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const lY=(t,e,n,r,i,o)=>{const a=n.mapping.get(t);if(a===void 0){if(t instanceof zi)return k2(t,e,n,r,i,o);throw ls()}return a},k2=(t,e,n,r,i,o)=>{const a=[],s=l=>{if(l instanceof zi){const u=lY(l,e,n,r,i,o);u!==null&&a.push(u)}else{const u=l._item.right?.content?.type;u instanceof df&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(f=>{u._item.delete(f)}));const c=qme(l,e,n,r,i,o);c!==null&&c.forEach(f=>{f!==null&&a.push(f)})}};r===void 0||i===void 0?t.toArray().forEach(s):dq(t,new NM(i.ds,r.sv)).forEach(s);try{const l=t.getAttributes(r);r!==void 0&&(Nx(t._item,r)?Nx(t._item,i)||(l.ychange=o?o("added",t._item.id):{type:"added"}):l.ychange=o?o("removed",t._item.id):{type:"removed"});const u=e.node(t.nodeName,l,a);return n.mapping.set(t,u),u}catch{return t.doc.transact(u=>{t._item.delete(u)},mr),n.mapping.delete(t),null}},qme=(t,e,n,r,i,o)=>{const a=[],s=t.toDelta(r,i,o);try{for(let l=0;l<s.length;l++){const u=s[l];a.push(e.text(u.insert,Xme(u.attributes,e)))}}catch{return t.doc.transact(u=>{t._item.delete(u)},mr),null}return a},jme=(t,e)=>{const n=new Ca,r=t.map(i=>({insert:i.text,attributes:fY(i.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},Gme=(t,e)=>{const n=new zi(t.type.name);for(const r in t.attrs){const i=t.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,qE(t).map(r=>FD(r,e))),e.mapping.set(n,t),n},FD=(t,e)=>t instanceof Array?jme(t,e):Gme(t,e),S7=t=>typeof t=="object"&&t!==null,Ck=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(i=>e[i]!==null).length);for(let i=0;i<n.length&&r;i++){const o=n[i],a=t[o],s=e[o];r=o==="ychange"||a===s||S7(a)&&S7(s)&&Ck(a,s)}return r},qE=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.isText){const o=[];for(let a=e[r];r<e.length&&a.isText;a=e[++r])o.push(a);r--,n.push(o)}else n.push(i)}return n},uY=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,i)=>r.insert===e[i].text&&vV(r.attributes||{}).length===e[i].marks.length&&Pm(r.attributes,(o,a)=>{const s=cY(a),l=e[i].marks;return Ck(o,l.find(u=>u.type.name===s)?.attrs)}))},R1=(t,e)=>{if(t instanceof zi&&!(e instanceof Array)&&$D(t,e)){const n=qE(e);return t._length===n.length&&Ck(t.getAttributes(),e.attrs)&&t.toArray().every((r,i)=>R1(r,n[i]))}return t instanceof Ca&&e instanceof Array&&uY(t,e)},Mx=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),T7=(t,e,n)=>{const r=t.toArray(),i=qE(e),o=i.length,a=r.length,s=ku(a,o);let l=0,u=0,c=!1;for(;l<s;l++){const f=r[l],d=i[l];if(Mx(n.mapping.get(f),d))c=!0;else if(!R1(f,d))break}for(;l+u<s;u++){const f=r[a-u-1],d=i[o-u-1];if(Mx(n.mapping.get(f),d))c=!0;else if(!R1(f,d))break}return{equalityFactor:l+u,foundMappedChild:c}},Yme=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Ys?e+=n.content.str:n.content instanceof ai&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},Wme=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:i}=Yme(t),o=e.map(u=>({insert:u.text,attributes:Object.assign({},r,fY(u.marks,n))})),{insert:a,remove:s,index:l}=Dme(i,o.map(u=>u.insert).join(""));t.delete(l,s),t.insert(l,a),t.applyDelta(o.map(u=>({retain:u.insert.length,attributes:u.attributes})))},Kme=/(.*)(--[a-zA-Z0-9+/=]{8})$/,cY=t=>Kme.exec(t)?.[1]??t,Xme=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(cY(r),t[r]));return n},fY=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const i=Js(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[i?`${r.type.name}--${Pme(r.toJSON())}`:r.type.name]=r.attrs}}),n},PD=(t,e,n,r)=>{if(e instanceof zi&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof zi){const f=e.getAttributes(),d=n.attrs;for(const h in d)d[h]!==null?f[h]!==d[h]&&h!=="ychange"&&e.setAttribute(h,d[h]):e.removeAttribute(h);for(const h in f)d[h]===void 0&&e.removeAttribute(h)}const i=qE(n),o=i.length,a=e.toArray(),s=a.length,l=ku(o,s);let u=0,c=0;for(;u<l;u++){const f=a[u],d=i[u];if(!Mx(r.mapping.get(f),d))if(R1(f,d))r.mapping.set(f,d);else break}for(;c+u<l;c++){const f=a[s-c-1],d=i[o-c-1];if(!Mx(r.mapping.get(f),d))if(R1(f,d))r.mapping.set(f,d);else break}t.transact(()=>{for(;s-u-c>0&&o-u-c>0;){const d=a[u],h=i[u],m=a[s-c-1],v=i[o-c-1];if(d instanceof Ca&&h instanceof Array)uY(d,h)||Wme(d,h,r),u+=1;else{let b=d instanceof zi&&$D(d,h),x=m instanceof zi&&$D(m,v);if(b&&x){const C=T7(d,h,r),w=T7(m,v,r);C.foundMappedChild&&!w.foundMappedChild?x=!1:!C.foundMappedChild&&w.foundMappedChild||C.equalityFactor<w.equalityFactor?b=!1:x=!1}b?(PD(t,d,h,r),u+=1):x?(PD(t,m,v,r),c+=1):(r.mapping.delete(e.get(u)),e.delete(u,1),e.insert(u,[FD(h,r)]),u+=1)}}const f=s-u-c;if(s===1&&o===0&&a[0]instanceof Ca?(r.mapping.delete(a[0]),a[0].delete(0,a[0].length)):f>0&&(e.slice(u,u+f).forEach(d=>r.mapping.delete(d)),e.delete(u,f)),u+c<o){const d=[];for(let h=u;h<o-c;h++)d.push(FD(i[h],r));e.insert(u,d)}},mr)},$D=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let Yg=null;const Zme=()=>{const t=Yg;Yg=null,t.forEach((e,n)=>{const r=n.state.tr,i=mr.getState(n.state);i&&i.binding&&!i.binding.isDestroyed&&(e.forEach((o,a)=>{r.setMeta(a,o)}),n.dispatch(r))})},Qme=(t,e,n)=>{Yg||(Yg=new Map,wM(0,Zme)),Js(Yg,t,xo).set(e,n)},B1=(t,e,n)=>{if(t===0)return GA(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof Ca){if(r._length>=t)return GA(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<i)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&i>1)return new y1(r._item===null?null:r._item.id,r._item===null?v1(r):null,null);if(t-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new y1(r._item===null?null:r._item.id,r._item===null?v1(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Ao();if(t===0&&r.constructor!==Ca&&r!==e)return Jme(r._item.parent,r._item)}return GA(e,e._length,e.length===0?-1:0)},Jme=(t,e)=>{let n=null,r=null;return t._item===null?r=v1(t):n=Qt(t._item.id.client,t._item.id.clock),new y1(n,r,e.id)},Pd=(t,e,n,r)=>{const i=jse(n,t);if(i===null||i.type!==e&&!b1(e,i.type._item))return null;let o=i.type,a=0;if(o.constructor===Ca)a=i.index;else if(o._item===null||!o._item.deleted){let s=o._first,l=0;for(;l<o._length&&l<i.index&&s!==null;){if(!s.deleted){const u=s.content.type;l++,u instanceof Ca?a+=u._length:a+=r.get(u).nodeSize}s=s.right}a+=1}for(;o!==e&&o._item!==null;){const s=o._item.parent;if(s._item===null||!s._item.deleted){a+=1;let l=s._first;for(;l!==null;){const u=l.content.type;if(u===o)break;l.deleted||(u instanceof Ca?a+=u._length:a+=r.get(u).nodeSize),l=l.right}}o=s}return a-1},e0e=(t,e,n)=>t!==e,t0e=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode(""),i=document.createTextNode("");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},dY=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),n0e=/^#[0-9a-fA-F]{6}$/,A7=(t,e,n,r,i)=>{const o=mr.getState(t),a=o.doc,s=[];return o.snapshot!=null||o.prevSnapshot!=null||o.binding.mapping.size===0?nn.create(t.doc,[]):(e.getStates().forEach((l,u)=>{if(n(a.clientID,u,l)&&l.cursor!=null){const c=l.user||{};c.color==null?c.color="#ffa500":n0e.test(c.color)||console.warn("A user uses an unsupported color format",c),c.name==null&&(c.name=`User: ${u}`);let f=Pd(a,o.type,Hg(l.cursor.anchor),o.binding.mapping),d=Pd(a,o.type,Hg(l.cursor.head),o.binding.mapping);if(f!==null&&d!==null){const h=js(t.doc.content.size-1,0);f=ku(f,h),d=ku(d,h),s.push(Un.widget(d,()=>r(c,u),{key:u+"",side:10}));const m=ku(f,d),v=js(f,d);s.push(Un.inline(m,v,i(c,u),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),nn.create(t.doc,s))},r0e=(t,{awarenessStateFilter:e=e0e,cursorBuilder:n=t0e,selectionBuilder:r=dY,getSelection:i=a=>a.selection}={},o="cursor")=>new Wt({key:Ty,state:{init(a,s){return A7(s,t,e,n,r)},apply(a,s,l,u){const c=mr.getState(u),f=a.getMeta(Ty);return c&&c.isChangeOrigin||f&&f.awarenessUpdated?A7(u,t,e,n,r):s.map(a.mapping,a.doc)}},props:{decorations:a=>Ty.getState(a)},view:a=>{const s=()=>{a.docView&&Qme(a,Ty,{awarenessUpdated:!0})},l=()=>{const u=mr.getState(a.state),c=t.getLocalState()||{};if(a.hasFocus()){const f=i(a.state),d=B1(f.anchor,u.type,u.binding.mapping),h=B1(f.head,u.type,u.binding.mapping);(c.cursor==null||!jR(Hg(c.cursor.anchor),d)||!jR(Hg(c.cursor.head),h))&&t.setLocalStateField(o,{anchor:d,head:h})}else c.cursor!=null&&Pd(u.doc,u.type,Hg(c.cursor.anchor),u.binding.mapping)!==null&&t.setLocalStateField(o,null)};return t.on("change",s),a.dom.addEventListener("focusin",l),a.dom.addEventListener("focusout",l),{update:l,destroy:()=>{a.dom.removeEventListener("focusin",l),a.dom.removeEventListener("focusout",l),t.off("change",s),t.setLocalStateField(o,null)}}}}),i0e=t=>Ol.getState(t)?.undoManager?.undo()!=null,o0e=t=>Ol.getState(t)?.undoManager?.redo()!=null,a0e=(t,e)=>e==null?Ol.getState(t)?.undoManager?.canUndo():i0e(t),s0e=(t,e)=>e==null?Ol.getState(t)?.undoManager?.canRedo():o0e(t),l0e=new Set(["paragraph"]),u0e=(t,e)=>!(t instanceof yr)||!(t.content instanceof el)||!(t.content.type instanceof df||t.content.type instanceof zi&&e.has(t.content.type.nodeName))||t.content.type._length===0,c0e=({protectedNodes:t=l0e,trackedOrigins:e=[],undoManager:n=null}={})=>new Wt({key:Ol,state:{init:(r,i)=>{const o=mr.getState(i),a=n||new aq(o.type,{trackedOrigins:new Set([mr].concat(e)),deleteFilter:s=>u0e(s,t),captureTransaction:s=>s.meta.get("addToHistory")!==!1});return{undoManager:a,prevSel:null,hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}},apply:(r,i,o,a)=>{const s=mr.getState(a).binding,l=i.undoManager,u=l.undoStack.length>0,c=l.redoStack.length>0;return s?{undoManager:l,prevSel:Dx(s,o),hasUndoOps:u,hasRedoOps:c}:u!==i.hasUndoOps||c!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):i}},view:r=>{const i=mr.getState(r.state),o=Ol.getState(r.state).undoManager;return o.on("stack-item-added",({stackItem:a})=>{const s=i.binding;s&&a.meta.set(s,Ol.getState(r.state).prevSel)}),o.on("stack-item-popped",({stackItem:a})=>{const s=i.binding;s&&(s.beforeTransactionSelection=a.meta.get(s)||s.beforeTransactionSelection)}),{destroy:()=>{o.destroy()}}}}),Xp=new WeakMap,_2=new WeakMap,kx={current:[]};let vN=!1;const Ay=new Set,N7=new Map;function hY(t){const e=Array.from(t).sort((n,r)=>n instanceof Zp&&n.options.deps.includes(r)?1:r instanceof Zp&&r.options.deps.includes(n)?-1:0);for(const n of e){if(kx.current.includes(n))continue;kx.current.push(n),n.recompute();const r=_2.get(n);if(r)for(const i of r){const o=Xp.get(i);o&&hY(o)}}}function f0e(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function d0e(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function h0e(t){if(Ay.add(t),!vN)try{for(vN=!0;Ay.size>0;){const e=Array.from(Ay);Ay.clear();for(const n of e){const r=N7.get(n)??n.prevState;n.prevState=r,f0e(n)}for(const n of e){const r=Xp.get(n);r&&(kx.current.push(n),hY(r))}for(const n of e){const r=Xp.get(n);if(r)for(const i of r)d0e(i)}}}finally{vN=!1,kx.current=[],N7.clear()}}function p0e(t){return typeof t=="function"}class zD{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,o;this.listeners.add(r);const a=(o=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:o.call(i,r,this);return()=>{this.listeners.delete(r),a?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,i;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):p0e(e)?this.state=e(this.prevState):this.state=e,(i=(r=this.options)==null?void 0:r.onUpdate)==null||i.call(r),h0e(this)}}class Zp{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,r=new Array(n),i=new Array(n);for(let o=0;o<n;o++){const a=this.options.deps[o];r[o]=a.prevState,i[o]=a.state}return this.lastSeenDepValues=i,{prevDepVals:r,currDepVals:i,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const i=this.getDepVals();this.state=this.options.fn(i),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const o of this.options.deps)o instanceof Zp&&o.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let o=0;o<i.length;o++)if(i[o]!==r[o]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const o=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),o?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof Zp)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof zD){let r=Xp.get(n);r||(r=new Set,Xp.set(n,r)),r.add(this);let i=_2.get(this);i||(i=new Set,_2.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof Zp)this.unregisterFromGraph(n.options.deps);else if(n instanceof zD){const r=Xp.get(n);r&&r.delete(this);const i=_2.get(this);i&&i.delete(n)}}}const UD=Symbol("originalFactory");function Fn(t){if(typeof t=="object"&&"key"in t)return function e(){return t[UD]=e,t};if(typeof t!="function")throw new Error("factory must be a function");return function e(n){return r=>{const i=t({editor:r.editor,options:n});return i[UD]=e,i}}}function _f(t,e){return new zD(t,e)}var D7=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},m0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,g0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,v0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,b0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,y0e=ys.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return D7("strong",{...Na(this.options.HTMLAttributes,t),children:D7("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[xm({find:m0e,type:this.type}),xm({find:v0e,type:this.type})]},addPasteRules(){return[Qd({find:g0e,type:this.type}),Qd({find:b0e,type:this.type})]}}),x0e=y0e,w0e=/(^|[^`])`([^`]+)`(?!`)$/,E0e=/(^|[^`])`([^`]+)`(?!`)/g,C0e=ys.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Na(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[xm({find:w0e,type:this.type})]},addPasteRules(){return[Qd({find:E0e,type:this.type})]}}),S0e=C0e,T0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,A0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,N0e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,D0e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,M0e=ys.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Na(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[xm({find:T0e,type:this.type}),xm({find:N0e,type:this.type})]},addPasteRules(){return[Qd({find:A0e,type:this.type}),Qd({find:D0e,type:this.type})]}}),k0e=M0e,_0e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,O0e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,I0e=ys.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Na(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[xm({find:_0e,type:this.type})]},addPasteRules(){return[Qd({find:O0e,type:this.type})]}}),R0e=I0e,B0e=ys.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Na(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),L0e=B0e,F0e=class pY{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,i){this.remove(e),this.set(n,r,i)}remove(e){this.cache.delete(e)}invalidate(e){const n=new pY(this.cache),r=e.mapping;return this.cache.forEach(([i,o],a)=>{if(a<0)return;const s=r.mapResult(a),l=e.doc.nodeAt(s.pos);if(s.deleted||!l?.eq(i))n.remove(a);else if(a!==s.pos){const u=o.map(c=>c.map(r,0,0)).filter(c=>c!=null);n.replace(a,s.pos,l,u)}}),n}};function P0e({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new gn("prosemirror-highlight");return new Wt({key:r,state:{init(i,o){const a=new F0e,[s,l]=M7(o.doc,t,e,n,a);return{cache:a,decorations:s,promises:l}},apply:(i,o)=>{const a=o.cache.invalidate(i),s=!!i.getMeta("prosemirror-highlight-refresh");if(!i.docChanged&&!s){const c=o.decorations.map(i.mapping,i.doc),f=o.promises;return{cache:a,decorations:c,promises:f}}const[l,u]=M7(i.doc,t,e,n,a);return{cache:a,decorations:l,promises:u}}},view:i=>{const o=new Set,a=()=>{if(o.size>0)return;const l=i.state.tr.setMeta("prosemirror-highlight-refresh",!0);i.dispatch(l)},s=()=>{var l;const u=r.getState(i.state);for(const c of(l=u?.promises)!=null?l:[])o.add(c),c.then(()=>{o.delete(c),a()}).catch(()=>{o.delete(c)})};return s(),{update:()=>{s()}}},props:{decorations(i){var o;return(o=this.getState(i))==null?void 0:o.decorations}}})}function M7(t,e,n,r,i){const o=[],a=[];return t.descendants((s,l)=>{if(!s.type.isTextblock)return!0;if(n.includes(s.type.name)){const u=r(s),c=i.get(l);if(c){const[f,d]=c;o.push(...d)}else{const f=e({content:s.textContent,language:u||void 0,pos:l,size:s.nodeSize});f&&Array.isArray(f)?(i.set(l,s,f),o.push(...f)):f instanceof Promise&&(i.remove(l),a.push(f))}}return!1}),[nn.create(t,o),a]}function $0e(t,e){return function({content:r,language:i,pos:o,size:a}){var s;const l=[],{tokens:u,fg:c,bg:f,rootStyle:d}=t.codeToTokens(r,{lang:i,theme:t.getLoadedThemes()[0]}),h=d||(c&&f?`--prosemirror-highlight:${c};--prosemirror-highlight-bg:${f}`:"");if(h){const v=Un.node(o,o+a,{style:h});l.push(v)}let m=o+1;for(const v of u){for(const b of v){const x=m+b.content.length,C=Un.inline(m,x,{style:z0e((s=b.htmlStyle)!=null?s:`color: ${b.color}`),class:"shiki"});l.push(C),m=x}m+=1}return l}}function z0e(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}var U0e=Object.defineProperty,H0e=(t,e,n)=>e in t?U0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vd=(t,e,n)=>H0e(t,typeof e!="symbol"?e+"":e,n);const V0e=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function Qa(t,e="Ctrl"){return V0e()?t.replace("Mod",""):t.replace("Mod",e)}function $r(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}const HD=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function q0e(t,e,n,r){const i=document.createElement("div");i.className=$r("bn-block-content",n.class),i.setAttribute("data-content-type",t);for(const[a,s]of Object.entries(n))a!=="class"&&i.setAttribute(a,s);const o=document.createElement(e);o.className=$r("bn-inline-content",r.class);for(const[a,s]of Object.entries(r))a!=="class"&&o.setAttribute(a,s);return i.appendChild(o),{dom:i,contentDOM:o}}const k7=(t,e)=>{let n=mh(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const i=r(n);if(typeof i!="object"||!("dom"in i))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return i};function j0e(t,e="<br>"){const n=t.querySelectorAll("p");if(n.length>1){const r=n[0];for(let i=1;i<n.length;i++){const o=n[i];r.innerHTML+=e+o.innerHTML,o.remove()}}}function VD(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _7(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function G0e(t){var e;const n=["mp4","webm","ogg","mov","mkv","flv","avi","wmv","m4v"];try{const r=((e=new URL(t).pathname.split(".").pop())==null?void 0:e.toLowerCase())||"";return n.includes(r)}catch{return!1}}function Y0e(t){const e={};return Object.entries(t).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:i=>{const o=i.getAttribute(VD(n));if(o===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return o==="true"?!0:o==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const a=parseFloat(o);return!Number.isNaN(a)&&Number.isFinite(a)?a:null}return o},renderHTML:i=>i[n]!==r.default?{[VD(n)]:i[n]}:{}}}),e}function W0e(t,e,n,r){const i=t();if(i===void 0)throw new Error("Cannot find node position");const o=n.state.doc.resolve(i).node().attrs.id;if(!o)throw new Error("Block doesn't have id");const a=e.getBlock(o);if(a.type!==r)throw new Error("Block type does not match");return a}function qD(t,e,n,r,i=!1,o){const a=document.createElement("div");if(o!==void 0)for(const[s,l]of Object.entries(o))s!=="class"&&a.setAttribute(s,l);a.className=$r("bn-block-content",o?.class||""),a.setAttribute("data-content-type",e);for(const[s,l]of Object.entries(n)){const u=r[s].default;l!==u&&a.setAttribute(VD(s),l)}return i&&a.setAttribute("data-file-block",""),a.appendChild(t.dom),t.contentDOM&&(t.contentDOM.className=$r("bn-inline-content",t.contentDOM.className)),{...t,dom:a}}function K0e(t,e,n){return{config:{type:t.type,content:t.content,propSchema:e},implementation:{node:t.node,render:k7,toExternalHTML:k7},extensions:n}}function X0e(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function Z0e(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e.parse&&n.push({tag:"*",getAttrs(r){var i;if(typeof r=="string")return!1;const o=(i=e.parse)==null?void 0:i.call(e,r);return o===void 0?!1:o},preserveWhitespace:!0,getContent:t.content==="inline"||t.content==="none"?(r,i)=>{var o;if(e.parseContent)return e.parseContent({el:r,schema:i});if(t.content==="inline"){const a=r.cloneNode(!0);return j0e(a,(o=e.meta)!=null&&o.code?`
`:"<br>"),$s.fromSchema(i).parse(a,{topNode:i.nodes.paragraph.create(),preserveWhitespace:!0}).content}return Ue.empty}:void 0}),n}function Q0e(t,e,n,r){var i,o,a,s;const l=e.node||tl.create({name:t.type,content:t.content==="inline"?"inline*":t.content==="none"?"":t.content,group:"blockContent",selectable:((i=e.meta)==null?void 0:i.selectable)??!0,isolating:((o=e.meta)==null?void 0:o.isolating)??!0,code:((a=e.meta)==null?void 0:a.code)??!1,defining:((s=e.meta)==null?void 0:s.defining)??!0,priority:r,addAttributes(){return Y0e(t.propSchema)},parseHTML(){return Z0e(t,e)},renderHTML({HTMLAttributes:u}){var c;const f=document.createElement("div");return qD({dom:f,contentDOM:t.content==="inline"?f:void 0},t.type,{},t.propSchema,((c=e.meta)==null?void 0:c.fileBlockAccept)!==void 0,u)},addNodeView(){return u=>{var c,f;const d=this.options.editor,h=W0e(u.getPos,d,this.editor,t.type),m=((c=this.options.domAttributes)==null?void 0:c.blockContent)||{},v=e.render.call({blockContentDOMAttributes:m,props:u,renderType:"nodeView"},h,d);return((f=e.meta)==null?void 0:f.selectable)===!1&&X0e(v,this.editor),v}}});if(l.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return{config:t,implementation:{...e,node:l,render(u,c){var f;const d=((f=l.options.domAttributes)==null?void 0:f.blockContent)||{};return e.render.call({blockContentDOMAttributes:d,props:void 0,renderType:"dom"},u,c)},toExternalHTML:(u,c)=>{var f,d;const h=((f=l.options.domAttributes)==null?void 0:f.blockContent)||{};return((d=e.toExternalHTML)==null?void 0:d.call({blockContentDOMAttributes:h},u,c))??e.render.call({blockContentDOMAttributes:h,renderType:"dom",props:void 0},u,c)}},extensions:n}}function Ia(t,e,n){return(r={})=>{const i=typeof t=="function"?t(r):t,o=typeof e=="function"?e(r):e,a=n?typeof n=="function"?n(r):n:void 0;return{config:i,implementation:{...o,toExternalHTML(s,l){var u,c;const f=(u=o.toExternalHTML)==null?void 0:u.call({blockContentDOMAttributes:this.blockContentDOMAttributes},s,l);if(f!==void 0)return qD(f,s.type,s.props,i.propSchema,((c=o.meta)==null?void 0:c.fileBlockAccept)!==void 0)},render(s,l){var u;const c=o.render.call({blockContentDOMAttributes:this.blockContentDOMAttributes,renderType:this.renderType,props:this.props},s,l);return qD(c,s.type,s.props,i.propSchema,((u=o.meta)==null?void 0:u.fileBlockAccept)!==void 0,this.blockContentDOMAttributes)}},extensions:a}}}function mY(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function J0e(t){return t==="boolean"?{}:{stringValue:{default:void 0,keepOnSplit:!0,parseHTML:e=>e.getAttribute("data-value"),renderHTML:e=>e.stringValue!==void 0?{"data-value":e.stringValue}:{}}}}function Ny(t,e,n,r){return t.dom.setAttribute("data-style-type",e),r==="string"&&t.dom.setAttribute("data-value",n),t.contentDOM&&t.contentDOM.setAttribute("data-editable",""),t}function gY(t,e){return{config:t,implementation:e}}function bg(t,e){return gY({type:t.name,propSchema:e},{mark:t,render(n,r){const i=r.pmSchema.marks[t.name].spec.toDOM;if(i===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r.pmSchema.mark(t.name,{stringValue:n}),a=Aa.renderSpec(document,i(o,!0));if(typeof a!="object"||!("dom"in a))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return a},toExternalHTML(n,r){const i=r.pmSchema.marks[t.name].spec.toDOM;if(i===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r.pmSchema.mark(t.name,{stringValue:n}),a=Aa.renderSpec(document,i(o,!0));if(typeof a!="object"||!("dom"in a))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return a}})}function vY(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function ege(t,e){const n=[{tag:`[data-style-type="${t.type}"]`,contentElement:r=>{const i=r;return i.matches("[data-editable]")?i:i.querySelector("[data-editable]")||i}}];return e&&n.push({tag:"*",consuming:!1,getAttrs(r){if(typeof r=="string")return!1;const i=e?.(r);return i===void 0?!1:{stringValue:i}}}),n}function bY(t,e){const n=ys.create({name:t.type,addAttributes(){return J0e(t.propSchema)},parseHTML(){return ege(t,e.parse)},renderHTML({mark:r}){const i=(e.toExternalHTML||e.render)(r.attrs.stringValue);return Ny(i,t.type,r.attrs.stringValue,t.propSchema)},addMarkView(){return({mark:r})=>{const i=e.render(r.attrs.stringValue);return Ny(i,t.type,r.attrs.stringValue,t.propSchema)}}});return gY(t,{...e,mark:n,render:r=>{const i=e.render(r);return Ny(i,t.type,r,t.propSchema)},toExternalHTML:r=>{const i=(e.toExternalHTML||e.render)(r);return Ny(i,t.type,r,t.propSchema)}})}function Mo(t,e){let n,r;if(e.firstChild.descendants((i,o)=>n?!1:!Sk(i)||i.attrs.id!==t?!0:(n=i,r=o+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function Sk(t){return t.type.isInGroup("bnBlock")}const tge=(t,e)=>({tr:n,dispatch:r})=>(r&&jE(n,t,e),!0);function jE(t,e,n,r,i){const o=UE(t.doc.resolve(e));let a=null;o.blockNoteType==="table"&&(a=ige(t));const s=Kr(t),l=s.nodes[o.blockNoteType],u=s.nodes[n.type||o.blockNoteType],c=u.isInGroup("bnBlock")?u:s.nodes.blockContainer;if(o.isBlockContainer&&u.isInGroup("blockContent"))O7(n,t,o),nge(n,t,l,u,o);else if(!o.isBlockContainer&&u.isInGroup("bnBlock"))O7(n,t,o);else{const f=Ir(o.bnBlock.node,s);t.replaceWith(o.bnBlock.beforePos,o.bnBlock.afterPos,mh({children:f.children,...n},s));return}t.setNodeMarkup(o.bnBlock.beforePos,c,{...o.bnBlock.node.attrs,...n.props}),a&&oge(t,o,a)}function nge(t,e,n,r,i,o,a){const s=Kr(e);let l="keep";if(t.content)if(typeof t.content=="string")l=Ws([t.content],s,r.name);else if(Array.isArray(t.content))l=Ws(t.content,s,r.name);else if(t.content.type==="tableContent")l=VE(t.content,s);else throw new Pl(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(i.blockContent.beforePos,r,{...i.blockContent.node.attrs,...t.props}):e.replaceWith(i.blockContent.beforePos,i.blockContent.afterPos,r.createChecked({...i.blockContent.node.attrs,...t.props},l))}function O7(t,e,n){const r=Kr(e);if(t.children!==void 0&&t.children.length>0){const i=t.children.map(o=>mh(o,r));if(n.childContainer)e.step(new ri(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new ot(Ue.from(i),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},i))}}}function rge(t,e,n,r,i){const o=typeof e=="string"?e:e.id,a=Mo(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);jE(t,a.posBeforeNode,n);const s=t.doc.resolve(a.posBeforeNode+1).node(),l=Kr(t);return Ir(s,l)}function ige(t){const e="selection"in t?t.selection:null;if(!(e instanceof bt))return null;const n=t.doc.resolve(e.head);let r=-1,i=-1;for(let v=n.depth;v>=0;v--){const b=n.node(v).type.name;if(r<0&&(b==="tableCell"||b==="tableHeader")&&(r=v),b==="table"){i=v;break}}if(r<0||i<0)return null;const o=n.before(r),a=n.before(i),s=t.doc.nodeAt(a);if(!s||s.type.name!=="table")return null;const l=gr.get(s),u=o-(a+1),c=l.map.indexOf(u);if(c<0)return null;const f=Math.floor(c/l.width),d=c%l.width,h=o+1+1,m=Math.max(0,e.head-h);return{row:f,col:d,offset:m}}function oge(t,e,n){var r;if(e.blockNoteType!=="table")return!1;let i=-1;if(e.isBlockContainer)i=t.mapping.map(e.blockContent.beforePos);else{const b=t.mapping.map(e.bnBlock.beforePos),x=b+(((r=t.doc.nodeAt(b))==null?void 0:r.nodeSize)||0);t.doc.nodesBetween(b,x,(C,w)=>C.type.name==="table"?(i=w,!1):!0)}const o=i>=0?t.doc.nodeAt(i):null;if(!o||o.type.name!=="table")return!1;const a=gr.get(o),s=Math.max(0,Math.min(n.row,a.height-1)),l=Math.max(0,Math.min(n.col,a.width-1)),u=s*a.width+l,c=a.map[u];if(c==null)return!1;const f=i+1+c+1,d=t.doc.nodeAt(f),h=f+1,m=d?d.content.size:0,v=h+Math.max(0,Math.min(n.offset,m));return"selection"in t&&t.setSelection(bt.create(t.doc,v)),!0}const Zc={gray:{text:"#9b9a97",background:"#ebeced"},brown:{text:"#64473a",background:"#e9e5e3"},red:{text:"#e03e3e",background:"#fbe4e4"},orange:{text:"#d9730d",background:"#f6e9d9"},yellow:{text:"#dfab01",background:"#fbf3db"},green:{text:"#4d6461",background:"#ddedea"},blue:{text:"#0b6e99",background:"#ddebf1"},purple:{text:"#6940a5",background:"#eae4f2"},pink:{text:"#ad1a72",background:"#f4dfeb"}},Ln={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},oa=t=>{const e={};return t.hasAttribute("data-background-color")?e.backgroundColor=t.getAttribute("data-background-color"):t.style.backgroundColor&&(e.backgroundColor=t.style.backgroundColor),t.hasAttribute("data-text-color")?e.textColor=t.getAttribute("data-text-color"):t.style.color&&(e.textColor=t.style.color),e.textAlignment=Ln.textAlignment.values.includes(t.style.textAlign)?t.style.textAlign:void 0,e},gh=(t,e)=>{t.backgroundColor&&t.backgroundColor!==Ln.backgroundColor.default&&(e.style.backgroundColor=t.backgroundColor in Zc?Zc[t.backgroundColor].background:t.backgroundColor),t.textColor&&t.textColor!==Ln.textColor.default&&(e.style.color=t.textColor in Zc?Zc[t.textColor].text:t.textColor),t.textAlignment&&t.textAlignment!==Ln.textAlignment.default&&(e.style.textAlign=t.textAlignment)},age=(t="backgroundColor")=>({default:Ln.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):e.style.backgroundColor?e.style.backgroundColor:Ln.backgroundColor.default,renderHTML:e=>e[t]===Ln.backgroundColor.default?{}:{"data-background-color":e[t]}}),sge=(t="textColor")=>({default:Ln.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):e.style.color?e.style.color:Ln.textColor.default,renderHTML:e=>e[t]===Ln.textColor.default?{}:{"data-text-color":e[t]}}),GE=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),i=r?.textContent??void 0;return{targetElement:n,caption:i}},Ls=Fn(({editor:t})=>{const e=_f(void 0);function n(){e.setState(void 0)}return{key:"filePanel",store:e,mount({signal:r}){const i=t.onChange(n,!1),o=t.onSelectionChange(n,!1);r.addEventListener("abort",()=>{i(),o()})},closeMenu:n,showMenu(r){e.setState(r)}}}),lge=(t,e,n)=>{const r=document.createElement("div");r.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",n?i.appendChild(n):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',r.appendChild(i);const o=document.createElement("p");o.className="bn-add-file-button-text",o.innerHTML=t.type in e.dictionary.file_blocks.add_button_text?e.dictionary.file_blocks.add_button_text[t.type]:e.dictionary.file_blocks.add_button_text.file,r.appendChild(o);const a=l=>{l.preventDefault(),l.stopPropagation()},s=()=>{var l;e.isEditable&&((l=e.getExtension(Ls))==null||l.showMenu(t.id))};return r.addEventListener("mousedown",a,!0),r.addEventListener("click",s,!0),{dom:r,destroy:()=>{r.removeEventListener("mousedown",a,!0),r.removeEventListener("click",s,!0)}}},uge='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',cge=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=uge,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},Tk=(t,e,n,r)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",t.props.url===""){const a=lge(t,e,r);i.appendChild(a.dom);const s=e.onUploadStart(l=>{if(l===t.id){i.removeChild(a.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",i.appendChild(u)}});return{dom:i,destroy:()=>{s(),a.destroy()}}}const o={dom:i};if(t.props.showPreview===!1||!n){const a=cge(t);i.appendChild(a.dom),o.destroy=()=>{var s;(s=a.destroy)==null||s.call(a)}}else i.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,i.appendChild(a)}return o},Ak=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},YE=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},I7=t=>({url:t.src||void 0}),fge='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',dge=t=>({type:"audio",propSchema:{backgroundColor:Ln.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none"}),hge=(t={})=>e=>{if(e.tagName==="AUDIO"){if(e.closest("figure"))return;const{backgroundColor:n}=oa(e);return{...I7(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=GE(e,"audio");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=oa(e);return{...I7(r),backgroundColor:o,caption:i}}},pge=(t={})=>(e,n)=>{const r=document.createElement("div");r.innerHTML=t.icon??fge;const i=document.createElement("audio");return i.className="bn-audio",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(o=>{i.src=o}):i.src=e.props.url,i.controls=!0,i.contentEditable="false",i.draggable=!1,Tk(e,n,{dom:i},r.firstElementChild)},mge=(t={})=>(e,n)=>{if(!e.props.url){const i=document.createElement("p");return i.textContent="Add audio",{dom:i}}let r;return e.props.showPreview?(r=document.createElement("audio"),r.src=e.props.url):(r=document.createElement("a"),r.href=e.props.url,r.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Ak(r,e.props.caption):YE(r,e.props.caption):{dom:r}},gge=Ia(dge,t=>({meta:{fileBlockAccept:["audio/*"]},parse:hge(t),render:pge(t),toExternalHTML:mge(t),runsBefore:["file"]})),R7=Symbol.for("blocknote.shikiParser"),bN=Symbol.for("blocknote.shikiHighlighterPromise");function vge(t){const e=globalThis;let n,r;return P0e({parser:i=>{if(!t.createHighlighter)return[];if(!n)return e[bN]=e[bN]||t.createHighlighter(),e[bN].then(a=>{n=a});const o=yY(t,i.language);return!o||o==="text"||o==="none"||o==="plaintext"||o==="txt"?[]:n.getLoadedLanguages().includes(o)?(r||(r=e[R7]||$0e(n),e[R7]=r),r(i)):n.loadLanguage(o)},languageExtractor:i=>i.attrs.language,nodeTypes:["codeBlock"]})}const bge=({defaultLanguage:t="text"})=>({type:"codeBlock",propSchema:{language:{default:t}},content:"inline"}),yge=Ia(bge,t=>({meta:{code:!0,defining:!0,isolating:!1},parse:e=>{var n,r;if(e.tagName!=="PRE"||e.childElementCount!==1||((n=e.firstElementChild)==null?void 0:n.tagName)!=="CODE")return;const i=e.firstElementChild;return{language:i.getAttribute("data-language")||((r=i.className.split(" ").find(o=>o.includes("language-")))==null?void 0:r.replace("language-",""))}},parseContent:({el:e,schema:n})=>{const r=$s.fromSchema(n),i=e.firstElementChild;return r.parse(i,{preserveWhitespace:"full",topNode:n.nodes.codeBlock.create()}).content},render(e,n){const r=document.createDocumentFragment(),i=document.createElement("pre"),o=document.createElement("code");i.appendChild(o);let a;if(t.supportedLanguages){const s=document.createElement("select");Object.entries(t.supportedLanguages??{}).forEach(([c,{name:f}])=>{const d=document.createElement("option");d.value=c,d.text=f,s.appendChild(d)}),s.value=e.props.language||t.defaultLanguage||"text";const l=c=>{const f=c.target.value;n.updateBlock(e.id,{props:{language:f}})};s.addEventListener("change",l),a=()=>s.removeEventListener("change",l);const u=document.createElement("div");u.contentEditable="false",u.appendChild(s),r.appendChild(u)}return r.appendChild(i),{dom:r,contentDOM:o,destroy:()=>{a?.()}}},toExternalHTML(e){const n=document.createElement("pre"),r=document.createElement("code");return r.className=`language-${e.props.language}`,r.dataset.language=e.props.language,n.appendChild(r),{dom:n,contentDOM:r}}}),t=>[Fn({key:"code-block-highlighter",prosemirrorPlugins:[vge(t)]}),Fn({key:"code-block-keyboard-shortcuts",keyboardShortcuts:{Delete:({editor:e})=>e.transact(n=>{const{block:r}=e.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:i}=n.selection;return i.parent.textContent?!1:(e.removeBlocks([r]),!0)}),Tab:({editor:e})=>t.indentLineWithTab===!1?!1:e.transact(n=>{const{block:r}=e.getTextCursorPosition();return r.type==="codeBlock"?(n.insertText("  "),!0):!1}),Enter:({editor:e})=>e.transact(n=>{const{block:r,nextBlock:i}=e.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:o}=n.selection,a=o.parentOffset===o.parent.nodeSize-2,s=o.parent.textContent.endsWith(`

`);if(a&&s){if(n.delete(o.pos-2,o.pos),i)return e.setTextCursorPosition(i,"start"),!0;const[l]=e.insertBlocks([{type:"paragraph"}],r,"after");return e.setTextCursorPosition(l,"start"),!0}return n.insertText(`
`),!0}),"Shift-Enter":({editor:e})=>e.transact(()=>{const{block:n}=e.getTextCursorPosition();if(n.type!=="codeBlock")return!1;const[r]=e.insertBlocks([{type:"paragraph"}],n,"after");return e.setTextCursorPosition(r,"start"),!0})},inputRules:[{find:/^```(.*?)\s$/,replace:({match:e})=>{const n=e[1].trim();return{type:"codeBlock",props:{language:{language:yY(t,n)??n}.language},content:[]}}}]})]);function yY(t,e){var n;return(n=Object.entries(t.supportedLanguages??{}).find(([r,{aliases:i}])=>i?.includes(e)||r===e))==null?void 0:n[0]}const xge=()=>({type:"divider",propSchema:{},content:"none"}),wge=Ia(xge,{meta:{isolating:!1},parse(t){if(t.tagName==="HR")return{}},render(){return{dom:document.createElement("hr")}}},[Fn({key:"divider-block-shortcuts",inputRules:[{find:new RegExp("^---$"),replace(){return{type:"divider",props:{},content:[]}}}]})]),B7=t=>({url:t.src||void 0}),Ege=()=>({type:"file",propSchema:{backgroundColor:Ln.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none"}),Cge=()=>t=>{if(t.tagName==="EMBED"){if(t.closest("figure"))return;const{backgroundColor:e}=oa(t);return{...B7(t),backgroundColor:e}}if(t.tagName==="FIGURE"){const e=GE(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e,{backgroundColor:i}=oa(t);return{...B7(n),backgroundColor:i,caption:r}}},Sge=Ia(Ege,{meta:{fileBlockAccept:["*/*"]},parse:Cge(),render(t,e){return Tk(t,e)},toExternalHTML(t){if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?YE(e,t.props.caption):{dom:e}}}),Tge={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},xY=(t,e,n,r=Tge)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:n};const i=document.createElement("div"),o=document.createElement("div");o.className="bn-toggle-wrapper";const a=document.createElement("button");a.className="bn-toggle-button",a.type="button",a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const s=m=>m.preventDefault();a.addEventListener("mousedown",s);const l=()=>{var m;o.getAttribute("data-show-children")==="true"?(o.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1),i.contains(u)&&i.removeChild(u)):(o.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0),e.isEditable&&((m=e.getBlock(t))==null?void 0:m.children.length)===0&&!i.contains(u)&&i.appendChild(u))};a.addEventListener("click",l),o.appendChild(a),o.appendChild(n);const u=document.createElement("button");u.className="bn-toggle-add-block-button",u.type="button",u.textContent=e.dictionary.toggle_blocks.add_block_button;const c=m=>m.preventDefault();u.addEventListener("mousedown",c);const f=()=>{e.transact(()=>{const m=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(m.children[0].id,"end"),e.focus()})};u.addEventListener("click",f),i.appendChild(o);let d=t.children.length;const h=e.onChange(()=>{var m;const v=((m=e.getBlock(t))==null?void 0:m.children.length)??0;v>d?(o.getAttribute("data-show-children")==="false"&&(o.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0)),i.contains(u)&&i.removeChild(u)):v===0&&v<d&&(o.getAttribute("data-show-children")==="true"&&(o.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1)),i.contains(u)&&i.removeChild(u)),d=v});return r.get(t)?(o.setAttribute("data-show-children","true"),e.isEditable&&t.children.length===0&&i.appendChild(u)):o.setAttribute("data-show-children","false"),{dom:i,ignoreMutation:m=>m instanceof MutationRecord&&(m.type==="attributes"&&m.target===o&&m.attributeName==="data-show-children"||m.type==="childList"&&(m.addedNodes[0]===u||m.removedNodes[0]===u)),destroy:()=>{a.removeEventListener("mousedown",s),a.removeEventListener("click",l),u.removeEventListener("mousedown",c),u.removeEventListener("click",f),h?.()}}},wY=[1,2,3,4,5,6],Age=t=>({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"heading",props:{level:t}}),!0)},Nge=({defaultLevel:t=1,levels:e=wY,allowToggleHeadings:n=!0}={})=>({type:"heading",propSchema:{...Ln,level:{default:t,values:e},...n?{isToggleable:{default:!1,optional:!0}}:{}},content:"inline"}),Dge=Ia(Nge,({allowToggleHeadings:t=!0}={})=>({meta:{isolating:!1},parse(e){let n;switch(e.tagName){case"H1":n=1;break;case"H2":n=2;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6;break;default:return}return{...oa(e),level:n}},render(e,n){const r=document.createElement(`h${e.props.level}`);return t?{...xY(e,n,r),contentDOM:r}:{dom:r,contentDOM:r}},toExternalHTML(e){const n=document.createElement(`h${e.props.level}`);return gh(e.props,n),{dom:n,contentDOM:n}}}),({levels:t=wY}={})=>[Fn({key:"heading-shortcuts",keyboardShortcuts:Object.fromEntries(t.map(e=>[`Mod-Alt-${e}`,Age(e)])??[]),inputRules:t.map(e=>({find:new RegExp(`^(#{${e}})\\s$`),replace({match:n}){return{type:"heading",props:{level:n[1].length}}}}))})]),EY=(t,e,n,r,i)=>{const{dom:o,destroy:a}=Tk(t,e,n,i),s=o;s.style.position="relative",t.props.url&&t.props.showPreview&&(t.props.previewWidth?s.style.width=`${t.props.previewWidth}px`:s.style.width="fit-content");const l=document.createElement("div");l.className="bn-resize-handle",l.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";const c=document.createElement("div");c.style.position="absolute",c.style.height="100%",c.style.width="100%";let f,d=t.props.previewWidth;const h=w=>{var A,E;if(!f){!e.isEditable&&r.contains(l)&&r.contains(u)&&(r.removeChild(l),r.removeChild(u));return}let T;const N="touches"in w?w.touches[0].clientX:w.clientX;t.props.textAlignment==="center"?f.handleUsed==="left"?T=f.initialWidth+(f.initialClientX-N)*2:T=f.initialWidth+(N-f.initialClientX)*2:f.handleUsed==="left"?T=f.initialWidth+f.initialClientX-N:T=f.initialWidth+N-f.initialClientX,d=Math.min(Math.max(T,64),((E=(A=e.domElement)==null?void 0:A.firstElementChild)==null?void 0:E.clientWidth)||Number.MAX_VALUE),s.style.width=`${d}px`},m=w=>{(!w.target||!s.contains(w.target)||!e.isEditable)&&r.contains(l)&&r.contains(u)&&(r.removeChild(l),r.removeChild(u)),f&&(f=void 0,s.contains(c)&&s.removeChild(c),e.updateBlock(t,{props:{previewWidth:d}}))},v=()=>{e.isEditable&&(r.appendChild(l),r.appendChild(u))},b=w=>{w.relatedTarget===l||w.relatedTarget===u||f||e.isEditable&&r.contains(l)&&r.contains(u)&&(r.removeChild(l),r.removeChild(u))},x=w=>{w.preventDefault(),s.contains(c)||s.appendChild(c);const A="touches"in w?w.touches[0].clientX:w.clientX;f={handleUsed:"left",initialWidth:s.clientWidth,initialClientX:A}},C=w=>{w.preventDefault(),s.contains(c)||s.appendChild(c);const A="touches"in w?w.touches[0].clientX:w.clientX;f={handleUsed:"right",initialWidth:s.clientWidth,initialClientX:A}};return window.addEventListener("mousemove",h),window.addEventListener("touchmove",h),window.addEventListener("mouseup",m),window.addEventListener("touchend",m),s.addEventListener("mouseenter",v),s.addEventListener("mouseleave",b),l.addEventListener("mousedown",x),l.addEventListener("touchstart",x),u.addEventListener("mousedown",C),u.addEventListener("touchstart",C),{dom:s,destroy:()=>{a?.(),window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),s.removeEventListener("mouseenter",v),s.removeEventListener("mouseleave",b),l.removeEventListener("mousedown",x),l.removeEventListener("touchstart",x),u.removeEventListener("mousedown",C),u.removeEventListener("touchstart",C)}}},L7=t=>{const e=t.src||void 0,n=t.width||void 0,r=t.alt||void 0;return{url:e,previewWidth:n,name:r}},Mge='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',kge=(t={})=>({type:"image",propSchema:{textAlignment:Ln.textAlignment,backgroundColor:Ln.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),_ge=(t={})=>e=>{if(e.tagName==="IMG"){if(e.closest("figure"))return;const{backgroundColor:n}=oa(e);return{...L7(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=GE(e,"img");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=oa(e);return{...L7(r),backgroundColor:o,caption:i}}},Oge=(t={})=>(e,n)=>{const r=document.createElement("div");r.innerHTML=t.icon??Mge;const i=document.createElement("div");i.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(a=>{o.src=a}):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,i.appendChild(o),EY(e,n,{dom:i},i,r.firstElementChild)},Ige=(t={})=>(e,n)=>{if(!e.props.url){const i=document.createElement("p");return i.textContent="Add image",{dom:i}}let r;return e.props.showPreview?(r=document.createElement("img"),r.src=e.props.url,r.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(r.width=e.props.previewWidth)):(r=document.createElement("a"),r.href=e.props.url,r.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Ak(r,e.props.caption):YE(r,e.props.caption):{dom:r}},Rge=Ia(kge,t=>({meta:{fileBlockAccept:["image/*"]},parse:_ge(t),render:Oge(t),toExternalHTML:Ige(t),runsBefore:["file"]})),Bge=(t,e,n)=>({state:r,dispatch:i})=>i?CY(r.tr,t,e,n):!0,CY=(t,e,n,r)=>{const i=gf(t.doc,e),o=vf(i);if(!o.isBlockContainer)return!1;const a=Kr(t),s=[{type:o.bnBlock.node.type,attrs:r?{...o.bnBlock.node.attrs,id:void 0}:{}},{type:n?o.blockContent.node.type:a.nodes.paragraph,attrs:r?{...o.blockContent.node.attrs}:{}}];return t.split(e,2,s),!0},WE=(t,e)=>{const{blockInfo:n,selectionEmpty:r}=t.transact(a=>({blockInfo:uv(a),selectionEmpty:a.selection.anchor===a.selection.head}));if(!n.isBlockContainer)return!1;const{bnBlock:i,blockContent:o}=n;return o.node.type.name!==e||!r?!1:o.node.childCount===0?(t.transact(a=>{jE(a,i.beforePos,{type:"paragraph",props:{}})}),!0):o.node.childCount>0?t.transact(a=>(a.deleteSelection(),CY(a,a.selection.from,!0))):!1};function Nk(t,e,n){var r,i,o;const a=$s.fromSchema(e),s=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const h of Array.from(s.childNodes))l.appendChild(h.cloneNode(!0));let u=a.parse(l,{topNode:e.nodes.blockGroup.create()});((i=(r=u.firstChild)==null?void 0:r.firstChild)==null?void 0:i.type.name)==="checkListItem"&&(u=u.copy(u.content.cut(u.firstChild.firstChild.nodeSize+2)));const c=(o=u.firstChild)==null?void 0:o.firstChild;if(!(c!=null&&c.isTextblock))return Ue.from(u);const f=e.nodes[n].create({},c.content),d=u.content.cut(c.nodeSize+2);if(d.size>0){const h=u.copy(d);return f.content.addToEnd(h)}return f.content}const Lge=()=>({type:"bulletListItem",propSchema:{...Ln},content:"inline"}),Fge=Ia(Lge,{meta:{isolating:!1},parse(t){var e;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"))return oa(t)},parseContent:({el:t,schema:e})=>Nk(t,e,"bulletListItem"),render(){const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return gh(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[Fn({key:"bullet-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>WE(t,"bulletListItem"),"Mod-Shift-8":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"bulletListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^[-+*]\\s$"),replace({editor:t}){if(Vo(t.prosemirrorState).blockNoteType!=="heading")return{type:"bulletListItem",props:{}}}}]})]),Pge=()=>({type:"checkListItem",propSchema:{...Ln,checked:{default:!1,type:"boolean"}},content:"inline"}),$ge=Ia(Pge,{meta:{isolating:!1},parse(t){var e;if(t.tagName==="input")return t.closest("[data-content-type]")||t.closest("li")?void 0:t.type==="checkbox"?{checked:t.checked}:void 0;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL")){const r=t.querySelector("input[type=checkbox]")||null;return r===null?void 0:{...oa(t),checked:r.checked}}},parseContent:({el:t,schema:e})=>Nk(t,e,"checkListItem"),render(t,e){const n=document.createDocumentFragment(),r=document.createElement("input");r.type="checkbox",r.checked=t.props.checked,t.props.checked&&r.setAttribute("checked",""),r.addEventListener("change",()=>{e.updateBlock(t,{props:{checked:!t.props.checked}})});const i=document.createElement("p");return n.appendChild(r),n.appendChild(i),{dom:n,contentDOM:i}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("input");n.type="checkbox",n.checked=t.props.checked,t.props.checked&&n.setAttribute("checked","");const r=document.createElement("p");return gh(t.props,e),e.appendChild(n),e.appendChild(r),{dom:e,contentDOM:r}},runsBefore:["bulletListItem"]},[Fn({key:"check-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>WE(t,"checkListItem"),"Mod-Shift-9":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"checkListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^\\[\\s*\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!1},content:[]}}},{find:new RegExp("^\\[[Xx]\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!0}}}}]})]);function SY(t,e,n,r){let i=t.firstChild.attrs.start||1,o=!0;const a=!!t.firstChild.attrs.start,s=vf({posBeforeNode:e,node:t});if(!s.isBlockContainer)throw new Error("impossible");const l=n.doc.resolve(s.bnBlock.beforePos).nodeBefore,u=l?r.get(l):void 0;return u!==void 0?(i=u+1,o=!1):l&&vf({posBeforeNode:s.bnBlock.beforePos-l.nodeSize,node:l}).blockNoteType==="numberedListItem"&&(i=SY(l,s.bnBlock.beforePos-l.nodeSize,n,r).index+1,o=!1),r.set(t,i),{index:i,isFirst:o,hasStart:a}}function F7(t,e){const n=new Map,r=e.decorations.map(t.mapping,t.doc),i=[];t.doc.nodesBetween(0,t.doc.nodeSize-2,(a,s)=>{if(a.type.name==="blockContainer"&&a.firstChild.type.name==="numberedListItem"){const{index:l,isFirst:u,hasStart:c}=SY(a,s,t,n);if(r.find(s,s+a.nodeSize,f=>f.index===l&&f.isFirst===u&&f.hasStart===c).length===0){const f=t.doc.nodeAt(s+1);i.push(Un.node(s+1,s+1+f.nodeSize,{"data-index":l.toString()}))}}});const o=i.flatMap(a=>r.find(a.from,a.to));return{decorations:r.remove(o).add(t.doc,i)}}const zge=()=>new Wt({key:new gn("numbered-list-indexing-decorations"),state:{init(t,e){return F7(e.tr,{decorations:nn.empty})},apply(t,e){return!t.docChanged&&!t.selectionSet&&e.decorations?e:F7(t,e)}},props:{decorations(t){var e;return((e=this.getState(t))==null?void 0:e.decorations)??nn.empty}}}),Uge=()=>({type:"numberedListItem",propSchema:{...Ln,start:{default:void 0,type:"number"}},content:"inline"}),Hge=Ia(Uge,{meta:{isolating:!1},parse(t){var e;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL")){const r=parseInt(n.getAttribute("start")||"1"),i=oa(t);return t.previousElementSibling||r===1?i:{...i,start:r}}},parseContent:({el:t,schema:e})=>Nk(t,e,"numberedListItem"),render(){const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return gh(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[Fn({key:"numbered-list-item-shortcuts",inputRules:[{find:new RegExp("^(\\d+)\\.\\s$"),replace({match:t,editor:e}){if(Vo(e.prosemirrorState).blockNoteType==="heading")return;const n=parseInt(t[1]);return{type:"numberedListItem",props:{start:n!==1?n:void 0}}}}],keyboardShortcuts:{Enter:({editor:t})=>WE(t,"numberedListItem"),"Mod-Shift-7":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"numberedListItem",props:{}}),!0)}},prosemirrorPlugins:[zge()]})]),Vge=()=>({type:"toggleListItem",propSchema:{...Ln},content:"inline"}),qge=Ia(Vge,{meta:{isolating:!1},render(t,e){const n=document.createElement("p");return{...xY(t,e,n),contentDOM:n}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return gh(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[Fn({key:"toggle-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>WE(t,"toggleListItem"),"Mod-Shift-6":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"toggleListItem",props:{}}),!0)}}})]),jge=()=>({type:"paragraph",propSchema:Ln,content:"inline"}),TY=Ia(jge,{meta:{isolating:!1},parse:t=>{var e;if(t.tagName==="P"&&(e=t.textContent)!=null&&e.trim())return oa(t)},render:()=>{const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("p");return gh(t.props,e),{dom:e,contentDOM:e}},runsBefore:["default"]},[Fn({key:"paragraph-shortcuts",keyboardShortcuts:{"Mod-Alt-0":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"paragraph",props:{}}),!0)}}})]),Gge=()=>({type:"quote",propSchema:{backgroundColor:Ln.backgroundColor,textColor:Ln.textColor},content:"inline"}),Yge=Ia(Gge,{meta:{isolating:!1},parse(t){if(t.tagName==="BLOCKQUOTE"){const{backgroundColor:e,textColor:n}=oa(t);return{backgroundColor:e,textColor:n}}},render(){const t=document.createElement("blockquote");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("blockquote");return gh(t.props,e),{dom:e,contentDOM:e}}},[Fn({key:"quote-block-shortcuts",keyboardShortcuts:{"Mod-Alt-q":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"quote",props:{}}),!0)}},inputRules:[{find:new RegExp("^>\\s$"),replace(){return{type:"quote",props:{}}}}]})]),Wge=35,Dk=120,Kge=31,Xge=Gn.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[hme({cellMinWidth:Wge,defaultCellMinWidth:Dk,View:null}),Cme()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>g7(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>g7(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:sr(Nt(t,"tableRole",e))}}}),Zge={textColor:Ln.textColor},Qge=tl.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th",getContent:(t,e)=>AY(t,e)}]},renderHTML({HTMLAttributes:t}){return["th",Na(this.options.HTMLAttributes,t),0]}}),Jge=tl.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td",getContent:(t,e)=>AY(t,e)}]},renderHTML({HTMLAttributes:t}){return["td",Na(this.options.HTMLAttributes,t),0]}}),e1e=tl.create({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r,i;const o=q0e(this.name,"table",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),a=document.createElement("colgroup");for(const s of t.children[0].children)if(s.attrs.colwidth)for(const l of s.attrs.colwidth){const u=document.createElement("col");l&&(u.style=`width: ${l}px`),a.appendChild(u)}else a.appendChild(document.createElement("col"));return(i=o.dom.firstChild)==null||i.appendChild(a),o},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends aY{constructor(o,a,s){super(o,a),this.node=o,this.cellMinWidth=a,this.blockContentHTMLAttributes=s;const l=document.createElement("div");l.className=$r("bn-block-content",s.class),l.setAttribute("data-content-type","table");for(const[d,h]of Object.entries(s))d!=="class"&&l.setAttribute(d,h);const u=this.dom,c=document.createElement("div");c.className="tableWrapper-inner",c.appendChild(u.firstChild),u.appendChild(c),l.appendChild(u);const f=document.createElement("div");f.className="table-widgets-container",f.style.position="relative",u.appendChild(f),this.dom=l}ignoreMutation(o){return!o.target.closest(".tableWrapper-inner")||super.ignoreMutation(o)}}return new r(t,Dk,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),t1e=tl.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),n1e=tl.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Na(this.options.HTMLAttributes,t),0]}});function AY(t,e){const n=$s.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(i=>{if(i.isInline)return r.push(i),!1}),Ue.fromArray(r)}const r1e=()=>K0e({node:e1e,type:"table",content:"table"},Zge,[Fn({key:"table-extensions",tiptapExtensions:[Xge,t1e,Qge,Jge,n1e]}),Fn({key:"table-keyboard-delete",keyboardShortcuts:{Backspace:({editor:t})=>{if(!(t.prosemirrorState.selection instanceof Qn))return!1;const e=t.getTextCursorPosition().block,n=e.content;let r=0;for(const o of n.rows)for(const a of o.cells){if("type"in a&&a.content.length>0||!("type"in a)&&a.length>0)return!1;r++}let i=0;return t.prosemirrorState.selection.forEachCell(()=>{i++}),i<r?!1:(t.transact(()=>{(t.getPrevBlock(e)||t.getNextBlock(e))&&t.setTextCursorPosition(e),t.removeBlocks([e])}),!0)}}})]),P7=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},i1e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',o1e=t=>({type:"video",propSchema:{textAlignment:Ln.textAlignment,backgroundColor:Ln.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),a1e=t=>e=>{if(e.tagName==="VIDEO"){if(e.closest("figure"))return;const{backgroundColor:n}=oa(e);return{...P7(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=GE(e,"video");if(!n)return;const{targetElement:r,caption:i}=n,{backgroundColor:o}=oa(e);return{...P7(r),backgroundColor:o,caption:i}}},s1e=Ia(o1e,t=>({meta:{fileBlockAccept:["video/*"]},parse:a1e(),render(e,n){const r=document.createElement("div");r.innerHTML=t.icon??i1e;const i=document.createElement("div");i.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(a=>{o.src=a}):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,i.appendChild(o),EY(e,n,{dom:i},i,r.firstElementChild)},toExternalHTML(e){if(!e.props.url){const r=document.createElement("p");return r.textContent="Add video",{dom:r}}let n;return e.props.showPreview?(n=document.createElement("video"),n.src=e.props.url,e.props.previewWidth&&(n.width=e.props.previewWidth)):(n=document.createElement("a"),n.href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Ak(n,e.props.caption):YE(n,e.props.caption):{dom:n}},runsBefore:["file"]}));function Sr(t,e,n){if(!(e in t.schema.blockSpecs))return!1;if(!n)return!0;for(const[r,i]of Object.entries(n)){if(!(r in t.schema.blockSpecs[e].config.propSchema))return!1;if(typeof i=="string"){if(t.schema.blockSpecs[e].config.propSchema[r].default!==void 0&&typeof t.schema.blockSpecs[e].config.propSchema[r].default!==i||t.schema.blockSpecs[e].config.propSchema[r].type!==void 0&&t.schema.blockSpecs[e].config.propSchema[r].type!==i)return!1}else{if(t.schema.blockSpecs[e].config.propSchema[r].default!==i.default||t.schema.blockSpecs[e].config.propSchema[r].default===void 0&&i.default===void 0&&t.schema.blockSpecs[e].config.propSchema[r].type!==i.type||typeof t.schema.blockSpecs[e].config.propSchema[r].values!=typeof i.values)return!1;if(typeof t.schema.blockSpecs[e].config.propSchema[r].values=="object"&&typeof i.values=="object"){for(const o of i.values)if(!t.schema.blockSpecs[e].config.propSchema[r].values.includes(o))return!1}}}return!0}function Xo(t,e,n,r){return Sr(e,n,r)&&t.type===n}function jD(t){return t instanceof Qn}const Dy=new Map;function l1e(t){if(Dy.has(t))return Dy.get(t);const e=new pm;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Dy.delete(t)}),Dy.set(t,e),e}function u1e(t,e,n="left"){const r=mr.getState(t.prosemirrorState);if(!r){const o=l1e(t),a=o.maps.length;return()=>o.slice(a).map(e,n==="left"?-1:1)}const i=B1(e+(n==="right"?1:-1),r.binding.type,r.binding.mapping);return()=>{const o=mr.getState(t.prosemirrorState),a=Pd(o.doc,o.binding.type,i,o.binding.mapping);if(a===null)throw new Error("Position not found, cannot track positions");return a+(n==="right"?-1:1)}}const c1e=FE(t=>t.type.name==="blockContainer");class f1e{constructor(e,n,r){vd(this,"state"),vd(this,"emitUpdate"),vd(this,"rootEl"),vd(this,"pluginState"),vd(this,"handleScroll",()=>{var o,a;if((o=this.state)!=null&&o.show){const s=(a=this.rootEl)==null?void 0:a.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect().toJSON(),this.emitUpdate(this.pluginState.triggerCharacter)}}),vd(this,"closeMenu",()=>{this.editor.transact(o=>o.setMeta(Dd,null))}),vd(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(o=>o.selection.from)}).run()});var i;this.editor=e,this.pluginState=void 0,this.emitUpdate=o=>{var a;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(o,{...this.state,ignoreQueryLength:(a=this.pluginState)==null?void 0:a.ignoreQueryLength})},this.rootEl=r.root,(i=this.rootEl)==null||i.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const i=Dd.getState(n),o=Dd.getState(e.state),a=i===void 0&&o!==void 0,s=i!==void 0&&o===void 0;if(!a&&!(i!==void 0&&o!==void 0)&&!s)return;if(this.pluginState=s?i:o,s||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect().toJSON(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const Dd=new gn("SuggestionMenuPlugin"),fs=Fn(({editor:t})=>{const e=[];let n;const r=_f(void 0);return{key:"suggestionMenu",store:r,addTriggerCharacter:i=>{e.push(i)},removeTriggerCharacter:i=>{e.splice(e.indexOf(i),1)},closeMenu:()=>{n?.closeMenu()},clearQuery:()=>{n?.clearQuery()},shown:()=>{var i;return((i=n?.state)==null?void 0:i.show)||!1},openSuggestionMenu:(i,o)=>{t.headless||(t.focus(),t.transact(a=>{o!=null&&o.deleteTriggerCharacter&&a.insertText(i),a.scrollIntoView().setMeta(Dd,{triggerCharacter:i,deleteTriggerCharacter:o?.deleteTriggerCharacter||!1,ignoreQueryLength:o?.ignoreQueryLength||!1})}))},prosemirrorPlugins:[new Wt({key:Dd,view:i=>(n=new f1e(t,(o,a)=>{r.setState({...a,triggerCharacter:o})},i),n),state:{init(){},apply:(i,o,a,s)=>{if(i.selection.$from.parent.type.spec.code)return o;const l=i.getMeta(Dd);if(typeof l=="object"&&l!==null){o&&n?.closeMenu();const c=u1e(t,s.selection.from-l.triggerCharacter.length);return{triggerCharacter:l.triggerCharacter,deleteTriggerCharacter:l.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+l.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:l?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||l===null||i.getMeta("focus")||i.getMeta("blur")||i.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const u={...o};return u.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),u}},props:{handleTextInput(i,o,a,s){if(o===a){const l=i.state.doc;for(const u of e){const c=u.length>1?l.textBetween(o-u.length,o)+s:s;if(u===c)return i.dispatch(i.state.tr.insertText(s)),i.dispatch(i.state.tr.setMeta(Dd,{triggerCharacter:c}).scrollIntoView()),!0}}return!1},decorations(i){const o=this.getState(i);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const a=c1e(i.selection);if(a)return nn.create(i.doc,[Un.node(a.pos,a.pos+a.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return nn.create(i.doc,[Un.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}})]}});function d1e(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function Xi(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&Jd(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),d1e(t),r}function h1e(t){const e=[];return Sr(t,"heading",{level:"number"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n<=3).forEach(n=>{e.push({onItemClick:()=>{Xi(t,{type:"heading",props:{level:n}})},badge:Qa(`Mod-Alt-${n}`),key:n===1?"heading":`heading_${n}`,...t.dictionary.slash_menu[n===1?"heading":`heading_${n}`]})}),Sr(t,"quote")&&e.push({onItemClick:()=>{Xi(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),Sr(t,"toggleListItem")&&e.push({onItemClick:()=>{Xi(t,{type:"toggleListItem"})},badge:Qa("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),Sr(t,"numberedListItem")&&e.push({onItemClick:()=>{Xi(t,{type:"numberedListItem"})},badge:Qa("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),Sr(t,"bulletListItem")&&e.push({onItemClick:()=>{Xi(t,{type:"bulletListItem"})},badge:Qa("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),Sr(t,"checkListItem")&&e.push({onItemClick:()=>{Xi(t,{type:"checkListItem"})},badge:Qa("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),Sr(t,"paragraph")&&e.push({onItemClick:()=>{Xi(t,{type:"paragraph"})},badge:Qa("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),Sr(t,"codeBlock")&&e.push({onItemClick:()=>{Xi(t,{type:"codeBlock"})},badge:Qa("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),Sr(t,"divider")&&e.push({onItemClick:()=>{Xi(t,{type:"divider"})},key:"divider",...t.dictionary.slash_menu.divider}),Sr(t,"table")&&e.push({onItemClick:()=>{Xi(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),Sr(t,"image",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Xi(t,{type:"image"});(n=t.getExtension(Ls))==null||n.showMenu(r.id)},key:"image",...t.dictionary.slash_menu.image}),Sr(t,"video",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Xi(t,{type:"video"});(n=t.getExtension(Ls))==null||n.showMenu(r.id)},key:"video",...t.dictionary.slash_menu.video}),Sr(t,"audio",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Xi(t,{type:"audio"});(n=t.getExtension(Ls))==null||n.showMenu(r.id)},key:"audio",...t.dictionary.slash_menu.audio}),Sr(t,"file",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Xi(t,{type:"file"});(n=t.getExtension(Ls))==null||n.showMenu(r.id)},key:"file",...t.dictionary.slash_menu.file}),Sr(t,"heading",{level:"number",isToggleable:"boolean"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n<=3).forEach(n=>{e.push({onItemClick:()=>{Xi(t,{type:"heading",props:{level:n,isToggleable:!0}})},key:n===1?"toggle_heading":`toggle_heading_${n}`,...t.dictionary.slash_menu[n===1?"toggle_heading":`toggle_heading_${n}`]})}),Sr(t,"heading",{level:"number"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n>3).forEach(n=>{e.push({onItemClick:()=>{Xi(t,{type:"heading",props:{level:n}})},badge:Qa(`Mod-Alt-${n}`),key:`heading_${n}`,...t.dictionary.slash_menu[`heading_${n}`]})}),e.push({onItemClick:()=>{var n;(n=t.getExtension(fs))==null||n.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function p1e(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(i=>i.toLowerCase().includes(e.toLowerCase())).length!==0)}const m1e={audio:gge(),bulletListItem:Fge(),checkListItem:$ge(),codeBlock:yge(),divider:wge(),file:Sge(),heading:Dge(),image:Rge(),numberedListItem:Hge(),paragraph:TY(),quote:Yge(),table:r1e(),toggleListItem:qge(),video:s1e()},g1e=bY({type:"textColor",propSchema:"string"},{render:()=>{const t=document.createElement("span");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("span");return t!==Ln.textColor.default&&(e.style.color=t in Zc?Zc[t].text:t),{dom:e,contentDOM:e}},parse:t=>{if(t.tagName==="SPAN"&&t.style.color)return t.style.color}}),v1e=bY({type:"backgroundColor",propSchema:"string"},{render:()=>{const t=document.createElement("span");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("span");return t!==Ln.backgroundColor.default&&(e.style.backgroundColor=t in Zc?Zc[t].background:t),{dom:e,contentDOM:e}},parse:t=>{if(t.tagName==="SPAN"&&t.style.backgroundColor)return t.style.backgroundColor}}),Mk={bold:bg(x0e,"boolean"),italic:bg(k0e,"boolean"),underline:bg(L0e,"boolean"),strike:bg(R0e,"boolean"),code:bg(S0e,"boolean"),textColor:g1e,backgroundColor:v1e};vY(Mk);const NY={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},b1e=mY(NY);var yN,$7;function y1e(){return $7||($7=1,yN=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}),yN}var x1e=y1e();const w1e=Qs(x1e);function DY(t={}){return new Wt({view(e){return new E1e(e,t)}})}class E1e{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),a=o.width/i.offsetWidth,s=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),v=f?m.bottom:m.top;f&&d&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*s;r={left:m.left,right:m.right,top:v-b,bottom:v+b}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*a;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let f=l.getBoundingClientRect(),d=f.width/l.offsetWidth,h=f.height/l.offsetHeight;u=f.left-l.scrollLeft*d,c=f.top-l.scrollTop*h}this.element.style.left=(r.left-u)/a+"px",this.element.style.top=(r.top-c)/s+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let s=cj(this.editorView.state.doc,a,this.editorView.dragging.slice);s!=null&&(a=s)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}var _x=200,Ai=function(){};Ai.prototype.append=function(e){return e.length?(e=Ai.from(e),!this.length&&e||e.length<_x&&this.leafAppend(e)||this.length<_x&&e.leafPrepend(this)||this.appendInner(e)):this};Ai.prototype.prepend=function(e){return e.length?Ai.from(e).append(this):this};Ai.prototype.appendInner=function(e){return new C1e(this,e)};Ai.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ai.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ai.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ai.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ai.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,a){return i.push(e(o,a))},n,r),i};Ai.from=function(e){return e instanceof Ai?e:e&&e.length?new MY(e):Ai.empty};var MY=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,a,s){for(var l=o;l<a;l++)if(i(this.values[l],s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,a,s){for(var l=o-1;l>=a;l--)if(i(this.values[l],s+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=_x)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=_x)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Ai);Ai.empty=new MY([]);var C1e=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,a){var s=this.left.length;if(i<s&&this.left.forEachInner(r,i,Math.min(o,s),a)===!1||o>s&&this.right.forEachInner(r,Math.max(i-s,0),Math.min(this.length,o)-s,a+s)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,a){var s=this.left.length;if(i>s&&this.right.forEachInvertedInner(r,i-s,Math.max(o,s)-s,a+s)===!1||o<s&&this.left.forEachInvertedInner(r,Math.min(i,s),o,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Ai);const S1e=500;class Is{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=e.tr,s,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,c.push(f);return}if(i){c.push(new Cl(f.map));let h=f.step.map(i.slice(o)),m;h&&a.maybeStep(h).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],u.push(new Cl(m,void 0,void 0,u.length+c.length))),o--,m&&i.appendMap(m,o)}else a.maybeStep(f.step);if(f.selection)return s=i?f.selection.map(i.slice(o)):f.selection,l=new Is(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:a,selection:s}}addTransform(e,n,r,i){let o=[],a=this.eventCount,s=this.items,l=!i&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new Cl(e.mapping.maps[c],f,n),h;(h=l&&l.merge(d))&&(d=h,c?o.pop():s=s.slice(0,s.length-1)),o.push(d),n&&(a++,n=void 0),i||(l=d)}let u=a-r.depth;return u>A1e&&(s=T1e(s,u),a-=u),new Is(s.append(o),a)}remapping(e,n){let r=new pm;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new Is(this.items.append(e.map(n=>new Cl(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,a=e.steps.length,s=this.eventCount;this.items.forEach(d=>{d.selection&&s--},i);let l=n;this.items.forEach(d=>{let h=o.getMirror(--l);if(h==null)return;a=Math.min(a,h);let m=o.maps[h];if(d.step){let v=e.steps[h].invert(e.docs[h]),b=d.selection&&d.selection.map(o.slice(l+1,h));b&&s++,r.push(new Cl(m,v,b))}else r.push(new Cl(m))},i);let u=[];for(let d=n;d<a;d++)u.push(new Cl(o.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new Is(c,s);return f.emptyItemCount()>S1e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((a,s)=>{if(s>=e)i.push(a),a.selection&&o++;else if(a.step){let l=a.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=a.selection&&a.selection.map(n.slice(r));c&&o++;let f=new Cl(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else a.map&&r--},this.items.length,0),new Is(Ai.from(i.reverse()),o)}}Is.empty=new Is(Ai.empty,0);function T1e(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Cl{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Cl(n.getMap().invert(),n,this.selection)}}}class $c{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const A1e=20;function N1e(t,e,n,r){let i=n.getMeta($d),o;if(i)return i.historyState;n.getMeta(kY)&&(t=new $c(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta($d))return a.getMeta($d).redo?new $c(t.done.addTransform(n,void 0,r,O2(e)),t.undone,z7(n.mapping.maps),t.prevTime,t.prevComposition):new $c(t.done,t.undone.addTransform(n,void 0,r,O2(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let s=n.getMeta("composition"),l=t.prevTime==0||!a&&t.prevComposition!=s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!D1e(n,t.prevRanges)),u=a?xN(t.prevRanges,n.mapping):z7(n.mapping.maps);return new $c(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,O2(e)),Is.empty,u,n.time,s??t.prevComposition)}else return(o=n.getMeta("rebased"))?new $c(t.done.rebased(n,o),t.undone.rebased(n,o),xN(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new $c(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),xN(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function D1e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function z7(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,a)=>e.push(o,a));return e}function xN(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function M1e(t,e,n){let r=O2(e),i=$d.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let a=o.selection.resolve(o.transform.doc),s=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new $c(n?s:o.remaining,n?o.remaining:s,null,0,-1);return o.transform.setSelection(a).setMeta($d,{redo:n,historyState:l})}let wN=!1,U7=null;function O2(t){let e=t.plugins;if(U7!=e){wN=!1,U7=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){wN=!0;break}}return wN}function k1e(t){return t.setMeta(kY,!0)}const $d=new gn("history"),kY=new gn("closeHistory");function _Y(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Wt({key:$d,state:{init(){return new $c(Is.empty,Is.empty,null,0,-1)},apply(e,n,r){return N1e(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?kk:r=="historyRedo"?_k:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function OY(t,e){return(n,r)=>{let i=$d.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=M1e(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const kk=OY(!1,!0),_k=OY(!0,!0);class fv{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}fv.prototype.normal={};fv.prototype.property={};fv.prototype.space=void 0;function IY(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new fv(n,r,e)}function L1(t){return t.toLowerCase()}class sa{constructor(e,n){this.attribute=n,this.property=e}}sa.prototype.attribute="";sa.prototype.booleanish=!1;sa.prototype.boolean=!1;sa.prototype.commaOrSpaceSeparated=!1;sa.prototype.commaSeparated=!1;sa.prototype.defined=!1;sa.prototype.mustUseProperty=!1;sa.prototype.number=!1;sa.prototype.overloadedBoolean=!1;sa.prototype.property="";sa.prototype.spaceSeparated=!1;sa.prototype.space=void 0;let _1e=0;const an=vh(),ni=vh(),GD=vh(),at=vh(),pr=vh(),Qp=vh(),va=vh();function vh(){return 2**++_1e}const YD=Object.freeze(Object.defineProperty({__proto__:null,boolean:an,booleanish:ni,commaOrSpaceSeparated:va,commaSeparated:Qp,number:at,overloadedBoolean:GD,spaceSeparated:pr},Symbol.toStringTag,{value:"Module"})),EN=Object.keys(YD);class Ok extends sa{constructor(e,n,r,i){let o=-1;if(super(e,n),H7(this,"space",i),typeof r=="number")for(;++o<EN.length;){const a=EN[o];H7(this,EN[o],(r&YD[a])===YD[a])}}}Ok.prototype.defined=!0;function H7(t,e,n){n&&(t[e]=n)}function Gm(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const o=new Ok(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[L1(r)]=r,n[L1(o.attribute)]=r}return new fv(e,n,t.space)}const RY=Gm({properties:{ariaActiveDescendant:null,ariaAtomic:ni,ariaAutoComplete:null,ariaBusy:ni,ariaChecked:ni,ariaColCount:at,ariaColIndex:at,ariaColSpan:at,ariaControls:pr,ariaCurrent:null,ariaDescribedBy:pr,ariaDetails:null,ariaDisabled:ni,ariaDropEffect:pr,ariaErrorMessage:null,ariaExpanded:ni,ariaFlowTo:pr,ariaGrabbed:ni,ariaHasPopup:null,ariaHidden:ni,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pr,ariaLevel:at,ariaLive:null,ariaModal:ni,ariaMultiLine:ni,ariaMultiSelectable:ni,ariaOrientation:null,ariaOwns:pr,ariaPlaceholder:null,ariaPosInSet:at,ariaPressed:ni,ariaReadOnly:ni,ariaRelevant:null,ariaRequired:ni,ariaRoleDescription:pr,ariaRowCount:at,ariaRowIndex:at,ariaRowSpan:at,ariaSelected:ni,ariaSetSize:at,ariaSort:null,ariaValueMax:at,ariaValueMin:at,ariaValueNow:at,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function BY(t,e){return e in t?t[e]:e}function LY(t,e){return BY(t,e.toLowerCase())}const O1e=Gm({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qp,acceptCharset:pr,accessKey:pr,action:null,allow:null,allowFullScreen:an,allowPaymentRequest:an,allowUserMedia:an,alt:null,as:null,async:an,autoCapitalize:null,autoComplete:pr,autoFocus:an,autoPlay:an,blocking:pr,capture:null,charSet:null,checked:an,cite:null,className:pr,cols:at,colSpan:null,content:null,contentEditable:ni,controls:an,controlsList:pr,coords:at|Qp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:an,defer:an,dir:null,dirName:null,disabled:an,download:GD,draggable:ni,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:an,formTarget:null,headers:pr,height:at,hidden:GD,high:at,href:null,hrefLang:null,htmlFor:pr,httpEquiv:pr,id:null,imageSizes:null,imageSrcSet:null,inert:an,inputMode:null,integrity:null,is:null,isMap:an,itemId:null,itemProp:pr,itemRef:pr,itemScope:an,itemType:pr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:an,low:at,manifest:null,max:null,maxLength:at,media:null,method:null,min:null,minLength:at,multiple:an,muted:an,name:null,nonce:null,noModule:an,noValidate:an,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:an,optimum:at,pattern:null,ping:pr,placeholder:null,playsInline:an,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:an,referrerPolicy:null,rel:pr,required:an,reversed:an,rows:at,rowSpan:at,sandbox:pr,scope:null,scoped:an,seamless:an,selected:an,shadowRootClonable:an,shadowRootDelegatesFocus:an,shadowRootMode:null,shape:null,size:at,sizes:null,slot:null,span:at,spellCheck:ni,src:null,srcDoc:null,srcLang:null,srcSet:null,start:at,step:null,style:null,tabIndex:at,target:null,title:null,translate:null,type:null,typeMustMatch:an,useMap:null,value:ni,width:at,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pr,axis:null,background:null,bgColor:null,border:at,borderColor:null,bottomMargin:at,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:an,declare:an,event:null,face:null,frame:null,frameBorder:null,hSpace:at,leftMargin:at,link:null,longDesc:null,lowSrc:null,marginHeight:at,marginWidth:at,noResize:an,noHref:an,noShade:an,noWrap:an,object:null,profile:null,prompt:null,rev:null,rightMargin:at,rules:null,scheme:null,scrolling:ni,standby:null,summary:null,text:null,topMargin:at,valueType:null,version:null,vAlign:null,vLink:null,vSpace:at,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:an,disableRemotePlayback:an,prefix:null,property:null,results:at,security:null,unselectable:null},space:"html",transform:LY}),I1e=Gm({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:va,accentHeight:at,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:at,amplitude:at,arabicForm:null,ascent:at,attributeName:null,attributeType:null,azimuth:at,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:at,by:null,calcMode:null,capHeight:at,className:pr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:at,diffuseConstant:at,direction:null,display:null,dur:null,divisor:at,dominantBaseline:null,download:an,dx:null,dy:null,edgeMode:null,editable:null,elevation:at,enableBackground:null,end:null,event:null,exponent:at,externalResourcesRequired:null,fill:null,fillOpacity:at,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qp,g2:Qp,glyphName:Qp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:at,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:at,horizOriginX:at,horizOriginY:at,id:null,ideographic:at,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:at,k:at,k1:at,k2:at,k3:at,k4:at,kernelMatrix:va,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:at,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:at,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:at,overlineThickness:at,paintOrder:null,panose1:null,path:null,pathLength:at,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:at,pointsAtY:at,pointsAtZ:at,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:va,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:va,rev:va,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:va,requiredFeatures:va,requiredFonts:va,requiredFormats:va,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:at,specularExponent:at,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:at,strikethroughThickness:at,string:null,stroke:null,strokeDashArray:va,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:at,strokeOpacity:at,strokeWidth:null,style:null,surfaceScale:at,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:va,tabIndex:at,tableValues:null,target:null,targetX:at,targetY:at,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:va,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:at,underlineThickness:at,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:at,values:null,vAlphabetic:at,vMathematical:at,vectorEffect:null,vHanging:at,vIdeographic:at,version:null,vertAdvY:at,vertOriginX:at,vertOriginY:at,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:at,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:BY}),FY=Gm({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),PY=Gm({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:LY}),$Y=Gm({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),R1e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},B1e=/[A-Z]/g,V7=/-[a-z]/g,L1e=/^data[-\w.:]+$/i;function KE(t,e){const n=L1(e);let r=e,i=sa;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&L1e.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(V7,P1e);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!V7.test(o)){let a=o.replace(B1e,F1e);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=Ok}return new i(r,e)}function F1e(t){return"-"+t.toLowerCase()}function P1e(t){return t.charAt(1).toUpperCase()}const dv=IY([RY,O1e,FY,PY,$Y],"html"),Of=IY([RY,I1e,FY,PY,$Y],"svg");function q7(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const a=n.slice(i,r).trim();(a||!o)&&e.push(a),i=r+1,r=n.indexOf(",",i)}return e}function zY(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const j7=/[#.]/g;function $1e(t,e){const n=t||"",r={};let i=0,o,a;for(;i<n.length;){j7.lastIndex=i;const s=j7.exec(n),l=n.slice(i,s?s.index:n.length);l&&(o?o==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:a=l,i+=l.length),s&&(o=s[0],i++)}return{type:"element",tagName:a||e||"div",properties:r,children:[]}}function G7(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function UY(t){return t.join(" ").trim()}function HY(t,e,n){const r=n?V1e(n):void 0;function i(o,a,...s){let l;if(o==null){l={type:"root",children:[]};const u=a;s.unshift(u)}else{l=$1e(o,e);const u=l.tagName.toLowerCase(),c=r?r.get(u):void 0;if(l.tagName=c||u,z1e(a))s.unshift(a);else for(const[f,d]of Object.entries(a))U1e(t,l.properties,f,d)}for(const u of s)WD(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function z1e(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const o=i;for(const a of o)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function U1e(t,e,n,r){const i=KE(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=G7(r):i.commaSeparated?o=q7(r):i.commaOrSpaceSeparated?o=G7(q7(r).join(" ")):o=Y7(i,i.property,r):Array.isArray(r)?o=[...r]:o=i.property==="style"?H1e(r):String(r);if(Array.isArray(o)){const a=[];for(const s of o)a.push(Y7(i,i.property,s));o=a}i.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[i.property]=o}}function WD(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)WD(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?WD(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Y7(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||L1(n)===L1(e)))return!0}return n}function H1e(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function V1e(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const q1e=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],VY=HY(dv,"div"),qY=HY(Of,"g",q1e);function j1e(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let a=0;for(;;){let s=n[a];if(s===void 0){const l=W7(e,n[a-1]);s=l===-1?e.length+1:l+1,n[a]=s}if(s>o)return{line:a+1,column:o-(a>0?n[a-1]:0)+1,offset:o};a++}}}function i(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const s=n[n.length-1],l=W7(e,s),u=l===-1?e.length+1:l+1;if(s===u)break;n.push(u)}const a=(o.line>1?n[o.line-2]:0)+o.column-1;if(a<n[o.line-1])return a}}}function W7(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const I2={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},jY={}.hasOwnProperty,G1e=Object.prototype;function Y1e(t,e){const n=e||{};return Ik({file:n.file||void 0,location:!1,schema:n.space==="svg"?Of:dv,verbose:n.verbose||!1},t)}function Ik(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},R2(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:GY(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const o=String(t.file),a=j1e(o),s=a.toPoint(0),l=a.toPoint(o.length);n.position={start:s,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},R2(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},R2(t,r,n),n}default:return n=W1e(t,e),n}}function GY(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=Ik(t,e[n]);r.push(i)}return r}function W1e(t,e){const n=t.schema;t.schema=e.namespaceURI===I2.svg?Of:dv;let r=-1;const i={};for(;++r<e.attrs.length;){const s=e.attrs[r],l=(s.prefix?s.prefix+":":"")+s.name;jY.call(G1e,l)||(i[l]=s.value)}const a=(t.schema.space==="svg"?qY:VY)(e.tagName,i,GY(t,e.childNodes));if(R2(t,e,a),a.tagName==="template"){const s=e,l=s.sourceCodeLocation,u=l&&l.startTag&&Pp(l.startTag),c=l&&l.endTag&&Pp(l.endTag),f=Ik(t,s.content);u&&c&&t.file&&(f.position={start:u.end,end:c.start}),a.content=f}return t.schema=n,a}function R2(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=K1e(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function K1e(t,e,n){const r=Pp(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const o={};let a;if(n.attrs)for(a in n.attrs)jY.call(n.attrs,a)&&(o[KE(t.schema,a).property]=Pp(n.attrs[a]));n.startTag;const s=Pp(n.startTag),l=n.endTag?Pp(n.endTag):void 0,u={opening:s};l&&(u.closing=l),u.properties=o,e.data={position:u}}}return r}function Pp(t){const e=K7({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=K7({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function K7(t){return t.line&&t.column?t:void 0}const X1e=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Mr="";var ue;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(ue||(ue={}));const Uo={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function YY(t){return t>=55296&&t<=57343}function Z1e(t){return t>=56320&&t<=57343}function Q1e(t,e){return(t-55296)*1024+9216+e}function WY(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function KY(t){return t>=64976&&t<=65007||X1e.has(t)}var $e;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})($e||($e={}));const J1e=65536;class eve{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=J1e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:o}=this,a=i+n,s=o+n;return{code:e,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Z1e(n))return this.pos++,this._addGap(),Q1e(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ue.EOF;return this._err($e.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ue.EOF;const r=this.html.charCodeAt(n);return r===ue.CARRIAGE_RETURN?ue.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ue.EOF;let e=this.html.charCodeAt(this.pos);return e===ue.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ue.LINE_FEED):e===ue.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,YY(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===ue.LINE_FEED||e===ue.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){WY(e)?this._err($e.controlCharacterInInputStream):KY(e)&&this._err($e.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Bn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Bn||(Bn={}));function XY(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const tve=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),nve=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function rve(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=nve.get(t))!==null&&e!==void 0?e:t}var Ei;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Ei||(Ei={}));const ive=32;var Qc;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Qc||(Qc={}));function KD(t){return t>=Ei.ZERO&&t<=Ei.NINE}function ove(t){return t>=Ei.UPPER_A&&t<=Ei.UPPER_F||t>=Ei.LOWER_A&&t<=Ei.LOWER_F}function ave(t){return t>=Ei.UPPER_A&&t<=Ei.UPPER_Z||t>=Ei.LOWER_A&&t<=Ei.LOWER_Z||KD(t)}function sve(t){return t===Ei.EQUALS||ave(t)}var yi;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(yi||(yi={}));var Cu;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Cu||(Cu={}));class lve{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=yi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cu.Strict}startEntity(e){this.decodeMode=e,this.state=yi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case yi.EntityStart:return e.charCodeAt(n)===Ei.NUM?(this.state=yi.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=yi.NamedEntity,this.stateNamedEntity(e,n));case yi.NumericStart:return this.stateNumericStart(e,n);case yi.NumericDecimal:return this.stateNumericDecimal(e,n);case yi.NumericHex:return this.stateNumericHex(e,n);case yi.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|ive)===Ei.LOWER_X?(this.state=yi.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=yi.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+Number.parseInt(e.substr(n,o),i),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(KD(i)||ove(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(KD(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Ei.SEMI)this.consumed+=1;else if(this.decodeMode===Cu.Strict)return 0;return this.emitCodePoint(rve(this.result),this.consumed),this.errors&&(e!==Ei.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Qc.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const a=e.charCodeAt(n);if(this.treeIndex=uve(r,i,this.treeIndex+Math.max(1,o),a),this.treeIndex<0)return this.result===0||this.decodeMode===Cu.Attribute&&(o===0||sve(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Qc.VALUE_LENGTH)>>14,o!==0){if(a===Ei.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Cu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Qc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Qc.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case yi.NamedEntity:return this.result!==0&&(this.decodeMode!==Cu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case yi.NumericDecimal:return this.emitNumericEntity(0,2);case yi.NumericHex:return this.emitNumericEntity(0,3);case yi.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case yi.EntityStart:return 0}}}function uve(t,e,n,r){const i=(e&Qc.BRANCH_LENGTH)>>7,o=e&Qc.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=i?-1:t[n+l]-1}let a=n,s=a+i-1;for(;a<=s;){const l=a+s>>>1,u=t[l];if(u<r)a=l+1;else if(u>r)s=l-1;else return t[l+i]}return-1}var Ze;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ze||(Ze={}));var zd;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(zd||(zd={}));var ts;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(ts||(ts={}));var De;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(De||(De={}));var F;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(F||(F={}));const cve=new Map([[De.A,F.A],[De.ADDRESS,F.ADDRESS],[De.ANNOTATION_XML,F.ANNOTATION_XML],[De.APPLET,F.APPLET],[De.AREA,F.AREA],[De.ARTICLE,F.ARTICLE],[De.ASIDE,F.ASIDE],[De.B,F.B],[De.BASE,F.BASE],[De.BASEFONT,F.BASEFONT],[De.BGSOUND,F.BGSOUND],[De.BIG,F.BIG],[De.BLOCKQUOTE,F.BLOCKQUOTE],[De.BODY,F.BODY],[De.BR,F.BR],[De.BUTTON,F.BUTTON],[De.CAPTION,F.CAPTION],[De.CENTER,F.CENTER],[De.CODE,F.CODE],[De.COL,F.COL],[De.COLGROUP,F.COLGROUP],[De.DD,F.DD],[De.DESC,F.DESC],[De.DETAILS,F.DETAILS],[De.DIALOG,F.DIALOG],[De.DIR,F.DIR],[De.DIV,F.DIV],[De.DL,F.DL],[De.DT,F.DT],[De.EM,F.EM],[De.EMBED,F.EMBED],[De.FIELDSET,F.FIELDSET],[De.FIGCAPTION,F.FIGCAPTION],[De.FIGURE,F.FIGURE],[De.FONT,F.FONT],[De.FOOTER,F.FOOTER],[De.FOREIGN_OBJECT,F.FOREIGN_OBJECT],[De.FORM,F.FORM],[De.FRAME,F.FRAME],[De.FRAMESET,F.FRAMESET],[De.H1,F.H1],[De.H2,F.H2],[De.H3,F.H3],[De.H4,F.H4],[De.H5,F.H5],[De.H6,F.H6],[De.HEAD,F.HEAD],[De.HEADER,F.HEADER],[De.HGROUP,F.HGROUP],[De.HR,F.HR],[De.HTML,F.HTML],[De.I,F.I],[De.IMG,F.IMG],[De.IMAGE,F.IMAGE],[De.INPUT,F.INPUT],[De.IFRAME,F.IFRAME],[De.KEYGEN,F.KEYGEN],[De.LABEL,F.LABEL],[De.LI,F.LI],[De.LINK,F.LINK],[De.LISTING,F.LISTING],[De.MAIN,F.MAIN],[De.MALIGNMARK,F.MALIGNMARK],[De.MARQUEE,F.MARQUEE],[De.MATH,F.MATH],[De.MENU,F.MENU],[De.META,F.META],[De.MGLYPH,F.MGLYPH],[De.MI,F.MI],[De.MO,F.MO],[De.MN,F.MN],[De.MS,F.MS],[De.MTEXT,F.MTEXT],[De.NAV,F.NAV],[De.NOBR,F.NOBR],[De.NOFRAMES,F.NOFRAMES],[De.NOEMBED,F.NOEMBED],[De.NOSCRIPT,F.NOSCRIPT],[De.OBJECT,F.OBJECT],[De.OL,F.OL],[De.OPTGROUP,F.OPTGROUP],[De.OPTION,F.OPTION],[De.P,F.P],[De.PARAM,F.PARAM],[De.PLAINTEXT,F.PLAINTEXT],[De.PRE,F.PRE],[De.RB,F.RB],[De.RP,F.RP],[De.RT,F.RT],[De.RTC,F.RTC],[De.RUBY,F.RUBY],[De.S,F.S],[De.SCRIPT,F.SCRIPT],[De.SEARCH,F.SEARCH],[De.SECTION,F.SECTION],[De.SELECT,F.SELECT],[De.SOURCE,F.SOURCE],[De.SMALL,F.SMALL],[De.SPAN,F.SPAN],[De.STRIKE,F.STRIKE],[De.STRONG,F.STRONG],[De.STYLE,F.STYLE],[De.SUB,F.SUB],[De.SUMMARY,F.SUMMARY],[De.SUP,F.SUP],[De.TABLE,F.TABLE],[De.TBODY,F.TBODY],[De.TEMPLATE,F.TEMPLATE],[De.TEXTAREA,F.TEXTAREA],[De.TFOOT,F.TFOOT],[De.TD,F.TD],[De.TH,F.TH],[De.THEAD,F.THEAD],[De.TITLE,F.TITLE],[De.TR,F.TR],[De.TRACK,F.TRACK],[De.TT,F.TT],[De.U,F.U],[De.UL,F.UL],[De.SVG,F.SVG],[De.VAR,F.VAR],[De.WBR,F.WBR],[De.XMP,F.XMP]]);function XE(t){var e;return(e=cve.get(t))!==null&&e!==void 0?e:F.UNKNOWN}const et=F,fve={[Ze.HTML]:new Set([et.ADDRESS,et.APPLET,et.AREA,et.ARTICLE,et.ASIDE,et.BASE,et.BASEFONT,et.BGSOUND,et.BLOCKQUOTE,et.BODY,et.BR,et.BUTTON,et.CAPTION,et.CENTER,et.COL,et.COLGROUP,et.DD,et.DETAILS,et.DIR,et.DIV,et.DL,et.DT,et.EMBED,et.FIELDSET,et.FIGCAPTION,et.FIGURE,et.FOOTER,et.FORM,et.FRAME,et.FRAMESET,et.H1,et.H2,et.H3,et.H4,et.H5,et.H6,et.HEAD,et.HEADER,et.HGROUP,et.HR,et.HTML,et.IFRAME,et.IMG,et.INPUT,et.LI,et.LINK,et.LISTING,et.MAIN,et.MARQUEE,et.MENU,et.META,et.NAV,et.NOEMBED,et.NOFRAMES,et.NOSCRIPT,et.OBJECT,et.OL,et.P,et.PARAM,et.PLAINTEXT,et.PRE,et.SCRIPT,et.SECTION,et.SELECT,et.SOURCE,et.STYLE,et.SUMMARY,et.TABLE,et.TBODY,et.TD,et.TEMPLATE,et.TEXTAREA,et.TFOOT,et.TH,et.THEAD,et.TITLE,et.TR,et.TRACK,et.UL,et.WBR,et.XMP]),[Ze.MATHML]:new Set([et.MI,et.MO,et.MN,et.MS,et.MTEXT,et.ANNOTATION_XML]),[Ze.SVG]:new Set([et.TITLE,et.FOREIGN_OBJECT,et.DESC]),[Ze.XLINK]:new Set,[Ze.XML]:new Set,[Ze.XMLNS]:new Set},XD=new Set([et.H1,et.H2,et.H3,et.H4,et.H5,et.H6]);De.STYLE,De.SCRIPT,De.XMP,De.IFRAME,De.NOEMBED,De.NOFRAMES,De.PLAINTEXT;var de;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(de||(de={}));const Ko={DATA:de.DATA,RCDATA:de.RCDATA,RAWTEXT:de.RAWTEXT,SCRIPT_DATA:de.SCRIPT_DATA,PLAINTEXT:de.PLAINTEXT,CDATA_SECTION:de.CDATA_SECTION};function dve(t){return t>=ue.DIGIT_0&&t<=ue.DIGIT_9}function Lg(t){return t>=ue.LATIN_CAPITAL_A&&t<=ue.LATIN_CAPITAL_Z}function hve(t){return t>=ue.LATIN_SMALL_A&&t<=ue.LATIN_SMALL_Z}function Bc(t){return hve(t)||Lg(t)}function X7(t){return Bc(t)||dve(t)}function My(t){return t+32}function ZY(t){return t===ue.SPACE||t===ue.LINE_FEED||t===ue.TABULATION||t===ue.FORM_FEED}function Z7(t){return ZY(t)||t===ue.SOLIDUS||t===ue.GREATER_THAN_SIGN}function pve(t){return t===ue.NULL?$e.nullCharacterReference:t>1114111?$e.characterReferenceOutsideUnicodeRange:YY(t)?$e.surrogateCharacterReference:KY(t)?$e.noncharacterCharacterReference:WY(t)||t===ue.CARRIAGE_RETURN?$e.controlCharacterReference:null}class mve{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=de.DATA,this.returnState=de.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new eve(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new lve(tve,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err($e.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err($e.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=pve(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Bn.START_TAG,tagName:"",tagID:F.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Bn.END_TAG,tagName:"",tagID:F.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Bn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Bn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(XY(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err($e.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=XE(e.tagName),e.type===Bn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err($e.endTagWithAttributes),e.selfClosing&&this._err($e.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Bn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Bn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Bn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Bn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=ZY(e)?Bn.WHITESPACE_CHARACTER:e===ue.NULL?Bn.NULL_CHARACTER:Bn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Bn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=de.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Cu.Attribute:Cu.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===de.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===de.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===de.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case de.DATA:{this._stateData(e);break}case de.RCDATA:{this._stateRcdata(e);break}case de.RAWTEXT:{this._stateRawtext(e);break}case de.SCRIPT_DATA:{this._stateScriptData(e);break}case de.PLAINTEXT:{this._statePlaintext(e);break}case de.TAG_OPEN:{this._stateTagOpen(e);break}case de.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case de.TAG_NAME:{this._stateTagName(e);break}case de.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case de.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case de.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case de.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case de.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case de.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case de.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case de.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case de.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case de.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case de.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case de.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case de.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case de.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case de.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case de.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case de.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case de.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case de.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case de.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case de.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case de.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case de.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case de.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case de.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case de.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case de.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case de.BOGUS_COMMENT:{this._stateBogusComment(e);break}case de.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case de.COMMENT_START:{this._stateCommentStart(e);break}case de.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case de.COMMENT:{this._stateComment(e);break}case de.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case de.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case de.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case de.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case de.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case de.COMMENT_END:{this._stateCommentEnd(e);break}case de.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case de.DOCTYPE:{this._stateDoctype(e);break}case de.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case de.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case de.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case de.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case de.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case de.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case de.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case de.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case de.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case de.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case de.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case de.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case de.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case de.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case de.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case de.CDATA_SECTION:{this._stateCdataSection(e);break}case de.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case de.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case de.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case de.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case ue.LESS_THAN_SIGN:{this.state=de.TAG_OPEN;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitCodePoint(e);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case ue.AMPERSAND:{this._startCharacterReference();break}case ue.LESS_THAN_SIGN:{this.state=de.RCDATA_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case ue.LESS_THAN_SIGN:{this.state=de.RAWTEXT_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Bc(e))this._createStartTagToken(),this.state=de.TAG_NAME,this._stateTagName(e);else switch(e){case ue.EXCLAMATION_MARK:{this.state=de.MARKUP_DECLARATION_OPEN;break}case ue.SOLIDUS:{this.state=de.END_TAG_OPEN;break}case ue.QUESTION_MARK:{this._err($e.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=de.BOGUS_COMMENT,this._stateBogusComment(e);break}case ue.EOF:{this._err($e.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err($e.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=de.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Bc(e))this._createEndTagToken(),this.state=de.TAG_NAME,this._stateTagName(e);else switch(e){case ue.GREATER_THAN_SIGN:{this._err($e.missingEndTagName),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err($e.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=de.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.BEFORE_ATTRIBUTE_NAME;break}case ue.SOLIDUS:{this.state=de.SELF_CLOSING_START_TAG;break}case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentTagToken();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.tagName+=Mr;break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Lg(e)?My(e):e)}}_stateRcdataLessThanSign(e){e===ue.SOLIDUS?this.state=de.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=de.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Bc(e)?(this.state=de.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=de.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=de.BEFORE_ATTRIBUTE_NAME,!1;case ue.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=de.SELF_CLOSING_START_TAG,!1;case ue.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=de.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=de.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===ue.SOLIDUS?this.state=de.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=de.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Bc(e)?(this.state=de.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=de.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=de.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case ue.SOLIDUS:{this.state=de.SCRIPT_DATA_END_TAG_OPEN;break}case ue.EXCLAMATION_MARK:{this.state=de.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=de.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Bc(e)?(this.state=de.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=de.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=de.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===ue.HYPHEN_MINUS?(this.state=de.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=de.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===ue.HYPHEN_MINUS?(this.state=de.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=de.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case ue.HYPHEN_MINUS:{this.state=de.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case ue.HYPHEN_MINUS:{this.state=de.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.state=de.SCRIPT_DATA_ESCAPED,this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=de.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case ue.HYPHEN_MINUS:{this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.GREATER_THAN_SIGN:{this.state=de.SCRIPT_DATA,this._emitChars(">");break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.state=de.SCRIPT_DATA_ESCAPED,this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=de.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===ue.SOLIDUS?this.state=de.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Bc(e)?(this._emitChars("<"),this.state=de.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=de.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Bc(e)?(this.state=de.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=de.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=de.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Uo.SCRIPT,!1)&&Z7(this.preprocessor.peek(Uo.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Uo.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=de.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case ue.HYPHEN_MINUS:{this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case ue.HYPHEN_MINUS:{this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case ue.HYPHEN_MINUS:{this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.GREATER_THAN_SIGN:{this.state=de.SCRIPT_DATA,this._emitChars(">");break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Mr);break}case ue.EOF:{this._err($e.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===ue.SOLIDUS?(this.state=de.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Uo.SCRIPT,!1)&&Z7(this.preprocessor.peek(Uo.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Uo.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=de.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=de.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.SOLIDUS:case ue.GREATER_THAN_SIGN:case ue.EOF:{this.state=de.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ue.EQUALS_SIGN:{this._err($e.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=de.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=de.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:case ue.SOLIDUS:case ue.GREATER_THAN_SIGN:case ue.EOF:{this._leaveAttrName(),this.state=de.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ue.EQUALS_SIGN:{this._leaveAttrName(),this.state=de.BEFORE_ATTRIBUTE_VALUE;break}case ue.QUOTATION_MARK:case ue.APOSTROPHE:case ue.LESS_THAN_SIGN:{this._err($e.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.currentAttr.name+=Mr;break}default:this.currentAttr.name+=String.fromCodePoint(Lg(e)?My(e):e)}}_stateAfterAttributeName(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.SOLIDUS:{this.state=de.SELF_CLOSING_START_TAG;break}case ue.EQUALS_SIGN:{this.state=de.BEFORE_ATTRIBUTE_VALUE;break}case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=de.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{this.state=de.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this.state=de.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingAttributeValue),this.state=de.DATA,this.emitCurrentTagToken();break}default:this.state=de.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case ue.QUOTATION_MARK:{this.state=de.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case ue.APOSTROPHE:{this.state=de.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this._leaveAttrValue(),this.state=de.BEFORE_ATTRIBUTE_NAME;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=de.DATA,this.emitCurrentTagToken();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case ue.QUOTATION_MARK:case ue.APOSTROPHE:case ue.LESS_THAN_SIGN:case ue.EQUALS_SIGN:case ue.GRAVE_ACCENT:{this._err($e.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this._leaveAttrValue(),this.state=de.BEFORE_ATTRIBUTE_NAME;break}case ue.SOLIDUS:{this._leaveAttrValue(),this.state=de.SELF_CLOSING_START_TAG;break}case ue.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=de.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this._err($e.missingWhitespaceBetweenAttributes),this.state=de.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case ue.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=de.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err($e.eofInTag),this._emitEOFToken();break}default:this._err($e.unexpectedSolidusInTag),this.state=de.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.data+=Mr;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Uo.DASH_DASH,!0)?(this._createCommentToken(Uo.DASH_DASH.length+1),this.state=de.COMMENT_START):this._consumeSequenceIfMatch(Uo.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Uo.DOCTYPE.length+1),this.state=de.DOCTYPE):this._consumeSequenceIfMatch(Uo.CDATA_START,!0)?this.inForeignNode?this.state=de.CDATA_SECTION:(this._err($e.cdataInHtmlContent),this._createCommentToken(Uo.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=de.BOGUS_COMMENT):this._ensureHibernation()||(this._err($e.incorrectlyOpenedComment),this._createCommentToken(2),this.state=de.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case ue.HYPHEN_MINUS:{this.state=de.COMMENT_START_DASH;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptClosingOfEmptyComment),this.state=de.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=de.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case ue.HYPHEN_MINUS:{this.state=de.COMMENT_END;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptClosingOfEmptyComment),this.state=de.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this._err($e.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=de.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case ue.HYPHEN_MINUS:{this.state=de.COMMENT_END_DASH;break}case ue.LESS_THAN_SIGN:{n.data+="<",this.state=de.COMMENT_LESS_THAN_SIGN;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.data+=Mr;break}case ue.EOF:{this._err($e.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case ue.EXCLAMATION_MARK:{n.data+="!",this.state=de.COMMENT_LESS_THAN_SIGN_BANG;break}case ue.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=de.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===ue.HYPHEN_MINUS?this.state=de.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=de.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===ue.HYPHEN_MINUS?this.state=de.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=de.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==ue.GREATER_THAN_SIGN&&e!==ue.EOF&&this._err($e.nestedComment),this.state=de.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case ue.HYPHEN_MINUS:{this.state=de.COMMENT_END;break}case ue.EOF:{this._err($e.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=de.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentComment(n);break}case ue.EXCLAMATION_MARK:{this.state=de.COMMENT_END_BANG;break}case ue.HYPHEN_MINUS:{n.data+="-";break}case ue.EOF:{this._err($e.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=de.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case ue.HYPHEN_MINUS:{n.data+="--!",this.state=de.COMMENT_END_DASH;break}case ue.GREATER_THAN_SIGN:{this._err($e.incorrectlyClosedComment),this.state=de.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this._err($e.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=de.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.BEFORE_DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this.state=de.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case ue.EOF:{this._err($e.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingWhitespaceBeforeDoctypeName),this.state=de.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Lg(e))this._createDoctypeToken(String.fromCharCode(My(e))),this.state=de.DOCTYPE_NAME;else switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.NULL:{this._err($e.unexpectedNullCharacter),this._createDoctypeToken(Mr),this.state=de.DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=de.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.AFTER_DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.name+=Mr;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Lg(e)?My(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Uo.PUBLIC,!1)?this.state=de.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Uo.SYSTEM,!1)?this.state=de.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err($e.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.QUOTATION_MARK:{this._err($e.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=de.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err($e.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=de.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{n.publicId="",this.state=de.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.publicId="",this.state=de.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case ue.QUOTATION_MARK:{this.state=de.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.publicId+=Mr;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case ue.APOSTROPHE:{this.state=de.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.publicId+=Mr;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ue.GREATER_THAN_SIGN:{this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.QUOTATION_MARK:{this._err($e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err($e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.QUOTATION_MARK:{n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=de.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.QUOTATION_MARK:{this._err($e.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err($e.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.systemId="",this.state=de.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err($e.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case ue.QUOTATION_MARK:{this.state=de.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.systemId+=Mr;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case ue.APOSTROPHE:{this.state=de.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.NULL:{this._err($e.unexpectedNullCharacter),n.systemId+=Mr;break}case ue.GREATER_THAN_SIGN:{this._err($e.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.EOF:{this._err($e.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err($e.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=de.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=de.DATA;break}case ue.NULL:{this._err($e.unexpectedNullCharacter);break}case ue.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case ue.RIGHT_SQUARE_BRACKET:{this.state=de.CDATA_SECTION_BRACKET;break}case ue.EOF:{this._err($e.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===ue.RIGHT_SQUARE_BRACKET?this.state=de.CDATA_SECTION_END:(this._emitChars("]"),this.state=de.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case ue.GREATER_THAN_SIGN:{this.state=de.DATA;break}case ue.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=de.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(ue.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&X7(this.preprocessor.peek(1))?de.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){X7(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===ue.SEMICOLON&&this._err($e.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const QY=new Set([F.DD,F.DT,F.LI,F.OPTGROUP,F.OPTION,F.P,F.RB,F.RP,F.RT,F.RTC]),Q7=new Set([...QY,F.CAPTION,F.COLGROUP,F.TBODY,F.TD,F.TFOOT,F.TH,F.THEAD,F.TR]),Ox=new Set([F.APPLET,F.CAPTION,F.HTML,F.MARQUEE,F.OBJECT,F.TABLE,F.TD,F.TEMPLATE,F.TH]),gve=new Set([...Ox,F.OL,F.UL]),vve=new Set([...Ox,F.BUTTON]),J7=new Set([F.ANNOTATION_XML,F.MI,F.MN,F.MO,F.MS,F.MTEXT]),eB=new Set([F.DESC,F.FOREIGN_OBJECT,F.TITLE]),bve=new Set([F.TR,F.TEMPLATE,F.HTML]),yve=new Set([F.TBODY,F.TFOOT,F.THEAD,F.TEMPLATE,F.HTML]),xve=new Set([F.TABLE,F.TEMPLATE,F.HTML]),wve=new Set([F.TD,F.TH]);class Eve{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=F.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===F.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ze.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ze.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(XD,Ze.HTML)}popUntilTableCellPopped(){this.popUntilPopped(wve,Ze.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(xve,Ze.HTML)}clearBackToTableBodyContext(){this.clearBackTo(yve,Ze.HTML)}clearBackToTableRowContext(){this.clearBackTo(bve,Ze.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===F.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===F.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Ze.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case Ze.SVG:{if(eB.has(i))return!1;break}case Ze.MATHML:{if(J7.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Ox)}hasInListItemScope(e){return this.hasInDynamicScope(e,gve)}hasInButtonScope(e){return this.hasInDynamicScope(e,vve)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ze.HTML:{if(XD.has(n))return!0;if(Ox.has(n))return!1;break}case Ze.SVG:{if(eB.has(n))return!1;break}case Ze.MATHML:{if(J7.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ze.HTML)switch(this.tagIDs[n]){case e:return!0;case F.TABLE:case F.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ze.HTML)switch(this.tagIDs[e]){case F.TBODY:case F.THEAD:case F.TFOOT:return!0;case F.TABLE:case F.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ze.HTML)switch(this.tagIDs[n]){case e:return!0;case F.OPTION:case F.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&QY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Q7.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&Q7.has(this.currentTagId);)this.pop()}}const CN=3;var Dl;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Dl||(Dl={}));const tB={type:Dl.Marker};class Cve{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,o=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const l=this.entries[s];if(l.type===Dl.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===o&&this.treeAdapter.getNamespaceURI(u)===a){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:s,attrs:c})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<CN)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<CN)return;const i=new Map(n.map(a=>[a.name,a.value]));let o=0;for(let a=0;a<r.length;a++){const s=r[a];s.attrs.every(l=>i.get(l.name)===l.value)&&(o+=1,o>=CN&&this.entries.splice(s.idx,1))}}insertMarker(){this.entries.unshift(tB)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Dl.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Dl.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(tB);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Dl.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Dl.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Dl.Element&&n.element===e)}}const Lc={createDocument(){return{nodeName:"#document",mode:ts.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(o=>o.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Lc.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Lc.isTextNode(n)){n.value+=e;return}}Lc.appendChild(t,Lc.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Lc.isTextNode(r)?r.value+=e:Lc.insertBefore(t,Lc.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},JY="html",Sve="about:legacy-compat",Tve="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",eW=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ave=[...eW,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Nve=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),tW=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Dve=[...tW,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function nB(t,e){return e.some(n=>t.startsWith(n))}function Mve(t){return t.name===JY&&t.publicId===null&&(t.systemId===null||t.systemId===Sve)}function kve(t){if(t.name!==JY)return ts.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Tve)return ts.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),Nve.has(n))return ts.QUIRKS;let r=e===null?Ave:eW;if(nB(n,r))return ts.QUIRKS;if(r=e===null?tW:Dve,nB(n,r))return ts.LIMITED_QUIRKS}return ts.NO_QUIRKS}const rB={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},_ve="definitionurl",Ove="definitionURL",Ive=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Rve=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ze.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ze.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ze.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ze.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ze.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ze.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ze.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ze.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ze.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ze.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ze.XMLNS}]]),Bve=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Lve=new Set([F.B,F.BIG,F.BLOCKQUOTE,F.BODY,F.BR,F.CENTER,F.CODE,F.DD,F.DIV,F.DL,F.DT,F.EM,F.EMBED,F.H1,F.H2,F.H3,F.H4,F.H5,F.H6,F.HEAD,F.HR,F.I,F.IMG,F.LI,F.LISTING,F.MENU,F.META,F.NOBR,F.OL,F.P,F.PRE,F.RUBY,F.S,F.SMALL,F.SPAN,F.STRONG,F.STRIKE,F.SUB,F.SUP,F.TABLE,F.TT,F.U,F.UL,F.VAR]);function Fve(t){const e=t.tagID;return e===F.FONT&&t.attrs.some(({name:r})=>r===zd.COLOR||r===zd.SIZE||r===zd.FACE)||Lve.has(e)}function nW(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===_ve){t.attrs[e].name=Ove;break}}function rW(t){for(let e=0;e<t.attrs.length;e++){const n=Ive.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function Rk(t){for(let e=0;e<t.attrs.length;e++){const n=Rve.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Pve(t){const e=Bve.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=XE(t.tagName))}function $ve(t,e){return e===Ze.MATHML&&(t===F.MI||t===F.MO||t===F.MN||t===F.MS||t===F.MTEXT)}function zve(t,e,n){if(e===Ze.MATHML&&t===F.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===zd.ENCODING){const i=n[r].value.toLowerCase();return i===rB.TEXT_HTML||i===rB.APPLICATION_XML}}return e===Ze.SVG&&(t===F.FOREIGN_OBJECT||t===F.DESC||t===F.TITLE)}function Uve(t,e,n,r){return(!r||r===Ze.HTML)&&zve(t,e,n)||(!r||r===Ze.MATHML)&&$ve(t,e)}const Hve="hidden",Vve=8,qve=3;var ye;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ye||(ye={}));const jve={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},iW=new Set([F.TABLE,F.TBODY,F.TFOOT,F.THEAD,F.TR]),iB={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Lc,onParseError:null};let oW=class{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ye.INITIAL,this.originalInsertionMode=ye.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...iB,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new mve(this.options,this),this.activeFormattingElements=new Cve(this.treeAdapter),this.fragmentContextID=r?XE(this.treeAdapter.getTagName(r)):F.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Eve(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...iB,...n};e??(e=r.treeAdapter.createElement(De.TEMPLATE,Ze.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ze.HTML,[]),o=new this(r,i,e);return o.fragmentContextID===F.TEMPLATE&&o.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const o=(i=e.location)!==null&&i!==void 0?i:jve,a={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(a)}onItemPush(e,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let o,a;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,a=this.fragmentContextID):{current:o,currentTagId:a}=this.openElements,this._setContextModes(o,a)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Ze.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ye.TEXT}switchToPlaintextParsing(){this.insertionMode=ye.TEXT,this.originalInsertionMode=ye.IN_BODY,this.tokenizer.state=Ko.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===De.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ze.HTML))switch(this.fragmentContextID){case F.TITLE:case F.TEXTAREA:{this.tokenizer.state=Ko.RCDATA;break}case F.STYLE:case F.XMP:case F.IFRAME:case F.NOEMBED:case F.NOFRAMES:case F.NOSCRIPT:{this.tokenizer.state=Ko.RAWTEXT;break}case F.SCRIPT:{this.tokenizer.state=Ko.SCRIPT_DATA;break}case F.PLAINTEXT:{this.tokenizer.state=Ko.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(s=>this.treeAdapter.isDocumentTypeNode(s));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Ze.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Ze.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(De.HTML,Ze.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,F.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,a=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:l,endCol:u,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),o=n.type===Bn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===F.SVG&&this.treeAdapter.getTagName(n)===De.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ze.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===F.MGLYPH||e.tagID===F.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Ze.HTML)}_processToken(e){switch(e.type){case Bn.CHARACTER:{this.onCharacter(e);break}case Bn.NULL_CHARACTER:{this.onNullCharacter(e);break}case Bn.COMMENT:{this.onComment(e);break}case Bn.DOCTYPE:{this.onDoctype(e);break}case Bn.START_TAG:{this._processStartTag(e);break}case Bn.END_TAG:{this.onEndTag(e);break}case Bn.EOF:{this.onEof(e);break}case Bn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return Uve(e,i,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Dl.Marker||this.openElements.contains(i.element)),r=n===-1?e-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ye.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(F.P),this.openElements.popUntilTagNamePopped(F.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case F.TR:{this.insertionMode=ye.IN_ROW;return}case F.TBODY:case F.THEAD:case F.TFOOT:{this.insertionMode=ye.IN_TABLE_BODY;return}case F.CAPTION:{this.insertionMode=ye.IN_CAPTION;return}case F.COLGROUP:{this.insertionMode=ye.IN_COLUMN_GROUP;return}case F.TABLE:{this.insertionMode=ye.IN_TABLE;return}case F.BODY:{this.insertionMode=ye.IN_BODY;return}case F.FRAMESET:{this.insertionMode=ye.IN_FRAMESET;return}case F.SELECT:{this._resetInsertionModeForSelect(e);return}case F.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case F.HTML:{this.insertionMode=this.headElement?ye.AFTER_HEAD:ye.BEFORE_HEAD;return}case F.TD:case F.TH:{if(e>0){this.insertionMode=ye.IN_CELL;return}break}case F.HEAD:{if(e>0){this.insertionMode=ye.IN_HEAD;return}break}}this.insertionMode=ye.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===F.TEMPLATE)break;if(r===F.TABLE){this.insertionMode=ye.IN_SELECT_IN_TABLE;return}}this.insertionMode=ye.IN_SELECT}_isElementCausesFosterParenting(e){return iW.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case F.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ze.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case F.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return fve[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){wye(this,e);return}switch(this.insertionMode){case ye.INITIAL:{yg(this,e);break}case ye.BEFORE_HTML:{Wg(this,e);break}case ye.BEFORE_HEAD:{Kg(this,e);break}case ye.IN_HEAD:{Xg(this,e);break}case ye.IN_HEAD_NO_SCRIPT:{Zg(this,e);break}case ye.AFTER_HEAD:{Qg(this,e);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:{sW(this,e);break}case ye.TEXT:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{SN(this,e);break}case ye.IN_TABLE_TEXT:{hW(this,e);break}case ye.IN_COLUMN_GROUP:{Ix(this,e);break}case ye.AFTER_BODY:{Rx(this,e);break}case ye.AFTER_AFTER_BODY:{B2(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){xye(this,e);return}switch(this.insertionMode){case ye.INITIAL:{yg(this,e);break}case ye.BEFORE_HTML:{Wg(this,e);break}case ye.BEFORE_HEAD:{Kg(this,e);break}case ye.IN_HEAD:{Xg(this,e);break}case ye.IN_HEAD_NO_SCRIPT:{Zg(this,e);break}case ye.AFTER_HEAD:{Qg(this,e);break}case ye.TEXT:{this._insertCharacters(e);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{SN(this,e);break}case ye.IN_COLUMN_GROUP:{Ix(this,e);break}case ye.AFTER_BODY:{Rx(this,e);break}case ye.AFTER_AFTER_BODY:{B2(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){ZD(this,e);return}switch(this.insertionMode){case ye.INITIAL:case ye.BEFORE_HTML:case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_TEMPLATE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{ZD(this,e);break}case ye.IN_TABLE_TEXT:{xg(this,e);break}case ye.AFTER_BODY:{Qve(this,e);break}case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{Jve(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ye.INITIAL:{ebe(this,e);break}case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:{this._err(e,$e.misplacedDoctype);break}case ye.IN_TABLE_TEXT:{xg(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,$e.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Eye(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ye.INITIAL:{yg(this,e);break}case ye.BEFORE_HTML:{tbe(this,e);break}case ye.BEFORE_HEAD:{rbe(this,e);break}case ye.IN_HEAD:{nl(this,e);break}case ye.IN_HEAD_NO_SCRIPT:{abe(this,e);break}case ye.AFTER_HEAD:{lbe(this,e);break}case ye.IN_BODY:{lo(this,e);break}case ye.IN_TABLE:{wm(this,e);break}case ye.IN_TABLE_TEXT:{xg(this,e);break}case ye.IN_CAPTION:{iye(this,e);break}case ye.IN_COLUMN_GROUP:{Fk(this,e);break}case ye.IN_TABLE_BODY:{JE(this,e);break}case ye.IN_ROW:{eC(this,e);break}case ye.IN_CELL:{sye(this,e);break}case ye.IN_SELECT:{gW(this,e);break}case ye.IN_SELECT_IN_TABLE:{uye(this,e);break}case ye.IN_TEMPLATE:{fye(this,e);break}case ye.AFTER_BODY:{hye(this,e);break}case ye.IN_FRAMESET:{pye(this,e);break}case ye.AFTER_FRAMESET:{gye(this,e);break}case ye.AFTER_AFTER_BODY:{bye(this,e);break}case ye.AFTER_AFTER_FRAMESET:{yye(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?Cye(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ye.INITIAL:{yg(this,e);break}case ye.BEFORE_HTML:{nbe(this,e);break}case ye.BEFORE_HEAD:{ibe(this,e);break}case ye.IN_HEAD:{obe(this,e);break}case ye.IN_HEAD_NO_SCRIPT:{sbe(this,e);break}case ye.AFTER_HEAD:{ube(this,e);break}case ye.IN_BODY:{QE(this,e);break}case ye.TEXT:{Wbe(this,e);break}case ye.IN_TABLE:{F1(this,e);break}case ye.IN_TABLE_TEXT:{xg(this,e);break}case ye.IN_CAPTION:{oye(this,e);break}case ye.IN_COLUMN_GROUP:{aye(this,e);break}case ye.IN_TABLE_BODY:{QD(this,e);break}case ye.IN_ROW:{mW(this,e);break}case ye.IN_CELL:{lye(this,e);break}case ye.IN_SELECT:{vW(this,e);break}case ye.IN_SELECT_IN_TABLE:{cye(this,e);break}case ye.IN_TEMPLATE:{dye(this,e);break}case ye.AFTER_BODY:{yW(this,e);break}case ye.IN_FRAMESET:{mye(this,e);break}case ye.AFTER_FRAMESET:{vye(this,e);break}case ye.AFTER_AFTER_BODY:{B2(this,e);break}}}onEof(e){switch(this.insertionMode){case ye.INITIAL:{yg(this,e);break}case ye.BEFORE_HTML:{Wg(this,e);break}case ye.BEFORE_HEAD:{Kg(this,e);break}case ye.IN_HEAD:{Xg(this,e);break}case ye.IN_HEAD_NO_SCRIPT:{Zg(this,e);break}case ye.AFTER_HEAD:{Qg(this,e);break}case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{fW(this,e);break}case ye.TEXT:{Kbe(this,e);break}case ye.IN_TABLE_TEXT:{xg(this,e);break}case ye.IN_TEMPLATE:{bW(this,e);break}case ye.AFTER_BODY:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{Lk(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===ue.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.TEXT:case ye.IN_COLUMN_GROUP:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{this._insertCharacters(e);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:case ye.AFTER_BODY:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{aW(this,e);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{SN(this,e);break}case ye.IN_TABLE_TEXT:{dW(this,e);break}}}};function Gve(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):cW(t,e),n}function Yve(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function Wve(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let o=0,a=i;a!==n;o++,a=i){i=t.openElements.getCommonAncestor(a);const s=t.activeFormattingElements.getElementEntry(a),l=s&&o>=qve;!s||l?(l&&t.activeFormattingElements.removeEntry(s),t.openElements.remove(a)):(a=Kve(t,s),r===e&&(t.activeFormattingElements.bookmark=s),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(a,r),r=a)}return r}function Kve(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Xve(t,e,n){const r=t.treeAdapter.getTagName(e),i=XE(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);i===F.TEMPLATE&&o===Ze.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function Zve(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,i.tagID)}function Bk(t,e){for(let n=0;n<Vve;n++){const r=Gve(t,e);if(!r)break;const i=Yve(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const o=Wve(t,i,r.element),a=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),a&&Xve(t,a,o),Zve(t,i,r)}}function ZD(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Qve(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Jve(t,e){t._appendCommentNode(e,t.document)}function Lk(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(o);a&&!a.endTag&&t._setEndLocation(o,e)}}}}function ebe(t,e){t._setDocumentType(e);const n=e.forceQuirks?ts.QUIRKS:kve(e);Mve(e)||t._err(e,$e.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=ye.BEFORE_HTML}function yg(t,e){t._err(e,$e.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,ts.QUIRKS),t.insertionMode=ye.BEFORE_HTML,t._processToken(e)}function tbe(t,e){e.tagID===F.HTML?(t._insertElement(e,Ze.HTML),t.insertionMode=ye.BEFORE_HEAD):Wg(t,e)}function nbe(t,e){const n=e.tagID;(n===F.HTML||n===F.HEAD||n===F.BODY||n===F.BR)&&Wg(t,e)}function Wg(t,e){t._insertFakeRootElement(),t.insertionMode=ye.BEFORE_HEAD,t._processToken(e)}function rbe(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.HEAD:{t._insertElement(e,Ze.HTML),t.headElement=t.openElements.current,t.insertionMode=ye.IN_HEAD;break}default:Kg(t,e)}}function ibe(t,e){const n=e.tagID;n===F.HEAD||n===F.BODY||n===F.HTML||n===F.BR?Kg(t,e):t._err(e,$e.endTagWithoutMatchingOpenElement)}function Kg(t,e){t._insertFakeElement(De.HEAD,F.HEAD),t.headElement=t.openElements.current,t.insertionMode=ye.IN_HEAD,t._processToken(e)}function nl(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.BASE:case F.BASEFONT:case F.BGSOUND:case F.LINK:case F.META:{t._appendElement(e,Ze.HTML),e.ackSelfClosing=!0;break}case F.TITLE:{t._switchToTextParsing(e,Ko.RCDATA);break}case F.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Ko.RAWTEXT):(t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_HEAD_NO_SCRIPT);break}case F.NOFRAMES:case F.STYLE:{t._switchToTextParsing(e,Ko.RAWTEXT);break}case F.SCRIPT:{t._switchToTextParsing(e,Ko.SCRIPT_DATA);break}case F.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ye.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE);break}case F.HEAD:{t._err(e,$e.misplacedStartTagForHeadElement);break}default:Xg(t,e)}}function obe(t,e){switch(e.tagID){case F.HEAD:{t.openElements.pop(),t.insertionMode=ye.AFTER_HEAD;break}case F.BODY:case F.BR:case F.HTML:{Xg(t,e);break}case F.TEMPLATE:{bh(t,e);break}default:t._err(e,$e.endTagWithoutMatchingOpenElement)}}function bh(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==F.TEMPLATE&&t._err(e,$e.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(F.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,$e.endTagWithoutMatchingOpenElement)}function Xg(t,e){t.openElements.pop(),t.insertionMode=ye.AFTER_HEAD,t._processToken(e)}function abe(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.BASEFONT:case F.BGSOUND:case F.HEAD:case F.LINK:case F.META:case F.NOFRAMES:case F.STYLE:{nl(t,e);break}case F.NOSCRIPT:{t._err(e,$e.nestedNoscriptInHead);break}default:Zg(t,e)}}function sbe(t,e){switch(e.tagID){case F.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ye.IN_HEAD;break}case F.BR:{Zg(t,e);break}default:t._err(e,$e.endTagWithoutMatchingOpenElement)}}function Zg(t,e){const n=e.type===Bn.EOF?$e.openElementsLeftAfterEof:$e.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=ye.IN_HEAD,t._processToken(e)}function lbe(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.BODY:{t._insertElement(e,Ze.HTML),t.framesetOk=!1,t.insertionMode=ye.IN_BODY;break}case F.FRAMESET:{t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_FRAMESET;break}case F.BASE:case F.BASEFONT:case F.BGSOUND:case F.LINK:case F.META:case F.NOFRAMES:case F.SCRIPT:case F.STYLE:case F.TEMPLATE:case F.TITLE:{t._err(e,$e.abandonedHeadElementChild),t.openElements.push(t.headElement,F.HEAD),nl(t,e),t.openElements.remove(t.headElement);break}case F.HEAD:{t._err(e,$e.misplacedStartTagForHeadElement);break}default:Qg(t,e)}}function ube(t,e){switch(e.tagID){case F.BODY:case F.HTML:case F.BR:{Qg(t,e);break}case F.TEMPLATE:{bh(t,e);break}default:t._err(e,$e.endTagWithoutMatchingOpenElement)}}function Qg(t,e){t._insertFakeElement(De.BODY,F.BODY),t.insertionMode=ye.IN_BODY,ZE(t,e)}function ZE(t,e){switch(e.type){case Bn.CHARACTER:{sW(t,e);break}case Bn.WHITESPACE_CHARACTER:{aW(t,e);break}case Bn.COMMENT:{ZD(t,e);break}case Bn.START_TAG:{lo(t,e);break}case Bn.END_TAG:{QE(t,e);break}case Bn.EOF:{fW(t,e);break}}}function aW(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function sW(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function cbe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function fbe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function dbe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_FRAMESET)}function hbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML)}function pbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&XD.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ze.HTML)}function mbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function gbe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML),n||(t.formElement=t.openElements.current))}function vbe(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===F.LI&&i===F.LI||(n===F.DD||n===F.DT)&&(i===F.DD||i===F.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==F.ADDRESS&&i!==F.DIV&&i!==F.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML)}function bbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML),t.tokenizer.state=Ko.PLAINTEXT}function ybe(t,e){t.openElements.hasInScope(F.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(F.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML),t.framesetOk=!1}function xbe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(De.A);n&&(Bk(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function wbe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Ebe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(F.NOBR)&&(Bk(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Cbe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function Sbe(t,e){t.treeAdapter.getDocumentMode(t.document)!==ts.QUIRKS&&t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._insertElement(e,Ze.HTML),t.framesetOk=!1,t.insertionMode=ye.IN_TABLE}function lW(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ze.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function uW(t){const e=XY(t,zd.TYPE);return e!=null&&e.toLowerCase()===Hve}function Tbe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ze.HTML),uW(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function Abe(t,e){t._appendElement(e,Ze.HTML),e.ackSelfClosing=!0}function Nbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._appendElement(e,Ze.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Dbe(t,e){e.tagName=De.IMG,e.tagID=F.IMG,lW(t,e)}function Mbe(t,e){t._insertElement(e,Ze.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Ko.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ye.TEXT}function kbe(t,e){t.openElements.hasInButtonScope(F.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Ko.RAWTEXT)}function _be(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Ko.RAWTEXT)}function oB(t,e){t._switchToTextParsing(e,Ko.RAWTEXT)}function Obe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ye.IN_TABLE||t.insertionMode===ye.IN_CAPTION||t.insertionMode===ye.IN_TABLE_BODY||t.insertionMode===ye.IN_ROW||t.insertionMode===ye.IN_CELL?ye.IN_SELECT_IN_TABLE:ye.IN_SELECT}function Ibe(t,e){t.openElements.currentTagId===F.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML)}function Rbe(t,e){t.openElements.hasInScope(F.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ze.HTML)}function Bbe(t,e){t.openElements.hasInScope(F.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(F.RTC),t._insertElement(e,Ze.HTML)}function Lbe(t,e){t._reconstructActiveFormattingElements(),nW(e),Rk(e),e.selfClosing?t._appendElement(e,Ze.MATHML):t._insertElement(e,Ze.MATHML),e.ackSelfClosing=!0}function Fbe(t,e){t._reconstructActiveFormattingElements(),rW(e),Rk(e),e.selfClosing?t._appendElement(e,Ze.SVG):t._insertElement(e,Ze.SVG),e.ackSelfClosing=!0}function aB(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ze.HTML)}function lo(t,e){switch(e.tagID){case F.I:case F.S:case F.B:case F.U:case F.EM:case F.TT:case F.BIG:case F.CODE:case F.FONT:case F.SMALL:case F.STRIKE:case F.STRONG:{wbe(t,e);break}case F.A:{xbe(t,e);break}case F.H1:case F.H2:case F.H3:case F.H4:case F.H5:case F.H6:{pbe(t,e);break}case F.P:case F.DL:case F.OL:case F.UL:case F.DIV:case F.DIR:case F.NAV:case F.MAIN:case F.MENU:case F.ASIDE:case F.CENTER:case F.FIGURE:case F.FOOTER:case F.HEADER:case F.HGROUP:case F.DIALOG:case F.DETAILS:case F.ADDRESS:case F.ARTICLE:case F.SEARCH:case F.SECTION:case F.SUMMARY:case F.FIELDSET:case F.BLOCKQUOTE:case F.FIGCAPTION:{hbe(t,e);break}case F.LI:case F.DD:case F.DT:{vbe(t,e);break}case F.BR:case F.IMG:case F.WBR:case F.AREA:case F.EMBED:case F.KEYGEN:{lW(t,e);break}case F.HR:{Nbe(t,e);break}case F.RB:case F.RTC:{Rbe(t,e);break}case F.RT:case F.RP:{Bbe(t,e);break}case F.PRE:case F.LISTING:{mbe(t,e);break}case F.XMP:{kbe(t,e);break}case F.SVG:{Fbe(t,e);break}case F.HTML:{cbe(t,e);break}case F.BASE:case F.LINK:case F.META:case F.STYLE:case F.TITLE:case F.SCRIPT:case F.BGSOUND:case F.BASEFONT:case F.TEMPLATE:{nl(t,e);break}case F.BODY:{fbe(t,e);break}case F.FORM:{gbe(t,e);break}case F.NOBR:{Ebe(t,e);break}case F.MATH:{Lbe(t,e);break}case F.TABLE:{Sbe(t,e);break}case F.INPUT:{Tbe(t,e);break}case F.PARAM:case F.TRACK:case F.SOURCE:{Abe(t,e);break}case F.IMAGE:{Dbe(t,e);break}case F.BUTTON:{ybe(t,e);break}case F.APPLET:case F.OBJECT:case F.MARQUEE:{Cbe(t,e);break}case F.IFRAME:{_be(t,e);break}case F.SELECT:{Obe(t,e);break}case F.OPTION:case F.OPTGROUP:{Ibe(t,e);break}case F.NOEMBED:case F.NOFRAMES:{oB(t,e);break}case F.FRAMESET:{dbe(t,e);break}case F.TEXTAREA:{Mbe(t,e);break}case F.NOSCRIPT:{t.options.scriptingEnabled?oB(t,e):aB(t,e);break}case F.PLAINTEXT:{bbe(t,e);break}case F.COL:case F.TH:case F.TD:case F.TR:case F.HEAD:case F.FRAME:case F.TBODY:case F.TFOOT:case F.THEAD:case F.CAPTION:case F.COLGROUP:break;default:aB(t,e)}}function Pbe(t,e){if(t.openElements.hasInScope(F.BODY)&&(t.insertionMode=ye.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function $be(t,e){t.openElements.hasInScope(F.BODY)&&(t.insertionMode=ye.AFTER_BODY,yW(t,e))}function zbe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function Ube(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(F.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(F.FORM):n&&t.openElements.remove(n))}function Hbe(t){t.openElements.hasInButtonScope(F.P)||t._insertFakeElement(De.P,F.P),t._closePElement()}function Vbe(t){t.openElements.hasInListItemScope(F.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(F.LI),t.openElements.popUntilTagNamePopped(F.LI))}function qbe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function jbe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function Gbe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function Ybe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(De.BR,F.BR),t.openElements.pop(),t.framesetOk=!1}function cW(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const o=t.openElements.items[i],a=t.openElements.tagIDs[i];if(r===a&&(r!==F.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(o,a))break}}function QE(t,e){switch(e.tagID){case F.A:case F.B:case F.I:case F.S:case F.U:case F.EM:case F.TT:case F.BIG:case F.CODE:case F.FONT:case F.NOBR:case F.SMALL:case F.STRIKE:case F.STRONG:{Bk(t,e);break}case F.P:{Hbe(t);break}case F.DL:case F.UL:case F.OL:case F.DIR:case F.DIV:case F.NAV:case F.PRE:case F.MAIN:case F.MENU:case F.ASIDE:case F.BUTTON:case F.CENTER:case F.FIGURE:case F.FOOTER:case F.HEADER:case F.HGROUP:case F.DIALOG:case F.ADDRESS:case F.ARTICLE:case F.DETAILS:case F.SEARCH:case F.SECTION:case F.SUMMARY:case F.LISTING:case F.FIELDSET:case F.BLOCKQUOTE:case F.FIGCAPTION:{zbe(t,e);break}case F.LI:{Vbe(t);break}case F.DD:case F.DT:{qbe(t,e);break}case F.H1:case F.H2:case F.H3:case F.H4:case F.H5:case F.H6:{jbe(t);break}case F.BR:{Ybe(t);break}case F.BODY:{Pbe(t,e);break}case F.HTML:{$be(t,e);break}case F.FORM:{Ube(t);break}case F.APPLET:case F.OBJECT:case F.MARQUEE:{Gbe(t,e);break}case F.TEMPLATE:{bh(t,e);break}default:cW(t,e)}}function fW(t,e){t.tmplInsertionModeStack.length>0?bW(t,e):Lk(t,e)}function Wbe(t,e){var n;e.tagID===F.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Kbe(t,e){t._err(e,$e.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function SN(t,e){if(t.openElements.currentTagId!==void 0&&iW.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ye.IN_TABLE_TEXT,e.type){case Bn.CHARACTER:{hW(t,e);break}case Bn.WHITESPACE_CHARACTER:{dW(t,e);break}}else hv(t,e)}function Xbe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_CAPTION}function Zbe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_COLUMN_GROUP}function Qbe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(De.COLGROUP,F.COLGROUP),t.insertionMode=ye.IN_COLUMN_GROUP,Fk(t,e)}function Jbe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_TABLE_BODY}function eye(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(De.TBODY,F.TBODY),t.insertionMode=ye.IN_TABLE_BODY,JE(t,e)}function tye(t,e){t.openElements.hasInTableScope(F.TABLE)&&(t.openElements.popUntilTagNamePopped(F.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function nye(t,e){uW(e)?t._appendElement(e,Ze.HTML):hv(t,e),e.ackSelfClosing=!0}function rye(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ze.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function wm(t,e){switch(e.tagID){case F.TD:case F.TH:case F.TR:{eye(t,e);break}case F.STYLE:case F.SCRIPT:case F.TEMPLATE:{nl(t,e);break}case F.COL:{Qbe(t,e);break}case F.FORM:{rye(t,e);break}case F.TABLE:{tye(t,e);break}case F.TBODY:case F.TFOOT:case F.THEAD:{Jbe(t,e);break}case F.INPUT:{nye(t,e);break}case F.CAPTION:{Xbe(t,e);break}case F.COLGROUP:{Zbe(t,e);break}default:hv(t,e)}}function F1(t,e){switch(e.tagID){case F.TABLE:{t.openElements.hasInTableScope(F.TABLE)&&(t.openElements.popUntilTagNamePopped(F.TABLE),t._resetInsertionMode());break}case F.TEMPLATE:{bh(t,e);break}case F.BODY:case F.CAPTION:case F.COL:case F.COLGROUP:case F.HTML:case F.TBODY:case F.TD:case F.TFOOT:case F.TH:case F.THEAD:case F.TR:break;default:hv(t,e)}}function hv(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,ZE(t,e),t.fosterParentingEnabled=n}function dW(t,e){t.pendingCharacterTokens.push(e)}function hW(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function xg(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)hv(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const pW=new Set([F.CAPTION,F.COL,F.COLGROUP,F.TBODY,F.TD,F.TFOOT,F.TH,F.THEAD,F.TR]);function iye(t,e){const n=e.tagID;pW.has(n)?t.openElements.hasInTableScope(F.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(F.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ye.IN_TABLE,wm(t,e)):lo(t,e)}function oye(t,e){const n=e.tagID;switch(n){case F.CAPTION:case F.TABLE:{t.openElements.hasInTableScope(F.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(F.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ye.IN_TABLE,n===F.TABLE&&F1(t,e));break}case F.BODY:case F.COL:case F.COLGROUP:case F.HTML:case F.TBODY:case F.TD:case F.TFOOT:case F.TH:case F.THEAD:case F.TR:break;default:QE(t,e)}}function Fk(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.COL:{t._appendElement(e,Ze.HTML),e.ackSelfClosing=!0;break}case F.TEMPLATE:{nl(t,e);break}default:Ix(t,e)}}function aye(t,e){switch(e.tagID){case F.COLGROUP:{t.openElements.currentTagId===F.COLGROUP&&(t.openElements.pop(),t.insertionMode=ye.IN_TABLE);break}case F.TEMPLATE:{bh(t,e);break}case F.COL:break;default:Ix(t,e)}}function Ix(t,e){t.openElements.currentTagId===F.COLGROUP&&(t.openElements.pop(),t.insertionMode=ye.IN_TABLE,t._processToken(e))}function JE(t,e){switch(e.tagID){case F.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_ROW;break}case F.TH:case F.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(De.TR,F.TR),t.insertionMode=ye.IN_ROW,eC(t,e);break}case F.CAPTION:case F.COL:case F.COLGROUP:case F.TBODY:case F.TFOOT:case F.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE,wm(t,e));break}default:wm(t,e)}}function QD(t,e){const n=e.tagID;switch(e.tagID){case F.TBODY:case F.TFOOT:case F.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE);break}case F.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE,F1(t,e));break}case F.BODY:case F.CAPTION:case F.COL:case F.COLGROUP:case F.HTML:case F.TD:case F.TH:case F.TR:break;default:F1(t,e)}}function eC(t,e){switch(e.tagID){case F.TH:case F.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ze.HTML),t.insertionMode=ye.IN_CELL,t.activeFormattingElements.insertMarker();break}case F.CAPTION:case F.COL:case F.COLGROUP:case F.TBODY:case F.TFOOT:case F.THEAD:case F.TR:{t.openElements.hasInTableScope(F.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE_BODY,JE(t,e));break}default:wm(t,e)}}function mW(t,e){switch(e.tagID){case F.TR:{t.openElements.hasInTableScope(F.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE_BODY);break}case F.TABLE:{t.openElements.hasInTableScope(F.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE_BODY,QD(t,e));break}case F.TBODY:case F.TFOOT:case F.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(F.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ye.IN_TABLE_BODY,QD(t,e));break}case F.BODY:case F.CAPTION:case F.COL:case F.COLGROUP:case F.HTML:case F.TD:case F.TH:break;default:F1(t,e)}}function sye(t,e){const n=e.tagID;pW.has(n)?(t.openElements.hasInTableScope(F.TD)||t.openElements.hasInTableScope(F.TH))&&(t._closeTableCell(),eC(t,e)):lo(t,e)}function lye(t,e){const n=e.tagID;switch(n){case F.TD:case F.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ye.IN_ROW);break}case F.TABLE:case F.TBODY:case F.TFOOT:case F.THEAD:case F.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),mW(t,e));break}case F.BODY:case F.CAPTION:case F.COL:case F.COLGROUP:case F.HTML:break;default:QE(t,e)}}function gW(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.OPTION:{t.openElements.currentTagId===F.OPTION&&t.openElements.pop(),t._insertElement(e,Ze.HTML);break}case F.OPTGROUP:{t.openElements.currentTagId===F.OPTION&&t.openElements.pop(),t.openElements.currentTagId===F.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ze.HTML);break}case F.HR:{t.openElements.currentTagId===F.OPTION&&t.openElements.pop(),t.openElements.currentTagId===F.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ze.HTML),e.ackSelfClosing=!0;break}case F.INPUT:case F.KEYGEN:case F.TEXTAREA:case F.SELECT:{t.openElements.hasInSelectScope(F.SELECT)&&(t.openElements.popUntilTagNamePopped(F.SELECT),t._resetInsertionMode(),e.tagID!==F.SELECT&&t._processStartTag(e));break}case F.SCRIPT:case F.TEMPLATE:{nl(t,e);break}}}function vW(t,e){switch(e.tagID){case F.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===F.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===F.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===F.OPTGROUP&&t.openElements.pop();break}case F.OPTION:{t.openElements.currentTagId===F.OPTION&&t.openElements.pop();break}case F.SELECT:{t.openElements.hasInSelectScope(F.SELECT)&&(t.openElements.popUntilTagNamePopped(F.SELECT),t._resetInsertionMode());break}case F.TEMPLATE:{bh(t,e);break}}}function uye(t,e){const n=e.tagID;n===F.CAPTION||n===F.TABLE||n===F.TBODY||n===F.TFOOT||n===F.THEAD||n===F.TR||n===F.TD||n===F.TH?(t.openElements.popUntilTagNamePopped(F.SELECT),t._resetInsertionMode(),t._processStartTag(e)):gW(t,e)}function cye(t,e){const n=e.tagID;n===F.CAPTION||n===F.TABLE||n===F.TBODY||n===F.TFOOT||n===F.THEAD||n===F.TR||n===F.TD||n===F.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(F.SELECT),t._resetInsertionMode(),t.onEndTag(e)):vW(t,e)}function fye(t,e){switch(e.tagID){case F.BASE:case F.BASEFONT:case F.BGSOUND:case F.LINK:case F.META:case F.NOFRAMES:case F.SCRIPT:case F.STYLE:case F.TEMPLATE:case F.TITLE:{nl(t,e);break}case F.CAPTION:case F.COLGROUP:case F.TBODY:case F.TFOOT:case F.THEAD:{t.tmplInsertionModeStack[0]=ye.IN_TABLE,t.insertionMode=ye.IN_TABLE,wm(t,e);break}case F.COL:{t.tmplInsertionModeStack[0]=ye.IN_COLUMN_GROUP,t.insertionMode=ye.IN_COLUMN_GROUP,Fk(t,e);break}case F.TR:{t.tmplInsertionModeStack[0]=ye.IN_TABLE_BODY,t.insertionMode=ye.IN_TABLE_BODY,JE(t,e);break}case F.TD:case F.TH:{t.tmplInsertionModeStack[0]=ye.IN_ROW,t.insertionMode=ye.IN_ROW,eC(t,e);break}default:t.tmplInsertionModeStack[0]=ye.IN_BODY,t.insertionMode=ye.IN_BODY,lo(t,e)}}function dye(t,e){e.tagID===F.TEMPLATE&&bh(t,e)}function bW(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(F.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):Lk(t,e)}function hye(t,e){e.tagID===F.HTML?lo(t,e):Rx(t,e)}function yW(t,e){var n;if(e.tagID===F.HTML){if(t.fragmentContext||(t.insertionMode=ye.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===F.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else Rx(t,e)}function Rx(t,e){t.insertionMode=ye.IN_BODY,ZE(t,e)}function pye(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.FRAMESET:{t._insertElement(e,Ze.HTML);break}case F.FRAME:{t._appendElement(e,Ze.HTML),e.ackSelfClosing=!0;break}case F.NOFRAMES:{nl(t,e);break}}}function mye(t,e){e.tagID===F.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==F.FRAMESET&&(t.insertionMode=ye.AFTER_FRAMESET))}function gye(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.NOFRAMES:{nl(t,e);break}}}function vye(t,e){e.tagID===F.HTML&&(t.insertionMode=ye.AFTER_AFTER_FRAMESET)}function bye(t,e){e.tagID===F.HTML?lo(t,e):B2(t,e)}function B2(t,e){t.insertionMode=ye.IN_BODY,ZE(t,e)}function yye(t,e){switch(e.tagID){case F.HTML:{lo(t,e);break}case F.NOFRAMES:{nl(t,e);break}}}function xye(t,e){e.chars=Mr,t._insertCharacters(e)}function wye(t,e){t._insertCharacters(e),t.framesetOk=!1}function xW(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ze.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Eye(t,e){if(Fve(e))xW(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Ze.MATHML?nW(e):r===Ze.SVG&&(Pve(e),rW(e)),Rk(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function Cye(t,e){if(e.tagID===F.P||e.tagID===F.BR){xW(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Ze.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}De.AREA,De.BASE,De.BASEFONT,De.BGSOUND,De.BR,De.COL,De.EMBED,De.FRAME,De.HR,De.IMG,De.INPUT,De.KEYGEN,De.LINK,De.META,De.PARAM,De.SOURCE,De.TRACK,De.WBR;function Sye(t,e){return oW.parse(t,e)}function Tye(t,e,n){typeof t=="string"&&(n=e,e=t,t=null);const r=oW.getFragmentParser(t,n);return r.tokenizer.write(e,!0),r.getFragment()}function Jg(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?sB(t.position):"start"in t||"end"in t?sB(t):"line"in t||"column"in t?JD(t):""}function JD(t){return lB(t&&t.line)+":"+lB(t&&t.column)}function sB(t){return JD(t&&t.start)+"-"+JD(t&&t.end)}function lB(t){return t&&typeof t=="number"?t:1}class ji extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(a=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=s?s.line:void 0,this.name=Jg(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ji.prototype.file="";ji.prototype.name="";ji.prototype.reason="";ji.prototype.message="";ji.prototype.stack="";ji.prototype.column=void 0;ji.prototype.line=void 0;ji.prototype.ancestors=void 0;ji.prototype.cause=void 0;ji.prototype.fatal=void 0;ji.prototype.place=void 0;ji.prototype.ruleId=void 0;ji.prototype.source=void 0;const Sl={basename:Aye,dirname:Nye,extname:Dye,join:Mye,sep:"/"};function Aye(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');pv(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,s=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(t.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function Nye(t){if(pv(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Dye(t){pv(t);let e=t.length,n=-1,r=0,i=-1,o=0,a;for(;e--;){const s=t.codePointAt(e);if(s===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),s===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Mye(...t){let e=-1,n;for(;++e<t.length;)pv(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":kye(n)}function kye(t){pv(t);const e=t.codePointAt(0)===47;let n=_ye(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function _ye(t,e){let n="",r=0,i=-1,o=0,a=-1,s,l;for(;++a<=t.length;){if(a<t.length)s=t.codePointAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return n}function pv(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Oye={cwd:Iye};function Iye(){return"/"}function e4(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Rye(t){if(typeof t=="string")t=new URL(t);else if(!e4(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Bye(t)}function Bye(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const TN=["history","path","basename","stem","extname","dirname"];class Bx{constructor(e){let n;e?e4(e)?n={path:e}:typeof e=="string"||Lye(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Oye.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<TN.length;){const o=TN[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)TN.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Sl.basename(this.path):void 0}set basename(e){NN(e,"basename"),AN(e,"basename"),this.path=Sl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Sl.dirname(this.path):void 0}set dirname(e){uB(this.basename,"dirname"),this.path=Sl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Sl.extname(this.path):void 0}set extname(e){if(AN(e,"extname"),uB(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Sl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){e4(e)&&(e=Rye(e)),NN(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Sl.basename(this.path,this.extname):void 0}set stem(e){NN(e,"stem"),AN(e,"stem"),this.path=Sl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new ji(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function AN(t,e){if(t&&t.includes(Sl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Sl.sep+"`")}function NN(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function uB(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Lye(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Fye={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `-->` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `-->` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `<!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `<!--`. Expected `-->`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},Pye="https://html.spec.whatwg.org/multipage/parsing.html#parse-error-",$ye=/-[a-z]/g,zye=/%c(?:([-+])(\d+))?/g,Uye=/%x/g,Hye={2:!0,1:!1,0:null},Vye={};function qye(t,e){const n=e||Vye,r=n.onerror,i=t instanceof Bx?t:new Bx(t),o=n.fragment?Tye:Sye,a=String(i),s=o(a,{sourceCodeLocationInfo:!0,onParseError:n.onerror?l:null,scriptingEnabled:!1});return Y1e(s,{file:i,space:n.space,verbose:n.verbose});function l(u){const c=u.code,f=jye(c),d=n[f],h=d??!0,m=typeof h=="number"?h:h?1:0;if(m){const b=Fye[f],x=new ji(v(b.reason),{place:{start:{line:u.startLine,column:u.startCol,offset:u.startOffset},end:{line:u.endLine,column:u.endCol,offset:u.endOffset}},ruleId:c,source:"hast-util-from-html"});i.path&&(x.file=i.path,x.name=i.path+":"+x.name),x.fatal=Hye[m],x.note=v(b.description),x.url=b.url===!1?void 0:Pye+c,r(x)}function v(b){return b.replace(zye,x).replace(Uye,C);function x(w,A,E){const T=(E?Number.parseInt(E,10):0)*(A==="-"?-1:1),N=a.charAt(u.startOffset+T);return Yye(N)}function C(){return Wye(a.charCodeAt(u.startOffset))}}}}function jye(t){return t.replace($ye,Gye)}function Gye(t){return t.charAt(1).toUpperCase()}function Yye(t){return t==="`"?"` ` `":t}function Wye(t){return"0x"+t.toString(16).toUpperCase()}function Kye(t){const e=this,{emitParseErrors:n,...r}={...e.data("settings"),...t};e.parser=i;function i(o,a){return qye(o,{...r,onerror:n?function(s){a.path&&(s.name=a.path+":"+s.name,s.file=a.path),a.messages.push(s)}:void 0})}}const wW=-1,tC=0,e1=1,Lx=2,Pk=3,$k=4,zk=5,Uk=6,EW=7,CW=8,cB=typeof self=="object"?self:globalThis,Xye=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,a]=e[i];switch(o){case tC:case wW:return n(a,i);case e1:{const s=n([],i);for(const l of a)s.push(r(l));return s}case Lx:{const s=n({},i);for(const[l,u]of a)s[r(l)]=r(u);return s}case Pk:return n(new Date(a),i);case $k:{const{source:s,flags:l}=a;return n(new RegExp(s,l),i)}case zk:{const s=n(new Map,i);for(const[l,u]of a)s.set(r(l),r(u));return s}case Uk:{const s=n(new Set,i);for(const l of a)s.add(r(l));return s}case EW:{const{name:s,message:l}=a;return n(new cB[s](l),i)}case CW:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:s}=new Uint8Array(a);return n(new DataView(s),a)}}return n(new cB[o](a),i)};return r},fB=t=>Xye(new Map,t)(0),mp="",{toString:Zye}={},{keys:Qye}=Object,wg=t=>{const e=typeof t;if(e!=="object"||!t)return[tC,e];const n=Zye.call(t).slice(8,-1);switch(n){case"Array":return[e1,mp];case"Object":return[Lx,mp];case"Date":return[Pk,mp];case"RegExp":return[$k,mp];case"Map":return[zk,mp];case"Set":return[Uk,mp];case"DataView":return[e1,n]}return n.includes("Array")?[e1,n]:n.includes("Error")?[EW,n]:[Lx,n]},ky=([t,e])=>t===tC&&(e==="function"||e==="symbol"),Jye=(t,e,n,r)=>{const i=(a,s)=>{const l=r.push(a)-1;return n.set(s,l),l},o=a=>{if(n.has(a))return n.get(a);let[s,l]=wg(a);switch(s){case tC:{let c=a;switch(l){case"bigint":s=CW,c=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([wW],a)}return i([s,c],a)}case e1:{if(l){let d=a;return l==="DataView"?d=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(d=new Uint8Array(a)),i([l,[...d]],a)}const c=[],f=i([s,c],a);for(const d of a)c.push(o(d));return f}case Lx:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(e&&"toJSON"in a)return o(a.toJSON());const c=[],f=i([s,c],a);for(const d of Qye(a))(t||!ky(wg(a[d])))&&c.push([o(d),o(a[d])]);return f}case Pk:return i([s,a.toISOString()],a);case $k:{const{source:c,flags:f}=a;return i([s,{source:c,flags:f}],a)}case zk:{const c=[],f=i([s,c],a);for(const[d,h]of a)(t||!(ky(wg(d))||ky(wg(h))))&&c.push([o(d),o(h)]);return f}case Uk:{const c=[],f=i([s,c],a);for(const d of a)(t||!ky(wg(d)))&&c.push(o(d));return f}}const{message:u}=a;return i([s,{name:l,message:u}],a)};return o},dB=(t,{json:e,lossy:n}={})=>{const r=[];return Jye(!(e||n),!!e,new Map,r)(t),r},Em=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?fB(dB(t,e)):structuredClone(t):(t,e)=>fB(dB(t,e)),Hk=(function(t,e,n,r,i){const o=rl(e);return SW(t)?o.call(i,t,n,r):!1}),rl=(function(t){if(t==null)return n2e;if(typeof t=="string")return t2e(t);if(typeof t=="object")return e2e(t);if(typeof t=="function")return Vk(t);throw new Error("Expected function, string, or array as `test`")});function e2e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=rl(t[n]);return Vk(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function t2e(t){return Vk(e);function e(n){return n.tagName===t}}function Vk(t){return e;function e(n,r,i){return!!(SW(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function n2e(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function SW(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const TW=rl(function(t){return t.tagName==="audio"||t.tagName==="canvas"||t.tagName==="embed"||t.tagName==="iframe"||t.tagName==="img"||t.tagName==="math"||t.tagName==="object"||t.tagName==="picture"||t.tagName==="svg"||t.tagName==="video"}),r2e=/[ \t\n\f\r]/g;function Ym(t){return typeof t=="object"?t.type==="text"?hB(t.value):!1:hB(t)}function hB(t){return t.replace(r2e,"")===""}const Wm=(function(t){if(t==null)return s2e;if(typeof t=="function")return nC(t);if(typeof t=="object")return Array.isArray(t)?i2e(t):o2e(t);if(typeof t=="string")return a2e(t);throw new Error("Expected function, string, or object as test")});function i2e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Wm(t[n]);return nC(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function o2e(t){const e=t;return nC(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function a2e(t){return nC(e);function e(n){return n&&n.type===t}}function nC(t){return e;function e(n,r,i){return!!(l2e(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function s2e(){return!0}function l2e(t){return t!==null&&typeof t=="object"&&"type"in t}const u2e=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],c2e=["button","input","select","textarea"],f2e=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],d2e={},qk=Wm(["comment","doctype"]);function h2e(t,e){AW(t,{collapse:x2e((e||d2e).newlines?b2e:y2e),whitespace:"normal"})}function AW(t,e){if("children"in t){const n={...e};return(t.type==="root"||MW(t))&&(n.before=!0,n.after=!0),n.whitespace=w2e(t,e),m2e(t,n)}if(t.type==="text"){if(e.whitespace==="normal")return p2e(t,e);e.whitespace==="nowrap"&&(t.value=e.collapse(t.value))}return{ignore:qk(t),stripAtStart:!1,remove:!1}}function p2e(t,e){const n=e.collapse(t.value),r={ignore:!1,stripAtStart:!1,remove:!1};let i=0,o=n.length;return e.before&&pB(n.charAt(0))&&i++,i!==o&&pB(n.charAt(o-1))&&(e.after?o--:r.stripAtStart=!0),i===o?r.remove=!0:t.value=n.slice(i,o),r}function m2e(t,e){let n=e.before;const r=e.after,i=t.children;let o=i.length,a=-1;for(;++a<o;){const s=AW(i[a],{...e,after:NW(i,a,r),before:n});s.remove?(i.splice(a,1),a--,o--):s.ignore||(n=s.stripAtStart),DW(i[a])&&(n=!1)}return{ignore:!1,stripAtStart:!!(n||r),remove:!1}}function NW(t,e,n){for(;++e<t.length;){const r=t[e];let i=g2e(r);if(i===void 0&&"children"in r&&!v2e(r)&&(i=NW(r.children,-1)),typeof i=="boolean")return i}return n}function g2e(t){if(t.type==="element"){if(DW(t))return!1;if(MW(t))return!0}else if(t.type==="text"){if(!Ym(t))return!1}else if(!qk(t))return!1}function DW(t){return TW(t)||Hk(t,c2e)}function MW(t){return Hk(t,u2e)}function v2e(t){return!!(t.type==="element"&&t.properties.hidden)||qk(t)||Hk(t,f2e)}function pB(t){return t===" "||t===`
`}function b2e(t){const e=/\r?\n|\r/.exec(t);return e?e[0]:" "}function y2e(){return" "}function x2e(t){return e;function e(n){return String(n).replace(/[\t\n\v\f\r ]+/g,t)}}function w2e(t,e){if("tagName"in t&&t.properties)switch(t.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.properties.wrap?"pre-wrap":"pre";case"td":case"th":return t.properties.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}return e.whitespace}function E2e(t){return function(e){h2e(e,t)}}const kW=[],C2e=!0,Fx=!1,_W="skip";function OW(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=Wm(i),a=r?-1:1;s(t,void 0,[])();function s(l,u,c){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=kW,m,v,b;if((!e||o(l,u,c[c.length-1]||void 0))&&(h=S2e(n(l,c)),h[0]===Fx))return h;if("children"in l&&l.children){const x=l;if(x.children&&h[0]!==_W)for(v=(r?x.children.length:-1)+a,b=c.concat(x);v>-1&&v<x.children.length;){const C=x.children[v];if(m=s(C,v,b)(),m[0]===Fx)return m;v=typeof m[1]=="number"?m[1]:v+a}}return h}}}function S2e(t){return Array.isArray(t)?t:typeof t=="number"?[C2e,t]:t==null?kW:[t]}function bf(t,e,n,r){let i,o,a;typeof e=="function"&&typeof n!="function"?(o=void 0,a=e,i=n):(o=e,a=n,i=r),OW(t,o,s,i);function s(l,u){const c=u[u.length-1],f=c?c.children.indexOf(l):void 0;return a(l,f,c)}}const IW=RW("end"),jk=RW("start");function RW(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function BW(t){const e=jk(t),n=IW(t);if(e&&n)return{start:e,end:n}}function T2e(t,e){const n=e.properties||{},r=t.all(e),i={type:"link",url:t.resolve(String(n.href||"")||null),title:n.title?String(n.title):null,children:r};return t.patch(e,i),i}function A2e(t,e){t.baseFound||(t.frozenBaseUrl=String(e.properties&&e.properties.href||"")||void 0,t.baseFound=!0)}function N2e(t,e){const n={type:"blockquote",children:t.toFlow(t.all(e))};return t.patch(e,n),n}function D2e(t,e){const n={type:"break"};return t.patch(e,n),n}const mB=(function(t,e,n){const r=Wm(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e]}),gB=/\n/g,vB=/[\t ]+/g,t4=rl("br"),bB=rl(B2e),M2e=rl("p"),yB=rl("tr"),k2e=rl(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",R2e,L2e]),LW=rl(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function mv(t,e){const n={},r="children"in t?t.children:[],i=LW(t),o=$W(t,{whitespace:n.whitespace||"normal"}),a=[];(t.type==="text"||t.type==="comment")&&a.push(...PW(t,{breakBefore:!0,breakAfter:!0}));let s=-1;for(;++s<r.length;)a.push(...FW(r[s],t,{whitespace:o,breakBefore:s?void 0:i,breakAfter:s<r.length-1?t4(r[s+1]):i}));const l=[];let u;for(s=-1;++s<a.length;){const c=a[s];typeof c=="number"?u!==void 0&&c>u&&(u=c):c&&(u!==void 0&&u>-1&&l.push(`
`.repeat(u)||" "),u=-1,l.push(c))}return l.join("")}function FW(t,e,n){return t.type==="element"?_2e(t,e,n):t.type==="text"?n.whitespace==="normal"?PW(t,n):O2e(t):[]}function _2e(t,e,n){const r=$W(t,n),i=t.children||[];let o=-1,a=[];if(k2e(t))return a;let s,l;for(t4(t)||yB(t)&&mB(e,t,yB)?l=`
`:M2e(t)?(s=2,l=2):LW(t)&&(s=1,l=1);++o<i.length;)a=a.concat(FW(i[o],t,{whitespace:r,breakBefore:o?void 0:s,breakAfter:o<i.length-1?t4(i[o+1]):l}));return bB(t)&&mB(e,t,bB)&&a.push("	"),s&&a.unshift(s),l&&a.push(l),a}function PW(t,e){const n=String(t.value),r=[],i=[];let o=0;for(;o<=n.length;){gB.lastIndex=o;const l=gB.exec(n),u=l&&"index"in l?l.index:n.length;r.push(I2e(n.slice(o,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?e.breakBefore:!0,u===n.length?e.breakAfter:!0)),o=u+1}let a=-1,s;for(;++a<r.length;)r[a].charCodeAt(r[a].length-1)===8203||a<r.length-1&&r[a+1].charCodeAt(0)===8203?(i.push(r[a]),s=void 0):r[a]?(typeof s=="number"&&i.push(s),i.push(r[a]),s=0):(a===0||a===r.length-1)&&i.push(0);return i}function O2e(t){return[String(t.value)]}function I2e(t,e,n){const r=[];let i=0,o;for(;i<t.length;){vB.lastIndex=i;const a=vB.exec(t);o=a?a.index:t.length,!i&&!o&&a&&!e&&r.push(""),i!==o&&r.push(t.slice(i,o)),i=a?o+a[0].length:o}return i!==o&&!n&&r.push(""),r.join(" ")}function $W(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function R2e(t){return!!(t.properties||{}).hidden}function B2e(t){return t.tagName==="td"||t.tagName==="th"}function L2e(t){return t.tagName==="dialog"&&!(t.properties||{}).open}function F2e(t){const e=String(t);let n=e.length;for(;n>0;){const r=e.codePointAt(n-1);if(r!==void 0&&(r===10||r===13))n--;else break}return e.slice(0,n)}const DN="language-";function _y(t,e){const n=e.children;let r=-1,i,o;if(e.tagName==="pre")for(;++r<n.length;){const s=n[r];if(s.type==="element"&&s.tagName==="code"&&s.properties&&s.properties.className&&Array.isArray(s.properties.className)){i=s.properties.className;break}}if(i){for(r=-1;++r<i.length;)if(String(i[r]).slice(0,DN.length)===DN){o=String(i[r]).slice(DN.length);break}}const a={type:"code",lang:o||null,meta:null,value:F2e(mv(e))};return t.patch(e,a),a}function P2e(t,e){const n={type:"html",value:"<!--"+e.value+"-->"};return t.patch(e,n),n}function MN(t,e){const r={type:"delete",children:t.all(e)};return t.patch(e,r),r}function Gk(t){let e=-1;if(t.length>1){for(;++e<t.length;)if(t[e].spread)return!0}return!1}function $2e(t,e){const n=[],r=[];let i=-1;for(;++i<e.children.length;){const s=e.children[i];s.type==="element"&&s.tagName==="div"?n.push(...s.children):n.push(s)}let o={definitions:[],titles:[]};for(i=-1;++i<n.length;){const s=n[i];if(s.type==="element"&&s.tagName==="dt"){const l=n[i-1];l&&l.type==="element"&&l.tagName==="dd"&&(r.push(o),o={definitions:[],titles:[]}),o.titles.push(s)}else o.definitions.push(s)}r.push(o),i=-1;const a=[];for(;++i<r.length;){const s=[...xB(t,r[i].titles),...xB(t,r[i].definitions)];s.length>0&&a.push({type:"listItem",spread:s.length>1,checked:null,children:s})}if(a.length>0){const s={type:"list",ordered:!1,start:null,spread:Gk(a),children:a};return t.patch(e,s),s}}function xB(t,e){const n=t.all({type:"root",children:e}),r=t.toSpecificContent(n,z2e);return r.length===0?[]:r.length===1?r[0].children:[{type:"list",ordered:!1,start:null,spread:Gk(r),children:r}]}function z2e(){return{type:"listItem",spread:!1,checked:null,children:[]}}function Oy(t,e){const r={type:"emphasis",children:t.all(e)};return t.patch(e,r),r}function Yk(t){let e=0,n=t.length;for(;e<n&&t[e].type==="break";)e++;for(;n>e&&t[n-1].type==="break";)n--;return e===0&&n===t.length?t:t.slice(e,n)}function gp(t,e){const n=Number(e.tagName.charAt(1))||1,r=Yk(t.all(e)),i={type:"heading",depth:n,children:r};return t.patch(e,i),i}function U2e(t,e){const n={type:"thematicBreak"};return t.patch(e,n),n}function H2e(t,e){const n=e.properties||{},r=String(n.src||""),i=String(n.title||"");if(r&&i){const o={type:"link",title:null,url:t.resolve(r),children:[{type:"text",value:i}]};return t.patch(e,o),o}}function wB(t,e){const n=e.properties||{},r={type:"image",url:t.resolve(String(n.src||"")||null),title:n.title?String(n.title):null,alt:n.alt?String(n.alt):""};return t.patch(e,r),r}function Eg(t,e){const n={type:"inlineCode",value:mv(e)};return t.patch(e,n),n}function zW(t,e){const n=[],r=[],i=e||t.properties||{},o=UW(t),a=Math.min(Number.parseInt(String(i.size),10),0)||(i.multiple?4:1);let s=-1;for(;++s<o.length;){const c=o[s];c&&c.properties&&c.properties.selected&&n.push(c)}const l=n.length>0?n:o,u=Math.min(l.length,a);for(s=-1;++s<u;){const c=l[s],f=c.properties||{},d=mv(c),h=d||String(f.label||""),m=String(f.value||"")||d;r.push([m,h===m?void 0:h])}return r}function UW(t){const e=[];let n=-1;for(;++n<t.children.length;){const r=t.children[n];"children"in r&&Array.isArray(r.children)&&e.push(...UW(r)),r.type==="element"&&r.tagName==="option"&&(!r.properties||!r.properties.disabled)&&e.push(r)}return e}const V2e="[x]",q2e="[ ]";function j2e(t,e){const n=e.properties||{},r=String(n.value||n.placeholder||"");if(n.disabled||n.type==="hidden"||n.type==="file")return;if(n.type==="checkbox"||n.type==="radio"){const l={type:"text",value:n.checked?t.options.checked||V2e:t.options.unchecked||q2e};return t.patch(e,l),l}if(n.type==="image"){const l=n.alt||r;if(l){const u={type:"image",url:t.resolve(String(n.src||"")||null),title:String(n.title||"")||null,alt:String(l)};return t.patch(e,u),u}return}let i=[];if(r)i=[[r,void 0]];else if(n.type!=="button"&&n.type!=="file"&&n.type!=="password"&&n.type!=="reset"&&n.type!=="submit"&&n.list){const l=String(n.list),u=t.elementById.get(l);u&&u.tagName==="datalist"&&(i=zW(u,n))}if(i.length===0)return;if(n.type==="password"&&(i[0]=["".repeat(i[0][0].length),void 0]),n.type==="email"||n.type==="url"){const l=[];let u=-1;for(;++u<i.length;){const c=t.resolve(i[u][0]),f={type:"link",title:null,url:n.type==="email"?"mailto:"+c:c,children:[{type:"text",value:i[u][1]||c}]};l.push(f),u!==i.length-1&&l.push({type:"text",value:", "})}return l}const o=[];let a=-1;for(;++a<i.length;)o.push(i[a][1]?i[a][1]+" ("+i[a][0]+")":i[a][0]);const s={type:"text",value:o.join(", ")};return t.patch(e,s),s}const G2e={}.hasOwnProperty;function Y2e(t,e){const n=t.type==="element"&&G2e.call(t.properties,e)&&t.properties[e];return n!=null&&n!==!1}const W2e=new Set(["pingback","prefetch","stylesheet"]);function K2e(t){if(t.type!=="element"||t.tagName!=="link")return!1;if(t.properties.itemProp)return!0;const e=t.properties.rel;let n=-1;if(!Array.isArray(e)||e.length===0)return!1;for(;++n<e.length;)if(!W2e.has(String(e[n])))return!1;return!0}const X2e=rl(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),Z2e=rl("meta");function HW(t){return!!(t.type==="text"||X2e(t)||TW(t)||K2e(t)||Z2e(t)&&Y2e(t,"itemProp"))}function kN(t,e){const{rest:n,checkbox:r}=qW(e),i=r?!!r.properties.checked:null,o=VW(n),a=t.toFlow(t.all(n)),s={type:"listItem",spread:o,checked:i,children:a};return t.patch(e,s),s}function VW(t){let e=-1,n=!1;for(;++e<t.children.length;){const r=t.children[e];if(r.type==="element"){if(HW(r))continue;if(r.tagName==="p"||n||VW(r))return!0;n=!0}}return!1}function qW(t){const e=t.children[0];if(e&&e.type==="element"&&e.tagName==="input"&&e.properties&&(e.properties.type==="checkbox"||e.properties.type==="radio")){const n={...t,children:t.children.slice(1)};return{checkbox:e,rest:n}}if(e&&e.type==="element"&&e.tagName==="p"){const{checkbox:n,rest:r}=qW(e);if(n){const i={...t,children:[r,...t.children.slice(1)]};return{checkbox:n,rest:i}}}return{checkbox:void 0,rest:t}}function _N(t,e){const n=e.tagName==="ol",r=t.toSpecificContent(t.all(e),Q2e);let i=null;n&&(i=e.properties&&e.properties.start?Number.parseInt(String(e.properties.start),10):1);const o={type:"list",ordered:n,start:i,spread:Gk(r),children:r};return t.patch(e,o),o}function Q2e(){return{type:"listItem",spread:!1,checked:null,children:[]}}const J2e={};function rC(t,e){const n=J2e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jW(t,r,i)}function jW(t,e,n){if(exe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return EB(t.children,e,n)}return Array.isArray(t)?EB(t,e,n):""}function EB(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=jW(t[i],e,n);return r.join("")}function exe(t){return!!(t&&typeof t=="object")}const GW=Wm(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function iC(t){let e=-1;for(;++e<t.length;){const n=t[e];if(!KW(n)||"children"in n&&iC(n.children))return!0}return!1}function YW(t){return WW(t,e,function(n){return n});function e(n){return n.every(function(r){return r.type==="text"?Ym(r.value):!1})?[]:[{type:"paragraph",children:Yk(n)}]}}function txe(t){return WW(t.children,e,n);function e(r){const i=ON(t);return i.children=r,[i]}function n(r){if("children"in r&&"children"in t){const i=ON(t),o=ON(r);return i.children=r.children,o.children.push(i),o}return{...r}}}function WW(t,e,n){const r=nxe(t),i=[];let o=[],a=-1;for(;++a<r.length;){const s=r[a];KW(s)?o.push(s):(o.length>0&&(i.push(...e(o)),o=[]),i.push(n(s)))}return o.length>0&&(i.push(...e(o)),o=[]),i}function nxe(t){const e=[];let n=-1;for(;++n<t.length;){const r=t[n];(r.type==="delete"||r.type==="link")&&iC(r.children)?e.push(...txe(r)):e.push(r)}return e}function KW(t){const e=t.data&&t.data.hName;return e?HW({type:"element",tagName:e,properties:{},children:[]}):GW(t)}function ON(t){return Em({...t,children:[]})}function CB(t,e){const n=e.properties||{},r=e.tagName==="video"?String(n.poster||""):"";let i=String(n.src||""),o=-1,a=!1,s=t.all(e);if(bf({type:"root",children:s},function(f){if(f.type==="link")return a=!0,Fx}),a||iC(s))return s;for(;!i&&++o<e.children.length;){const f=e.children[o];f.type==="element"&&f.tagName==="source"&&f.properties&&(i=String(f.properties.src||""))}if(r){const f={type:"image",title:null,url:t.resolve(r),alt:rC(s)};t.patch(e,f),s=[f]}const u=s,c={type:"link",title:n.title?String(n.title):null,url:t.resolve(i),children:u};return t.patch(e,c),c}function SB(t,e){const n=Yk(t.all(e));if(n.length>0){const r={type:"paragraph",children:n};return t.patch(e,r),r}}const rxe=['"'];function ixe(t,e){const n=t.options.quotes||rxe;t.qNesting++;const r=t.all(e);t.qNesting--;const i=n[t.qNesting%n.length],o=r[0],a=r[r.length-1],s=i.charAt(0),l=i.length>1?i.charAt(1):i;return o&&o.type==="text"?o.value=s+o.value:r.unshift({type:"text",value:s}),a&&a.type==="text"?a.value+=l:r.push({type:"text",value:l}),r}function oxe(t,e){let n=t.all(e);(t.options.document||iC(n))&&(n=YW(n));const r={type:"root",children:n};return t.patch(e,r),r}function axe(t,e){const n=zW(e);let r=-1;const i=[];for(;++r<n.length;){const o=n[r];i.push(o[1]?o[1]+" ("+o[0]+")":o[0])}if(i.length>0){const o={type:"text",value:i.join(", ")};return t.patch(e,o),o}}function TB(t,e){const r={type:"strong",children:t.all(e)};return t.patch(e,r),r}function AB(t,e){const r={type:"tableCell",children:t.all(e)};if(t.patch(e,r),e.properties){const i=e.properties.rowSpan,o=e.properties.colSpan;if(i||o){const a=r.data||(r.data={});i&&(a.hastUtilToMdastTemporaryRowSpan=i),o&&(a.hastUtilToMdastTemporaryColSpan=o)}}return r}function sxe(t,e){const r={type:"tableRow",children:t.toSpecificContent(t.all(e),lxe)};return t.patch(e,r),r}function lxe(){return{type:"tableCell",children:[]}}function uxe(t,e){if(t.inTable){const u={type:"text",value:mv(e)};return t.patch(e,u),u}t.inTable=!0;const{align:n,headless:r}=cxe(e),i=t.toSpecificContent(t.all(e),NB);r&&i.unshift(NB());let o=-1;for(;++o<i.length;){const u=i[o],c=t.toSpecificContent(u.children,fxe);u.children=c}let a=1;for(o=-1;++o<i.length;){const u=i[o].children;let c=-1;for(;++c<u.length;){const f=u[c];if(f.data){const d=f.data,h=Number.parseInt(String(d.hastUtilToMdastTemporaryColSpan),10)||1,m=Number.parseInt(String(d.hastUtilToMdastTemporaryRowSpan),10)||1;if(h>1||m>1){let v=o-1;for(;++v<o+m;){let b=c-1;for(;++b<c+h&&i[v];){const x=[];(v!==o||b!==c)&&x.push({type:"tableCell",children:[]}),i[v].children.splice(b,0,...x)}}}"hastUtilToMdastTemporaryColSpan"in f.data&&delete f.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in f.data&&delete f.data.hastUtilToMdastTemporaryRowSpan,Object.keys(f.data).length===0&&delete f.data}}u.length>a&&(a=u.length)}for(o=-1;++o<i.length;){const u=i[o].children;let c=u.length-1;for(;++c<a;)u.push({type:"tableCell",children:[]})}let s=n.length-1;for(;++s<a;)n.push(null);t.inTable=!1;const l={type:"table",align:n,children:i};return t.patch(e,l),l}function cxe(t){const e={align:[null],headless:!0};let n=0,r=0;return bf(t,function(i){if(i.type==="element"){if(i.tagName==="table"&&t!==i)return _W;if((i.tagName==="th"||i.tagName==="td")&&i.properties){if(!e.align[r]){const o=String(i.properties.align||"")||null;(o==="center"||o==="left"||o==="right"||o===null)&&(e.align[r]=o)}e.headless&&n<2&&i.tagName==="th"&&(e.headless=!1),r++}else i.tagName==="thead"?e.headless=!1:i.tagName==="tr"&&(n++,r=0)}}),e}function fxe(){return{type:"tableCell",children:[]}}function NB(){return{type:"tableRow",children:[]}}function dxe(t,e){const n={type:"text",value:e.value};return t.patch(e,n),n}function hxe(t,e){const n={type:"text",value:mv(e)};return t.patch(e,n),n}function pxe(t,e){const n={type:"text",value:""};return t.patch(e,n),n}const mxe={comment:P2e,doctype:hn,root:oxe,text:dxe},gxe={applet:hn,area:hn,basefont:hn,bgsound:hn,caption:hn,col:hn,colgroup:hn,command:hn,content:hn,datalist:hn,dialog:hn,element:hn,embed:hn,frame:hn,frameset:hn,isindex:hn,keygen:hn,link:hn,math:hn,menu:hn,menuitem:hn,meta:hn,nextid:hn,noembed:hn,noframes:hn,optgroup:hn,option:hn,param:hn,script:hn,shadow:hn,source:hn,spacer:hn,style:hn,svg:hn,template:hn,title:hn,track:hn,abbr:dn,acronym:dn,bdi:dn,bdo:dn,big:dn,blink:dn,button:dn,canvas:dn,cite:dn,data:dn,details:dn,dfn:dn,font:dn,ins:dn,label:dn,map:dn,marquee:dn,meter:dn,nobr:dn,noscript:dn,object:dn,output:dn,progress:dn,rb:dn,rbc:dn,rp:dn,rt:dn,rtc:dn,ruby:dn,slot:dn,small:dn,span:dn,sup:dn,sub:dn,tbody:dn,tfoot:dn,thead:dn,time:dn,address:ti,article:ti,aside:ti,body:ti,center:ti,div:ti,fieldset:ti,figcaption:ti,figure:ti,form:ti,footer:ti,header:ti,hgroup:ti,html:ti,legend:ti,main:ti,multicol:ti,nav:ti,picture:ti,section:ti,a:T2e,audio:CB,b:TB,base:A2e,blockquote:N2e,br:D2e,code:Eg,dir:_N,dl:$2e,dt:kN,dd:kN,del:MN,em:Oy,h1:gp,h2:gp,h3:gp,h4:gp,h5:gp,h6:gp,hr:U2e,i:Oy,iframe:H2e,img:wB,image:wB,input:j2e,kbd:Eg,li:kN,listing:_y,mark:Oy,ol:_N,p:SB,plaintext:_y,pre:_y,q:ixe,s:MN,samp:Eg,select:axe,strike:MN,strong:TB,summary:SB,table:uxe,td:AB,textarea:hxe,th:AB,tr:sxe,tt:Eg,u:Oy,ul:_N,var:Eg,video:CB,wbr:pxe,xmp:_y};function dn(t,e){return t.all(e)}function ti(t,e){return t.toFlow(t.all(e))}function hn(){}const DB={}.hasOwnProperty;function vxe(t){return{all:bxe,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...gxe,...t.handlers},inTable:!1,nodeHandlers:{...mxe,...t.nodeHandlers},one:yxe,options:t,patch:xxe,qNesting:0,resolve:wxe,toFlow:Exe,toSpecificContent:Cxe}}function bxe(t){const e=t.children||[],n=[];let r=-1;for(;++r<e.length;){const i=e[r],o=this.one(i,t);Array.isArray(o)?n.push(...o):o&&n.push(o)}return n}function yxe(t,e){if(t.type==="element"){if(t.properties&&t.properties.dataMdast==="ignore")return;if(DB.call(this.handlers,t.tagName))return this.handlers[t.tagName](this,t,e)||void 0}else if(DB.call(this.nodeHandlers,t.type))return this.nodeHandlers[t.type](this,t,e)||void 0;if("value"in t&&typeof t.value=="string"){const n={type:"text",value:t.value};return this.patch(t,n),n}if("children"in t)return this.all(t)}function xxe(t,e){t.position&&(e.position=BW(t))}function wxe(t){const e=this.frozenBaseUrl;return t==null?"":e?String(new URL(t,e)):t}function Exe(t){return YW(t)}function Cxe(t,e){const n=e(),r=[];let i=[],o=-1;for(;++o<t.length;){const s=t[o];if(a(s))i.length>0&&(s.children.unshift(...i),i=[]),r.push(s);else{const l=s;i.push(l)}}if(i.length>0){let s=r[r.length-1];s||(s=e(),r.push(s)),s.children.push(...i),i=[]}return r;function a(s){return s.type===n.type}}const Sxe={};function MB(t,e){const n=Em(t),r=e||Sxe,i=E2e({newlines:r.newlines===!0}),o=vxe(r);let a;i(n),bf(n,function(l){if(l&&l.type==="element"&&l.properties){const u=String(l.properties.id||"")||void 0;u&&!o.elementById.has(u)&&o.elementById.set(u,l)}});const s=o.one(n,void 0);return s?Array.isArray(s)?a={type:"root",children:s}:a=s:a={type:"root",children:[]},bf(a,function(l,u,c){if(l.type==="text"&&u!==void 0&&c){const f=c.children[u-1];if(f&&f.type===l.type)return f.value+=l.value,c.children.splice(u,1),f.position&&l.position&&(f.position.end=l.position.end),u-1;if(l.value=l.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),c&&(c.type==="heading"||c.type==="paragraph"||c.type==="root")&&(u||(l.value=l.value.replace(/^[\t ]+/,"")),u===c.children.length-1&&(l.value=l.value.replace(/[\t ]+$/,""))),!l.value)return c.children.splice(u,1),u}}),a}const kB={document:!0};function Txe(t,e){return t&&"run"in t?async function(n,r){const i=MB(n,{...kB,...e});await t.run(i,r)}:function(n){return MB(n,{...kB,...t})}}function Px(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const bo=If(/[A-Za-z]/),eo=If(/[\dA-Za-z]/),Axe=If(/[#-'*+\--9=?A-Z^-~]/);function $x(t){return t!==null&&(t<32||t===127)}const n4=If(/\d/),Nxe=If(/[\dA-Fa-f]/),Dxe=If(/[!-/:-@[-`{-~]/);function Rt(t){return t!==null&&t<-2}function cr(t){return t!==null&&(t<0||t===32)}function xn(t){return t===-2||t===-1||t===32}const oC=If(new RegExp("\\p{P}|\\p{S}","u")),ih=If(/\s/);function If(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Mxe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function kxe(t,e,n){const i=Wm((n||{}).ignore||[]),o=_xe(e);let a=-1;for(;++a<o.length;)OW(t,"text",s);function s(u,c){let f=-1,d;for(;++f<c.length;){const h=c[f],m=d?d.children:void 0;if(i(h,m?m.indexOf(h):void 0,d))return;d=h}if(d)return l(u,c)}function l(u,c){const f=c[c.length-1],d=o[a][0],h=o[a][1];let m=0;const b=f.children.indexOf(u);let x=!1,C=[];d.lastIndex=0;let w=d.exec(u.value);for(;w;){const A=w.index,E={index:w.index,input:w.input,stack:[...c,u]};let T=h(...w,E);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?d.lastIndex=A+1:(m!==A&&C.push({type:"text",value:u.value.slice(m,A)}),Array.isArray(T)?C.push(...T):T&&C.push(T),m=A+w[0].length,x=!0),!d.global)break;w=d.exec(u.value)}return x?(m<u.value.length&&C.push({type:"text",value:u.value.slice(m)}),f.children.splice(b,1,...C)):C=[u],b+C.length}}function _xe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([Oxe(i[0]),Ixe(i[1])])}return e}function Oxe(t){return typeof t=="string"?new RegExp(Mxe(t),"g"):t}function Ixe(t){return typeof t=="function"?t:function(){return t}}const IN="phrasing",RN=["autolink","link","image","label"];function Rxe(){return{transforms:[Uxe],enter:{literalAutolink:Lxe,literalAutolinkEmail:BN,literalAutolinkHttp:BN,literalAutolinkWww:BN},exit:{literalAutolink:zxe,literalAutolinkEmail:$xe,literalAutolinkHttp:Fxe,literalAutolinkWww:Pxe}}}function Bxe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:IN,notInConstruct:RN},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:IN,notInConstruct:RN},{character:":",before:"[ps]",after:"\\/",inConstruct:IN,notInConstruct:RN}]}}function Lxe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function BN(t){this.config.enter.autolinkProtocol.call(this,t)}function Fxe(t){this.config.exit.autolinkProtocol.call(this,t)}function Pxe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function $xe(t){this.config.exit.autolinkEmail.call(this,t)}function zxe(t){this.exit(t)}function Uxe(t){kxe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Hxe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Vxe]],{ignore:["link","linkReference"]})}function Hxe(t,e,n,r,i){let o="";if(!XW(i)||(/^w/i.test(e)&&(n=e+n,e="",o="http://"),!qxe(n)))return!1;const a=jxe(n+r);if(!a[0])return!1;const s={type:"link",title:null,url:o+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function Vxe(t,e,n,r){return!XW(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function qxe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jxe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Px(t,"(");let o=Px(t,")");for(;r!==-1&&i>o;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[t,n]}function XW(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ih(n)||oC(n))&&(!e||n!==47)}function zs(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}ZW.peek=ewe;function Gxe(){this.buffer()}function Yxe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Wxe(){this.buffer()}function Kxe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Xxe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zs(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Zxe(t){this.exit(t)}function Qxe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zs(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Jxe(t){this.exit(t)}function ewe(){return"["}function ZW(t,e,n,r){const i=n.createTracker(r);let o=i.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return o+=i.move(n.safe(n.associationId(t),{after:"]",before:o})),s(),a(),o+=i.move("]"),o}function twe(){return{enter:{gfmFootnoteCallString:Gxe,gfmFootnoteCall:Yxe,gfmFootnoteDefinitionLabelString:Wxe,gfmFootnoteDefinition:Kxe},exit:{gfmFootnoteCallString:Xxe,gfmFootnoteCall:Zxe,gfmFootnoteDefinitionLabelString:Qxe,gfmFootnoteDefinition:Jxe}}}function nwe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:ZW},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,a){const s=o.createTracker(a);let l=s.move("[^");const u=o.enter("footnoteDefinition"),c=o.enter("label");return l+=s.move(o.safe(o.associationId(r),{before:l,after:"]"})),c(),l+=s.move("]:"),r.children&&r.children.length>0&&(s.shift(4),l+=s.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,s.current()),e?QW:rwe))),u(),l}}function rwe(t,e,n){return e===0?t:QW(t,e,n)}function QW(t,e,n){return(n?"":"    ")+t}const iwe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];JW.peek=uwe;function owe(){return{canContainEols:["delete"],enter:{strikethrough:swe},exit:{strikethrough:lwe}}}function awe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:iwe}],handlers:{delete:JW}}}function swe(t){this.enter({type:"delete",children:[]},t)}function lwe(t){this.exit(t)}function JW(t,e,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(t,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function uwe(){return"~"}function cwe(t){return t.length}function fwe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||cwe,o=[],a=[],s=[],l=[];let u=0,c=-1;for(;++c<t.length;){const v=[],b=[];let x=-1;for(t[c].length>u&&(u=t[c].length);++x<t[c].length;){const C=dwe(t[c][x]);if(n.alignDelimiters!==!1){const w=i(C);b[x]=w,(l[x]===void 0||w>l[x])&&(l[x]=w)}v.push(C)}a[c]=v,s[c]=b}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)o[f]=_B(r[f]);else{const v=_B(r);for(;++f<u;)o[f]=v}f=-1;const d=[],h=[];for(;++f<u;){const v=o[f];let b="",x="";v===99?(b=":",x=":"):v===108?b=":":v===114&&(x=":");let C=n.alignDelimiters===!1?1:Math.max(1,l[f]-b.length-x.length);const w=b+"-".repeat(C)+x;n.alignDelimiters!==!1&&(C=b.length+C+x.length,C>l[f]&&(l[f]=C),h[f]=C),d[f]=w}a.splice(1,0,d),s.splice(1,0,h),c=-1;const m=[];for(;++c<a.length;){const v=a[c],b=s[c];f=-1;const x=[];for(;++f<u;){const C=v[f]||"";let w="",A="";if(n.alignDelimiters!==!1){const E=l[f]-(b[f]||0),T=o[f];T===114?w=" ".repeat(E):T===99?E%2?(w=" ".repeat(E/2+.5),A=" ".repeat(E/2-.5)):(w=" ".repeat(E/2),A=w):A=" ".repeat(E)}n.delimiterStart!==!1&&!f&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||f)&&x.push(" "),n.alignDelimiters!==!1&&x.push(w),x.push(C),n.alignDelimiters!==!1&&x.push(A),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&x.push("|")}m.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return m.join(`
`)}function dwe(t){return t==null?"":String(t)}function _B(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const OB={}.hasOwnProperty;function eK(t,e){const n=e||{};function r(i,...o){let a=r.invalid;const s=r.handlers;if(i&&OB.call(i,t)){const l=String(i[t]);a=OB.call(s,l)?s[l]:r.unknown}if(a)return a.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const hwe={}.hasOwnProperty;function tK(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)tK(t,e.extensions[n]);for(r in e)if(hwe.call(e,r))switch(r){case"extensions":break;case"unsafe":{IB(t[r],e[r]);break}case"join":{IB(t[r],e[r]);break}case"handlers":{pwe(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function IB(t,e){e&&t.push(...e)}function pwe(t,e){e&&Object.assign(t,e)}function mwe(t,e,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(t,o.current()),gwe);return i(),a}function gwe(t,e,n){return">"+(n?"":" ")+t}function nK(t,e){return RB(t,e.inConstruct,!0)&&!RB(t,e.notInConstruct,!1)}function RB(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function BB(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&nK(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function vwe(t,e){const n=String(t);let r=n.indexOf(e),i=r,o=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+e.length,r=n.indexOf(e,i);return a}function r4(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function bwe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function ywe(t,e,n,r){const i=bwe(n),o=t.value||"",a=i==="`"?"GraveAccent":"Tilde";if(r4(t,n)){const f=n.enter("codeIndented"),d=n.indentLines(o,xwe);return f(),d}const s=n.createTracker(r),l=i.repeat(Math.max(vwe(o,i)+1,3)),u=n.enter("codeFenced");let c=s.move(l);if(t.lang){const f=n.enter(`codeFencedLang${a}`);c+=s.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...s.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${a}`);c+=s.move(" "),c+=s.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...s.current()})),f()}return c+=s.move(`
`),o&&(c+=s.move(o+`
`)),c+=s.move(l),u(),c}function xwe(t,e,n){return(n?"":"    ")+t}function Wk(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function wwe(t,e,n,r){const i=Wk(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),s(),!t.url||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),s(),t.title&&(s=n.enter(`title${o}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),a(),u}function Ewe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function yf(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Cm(t){if(t===null||cr(t)||ih(t))return 1;if(oC(t))return 2}function zx(t,e,n){const r=Cm(t),i=Cm(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}rK.peek=Cwe;function rK(t,e,n,r){const i=Ewe(n),o=n.enter("emphasis"),a=n.createTracker(r),s=a.move(i);let l=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const u=l.charCodeAt(0),c=zx(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=yf(u)+l.slice(1));const f=l.charCodeAt(l.length-1),d=zx(r.after.charCodeAt(0),f,i);d.inside&&(l=l.slice(0,-1)+yf(f));const h=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},s+l+h}function Cwe(t,e,n){return n.options.emphasis||"*"}function iK(t,e){let n=!1;return bf(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Fx}),!!((!t.depth||t.depth<3)&&rC(t)&&(e.options.setext||n))}function Swe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(iK(t,n)){const c=n.enter("headingSetext"),f=n.enter("phrasing"),d=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return f(),c(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const a="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");o.move(a+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=yf(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),s(),u}oK.peek=Twe;function oK(t){return t.value||""}function Twe(){return"<"}aK.peek=Awe;function aK(t,e,n,r){const i=Wk(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),s(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),s(),t.title&&(s=n.enter(`title${o}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),u+=l.move(")"),a(),u}function Awe(){return"!"}sK.peek=Nwe;function sK(t,e,n,r){const i=t.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("![");const u=n.safe(t.alt,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return a(),n.stack=c,o(),i==="full"||!u||u!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function Nwe(){return"!"}lK.peek=Dwe;function lK(t,e,n){let r=t.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],s=n.compilePattern(a);let l;if(a.atBreak)for(;l=s.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function Dwe(){return"`"}function uK(t,e){const n=rC(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}cK.peek=Mwe;function cK(t,e,n,r){const i=Wk(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let s,l;if(uK(t,n)){const c=n.stack;n.stack=[],s=n.enter("autolink");let f=a.move("<");return f+=a.move(n.containerPhrasing(t,{before:f,after:">",...a.current()})),f+=a.move(">"),s(),n.stack=c,f}s=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(t,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${o}`),u+=a.move(" "+i),u+=a.move(n.safe(t.title,{before:u,after:i,...a.current()})),u+=a.move(i),l()),u+=a.move(")"),s(),u}function Mwe(t,e,n){return uK(t,n)?"<":"["}fK.peek=kwe;function fK(t,e,n,r){const i=t.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return a(),n.stack=c,o(),i==="full"||!u||u!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function kwe(){return"["}function Kk(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function _we(t){const e=Kk(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Owe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function dK(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Iwe(t,e,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=t.ordered?Owe(n):Kk(n);const s=t.ordered?a==="."?")":".":_we(n);let l=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const c=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),dK(n)===a&&c){let f=-1;for(;++f<t.children.length;){const d=t.children[f];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=s),n.bulletCurrent=a;const u=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),u}function Rwe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Bwe(t,e,n,r){const i=Rwe(n);let o=n.bulletCurrent||Kk(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,s.current()),c);return l(),u;function c(f,d,h){return d?(h?"":" ".repeat(a))+f:(h?o:o+" ".repeat(a-o.length))+f}}function Lwe(t,e,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(t,r);return o(),i(),a}function Fwe(t,e,n,r){return(t.children.some(function(a){return GW(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Pwe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}hK.peek=$we;function hK(t,e,n,r){const i=Pwe(n),o=n.enter("strong"),a=n.createTracker(r),s=a.move(i+i);let l=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const u=l.charCodeAt(0),c=zx(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=yf(u)+l.slice(1));const f=l.charCodeAt(l.length-1),d=zx(r.after.charCodeAt(0),f,i);d.inside&&(l=l.slice(0,-1)+yf(f));const h=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},s+l+h}function $we(t,e,n){return n.options.strong||"*"}function zwe(t,e,n,r){return n.safe(t.value,r)}function Uwe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Hwe(t,e,n){const r=(dK(n)+(n.options.ruleSpaces?" ":"")).repeat(Uwe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Xk={blockquote:mwe,break:BB,code:ywe,definition:wwe,emphasis:rK,hardBreak:BB,heading:Swe,html:oK,image:aK,imageReference:sK,inlineCode:lK,link:cK,linkReference:fK,list:Iwe,listItem:Bwe,paragraph:Lwe,root:Fwe,strong:hK,text:zwe,thematicBreak:Hwe},Vwe=[qwe];function qwe(t,e,n,r){if(e.type==="code"&&r4(e,r)&&(t.type==="list"||t.type===e.type&&r4(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&iK(e,r))?void 0:n.spread?1:0}const bd=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],jwe=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:bd},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:bd},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:bd},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:bd},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:bd},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:bd},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:bd},{atBreak:!0,character:"~"}],LB=document.createElement("i");function Zk(t){const e="&"+t+";";LB.innerHTML=e;const n=LB.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function pK(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const Gwe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mK(t){return t.replace(Gwe,Ywe)}function Ywe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return pK(n.slice(o?2:1),o?16:10)}return Zk(n)||t}function Wwe(t){return t.label||!t.identifier?t.label||"":mK(t.identifier)}function Kwe(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Xwe(t,e,n){const r=e.indexStack,i=t.children||[],o=[];let a=-1,s=n.before,l;r.push(-1);let u=e.createTracker(n);for(;++a<i.length;){const c=i[a];let f;if(r[r.length-1]=a,a+1<i.length){let m=e.handle.handlers[i[a+1].type];m&&m.peek&&(m=m.peek),f=m?m(i[a+1],t,e,{before:"",after:"",...u.current()}).charAt(0):""}else f=n.after;o.length>0&&(s==="\r"||s===`
`)&&c.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),s=" ",u=e.createTracker(n),u.move(o.join("")));let d=e.handle(c,t,e,{...u.current(),after:f,before:s});l&&l===d.slice(0,1)&&(d=yf(l.charCodeAt(0))+d.slice(1));const h=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,h&&(o.length>0&&h.before&&s===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+yf(s.charCodeAt(0))),h.after&&(l=f)),u.move(d),o.push(d),s=d.slice(-1)}return r.pop(),o.join("")}function Zwe(t,e,n){const r=e.indexStack,i=t.children||[],o=e.createTracker(n),a=[];let s=-1;for(r.push(-1);++s<i.length;){const l=i[s];r[r.length-1]=s,a.push(o.move(e.handle(l,t,e,{before:`
`,after:`
`,...o.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),s<i.length-1&&a.push(o.move(Qwe(l,i[s+1],t,e)))}return r.pop(),a.join("")}function Qwe(t,e,n,r){let i=r.join.length;for(;i--;){const o=r.join[i](t,e,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const Jwe=/\r?\n|\r/g;function eEe(t,e){const n=[];let r=0,i=0,o;for(;o=Jwe.exec(t);)a(t.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return a(t.slice(r)),n.join("");function a(s){n.push(e(s,i,!s))}}function tEe(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],o=[],a={};let s=-1;for(;++s<t.unsafe.length;){const c=t.unsafe[s];if(!nK(t.stack,c))continue;const f=t.compilePattern(c);let d;for(;d=f.exec(r);){const h="before"in c||!!c.atBreak,m="after"in c,v=d.index+(h?d[1].length:0);i.includes(v)?(a[v].before&&!h&&(a[v].before=!1),a[v].after&&!m&&(a[v].after=!1)):(i.push(v),a[v]={before:h,after:m})}}i.sort(nEe);let l=n.before?n.before.length:0;const u=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){const c=i[s];c<l||c>=u||c+1<u&&i[s+1]===c+1&&a[c].after&&!a[c+1].before&&!a[c+1].after||i[s-1]===c-1&&a[c].before&&!a[c-1].before&&!a[c-1].after||(l!==c&&o.push(FB(r.slice(l,c),"\\")),l=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!n.encode||!n.encode.includes(r.charAt(c)))?o.push("\\"):(o.push(yf(r.charCodeAt(c))),l++))}return o.push(FB(r.slice(l,u),n.after)),o.join("")}function nEe(t,e){return t-e}function FB(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=t+e;let a=-1,s=0,l;for(;l=n.exec(o);)r.push(l.index);for(;++a<r.length;)s!==r[a]&&i.push(t.slice(s,r[a])),i.push("\\"),s=r[a];return i.push(t.slice(s)),i.join("")}function rEe(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,o=n.column||1;return{move:l,current:a,shift:s};function a(){return{now:{line:i,column:o},lineShift:r}}function s(u){r+=u}function l(u){const c=u||"",f=c.split(/\r?\n|\r/g),d=f[f.length-1];return i+=f.length-1,o=f.length===1?o+d.length:1+d.length+r,c}}function iEe(t,e){const n=e||{},r={associationId:Wwe,containerPhrasing:lEe,containerFlow:uEe,createTracker:rEe,compilePattern:Kwe,enter:o,handlers:{...Xk},handle:void 0,indentLines:eEe,indexStack:[],join:[...Vwe],options:{},safe:cEe,stack:[],unsafe:[...jwe]};tK(r,n),r.options.tightDefinitions&&r.join.push(sEe),r.handle=eK("type",{invalid:oEe,unknown:aEe,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(a){return r.stack.push(a),s;function s(){r.stack.pop()}}}function oEe(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function aEe(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function sEe(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function lEe(t,e){return Xwe(t,this,e)}function uEe(t,e){return Zwe(t,this,e)}function cEe(t,e){return tEe(this,t,e)}function fEe(){return{enter:{table:dEe,tableData:PB,tableHeader:PB,tableRow:pEe},exit:{codeText:mEe,table:hEe,tableData:LN,tableHeader:LN,tableRow:LN}}}function dEe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function hEe(t){this.exit(t),this.data.inTable=void 0}function pEe(t){this.enter({type:"tableRow",children:[]},t)}function LN(t){this.exit(t)}function PB(t){this.enter({type:"tableCell",children:[]},t)}function mEe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,gEe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function gEe(t,e){return e==="|"?e:t}function vEe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:a,tableCell:l,tableRow:s}};function a(h,m,v,b){return u(c(h,v,b),h.align)}function s(h,m,v,b){const x=f(h,v,b),C=u([x]);return C.slice(0,C.indexOf(`
`))}function l(h,m,v,b){const x=v.enter("tableCell"),C=v.enter("phrasing"),w=v.containerPhrasing(h,{...b,before:o,after:o});return C(),x(),w}function u(h,m){return fwe(h,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function c(h,m,v){const b=h.children;let x=-1;const C=[],w=m.enter("table");for(;++x<b.length;)C[x]=f(b[x],m,v);return w(),C}function f(h,m,v){const b=h.children;let x=-1;const C=[],w=m.enter("tableRow");for(;++x<b.length;)C[x]=l(b[x],h,m,v);return w(),C}function d(h,m,v){let b=Xk.inlineCode(h,m,v);return v.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function bEe(){return{exit:{taskListCheckValueChecked:$B,taskListCheckValueUnchecked:$B,paragraph:xEe}}}function yEe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:wEe}}}function $B(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function xEe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,a;for(;++o<i.length;){const s=i[o];if(s.type==="paragraph"){a=s;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function wEe(t,e,n,r){const i=t.children[0],o=typeof t.checked=="boolean"&&i&&i.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",s=n.createTracker(r);o&&s.move(a);let l=Xk.listItem(t,e,n,{...r,...s.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+a}}function EEe(){return[Rxe(),twe(),owe(),fEe(),bEe()]}function CEe(t){return{extensions:[Bxe(),nwe(t),awe(),vEe(t),yEe()]}}function Sa(t,e,n,r){const i=t.length;let o=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(e,0),t.splice(...a),o+=1e4,e+=1e4}function ns(t,e){return t.length>0?(Sa(t,t.length,0,e),t):e}const zB={}.hasOwnProperty;function gK(t){const e={};let n=-1;for(;++n<t.length;)SEe(e,t[n]);return e}function SEe(t,e){let n;for(n in e){const i=(zB.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let a;if(o)for(a in o){zB.call(i,a)||(i[a]=[]);const s=o[a];TEe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function TEe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Sa(t,0,0,r)}const AEe={tokenize:OEe,partial:!0},vK={tokenize:IEe,partial:!0},bK={tokenize:REe,partial:!0},yK={tokenize:BEe,partial:!0},NEe={tokenize:LEe,partial:!0},xK={name:"wwwAutolink",tokenize:kEe,previous:EK},wK={name:"protocolAutolink",tokenize:_Ee,previous:CK},ec={name:"emailAutolink",tokenize:MEe,previous:SK},Vl={};function DEe(){return{text:Vl}}let yd=48;for(;yd<123;)Vl[yd]=ec,yd++,yd===58?yd=65:yd===91&&(yd=97);Vl[43]=ec;Vl[45]=ec;Vl[46]=ec;Vl[95]=ec;Vl[72]=[ec,wK];Vl[104]=[ec,wK];Vl[87]=[ec,xK];Vl[119]=[ec,xK];function MEe(t,e,n){const r=this;let i,o;return a;function a(f){return!i4(f)||!SK.call(r,r.previous)||Qk(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),s(f))}function s(f){return i4(f)?(t.consume(f),s):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(NEe,c,u)(f):f===45||f===95||eo(f)?(o=!0,t.consume(f),l):c(f)}function u(f){return t.consume(f),i=!0,l}function c(f){return o&&i&&bo(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function kEe(t,e,n){const r=this;return i;function i(a){return a!==87&&a!==119||!EK.call(r,r.previous)||Qk(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(AEe,t.attempt(vK,t.attempt(bK,o),n),n)(a))}function o(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function _Ee(t,e,n){const r=this;let i="",o=!1;return a;function a(f){return(f===72||f===104)&&CK.call(r,r.previous)&&!Qk(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),t.consume(f),s):n(f)}function s(f){if(bo(f)&&i.length<5)return i+=String.fromCodePoint(f),t.consume(f),s;if(f===58){const d=i.toLowerCase();if(d==="http"||d==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),o?u:(o=!0,l)):n(f)}function u(f){return f===null||$x(f)||cr(f)||ih(f)||oC(f)?n(f):t.attempt(vK,t.attempt(bK,c),n)(f)}function c(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function OEe(t,e,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),i):a===46&&r===3?(t.consume(a),o):n(a)}function o(a){return a===null?n(a):e(a)}}function IEe(t,e,n){let r,i,o;return a;function a(u){return u===46||u===95?t.check(yK,l,s)(u):u===null||cr(u)||ih(u)||u!==45&&oC(u)?l(u):(o=!0,t.consume(u),a)}function s(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),a}function l(u){return i||r||!o?n(u):e(u)}}function REe(t,e){let n=0,r=0;return i;function i(a){return a===40?(n++,t.consume(a),i):a===41&&r<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(yK,e,o)(a):a===null||cr(a)||ih(a)?e(a):(t.consume(a),i)}function o(a){return a===41&&r++,t.consume(a),i}}function BEe(t,e,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(t.consume(s),r):s===38?(t.consume(s),o):s===93?(t.consume(s),i):s===60||s===null||cr(s)||ih(s)?e(s):n(s)}function i(s){return s===null||s===40||s===91||cr(s)||ih(s)?e(s):r(s)}function o(s){return bo(s)?a(s):n(s)}function a(s){return s===59?(t.consume(s),r):bo(s)?(t.consume(s),a):n(s)}}function LEe(t,e,n){return r;function r(o){return t.consume(o),i}function i(o){return eo(o)?n(o):e(o)}}function EK(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||cr(t)}function CK(t){return!bo(t)}function SK(t){return!(t===47||i4(t))}function i4(t){return t===43||t===45||t===46||t===95||eo(t)}function Qk(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Km(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let a="";if(o===37&&eo(t.charCodeAt(n+1))&&eo(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const s=t.charCodeAt(n+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a=""}else a=String.fromCharCode(o);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function aC(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const o4={name:"attention",resolveAll:FEe,tokenize:PEe};function FEe(t,e){let n=-1,r,i,o,a,s,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},d={...t[n][1].start};UB(f,-l),UB(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:d},o={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},t[r][1].end={...a.start},t[n][1].start={...s.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=ns(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=ns(u,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",o,e]]),u=ns(u,aC(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=ns(u,[["exit",o,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=ns(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Sa(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function PEe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Cm(r);let o;return a;function a(l){return o=l,t.enter("attentionSequence"),s(l)}function s(l){if(l===o)return t.consume(l),s;const u=t.exit("attentionSequence"),c=Cm(l),f=!c||c===2&&i||n.includes(l),d=!i||i===2&&c||n.includes(r);return u._open=!!(o===42?f:f&&(i||!d)),u._close=!!(o===42?d:d&&(c||!f)),e(l)}}function UB(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const $Ee={name:"autolink",tokenize:zEe};function zEe(t,e,n){let r=0;return i;function i(h){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(h){return bo(h)?(t.consume(h),a):h===64?n(h):u(h)}function a(h){return h===43||h===45||h===46||eo(h)?(r=1,s(h)):u(h)}function s(h){return h===58?(t.consume(h),r=0,l):(h===43||h===45||h===46||eo(h))&&r++<32?(t.consume(h),s):(r=0,u(h))}function l(h){return h===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):h===null||h===32||h===60||$x(h)?n(h):(t.consume(h),l)}function u(h){return h===64?(t.consume(h),c):Axe(h)?(t.consume(h),u):n(h)}function c(h){return eo(h)?f(h):n(h)}function f(h){return h===46?(t.consume(h),r=0,c):h===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):d(h)}function d(h){if((h===45||eo(h))&&r++<63){const m=h===45?d:f;return t.consume(h),m}return n(h)}}function On(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(l){return xn(l)?(t.enter(n),s(l)):e(l)}function s(l){return xn(l)&&o++<i?(t.consume(l),s):(t.exit(n),e(l))}}const gv={partial:!0,tokenize:UEe};function UEe(t,e,n){return r;function r(o){return xn(o)?On(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||Rt(o)?e(o):n(o)}}const TK={continuation:{tokenize:VEe},exit:qEe,name:"blockQuote",tokenize:HEe};function HEe(t,e,n){const r=this;return i;function i(a){if(a===62){const s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),o}return n(a)}function o(a){return xn(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function VEe(t,e,n){const r=this;return i;function i(a){return xn(a)?On(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return t.attempt(TK,e,n)(a)}}function qEe(t){t.exit("blockQuote")}const AK={name:"characterEscape",tokenize:jEe};function jEe(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return Dxe(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const NK={name:"characterReference",tokenize:GEe};function GEe(t,e,n){const r=this;let i=0,o,a;return s;function s(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),o=31,a=eo,c(f))}function u(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,a=Nxe,c):(t.enter("characterReferenceValue"),o=7,a=n4,c(f))}function c(f){if(f===59&&i){const d=t.exit("characterReferenceValue");return a===eo&&!Zk(r.sliceSerialize(d))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(f)&&i++<o?(t.consume(f),c):n(f)}}const HB={partial:!0,tokenize:WEe},VB={concrete:!0,name:"codeFenced",tokenize:YEe};function YEe(t,e,n){const r=this,i={partial:!0,tokenize:E};let o=0,a=0,s;return l;function l(T){return u(T)}function u(T){const N=r.events[r.events.length-1];return o=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,s=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===s?(a++,t.consume(T),c):a<3?n(T):(t.exit("codeFencedFenceSequence"),xn(T)?On(t,f,"whitespace")(T):f(T))}function f(T){return T===null||Rt(T)?(t.exit("codeFencedFence"),r.interrupt?e(T):t.check(HB,v,A)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Rt(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(T)):xn(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),On(t,h,"whitespace")(T)):T===96&&T===s?n(T):(t.consume(T),d)}function h(T){return T===null||Rt(T)?f(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(T))}function m(T){return T===null||Rt(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(T)):T===96&&T===s?n(T):(t.consume(T),m)}function v(T){return t.attempt(i,A,b)(T)}function b(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),x}function x(T){return o>0&&xn(T)?On(t,C,"linePrefix",o+1)(T):C(T)}function C(T){return T===null||Rt(T)?t.check(HB,v,A)(T):(t.enter("codeFlowValue"),w(T))}function w(T){return T===null||Rt(T)?(t.exit("codeFlowValue"),C(T)):(t.consume(T),w)}function A(T){return t.exit("codeFenced"),e(T)}function E(T,N,D){let M=0;return k;function k(j){return T.enter("lineEnding"),T.consume(j),T.exit("lineEnding"),B}function B(j){return T.enter("codeFencedFence"),xn(j)?On(T,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):P(j)}function P(j){return j===s?(T.enter("codeFencedFenceSequence"),$(j)):D(j)}function $(j){return j===s?(M++,T.consume(j),$):M>=a?(T.exit("codeFencedFenceSequence"),xn(j)?On(T,z,"whitespace")(j):z(j)):D(j)}function z(j){return j===null||Rt(j)?(T.exit("codeFencedFence"),N(j)):D(j)}}}function WEe(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const FN={name:"codeIndented",tokenize:XEe},KEe={partial:!0,tokenize:ZEe};function XEe(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),On(t,o,"linePrefix",5)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):Rt(u)?t.attempt(KEe,a,l)(u):(t.enter("codeFlowValue"),s(u))}function s(u){return u===null||Rt(u)?(t.exit("codeFlowValue"),a(u)):(t.consume(u),s)}function l(u){return t.exit("codeIndented"),e(u)}}function ZEe(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Rt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):On(t,o,"linePrefix",5)(a)}function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):Rt(a)?i(a):n(a)}}const QEe={name:"codeText",previous:eCe,resolve:JEe,tokenize:tCe};function JEe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function eCe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tCe(t,e,n){let r=0,i,o;return a;function a(f){return t.enter("codeText"),t.enter("codeTextSequence"),s(f)}function s(f){return f===96?(t.consume(f),r++,s):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(o=t.enter("codeTextSequence"),i=0,c(f)):Rt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Rt(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),u)}function c(f){return f===96?(t.consume(f),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(o.type="codeTextData",u(f))}}class nCe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Cg(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Cg(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Cg(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Cg(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Cg(this.left,n.reverse())}}}function Cg(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function DK(t){const e={};let n=-1,r,i,o,a,s,l,u;const c=new nCe(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,rCe(c,n)),n=e[n],u=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=c.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},s=c.slice(i,n),s.unshift(r),c.splice(i,n-i+1,s))}}return Sa(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function rCe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],u={};let c,f,d=-1,h=n,m=0,v=0;const b=[v];for(;h;){for(;t.get(++i)[1]!==h;);o.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<s.length;)s[d][0]==="exit"&&s[d-1][0]==="enter"&&s[d][1].type===s[d-1][1].type&&s[d][1].start.line!==s[d][1].end.line&&(v=d+1,b.push(v),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),d=b.length;d--;){const x=s.slice(b[d],b[d+1]),C=o.pop();l.push([C,C+x.length-1]),t.splice(C,2,x)}for(l.reverse(),d=-1;++d<l.length;)u[m+l[d][0]]=m+l[d][1],m+=l[d][1]-l[d][0]-1;return u}const iCe={resolve:aCe,tokenize:sCe},oCe={partial:!0,tokenize:lCe};function aCe(t){return DK(t),t}function sCe(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):Rt(s)?t.check(oCe,a,o)(s):(t.consume(s),i)}function o(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function a(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function lCe(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),On(t,o,"linePrefix")}function o(a){if(a===null||Rt(a))return n(a);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function MK(t,e,n,r,i,o,a,s,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return f;function f(x){return x===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(x),t.exit(o),d):x===null||x===32||x===41||$x(x)?n(x):(t.enter(r),t.enter(a),t.enter(s),t.enter("chunkString",{contentType:"string"}),v(x))}function d(x){return x===62?(t.enter(o),t.consume(x),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(t.exit("chunkString"),t.exit(s),d(x)):x===null||x===60||Rt(x)?n(x):(t.consume(x),x===92?m:h)}function m(x){return x===60||x===62||x===92?(t.consume(x),h):h(x)}function v(x){return!c&&(x===null||x===41||cr(x))?(t.exit("chunkString"),t.exit(s),t.exit(a),t.exit(r),e(x)):c<u&&x===40?(t.consume(x),c++,v):x===41?(t.consume(x),c--,v):x===null||x===32||x===40||$x(x)?n(x):(t.consume(x),x===92?b:v)}function b(x){return x===40||x===41||x===92?(t.consume(x),v):v(x)}}function kK(t,e,n,r,i,o){const a=this;let s=0,l;return u;function u(h){return t.enter(r),t.enter(i),t.consume(h),t.exit(i),t.enter(o),c}function c(h){return s>999||h===null||h===91||h===93&&!l||h===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):h===93?(t.exit(o),t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):Rt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Rt(h)||s++>999?(t.exit("chunkString"),c(h)):(t.consume(h),l||(l=!xn(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(t.consume(h),s++,f):f(h)}}function _K(t,e,n,r,i,o){let a;return s;function s(d){return d===34||d===39||d===40?(t.enter(r),t.enter(i),t.consume(d),t.exit(i),a=d===40?41:d,l):n(d)}function l(d){return d===a?(t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):(t.enter(o),u(d))}function u(d){return d===a?(t.exit(o),l(a)):d===null?n(d):Rt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),On(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===a||d===null||Rt(d)?(t.exit("chunkString"),u(d)):(t.consume(d),d===92?f:c)}function f(d){return d===a||d===92?(t.consume(d),c):c(d)}}function t1(t,e){let n;return r;function r(i){return Rt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):xn(i)?On(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const uCe={name:"definition",tokenize:fCe},cCe={partial:!0,tokenize:dCe};function fCe(t,e,n){const r=this;let i;return o;function o(h){return t.enter("definition"),a(h)}function a(h){return kK.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function s(h){return i=zs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),l):n(h)}function l(h){return cr(h)?t1(t,u)(h):u(h)}function u(h){return MK(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return t.attempt(cCe,f,f)(h)}function f(h){return xn(h)?On(t,d,"whitespace")(h):d(h)}function d(h){return h===null||Rt(h)?(t.exit("definition"),r.parser.defined.push(i),e(h)):n(h)}}function dCe(t,e,n){return r;function r(s){return cr(s)?t1(t,i)(s):n(s)}function i(s){return _K(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return xn(s)?On(t,a,"whitespace")(s):a(s)}function a(s){return s===null||Rt(s)?e(s):n(s)}}const hCe={name:"hardBreakEscape",tokenize:pCe};function pCe(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return Rt(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const mCe={name:"headingAtx",resolve:gCe,tokenize:vCe};function gCe(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Sa(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function vCe(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),o(c)}function o(c){return t.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(t.consume(c),a):c===null||cr(c)?(t.exit("atxHeadingSequence"),s(c)):n(c)}function s(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Rt(c)?(t.exit("atxHeading"),e(c)):xn(c)?On(t,s,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),s(c))}function u(c){return c===null||c===35||cr(c)?(t.exit("atxHeadingText"),s(c)):(t.consume(c),u)}}const bCe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],qB=["pre","script","style","textarea"],yCe={concrete:!0,name:"htmlFlow",resolveTo:ECe,tokenize:CCe},xCe={partial:!0,tokenize:TCe},wCe={partial:!0,tokenize:SCe};function ECe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function CCe(t,e,n){const r=this;let i,o,a,s,l;return u;function u(I){return c(I)}function c(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),f}function f(I){return I===33?(t.consume(I),d):I===47?(t.consume(I),o=!0,v):I===63?(t.consume(I),i=3,r.interrupt?e:H):bo(I)?(t.consume(I),a=String.fromCharCode(I),b):n(I)}function d(I){return I===45?(t.consume(I),i=2,h):I===91?(t.consume(I),i=5,s=0,m):bo(I)?(t.consume(I),i=4,r.interrupt?e:H):n(I)}function h(I){return I===45?(t.consume(I),r.interrupt?e:H):n(I)}function m(I){const ee="CDATA[";return I===ee.charCodeAt(s++)?(t.consume(I),s===ee.length?r.interrupt?e:P:m):n(I)}function v(I){return bo(I)?(t.consume(I),a=String.fromCharCode(I),b):n(I)}function b(I){if(I===null||I===47||I===62||cr(I)){const ee=I===47,Q=a.toLowerCase();return!ee&&!o&&qB.includes(Q)?(i=1,r.interrupt?e(I):P(I)):bCe.includes(a.toLowerCase())?(i=6,ee?(t.consume(I),x):r.interrupt?e(I):P(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):o?C(I):w(I))}return I===45||eo(I)?(t.consume(I),a+=String.fromCharCode(I),b):n(I)}function x(I){return I===62?(t.consume(I),r.interrupt?e:P):n(I)}function C(I){return xn(I)?(t.consume(I),C):k(I)}function w(I){return I===47?(t.consume(I),k):I===58||I===95||bo(I)?(t.consume(I),A):xn(I)?(t.consume(I),w):k(I)}function A(I){return I===45||I===46||I===58||I===95||eo(I)?(t.consume(I),A):E(I)}function E(I){return I===61?(t.consume(I),T):xn(I)?(t.consume(I),E):w(I)}function T(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),l=I,N):xn(I)?(t.consume(I),T):D(I)}function N(I){return I===l?(t.consume(I),l=null,M):I===null||Rt(I)?n(I):(t.consume(I),N)}function D(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||cr(I)?E(I):(t.consume(I),D)}function M(I){return I===47||I===62||xn(I)?w(I):n(I)}function k(I){return I===62?(t.consume(I),B):n(I)}function B(I){return I===null||Rt(I)?P(I):xn(I)?(t.consume(I),B):n(I)}function P(I){return I===45&&i===2?(t.consume(I),L):I===60&&i===1?(t.consume(I),U):I===62&&i===4?(t.consume(I),W):I===63&&i===3?(t.consume(I),H):I===93&&i===5?(t.consume(I),Z):Rt(I)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(xCe,K,$)(I)):I===null||Rt(I)?(t.exit("htmlFlowData"),$(I)):(t.consume(I),P)}function $(I){return t.check(wCe,z,K)(I)}function z(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),j}function j(I){return I===null||Rt(I)?$(I):(t.enter("htmlFlowData"),P(I))}function L(I){return I===45?(t.consume(I),H):P(I)}function U(I){return I===47?(t.consume(I),a="",G):P(I)}function G(I){if(I===62){const ee=a.toLowerCase();return qB.includes(ee)?(t.consume(I),W):P(I)}return bo(I)&&a.length<8?(t.consume(I),a+=String.fromCharCode(I),G):P(I)}function Z(I){return I===93?(t.consume(I),H):P(I)}function H(I){return I===62?(t.consume(I),W):I===45&&i===2?(t.consume(I),H):P(I)}function W(I){return I===null||Rt(I)?(t.exit("htmlFlowData"),K(I)):(t.consume(I),W)}function K(I){return t.exit("htmlFlow"),e(I)}}function SCe(t,e,n){const r=this;return i;function i(a){return Rt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function TCe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(gv,e,n)}}const ACe={name:"htmlText",tokenize:NCe};function NCe(t,e,n){const r=this;let i,o,a;return s;function s(H){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(H),l}function l(H){return H===33?(t.consume(H),u):H===47?(t.consume(H),E):H===63?(t.consume(H),w):bo(H)?(t.consume(H),D):n(H)}function u(H){return H===45?(t.consume(H),c):H===91?(t.consume(H),o=0,m):bo(H)?(t.consume(H),C):n(H)}function c(H){return H===45?(t.consume(H),h):n(H)}function f(H){return H===null?n(H):H===45?(t.consume(H),d):Rt(H)?(a=f,U(H)):(t.consume(H),f)}function d(H){return H===45?(t.consume(H),h):f(H)}function h(H){return H===62?L(H):H===45?d(H):f(H)}function m(H){const W="CDATA[";return H===W.charCodeAt(o++)?(t.consume(H),o===W.length?v:m):n(H)}function v(H){return H===null?n(H):H===93?(t.consume(H),b):Rt(H)?(a=v,U(H)):(t.consume(H),v)}function b(H){return H===93?(t.consume(H),x):v(H)}function x(H){return H===62?L(H):H===93?(t.consume(H),x):v(H)}function C(H){return H===null||H===62?L(H):Rt(H)?(a=C,U(H)):(t.consume(H),C)}function w(H){return H===null?n(H):H===63?(t.consume(H),A):Rt(H)?(a=w,U(H)):(t.consume(H),w)}function A(H){return H===62?L(H):w(H)}function E(H){return bo(H)?(t.consume(H),T):n(H)}function T(H){return H===45||eo(H)?(t.consume(H),T):N(H)}function N(H){return Rt(H)?(a=N,U(H)):xn(H)?(t.consume(H),N):L(H)}function D(H){return H===45||eo(H)?(t.consume(H),D):H===47||H===62||cr(H)?M(H):n(H)}function M(H){return H===47?(t.consume(H),L):H===58||H===95||bo(H)?(t.consume(H),k):Rt(H)?(a=M,U(H)):xn(H)?(t.consume(H),M):L(H)}function k(H){return H===45||H===46||H===58||H===95||eo(H)?(t.consume(H),k):B(H)}function B(H){return H===61?(t.consume(H),P):Rt(H)?(a=B,U(H)):xn(H)?(t.consume(H),B):M(H)}function P(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(t.consume(H),i=H,$):Rt(H)?(a=P,U(H)):xn(H)?(t.consume(H),P):(t.consume(H),z)}function $(H){return H===i?(t.consume(H),i=void 0,j):H===null?n(H):Rt(H)?(a=$,U(H)):(t.consume(H),$)}function z(H){return H===null||H===34||H===39||H===60||H===61||H===96?n(H):H===47||H===62||cr(H)?M(H):(t.consume(H),z)}function j(H){return H===47||H===62||cr(H)?M(H):n(H)}function L(H){return H===62?(t.consume(H),t.exit("htmlTextData"),t.exit("htmlText"),e):n(H)}function U(H){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),G}function G(H){return xn(H)?On(t,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):Z(H)}function Z(H){return t.enter("htmlTextData"),a(H)}}const Jk={name:"labelEnd",resolveAll:_Ce,resolveTo:OCe,tokenize:ICe},DCe={tokenize:RCe},MCe={tokenize:BCe},kCe={tokenize:LCe};function _Ce(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Sa(t,0,t.length,n),t}function OCe(t,e){let n=t.length,r=0,i,o,a,s;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[o][1].start},end:{...t[a][1].end}},c={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[a-2][1].start}};return s=[["enter",l,e],["enter",u,e]],s=ns(s,t.slice(o+1,o+r+3)),s=ns(s,[["enter",c,e]]),s=ns(s,aC(e.parser.constructs.insideSpan.null,t.slice(o+r+4,a-3),e)),s=ns(s,[["exit",c,e],t[a-2],t[a-1],["exit",u,e]]),s=ns(s,t.slice(a+1)),s=ns(s,[["exit",l,e]]),Sa(t,o,t.length,s),t}function ICe(t,e,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return s;function s(d){return o?o._inactive?f(d):(a=r.parser.defined.includes(zs(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),l):n(d)}function l(d){return d===40?t.attempt(DCe,c,a?c:f)(d):d===91?t.attempt(MCe,c,a?u:f)(d):a?c(d):f(d)}function u(d){return t.attempt(kCe,c,f)(d)}function c(d){return e(d)}function f(d){return o._balanced=!0,n(d)}}function RCe(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return cr(f)?t1(t,o)(f):o(f)}function o(f){return f===41?c(f):MK(t,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return cr(f)?t1(t,l)(f):c(f)}function s(f){return n(f)}function l(f){return f===34||f===39||f===40?_K(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function u(f){return cr(f)?t1(t,c)(f):c(f)}function c(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function BCe(t,e,n){const r=this;return i;function i(s){return kK.call(r,t,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return r.parser.defined.includes(zs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function a(s){return n(s)}}function LCe(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const FCe={name:"labelStartImage",resolveAll:Jk.resolveAll,tokenize:PCe};function PCe(t,e,n){const r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),o}function o(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),a):n(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const $Ce={name:"labelStartLink",resolveAll:Jk.resolveAll,tokenize:zCe};function zCe(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const PN={name:"lineEnding",tokenize:UCe};function UCe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),On(t,e,"linePrefix")}}const L2={name:"thematicBreak",tokenize:HCe};function HCe(t,e,n){let r=0,i;return o;function o(u){return t.enter("thematicBreak"),a(u)}function a(u){return i=u,s(u)}function s(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Rt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),xn(u)?On(t,s,"whitespace")(u):s(u))}}const Ho={continuation:{tokenize:GCe},exit:WCe,name:"list",tokenize:jCe},VCe={partial:!0,tokenize:KCe},qCe={partial:!0,tokenize:YCe};function jCe(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(h){const m=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:n4(h)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(L2,n,u)(h):u(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(h)}return n(h)}function l(h){return n4(h)&&++a<10?(t.consume(h),l):(!r.interrupt||a<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),u(h)):n(h)}function u(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(gv,r.interrupt?n:c,t.attempt(VCe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,o++,d(h)}function f(h){return xn(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(h)}}function GCe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(gv,i,o);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,On(t,e,"listItemIndent",r.containerState.size+1)(s)}function o(s){return r.containerState.furtherBlankLines||!xn(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(qCe,e,a)(s))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,On(t,t.attempt(Ho,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function YCe(t,e,n){const r=this;return On(t,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(o):n(o)}}function WCe(t){t.exit(this.containerState.type)}function KCe(t,e,n){const r=this;return On(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!xn(o)&&a&&a[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const jB={name:"setextUnderline",resolveTo:XCe,tokenize:ZCe};function XCe(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",a,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function ZCe(t,e,n){const r=this;let i;return o;function o(u){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return t.enter("setextHeadingLineSequence"),s(u)}function s(u){return u===i?(t.consume(u),s):(t.exit("setextHeadingLineSequence"),xn(u)?On(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Rt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const QCe={tokenize:aSe,partial:!0};function JCe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:rSe,continuation:{tokenize:iSe},exit:oSe}},text:{91:{name:"gfmFootnoteCall",tokenize:nSe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:eSe,resolveTo:tSe}}}}function eSe(t,e,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!a||!a._balanced)return n(l);const u=zs(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!o.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function tSe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},s=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",o,e],["enter",a,e],["exit",a,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...s),t}function nSe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return s;function s(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(f){if(o>999||f===93&&!a||f===null||f===91||cr(f))return n(f);if(f===93){t.exit("chunkString");const d=t.exit("gfmFootnoteCallString");return i.includes(zs(r.sliceSerialize(d)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return cr(f)||(a=!0),o++,t.consume(f),f===92?c:u}function c(f){return f===91||f===92||f===93?(t.consume(f),o++,u):u(f)}}function rSe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,s;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(m)}function c(m){if(a>999||m===93&&!s||m===null||m===91||cr(m))return n(m);if(m===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return o=zs(r.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),d}return cr(m)||(s=!0),a++,t.consume(m),m===92?f:c}function f(m){return m===91||m===92||m===93?(t.consume(m),a++,c):c(m)}function d(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),i.includes(o)||i.push(o),On(t,h,"gfmFootnoteDefinitionWhitespace")):n(m)}function h(m){return e(m)}}function iSe(t,e,n){return t.check(gv,e,t.attempt(QCe,e,n))}function oSe(t){t.exit("gfmFootnoteDefinition")}function aSe(t,e,n){const r=this;return On(t,i,"gfmFootnoteDefinitionIndent",5);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(o):n(o)}}function sSe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,s){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},f={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},d=[["enter",c,s],["enter",a[u][1],s],["exit",a[u][1],s],["enter",f,s]],h=s.parser.constructs.insideSpan.null;h&&Sa(d,d.length,0,aC(h,a.slice(u+1,l),s)),Sa(d,d.length,0,[["exit",f,s],["enter",a[l][1],s],["exit",a[l][1],s],["exit",c,s]]),Sa(a,u-1,l-u+3,d),l=u+d.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function o(a,s,l){const u=this.previous,c=this.events;let f=0;return d;function d(m){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(m):(a.enter("strikethroughSequenceTemporary"),h(m))}function h(m){const v=Cm(u);if(m===126)return f>1?l(m):(a.consume(m),f++,h);if(f<2&&!n)return l(m);const b=a.exit("strikethroughSequenceTemporary"),x=Cm(m);return b._open=!x||x===2&&!!v,b._close=!v||v===2&&!!x,s(m)}}}class lSe{constructor(){this.map=[]}add(e,n,r){uSe(this,e,n,r)}consume(e){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function uSe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function cSe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function fSe(){return{flow:{null:{name:"table",tokenize:dSe,resolveAll:hSe}}}}function dSe(t,e,n){const r=this;let i=0,o=0,a;return s;function s(k){let B=r.events.length-1;for(;B>-1;){const z=r.events[B][1].type;if(z==="lineEnding"||z==="linePrefix")B--;else break}const P=B>-1?r.events[B][1].type:null,$=P==="tableHead"||P==="tableRow"?T:l;return $===T&&r.parser.lazy[r.now().line]?n(k):$(k)}function l(k){return t.enter("tableHead"),t.enter("tableRow"),u(k)}function u(k){return k===124||(a=!0,o+=1),c(k)}function c(k){return k===null?n(k):Rt(k)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),h):n(k):xn(k)?On(t,c,"whitespace")(k):(o+=1,a&&(a=!1,i+=1),k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),a=!0,c):(t.enter("data"),f(k)))}function f(k){return k===null||k===124||cr(k)?(t.exit("data"),c(k)):(t.consume(k),k===92?d:f)}function d(k){return k===92||k===124?(t.consume(k),f):f(k)}function h(k){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(k):(t.enter("tableDelimiterRow"),a=!1,xn(k)?On(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):m(k))}function m(k){return k===45||k===58?b(k):k===124?(a=!0,t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),v):E(k)}function v(k){return xn(k)?On(t,b,"whitespace")(k):b(k)}function b(k){return k===58?(o+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),x):k===45?(o+=1,x(k)):k===null||Rt(k)?A(k):E(k)}function x(k){return k===45?(t.enter("tableDelimiterFiller"),C(k)):E(k)}function C(k){return k===45?(t.consume(k),C):k===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(k))}function w(k){return xn(k)?On(t,A,"whitespace")(k):A(k)}function A(k){return k===124?m(k):k===null||Rt(k)?!a||i!==o?E(k):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(k)):E(k)}function E(k){return n(k)}function T(k){return t.enter("tableRow"),N(k)}function N(k){return k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),N):k===null||Rt(k)?(t.exit("tableRow"),e(k)):xn(k)?On(t,N,"whitespace")(k):(t.enter("data"),D(k))}function D(k){return k===null||k===124||cr(k)?(t.exit("data"),N(k)):(t.consume(k),k===92?M:D)}function M(k){return k===92||k===124?(t.consume(k),D):D(k)}}function hSe(t,e){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],s=!1,l=0,u,c,f;const d=new lSe;for(;++n<t.length;){const h=t[n],m=h[1];h[0]==="enter"?m.type==="tableHead"?(s=!1,l!==0&&(GB(d,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},d.add(n,0,[["enter",u,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,f=void 0,o=[0,0,0,0],a=[0,n+1,0,0],s&&(s=!1,c={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},d.add(n,0,[["enter",c,e]])),i=m.type==="tableDelimiterRow"?2:c?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],f=Iy(d,e,o,i,void 0,f),o=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],f=Iy(d,e,o,i,void 0,f)),o=a,a=[o[1],n,0,0])):m.type==="tableHead"?(s=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,o[1]!==0?(a[0]=a[1],f=Iy(d,e,o,i,n,f)):a[1]!==0&&(f=Iy(d,e,a,i,n,f)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(l!==0&&GB(d,e,l,u,c),d.consume(e.events),n=-1;++n<e.events.length;){const h=e.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=cSe(e.events,n))}return t}function Iy(t,e,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(o.end=Object.assign({},Ip(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const l=Ip(e.events,n[1]);if(o={type:a,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const u=Ip(e.events,n[2]),c=Ip(e.events,n[3]),f={type:s,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const d=e.events[n[2]],h=e.events[n[3]];if(d[1].end=Object.assign({},h[1].end),d[1].type="chunkText",d[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,v=n[3]-n[2]-1;t.add(m,v,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return i!==void 0&&(o.end=Object.assign({},Ip(e.events,i)),t.add(i,0,[["exit",o,e]]),o=void 0),o}function GB(t,e,n,r,i){const o=[],a=Ip(e.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,e])),r.end=Object.assign({},a),o.push(["exit",r,e]),t.add(n+1,0,o)}function Ip(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const pSe={name:"tasklistCheck",tokenize:gSe};function mSe(){return{text:{91:pSe}}}function gSe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),o)}function o(l){return cr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),a):n(l)}function a(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),s):n(l)}function s(l){return Rt(l)?e(l):xn(l)?t.check({tokenize:vSe},e,n)(l):n(l)}}function vSe(t,e,n){return On(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function bSe(t){return gK([DEe(),JCe(),sSe(t),fSe(),mSe()])}const ySe={};function OK(t){const e=this,n=t||ySe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(bSe(n)),o.push(EEe()),a.push(CEe(n))}function xSe(t){const e=this;e.compiler=n;function n(r){return iEe(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}}function YB(t){if(t)throw t}var $N,WB;function wSe(){if(WB)return $N;WB=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},o=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var c=t.call(u,"constructor"),f=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!f)return!1;var d;for(d in u);return typeof d>"u"||t.call(u,d)},a=function(u,c){n&&c.name==="__proto__"?n(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},s=function(u,c){if(c==="__proto__")if(t.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return $N=function l(){var u,c,f,d,h,m,v=arguments[0],b=1,x=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},b=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});b<x;++b)if(u=arguments[b],u!=null)for(c in u)f=s(v,c),d=s(u,c),v!==d&&(C&&d&&(o(d)||(h=i(d)))?(h?(h=!1,m=f&&i(f)?f:[]):m=f&&o(f)?f:{},a(v,{name:c,newValue:l(C,m,d)})):typeof d<"u"&&a(v,{name:c,newValue:d}));return v},$N}var ESe=wSe();const zN=Qs(ESe);function a4(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function CSe(){const t=[],e={run:n,use:r};return e;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(l,...u){const c=t[++o];let f=-1;if(l){a(l);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,c?SSe(c,s)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function SSe(t,e){let n;return r;function r(...a){const s=t.length>a.length;let l;s&&a.push(i);try{l=t.apply(this,a)}catch(u){const c=u;if(s&&n)throw c;return i(c)}s||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(a,...s){n||(n=!0,e(a,...s))}function o(a){i(null,a)}}const TSe=(function(t){const r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),ASe={}.hasOwnProperty;class e_ extends TSe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=CSe()}copy(){const e=new e_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(zN(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(VN("data",this.frozen),this.namespace[e]=n,this):ASe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(VN("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Ry(e),r=this.parser||this.Parser;return UN("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),UN("process",this.parser||this.Parser),HN("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const s=Ry(e),l=r.parse(s);r.run(l,s,function(c,f,d){if(c||!f||!d)return u(c);const h=f,m=r.stringify(h,d);DSe(m)?d.value=m:d.result=m,u(c,d)});function u(c,f){c||!f?a(c):o?o(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),UN("processSync",this.parser||this.Parser),HN("processSync",this.compiler||this.Compiler),this.process(e,i),XB("processSync","process",n),r;function i(o,a){n=!0,YB(o),r=a}}run(e,n,r){KB(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,s){const l=Ry(n);i.run(e,l,u);function u(c,f,d){const h=f||e;c?s(c):a?a(h):r(void 0,h,d)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),XB("runSync","run",r),i;function o(a,s){YB(a),i=s,r=!0}}stringify(e,n){this.freeze();const r=Ry(n),i=this.compiler||this.Compiler;return HN("stringify",i),KB(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(VN("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?s(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...f]=u;l(c,f)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(u.plugins),u.settings&&(i.settings=zN(!0,i.settings,u.settings))}function s(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const f=u[c];o(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===u){d=f;break}if(d===-1)r.push([u,...c]);else if(c.length>0){let[h,...m]=c;const v=r[d][1];a4(v)&&a4(h)&&(h=zN(!0,v,h)),r[d]=[u,h,...m]}}}}const t_=new e_().freeze();function UN(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function HN(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function VN(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function KB(t){if(!a4(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function XB(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Ry(t){return NSe(t)?t:new Bx(t)}function NSe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function DSe(t){return typeof t=="string"||MSe(t)}function MSe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}function kSe(t,e){return IK(t,{})||{type:"root",children:[]}}function IK(t,e){const n=_Se(t,e);return n&&e.afterTransform&&e.afterTransform(t,n),n}function _Se(t,e){switch(t.nodeType){case 1:return BSe(t,e);case 3:return ISe(t);case 8:return RSe(t);case 9:return ZB(t,e);case 10:return OSe();case 11:return ZB(t,e);default:return}}function ZB(t,e){return{type:"root",children:RK(t,e)}}function OSe(){return{type:"doctype"}}function ISe(t){return{type:"text",value:t.nodeValue||""}}function RSe(t){return{type:"comment",value:t.nodeValue||""}}function BSe(t,e){const n=t.namespaceURI,r=n===I2.svg?qY:VY,i=n===I2.html?t.tagName.toLowerCase():t.tagName,o=n===I2.html&&i==="template"?t.content:t,a=t.getAttributeNames(),s={};let l=-1;for(;++l<a.length;)s[a[l]]=t.getAttribute(a[l])||"";return r(i,s,RK(o,e))}function RK(t,e){const n=t.childNodes,r=[];let i=-1;for(;++i<n.length;){const o=IK(n[i],e);o!==void 0&&r.push(o)}return r}var LSe=Object.defineProperty,FSe=(t,e,n)=>e in t?LSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e,n)=>FSe(t,typeof e!="symbol"?e+"":e,n);function BK(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function LK(t,e,n,r){var i;let o;if(e)if(typeof e=="string")o=Ws([e],t.pmSchema);else if(Array.isArray(e))o=Ws(e,t.pmSchema);else if(e.type==="tableContent")o=VE(e,t.pmSchema);else throw new Pl(e.type);else throw new Error("blockContent is required");const a=(r?.document??document).createDocumentFragment();for(const s of o)if(s.type.name!=="text"&&t.schema.inlineContentSchema[s.type.name]){const l=t.schema.inlineContentSpecs[s.type.name].implementation;if(l){const u=bk(s,t.schema.inlineContentSchema,t.schema.styleSchema),c=l.toExternalHTML?l.toExternalHTML(u,t):l.render.call({renderType:"dom",props:void 0},u,()=>{},t);if(c){if(a.appendChild(c.dom),c.contentDOM){const f=n.serializeFragment(s.content,r);c.contentDOM.dataset.editable="",c.contentDOM.appendChild(f)}continue}}}else if(s.type.name==="text"){let l=document.createTextNode(s.textContent);for(const u of s.marks.toReversed())if(u.type.name in t.schema.styleSpecs){const c=(t.schema.styleSpecs[u.type.name].implementation.toExternalHTML??t.schema.styleSpecs[u.type.name].implementation.render)(u.attrs.stringValue,t);c.contentDOM.appendChild(l),l=c.dom}else{const c=u.type.spec.toDOM(u,!0),f=Aa.renderSpec(document,c);f.contentDOM.appendChild(l),l=f.dom}a.appendChild(l)}else{const l=n.serializeFragment(Ue.from([s]),r);a.appendChild(l)}return a.childNodes.length===1&&((i=a.firstChild)==null?void 0:i.nodeType)===1&&BK(a.firstChild),a}function PSe(t,e,n,r,i,o,a){var s,l,u,c,f,d,h,m,v;const b=a?.document??document,x=e.pmSchema.nodes.blockContainer,C=n.props||{};for(const[M,k]of Object.entries(e.schema.blockSchema[n.type].propSchema))!(M in C)&&k.default!==void 0&&(C[M]=k.default);const w=(l=(s=x.spec)==null?void 0:s.toDOM)==null?void 0:l.call(s,x.create({id:n.id,...C})),A=Array.from(w.dom.attributes),E=e.blockImplementations[n.type].implementation,T=((u=E.toExternalHTML)==null?void 0:u.call({},{...n,props:C},e))||E.render.call({},{...n,props:C},e),N=b.createDocumentFragment();if(T.dom.classList.contains("bn-block-content")){const M=[...A,...Array.from(T.dom.attributes)].filter(k=>k.name.startsWith("data")&&k.name!=="data-content-type"&&k.name!=="data-file-block"&&k.name!=="data-node-view-wrapper"&&k.name!=="data-node-type"&&k.name!=="data-id"&&k.name!=="data-editable");for(const k of M)T.dom.firstChild.setAttribute(k.name,k.value);BK(T.dom.firstChild),N.append(...Array.from(T.dom.childNodes))}else N.append(T.dom);if(T.contentDOM&&n.content){const M=LK(e,n.content,r,a);T.contentDOM.appendChild(M)}let D;if(i.has(n.type)?D="OL":o.has(n.type)&&(D="UL"),D){if(((c=t.lastChild)==null?void 0:c.nodeName)!==D){const M=b.createElement(D);D==="OL"&&"start"in C&&C.start&&C?.start!==1&&M.setAttribute("start",C.start+""),t.append(M)}t.lastChild.appendChild(N)}else t.append(N);if(n.children&&n.children.length>0){const M=b.createDocumentFragment();if(FK(M,e,n.children,r,i,o,a),((f=t.lastChild)==null?void 0:f.nodeName)==="UL"||((d=t.lastChild)==null?void 0:d.nodeName)==="OL")for(;((h=M.firstChild)==null?void 0:h.nodeName)==="UL"||((m=M.firstChild)==null?void 0:m.nodeName)==="OL";)t.lastChild.lastChild.appendChild(M.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(M):(v=T.contentDOM)==null||v.append(M)}}const FK=(t,e,n,r,i,o,a)=>{for(const s of n)PSe(t,e,s,r,i,o,a)},$Se=(t,e,n,r,i,o)=>{const a=(o?.document??document).createDocumentFragment();return FK(a,t,e,n,r,i,o),a},sC=(t,e)=>{const n=Aa.fromSchema(t);return{exportBlocks:(r,i)=>{const o=$Se(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem","toggleListItem"]),i),a=document.createElement("div");return a.append(o),a.innerHTML},exportInlineContent:(r,i)=>{const o=LK(e,r,n,i),a=document.createElement("div");return a.append(o.cloneNode(!0)),a.innerHTML}}};function zSe(t,e){if(e===0)return;const n=t.resolve(e);for(let r=n.depth;r>0;r--){const i=n.node(r);if(Sk(i))return i.attrs.id}}function USe(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function QB(t){const e="__root__",n={},r={},i=Kr(t);return t.descendants((o,a)=>{if(!Sk(o))return!0;const s=zSe(t,a),l=s??e;r[l]||(r[l]=[]);const u=Ir(o,i);return n[o.attrs.id]={block:u,parentId:s},r[l].push(o.attrs.id),!0}),{byId:n,childrenByParent:r}}function HSe(t,e){const n=new Set;if(!t||!e)return n;const r=new Set(t),i=e.filter(v=>r.has(v)),o=t.filter(v=>i.includes(v));if(o.length<=1||i.length<=1)return n;const a={};for(let v=0;v<o.length;v++)a[o[v]]=v;const s=i.map(v=>a[v]),l=s.length,u=[],c=[],f=new Array(l).fill(-1),d=(v,b)=>{let x=0,C=v.length;for(;x<C;){const w=x+C>>>1;v[w]<b?x=w+1:C=w}return x};for(let v=0;v<l;v++){const b=s[v],x=d(u,b);x>0&&(f[v]=c[x-1]),x===u.length?(u.push(b),c.push(v)):(u[x]=b,c[x]=v)}const h=new Set;let m=c[c.length-1]??-1;for(;m!==-1;)h.add(m),m=f[m];for(let v=0;v<i.length;v++)h.has(v)||n.add(i[v]);return n}function PK(t,e=[]){const n=USe(t),r=LE(t.before,[t,...e]),i=QB(r.before),o=QB(r.doc),a=[],s=new Set;Object.keys(o.byId).filter(h=>!(h in i.byId)).forEach(h=>{a.push({type:"insert",block:o.byId[h].block,source:n,prevBlock:void 0}),s.add(h)}),Object.keys(i.byId).filter(h=>!(h in o.byId)).forEach(h=>{a.push({type:"delete",block:i.byId[h].block,source:n,prevBlock:void 0}),s.add(h)}),Object.keys(o.byId).filter(h=>h in i.byId).forEach(h=>{var m,v;const b=i.byId[h],x=o.byId[h];b.parentId!==x.parentId?(a.push({type:"move",block:x.block,prevBlock:b.block,source:n,prevParent:b.parentId?(m=i.byId[b.parentId])==null?void 0:m.block:void 0,currentParent:x.parentId?(v=o.byId[x.parentId])==null?void 0:v.block:void 0}),s.add(h)):w1e({...b.block,children:void 0},{...x.block,children:void 0})||(a.push({type:"update",block:x.block,prevBlock:b.block,source:n}),s.add(h))});const l=i.childrenByParent,u=o.childrenByParent,c="__root__",f=new Set([...Object.keys(l),...Object.keys(u)]),d=new Set;return f.forEach(h=>{const m=HSe(l[h],u[h]);m.size!==0&&m.forEach(v=>{var b,x;const C=i.byId[v],w=o.byId[v];!C||!w||C.parentId!==w.parentId||s.has(v)||(C.parentId??c)!==h||d.has(v)||(d.add(v),a.push({type:"move",block:w.block,prevBlock:C.block,source:n,prevParent:C.parentId?(b=i.byId[C.parentId])==null?void 0:b.block:void 0,currentParent:w.parentId?(x=o.byId[w.parentId])==null?void 0:x.block:void 0}),s.add(v))})}),a}const $K=Fn(()=>{const t=[];return{key:"blockChange",prosemirrorPlugins:[new Wt({key:new gn("blockChange"),filterTransaction:e=>{let n;return t.reduce((r,i)=>r===!1?r:i({getChanges(){return n||(n=PK(e),n)},tr:e})!==!1,!0)}})],subscribe(e){return t.push(e),()=>{t.splice(t.indexOf(e),1)}}}});function JB(t){const e=t.charAt(0)==="#"?t.substring(1,7):t,n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),o=[n/255,r/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*o[0]+.7152*o[1]+.0722*o[2]<=.179}function VSe(t){const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}; color: ${JB(t.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}; color: ${JB(t.color)?"white":"black"}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode(""),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode(""),null),e}const s4=Fn(({options:t})=>{const e=new Map,n=t.provider&&"awareness"in t.provider&&typeof t.provider.awareness=="object"?t.provider.awareness:void 0;return n&&("setLocalStateField"in n&&typeof n.setLocalStateField=="function"&&n.setLocalStateField("user",t.user),"on"in n&&typeof n.on=="function"&&t.showCursorLabels!=="always"&&n.on("change",({updated:r})=>{for(const i of r){const o=e.get(i);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),e.set(i,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}})),{key:"yCursor",prosemirrorPlugins:[n?r0e(n,{selectionBuilder:dY,cursorBuilder(r,i){let o=e.get(i);if(!o){const a=(t.renderCursor??VSe)(r);t.showCursorLabels!=="always"&&(a.addEventListener("mouseenter",()=>{const s=e.get(i);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),e.set(i,{element:s.element,hideTimeout:void 0}))}),a.addEventListener("mouseleave",()=>{const s=e.get(i);e.set(i,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:a,hideTimeout:void 0},e.set(i,o)}return o.element}}):void 0].filter(Boolean),dependsOn:["ySync"],updateUser(r){n?.setLocalStateField("user",r)}}}),F2=Fn(({options:t})=>({key:"ySync",prosemirrorPlugins:[Ume(t.fragment)],runsBefore:["default"]})),P2=Fn(()=>({key:"yUndo",prosemirrorPlugins:[c0e()],dependsOn:["yCursor","ySync"],undoCommand:a0e,redoCommand:s0e}));function qSe(t,e){const n=t.doc;if(t._item===null){const r=Array.from(n.share.keys()).find(i=>n.share.get(i)===t);if(r==null)throw new Error("type does not exist in other ydoc");return e.get(r,t.constructor)}else{const r=t._item,i=e.store.clients.get(r.id.client)??[],o=ms(i,r.id.clock);return i[o].content.type}}const jSe=Fn(({editor:t,options:e})=>{let n;const r=_f({isForked:!1});return{key:"yForkDoc",store:r,fork(){if(n)return;const i=e.fragment;if(!i)throw new Error("No fragment to fork from");const o=new Qu;ax(o,hm(i.doc));const a=qSe(i,o);n={undoStack:Ol.getState(t.prosemirrorState).undoManager.undoStack,originalFragment:i,forkedFragment:a},t.unregisterExtension([P2,s4,F2]);const s={...e,fragment:a};t.registerExtension([F2(s),P2()]),r.setState({isForked:!0})},merge({keepChanges:i}){if(!n)return;t.unregisterExtension(["ySync","yCursor","yUndo"]);const{originalFragment:o,forkedFragment:a,undoStack:s}=n;if(t.registerExtension([F2(e),s4(e),P2()]),Ol.getState(t.prosemirrorState).undoManager.undoStack=s,i){const l=hm(a.doc,zse(o.doc));ax(o.doc,l,t)}n=void 0,r.setState({isForked:!1})}}}),zK=(t,e)=>{e(t),t.forEach(n=>{n instanceof zi&&zK(n,e)})},GSe=(t,e)=>{const n=new Map;return t.forEach(r=>{r instanceof zi&&zK(r,i=>{if(i.nodeName==="blockContainer"&&i.hasAttribute("id")){const o=i.getAttribute("textColor"),a=i.getAttribute("backgroundColor"),s={textColor:o===Ln.textColor.default?void 0:o,backgroundColor:a===Ln.backgroundColor.default?void 0:a};(s.textColor||s.backgroundColor)&&n.set(i.getAttribute("id"),s)}})}),n.size===0?!1:(e.doc.descendants((r,i)=>{if(r.type.name==="blockContainer"&&n.has(r.attrs.id)){const o=e.doc.nodeAt(i+1);if(!o)throw new Error("No element found");e.setNodeMarkup(i+1,void 0,{...o.attrs,...n.get(r.attrs.id)})}}),!0)},YSe=[GSe],WSe=Fn(({options:t})=>{let e=!1;const n=new gn("schemaMigration");return{key:"schemaMigration",prosemirrorPlugins:[new Wt({key:n,appendTransaction:(r,i,o)=>{if(e||!r.some(s=>s.getMeta("y-sync$"))||r.every(s=>!s.docChanged)||!t.fragment.firstChild)return;const a=o.tr;for(const s of YSe)s(t.fragment,a);if(e=!0,!!a.docChanged)return a}})]}}),KSe=Fn(({editor:t,options:e})=>({key:"dropCursor",prosemirrorPlugins:[(e.dropCursor??DY)({width:5,color:"#ddeeff",editor:t})]})),xf=Fn(({editor:t})=>{const e=_f(!1),n=()=>t.transact(r=>{var i;if(r.selection.empty||r.selection instanceof Et&&(r.selection.node.type.spec.content==="inline*"||((i=r.selection.node.firstChild)==null?void 0:i.type.spec.content)==="inline*")||r.selection instanceof bt&&r.doc.textBetween(r.selection.from,r.selection.to).length===0)return!1;let o=!1;return r.selection.content().content.descendants(a=>(a.type.spec.code&&(o=!0),!o)),!o});return{key:"formattingToolbar",store:e,mount({dom:r,signal:i}){let o=!1;const a=t.onChange(()=>{o||e.setState(n())}),s=t.onSelectionChange(()=>{o||e.setState(n())});r.addEventListener("pointerdown",()=>{o=!0,e.setState(!1)},{signal:i}),t.prosemirrorView.root.addEventListener("pointerup",()=>{o=!1,t.isFocused()&&e.setState(n())},{signal:i,capture:!0}),r.addEventListener("pointercancel",()=>{o=!1},{signal:i,capture:!0}),i.addEventListener("abort",()=>{a(),s()})}}}),XSe=Fn(()=>({key:"history",prosemirrorPlugins:[_Y()],undoCommand:kk,redoCommand:_k})),vv=Fn(({editor:t})=>{function e(i){let o=t.prosemirrorView.nodeDOM(i);for(;o&&o.parentElement;){if(o.nodeName==="A")return o;o=o.parentElement}return null}function n(i,o){return t.transact(a=>{const s=a.doc.resolve(i),l=s.marks().find(c=>c.type.name===o);if(!l)return;const u=RE(s,l.type);if(u)return{range:u,mark:l,get text(){return a.doc.textBetween(u.from,u.to)},get position(){return ck(t.prosemirrorView,u.from,u.to).toJSON()}}})}function r(){return t.transact(i=>{const o=i.selection;if(o.empty)return n(o.anchor,"link")})}return{key:"linkToolbar",getLinkAtSelection:r,getLinkElementAtPos:e,getMarkAtPos:n,getLinkAtElement(i){return t.transact(()=>{const o=t.prosemirrorView.posAtDOM(i,0)+1;return n(o,"link")})},editLink(i,o,a=t.transact(s=>s.selection.anchor)){t.transact(s=>{const l=Kr(s),{range:u}=n(a+1,"link")||{range:{from:s.selection.from,to:s.selection.to}};u&&(s.insertText(o,u.from,u.to),s.addMark(u.from,u.from+o.length,l.mark("link",{href:i})))}),t.prosemirrorView.focus()},deleteLink(i=t.transact(o=>o.selection.anchor)){t.transact(o=>{const a=Kr(o),{range:s}=n(i+1,"link")||{range:{from:o.selection.from,to:o.selection.to}};s&&o.removeMark(s.from,s.to,a.marks.link).setMeta("preventAutolink",!0)}),t.prosemirrorView.focus()}}}),UK=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],HK="https",ZSe=new gn("node-selection-keyboard"),QSe=Fn(()=>({key:"nodeSelectionKeyboard",prosemirrorPlugins:[new Wt({key:ZSe,props:{handleKeyDown:(t,e)=>{if("node"in t.state.selection){if(e.ctrlKey||e.metaKey)return!1;if(e.key.length===1)return e.preventDefault(),!0;if(e.key==="Enter"&&!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey){const n=t.state.tr;return t.dispatch(n.insert(t.state.tr.selection.$to.after(),t.state.schema.nodes.paragraph.createChecked()).setSelection(new bt(n.doc.resolve(t.state.tr.selection.$to.after()+1)))),!0}}return!1}}})]})),JSe=new gn("blocknote-placeholder"),eTe=Fn(({editor:t,options:e})=>{const n=e.placeholders;return{key:"placeholder",prosemirrorPlugins:[new Wt({key:JSe,view:r=>{const i=`placeholder-selector-${jG()}`;r.dom.classList.add(i);const o=document.createElement("style"),a=t._tiptapEditor.options.injectNonce;a&&o.setAttribute("nonce",a),r.root instanceof window.ShadowRoot?r.root.append(o):r.root.head.appendChild(o);const s=o.sheet,l=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:c,...f}=n||{};for(const[m,v]of Object.entries(f)){const b=`[data-content-type="${m}"]`;s.insertRule(`${l(b)} { content: ${JSON.stringify(v)}; }`)}s.insertRule(`${l("[data-is-only-empty-block]")} { content: ${JSON.stringify(c)}; }`),s.insertRule(`${l("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{r.root instanceof window.ShadowRoot?r.root.removeChild(o):r.root.head.removeChild(o)}}},props:{decorations:r=>{const{doc:i,selection:o}=r;if(!t.isEditable||!o.empty||o.$from.parent.type.spec.code)return;const a=[];r.doc.content.size===6&&a.push(Un.node(2,4,{"data-is-only-empty-block":"true"}));const s=o.$anchor,l=s.parent;if(l.content.size===0){const u=s.before();a.push(Un.node(u,u+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return nn.create(i,a)}}})]}}),eL=new gn("previous-blocks"),tTe={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},nTe=Fn(()=>{let t;return{key:"previousBlockType",prosemirrorPlugins:[new Wt({key:eL,view(e){return{update:async(n,r)=>{var i;((i=this.key)==null?void 0:i.getState(n.state).updatedBlocks.size)>0&&(t=setTimeout(()=>{n.dispatch(n.state.tr.setMeta(eL,{clearUpdate:!0}))},0))},destroy:()=>{t&&clearTimeout(t)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(e,n,r,i){if(n.currentTransactionOldBlockAttrs={},n.updatedBlocks.clear(),!e.docChanged||r.doc.eq(i.doc))return n;const o={},a=o7(r.doc,u=>u.attrs.id),s=new Map(a.map(u=>[u.node.attrs.id,u])),l=o7(i.doc,u=>u.attrs.id);for(const u of l){const c=s.get(u.node.attrs.id),f=c?.node.firstChild,d=u.node.firstChild;if(c&&f&&d){const h={index:d.attrs.index,level:d.attrs.level,type:d.type.name,depth:i.doc.resolve(u.pos).depth},m={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:r.doc.resolve(c.pos).depth};o[u.node.attrs.id]=m,n.currentTransactionOldBlockAttrs[u.node.attrs.id]=m,JSON.stringify(m)!==JSON.stringify(h)&&(m["depth-change"]=m.depth-h.depth,n.updatedBlocks.add(u.node.attrs.id))}}return n.prevTransactionOldBlockAttrs=o,n}},props:{decorations(e){const n=this.getState(e);if(n.updatedBlocks.size===0)return;const r=[];return e.doc.descendants((i,o)=>{if(!i.attrs.id||!n.updatedBlocks.has(i.attrs.id))return;const a=n.currentTransactionOldBlockAttrs[i.attrs.id],s={};for(const[u,c]of Object.entries(a))s["data-prev-"+tTe[u]]=c||"none";const l=Un.node(o,o+i.nodeSize,{...s});r.push(l)}),nn.create(e.doc,r)}}})]}});function VK(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}function rTe(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const i=e.children[r];if(i.type==="element"&&(t(i),i.tagName==="u"))if(i.children.length>0){e.children.splice(r,1,...i.children);const o=i.children.length-1;n+=o,r+=o}else e.children.splice(r,1),n--,r--}};return t}function iTe(){const t=e=>{var n;if(e.children&&"length"in e.children&&e.children.length)for(let r=e.children.length-1;r>=0;r--){const i=e.children[r],o=r+1<e.children.length?e.children[r+1]:void 0;i.type==="element"&&i.tagName==="input"&&((n=i.properties)==null?void 0:n.type)==="checkbox"&&o?.type==="element"&&o.tagName==="p"?(o.tagName="span",o.children.splice(0,0,kSe(document.createTextNode(" ")))):t(i)}};return t}function oTe(){return t=>{bf(t,"element",(e,n,r)=>{var i,o,a,s;if(r&&e.tagName==="video"){const l=((i=e.properties)==null?void 0:i.src)||((o=e.properties)==null?void 0:o["data-url"])||"",u=((a=e.properties)==null?void 0:a.title)||((s=e.properties)==null?void 0:s["data-name"])||"";r.children[n]={type:"text",value:`![${u}](${l})`}}})}}function n_(t){return t_().use(Kye,{fragment:!0}).use(oTe).use(rTe).use(iTe).use(Txe).use(OK).use(xSe,{handlers:{text:e=>e.value}}).processSync(t).value}function aTe(t,e,n,r){const i=sC(e,n).exportBlocks(t,r);return n_(i)}function qK(t){const e=[];return t.descendants(n=>{var r,i;const o=Kr(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((i=n.firstChild)==null||i.forEach(a=>{e.push(Ir(a,o))}),!1):n.type.isInGroup("bnBlock")?(e.push(Ir(n,o)),!1):!0}),e}class Ud extends Bt{constructor(e,n){super(e,n),Vn(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(i,o,a)=>{if(a!==null&&a.eq(r))return this.nodes.push(i),!1})}static create(e,n,r=n){return new Ud(e.resolve(n),e.resolve(r))}content(){return new ot(Ue.from(this.nodes),0,0)}eq(e){if(!(e instanceof Ud)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),i=n.mapResult(this.to);return i.deleted?Bt.near(e.resolve(r.pos)):r.deleted?Bt.near(e.resolve(i.pos)):new Ud(e.resolve(r.pos),e.resolve(i.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}Bt.jsonID("multiple-node",Ud);let _s;function sTe(t,e){let n,r;const i=e.resolve(t.from).node().type.spec.group==="blockContent",o=e.resolve(t.to).node().type.spec.group==="blockContent",a=Math.min(t.$anchor.depth,t.$head.depth);if(i&&o){const s=t.$from.start(a-1),l=t.$to.end(a-1);n=e.resolve(s-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function tL(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),i=t.domAtPos(e).node,o=(c,f)=>Array.prototype.indexOf.call(c.children,f),a=o(i,t.domAtPos(e+1).node.parentElement),s=o(i,t.domAtPos(n-1).node.parentElement);for(let c=i.childElementCount-1;c>=0;c--)(c>s||c<a)&&r.removeChild(r.children[c]);jK(t.root),_s=r;const l=_s.getElementsByTagName("iframe");for(let c=0;c<l.length;c++){const f=l[c],d=f.parentElement;d&&d.removeChild(f)}const u=t.dom.className.split(" ").filter(c=>c!=="ProseMirror"&&c!=="bn-root"&&c!=="bn-editor").join(" ");_s.className=_s.className+" bn-drag-preview "+u,t.root instanceof ShadowRoot?t.root.appendChild(_s):t.root.body.appendChild(_s)}function jK(t){_s!==void 0&&(t instanceof ShadowRoot?t.removeChild(_s):t.body.removeChild(_s),_s=void 0)}function lTe(t,e,n){if(!t.dataTransfer||n.headless)return;const r=n.prosemirrorView,i=Mo(e.id,r.state.doc);if(!i)throw new Error(`Block with ID ${e.id} not found`);const o=i.posBeforeNode;if(o!=null){const a=r.state.selection,s=r.state.doc,{from:l,to:u}=sTe(a,s),c=l<=o&&o<u,f=a.$anchor.node()!==a.$head.node()||a instanceof Ud;c&&f?(r.dispatch(r.state.tr.setSelection(Ud.create(s,l,u))),tL(r,l,u)):(r.dispatch(r.state.tr.setSelection(Et.create(r.state.doc,o))),tL(r,o));const d=r.state.selection.content(),h=n.pmSchema,m=r.serializeForClipboard(d).dom.innerHTML,v=sC(h,n),b=qK(d.content),x=v.exportBlocks(b,{}),C=n_(x);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",m),t.dataTransfer.setData("text/html",x),t.dataTransfer.setData("text/plain",C),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(_s,0,0)}}const nL=250;function l4(t,e,n=!0){const r=t.root.elementsFromPoint(e.left,e.top);for(const i of r)if(t.dom.contains(i))return n&&i.closest("[data-node-type=columnList]")?l4(t,{left:e.left+50,top:e.top},!1):VK(i,t)}function uTe(t,e){if(!e.dom.firstChild)return;const n=e.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,t.x),n.right-10),top:t.y},i=l4(e,r);if(!i)return;const o=i.node.getBoundingClientRect();return l4(e,{left:o.right-10,top:t.y},!1)}class cTe{constructor(e,n,r){Vn(this,"state"),Vn(this,"emitUpdate"),Vn(this,"mousePos"),Vn(this,"hoveredBlock"),Vn(this,"menuFrozen",!1),Vn(this,"isDragOrigin",!1),Vn(this,"updateState",i=>{this.state=i,this.emitUpdate(this.state)}),Vn(this,"updateStateFromMousePos",()=>{var i,o,a,s,l;if(this.menuFrozen||!this.mousePos)return;const u=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(u?.element!==this.pmView.dom||u.distance>nL){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}const c=uTe(this.mousePos,this.pmView);if(!c||!this.editor.isEditable){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}if(!((a=this.state)!=null&&a.show&&(s=this.hoveredBlock)!=null&&s.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)&&(this.hoveredBlock=c.node,this.editor.isEditable)){const f=c.node.getBoundingClientRect(),d=c.node.closest("[data-node-type=column]");this.state={show:!0,referencePos:new DOMRect(d?d.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,f.y,f.width,f.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))},this.updateState(this.state)}}),Vn(this,"onDragStart",i=>{var o;const a=(o=i.dataTransfer)==null?void 0:o.getData("blocknote/html");if(!a||this.pmView.dragging)return;const s=document.createElement("div");s.innerHTML=a;const l=$s.fromSchema(this.pmView.state.schema).parse(s,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new ot(l.content,0,0),move:!0}}),Vn(this,"findClosestEditorElement",i=>{const o=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(o.length===0)return null;let a=o[0],s=Number.MAX_VALUE;return o.forEach(l=>{const u=l.querySelector(".bn-block-group").getBoundingClientRect(),c=i.clientX<u.left?u.left-i.clientX:i.clientX>u.right?i.clientX-u.right:0,f=i.clientY<u.top?u.top-i.clientY:i.clientY>u.bottom?i.clientY-u.bottom:0,d=Math.sqrt(Math.pow(c,2)+Math.pow(f,2));d<s&&(s=d,a=l)}),{element:a,distance:s}}),Vn(this,"onDragOver",i=>{if(i.synthetic)return;const o=this.getDragEventContext(i);if(!o||!o.isDropPoint){this.closeDropCursor();return}o.isDropPoint&&!o.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(i)}),Vn(this,"closeDropCursor",()=>{const i=new Event("dragleave",{bubbles:!1});i.synthetic=!0,this.pmView.dom.dispatchEvent(i)}),Vn(this,"getDragEventContext",i=>{var o;const a=!((o=i.dataTransfer)!=null&&o.types.includes("blocknote/html"))&&!!this.pmView.dragging,s=!!this.isDragOrigin,l=a||s,u=this.findClosestEditorElement(i);if(!u||u.distance>nL)return;const c=u.element===this.pmView.dom,f=c&&u.distance===0;if(!(!c&&!l))return{isDropPoint:c,isDropWithinEditorBounds:f,isDragOrigin:l}}),Vn(this,"onDrop",i=>{if(i.synthetic)return;const o=this.getDragEventContext(i);if(!o){this.closeDropCursor();return}const{isDropPoint:a,isDropWithinEditorBounds:s,isDragOrigin:l}=o;if(!s&&a&&this.dispatchSyntheticEvent(i),a){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(bt.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),Vn(this,"onDragEnd",i=>{i.synthetic||(this.pmView.dragging=null)}),Vn(this,"onKeyDown",i=>{var o;(o=this.state)!=null&&o.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),Vn(this,"onMouseMove",i=>{var o;if(this.menuFrozen)return;this.mousePos={x:i.clientX,y:i.clientY};const a=this.pmView.dom.getBoundingClientRect(),s=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,l=this.pmView.dom.parentElement;if(s&&i&&i.target&&!(l===i.target||l.contains(i.target))){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0)}dispatchSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=e.clientX,n.clientY=e.clientY,n.clientX=Math.min(Math.max(e.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0)}}const fTe=new gn("SideMenuPlugin"),Ks=Fn(({editor:t})=>{let e;const n=_f(void 0);return{key:"sideMenu",store:n,prosemirrorPlugins:[new Wt({key:fTe,view:r=>(e=new cTe(t,r,i=>{n.setState({...i})}),e)})],blockDragStart(r,i){e&&(e.isDragOrigin=!0),lTe(r,i,t)},blockDragEnd(){jK(t.prosemirrorView.root),e&&(e.isDragOrigin=!1),t.blur()},freezeMenu(){e.menuFrozen=!0,e.state.show=!0,e.emitUpdate(e.state)},unfreezeMenu(){e.menuFrozen=!1,e.state.show=!1,e.emitUpdate(e.state)}}});let jo;function rL(t){jo||(jo=document.createElement("div"),jo.innerHTML="_",jo.style.opacity="0",jo.style.height="1px",jo.style.width="1px",t instanceof Document?t.body.appendChild(jo):t.appendChild(jo))}function dTe(t){jo&&(t instanceof Document?t.body.removeChild(jo):t.removeChild(jo),jo=void 0)}function By(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function hTe(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function pTe(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}let mTe=class{constructor(e,n,r){Vn(this,"state"),Vn(this,"emitUpdate"),Vn(this,"tableId"),Vn(this,"tablePos"),Vn(this,"tableElement"),Vn(this,"menuFrozen",!1),Vn(this,"mouseState","up"),Vn(this,"prevWasEditable",null),Vn(this,"viewMousedownHandler",()=>{this.mouseState="down"}),Vn(this,"mouseUpHandler",i=>{this.mouseState="up",this.mouseMoveHandler(i)}),Vn(this,"mouseMoveHandler",i=>{var o,a,s,l,u,c,f;if(this.menuFrozen||this.mouseState==="selecting"||!(i.target instanceof Element)||!this.pmView.dom.contains(i.target))return;const d=hTe(i.target);if(d?.type==="cell"&&this.mouseState==="down"&&!((o=this.state)!=null&&o.draggingState)){this.mouseState="selecting",(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!d||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!d.tbodyNode)return;const h=d.tbodyNode.getBoundingClientRect(),m=VK(d.domNode,this.pmView);if(!m)return;this.tableElement=m.node;let v;const b=this.editor.transact(w=>Mo(m.id,w.doc));if(!b)throw new Error(`Block with ID ${m.id} not found`);const x=Ir(b.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(Sr(this.editor,"table")&&(this.tablePos=b.posBeforeNode+1,v=x),!v)return;this.tableId=m.id;const C=(l=d.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if(d?.type==="wrapper"){const w=i.clientY>=h.bottom-1&&i.clientY<h.bottom+20,A=i.clientX>=h.right-1&&i.clientX<h.right+20,E=i.clientX>h.right||i.clientY>h.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:A,referencePosTable:h,block:v,widgetContainer:C,colIndex:E||(u=this.state)==null?void 0:u.colIndex,rowIndex:E||(c=this.state)==null?void 0:c.rowIndex,referencePosCell:E||(f=this.state)==null?void 0:f.referencePosCell}}else{const w=By(d.domNode),A=By(d.domNode.parentElement),E=d.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===m.id&&this.state.rowIndex===A&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===v.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:A===v.content.rows.length-1,referencePosTable:h,block:v,draggingState:void 0,referencePosCell:E,colIndex:w,rowIndex:A,widgetContainer:C}}return this.emitUpdate(),!1}),Vn(this,"dragOverHandler",i=>{var o;if(((o=this.state)==null?void 0:o.draggingState)===void 0)return;i.preventDefault(),i.dataTransfer.dropEffect="move",pTe(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const a={left:Math.min(Math.max(i.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(i.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},s=this.pmView.root.elementsFromPoint(a.left,a.top).filter(v=>v.tagName==="TD"||v.tagName==="TH");if(s.length===0)return;const l=s[0];let u=!1;const c=By(l.parentElement),f=By(l),d=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,h=(this.state.draggingState.draggedCellOrientation==="row"?c:f)!==d;(this.state.rowIndex!==c||this.state.colIndex!==f)&&(this.state.rowIndex=c,this.state.colIndex=f,this.state.referencePosCell=l.getBoundingClientRect(),u=!0);const m=this.state.draggingState.draggedCellOrientation==="row"?a.top:a.left;this.state.draggingState.mousePos!==m&&(this.state.draggingState.mousePos=m,u=!0),u&&this.emitUpdate(),h&&this.editor.transact(v=>v.setMeta(Fg,!0))}),Vn(this,"dropHandler",i=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");i.preventDefault();const{draggingState:o,colIndex:a,rowIndex:s}=this.state,l=this.state.block.content.columnWidths;if(o.draggedCellOrientation==="row"){if(!XG(this.state.block,o.originalIndex,s))return!1;const u=Cpe(this.state.block,o.originalIndex,s);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:u}})}else{if(!ZG(this.state.block,o.originalIndex,a))return!1;const u=Epe(this.state.block,o.originalIndex,a),[c]=l.splice(o.originalIndex,1);l.splice(a,0,c),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:u}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=yk(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const i=this.tableElement.querySelector("tbody");if(!i)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const o=i.children[this.state.rowIndex].children[this.state.colIndex];o?this.state.referencePosCell=o.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=i.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}};const Fg=new gn("TableHandlesPlugin"),wr=Fn(({editor:t})=>{let e;const n=_f(void 0);return{key:"tableHandles",store:n,prosemirrorPlugins:[new Wt({key:Fg,view:r=>(e=new mTe(t,r,i=>{n.setState(i.block?{...i,draggingState:i.draggingState?{...i.draggingState}:void 0}:void 0)}),e),props:{decorations:r=>{if(e===void 0||e.state===void 0||e.state.draggingState===void 0||e.tablePos===void 0)return;const i=e.state.draggingState.draggedCellOrientation==="row"?e.state.rowIndex:e.state.colIndex;if(i===void 0)return;const o=[],{block:a,draggingState:s}=e.state,{originalIndex:l,draggedCellOrientation:u}=s;if(i===l||!a||u==="row"&&!XG(a,l,i)||u==="col"&&!ZG(a,l,i))return nn.create(r.doc,o);const c=r.doc.resolve(e.tablePos+1);return e.state.draggingState.draggedCellOrientation==="row"?DD(e.state.block,i).forEach(({row:f,col:d})=>{const h=r.doc.resolve(c.posAtIndex(f)+1),m=r.doc.resolve(h.posAtIndex(d)+1),v=m.node(),b=m.pos+(i>l?v.nodeSize-2:0);o.push(Un.widget(b,()=>{const x=document.createElement("div");return x.className="bn-table-drop-cursor",x.style.left="0",x.style.right="0",i>l?x.style.bottom="-2px":x.style.top="-3px",x.style.height="4px",x}))}):MD(e.state.block,i).forEach(({row:f,col:d})=>{const h=r.doc.resolve(c.posAtIndex(f)+1),m=r.doc.resolve(h.posAtIndex(d)+1),v=m.node(),b=m.pos+(i>l?v.nodeSize-2:0);o.push(Un.widget(b,()=>{const x=document.createElement("div");return x.className="bn-table-drop-cursor",x.style.top="0",x.style.bottom="0",i>l?x.style.right="-2px":x.style.left="-3px",x.style.width="4px",x}))}),nn.create(r.doc,o)}}})],colDragStart(r){if(e===void 0||e.state===void 0||e.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");e.state.draggingState={draggedCellOrientation:"col",originalIndex:e.state.colIndex,mousePos:r.clientX},e.emitUpdate(),t.transact(i=>i.setMeta(Fg,{draggedCellOrientation:e.state.draggingState.draggedCellOrientation,originalIndex:e.state.colIndex,newIndex:e.state.colIndex,tablePos:e.tablePos})),!t.headless&&(rL(t.prosemirrorView.root),r.dataTransfer.setDragImage(jo,0,0),r.dataTransfer.effectAllowed="move")},rowDragStart(r){if(e.state===void 0||e.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");e.state.draggingState={draggedCellOrientation:"row",originalIndex:e.state.rowIndex,mousePos:r.clientY},e.emitUpdate(),t.transact(i=>i.setMeta(Fg,{draggedCellOrientation:e.state.draggingState.draggedCellOrientation,originalIndex:e.state.rowIndex,newIndex:e.state.rowIndex,tablePos:e.tablePos})),!t.headless&&(rL(t.prosemirrorView.root),r.dataTransfer.setDragImage(jo,0,0),r.dataTransfer.effectAllowed="copyMove")},dragEnd(){if(e.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");e.state.draggingState=void 0,e.emitUpdate(),t.transact(r=>r.setMeta(Fg,null)),!t.headless&&dTe(t.prosemirrorView.root)},freezeHandles(){e.menuFrozen=!0},unfreezeHandles(){e.menuFrozen=!1},getCellsAtRowHandle(r,i){return DD(r,i)},getCellsAtColumnHandle(r,i){return MD(r,i)},setCellSelection(r,i,o=i){if(!e)throw new Error("Table handles view not initialized");const a=r.doc.resolve(e.tablePos+1),s=r.doc.resolve(a.posAtIndex(i.row)+1),l=r.doc.resolve(s.posAtIndex(i.col)),u=r.doc.resolve(a.posAtIndex(o.row)+1),c=r.doc.resolve(u.posAtIndex(o.col)),f=r.tr;return f.setSelection(new Qn(l,c)),r.apply(f)},addRowOrColumn(r,i){t.exec((o,a)=>{const s=this.setCellSelection(o,i.orientation==="row"?{row:r,col:0}:{row:0,col:r});return i.orientation==="row"?i.side==="above"?Kpe(s,a):Xpe(s,a):i.side==="left"?qpe(s,a):jpe(s,a)})},removeRowOrColumn(r,i){return i==="row"?t.exec((o,a)=>{const s=this.setCellSelection(o,{row:r,col:0});return Qpe(s,a)}):t.exec((o,a)=>{const s=this.setCellSelection(o,{row:0,col:r});return Ype(s,a)})},mergeCells(r){return t.exec((i,o)=>{const a=r?this.setCellSelection(i,r.relativeStartCell,r.relativeEndCell):i;return eme(a,o)})},splitCell(r){return t.exec((i,o)=>{const a=r?this.setCellSelection(i,r):i;return tme(a,o)})},getCellSelection(){return t.transact(r=>{const i=r.selection;let o=i.$from,a=i.$to;if(jD(i)){const{ranges:v}=i;v.forEach(b=>{o=b.$from.min(o??b.$from),a=b.$to.max(a??b.$to)})}else if(o=r.doc.resolve(i.$from.pos-i.$from.parentOffset-1),a=r.doc.resolve(i.$to.pos-i.$to.parentOffset-1),o.pos===0||a.pos===0)return;const s=r.doc.resolve(o.pos-o.parentOffset-1),l=r.doc.resolve(a.pos-a.parentOffset-1),u=r.doc.resolve(s.pos-s.parentOffset-1),c=o.index(s.depth),f=s.index(u.depth),d=a.index(l.depth),h=l.index(u.depth),m=[];for(let v=f;v<=h;v++)for(let b=c;b<=d;b++)m.push({row:v,col:b});return{from:{row:f,col:c},to:{row:h,col:d},cells:m}})},getMergeDirection(r){return t.transact(i=>{const o=jD(i.selection)?i.selection:void 0;if(!o||!r||o.ranges.length<=1)return;const a=this.getCellSelection();if(a)return Ape(a.from,a.to,r)?"vertical":"horizontal"})},cropEmptyRowsOrColumns(r,i){return Spe(r,i)},addRowsOrColumns(r,i,o){return Tpe(r,i,o)}}}),iL=new gn("trailingNode"),gTe=Fn(()=>({key:"trailingNode",prosemirrorPlugins:[new Wt({key:iL,appendTransaction:(t,e,n)=>{const{doc:r,tr:i,schema:o}=n,a=iL.getState(n),s=r.content.size-2,l=o.nodes.blockContainer,u=o.nodes.paragraph;if(a)return i.insert(s,l.create(void 0,u.create()))},state:{init:(t,e)=>{},apply:(t,e)=>{if(!t.docChanged)return e;let n=t.doc.lastChild;if(!n||n.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(n=n.lastChild,!n||n.type.name!=="blockContainer")return!0;const r=n.firstChild;if(!r)throw new Error("Expected blockContent");return n.nodeSize>4||r.type.spec.content!=="inline*"}}})]}));var vTe=Object.defineProperty,bTe=(t,e,n)=>e in t?vTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mu=(t,e,n)=>bTe(t,typeof e!="symbol"?e+"":e,n);function yTe(t){const e=wTe(t);let{roots:n,nonRoots:r}=oL(e);const i=[];for(;n.size;){i.push(n);const o=new Set;for(const a of n){const s=t.get(a);if(s)for(const l of s){const u=e.get(l);if(u===void 0)continue;const c=u-1;e.set(l,c),c===0&&o.add(l)}}n=o}if(r=oL(e).nonRoots,r.size)throw new Error(`Cycle(s) detected; toposort only works on acyclic graphs. Cyclic nodes: ${Array.from(r).join(", ")}`);return i}function xTe(t){const e=ETe(t);return yTe(e)}function wTe(t){const e=new Map;for(const[n,r]of t.entries()){e.has(n)||e.set(n,0);for(const i of r){const o=e.get(i)??0;e.set(i,o+1)}}return e}function oL(t){const e=new Set,n=new Set;for(const[r,i]of t.entries())i===0?e.add(r):n.add(r);return{roots:e,nonRoots:n}}function ETe(t){const e=new Map;for(const[n,r]of t.entries()){e.has(n)||e.set(n,new Set);for(const i of r)e.has(i)||e.set(i,new Set),e.get(i).add(n)}return e}function CTe(){return new Map}function aL(t,e,n){return t.has(e)||t.set(e,new Set),t.get(e).add(n),t}function GK(t){const e=CTe();for(const i of t)Array.isArray(i.runsBefore)&&i.runsBefore.length>0?i.runsBefore.forEach(o=>{aL(e,i.key,o)}):aL(e,"default",i.key);const n=xTe(e),r=n.findIndex(i=>i.has("default"));return i=>91+(n.findIndex(o=>o.has(i))+r)*10}function sL(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let STe=class{constructor(e){mu(this,"BlockNoteEditor","only for types"),mu(this,"Block","only for types"),mu(this,"PartialBlock","only for types"),mu(this,"inlineContentSpecs"),mu(this,"styleSpecs"),mu(this,"blockSpecs"),mu(this,"blockSchema"),mu(this,"inlineContentSchema"),mu(this,"styleSchema"),this.opts=e;const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:i,blockSchema:o,inlineContentSchema:a,styleSchema:s}=this.init();this.blockSpecs=n,this.styleSpecs=i,this.styleSchema=s,this.inlineContentSpecs=r,this.blockSchema=o,this.inlineContentSchema=a}init(){const e=GK(Object.entries({...this.opts.blockSpecs,...this.opts.inlineContentSpecs,...this.opts.styleSpecs}).map(([o,a])=>{var s;return{key:o,runsBefore:((s=a.implementation)==null?void 0:s.runsBefore)??[]}})),n=Object.fromEntries(Object.entries(this.opts.blockSpecs).map(([o,a])=>[o,Q0e(a.config,a.implementation,a.extensions,e(o))])),r=Object.fromEntries(Object.entries(this.opts.inlineContentSpecs).map(([o,a])=>{var s;return typeof a.config!="object"?[o,a]:[o,{...a,implementation:{...a.implementation,node:(s=a.implementation)==null?void 0:s.node.extend({priority:e(o)})}}]})),i=Object.fromEntries(Object.entries(this.opts.styleSpecs).map(([o,a])=>{var s;return[o,{...a,implementation:{...a.implementation,mark:(s=a.implementation)==null?void 0:s.mark.extend({priority:e(o)})}}]}));return{blockSpecs:n,blockSchema:Object.fromEntries(Object.entries(n).map(([o,a])=>[o,a.config])),inlineContentSpecs:sL(r),styleSpecs:sL(i),inlineContentSchema:mY(r),styleSchema:vY(i)}}extend(e){Object.assign(this.opts.blockSpecs,e.blockSpecs),Object.assign(this.opts.inlineContentSpecs,e.inlineContentSpecs),Object.assign(this.opts.styleSpecs,e.styleSpecs);const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:i,blockSchema:o,inlineContentSchema:a,styleSchema:s}=this.init();return this.blockSpecs=n,this.styleSpecs=i,this.styleSchema=s,this.inlineContentSpecs=r,this.blockSchema=o,this.inlineContentSchema=a,this}},YK=class WK extends STe{static create(e){return new WK({blockSpecs:e?.blockSpecs??m1e,inlineContentSpecs:e?.inlineContentSpecs??NY,styleSpecs:e?.styleSpecs??Mk})}};var TTe=Object.defineProperty,ATe=(t,e,n)=>e in t?TTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NTe=(t,e,n)=>ATe(t,e+"",n);let r_=class{constructor(){NTe(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(i=>i.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}};const DTe={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"},divider:{title:"Divider",subtext:"Visually divide blocks",aliases:["divider","hr","line","horizontal rule"],group:"Basic blocks"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{add_button_text:{image:"Add image",video:"Add video",audio:"Add audio",file:"Add file"}},toggle_blocks:{add_block_button:"Empty toggle. Click to add a block."},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};class yh{match;handler;undoable;inCode;inCodeMark;constructor(e,n,r={}){this.match=e,this.match=e,this.handler=typeof n=="string"?MTe(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function MTe(t){return function(e,n,r,i){let o=t;if(n[1]){let a=n[0].lastIndexOf(n[1]);o+=n[0].slice(a+n[1].length),r+=a;let s=r-i;s>0&&(o=n[0].slice(a-s,a)+o,r=i)}return e.tr.insertText(o,r,i)}}const kTe=500;function _Te({rules:t}){let e=new Wt({state:{init(){return null},apply(n,r){let i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,o){return lL(n,r,i,o,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&lL(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function lL(t,e,n,r,i,o){if(t.composing)return!1;const a=t.state.tr.insertText(r,e,n),s=a.mapping.map(e),l=a.mapping.map(n);let u=null,c=a.doc.resolve(s),f=c.parent.textBetween(Math.max(0,c.parentOffset-kTe),c.parentOffset,null,"");for(let d=0;d<i.length;d++){let h=i[d];if(!h.inCodeMark&&c.marks().some(b=>b.type.spec.code))continue;if(c.parent.type.spec.code){if(!h.inCode)continue}else if(h.inCode==="only")continue;let m=h.match.exec(f);if(!m||m[0].length<r.length)continue;u??=t.state.apply(a);let v=h.handler(u,m,s-m[0].length,l);if(v)return t.dispatch(a),t.dispatch(k1e(t.state.tr)),h.undoable&&v.setMeta(o,{transform:v,from:s,to:l,text:r}),t.dispatch(v),!0}return!1}new yh(/--$/,"",{inCodeMark:!1});new yh(/\.\.\.$/,"",{inCodeMark:!1});new yh(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new yh(/"$/,"",{inCodeMark:!1});new yh(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new yh(/'$/,"",{inCodeMark:!1});class Fr extends Bt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Fr.valid(r)?new Fr(r):Bt.near(r)}content(){return ot.empty}eq(e){return e instanceof Fr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Fr(e.resolve(n.pos))}getBookmark(){return new i_(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!OTe(e)||!ITe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Fr.valid(e))return e;let i=e.pos,o=null;for(let a=e.depth;;a--){let s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){o=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=n;let l=e.doc.resolve(i);if(Fr.valid(l))return l}for(;;){let a=n>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!Et.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=a,i+=n;let s=e.doc.resolve(i);if(Fr.valid(s))return s}return null}}}Fr.prototype.visible=!1;Fr.findFrom=Fr.findGapCursorFrom;Bt.jsonID("gapcursor",Fr);class i_{constructor(e){this.pos=e}map(e){return new i_(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Fr.valid(n)?new Fr(n):Bt.near(n)}}function KK(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function OTe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||KK(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ITe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||KK(i.type))return!0;if(i.inlineContent)return!1}}return!0}function RTe(){return new Wt({props:{decorations:PTe,createSelectionBetween(t,e,n){return e.pos==n.pos&&Fr.valid(n)?new Fr(n):null},handleClick:LTe,handleKeyDown:BTe,handleDOMEvents:{beforeinput:FTe}}})}const BTe=ek({ArrowLeft:Ly("horiz",-1),ArrowRight:Ly("horiz",1),ArrowUp:Ly("vert",-1),ArrowDown:Ly("vert",1)});function Ly(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let a=r.selection,s=e>0?a.$to:a.$from,l=a.empty;if(a instanceof bt){if(!o.endOfTextblock(n)||s.depth==0)return!1;l=!1,s=r.doc.resolve(e>0?s.after():s.before())}let u=Fr.findGapCursorFrom(s,e,l);return u?(i&&i(r.tr.setSelection(new Fr(u))),!0):!1}}function LTe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Fr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Et.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Fr(r))),!0)}function FTe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Fr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ue.empty;for(let a=r.length-1;a>=0;a--)i=Ue.from(r[a].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new ot(i,0,0));return o.setSelection(bt.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function PTe(t){if(!(t.selection instanceof Fr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",nn.create(t.doc,[Un.widget(t.selection.head,e,{key:"gapcursor"})])}Gn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Wt({key:new gn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const a=o-i,s=0,l=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(s,l);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const s=e.selection.$head.pos,l=o-r,u=s-l,c=s;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>r)}})]}});Gn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[DY(this.options)]}});Gn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Wt({key:new gn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return nn.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;a+=1});let s=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(s+=1,this.options.mode==="deepest"&&a-s>0||this.options.mode==="shallowest"&&s>1)return this.options.mode==="deepest";o.push(Un.node(u,u+l.nodeSize,{class:this.options.className}))}),nn.create(t,o)}}})]}});var $Te=Gn.create({name:"gapCursor",addProseMirrorPlugins(){return[RTe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=sr(Nt(t,"allowGapCursor",n)))!=null?e:null}}});Gn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Wt({key:new gn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((a,s)=>{const l=r>=s&&r<=s+a.nodeSize,u=!a.isLeaf&&PE(a);if((l||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];o&&c.push(this.options.emptyEditorClass);const f=Un.node(s,s+a.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:s,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),nn.create(t,i)}}})]}});Gn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Wt({key:new gn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||NG(n.selection)||t.view.dragging?null:nn.create(n.doc,[Un.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function uL({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}Gn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new gn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Wt({key:e,appendTransaction:(i,o,a)=>{const{doc:s,tr:l,schema:u}=a,c=e.getState(a),f=s.content.size,d=u.nodes[n];if(c)return l.insert(f,d.create())},state:{init:(i,o)=>{const a=o.tr.doc.lastChild;return!uL({node:a,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const a=i.doc.lastChild;return!uL({node:a,types:r})}}})]}});Gn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>kk(t,e),redo:()=>({state:t,dispatch:e})=>_k(t,e)}},addProseMirrorPlugins(){return[_Y(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const zTe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",UTe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",u4="numeric",c4="ascii",f4="alpha",n1="asciinumeric",Pg="alphanumeric",d4="domain",XK="emoji",HTe="scheme",VTe="slashscheme",qN="whitespace";function qTe(t,e){return t in e||(e[t]=[]),e[t]}function Md(t,e,n){e[u4]&&(e[n1]=!0,e[Pg]=!0),e[c4]&&(e[n1]=!0,e[f4]=!0),e[n1]&&(e[Pg]=!0),e[f4]&&(e[Pg]=!0),e[Pg]&&(e[d4]=!0),e[XK]&&(e[d4]=!0);for(const r in e){const i=qTe(r,n);i.indexOf(t)<0&&i.push(t)}}function jTe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Yo(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Yo.groups={};Yo.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Yo.groups;let i;return e&&e.j?i=e:(i=new Yo(e),n&&r&&Md(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let a=0;a<o-1;a++)i=i.tt(t[a]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Yo.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let a,s=i.go(t);if(s?(a=new Yo,Object.assign(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new Yo,o){if(r)if(a.t&&typeof a.t=="string"){const l=Object.assign(jTe(a.t,r),n);Md(o,l,r)}else n&&Md(o,n,r);a.t=o}return i.j[t]=a,a}};const ln=(t,e,n,r,i)=>t.ta(e,n,r,i),Lr=(t,e,n,r,i)=>t.tr(e,n,r,i),cL=(t,e,n,r,i)=>t.ts(e,n,r,i),it=(t,e,n,r,i)=>t.tt(e,n,r,i),wu="WORD",h4="UWORD",ZK="ASCIINUMERICAL",QK="ALPHANUMERICAL",P1="LOCALHOST",p4="TLD",m4="UTLD",$2="SCHEME",Rp="SLASH_SCHEME",o_="NUM",g4="WS",a_="NL",r1="OPENBRACE",i1="CLOSEBRACE",Ux="OPENBRACKET",Hx="CLOSEBRACKET",Vx="OPENPAREN",qx="CLOSEPAREN",jx="OPENANGLEBRACKET",Gx="CLOSEANGLEBRACKET",Yx="FULLWIDTHLEFTPAREN",Wx="FULLWIDTHRIGHTPAREN",Kx="LEFTCORNERBRACKET",Xx="RIGHTCORNERBRACKET",Zx="LEFTWHITECORNERBRACKET",Qx="RIGHTWHITECORNERBRACKET",Jx="FULLWIDTHLESSTHAN",ew="FULLWIDTHGREATERTHAN",tw="AMPERSAND",nw="APOSTROPHE",rw="ASTERISK",zc="AT",iw="BACKSLASH",ow="BACKTICK",aw="CARET",Gc="COLON",s_="COMMA",sw="DOLLAR",Tl="DOT",lw="EQUALS",l_="EXCLAMATION",Xa="HYPHEN",o1="PERCENT",uw="PIPE",cw="PLUS",fw="POUND",a1="QUERY",u_="QUOTE",JK="FULLWIDTHMIDDLEDOT",c_="SEMI",Al="SLASH",s1="TILDE",dw="UNDERSCORE",eX="EMOJI",hw="SYM";var tX=Object.freeze({__proto__:null,ALPHANUMERICAL:QK,AMPERSAND:tw,APOSTROPHE:nw,ASCIINUMERICAL:ZK,ASTERISK:rw,AT:zc,BACKSLASH:iw,BACKTICK:ow,CARET:aw,CLOSEANGLEBRACKET:Gx,CLOSEBRACE:i1,CLOSEBRACKET:Hx,CLOSEPAREN:qx,COLON:Gc,COMMA:s_,DOLLAR:sw,DOT:Tl,EMOJI:eX,EQUALS:lw,EXCLAMATION:l_,FULLWIDTHGREATERTHAN:ew,FULLWIDTHLEFTPAREN:Yx,FULLWIDTHLESSTHAN:Jx,FULLWIDTHMIDDLEDOT:JK,FULLWIDTHRIGHTPAREN:Wx,HYPHEN:Xa,LEFTCORNERBRACKET:Kx,LEFTWHITECORNERBRACKET:Zx,LOCALHOST:P1,NL:a_,NUM:o_,OPENANGLEBRACKET:jx,OPENBRACE:r1,OPENBRACKET:Ux,OPENPAREN:Vx,PERCENT:o1,PIPE:uw,PLUS:cw,POUND:fw,QUERY:a1,QUOTE:u_,RIGHTCORNERBRACKET:Xx,RIGHTWHITECORNERBRACKET:Qx,SCHEME:$2,SEMI:c_,SLASH:Al,SLASH_SCHEME:Rp,SYM:hw,TILDE:s1,TLD:p4,UNDERSCORE:dw,UTLD:m4,UWORD:h4,WORD:wu,WS:g4});const gu=/[a-z]/,Sg=new RegExp("\\p{L}","u"),jN=new RegExp("\\p{Emoji}","u"),vu=/\d/,GN=/\s/,fL="\r",YN=`
`,GTe="",YTe="",WN="";let Fy=null,Py=null;function WTe(t=[]){const e={};Yo.groups=e;const n=new Yo;Fy==null&&(Fy=dL(zTe)),Py==null&&(Py=dL(UTe)),it(n,"'",nw),it(n,"{",r1),it(n,"}",i1),it(n,"[",Ux),it(n,"]",Hx),it(n,"(",Vx),it(n,")",qx),it(n,"<",jx),it(n,">",Gx),it(n,"",Yx),it(n,"",Wx),it(n,"",Kx),it(n,"",Xx),it(n,"",Zx),it(n,"",Qx),it(n,"",Jx),it(n,"",ew),it(n,"&",tw),it(n,"*",rw),it(n,"@",zc),it(n,"`",ow),it(n,"^",aw),it(n,":",Gc),it(n,",",s_),it(n,"$",sw),it(n,".",Tl),it(n,"=",lw),it(n,"!",l_),it(n,"-",Xa),it(n,"%",o1),it(n,"|",uw),it(n,"+",cw),it(n,"#",fw),it(n,"?",a1),it(n,'"',u_),it(n,"/",Al),it(n,";",c_),it(n,"~",s1),it(n,"_",dw),it(n,"\\",iw),it(n,"",JK);const r=Lr(n,vu,o_,{[u4]:!0});Lr(r,vu,r);const i=Lr(r,gu,ZK,{[n1]:!0}),o=Lr(r,Sg,QK,{[Pg]:!0}),a=Lr(n,gu,wu,{[c4]:!0});Lr(a,vu,i),Lr(a,gu,a),Lr(i,vu,i),Lr(i,gu,i);const s=Lr(n,Sg,h4,{[f4]:!0});Lr(s,gu),Lr(s,vu,o),Lr(s,Sg,s),Lr(o,vu,o),Lr(o,gu),Lr(o,Sg,o);const l=it(n,YN,a_,{[qN]:!0}),u=it(n,fL,g4,{[qN]:!0}),c=Lr(n,GN,g4,{[qN]:!0});it(n,WN,c),it(u,YN,l),it(u,WN,c),Lr(u,GN,c),it(c,fL),it(c,YN),Lr(c,GN,c),it(c,WN,c);const f=Lr(n,jN,eX,{[XK]:!0});it(f,"#"),Lr(f,jN,f),it(f,GTe,f);const d=it(f,YTe);it(d,"#"),Lr(d,jN,f);const h=[[gu,a],[vu,i]],m=[[gu,null],[Sg,s],[vu,o]];for(let v=0;v<Fy.length;v++)Oc(n,Fy[v],p4,wu,h);for(let v=0;v<Py.length;v++)Oc(n,Py[v],m4,h4,m);Md(p4,{tld:!0,ascii:!0},e),Md(m4,{utld:!0,alpha:!0},e),Oc(n,"file",$2,wu,h),Oc(n,"mailto",$2,wu,h),Oc(n,"http",Rp,wu,h),Oc(n,"https",Rp,wu,h),Oc(n,"ftp",Rp,wu,h),Oc(n,"ftps",Rp,wu,h),Md($2,{scheme:!0,ascii:!0},e),Md(Rp,{slashscheme:!0,ascii:!0},e),t=t.sort((v,b)=>v[0]>b[0]?1:-1);for(let v=0;v<t.length;v++){const b=t[v][0],C=t[v][1]?{[HTe]:!0}:{[VTe]:!0};b.indexOf("-")>=0?C[d4]=!0:gu.test(b)?vu.test(b)?C[n1]=!0:C[c4]=!0:C[u4]=!0,cL(n,b,b,C)}return cL(n,"localhost",P1,{ascii:!0}),n.jd=new Yo(hw),{start:n,tokens:Object.assign({groups:e},tX)}}function nX(t,e){const n=KTe(e.replace(/[A-Z]/g,s=>s.toLowerCase())),r=n.length,i=[];let o=0,a=0;for(;a<r;){let s=t,l=null,u=0,c=null,f=-1,d=-1;for(;a<r&&(l=s.go(n[a]));)s=l,s.accepts()?(f=0,d=0,c=s):f>=0&&(f+=n[a].length,d++),u+=n[a].length,o+=n[a].length,a++;o-=f,a-=d,u-=f,i.push({t:c.t,v:e.slice(o-u,o),s:o-u,e:o})}return i}function KTe(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,a=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function Oc(t,e,n,r,i){let o;const a=e.length;for(let s=0;s<a-1;s++){const l=e[s];t.j[l]?o=t.j[l]:(o=new Yo(r),o.jr=i.slice(),t.j[l]=o),t=o}return o=new Yo(n),o.jr=i.slice(),t.j[e[a-1]]=o,o}function dL(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+o),10);a>0;a--)n.pop();r+=o}else n.push(t[r]),r++}return e}const $1={defaultProtocol:"http",events:null,format:hL,formatHref:hL,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function f_(t,e=null){let n=Object.assign({},$1);t&&(n=Object.assign(n,t instanceof f_?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}f_.prototype={o:$1,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:$1[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function hL(t){return t}function rX(t,e){this.t="token",this.v=t,this.tk=e}rX.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=$1.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),a={},s=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return a.href=r,s&&(a.class=s),l&&(a.target=l),u&&(a.rel=u),c&&Object.assign(a,c),{tagName:i,attributes:a,content:o,eventListeners:f}}};function lC(t,e){class n extends rX{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const pL=lC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),mL=lC("text"),XTe=lC("nl"),$y=lC("url",{isLink:!0,toHref(t=$1.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==P1&&t[1].t===Gc}}),Ya=t=>new Yo(t);function ZTe({groups:t}){const e=t.domain.concat([tw,rw,zc,iw,ow,aw,sw,lw,Xa,o_,o1,uw,cw,fw,Al,hw,s1,dw]),n=[nw,Gc,s_,Tl,l_,o1,a1,u_,c_,jx,Gx,r1,i1,Hx,Ux,Vx,qx,Yx,Wx,Kx,Xx,Zx,Qx,Jx,ew],r=[tw,nw,rw,iw,ow,aw,sw,lw,Xa,r1,i1,o1,uw,cw,fw,a1,Al,hw,s1,dw],i=Ya(),o=it(i,s1);ln(o,r,o),ln(o,t.domain,o);const a=Ya(),s=Ya(),l=Ya();ln(i,t.domain,a),ln(i,t.scheme,s),ln(i,t.slashscheme,l),ln(a,r,o),ln(a,t.domain,a);const u=it(a,zc);it(o,zc,u),it(s,zc,u),it(l,zc,u);const c=it(o,Tl);ln(c,r,o),ln(c,t.domain,o);const f=Ya();ln(u,t.domain,f),ln(f,t.domain,f);const d=it(f,Tl);ln(d,t.domain,f);const h=Ya(pL);ln(d,t.tld,h),ln(d,t.utld,h),it(u,P1,h);const m=it(f,Xa);it(m,Xa,m),ln(m,t.domain,f),ln(h,t.domain,f),it(h,Tl,d),it(h,Xa,m);const v=it(h,Gc);ln(v,t.numeric,pL);const b=it(a,Xa),x=it(a,Tl);it(b,Xa,b),ln(b,t.domain,a),ln(x,r,o),ln(x,t.domain,a);const C=Ya($y);ln(x,t.tld,C),ln(x,t.utld,C),ln(C,t.domain,a),ln(C,r,o),it(C,Tl,x),it(C,Xa,b),it(C,zc,u);const w=it(C,Gc),A=Ya($y);ln(w,t.numeric,A);const E=Ya($y),T=Ya();ln(E,e,E),ln(E,n,T),ln(T,e,E),ln(T,n,T),it(C,Al,E),it(A,Al,E);const N=it(s,Gc),D=it(l,Gc),M=it(D,Al),k=it(M,Al);ln(s,t.domain,a),it(s,Tl,x),it(s,Xa,b),ln(l,t.domain,a),it(l,Tl,x),it(l,Xa,b),ln(N,t.domain,E),it(N,Al,E),it(N,a1,E),ln(k,t.domain,E),ln(k,e,E),it(k,Al,E);const B=[[r1,i1],[Ux,Hx],[Vx,qx],[jx,Gx],[Yx,Wx],[Kx,Xx],[Zx,Qx],[Jx,ew]];for(let P=0;P<B.length;P++){const[$,z]=B[P],j=it(E,$);it(T,$,j),it(j,z,E);const L=Ya($y);ln(j,e,L);const U=Ya();ln(j,n),ln(L,e,L),ln(L,n,U),ln(U,e,L),ln(U,n,U),it(L,z,E),it(U,z,E)}return it(i,P1,C),it(i,a_,XTe),{start:i,tokens:tX}}function QTe(t,e,n){let r=n.length,i=0,o=[],a=[];for(;i<r;){let s=t,l=null,u=null,c=0,f=null,d=-1;for(;i<r&&!(l=s.go(n[i].t));)a.push(n[i++]);for(;i<r&&(u=l||s.go(n[i].t));)l=null,s=u,s.accepts()?(d=0,f=s):d>=0&&d++,i++,c++;if(d<0)i-=c,i<r&&(a.push(n[i]),i++);else{a.length>0&&(o.push(KN(mL,e,a)),a=[]),i-=d,c-=d;const h=f.t,m=n.slice(i-c,i);o.push(KN(h,e,m))}}return a.length>0&&o.push(KN(mL,e,a)),o}function KN(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const JTe=typeof console<"u"&&console&&console.warn||(()=>{}),eAe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Tr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function tAe(){return Yo.groups={},Tr.scanner=null,Tr.parser=null,Tr.tokenQueue=[],Tr.pluginQueue=[],Tr.customSchemes=[],Tr.initialized=!1,Tr}function gL(t,e=!1){if(Tr.initialized&&JTe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${eAe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Tr.customSchemes.push([t,e])}function nAe(){Tr.scanner=WTe(Tr.customSchemes);for(let t=0;t<Tr.tokenQueue.length;t++)Tr.tokenQueue[t][1]({scanner:Tr.scanner});Tr.parser=ZTe(Tr.scanner.tokens);for(let t=0;t<Tr.pluginQueue.length;t++)Tr.pluginQueue[t][1]({scanner:Tr.scanner,parser:Tr.parser});return Tr.initialized=!0,Tr}function d_(t){return Tr.initialized||nAe(),QTe(Tr.parser.start,t,nX(Tr.scanner.start,t))}d_.scan=nX;function iX(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new f_(n),i=d_(t),o=[];for(let a=0;a<i.length;a++){const s=i[a];s.isLink&&(!e||s.t===e)&&r.check(s)&&o.push(s.toFormattedObject(r))}return o}var h_="[\0- -\u2029]",rAe=new RegExp(h_),iAe=new RegExp(`${h_}$`),oAe=new RegExp(h_,"g");function aAe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function sAe(t){return new Wt({key:new gn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;const{tr:a}=r,s=LE(n.doc,[...e]);if(lk(s).forEach(({newRange:u})=>{const c=xG(r.doc,u,h=>h.isTextblock);let f,d;if(c.length>1)f=c[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(u.from,u.to," "," ");if(!iAe.test(h))return;f=c[0],d=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&d){const h=d.split(rAe).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],v=f.pos+d.lastIndexOf(m);if(!m)return!1;const b=d_(m).map(x=>x.toObject(t.defaultProtocol));if(!aAe(b))return!1;b.filter(x=>x.isLink).map(x=>({...x,from:v+x.start+1,to:v+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{uk(x.from,x.to,r.doc).some(C=>C.mark.type===t.type)||a.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function lAe(t){return new Wt({key:new gn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{let f=r.target;const d=[];for(;f.nodeName!=="DIV";)d.push(f),f=f.parentNode;s=d.find(h=>h.nodeName==="A")}if(!s)return a;const l=AG(e.state,t.type.name),u=(i=s?.href)!=null?i:l.href,c=(o=s?.target)!=null?o:l.target;s&&u&&(window.open(u,c),a=!0)}return a}}})}function uAe(t){return new Wt({key:new gn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:a}=o,{empty:s}=a;if(s)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const u=iX(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!u||i!==void 0&&!i(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function xd(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(oAe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var cAe=ys.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){gL(t);return}gL(t.scheme,t.optionalSlashes)})},onDestroy(){tAe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!xd(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!xd(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!xd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Na(this.options.HTMLAttributes,t),0]:["a",Na(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!xd(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!xd(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qd({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=iX(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!xd(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(sAe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!xd(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(lAe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(uAe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),fAe=tl.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""});const vL=new gn("blocknote-show-selection"),pw=Fn(({editor:t})=>{const e=_f({enabled:!1},{onUpdate(){t.transact(n=>n.setMeta(vL,{}))}});return{key:"showSelection",store:e,prosemirrorPlugins:[new Wt({key:vL,props:{decorations:n=>{const{doc:r,selection:i}=n;if(!e.state.enabled)return nn.empty;const o=Un.inline(i.from,i.to,{"data-show-selection":"true"});return nn.create(r,[o])}}})],showSelection(n){e.setState({enabled:n})}}}),dAe={tokenize:hAe};function hAe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),On(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),o(s)}function o(s){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(s)}function a(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return Rt(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),a)}}const pAe={tokenize:mAe},bL={tokenize:gAe};function mAe(t){const e=this,n=[];let r=0,i,o,a;return s;function s(w){if(r<n.length){const A=n[r];return e.containerState=A[1],t.attempt(A[0].continuation,l,u)(w)}return u(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();const A=e.events.length;let E=A,T;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){T=e.events[E][1].end;break}x(r);let N=A;for(;N<e.events.length;)e.events[N][1].end={...T},N++;return Sa(e.events,E+1,0,e.events.slice(A)),e.events.length=N,u(w)}return s(w)}function u(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return m(w);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(bL,c,f)(w)}function c(w){return i&&C(),x(r),d(w)}function f(w){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,m(w)}function d(w){return e.containerState={},t.attempt(bL,h,m)(w)}function h(w){return r++,n.push([e.currentConstruct,e.containerState]),d(w)}function m(w){if(w===null){i&&C(),x(0),t.consume(w);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),v(w)}function v(w){if(w===null){b(t.exit("chunkFlow"),!0),x(0),t.consume(w);return}return Rt(w)?(t.consume(w),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(w),v)}function b(w,A){const E=e.sliceStream(w);if(A&&E.push(null),w.previous=o,o&&(o.next=w),o=w,i.defineSkip(w.start),i.write(E),e.parser.lazy[w.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<a&&(!i.events[T][1].end||i.events[T][1].end.offset>a))return;const N=e.events.length;let D=N,M,k;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(M){k=e.events[D][1].end;break}M=!0}for(x(r),T=N;T<e.events.length;)e.events[T][1].end={...k},T++;Sa(e.events,D+1,0,e.events.slice(N)),e.events.length=T}}function x(w){let A=n.length;for(;A-- >w;){const E=n[A];e.containerState=E[1],E[0].exit.call(e,t)}n.length=w}function C(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function gAe(t,e,n){return On(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const vAe={tokenize:bAe};function bAe(t){const e=this,n=t.attempt(gv,r,t.attempt(this.parser.constructs.flowInitial,i,On(t,t.attempt(this.parser.constructs.flow,i,t.attempt(iCe,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const yAe={resolveAll:aX()},xAe=oX("string"),wAe=oX("text");function oX(t){return{resolveAll:aX(t==="text"?EAe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,a,s);return a;function a(c){return u(c)?o(c):s(c)}function s(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),o(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function aX(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function EAe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,a=-1,s=0,l;for(;o--;){const u=i[o];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(u===-2)l=!0,s++;else if(u!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){const u={type:n===t.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const CAe={42:Ho,43:Ho,45:Ho,48:Ho,49:Ho,50:Ho,51:Ho,52:Ho,53:Ho,54:Ho,55:Ho,56:Ho,57:Ho,62:TK},SAe={91:uCe},TAe={[-2]:FN,[-1]:FN,32:FN},AAe={35:mCe,42:L2,45:[jB,L2],60:yCe,61:jB,95:L2,96:VB,126:VB},NAe={38:NK,92:AK},DAe={[-5]:PN,[-4]:PN,[-3]:PN,33:FCe,38:NK,42:o4,60:[$Ee,ACe],91:$Ce,92:[hCe,AK],93:Jk,95:o4,96:QEe},MAe={null:[o4,yAe]},kAe={null:[42,95]},_Ae={null:[]},OAe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kAe,contentInitial:SAe,disable:_Ae,document:CAe,flow:AAe,flowInitial:TAe,insideSpan:MAe,string:NAe,text:DAe},Symbol.toStringTag,{value:"Module"}));function IAe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[];const l={attempt:N(E),check:N(T),consume:C,enter:w,exit:A,interrupt:N(T,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:t,previous:null,sliceSerialize:d,sliceStream:h,write:f};let c=e.tokenize.call(u,l);return e.resolveAll&&o.push(e),u;function f(B){return a=ns(a,B),b(),a[a.length-1]!==null?[]:(D(e,0),u.events=aC(o,u.events,u),u.events)}function d(B,P){return BAe(h(B),P)}function h(B){return RAe(a,B)}function m(){const{_bufferIndex:B,_index:P,line:$,column:z,offset:j}=r;return{_bufferIndex:B,_index:P,line:$,column:z,offset:j}}function v(B){i[B.line]=B.column,k()}function b(){let B;for(;r._index<a.length;){const P=a[r._index];if(typeof P=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<P.length;)x(P.charCodeAt(r._bufferIndex));else x(P)}}function x(B){c=c(B)}function C(B){Rt(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,k()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=B}function w(B,P){const $=P||{};return $.type=B,$.start=m(),u.events.push(["enter",$,u]),s.push($),$}function A(B){const P=s.pop();return P.end=m(),u.events.push(["exit",P,u]),P}function E(B,P){D(B,P.from)}function T(B,P){P.restore()}function N(B,P){return $;function $(z,j,L){let U,G,Z,H;return Array.isArray(z)?K(z):"tokenize"in z?K([z]):W(z);function W(ce){return ve;function ve(ie){const X=ie!==null&&ce[ie],le=ie!==null&&ce.null,Ce=[...Array.isArray(X)?X:X?[X]:[],...Array.isArray(le)?le:le?[le]:[]];return K(Ce)(ie)}}function K(ce){return U=ce,G=0,ce.length===0?L:I(ce[G])}function I(ce){return ve;function ve(ie){return H=M(),Z=ce,ce.partial||(u.currentConstruct=ce),ce.name&&u.parser.constructs.disable.null.includes(ce.name)?Q():ce.tokenize.call(P?Object.assign(Object.create(u),P):u,l,ee,Q)(ie)}}function ee(ce){return B(Z,H),j}function Q(ce){return H.restore(),++G<U.length?I(U[G]):L}}}function D(B,P){B.resolveAll&&!o.includes(B)&&o.push(B),B.resolve&&Sa(u.events,P,u.events.length-P,B.resolve(u.events.slice(P),u)),B.resolveTo&&(u.events=B.resolveTo(u.events,u))}function M(){const B=m(),P=u.previous,$=u.currentConstruct,z=u.events.length,j=Array.from(s);return{from:z,restore:L};function L(){r=B,u.previous=P,u.currentConstruct=$,u.events.length=z,s=j,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function RAe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,o)];else{if(a=t.slice(n,i),r>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(r):a.shift()}o>0&&a.push(t[i].slice(0,o))}return a}function BAe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function LAe(t){const r={constructs:gK([OAe,...(t||{}).extensions||[]]),content:i(dAe),defined:[],document:i(pAe),flow:i(vAe),lazy:{},string:i(xAe),text:i(wAe)};return r;function i(o){return a;function a(s){return IAe(r,o,s)}}}function FAe(t){for(;!DK(t););return t}const yL=/[\0\t\n\r]/g;function PAe(){let t=1,e="",n=!0,r;return i;function i(o,a,s){const l=[];let u,c,f,d,h;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),f=0,e="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(yL.lastIndex=f,u=yL.exec(o),d=u&&u.index!==void 0?u.index:o.length,h=o.charCodeAt(d),!u){e=o.slice(f);break}if(h===10&&f===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<d&&(l.push(o.slice(f,d)),t+=d-f),h){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=d+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const sX={}.hasOwnProperty;function $Ae(t,e,n){return typeof e!="string"&&(n=e,e=void 0),zAe(n)(FAe(LAe(n).document().write(PAe()(t,e,!0))))}function zAe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(st),autolinkProtocol:M,autolinkEmail:M,atxHeading:o(qe),blockQuote:o(le),characterEscape:M,characterReference:M,codeFenced:o(Ce),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Ce,a),codeText:o(he,a),codeTextData:M,data:M,codeFlowValue:M,definition:o(Te),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Ae),hardBreakEscape:o(rt),hardBreakTrailing:o(rt),htmlFlow:o(lt,a),htmlFlowData:M,htmlText:o(lt,a),htmlTextData:M,image:o(Qe),label:a,link:o(st),listItem:o(te),listItemValue:d,listOrdered:o(dt,f),listUnordered:o(dt),paragraph:o(me),reference:I,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(qe),strong:o(J),thematicBreak:o(ge)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:X,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:ce,characterReference:ve,codeFenced:l(b),codeFencedFence:v,codeFencedFenceInfo:h,codeFencedFenceMeta:m,codeFlowValue:k,codeIndented:l(x),codeText:l(j),codeTextData:k,data:k,definition:l(),definitionDestinationString:A,definitionLabelString:C,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l($),htmlFlowData:k,htmlText:l(z),htmlTextData:k,image:l(U),label:Z,labelText:G,lineEnding:B,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ee,resourceDestinationString:H,resourceTitleString:W,resource:K,setextHeading:l(D),setextHeadingLineSequence:N,setextHeadingText:T,strong:l(),thematicBreak:l()}};lX(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(se){let fe={type:"root",children:[]};const we={stack:[fe],tokenStack:[],config:e,enter:s,exit:u,buffer:a,resume:c,data:n},Be=[];let Oe=-1;for(;++Oe<se.length;)if(se[Oe][1].type==="listOrdered"||se[Oe][1].type==="listUnordered")if(se[Oe][0]==="enter")Be.push(Oe);else{const Je=Be.pop();Oe=i(se,Je,Oe)}for(Oe=-1;++Oe<se.length;){const Je=e[se[Oe][0]];sX.call(Je,se[Oe][1].type)&&Je[se[Oe][1].type].call(Object.assign({sliceSerialize:se[Oe][2].sliceSerialize},we),se[Oe][1])}if(we.tokenStack.length>0){const Je=we.tokenStack[we.tokenStack.length-1];(Je[1]||xL).call(we,void 0,Je[0])}for(fe.position={start:Ic(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:Ic(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},Oe=-1;++Oe<e.transforms.length;)fe=e.transforms[Oe](fe)||fe;return fe}function i(se,fe,we){let Be=fe-1,Oe=-1,Je=!1,Pe,ht,Ct,Ut;for(;++Be<=we;){const pt=se[Be];switch(pt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{pt[0]==="enter"?Oe++:Oe--,Ut=void 0;break}case"lineEndingBlank":{pt[0]==="enter"&&(Pe&&!Ut&&!Oe&&!Ct&&(Ct=Be),Ut=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ut=void 0}if(!Oe&&pt[0]==="enter"&&pt[1].type==="listItemPrefix"||Oe===-1&&pt[0]==="exit"&&(pt[1].type==="listUnordered"||pt[1].type==="listOrdered")){if(Pe){let _n=Be;for(ht=void 0;_n--;){const V=se[_n];if(V[1].type==="lineEnding"||V[1].type==="lineEndingBlank"){if(V[0]==="exit")continue;ht&&(se[ht][1].type="lineEndingBlank",Je=!0),V[1].type="lineEnding",ht=_n}else if(!(V[1].type==="linePrefix"||V[1].type==="blockQuotePrefix"||V[1].type==="blockQuotePrefixWhitespace"||V[1].type==="blockQuoteMarker"||V[1].type==="listItemIndent"))break}Ct&&(!ht||Ct<ht)&&(Pe._spread=!0),Pe.end=Object.assign({},ht?se[ht][1].start:pt[1].end),se.splice(ht||Be,0,["exit",Pe,pt[2]]),Be++,we++}if(pt[1].type==="listItemPrefix"){const _n={type:"listItem",_spread:!1,start:Object.assign({},pt[1].start),end:void 0};Pe=_n,se.splice(Be,0,["enter",_n,pt[2]]),Be++,we++,Ct=void 0,Ut=!0}}}return se[fe][1]._spread=Je,we}function o(se,fe){return we;function we(Be){s.call(this,se(Be),Be),fe&&fe.call(this,Be)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(se,fe,we){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([fe,we||void 0]),se.position={start:Ic(fe.start),end:void 0}}function l(se){return fe;function fe(we){se&&se.call(this,we),u.call(this,we)}}function u(se,fe){const we=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==se.type&&(fe?fe.call(this,se,Be[0]):(Be[1]||xL).call(this,se,Be[0]));else throw new Error("Cannot close `"+se.type+"` ("+Jg({start:se.start,end:se.end})+"): its not open");we.position.end=Ic(se.end)}function c(){return rC(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(se){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function h(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=se}function m(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=se}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se.replace(/(\r?\n|\r)$/g,"")}function C(se){const fe=this.resume(),we=this.stack[this.stack.length-1];we.label=fe,we.identifier=zs(this.sliceSerialize(se)).toLowerCase()}function w(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.title=se}function A(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.url=se}function E(se){const fe=this.stack[this.stack.length-1];if(!fe.depth){const we=this.sliceSerialize(se).length;fe.depth=we}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function N(se){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function M(se){const we=this.stack[this.stack.length-1].children;let Be=we[we.length-1];(!Be||Be.type!=="text")&&(Be=ae(),Be.position={start:Ic(se.start),end:void 0},we.push(Be)),this.stack.push(Be)}function k(se){const fe=this.stack.pop();fe.value+=this.sliceSerialize(se),fe.position.end=Ic(se.end)}function B(se){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const we=fe.children[fe.children.length-1];we.position.end=Ic(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(M.call(this,se),k.call(this,se))}function P(){this.data.atHardBreak=!0}function $(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function z(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function j(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.value=se}function L(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=fe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function U(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=fe,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function G(se){const fe=this.sliceSerialize(se),we=this.stack[this.stack.length-2];we.label=mK(fe),we.identifier=zs(fe).toLowerCase()}function Z(){const se=this.stack[this.stack.length-1],fe=this.resume(),we=this.stack[this.stack.length-1];if(this.data.inReference=!0,we.type==="link"){const Be=se.children;we.children=Be}else we.alt=fe}function H(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.url=se}function W(){const se=this.resume(),fe=this.stack[this.stack.length-1];fe.title=se}function K(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function ee(se){const fe=this.resume(),we=this.stack[this.stack.length-1];we.label=fe,we.identifier=zs(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function Q(se){this.data.characterReferenceType=se.type}function ce(se){const fe=this.sliceSerialize(se),we=this.data.characterReferenceType;let Be;we?(Be=pK(fe,we==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=Zk(fe);const Oe=this.stack[this.stack.length-1];Oe.value+=Be}function ve(se){const fe=this.stack.pop();fe.position.end=Ic(se.end)}function ie(se){k.call(this,se);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(se)}function X(se){k.call(this,se);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(se)}function le(){return{type:"blockquote",children:[]}}function Ce(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function Te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function qe(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function lt(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function dt(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function te(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function J(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function ge(){return{type:"thematicBreak"}}}function Ic(t){return{line:t.line,column:t.column,offset:t.offset}}function lX(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?lX(t,r):UAe(t,r)}}function UAe(t,e){let n;for(n in e)if(sX.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function xL(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Jg({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Jg({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Jg({start:e.start,end:e.end})+") is still open")}function uX(t){const e=this;e.parser=n;function n(r){return $Ae(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function HAe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function VAe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function qAe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function jAe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GAe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YAe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Km(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let a,s=t.footnoteCounts.get(r);s===void 0?(s=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=o+1,s+=1,t.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function WAe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function KAe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function cX(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function XAe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return cX(t,e);const i={src:Km(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function ZAe(t,e){const n={src:Km(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function QAe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function JAe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return cX(t,e);const i={href:Km(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function eNe(t,e){const n={href:Km(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function tNe(t,e,n){const r=t.all(e),i=n?nNe(n):fX(e),o={},a=[];if(typeof e.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const c=r[s];(i||s!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?a.push(...c.children):a.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:a};return t.patch(e,u),t.applyData(e,u)}function nNe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=fX(n[r])}return e}function fX(t){const e=t.spread;return e??t.children.length>1}function rNe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function iNe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oNe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function aNe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sNe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=jk(e.children[1]),l=IW(e.children[e.children.length-1]);s&&l&&(a.position={start:s,end:l}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function lNe(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,s=a?a.length:e.children.length;let l=-1;const u=[];for(;++l<s;){const f=e.children[l],d={},h=a?a[l]:void 0;h&&(d.align=h);let m={type:"element",tagName:o,properties:d,children:[]};f&&(m.children=t.all(f),t.patch(f,m),m=t.applyData(f,m)),u.push(m)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function uNe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const wL=9,EL=32;function cNe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(CL(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(CL(e.slice(i),i>0,!1)),o.join("")}function CL(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===wL||o===EL;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===wL||o===EL;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function fNe(t,e){const n={type:"text",value:cNe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function dNe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const v4={blockquote:HAe,break:VAe,code:qAe,delete:jAe,emphasis:GAe,footnoteReference:YAe,heading:WAe,html:KAe,imageReference:XAe,image:ZAe,inlineCode:QAe,linkReference:JAe,link:eNe,listItem:tNe,list:rNe,paragraph:iNe,root:oNe,strong:aNe,table:sNe,tableCell:uNe,tableRow:lNe,text:fNe,thematicBreak:dNe,toml:zy,yaml:zy,definition:zy,footnoteDefinition:zy};function zy(){}function hNe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function pNe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function mNe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||hNe,r=t.options.footnoteBackLabel||pNe,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),f=String(u.identifier).toUpperCase(),d=Km(f.toLowerCase());let h=0;const m=[],v=t.footnoteCounts.get(f);for(;v!==void 0&&++h<=v;){m.length>0&&m.push({type:"text",value:" "});let C=typeof n=="string"?n:n(l,h);typeof C=="string"&&(C={type:"text",value:C}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const b=c[c.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const C=b.children[b.children.length-1];C&&C.type==="text"?C.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...m)}else c.push(...m);const x={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:t.wrap(c,!0)};t.patch(u,x),s.push(x)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Em(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(s,!0)},{type:"text",value:`
`}]}}const b4={}.hasOwnProperty,gNe={};function vNe(t,e){const n=e||gNe,r=new Map,i=new Map,o=new Map,a={...v4,...n.handlers},s={all:u,applyData:yNe,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:l,options:n,patch:bNe,wrap:wNe};return bf(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),s;function l(c,f){const d=c.type,h=s.handlers[d];if(b4.call(s.handlers,d)&&h)return h(s,c,f);if(s.options.passThrough&&s.options.passThrough.includes(d)){if("children"in c){const{children:v,...b}=c,x=Em(b);return x.children=s.all(c),x}return Em(c)}return(s.options.unknownHandler||xNe)(s,c,f)}function u(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const m=s.one(d[h],c);if(m){if(h&&d[h-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=SL(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=SL(v.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function bNe(t,e){t.position&&(e.position=BW(t))}function yNe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,Em(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function xNe(t,e){const n=e.data||{},r="value"in e&&!(b4.call(n,"hProperties")||b4.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function wNe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function SL(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function TL(t,e){const n=vNe(t,e),r=n.one(t,void 0),i=mNe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function dX(t,e){return t&&"run"in t?async function(n,r){const i=TL(n,{file:r,...e});await t.run(i,r)}:function(n,r){return TL(n,{file:r,...t||e})}}const ENe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],CNe=/["&'<>`]/g,SNe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TNe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,ANe=/[|\\{}()[\]^$+*?.]/g,AL=new WeakMap;function NNe(t,e){if(t=t.replace(e.subset?DNe(e.subset):CNe,r),e.subset||e.escapeOnly)return t;return t.replace(SNe,n).replace(TNe,r);function n(i,o,a){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,a.charCodeAt(o+2),e)}function r(i,o,a){return e.format(i.charCodeAt(0),a.charCodeAt(o+1),e)}}function DNe(t){let e=AL.get(t);return e||(e=MNe(t),AL.set(t,e)),e}function MNe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(ANe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const kNe=/[\dA-Fa-f]/;function _Ne(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!kNe.test(String.fromCharCode(e))?r:r+";"}const ONe=/\d/;function INe(t,e,n){const r="&#"+String(t);return n&&e&&!ONe.test(String.fromCharCode(e))?r:r+";"}const RNe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],XN={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},BNe=["cent","copy","divide","gt","lt","not","para","times"],hX={}.hasOwnProperty,y4={};let Uy;for(Uy in XN)hX.call(XN,Uy)&&(y4[XN[Uy]]=Uy);const LNe=/[^\dA-Za-z]/;function FNe(t,e,n,r){const i=String.fromCharCode(t);if(hX.call(y4,i)){const o=y4[i],a="&"+o;return n&&RNe.includes(o)&&!BNe.includes(o)&&(!r||e&&e!==61&&LNe.test(String.fromCharCode(e)))?a:a+";"}return""}function PNe(t,e,n){let r=_Ne(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=FNe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const o=INe(t,e,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Jp(t,e){return NNe(t,Object.assign({format:PNe},e))}const $Ne=/^>|^->|<!--|-->|--!>|<!-$/g,zNe=[">"],UNe=["<",">"];function HNe(t,e,n,r){return r.settings.bogusComments?"<?"+Jp(t.value,Object.assign({},r.settings.characterReferences,{subset:zNe}))+">":"<!--"+t.value.replace($Ne,i)+"-->";function i(o){return Jp(o,Object.assign({},r.settings.characterReferences,{subset:UNe}))}}function VNe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const fi=mX(1),pX=mX(-1),qNe=[];function mX(t){return e;function e(n,r,i){const o=n?n.children:qNe;let a=(r||0)+t,s=o[a];if(!i)for(;s&&Ym(s);)a+=t,s=o[a];return s}}const jNe={}.hasOwnProperty;function gX(t){return e;function e(n,r,i){return jNe.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const p_=gX({body:YNe,caption:ZN,colgroup:ZN,dd:ZNe,dt:XNe,head:ZN,html:GNe,li:KNe,optgroup:QNe,option:JNe,p:WNe,rp:NL,rt:NL,tbody:t3e,td:DL,tfoot:n3e,th:DL,thead:e3e,tr:r3e});function ZN(t,e,n){const r=fi(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Ym(r.value.charAt(0)))}function GNe(t,e,n){const r=fi(n,e);return!r||r.type!=="comment"}function YNe(t,e,n){const r=fi(n,e);return!r||r.type!=="comment"}function WNe(t,e,n){const r=fi(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function KNe(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&r.tagName==="li"}function XNe(t,e,n){const r=fi(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function ZNe(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function NL(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function QNe(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function JNe(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function e3e(t,e,n){const r=fi(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function t3e(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function n3e(t,e,n){return!fi(n,e)}function r3e(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function DL(t,e,n){const r=fi(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const i3e=gX({body:s3e,colgroup:l3e,head:a3e,html:o3e,tbody:u3e});function o3e(t){const e=fi(t,-1);return!e||e.type!=="comment"}function a3e(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function s3e(t){const e=fi(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Ym(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function l3e(t,e,n){const r=pX(n,e),i=fi(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&p_(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function u3e(t,e,n){const r=pX(n,e),i=fi(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&p_(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Hy={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function c3e(t,e,n,r){const i=r.schema,o=i.space==="svg"?!1:r.settings.omitOptionalTags;let a=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const s=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=Of);const u=f3e(r,t.properties),c=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,c&&(a=!1),(u||!o||!i3e(t,e,n))&&(s.push("<",t.tagName,u?" "+u:""),a&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=u.charAt(u.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&s.push(" "),s.push("/")),s.push(">")),s.push(c),!a&&(!o||!p_(t,e,n))&&s.push("</"+t.tagName+">"),s.join("")}function f3e(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const o=d3e(t,i,e[i]);o&&n.push(o)}}for(;++r<n.length;){const o=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function d3e(t,e,n){const r=KE(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,o=t.settings.allowDangerousCharacters?0:1;let a=t.quote,s;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Jp(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Hy.name[i][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?zY:UY)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(s=Jp(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Hy.unquoted[i][o]}))),s!==n&&(t.settings.quoteSmart&&Px(n,a)>Px(n,t.alternative)&&(a=t.alternative),s=a+Jp(n,Object.assign({},t.settings.characterReferences,{subset:(a==="'"?Hy.single:Hy.double)[i][o],attribute:!0}))+a),l+(s&&"="+s))}const h3e=["<","&"];function vX(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Jp(t.value,Object.assign({},r.settings.characterReferences,{subset:h3e}))}function p3e(t,e,n,r){return r.settings.allowDangerousHtml?t.value:vX(t,e,n,r)}function m3e(t,e,n,r){return r.all(t)}const g3e=eK("type",{invalid:v3e,unknown:b3e,handlers:{comment:HNe,doctype:VNe,element:c3e,raw:p3e,root:m3e,text:vX}});function v3e(t){throw new Error("Expected node, not `"+t+"`")}function b3e(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const y3e={},x3e={},w3e=[];function E3e(t,e){const n=e||y3e,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:C3e,all:S3e,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||ENe,characterReferences:n.characterReferences||x3e,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Of:dv,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function C3e(t,e,n){return g3e(t,e,n,this)}function S3e(t){const e=[],n=t&&t.children||w3e;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function T3e(t){const e=this,n={...e.data("settings"),...t};e.compiler=r;function r(i){return E3e(i,n)}}var A3e=Object.defineProperty,N3e=(t,e,n)=>e in t?A3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e,n)=>N3e(t,typeof e!="symbol"?e+"":e,n);function D3e(t,e,n,r="before"){const i=typeof n=="string"?n:n.id,o=Kr(t),a=e.map(u=>mh(u,o)),s=Mo(i,t.doc);if(!s)throw new Error(`Block with ID ${i} not found`);let l=s.posBeforeNode;return r==="after"&&(l+=s.node.nodeSize),t.step(new ri(l,l,new ot(Ue.from(a),0,0))),a.map(u=>Ir(u,o))}function x4(t){if(!t||t.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");const e=t.firstChild;if(!e)throw new Error("Invalid column: does not have child node.");const n=e.firstChild;if(!n)throw new Error("Invalid blockContainer: does not have child node.");return t.childCount===1&&e.childCount===1&&n.type.name==="paragraph"&&n.content.content.length===0}function M3e(t,e){const n=t.doc.resolve(e),r=n.nodeAfter;if(!r||r.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");for(let i=r.childCount-1;i>=0;i--){const o=t.doc.resolve(n.pos+1).posAtIndex(i),a=t.doc.resolve(o).nodeAfter;if(!a||a.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");x4(a)&&t.delete(o,o+a.nodeSize)}}function w4(t,e){M3e(t,e);const n=t.doc.resolve(e).nodeAfter;if(!n||n.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");if(n.childCount>2)return;if(n.childCount<2)throw new Error("Invalid columnList: contains fewer than two children.");const r=e+1,i=t.doc.resolve(r).nodeAfter,o=e+n.nodeSize-1,a=t.doc.resolve(o).nodeBefore;if(!i||!a)throw new Error("Invalid columnList: does not contain children.");const s=x4(i),l=x4(a);if(s&&l){t.delete(e,e+n.nodeSize);return}if(s){t.step(new Yr(e,e+n.nodeSize,o-a.nodeSize+1,o-1,ot.empty,0,!1));return}if(l){t.step(new Yr(e,e+n.nodeSize,r+1,r+i.nodeSize-1,ot.empty,0,!1));return}}function ML(t,e,n){const r=Kr(t),i=n.map(c=>mh(c,r)),o=new Set(e.map(c=>typeof c=="string"?c:c.id)),a=[],s=new Set,l=typeof e[0]=="string"?e[0]:e[0].id;let u=0;if(t.doc.descendants((c,f)=>{if(o.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!o.has(c.attrs.id))return!0;if(a.push(Ir(c,r)),o.delete(c.attrs.id),n.length>0&&c.attrs.id===l){const v=t.doc.nodeSize;t.insert(f,i);const b=t.doc.nodeSize;u+=v-b}const d=t.doc.nodeSize,h=t.doc.resolve(f-u);h.node().type.name==="column"?s.add(h.before(-1)):h.node().type.name==="columnList"&&s.add(h.before()),h.node().type.name==="blockGroup"&&h.node(h.depth-1).type.name!=="doc"&&h.node().childCount===1?t.delete(h.before(),h.after()):t.delete(f-u,f-u+c.nodeSize);const m=t.doc.nodeSize;return u+=d-m,!1}),o.size>0){const c=[...o].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return s.forEach(c=>w4(t,c)),{insertedBlocks:i.map(c=>Ir(c,r)),removedBlocks:a}}function k3e(t,e,n,r,i){let o;if(e)if(typeof e=="string")o=Ws([e],t.pmSchema,r);else if(Array.isArray(e))o=Ws(e,t.pmSchema,r);else if(e.type==="tableContent")o=VE(e,t.pmSchema);else throw new Pl(e.type);else throw new Error("blockContent is required");const a=(i?.document??document).createDocumentFragment();for(const s of o)if(s.type.name!=="text"&&t.schema.inlineContentSchema[s.type.name]){const l=t.schema.inlineContentSpecs[s.type.name].implementation;if(l){const u=bk(s,t.schema.inlineContentSchema,t.schema.styleSchema),c=l.render.call({renderType:"dom",props:void 0},u,()=>{},t);if(c){if(a.appendChild(c.dom),c.contentDOM){const f=n.serializeFragment(s.content,i);c.contentDOM.dataset.editable="",c.contentDOM.appendChild(f)}continue}}}else if(s.type.name==="text"){let l=document.createTextNode(s.textContent);for(const u of s.marks.toReversed())if(u.type.name in t.schema.styleSpecs){const c=t.schema.styleSpecs[u.type.name].implementation.render(u.attrs.stringValue,t);c.contentDOM.appendChild(l),l=c.dom}else{const c=u.type.spec.toDOM(u,!0),f=Aa.renderSpec(document,c);f.contentDOM.appendChild(l),l=f.dom}a.appendChild(l)}else{const l=n.serializeFragment(Ue.from([s]),i);a.appendChild(l)}return a}function _3e(t,e,n,r){var i,o,a,s,l;const u=t.pmSchema.nodes.blockContainer,c=e.props||{};for(const[m,v]of Object.entries(t.schema.blockSchema[e.type].propSchema))!(m in c)&&v.default!==void 0&&(c[m]=v.default);const f=e.children||[],d=t.blockImplementations[e.type].implementation.render.call({renderType:"dom",props:void 0},{...e,props:c,children:f},t);if(d.contentDOM&&e.content){const m=k3e(t,e.content,n,e.type,r);d.contentDOM.appendChild(m)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const m=bX(t,e.children,n,r);(i=d.contentDOM)==null||i.append(m)}return d.dom}const h=(a=(o=u.spec)==null?void 0:o.toDOM)==null?void 0:a.call(o,u.create({id:e.id,...c}));return(s=h.contentDOM)==null||s.appendChild(d.dom),e.children&&e.children.length>0&&((l=h.contentDOM)==null||l.appendChild(yX(t,e.children,n,r))),h.dom}function bX(t,e,n,r){const i=(r?.document??document).createDocumentFragment();for(const o of e){const a=_3e(t,o,n,r);i.appendChild(a)}return i}const yX=(t,e,n,r)=>{var i;const o=t.pmSchema.nodes.blockGroup,a=o.spec.toDOM(o.create({})),s=bX(t,e,n,r);return(i=a.contentDOM)==null||i.appendChild(s),a.dom},O3e=(t,e)=>{const n=Aa.fromSchema(t);return{serializeBlocks:(r,i)=>yX(e,r,n,i).outerHTML}};function I3e(t){return t.transact(e=>{const n=gf(e.doc,e.selection.anchor);if(e.selection instanceof Qn)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof Et)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=gf(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function R3e(t,e){var n,r;const i=(n=Mo(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let o;if(e.type==="cell")o=Qn.create(t.doc,i+e.anchorCellOffset,i+e.headCellOffset);else if(e.type==="node")o=Et.create(t.doc,i+1);else{const a=(r=Mo(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(a===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);o=bt.create(t.doc,i+e.anchorOffset,a+e.headOffset)}t.setSelection(o)}function E4(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>E4(n.children)).flat():{...e,children:E4(e.children)}).flat()}function xX(t,e,n){t.transact(r=>{var i;const o=((i=t.getSelection())==null?void 0:i.blocks)||[t.getTextCursorPosition().block],a=I3e(t);t.removeBlocks(o),t.insertBlocks(E4(o),e,n),R3e(r,a)})}function wX(t){return!t||t.type!=="columnList"}function EX(t,e,n){let r,i;if(e?e.children.length>0?(r=e.children[e.children.length-1],i="after"):(r=e,i="before"):n&&(r=n,i="before"),!r||!i)return;const o=t.getParentBlock(r);return wX(o)?{referenceBlock:r,placement:i}:EX(t,i==="after"?r:t.getPrevBlock(r),o)}function CX(t,e,n){let r,i;if(e?e.children.length>0?(r=e.children[0],i="before"):(r=e,i="after"):n&&(r=n,i="after"),!r||!i)return;const o=t.getParentBlock(r);return wX(o)?{referenceBlock:r,placement:i}:CX(t,i==="before"?r:t.getNextBlock(r),o)}function B3e(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[0]||t.getTextCursorPosition().block,r=EX(t,t.getPrevBlock(n),t.getParentBlock(n));r&&xX(t,r.referenceBlock,r.placement)})}function L3e(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[e?.blocks.length-1]||t.getTextCursorPosition().block,r=CX(t,t.getNextBlock(n),t.getParentBlock(n));r&&xX(t,r.referenceBlock,r.placement)})}function F3e(t,e,n){const{$from:r,$to:i}=t.selection,o=r.blockRange(i,h=>h.childCount>0&&(h.type.name==="blockGroup"||h.type.name==="column"));if(!o)return!1;const a=o.startIndex;if(a===0)return!1;const s=o.parent.child(a-1);if(s.type!==e)return!1;const l=s.lastChild&&s.lastChild.type===n,u=Ue.from(l?e.create():null),c=new ot(Ue.from(e.create(null,Ue.from(n.create(null,u)))),l?3:1,0),f=o.start,d=o.end;return t.step(new Yr(f-(l?3:1),d,f,d,c,1,!0)).scrollIntoView(),!0}function SX(t){return t.transact(e=>F3e(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function P3e(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function $3e(t){return t.transact(e=>{const{bnBlock:n}=uv(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function z3e(t){return t.transact(e=>{const{bnBlock:n}=uv(e);return e.doc.resolve(n.beforePos).depth>1})}function U3e(t,e){const n=typeof e=="string"?e:e.id,r=Kr(t),i=Mo(n,t);if(i)return Ir(i.node,r)}function H3e(t,e){const n=typeof e=="string"?e:e.id,r=Mo(n,t),i=Kr(t);if(!r)return;const o=t.resolve(r.posBeforeNode).nodeBefore;if(o)return Ir(o,i)}function V3e(t,e){const n=typeof e=="string"?e:e.id,r=Mo(n,t),i=Kr(t);if(!r)return;const o=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(o)return Ir(o,i)}function q3e(t,e){const n=typeof e=="string"?e:e.id,r=Kr(t),i=Mo(n,t);if(!i)return;const o=t.resolve(i.posBeforeNode),a=o.node(),s=o.node(-1),l=s.type.name!=="doc"?a.type.name==="blockGroup"?s:a:void 0;if(l)return Ir(l,r)}let j3e=class{constructor(e){this.editor=e}get document(){return this.editor.transact(e=>xpe(e.doc,this.editor.pmSchema))}getBlock(e){return this.editor.transact(n=>U3e(n.doc,e))}getPrevBlock(e){return this.editor.transact(n=>H3e(n.doc,e))}getNextBlock(e){return this.editor.transact(n=>V3e(n.doc,e))}getParentBlock(e){return this.editor.transact(n=>q3e(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function i(o){for(const a of o){if(e(a)===!1)return!1;const s=n?a.children.slice().reverse():a.children;if(!i(s))return!1}return!0}i(r)}insertBlocks(e,n,r="before"){return this.editor.transact(i=>D3e(i,e,n,r))}updateBlock(e,n){return this.editor.transact(r=>rge(r,e,n))}removeBlocks(e){return this.editor.transact(n=>ML(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.editor.transact(r=>ML(r,e,n))}canNestBlock(){return $3e(this.editor)}nestBlock(){SX(this.editor)}canUnnestBlock(){return z3e(this.editor)}unnestBlock(){P3e(this.editor)}moveBlocksUp(){return B3e(this.editor)}moveBlocksDown(){return L3e(this.editor)}},G3e=class extends r_{constructor(e){super(),this.editor=e,e.on("create",()=>{e._tiptapEditor.on("update",({transaction:n,appendedTransactions:r})=>{this.emit("onChange",{editor:e,transaction:n,appendedTransactions:r})}),e._tiptapEditor.on("selectionUpdate",({transaction:n})=>{this.emit("onSelectionChange",{editor:e,transaction:n})}),e._tiptapEditor.on("mount",()=>{this.emit("onMount",{editor:e})}),e._tiptapEditor.on("unmount",()=>{this.emit("onUnmount",{editor:e})})})}onChange(e,n=!0){const r=({transaction:i,appendedTransactions:o})=>{!n&&kL(i)||e(this.editor,{getChanges(){return PK(i,o)}})};return this.on("onChange",r),()=>{this.off("onChange",r)}}onSelectionChange(e,n=!1){const r=i=>{!n&&kL(i.transaction)||e(this.editor)};return this.on("onSelectionChange",r),()=>{this.off("onSelectionChange",r)}}onMount(e){return this.on("onMount",e),()=>{this.off("onMount",e)}}onUnmount(e){return this.on("onUnmount",e),()=>{this.off("onUnmount",e)}}};function kL(t){return!!t.getMeta("y-sync$")}function Y3e(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function W3e(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function K3e(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=Y3e(e),r=e.parentElement,i=Array.from(r.childNodes).slice(n+1);e.remove(),i.forEach(o=>{o.remove()}),r.insertAdjacentElement("afterend",e),i.reverse().forEach(o=>{if(W3e(o))return;const a=document.createElement("li");a.append(o),e.insertAdjacentElement("afterend",a)}),r.childNodes.length===0&&r.remove()})}function X3e(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const i=e.previousElementSibling,o=document.createElement("div");i.insertAdjacentElement("afterend",o),o.append(i);const a=document.createElement("div");for(a.setAttribute("data-node-type","blockGroup"),o.append(a);((n=o.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=o.nextElementSibling)==null?void 0:r.nodeName)==="OL";)a.append(o.nextElementSibling)})}let _L=null;function Z3e(){return _L||(_L=document.implementation.createHTMLDocument("title"))}function Q3e(t){if(typeof t=="string"){const e=Z3e().createElement("div");e.innerHTML=t,t=e}return K3e(t),X3e(t),t}function TX(t,e){const n=Q3e(t),r=$s.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),i=[];for(let o=0;o<r.childCount;o++)i.push(Ir(r.child(o),e));return i}function J3e(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function eDe(t,e){var n;const r=String(e?.url||""),i=e!=null&&e.title?String(e.title):void 0;let o={type:"element",tagName:"video",properties:{src:r,"data-name":i,"data-url":r,controls:!0},children:[]};return(n=t.patch)==null||n.call(t,e,o),o=t.applyData?t.applyData(e,o):o,o}function AX(t){return t_().use(uX).use(OK).use(dX,{handlers:{...v4,image:(e,n)=>{const r=String(n?.url||"");return G0e(r)?eDe(e,n):v4.image(e,n)},code:J3e,blockquote:(e,n)=>{const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!1)};return e.patch(n,r),e.applyData(n,r)}}}).use(T3e).processSync(t).value}function tDe(t,e){const n=AX(t);return TX(n,e)}let nDe=class{constructor(e){this.editor=e}blocksToHTMLLossy(e=this.editor.document){return sC(this.editor.pmSchema,this.editor).exportBlocks(e,{})}blocksToFullHTML(e=this.editor.document){return O3e(this.editor.pmSchema,this.editor).serializeBlocks(e,{})}tryParseHTMLToBlocks(e){return TX(e,this.editor.pmSchema)}blocksToMarkdownLossy(e=this.editor.document){return aTe(e,this.editor.pmSchema,this.editor,{})}tryParseMarkdownToBlocks(e){return tDe(e,this.editor.pmSchema)}pasteHTML(e,n=!1){var r;let i=e;if(!n){const o=this.tryParseHTMLToBlocks(e);i=this.blocksToFullHTML(o)}i&&((r=this.editor.prosemirrorView)==null||r.pasteHTML(i))}pasteText(e){var n;return(n=this.editor.prosemirrorView)==null?void 0:n.pasteText(e)}pasteMarkdown(e){const n=AX(e);return this.pasteHTML(n)}};const m_=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function rDe(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function iDe(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function OL(t,e,n,r="after"){let i;return Array.isArray(e.content)&&e.content.length===0?i=t.updateBlock(e,n).id:i=t.insertBlocks([n],e,r)[0].id,i}async function NX(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let i=null;for(const a of m_)if(r.types.includes(a)){i=a;break}if(i!=="Files")return;const o=r.items;if(o){t.preventDefault();for(let a=0;a<o.length;a++){let s="file";for(const u of Object.values(e.schema.blockSpecs))for(const c of((n=u.implementation.meta)==null?void 0:n.fileBlockAccept)||[]){const f=c.startsWith("."),d=o[a].getAsFile();if(d&&(!f&&d.type&&iDe(o[a].type,c)||f&&rDe("."+d.name.split(".").pop(),c))){s=u.config.type;break}}const l=o[a].getAsFile();if(l){const u={type:s,props:{name:l.name}};let c;if(t.type==="paste"){const h=e.getTextCursorPosition().block;c=OL(e,h,u)}else if(t.type==="drop"){const h={left:t.clientX,top:t.clientY},m=e.prosemirrorView.posAtCoords(h);if(!m)return;c=e.transact(v=>{var b;const x=gf(v.doc,m.pos),C=(b=e.domElement)==null?void 0:b.querySelector(`[data-id="${x.node.attrs.id}"]`),w=C?.getBoundingClientRect();return OL(e,e.getBlock(x.node.attrs.id),u,w&&(w.top+w.bottom)/2>h.top?"before":"after")})}else return;const f=await e.uploadFile(l,c),d=typeof f=="string"?{props:{url:f}}:{...f};e.updateBlock(c,d)}}}}const oDe=t=>Gn.create({name:"dropFile",addProseMirrorPlugins(){return[new Wt({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const i of m_)if(n.dataTransfer.types.includes(i)){r=i;break}return r===null?!0:r==="Files"?(NX(n,t),!0):!1}}}})]}}),aDe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,sDe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,lDe=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,uDe=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,cDe=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,fDe=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,dDe=/\n{2} {0,3}-{2,48}\n{2}/,hDe=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,pDe=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,mDe=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,gDe=/^\s*\|(.+\|)+\s*$/m,vDe=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,bDe=/^\s*\|(.+\|)+\s*$/m,yDe=t=>aDe.test(t)||sDe.test(t)||lDe.test(t)||uDe.test(t)||cDe.test(t)||fDe.test(t)||dDe.test(t)||hDe.test(t)||pDe.test(t)||mDe.test(t)||gDe.test(t)||vDe.test(t)||bDe.test(t);async function xDe(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const i=t.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,a=o?.mode;return a?(e.pasteHTML(`<pre><code class="language-${a}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function wDe({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var i;if(e.transact(s=>s.selection.$from.parent.type.spec.code&&s.selection.$to.parent.type.spec.code)){const s=(i=t.clipboardData)==null?void 0:i.getData("text/plain");if(s)return e.pasteText(s),!0}let o;for(const s of m_)if(t.clipboardData.types.includes(s)){o=s;break}if(!o)return!0;if(o==="vscode-editor-data")return xDe(t,e.prosemirrorView),!0;if(o==="Files")return NX(t,e),!0;const a=t.clipboardData.getData(o);if(o==="blocknote/html")return e.pasteHTML(a,!0),!0;if(o==="text/markdown")return e.pasteMarkdown(a),!0;if(n){const s=t.clipboardData.getData("text/plain");if(yDe(s))return e.pasteMarkdown(s),!0}return o==="text/html"?(e.pasteHTML(a),!0):r?(e.pasteMarkdown(a),!0):(e.pasteText(a),!0)}const EDe=(t,e)=>Gn.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new Wt({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:i=!0,plainTextAsMarkdown:o=!0}={})=>wDe({event:r,editor:t,prioritizeMarkdownOverHTML:i,plainTextAsMarkdown:o})})}}}})]}});function CDe(t,e,n){var r;let i=!1;const o=t.state.selection instanceof Qn;if(!o){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,u=[];for(let c=0;c<l.childCount;c++)u.push(l.child(c));i=u.find(c=>c.type.isInGroup("bnBlock")||c.type.name==="blockGroup"||c.type.spec.group==="blockContent")===void 0,i&&(e=l)}let a;const s=sC(t.state.schema,n);if(o){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=WG(e,n.schema.inlineContentSchema,n.schema.styleSchema);a=`<table>${s.exportInlineContent(l,{})}</table>`}else if(i){const l=HE(e,n.schema.inlineContentSchema,n.schema.styleSchema);a=s.exportInlineContent(l,{})}else{const l=qK(e);a=s.exportBlocks(l,{})}return a}function DX(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(a=>a.setSelection(new Et(a.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,i=CDe(t,r,e),o=n_(i);return{clipboardHTML:n,externalHTML:i,markdown:o}}const IL=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},RL=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:i,markdown:o}=DX(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",i),n.clipboardData.setData("text/plain",o)},SDe=t=>Gn.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new Wt({props:{handleDOMEvents:{copy(e,n){return IL()||RL(t,e,n),!0},cut(e,n){return IL()||(RL(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(a=>a.setSelection(new Et(a.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:i,markdown:o}=DX(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",i),n.dataTransfer.setData("text/plain",o),!0}}}})]}}),TDe=Gn.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{backgroundColor:age()}}]}}),ADe=tl.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Na(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),C4=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const i=n.posAtIndex(r-1);return UE(t.resolve(i))},MX=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=UE(t.resolve(r))}return e},NDe=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",DDe=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const i=t.doc.resolve(r.childContainer.beforePos+1),o=t.doc.resolve(r.childContainer.afterPos-1),a=i.blockRange(o);if(e){const s=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(a,s.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},BL=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),i=UE(r),o=C4(e.doc,i.bnBlock.beforePos);if(!o)return!1;const a=MX(e.doc,o);return NDe(a,i)?DDe(e,n,a,i):!1},MDe=Gn.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:i})=>[()=>i.deleteSelection(),()=>i.undoInputRule(),()=>i.command(({state:o})=>{const a=Vo(o);if(!a.isBlockContainer)return!1;const s=o.selection.from===a.blockContent.beforePos+1,l=a.blockContent.node.type.name==="paragraph";return s&&!l?i.command(tge(a.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>i.command(({state:o})=>{const a=Vo(o);if(!a.isBlockContainer)return!1;const{blockContent:s}=a;return o.selection.from===s.beforePos+1?i.liftListItem("blockContainer"):!1}),()=>i.command(({state:o})=>{const a=Vo(o);if(!a.isBlockContainer)return!1;const{bnBlock:s,blockContent:l}=a,u=o.selection.from===l.beforePos+1,c=o.selection.empty,f=s.beforePos;return u&&c?r().command(BL(f)).scrollIntoView().run():!1}),()=>i.command(({state:o,tr:a,dispatch:s})=>{const l=Vo(o);if(!l.isBlockContainer||a.selection.from!==l.blockContent.beforePos+1)return!1;const u=a.doc.resolve(l.bnBlock.beforePos);if(u.nodeBefore||u.node().type.name!=="column")return!1;const c=a.doc.resolve(l.bnBlock.beforePos),f=a.doc.resolve(c.before()),d=f.before();if(s){const h=a.doc.slice(l.bnBlock.beforePos,l.bnBlock.afterPos).content;a.delete(l.bnBlock.beforePos,l.bnBlock.afterPos),f.index()===0?(w4(a,d),a.insert(d,h),a.setSelection(bt.near(a.doc.resolve(d)))):(a.insert(f.pos-1,h),a.setSelection(bt.near(a.doc.resolve(f.pos-1))),w4(a,d))}return!0}),()=>i.command(({state:o})=>{const a=Vo(o);if(!a.isBlockContainer)return!1;if(a.blockContent.node.childCount===0&&a.blockContent.node.type.spec.content==="inline*"){const s=C4(o.doc,a.bnBlock.beforePos);if(!s||!s.isBlockContainer)return!1;let l=r();if(s.blockContent.node.type.spec.content==="tableRow+"){const u=a.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(u)}else if(s.blockContent.node.type.spec.content===""){const u=s.blockContent.afterPos-s.blockContent.node.nodeSize;l=l.setNodeSelection(u)}else{const u=s.blockContent.afterPos-s.blockContent.node.nodeSize;l=l.setTextSelection(u)}return l.deleteRange({from:a.bnBlock.beforePos,to:a.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>i.command(({state:o})=>{const a=Vo(o);if(!a.isBlockContainer)throw new Error("todo");const s=o.selection.from===a.blockContent.beforePos+1,l=o.selection.empty,u=C4(o.doc,a.bnBlock.beforePos);if(u&&s&&l){const c=MX(o.doc,u);if(!c.isBlockContainer)throw new Error("todo");if(c.blockContent.node.type.spec.content===""||c.blockContent.node.type.spec.content==="inline*"&&c.blockContent.node.childCount===0)return r().cut({from:a.bnBlock.beforePos,to:a.bnBlock.afterPos},c.bnBlock.afterPos).deleteRange({from:c.bnBlock.beforePos,to:c.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:i})=>{const o=Vo(i);if(!o.isBlockContainer)return!1;const{bnBlock:a,blockContent:s,childContainer:l}=o,{depth:u}=i.doc.resolve(a.beforePos),c=a.afterPos===i.doc.nodeSize-3,f=i.selection.from===s.afterPos-1,d=i.selection.empty;if(!c&&f&&d&&l===void 0){let h=u,m=a.afterPos+1,v=i.doc.resolve(m).depth;for(;v<h;)h=v,m+=2,v=i.doc.resolve(m).depth;return r.command(BL(m-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:i,tr:o})=>[()=>i.command(({state:a})=>{const s=Vo(a);if(!s.isBlockContainer)return!1;const{bnBlock:l,blockContent:u}=s,{depth:c}=a.doc.resolve(l.beforePos),f=a.selection.$anchor.parentOffset===0,d=a.selection.anchor===a.selection.head,h=u.node.childCount===0,m=c>1;return f&&d&&h&&m?i.liftListItem("blockContainer"):!1}),()=>i.command(({state:a})=>{var s;const l=Vo(a),u=((s=this.options.editor.schema.blockSchema[l.blockNoteType].meta)==null?void 0:s.hardBreakShortcut)??"shift+enter";if(u==="none")return!1;if(u==="shift+enter"&&r||u==="enter"){const c=o.storedMarks||o.selection.$head.marks().filter(f=>this.editor.extensionManager.splittableMarks.includes(f.type.name));return o.insert(o.selection.head,o.doc.type.schema.nodes.hardBreak.create()).ensureMarks(c),!0}return!1}),()=>i.command(({state:a,dispatch:s})=>{const l=Vo(a);if(!l.isBlockContainer)return!1;const{bnBlock:u,blockContent:c}=l,f=a.selection.$anchor.parentOffset===0,d=a.selection.anchor===a.selection.head,h=c.node.childCount===0;if(f&&d&&h){const m=u.afterPos,v=m+2;if(s){const b=a.schema.nodes.blockContainer.createAndFill();a.tr.insert(m,b).scrollIntoView(),a.tr.setSelection(new bt(a.doc.resolve(v)))}return!0}return!1}),()=>i.command(({state:a,chain:s})=>{const l=Vo(a);if(!l.isBlockContainer)return!1;const{blockContent:u}=l,c=a.selection.$anchor.parentOffset===0;return u.node.childCount===0?!1:(s().deleteSelection().command(Bge(a.selection.from,c,c)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.getExtension(xf))!=null&&r.store.state||((i=this.options.editor.getExtension(Ls))==null?void 0:i.store.state)!==void 0)?!1:SX(this.options.editor)},"Shift-Tab":()=>{var r,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.getExtension(xf))!=null&&r.store.state||((i=this.options.editor.getExtension(Ls))==null?void 0:i.store.state)!==void 0)?!1:this.editor.commands.liftListItem("blockContainer")},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}}),kDe=ys.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),_De=ys.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),ODe=ys.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}}),IDe=Gn.create({name:"textAlignment",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),RDe=Gn.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["table","tableCell","tableHeader"],attributes:{textColor:sge()}}]}}),BDe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},LDe=tl.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(BDe))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[o,a]of Object.entries(t))o!=="class"&&n.setAttribute(o,a);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},i=document.createElement("div");i.className=$r("bn-block",r.class),i.setAttribute("data-node-type",this.name);for(const[o,a]of Object.entries(r))o!=="class"&&i.setAttribute(o,a);return n.appendChild(i),{dom:n,contentDOM:i}}}),FDe=tl.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=$r("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[i,o]of Object.entries(n))i!=="class"&&r.setAttribute(i,o);return{dom:r,contentDOM:r}}}),PDe=tl.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),$De=Fn(({options:t})=>({key:"collaboration",blockNoteExtensions:[jSe(t),s4(t),F2(t),P2(),WSe(t)]}));let LL=!1;function zDe(t,e){const n=[_p.ClipboardTextSerializer,_p.Commands,_p.Editable,_p.FocusEvents,_p.Tabindex,$Te,zE.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),ADe,fAe,kDe,_De,ODe,cAe.extend({inclusive:!1}).configure({defaultProtocol:HK,protocols:LL?[]:UK}),...Object.values(t.schema.styleSpecs).map(r=>r.implementation.mark.configure({editor:t})),RDe,TDe,IDe,Gn.create({name:"OverrideEscape",addKeyboardShortcuts:()=>({Escape:()=>{var r;return(r=t.getExtension(fs))!=null&&r.shown()?!1:(t.blur(),!0)}})}),PDe,LDe.configure({editor:t,domAttributes:e.domAttributes}),MDe.configure({editor:t,tabBehavior:e.tabBehavior}),FDe.configure({domAttributes:e.domAttributes}),...Object.values(t.schema.inlineContentSpecs).filter(r=>r.config!=="link"&&r.config!=="text").map(r=>r.implementation.node.configure({editor:t})),...Object.values(t.schema.blockSpecs).flatMap(r=>[..."node"in r.implementation?[r.implementation.node.configure({editor:t,domAttributes:e.domAttributes})]:[]]),SDe(t),EDe(t,e.pasteHandler||(r=>r.defaultPasteHandler())),oDe(t)];return LL=!0,n}function UDe(t,e){const n=[$K(),KSe(e),Ls(e),xf(e),vv(e),QSe(),eTe(e),pw(e),Ks(e),fs(e),...e.trailingBlock!==!1?[gTe()]:[]];return e.collaboration?n.push($De(e.collaboration)):n.push(XSe()),"table"in t.schema.blockSpecs&&n.push(wr(e)),e.animations!==!1&&n.push(nTe()),n}class HDe{constructor(e,n){Rn(this,"disabledExtensions",new Set),Rn(this,"extensions",[]),Rn(this,"abortMap",new Map),Rn(this,"extensionFactories",new Map),Rn(this,"extensionPlugins",new Map),this.editor=e,this.options=n,e.onMount(()=>{for(const r of this.extensions)if(r.mount){const i=new window.AbortController,o=r.mount({dom:e.prosemirrorView.dom,root:e.prosemirrorView.root,signal:i.signal});o&&i.signal.addEventListener("abort",()=>{o()}),this.abortMap.set(r,i)}}),e.onUnmount(()=>{for(const[r,i]of this.abortMap.entries())this.abortMap.delete(r),i.abort()}),this.disabledExtensions=new Set(n.disableExtensions||[]);for(const r of UDe(this.editor,this.options))this.addExtension(r);for(const r of this.options.extensions??[])this.addExtension(r);for(const r of Object.values(this.editor.schema.blockSpecs))for(const i of r.extensions??[])this.addExtension(i)}registerExtension(e){var n;const r=[].concat(e).filter(Boolean);if(!r.length){console.warn("No extensions found to register",e);return}const i=r.map(a=>this.addExtension(a)).filter(Boolean),o=new Set;for(const a of i)a!=null&&a.tiptapExtensions&&console.warn(`Extension ${a.key} has tiptap extensions, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,a),(n=a?.inputRules)!=null&&n.length&&console.warn(`Extension ${a.key} has input rules, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,a),this.getProsemirrorPluginsFromExtension(a).plugins.forEach(s=>{o.add(s)});this.updatePlugins(a=>[...a,...o])}addExtension(e){let n;if(typeof e=="function"?n=e({editor:this.editor}):n=e,!(!n||this.disabledExtensions.has(n.key))){if(typeof e=="function"){const r=n[UD];typeof r=="function"&&this.extensionFactories.set(r,n)}if(this.extensions.push(n),n.blockNoteExtensions)for(const r of n.blockNoteExtensions)this.addExtension(r);return n}}resolveExtensions(e){const n=[];if(typeof e=="function"){const r=this.extensionFactories.get(e);r&&n.push(r)}else if(Array.isArray(e))for(const r of e)n.push(...this.resolveExtensions(r));else if(typeof e=="object"&&"key"in e)n.push(e);else if(typeof e=="string"){const r=this.extensions.find(i=>i.key===e);r&&n.push(r)}return n}unregisterExtension(e){var n;const r=this.resolveExtensions(e);if(!r.length){console.warn("No extensions found to unregister",e);return}let i=!1;const o=new Set;for(const a of r){this.extensions=this.extensions.filter(l=>l!==a),this.extensionFactories.forEach((l,u)=>{l===a&&this.extensionFactories.delete(u)}),(n=this.abortMap.get(a))==null||n.abort(),this.abortMap.delete(a);const s=this.extensionPlugins.get(a);s?.forEach(l=>{o.add(l)}),this.extensionPlugins.delete(a),a.tiptapExtensions&&!i&&(i=!0,console.warn(`Extension ${a.key} has tiptap extensions, but they will not be removed. Please separate the extension into multiple extensions if you want to remove them, or re-initialize the editor.`,e))}this.updatePlugins(a=>a.filter(s=>!o.has(s)))}updatePlugins(e){const n=this.editor.prosemirrorState,r=n.reconfigure({plugins:e(n.plugins.slice())});this.editor.prosemirrorView.updateState(r)}getTiptapExtensions(){var e;const n=zDe(this.editor,this.options).filter(o=>!this.disabledExtensions.has(o.name)),r=GK(this.extensions),i=new Map;for(const o of this.extensions){o.tiptapExtensions&&n.push(...o.tiptapExtensions);const a=r(o.key),{plugins:s,inputRules:l}=this.getProsemirrorPluginsFromExtension(o);s.length&&n.push(Gn.create({name:o.key,priority:a,addProseMirrorPlugins:()=>s})),l.length&&(i.has(a)||i.set(a,[]),i.get(a).push(...l))}n.push(Gn.create({name:"blocknote-input-rules",addProseMirrorPlugins(){const o=[];return Array.from(i.keys()).sort().reverse().forEach(a=>{o.push(...i.get(a))}),[_Te({rules:o})]}}));for(const o of((e=this.options._tiptapOptions)==null?void 0:e.extensions)??[])n.push(o);return n}getProsemirrorPluginsFromExtension(e){var n,r,i;const o=[...e.prosemirrorPlugins??[]],a=[];return!((n=e.prosemirrorPlugins)!=null&&n.length)&&!Object.keys(e.keyboardShortcuts||{}).length&&!((r=e.inputRules)!=null&&r.length)?{plugins:o,inputRules:a}:(this.extensionPlugins.set(e,o),(i=e.inputRules)!=null&&i.length&&a.push(...e.inputRules.map(s=>new yh(s.find,(l,u,c,f)=>{const d=s.replace({match:u,range:{from:c,to:f},editor:this.editor});if(d){const h=this.editor.getTextCursorPosition();if(this.editor.schema.blockSchema[h.block.type].content!=="inline")return null;const m=uv(l.tr),v=l.tr.deleteRange(c,f);return jE(v,m.bnBlock.beforePos,d),v}return null}))),Object.keys(e.keyboardShortcuts||{}).length&&o.push(fG(Object.fromEntries(Object.entries(e.keyboardShortcuts).map(([s,l])=>[s,()=>l({editor:this.editor})])))),{plugins:o,inputRules:a})}getExtensions(){return new Map(this.extensions.map(e=>[e.key,e]))}getExtension(e){if(typeof e=="string")return this.extensions.find(r=>r.key===e)||void 0;if(typeof e=="function")return this.extensionFactories.get(e)||void 0;throw new Error(`Invalid extension type: ${typeof e}`)}hasExtension(e){return typeof e=="string"?this.extensions.some(n=>n.key===e):typeof e=="object"&&"key"in e?this.extensions.some(n=>n.key===e.key):typeof e=="function"?this.extensionFactories.has(e):!1}}function VDe(t,e){let{$from:n,$to:r}=e;if(n.pos>n.start()&&n.pos<t.content.size){const i=t.textBetween(n.pos,n.pos+1);if(/^[\w\p{P}]$/u.test(i)){const o=t.textBetween(n.start(),n.pos).match(/[\w\p{P}]+$/u);o&&(n=t.resolve(n.pos-o[0].length))}}if(r.pos<r.end()&&r.pos>0){const i=t.textBetween(r.pos-1,r.pos);if(/^[\w\p{P}]$/u.test(i)){const o=t.textBetween(r.pos,r.end()).match(/^[\w\p{P}]+/u);o&&(r=t.resolve(r.pos+o[0].length))}}return{$from:n,$to:r,from:n.pos,to:r.pos}}function qDe(t){const e=Kr(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(gf(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(gf(t.doc,t.selection.to).posBeforeNode),i=(u,c)=>{const f=n.posAtIndex(u,c),d=t.doc.resolve(f).nodeAfter;if(!d)throw new Error(`Error getting selection - node not found at position ${f}`);return Ir(d,e)},o=[],a=n.sharedDepth(r.pos),s=n.index(a),l=r.index(a);if(n.depth>a){o.push(Ir(n.nodeAfter,e));for(let u=n.depth;u>a;u--)if(n.node(u).type.isInGroup("childContainer")){const c=n.index(u)+1,f=n.node(u).childCount;for(let d=c;d<f;d++)o.push(i(d,u))}}else o.push(i(s,a));for(let u=s+1;u<=l;u++)o.push(i(u,a));if(o.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:o}}function jDe(t,e,n){const r=typeof e=="string"?e:e.id,i=typeof n=="string"?n:n.id,o=Kr(t),a=cv(o);if(r===i)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const s=Mo(r,t.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const l=Mo(i,t.doc);if(!l)throw new Error(`Block with ID ${i} not found`);const u=vf(s),c=vf(l),f=a.blockSchema[u.blockNoteType],d=a.blockSchema[c.blockNoteType];if(!u.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!c.isBlockContainer||d.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${i})`);let h,m;if(f.content==="table"){const v=gr.get(u.blockContent.node);h=u.blockContent.beforePos+v.positionAt(0,0,u.blockContent.node)+1+2}else h=u.blockContent.beforePos+1;if(d.content==="table"){const v=gr.get(c.blockContent.node),b=c.blockContent.beforePos+v.positionAt(v.height-1,v.width-1,c.blockContent.node)+1,x=t.doc.resolve(b).nodeAfter.nodeSize;m=b+x-2}else m=c.blockContent.afterPos-1;t.setSelection(bt.create(t.doc,h,m))}function GDe(t,e=!1){const n=Kr(t),r=e?VDe(t.doc,t.selection):t.selection;let i=r.$from,o=r.$to;for(;o.parentOffset>=o.parent.nodeSize-2&&o.depth>0;)o=t.doc.resolve(o.pos+1);for(;o.parentOffset===0&&o.depth>0;)o=t.doc.resolve(o.pos-1);for(;i.parentOffset===0&&i.depth>0;)i=t.doc.resolve(i.pos-1);for(;i.parentOffset>=i.parent.nodeSize-2&&i.depth>0;)i=t.doc.resolve(i.pos+1);const a=wpe(t.doc.slice(i.pos,o.pos,!0),n);return{_meta:{startPos:i.pos,endPos:o.pos},...a}}function YDe(t){const{bnBlock:e}=uv(t),n=Kr(t.doc),r=t.doc.resolve(e.beforePos),i=r.nodeBefore,o=t.doc.resolve(e.afterPos).nodeAfter;let a;return r.depth>1&&(a=r.node(),a.type.isInGroup("bnBlock")||(a=r.node(r.depth-1))),{block:Ir(e.node,n),prevBlock:i===null?void 0:Ir(i,n),nextBlock:o===null?void 0:Ir(o,n),parentBlock:a===void 0?void 0:Ir(a,n)}}function kX(t,e,n="start"){const r=typeof e=="string"?e:e.id,i=Kr(t.doc),o=cv(i),a=Mo(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const s=vf(a),l=o.blockSchema[s.blockNoteType].content;if(s.isBlockContainer){const u=s.blockContent;if(l==="none"){t.setSelection(Et.create(t.doc,u.beforePos));return}if(l==="inline")n==="start"?t.setSelection(bt.create(t.doc,u.beforePos+1)):t.setSelection(bt.create(t.doc,u.afterPos-1));else if(l==="table")n==="start"?t.setSelection(bt.create(t.doc,u.beforePos+4)):t.setSelection(bt.create(t.doc,u.afterPos-4));else throw new Pl(l)}else{const u=n==="start"?s.childContainer.node.firstChild:s.childContainer.node.lastChild;kX(t,u.attrs.id,n)}}class WDe{constructor(e){this.editor=e}getSelection(){return this.editor.transact(e=>qDe(e))}getSelectionCutBlocks(e=!1){return this.editor.transact(n=>GDe(n,e))}setSelection(e,n){return this.editor.transact(r=>jDe(r,e,n))}getTextCursorPosition(){return this.editor.transact(e=>YDe(e))}setTextCursorPosition(e,n="start"){return this.editor.transact(r=>kX(r,e,n))}getSelectionBoundingBox(){if(!this.editor.prosemirrorView)return;const{selection:e}=this.editor.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(o=>o.$from.pos)),i=Math.max(...n.map(o=>o.$to.pos));if(NG(e)){const o=this.editor.prosemirrorView.nodeDOM(r);if(o)return o.getBoundingClientRect()}return ck(this.editor.prosemirrorView,r,i).toJSON()}}class KDe{constructor(e){Rn(this,"activeTransaction",null),Rn(this,"isInCan",!1),this.editor=e}can(e){try{return this.isInCan=!0,e()}finally{this.isInCan=!1}}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");if(this.isInCan)return this.canExec(e);const n=this.prosemirrorState,r=this.prosemirrorView;return e(n,i=>this.prosemirrorView.dispatch(i),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this.prosemirrorState,r=this.prosemirrorView;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this.editor._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this.prosemirrorView.dispatch(r),n}finally{this.activeTransaction=null}}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this.editor._tiptapEditor.state}get prosemirrorView(){return this.editor._tiptapEditor.view}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}get isEditable(){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return!1}return this.editor._tiptapEditor.isEditable===void 0?!0:this.editor._tiptapEditor.isEditable}set isEditable(e){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return}this.editor._tiptapEditor.options.editable!==e&&this.editor._tiptapEditor.setEditable(e)}undo(){const e=this.editor.getExtension("yUndo");if(e)return this.exec(e.undoCommand);const n=this.editor.getExtension("history");if(n)return this.exec(n.undoCommand);throw new Error("No undo plugin found")}redo(){const e=this.editor.getExtension("yUndo");if(e)return this.exec(e.redoCommand);const n=this.editor.getExtension("history");if(n)return this.exec(n.redoCommand);throw new Error("No redo plugin found")}}function XDe(t,e,n,r={updateSelection:!0}){let{from:i,to:o}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},a=!0,s=!0,l="";if(n.forEach(u=>{u.check(),a&&u.isText&&u.marks.length===0?l+=u.text:a=!1,s=s?u.isBlock:!1}),i===o&&s){const{parent:u}=t.doc.resolve(i);u.isTextblock&&!u.type.spec.code&&!u.childCount&&(i-=1,o+=1)}return a?t.insertText(l,i,o):t.replaceWith(i,o,n),r.updateSelection&&vG(t,t.steps.length-1,-1),!0}class ZDe{constructor(e){this.editor=e}insertInlineContent(e,{updateSelection:n=!1}={}){const r=Ws(e,this.editor.pmSchema);this.editor.transact(i=>{XDe(i,{from:i.selection.from,to:i.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.editor.transact(e=>{const n={},r=e.selection.$to.marks();for(const i of r){const o=this.editor.schema.styleSchema[i.type.name];if(!o){i.type.name!=="link"&&!i.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",i.type.name);continue}o.propSchema==="boolean"?n[o.type]=!0:n[o.type]=i.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const i=this.editor.schema.styleSchema[n];if(!i)throw new Error(`style ${n} not found in styleSchema`);if(i.propSchema==="boolean")this.editor._tiptapEditor.commands.setMark(n);else if(i.propSchema==="string")this.editor._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new Pl(i.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this.editor._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const i=this.editor.schema.styleSchema[n];if(!i)throw new Error(`style ${n} not found in styleSchema`);if(i.propSchema==="boolean")this.editor._tiptapEditor.commands.toggleMark(n);else if(i.propSchema==="string")this.editor._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new Pl(i.propSchema)}}getSelectedText(){return this.editor.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this.editor._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.editor.pmSchema.mark("link",{href:e});this.editor.transact(i=>{const{from:o,to:a}=i.selection;n?i.insertText(n,o,a).addMark(o,o+n.length,r):i.setSelection(bt.create(i.doc,a)).addMark(o,a,r)})}}function QDe(t,e){const n=[];return t.forEach((r,i,o)=>{o!==e&&n.push(r)}),Ue.from(n)}function JDe(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const i=n[n.length-1],o=i.copy(i.content.addToEnd(t.child(r)));n[n.length-1]=o}else{const i=e.nodes.table.createChecked(void 0,t.child(r));n.push(i)}else n.push(t.child(r));return t=Ue.from(n),t}function e4e(t,e){let n=Ue.from(t.content);if(n=JDe(n,e.state.schema),!t4e(n,e))return new ot(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const i=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const a=n.child(r+1).child(0).child(0);(a.type.name==="bulletListItem"||a.type.name==="numberedListItem"||a.type.name==="checkListItem")&&(i.push(n.child(r+1)),n=QDe(n,r+1))}const o=e.state.schema.nodes.blockContainer.createChecked(void 0,i);n=n.replaceChild(r,o)}return new ot(n,t.openStart,t.openEnd)}function t4e(t,e){var n,r;const i=t.childCount===1,o=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",a=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(i){if(o)return!1;if(a){const s=Vo(e.state);if(s.isBlockContainer)return s.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const n4e={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let r4e=class _X extends r_{constructor(e){var n,r,i,o,a,s,l,u,c,f;super(),Rn(this,"pmSchema"),Rn(this,"_tiptapEditor"),Rn(this,"elementRenderer",null),Rn(this,"blockCache",new WeakMap),Rn(this,"dictionary"),Rn(this,"schema"),Rn(this,"blockImplementations"),Rn(this,"inlineContentImplementations"),Rn(this,"styleImplementations"),Rn(this,"uploadFile"),Rn(this,"onUploadStartCallbacks",[]),Rn(this,"onUploadEndCallbacks",[]),Rn(this,"resolveFileUrl"),Rn(this,"settings"),Rn(this,"_blockManager"),Rn(this,"_eventManager"),Rn(this,"_exportManager"),Rn(this,"_extensionManager"),Rn(this,"_selectionManager"),Rn(this,"_stateManager"),Rn(this,"_styleManager"),Rn(this,"unregisterExtension",(...C)=>this._extensionManager.unregisterExtension(...C)),Rn(this,"registerExtension",(...C)=>this._extensionManager.registerExtension(...C)),Rn(this,"getExtension",(...C)=>this._extensionManager.getExtension(...C)),Rn(this,"mount",C=>{this._tiptapEditor.mount({mount:C})}),Rn(this,"unmount",()=>{this._tiptapEditor.unmount()}),this.options=e,this.dictionary=e.dictionary||DTe,this.settings={tables:{splitCells:((n=e?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((i=e?.tables)==null?void 0:i.cellTextColor)??!1,headers:((o=e?.tables)==null?void 0:o.headers)??!1}};const d={defaultStyles:!0,schema:e.schema||YK.create(),...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(this.schema=d.schema,this.blockImplementations=d.schema.blockSpecs,this.inlineContentImplementations=d.schema.inlineContentSpecs,this.styleImplementations=d.schema.styleSpecs,d.uploadFile){const C=d.uploadFile;this.uploadFile=async(w,A)=>{this.onUploadStartCallbacks.forEach(E=>E.apply(this,[A]));try{return await C(w,A)}finally{this.onUploadEndCallbacks.forEach(E=>E.apply(this,[A]))}}}this.resolveFileUrl=d.resolveFileUrl,this._eventManager=new G3e(this),this._extensionManager=new HDe(this,d);const h=this._extensionManager.getTiptapExtensions(),m=this._extensionManager.hasExtension("ySync")||this._extensionManager.hasExtension("liveblocksExtension");m&&d.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const v={...n4e,...d._tiptapOptions,element:null,autofocus:d.autofocus??!1,extensions:h,editorProps:{...(a=d._tiptapOptions)==null?void 0:a.editorProps,attributes:{tabIndex:"0",...(l=(s=d._tiptapOptions)==null?void 0:s.editorProps)==null?void 0:l.attributes,...(u=d.domAttributes)==null?void 0:u.editor,class:$r("bn-editor",d.defaultStyles?"bn-default-styles":"",((f=(c=d.domAttributes)==null?void 0:c.editor)==null?void 0:f.class)||"")},transformPasted:e4e}};try{const C=d.initialContent||(m?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:zE.options.generateID()}]);if(!Array.isArray(C)||C.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+C);const w=hhe(v.extensions),A=C.map(T=>mh(T,w,this.schema.styleSchema).toJSON()),E=Tx({type:"doc",content:[{type:"blockGroup",content:A}]},w,v.parseOptions);this._tiptapEditor=new rpe({...v,content:E.toJSON()}),this.pmSchema=this._tiptapEditor.schema}catch(C){throw new Error("Error creating document from blocks passed as `initialContent`",{cause:C})}let b;const x=this.pmSchema.nodes.doc.createAndFill;this.pmSchema.nodes.doc.createAndFill=(...C)=>{if(b)return b;const w=x.apply(this.pmSchema.nodes.doc,C),A=JSON.parse(JSON.stringify(w.toJSON()));return A.content[0].content[0].attrs.id="initialBlockId",b=Ou.fromJSON(this.pmSchema,A),b},this.pmSchema.cached.blockNoteEditor=this,this._blockManager=new j3e(this),this._exportManager=new nDe(this),this._selectionManager=new WDe(this),this._stateManager=new KDe(this),this._styleManager=new ZDe(this),this.emit("create")}static create(e){return new _X(e??{})}get extensions(){return this._extensionManager.getExtensions()}exec(e){return this._stateManager.exec(e)}canExec(e){return this._stateManager.canExec(e)}transact(e){return this._stateManager.transact(e)}get prosemirrorState(){return this._stateManager.prosemirrorState}get prosemirrorView(){return this._stateManager.prosemirrorView}get domElement(){var e;if(!this.headless)return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return this.headless?!1:((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}get headless(){return!this._tiptapEditor.isInitialized}focus(){this.headless||this.prosemirrorView.focus()}blur(){var e;this.headless||(e=this.domElement)==null||e.blur()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this._blockManager.document}getBlock(e){return this._blockManager.getBlock(e)}getPrevBlock(e){return this._blockManager.getPrevBlock(e)}getNextBlock(e){return this._blockManager.getNextBlock(e)}getParentBlock(e){return this._blockManager.getParentBlock(e)}forEachBlock(e,n=!1){this._blockManager.forEachBlock(e,n)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}onBeforeChange(e){return this._extensionManager.getExtension($K).subscribe(e)}getTextCursorPosition(){return this._selectionManager.getTextCursorPosition()}setTextCursorPosition(e,n="start"){return this._selectionManager.setTextCursorPosition(e,n)}getSelection(){return this._selectionManager.getSelection()}getSelectionCutBlocks(e=!1){return this._selectionManager.getSelectionCutBlocks(e)}setSelection(e,n){return this._selectionManager.setSelection(e,n)}get isEditable(){return this._stateManager.isEditable}set isEditable(e){this._stateManager.isEditable=e}insertBlocks(e,n,r="before"){return this._blockManager.insertBlocks(e,n,r)}updateBlock(e,n){return this._blockManager.updateBlock(e,n)}removeBlocks(e){return this._blockManager.removeBlocks(e)}replaceBlocks(e,n){return this._blockManager.replaceBlocks(e,n)}undo(){return this._stateManager.undo()}redo(){return this._stateManager.redo()}insertInlineContent(e,{updateSelection:n=!1}={}){this._styleManager.insertInlineContent(e,{updateSelection:n})}getActiveStyles(){return this._styleManager.getActiveStyles()}addStyles(e){this._styleManager.addStyles(e)}removeStyles(e){this._styleManager.removeStyles(e)}toggleStyles(e){this._styleManager.toggleStyles(e)}getSelectedText(){return this._styleManager.getSelectedText()}getSelectedLinkUrl(){return this._styleManager.getSelectedLinkUrl()}createLink(e,n){this._styleManager.createLink(e,n)}canNestBlock(){return this._blockManager.canNestBlock()}nestBlock(){this._blockManager.nestBlock()}canUnnestBlock(){return this._blockManager.canUnnestBlock()}unnestBlock(){this._blockManager.unnestBlock()}moveBlocksUp(){return this._blockManager.moveBlocksUp()}moveBlocksDown(){return this._blockManager.moveBlocksDown()}blocksToHTMLLossy(e=this.document){return this._exportManager.blocksToHTMLLossy(e)}blocksToFullHTML(e=this.document){return this._exportManager.blocksToFullHTML(e)}tryParseHTMLToBlocks(e){return this._exportManager.tryParseHTMLToBlocks(e)}blocksToMarkdownLossy(e=this.document){return this._exportManager.blocksToMarkdownLossy(e)}tryParseMarkdownToBlocks(e){return this._exportManager.tryParseMarkdownToBlocks(e)}onChange(e,n){return this._eventManager.onChange(e,n)}onSelectionChange(e,n){return this._eventManager.onSelectionChange(e,n)}onMount(e){this._eventManager.onMount(e)}onUnmount(e){this._eventManager.onUnmount(e)}getSelectionBoundingBox(){return this._selectionManager.getSelectionBoundingBox()}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}pasteHTML(e,n=!1){this._exportManager.pasteHTML(e,n)}pasteText(e){return this._exportManager.pasteText(e)}pasteMarkdown(e){return this._exportManager.pasteMarkdown(e)}};const i4e="modulepreload",o4e=function(t){return"/diegesis/"+t},FL={},mw=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};var a=u;document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");i=u(n.map(c=>{if(c=o4e(c),c in FL)return;FL[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":i4e,f||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((m,v)=>{h.addEventListener("load",m),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};var a4e=Object.defineProperty,s4e=(t,e,n)=>e in t?a4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PL=(t,e,n)=>s4e(t,typeof e!="symbol"?e+"":e,n);const $L=ys.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Na(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});let l4e=class extends r_{constructor(e){super(),PL(this,"userCache",new Map),PL(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const i of r)this.userCache.set(i.id,i);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}};const Vy=new gn("blocknote-comments");function u4e(t,e){const n=new Map;return t.descendants((r,i)=>{r.marks.forEach(o=>{if(o.type.name===e){const a=o.attrs.threadId;if(!a)return;const s=i,l=s+r.nodeSize,u=n.get(a)??{from:1/0,to:0};n.set(a,{from:Math.min(s,u.from),to:Math.max(l,u.to)})}})}),n}const gs=Fn(({editor:t,options:{schema:e,threadStore:n,resolveUsers:r}})=>{if(!r)throw new Error("resolveUsers is required to be defined when using comments");if(!n)throw new Error("threadStore is required to be defined when using comments");const i=$L.name,o=new l4e(r),a=_f({pendingComment:!1,selectedThreadId:void 0,threadPositions:new Map},{onUpdate(){a.state.selectedThreadId!==a.prevState.selectedThreadId&&t.transact(l=>l.setMeta(Vy,!0))}}),s=l=>{t.transact(u=>{u.doc.descendants((c,f)=>{c.marks.forEach(d=>{if(d.type.name===i){const h=d.type,m=d.attrs.threadId,v=l.get(m),b=!!(!v||v.resolved||v.deletedAt);if(b!==d.attrs.orphan){const x=Math.max(f,0),C=Math.min(f+c.nodeSize,u.doc.content.size-1,u.doc.content.size-1);u.removeMark(x,C,d),u.addMark(x,C,h.create({...d.attrs,orphan:b})),b&&a.state.selectedThreadId===m&&a.setState(w=>({...w,selectedThreadId:void 0}))}}})})})};return{key:"comments",store:a,prosemirrorPlugins:[new Wt({key:Vy,state:{init(){return{decorations:nn.empty}},apply(l,u){const c=l.getMeta(Vy);if(!l.docChanged&&!c)return u;const f=l.docChanged?u4e(l.doc,i):a.state.threadPositions;(f.size>0||a.state.threadPositions.size>0)&&a.setState(h=>({...h,threadPositions:f}));const d=[];if(a.state.selectedThreadId){const h=f.get(a.state.selectedThreadId);h&&d.push(Un.inline(h.from,h.to,{class:"bn-thread-mark-selected"}))}return{decorations:nn.create(l.doc,d)}}},props:{decorations(l){var u;return((u=Vy.getState(l))==null?void 0:u.decorations)??nn.empty},handleClick:(l,u,c)=>{if(c.button!==0)return;const f=l.state.doc.nodeAt(u);if(!f){a.setState(m=>({...m,selectedThreadId:void 0}));return}const d=f.marks.find(m=>m.type.name===i&&m.attrs.orphan!==!0),h=d?.attrs.threadId;h!==a.state.selectedThreadId&&a.setState(m=>({...m,selectedThreadId:h}))}}})],threadStore:n,mount(){const l=n.subscribe(s);s(n.getThreads());const u=t.onSelectionChange(()=>{a.state.pendingComment&&a.setState(c=>({...c,pendingComment:!1}))});return()=>{l(),u()}},selectThread(l,u=!0){var c,f;if(a.state.selectedThreadId!==l&&(a.setState(d=>({...d,pendingComment:!1,selectedThreadId:l})),l&&u)){const d=a.state.threadPositions.get(l);if(!d)return;(f=(c=t.prosemirrorView)==null?void 0:c.domAtPos(d.from).node)==null||f.scrollIntoView({behavior:"smooth",block:"center"})}},startPendingComment(){var l;a.setState(u=>({...u,selectedThreadId:void 0,pendingComment:!0})),(l=t.getExtension(pw))==null||l.showSelection(!0)},stopPendingComment(){var l;a.setState(u=>({...u,selectedThreadId:void 0,pendingComment:!1})),(l=t.getExtension(pw))==null||l.showSelection(!1)},async createThread(l){const u=await n.createThread(l);if(n.addThreadToDocument){const c=t.prosemirrorView,f=c.state.selection,d=mr.getState(c.state),h={prosemirror:{head:f.head,anchor:f.anchor},yjs:d?Dx(d.binding,c.state):void 0};await n.addThreadToDocument({threadId:u.id,selection:h})}else t._tiptapEditor.commands.setMark(i,{orphan:!1,threadId:u.id})},userStore:o,commentEditorSchema:e,tiptapExtensions:[$L]}});let QN;async function c4e(){return QN||(QN=(async()=>{const[t,e]=await Promise.all([mw(()=>import("./module-RjUF93sV.js"),[]),mw(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),QN)}async function f4e(t,e){if(!("text"in t.schema.inlineContentSchema)||t.schema.inlineContentSchema.text!==b1e.text)return[];const{emojiData:n,emojiMart:r}=await c4e();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(i=>({id:i.skins[0].native,onItemClick:()=>t.insertInlineContent(i.skins[0].native+" ")}))}function uC(){return typeof window<"u"}function Xm(t){return OX(t)?(t.nodeName||"").toLowerCase():"#document"}function ta(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ql(t){var e;return(e=(OX(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OX(t){return uC()?t instanceof Node||t instanceof ta(t).Node:!1}function vr(t){return uC()?t instanceof Element||t instanceof ta(t).Element:!1}function Da(t){return uC()?t instanceof HTMLElement||t instanceof ta(t).HTMLElement:!1}function gw(t){return!uC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ta(t).ShadowRoot}const d4e=new Set(["inline","contents"]);function bv(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=vs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!d4e.has(i)}const h4e=new Set(["table","td","th"]);function p4e(t){return h4e.has(Xm(t))}const m4e=[":popover-open",":modal"];function cC(t){return m4e.some(e=>{try{return t.matches(e)}catch{return!1}})}const g4e=["transform","translate","scale","rotate","perspective"],v4e=["transform","translate","scale","rotate","perspective","filter"],b4e=["paint","layout","strict","content"];function g_(t){const e=fC(),n=vr(t)?vs(t):t;return g4e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||v4e.some(r=>(n.willChange||"").includes(r))||b4e.some(r=>(n.contain||"").includes(r))}function y4e(t){let e=Hu(t);for(;Da(e)&&!Bu(e);){if(g_(e))return e;if(cC(e))return null;e=Hu(e)}return null}function fC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const x4e=new Set(["html","body","#document"]);function Bu(t){return x4e.has(Xm(t))}function vs(t){return ta(t).getComputedStyle(t)}function dC(t){return vr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hu(t){if(Xm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gw(t)&&t.host||ql(t);return gw(e)?e.host:e}function IX(t){const e=Hu(t);return Bu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Da(e)&&bv(e)?e:IX(e)}function Lu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=IX(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=ta(i);if(o){const s=S4(a);return e.concat(a,a.visualViewport||[],bv(i)?i:[],s&&n?Lu(s):[])}return e.concat(i,Lu(i,[],n))}function S4(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const RX=["top","right","bottom","left"],zL=["start","end"],UL=RX.reduce((t,e)=>t.concat(e,e+"-"+zL[0],e+"-"+zL[1]),[]),Xs=Math.min,Ji=Math.max,vw=Math.round,qy=Math.floor,Rl=t=>({x:t,y:t}),w4e={left:"right",right:"left",bottom:"top",top:"bottom"},E4e={start:"end",end:"start"};function T4(t,e,n){return Ji(t,Xs(e,n))}function Zs(t,e){return typeof t=="function"?t(e):t}function Ma(t){return t.split("-")[0]}function Us(t){return t.split("-")[1]}function v_(t){return t==="x"?"y":"x"}function b_(t){return t==="y"?"height":"width"}const C4e=new Set(["top","bottom"]);function Fs(t){return C4e.has(Ma(t))?"y":"x"}function y_(t){return v_(Fs(t))}function BX(t,e,n){n===void 0&&(n=!1);const r=Us(t),i=y_(t),o=b_(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=yw(a)),[a,yw(a)]}function S4e(t){const e=yw(t);return[bw(t),e,bw(e)]}function bw(t){return t.replace(/start|end/g,e=>E4e[e])}const HL=["left","right"],VL=["right","left"],T4e=["top","bottom"],A4e=["bottom","top"];function N4e(t,e,n){switch(t){case"top":case"bottom":return n?e?VL:HL:e?HL:VL;case"left":case"right":return e?T4e:A4e;default:return[]}}function D4e(t,e,n,r){const i=Us(t);let o=N4e(Ma(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(bw)))),o}function yw(t){return t.replace(/left|right|bottom|top/g,e=>w4e[e])}function M4e(t){return{top:0,right:0,bottom:0,left:0,...t}}function x_(t){return typeof t!="number"?M4e(t):{top:t,right:t,bottom:t,left:t}}function Sm(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function k4e(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function _4e(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function O4e(){return/apple/i.test(navigator.vendor)}function I4e(){return k4e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function R4e(){return _4e().includes("jsdom/")}const qL="data-floating-ui-focusable",B4e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function jL(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function z1(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&gw(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Bp(t){return"composedPath"in t?t.composedPath()[0]:t.target}function JN(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function L4e(t){return t.matches("html,body")}function kd(t){return t?.ownerDocument||document}function F4e(t){return Da(t)&&t.matches(B4e)}function P4e(t){if(!t||R4e())return!0;try{return t.matches(":focus-visible")}catch{return!0}}function $4e(t){return t?t.hasAttribute(qL)?t:t.querySelector("["+qL+"]")||t:null}function z2(t,e,n){return n===void 0&&(n=!0),t.filter(i=>{var o;return i.parentId===e&&(!n||((o=i.context)==null?void 0:o.open))}).flatMap(i=>[i,...z2(t,i.id,n)])}function z4e(t){return"nativeEvent"in t}function A4(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}var U4e=typeof document<"u",H4e=function(){},ds=U4e?q.useLayoutEffect:H4e;const V4e={...eV};function Jc(t){const e=q.useRef(t);return ds(()=>{e.current=t}),e}const q4e=V4e.useInsertionEffect,j4e=q4e||(t=>t());function Ml(t){const e=q.useRef(()=>{});return j4e(()=>{e.current=t}),q.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function GL(t,e,n){let{reference:r,floating:i}=t;const o=Fs(e),a=y_(e),s=b_(a),l=Ma(e),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[s]/2-i[s]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Us(e)){case"start":h[a]-=d*(n&&u?-1:1);break;case"end":h[a]+=d*(n&&u?-1:1);break}return h}const G4e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=GL(u,r,l),d=r,h={},m=0;for(let v=0;v<s.length;v++){const{name:b,fn:x}=s[v],{x:C,y:w,data:A,reset:E}=await x({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:a,elements:{reference:t,floating:e}});c=C??c,f=w??f,h={...h,[b]:{...h[b],...A}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(u=E.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:c,y:f}=GL(u,d,l)),v=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Tm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Zs(e,t),m=x_(h),b=s[d?f==="floating"?"reference":"floating":f],x=Sm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),C=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),A=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},E=Sm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:C,offsetParent:w,strategy:l}):C);return{top:(x.top-E.top+m.top)/A.y,bottom:(E.bottom-x.bottom+m.bottom)/A.y,left:(x.left-E.left+m.left)/A.x,right:(E.right-x.right+m.right)/A.x}}const Y4e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=e,{element:u,padding:c=0}=Zs(t,e)||{};if(u==null)return{};const f=x_(c),d={x:n,y:r},h=y_(i),m=b_(h),v=await a.getDimensions(u),b=h==="y",x=b?"top":"left",C=b?"bottom":"right",w=b?"clientHeight":"clientWidth",A=o.reference[m]+o.reference[h]-d[h]-o.floating[m],E=d[h]-o.reference[h],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=T?T[w]:0;(!N||!await(a.isElement==null?void 0:a.isElement(T)))&&(N=s.floating[w]||o.floating[m]);const D=A/2-E/2,M=N/2-v[m]/2-1,k=Xs(f[x],M),B=Xs(f[C],M),P=k,$=N-v[m]-B,z=N/2-v[m]/2+D,j=T4(P,z,$),L=!l.arrow&&Us(i)!=null&&z!==j&&o.reference[m]/2-(z<P?k:B)-v[m]/2<0,U=L?z<P?z-P:z-$:0;return{[h]:d[h]+U,data:{[h]:j,centerOffset:z-j-U,...L&&{alignmentOffset:U}},reset:L}}});function W4e(t,e,n){return(t?[...n.filter(i=>Us(i)===t),...n.filter(i=>Us(i)!==t)]:n.filter(i=>Ma(i)===i)).filter(i=>t?Us(i)===t||(e?bw(i)!==i:!1):!0)}const K4e=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:a,placement:s,platform:l,elements:u}=e,{crossAxis:c=!1,alignment:f,allowedPlacements:d=UL,autoAlignment:h=!0,...m}=Zs(t,e),v=f!==void 0||d===UL?W4e(f||null,h,d):d,b=await Tm(e,m),x=((n=a.autoPlacement)==null?void 0:n.index)||0,C=v[x];if(C==null)return{};const w=BX(C,o,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(s!==C)return{reset:{placement:v[0]}};const A=[b[Ma(C)],b[w[0]],b[w[1]]],E=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:C,overflows:A}],T=v[x+1];if(T)return{data:{index:x+1,overflows:E},reset:{placement:T}};const N=E.map(k=>{const B=Us(k.placement);return[k.placement,B&&c?k.overflows.slice(0,2).reduce((P,$)=>P+$,0):k.overflows[0],k.overflows]}).sort((k,B)=>k[1]-B[1]),M=((i=N.filter(k=>k[2].slice(0,Us(k[0])?2:3).every(B=>B<=0))[0])==null?void 0:i[0])||N[0][0];return M!==s?{data:{index:x+1,overflows:E},reset:{placement:M}}:{}}}},X4e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...b}=Zs(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Ma(i),C=Fs(s),w=Ma(s)===s,A=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=d||(w||!v?[yw(s)]:S4e(s)),T=m!=="none";!d&&T&&E.push(...D4e(s,v,m,A));const N=[s,...E],D=await Tm(e,b),M=[];let k=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&M.push(D[x]),f){const z=BX(i,a,A);M.push(D[z[0]],D[z[1]])}if(k=[...k,{placement:i,overflows:M}],!M.every(z=>z<=0)){var B,P;const z=(((B=o.flip)==null?void 0:B.index)||0)+1,j=N[z];if(j&&(!(f==="alignment"?C!==Fs(j):!1)||k.every(G=>Fs(G.placement)===C?G.overflows[0]>0:!0)))return{data:{index:z,overflows:k},reset:{placement:j}};let L=(P=k.filter(U=>U.overflows[0]<=0).sort((U,G)=>U.overflows[1]-G.overflows[1])[0])==null?void 0:P.placement;if(!L)switch(h){case"bestFit":{var $;const U=($=k.filter(G=>{if(T){const Z=Fs(G.placement);return Z===C||Z==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(Z=>Z>0).reduce((Z,H)=>Z+H,0)]).sort((G,Z)=>G[1]-Z[1])[0])==null?void 0:$[0];U&&(L=U);break}case"initialPlacement":L=s;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function YL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function WL(t){return RX.some(e=>t[e]>=0)}const Z4e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Zs(t,e);switch(r){case"referenceHidden":{const o=await Tm(e,{...i,elementContext:"reference"}),a=YL(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:WL(a)}}}case"escaped":{const o=await Tm(e,{...i,altBoundary:!0}),a=YL(o,n.floating);return{data:{escapedOffsets:a,escaped:WL(a)}}}default:return{}}}}};function LX(t){const e=Xs(...t.map(o=>o.left)),n=Xs(...t.map(o=>o.top)),r=Ji(...t.map(o=>o.right)),i=Ji(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function Q4e(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Sm(LX(i)))}const J4e=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:a}=e,{padding:s=2,x:l,y:u}=Zs(t,e),c=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=Q4e(c),d=Sm(LX(c)),h=x_(s);function m(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&u!=null)return f.find(b=>l>b.left-h.left&&l<b.right+h.right&&u>b.top-h.top&&u<b.bottom+h.bottom)||d;if(f.length>=2){if(Fs(n)==="y"){const k=f[0],B=f[f.length-1],P=Ma(n)==="top",$=k.top,z=B.bottom,j=P?k.left:B.left,L=P?k.right:B.right,U=L-j,G=z-$;return{top:$,bottom:z,left:j,right:L,width:U,height:G,x:j,y:$}}const b=Ma(n)==="left",x=Ji(...f.map(k=>k.right)),C=Xs(...f.map(k=>k.left)),w=f.filter(k=>b?k.left===C:k.right===x),A=w[0].top,E=w[w.length-1].bottom,T=C,N=x,D=N-T,M=E-A;return{top:A,bottom:E,left:T,right:N,width:D,height:M,x:T,y:A}}return d}const v=await o.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:a});return i.reference.x!==v.reference.x||i.reference.y!==v.reference.y||i.reference.width!==v.reference.width||i.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}},FX=new Set(["left","top"]);async function eMe(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Ma(n),s=Us(n),l=Fs(n)==="y",u=FX.has(a)?-1:1,c=o&&l?-1:1,f=Zs(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof m=="number"&&(h=s==="end"?m*-1:m),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const tMe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,l=await eMe(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},nMe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:b=>{let{x,y:C}=b;return{x,y:C}}},...l}=Zs(t,e),u={x:n,y:r},c=await Tm(e,l),f=Fs(Ma(i)),d=v_(f);let h=u[d],m=u[f];if(o){const b=d==="y"?"top":"left",x=d==="y"?"bottom":"right",C=h+c[b],w=h-c[x];h=T4(C,h,w)}if(a){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",C=m+c[b],w=m-c[x];m=T4(C,m,w)}const v=s.fn({...e,[d]:h,[f]:m});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[d]:o,[f]:a}}}}}},rMe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Zs(t,e),c={x:n,y:r},f=Fs(i),d=v_(f);let h=c[d],m=c[f];const v=Zs(s,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const w=d==="y"?"height":"width",A=o.reference[d]-o.floating[w]+b.mainAxis,E=o.reference[d]+o.reference[w]-b.mainAxis;h<A?h=A:h>E&&(h=E)}if(u){var x,C;const w=d==="y"?"width":"height",A=FX.has(Ma(i)),E=o.reference[f]-o.floating[w]+(A&&((x=a.offset)==null?void 0:x[f])||0)+(A?0:b.crossAxis),T=o.reference[f]+o.reference[w]+(A?0:((C=a.offset)==null?void 0:C[f])||0)-(A?b.crossAxis:0);m<E?m=E:m>T&&(m=T)}return{[d]:h,[f]:m}}}},iMe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:l=()=>{},...u}=Zs(t,e),c=await Tm(e,u),f=Ma(i),d=Us(i),h=Fs(i)==="y",{width:m,height:v}=o.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=d===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(x=f,b=d==="end"?"top":"bottom");const C=v-c.top-c.bottom,w=m-c.left-c.right,A=Xs(v-c[b],C),E=Xs(m-c[x],w),T=!e.middlewareData.shift;let N=A,D=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=C),T&&!d){const k=Ji(c.left,0),B=Ji(c.right,0),P=Ji(c.top,0),$=Ji(c.bottom,0);h?D=m-2*(k!==0||B!==0?k+B:Ji(c.left,c.right)):N=v-2*(P!==0||$!==0?P+$:Ji(c.top,c.bottom))}await l({...e,availableWidth:D,availableHeight:N});const M=await a.getDimensions(s.floating);return m!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function PX(t){const e=vs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Da(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=vw(n)!==o||vw(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function w_(t){return vr(t)?t:t.contextElement}function em(t){const e=w_(t);if(!Da(e))return Rl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=PX(e);let a=(o?vw(n.width):n.width)/r,s=(o?vw(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const oMe=Rl(0);function $X(t){const e=ta(t);return!fC()||!e.visualViewport?oMe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aMe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ta(t)?!1:e}function oh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=w_(t);let a=Rl(1);e&&(r?vr(r)&&(a=em(r)):a=em(t));const s=aMe(o,n,r)?$X(o):Rl(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,c=i.width/a.x,f=i.height/a.y;if(o){const d=ta(o),h=r&&vr(r)?ta(r):r;let m=d,v=S4(m);for(;v&&r&&h!==m;){const b=em(v),x=v.getBoundingClientRect(),C=vs(v),w=x.left+(v.clientLeft+parseFloat(C.paddingLeft))*b.x,A=x.top+(v.clientTop+parseFloat(C.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,f*=b.y,l+=w,u+=A,m=ta(v),v=S4(m)}}return Sm({width:c,height:f,x:l,y:u})}function hC(t,e){const n=dC(t).scrollLeft;return e?e.left+n:oh(ql(t)).left+n}function zX(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-hC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function sMe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=ql(r),s=e?cC(e.floating):!1;if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Rl(1);const c=Rl(0),f=Da(r);if((f||!f&&!o)&&((Xm(r)!=="body"||bv(a))&&(l=dC(r)),Da(r))){const h=oh(r);u=em(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const d=a&&!f&&!o?zX(a,l):Rl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:n.y*u.y-l.scrollTop*u.y+c.y+d.y}}function lMe(t){return Array.from(t.getClientRects())}function uMe(t){const e=ql(t),n=dC(t),r=t.ownerDocument.body,i=Ji(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ji(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+hC(t);const s=-n.scrollTop;return vs(r).direction==="rtl"&&(a+=Ji(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}const KL=25;function cMe(t,e){const n=ta(t),r=ql(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const c=fC();(!c||c&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}const u=hC(r);if(u<=0){const c=r.ownerDocument,f=c.body,d=getComputedStyle(f),h=c.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=KL&&(o-=m)}else u<=KL&&(o+=u);return{width:o,height:a,x:s,y:l}}const fMe=new Set(["absolute","fixed"]);function dMe(t,e){const n=oh(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Da(t)?em(t):Rl(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:a,height:s,x:l,y:u}}function XL(t,e,n){let r;if(e==="viewport")r=cMe(t,n);else if(e==="document")r=uMe(ql(t));else if(vr(e))r=dMe(e,n);else{const i=$X(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Sm(r)}function UX(t,e){const n=Hu(t);return n===e||!vr(n)||Bu(n)?!1:vs(n).position==="fixed"||UX(n,e)}function hMe(t,e){const n=e.get(t);if(n)return n;let r=Lu(t,[],!1).filter(s=>vr(s)&&Xm(s)!=="body"),i=null;const o=vs(t).position==="fixed";let a=o?Hu(t):t;for(;vr(a)&&!Bu(a);){const s=vs(a),l=g_(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&!!i&&fMe.has(i.position)||bv(a)&&!l&&UX(t,a))?r=r.filter(c=>c!==a):i=s,a=Hu(a)}return e.set(t,r),r}function pMe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?cC(e)?[]:hMe(e,this._c):[].concat(n),r],s=a[0],l=a.reduce((u,c)=>{const f=XL(e,c,i);return u.top=Ji(f.top,u.top),u.right=Xs(f.right,u.right),u.bottom=Xs(f.bottom,u.bottom),u.left=Ji(f.left,u.left),u},XL(e,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mMe(t){const{width:e,height:n}=PX(t);return{width:e,height:n}}function gMe(t,e,n){const r=Da(e),i=ql(e),o=n==="fixed",a=oh(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const l=Rl(0);function u(){l.x=hC(i)}if(r||!r&&!o)if((Xm(e)!=="body"||bv(i))&&(s=dC(e)),r){const h=oh(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&u();o&&!r&&i&&u();const c=i&&!r&&!o?zX(i,s):Rl(0),f=a.left+s.scrollLeft-l.x-c.x,d=a.top+s.scrollTop-l.y-c.y;return{x:f,y:d,width:a.width,height:a.height}}function e3(t){return vs(t).position==="static"}function ZL(t,e){if(!Da(t)||vs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ql(t)===n&&(n=n.ownerDocument.body),n}function HX(t,e){const n=ta(t);if(cC(t))return n;if(!Da(t)){let i=Hu(t);for(;i&&!Bu(i);){if(vr(i)&&!e3(i))return i;i=Hu(i)}return n}let r=ZL(t,e);for(;r&&p4e(r)&&e3(r);)r=ZL(r,e);return r&&Bu(r)&&e3(r)&&!g_(r)?n:r||y4e(t)||n}const vMe=async function(t){const e=this.getOffsetParent||HX,n=this.getDimensions,r=await n(t.floating);return{reference:gMe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bMe(t){return vs(t).direction==="rtl"}const yMe={convertOffsetParentRelativeRectToViewportRelativeRect:sMe,getDocumentElement:ql,getClippingRect:pMe,getOffsetParent:HX,getElementRects:vMe,getClientRects:lMe,getDimensions:mMe,getScale:em,isElement:vr,isRTL:bMe};function VX(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function xMe(t,e){let n=null,r;const i=ql(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const u=t.getBoundingClientRect(),{left:c,top:f,width:d,height:h}=u;if(s||e(),!d||!h)return;const m=qy(f),v=qy(i.clientWidth-(c+d)),b=qy(i.clientHeight-(f+h)),x=qy(c),w={rootMargin:-m+"px "+-v+"px "+-b+"px "+-x+"px",threshold:Ji(0,Xs(1,l))||1};let A=!0;function E(T){const N=T[0].intersectionRatio;if(N!==l){if(!A)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!VX(u,t.getBoundingClientRect())&&a(),A=!1}try{n=new IntersectionObserver(E,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,w)}n.observe(t)}return a(!0),o}function xw(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=w_(t),c=i||o?[...u?Lu(u):[],...Lu(e)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const f=u&&s?xMe(u,n):null;let d=-1,h=null;a&&(h=new ResizeObserver(x=>{let[C]=x;C&&C.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let m,v=l?oh(t):null;l&&b();function b(){const x=oh(t);v&&!VX(v,x)&&n(),v=x,m=requestAnimationFrame(b)}return n(),()=>{var x;c.forEach(C=>{i&&C.removeEventListener("scroll",n),o&&C.removeEventListener("resize",n)}),f?.(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const wMe=tMe,EMe=K4e,CMe=nMe,SMe=X4e,TMe=iMe,AMe=Z4e,QL=Y4e,NMe=J4e,DMe=rMe,MMe=(t,e,n)=>{const r=new Map,i={platform:yMe,...n},o={...i.platform,_c:r};return G4e(t,e,{...i,platform:o})};var kMe=typeof document<"u",_Me=function(){},U2=kMe?q.useLayoutEffect:_Me;function ww(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ww(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!ww(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function qX(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function JL(t,e){const n=qX(t);return Math.round(e*n)/n}function t3(t){const e=q.useRef(t);return U2(()=>{e.current=t}),e}function OMe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:u}=t,[c,f]=q.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=q.useState(r);ww(d,r)||h(r);const[m,v]=q.useState(null),[b,x]=q.useState(null),C=q.useCallback(G=>{G!==T.current&&(T.current=G,v(G))},[]),w=q.useCallback(G=>{G!==N.current&&(N.current=G,x(G))},[]),A=o||m,E=a||b,T=q.useRef(null),N=q.useRef(null),D=q.useRef(c),M=l!=null,k=t3(l),B=t3(i),P=t3(u),$=q.useCallback(()=>{if(!T.current||!N.current)return;const G={placement:e,strategy:n,middleware:d};B.current&&(G.platform=B.current),MMe(T.current,N.current,G).then(Z=>{const H={...Z,isPositioned:P.current!==!1};z.current&&!ww(D.current,H)&&(D.current=H,Vs.flushSync(()=>{f(H)}))})},[d,e,n,B,P]);U2(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[u]);const z=q.useRef(!1);U2(()=>(z.current=!0,()=>{z.current=!1}),[]),U2(()=>{if(A&&(T.current=A),E&&(N.current=E),A&&E){if(k.current)return k.current(A,E,$);$()}},[A,E,$,k,M]);const j=q.useMemo(()=>({reference:T,floating:N,setReference:C,setFloating:w}),[C,w]),L=q.useMemo(()=>({reference:A,floating:E}),[A,E]),U=q.useMemo(()=>{const G={position:n,left:0,top:0};if(!L.floating)return G;const Z=JL(L.floating,c.x),H=JL(L.floating,c.y);return s?{...G,transform:"translate("+Z+"px, "+H+"px)",...qX(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:H}},[n,s,L.floating,c.x,c.y]);return q.useMemo(()=>({...c,update:$,refs:j,elements:L,floatingStyles:U}),[c,$,j,L,U])}const IMe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?QL({element:r.current,padding:i}).fn(n):{}:r?QL({element:r,padding:i}).fn(n):{}}}},hs=(t,e)=>({...wMe(t),options:[t,e]}),Rf=(t,e)=>({...CMe(t),options:[t,e]}),eF=(t,e)=>({...DMe(t),options:[t,e]}),Vu=(t,e)=>({...SMe(t),options:[t,e]}),U1=(t,e)=>({...TMe(t),options:[t,e]}),jX=(t,e)=>({...EMe(t),options:[t,e]}),RMe=(t,e)=>({...AMe(t),options:[t,e]}),l1=(t,e)=>({...NMe(t),options:[t,e]}),GX=(t,e)=>({...IMe(t),options:[t,e]});function BMe(t){const e=q.useRef(void 0),n=q.useCallback(r=>{const i=t.map(o=>{if(o!=null){if(typeof o=="function"){const a=o,s=a(r);return typeof s=="function"?s:()=>{a(null)}}return o.current=r,()=>{o.current=null}}});return()=>{i.forEach(o=>o?.())}},t);return q.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}const LMe="data-floating-ui-focusable",tF="active",nF="selected",FMe={...eV};let rF=!1,PMe=0;const iF=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PMe++;function $Me(){const[t,e]=q.useState(()=>rF?iF():void 0);return ds(()=>{t==null&&e(iF())},[]),q.useEffect(()=>{rF=!0},[]),t}const zMe=FMe.useId,YX=zMe||$Me;function UMe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const HMe=q.createContext(null),VMe=q.createContext(null),E_=()=>{var t;return((t=q.useContext(HMe))==null?void 0:t.id)||null},C_=()=>q.useContext(VMe);function S_(t){return"data-floating-ui-"+t}function qo(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const oF=S_("safe-polygon");function H2(t,e,n){if(n&&!A4(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r?.[e]}return t?.[e]}function n3(t){return typeof t=="function"?t():t}function WX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:a}=t,{enabled:s=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=e,h=C_(),m=E_(),v=Jc(u),b=Jc(l),x=Jc(n),C=Jc(f),w=q.useRef(),A=q.useRef(-1),E=q.useRef(),T=q.useRef(-1),N=q.useRef(!0),D=q.useRef(!1),M=q.useRef(()=>{}),k=q.useRef(!1),B=Ml(()=>{var U;const G=(U=i.current.openEvent)==null?void 0:U.type;return G?.includes("mouse")&&G!=="mousedown"});q.useEffect(()=>{if(!s)return;function U(G){let{open:Z}=G;Z||(qo(A),qo(T),N.current=!0,k.current=!1)}return o.on("openchange",U),()=>{o.off("openchange",U)}},[s,o]),q.useEffect(()=>{if(!s||!v.current||!n)return;function U(Z){B()&&r(!1,Z,"hover")}const G=kd(a.floating).documentElement;return G.addEventListener("mouseleave",U),()=>{G.removeEventListener("mouseleave",U)}},[a.floating,n,r,s,v,B]);const P=q.useCallback(function(U,G,Z){G===void 0&&(G=!0),Z===void 0&&(Z="hover");const H=H2(b.current,"close",w.current);H&&!E.current?(qo(A),A.current=window.setTimeout(()=>r(!1,U,Z),H)):G&&(qo(A),r(!1,U,Z))},[b,r]),$=Ml(()=>{M.current(),E.current=void 0}),z=Ml(()=>{if(D.current){const U=kd(a.floating).body;U.style.pointerEvents="",U.removeAttribute(oF),D.current=!1}}),j=Ml(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);q.useEffect(()=>{if(!s)return;function U(K){if(qo(A),N.current=!1,c&&!A4(w.current)||n3(C.current)>0&&!H2(b.current,"open"))return;const I=H2(b.current,"open",w.current);I?A.current=window.setTimeout(()=>{x.current||r(!0,K,"hover")},I):n||r(!0,K,"hover")}function G(K){if(j()){z();return}M.current();const I=kd(a.floating);if(qo(T),k.current=!1,v.current&&i.current.floatingContext){n||qo(A),E.current=v.current({...i.current.floatingContext,tree:h,x:K.clientX,y:K.clientY,onClose(){z(),$(),j()||P(K,!0,"safe-polygon")}});const Q=E.current;I.addEventListener("mousemove",Q),M.current=()=>{I.removeEventListener("mousemove",Q)};return}(w.current!=="touch"||!z1(a.floating,K.relatedTarget))&&P(K)}function Z(K){j()||i.current.floatingContext&&(v.current==null||v.current({...i.current.floatingContext,tree:h,x:K.clientX,y:K.clientY,onClose(){z(),$(),j()||P(K)}})(K))}function H(){qo(A)}function W(K){j()||P(K,!1)}if(vr(a.domReference)){const K=a.domReference,I=a.floating;return n&&K.addEventListener("mouseleave",Z),d&&K.addEventListener("mousemove",U,{once:!0}),K.addEventListener("mouseenter",U),K.addEventListener("mouseleave",G),I&&(I.addEventListener("mouseleave",Z),I.addEventListener("mouseenter",H),I.addEventListener("mouseleave",W)),()=>{n&&K.removeEventListener("mouseleave",Z),d&&K.removeEventListener("mousemove",U),K.removeEventListener("mouseenter",U),K.removeEventListener("mouseleave",G),I&&(I.removeEventListener("mouseleave",Z),I.removeEventListener("mouseenter",H),I.removeEventListener("mouseleave",W))}}},[a,s,t,c,d,P,$,z,r,n,x,h,b,v,i,j,C]),ds(()=>{var U;if(s&&n&&(U=v.current)!=null&&(U=U.__options)!=null&&U.blockPointerEvents&&B()){D.current=!0;const Z=a.floating;if(vr(a.domReference)&&Z){var G;const H=kd(a.floating).body;H.setAttribute(oF,"");const W=a.domReference,K=h==null||(G=h.nodesRef.current.find(I=>I.id===m))==null||(G=G.context)==null?void 0:G.elements.floating;return K&&(K.style.pointerEvents=""),H.style.pointerEvents="none",W.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{H.style.pointerEvents="",W.style.pointerEvents="",Z.style.pointerEvents=""}}}},[s,n,m,a,h,v,B]),ds(()=>{n||(w.current=void 0,k.current=!1,$(),z())},[n,$,z]),q.useEffect(()=>()=>{$(),qo(A),qo(T),z()},[s,a.domReference,$,z]);const L=q.useMemo(()=>{function U(G){w.current=G.pointerType}return{onPointerDown:U,onPointerEnter:U,onMouseMove(G){const{nativeEvent:Z}=G;function H(){!N.current&&!x.current&&r(!0,Z,"hover")}c&&!A4(w.current)||n||n3(C.current)===0||k.current&&G.movementX**2+G.movementY**2<2||(qo(T),w.current==="touch"?H():(k.current=!0,T.current=window.setTimeout(H,n3(C.current))))}}},[c,r,n,x,C]);return q.useMemo(()=>s?{reference:L}:{},[s,L])}const N4=()=>{},KX=q.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:N4,setState:N4,isInstantPhase:!1}),qMe=()=>q.useContext(KX);function jMe(t){const{children:e,delay:n,timeoutMs:r=0}=t,[i,o]=q.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=q.useRef(null),s=q.useCallback(l=>{o({currentId:l})},[]);return ds(()=>{i.currentId?a.current===null?a.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),a.current=null)},[i.currentId,i.isInstantPhase]),_.jsx(KX.Provider,{value:q.useMemo(()=>({...i,setState:o,setCurrentId:s}),[i,s]),children:e})}function GMe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:i}=t,{id:o,enabled:a=!0}=e,s=o??i,l=qMe(),{currentId:u,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=l;return ds(()=>{a&&u&&(d({delay:{open:1,close:H2(f,"close")}}),u!==s&&r(!1))},[a,s,r,d,u,f]),ds(()=>{function m(){r(!1),d({delay:f,currentId:null})}if(a&&u&&!n&&u===s){if(h){const v=window.setTimeout(m,h);return()=>{clearTimeout(v)}}m()}},[a,n,d,u,s,r,f,h]),ds(()=>{a&&(c===N4||!n||c(s))},[a,n,c,s]),l}function r3(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&gw(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function YMe(t){return"composedPath"in t?t.composedPath()[0]:t.target}const WMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},KMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},aF=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function XX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=t,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:m}=e,v=C_(),b=Ml(typeof l=="function"?l:()=>!1),x=typeof l=="function"?b:l,C=q.useRef(!1),{escapeKey:w,outsidePress:A}=aF(h),{escapeKey:E,outsidePress:T}=aF(m),N=q.useRef(!1),D=Ml(z=>{var j;if(!n||!a||!s||z.key!=="Escape"||N.current)return;const L=(j=o.current.floatingContext)==null?void 0:j.nodeId,U=v?z2(v.nodesRef.current,L):[];if(!w&&(z.stopPropagation(),U.length>0)){let G=!0;if(U.forEach(Z=>{var H;if((H=Z.context)!=null&&H.open&&!Z.context.dataRef.current.__escapeKeyBubbles){G=!1;return}}),!G)return}r(!1,z4e(z)?z.nativeEvent:z,"escape-key")}),M=Ml(z=>{var j;const L=()=>{var U;D(z),(U=Bp(z))==null||U.removeEventListener("keydown",L)};(j=Bp(z))==null||j.addEventListener("keydown",L)}),k=Ml(z=>{var j;const L=o.current.insideReactTree;o.current.insideReactTree=!1;const U=C.current;if(C.current=!1,u==="click"&&U||L||typeof x=="function"&&!x(z))return;const G=Bp(z),Z="["+S_("inert")+"]",H=kd(i.floating).querySelectorAll(Z);let W=vr(G)?G:null;for(;W&&!Bu(W);){const Q=Hu(W);if(Bu(Q)||!vr(Q))break;W=Q}if(H.length&&vr(G)&&!L4e(G)&&!z1(G,i.floating)&&Array.from(H).every(Q=>!z1(W,Q)))return;if(Da(G)&&$){const Q=Bu(G),ce=vs(G),ve=/auto|scroll/,ie=Q||ve.test(ce.overflowX),X=Q||ve.test(ce.overflowY),le=ie&&G.clientWidth>0&&G.scrollWidth>G.clientWidth,Ce=X&&G.clientHeight>0&&G.scrollHeight>G.clientHeight,he=ce.direction==="rtl",Te=Ce&&(he?z.offsetX<=G.offsetWidth-G.clientWidth:z.offsetX>G.clientWidth),Ae=le&&z.offsetY>G.clientHeight;if(Te||Ae)return}const K=(j=o.current.floatingContext)==null?void 0:j.nodeId,I=v&&z2(v.nodesRef.current,K).some(Q=>{var ce;return JN(z,(ce=Q.context)==null?void 0:ce.elements.floating)});if(JN(z,i.floating)||JN(z,i.domReference)||I)return;const ee=v?z2(v.nodesRef.current,K):[];if(ee.length>0){let Q=!0;if(ee.forEach(ce=>{var ve;if((ve=ce.context)!=null&&ve.open&&!ce.context.dataRef.current.__outsidePressBubbles){Q=!1;return}}),!Q)return}r(!1,z,"outside-press")}),B=Ml(z=>{var j;const L=()=>{var U;k(z),(U=Bp(z))==null||U.removeEventListener(u,L)};(j=Bp(z))==null||j.addEventListener(u,L)});q.useEffect(()=>{if(!n||!a)return;o.current.__escapeKeyBubbles=w,o.current.__outsidePressBubbles=A;let z=-1;function j(H){r(!1,H,"ancestor-scroll")}function L(){window.clearTimeout(z),N.current=!0}function U(){z=window.setTimeout(()=>{N.current=!1},fC()?5:0)}const G=kd(i.floating);s&&(G.addEventListener("keydown",E?M:D,E),G.addEventListener("compositionstart",L),G.addEventListener("compositionend",U)),x&&G.addEventListener(u,T?B:k,T);let Z=[];return d&&(vr(i.domReference)&&(Z=Lu(i.domReference)),vr(i.floating)&&(Z=Z.concat(Lu(i.floating))),!vr(i.reference)&&i.reference&&i.reference.contextElement&&(Z=Z.concat(Lu(i.reference.contextElement)))),Z=Z.filter(H=>{var W;return H!==((W=G.defaultView)==null?void 0:W.visualViewport)}),Z.forEach(H=>{H.addEventListener("scroll",j,{passive:!0})}),()=>{s&&(G.removeEventListener("keydown",E?M:D,E),G.removeEventListener("compositionstart",L),G.removeEventListener("compositionend",U)),x&&G.removeEventListener(u,T?B:k,T),Z.forEach(H=>{H.removeEventListener("scroll",j)}),window.clearTimeout(z)}},[o,i,s,x,u,n,r,d,a,w,A,D,E,M,k,T,B]),q.useEffect(()=>{o.current.insideReactTree=!1},[o,x,u]);const P=q.useMemo(()=>({onKeyDown:D,...c&&{[WMe[f]]:z=>{r(!1,z.nativeEvent,"reference-press")},...f!=="click"&&{onClick(z){r(!1,z.nativeEvent,"reference-press")}}}}),[D,r,c,f]),$=q.useMemo(()=>({onKeyDown:D,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[KMe[u]]:()=>{o.current.insideReactTree=!0}}),[D,u,o]);return q.useMemo(()=>a?{reference:P,floating:$}:{},[a,P,$])}function XMe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=YX(),o=q.useRef({}),[a]=q.useState(()=>UMe()),s=E_()!=null,[l,u]=q.useState(r.reference),c=Ml((h,m,v)=>{o.current.openEvent=h?m:void 0,a.emit("openchange",{open:h,event:m,reason:v,nested:s}),n?.(h,m,v)}),f=q.useMemo(()=>({setPositionReference:u}),[]),d=q.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return q.useMemo(()=>({dataRef:o,open:e,onOpenChange:c,elements:d,events:a,floatingId:i,refs:f}),[e,c,d,a,i,f])}function pC(t){t===void 0&&(t={});const{nodeId:e}=t,n=XMe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[o,a]=q.useState(null),[s,l]=q.useState(null),c=i?.domReference||o,f=q.useRef(null),d=C_();ds(()=>{c&&(f.current=c)},[c]);const h=OMe({...t,elements:{...i,...s&&{reference:s}}}),m=q.useCallback(w=>{const A=vr(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(A),h.refs.setReference(A)},[h.refs]),v=q.useCallback(w=>{(vr(w)||w===null)&&(f.current=w,a(w)),(vr(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!vr(w))&&h.refs.setReference(w)},[h.refs]),b=q.useMemo(()=>({...h.refs,setReference:v,setPositionReference:m,domReference:f}),[h.refs,v,m]),x=q.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),C=q.useMemo(()=>({...h,...r,refs:b,elements:x,nodeId:e}),[h,b,x,e,r]);return ds(()=>{r.dataRef.current.floatingContext=C;const w=d?.nodesRef.current.find(A=>A.id===e);w&&(w.context=C)}),q.useMemo(()=>({...h,context:C,refs:b,elements:x}),[h,b,x,C])}function i3(){return I4e()&&O4e()}function ZMe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:a}=t,{enabled:s=!0,visibleOnly:l=!0}=e,u=q.useRef(!1),c=q.useRef(-1),f=q.useRef(!0);q.useEffect(()=>{if(!s)return;const h=ta(a.domReference);function m(){!n&&Da(a.domReference)&&a.domReference===jL(kd(a.domReference))&&(u.current=!0)}function v(){f.current=!0}function b(){f.current=!1}return h.addEventListener("blur",m),i3()&&(h.addEventListener("keydown",v,!0),h.addEventListener("pointerdown",b,!0)),()=>{h.removeEventListener("blur",m),i3()&&(h.removeEventListener("keydown",v,!0),h.removeEventListener("pointerdown",b,!0))}},[a.domReference,n,s]),q.useEffect(()=>{if(!s)return;function h(m){let{reason:v}=m;(v==="reference-press"||v==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,s]),q.useEffect(()=>()=>{qo(c)},[]);const d=q.useMemo(()=>({onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const m=Bp(h.nativeEvent);if(l&&vr(m)){if(i3()&&!h.relatedTarget){if(!f.current&&!F4e(m))return}else if(!P4e(m))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const m=h.relatedTarget,v=h.nativeEvent,b=vr(m)&&m.hasAttribute(S_("focus-guard"))&&m.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var x;const C=jL(a.domReference?a.domReference.ownerDocument:document);!m&&C===a.domReference||z1((x=o.current.floatingContext)==null?void 0:x.refs.floating.current,C)||z1(a.domReference,C)||b||r(!1,v,"focus")})}}),[o,a.domReference,r,l]);return q.useMemo(()=>s?{reference:d}:{},[s,d])}function o3(t,e,n){const r=new Map,i=n==="item";let o=t;if(i&&t){const{[tF]:a,[nF]:s,...l}=t;o=l}return{...n==="floating"&&{tabIndex:-1,[LMe]:""},...o,...e.map(a=>{const s=a?a[n]:null;return typeof s=="function"?t?s(t):null:s}).concat(t).reduce((a,s)=>(s&&Object.entries(s).forEach(l=>{let[u,c]=l;if(!(i&&[tF,nF].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var f;(f=r.get(u))==null||f.push(c),a[u]=function(){for(var d,h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return(d=r.get(u))==null?void 0:d.map(b=>b(...m)).find(b=>b!==void 0)}}}else a[u]=c}),a),{})}}function ZX(t){t===void 0&&(t=[]);const e=t.map(s=>s?.reference),n=t.map(s=>s?.floating),r=t.map(s=>s?.item),i=q.useCallback(s=>o3(s,t,"reference"),e),o=q.useCallback(s=>o3(s,t,"floating"),n),a=q.useCallback(s=>o3(s,t,"item"),r);return q.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}const QMe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function JMe(t,e){var n,r;e===void 0&&(e={});const{open:i,elements:o,floatingId:a}=t,{enabled:s=!0,role:l="dialog"}=e,u=YX(),c=((n=o.domReference)==null?void 0:n.id)||u,f=q.useMemo(()=>{var C;return((C=$4e(o.floating))==null?void 0:C.id)||a},[o.floating,a]),d=(r=QMe.get(l))!=null?r:l,m=E_()!=null,v=q.useMemo(()=>d==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:i?f:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":d==="alertdialog"?"dialog":d,"aria-controls":i?f:void 0,...d==="listbox"&&{role:"combobox"},...d==="menu"&&{id:c},...d==="menu"&&m&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[d,f,m,i,c,l]),b=q.useMemo(()=>{const C={id:f,...d&&{role:d}};return d==="tooltip"||l==="label"?C:{...C,...d==="menu"&&{"aria-labelledby":c}}},[d,f,c,l]),x=q.useCallback(C=>{let{active:w,selected:A}=C;const E={role:"option",...w&&{id:f+"-fui-option"}};switch(l){case"select":case"combobox":return{...E,"aria-selected":A}}return{}},[f,l]);return q.useMemo(()=>s?{reference:v,floating:b,item:x}:{},[s,v,b,x])}const sF=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function vp(t,e){return typeof t=="function"?t(e):t}function eke(t,e){const[n,r]=q.useState(t);return t&&!n&&r(!0),q.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function QX(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,a=(typeof i=="number"?i:i.close)||0,[s,l]=q.useState("unmounted"),u=eke(n,a);return!u&&s==="close"&&l("unmounted"),ds(()=>{if(r){if(n){l("initial");const c=requestAnimationFrame(()=>{Vs.flushSync(()=>{l("open")})});return()=>{cancelAnimationFrame(c)}}l("close")}},[n,r]),{isMounted:u,status:s}}function tke(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:o,duration:a=250}=e,s=t.placement,l=s.split("-")[0],u=q.useMemo(()=>({side:l,placement:s}),[l,s]),c=typeof a=="number",f=(c?a:a.open)||0,d=(c?a:a.close)||0,[h,m]=q.useState(()=>({...vp(o,u),...vp(n,u)})),{isMounted:v,status:b}=QX(t,{duration:a}),x=Jc(n),C=Jc(r),w=Jc(i),A=Jc(o);return ds(()=>{const E=vp(x.current,u),T=vp(w.current,u),N=vp(A.current,u),D=vp(C.current,u)||Object.keys(E).reduce((M,k)=>(M[k]="",M),{});if(b==="initial"&&m(M=>({transitionProperty:M.transitionProperty,...N,...E})),b==="open"&&m({transitionProperty:Object.keys(D).map(sF).join(","),transitionDuration:f+"ms",...N,...D}),b==="close"){const M=T||E;m({transitionProperty:Object.keys(M).map(sF).join(","),transitionDuration:d+"ms",...N,...M})}},[d,w,x,C,A,f,b,u]),{isMounted:v,styles:h}}function JX(t,e,n){return n===void 0&&(n=!0),t.filter(i=>{var o;return i.parentId===e&&(!n||((o=i.context)==null?void 0:o.open))}).flatMap(i=>[i,...JX(t,i.id,n)])}function lF(t,e){const[n,r]=t;let i=!1;const o=e.length;for(let a=0,s=o-1;a<o;s=a++){const[l,u]=e[a]||[0,0],[c,f]=e[s]||[0,0];u>=r!=f>=r&&n<=(c-l)*(r-u)/(f-u)+l&&(i=!i)}return i}function nke(t,e){return t[0]>=e.x&&t[0]<=e.x+e.width&&t[1]>=e.y&&t[1]<=e.y+e.height}function rke(t){t===void 0&&(t={});const{buffer:e=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=t,i={current:-1};let o=!1,a=null,s=null,l=typeof performance<"u"?performance.now():0;function u(f,d){const h=performance.now(),m=h-l;if(a===null||s===null||m===0)return a=f,s=d,l=h,null;const v=f-a,b=d-s,C=Math.sqrt(v*v+b*b)/m;return a=f,s=d,l=h,C}const c=f=>{let{x:d,y:h,placement:m,elements:v,onClose:b,nodeId:x,tree:C}=f;return function(A){function E(){qo(i),b()}if(qo(i),!v.domReference||!v.floating||m==null||d==null||h==null)return;const{clientX:T,clientY:N}=A,D=[T,N],M=YMe(A),k=A.type==="mouseleave",B=r3(v.floating,M),P=r3(v.domReference,M),$=v.domReference.getBoundingClientRect(),z=v.floating.getBoundingClientRect(),j=m.split("-")[0],L=d>z.right-z.width/2,U=h>z.bottom-z.height/2,G=nke(D,$),Z=z.width>$.width,H=z.height>$.height,W=(Z?$:z).left,K=(Z?$:z).right,I=(H?$:z).top,ee=(H?$:z).bottom;if(B&&(o=!0,!k))return;if(P&&(o=!1),P&&!k){o=!0;return}if(k&&vr(A.relatedTarget)&&r3(v.floating,A.relatedTarget)||C&&JX(C.nodesRef.current,x).length)return;if(j==="top"&&h>=$.bottom-1||j==="bottom"&&h<=$.top+1||j==="left"&&d>=$.right-1||j==="right"&&d<=$.left+1)return E();let Q=[];switch(j){case"top":Q=[[W,$.top+1],[W,z.bottom-1],[K,z.bottom-1],[K,$.top+1]];break;case"bottom":Q=[[W,z.top+1],[W,$.bottom-1],[K,$.bottom-1],[K,z.top+1]];break;case"left":Q=[[z.right-1,ee],[z.right-1,I],[$.left+1,I],[$.left+1,ee]];break;case"right":Q=[[$.right-1,ee],[$.right-1,I],[z.left+1,I],[z.left+1,ee]];break}function ce(ve){let[ie,X]=ve;switch(j){case"top":{const le=[Z?ie+e/2:L?ie+e*4:ie-e*4,X+e+1],Ce=[Z?ie-e/2:L?ie+e*4:ie-e*4,X+e+1],he=[[z.left,L||Z?z.bottom-e:z.top],[z.right,L?Z?z.bottom-e:z.top:z.bottom-e]];return[le,Ce,...he]}case"bottom":{const le=[Z?ie+e/2:L?ie+e*4:ie-e*4,X-e],Ce=[Z?ie-e/2:L?ie+e*4:ie-e*4,X-e],he=[[z.left,L||Z?z.top+e:z.bottom],[z.right,L?Z?z.top+e:z.bottom:z.top+e]];return[le,Ce,...he]}case"left":{const le=[ie+e+1,H?X+e/2:U?X+e*4:X-e*4],Ce=[ie+e+1,H?X-e/2:U?X+e*4:X-e*4];return[...[[U||H?z.right-e:z.left,z.top],[U?H?z.right-e:z.left:z.right-e,z.bottom]],le,Ce]}case"right":{const le=[ie-e,H?X+e/2:U?X+e*4:X-e*4],Ce=[ie-e,H?X-e/2:U?X+e*4:X-e*4],he=[[U||H?z.left+e:z.right,z.top],[U?H?z.left+e:z.right:z.left+e,z.bottom]];return[le,Ce,...he]}}}if(!lF([T,N],Q)){if(o&&!G)return E();if(!k&&r){const ve=u(A.clientX,A.clientY);if(ve!==null&&ve<.1)return E()}lF([T,N],ce([d,h]))?!o&&r&&(i.current=window.setTimeout(E,40)):E()}}};return c.__options={blockPointerEvents:n},c}var a3={exports:{}},s3={},l3={exports:{}},u3={};var uF;function ike(){if(uF)return u3;uF=1;var t=Lm();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function s(f,d){var h=d(),m=r({inst:{value:h,getSnapshot:d}}),v=m[0].inst,b=m[1];return o(function(){v.value=h,v.getSnapshot=d,l(v)&&b({inst:v})},[f,h,d]),i(function(){return l(v)&&b({inst:v}),f(function(){l(v)&&b({inst:v})})},[f]),a(h),h}function l(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function u(f,d){return d()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:s;return u3.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,u3}var cF;function oke(){return cF||(cF=1,l3.exports=ike()),l3.exports}var fF;function ake(){if(fF)return s3;fF=1;var t=Lm(),e=oke();function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,s=t.useMemo,l=t.useDebugValue;return s3.useSyncExternalStoreWithSelector=function(u,c,f,d,h){var m=o(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=s(function(){function x(T){if(!C){if(C=!0,w=T,T=d(T),h!==void 0&&v.hasValue){var N=v.value;if(h(N,T))return A=N}return A=T}if(N=A,r(w,T))return N;var D=d(T);return h!==void 0&&h(N,D)?(w=T,N):(w=T,A=D)}var C=!1,w,A,E=f===void 0?null:f;return[function(){return x(c())},E===null?void 0:function(){return x(E())}]},[c,f,d,h]);var b=i(u,m[0],m[1]);return a(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},s3}var dF;function ske(){return dF||(dF=1,a3.exports=ake()),a3.exports}var lke=ske();function uke(t,e=n=>n){return lke.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,cke)}function cke(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=hF(t);if(n.length!==hF(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function hF(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}var fke=Object.defineProperty,dke=(t,e,n)=>e in t?fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tg=(t,e,n)=>dke(t,typeof e!="symbol"?e+"":e,n);const eZ=q.createContext(void 0);function il(t){return q.useContext(eZ)}const tZ=q.createContext(void 0);function _t(){return q.useContext(tZ)}function $t(t){const e=il();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function sn(){return il().editor.dictionary}const hke=t=>{const e=_t(),n=sn(),r=$t(),i=r.getBlock(t.blockId),[o,a]=q.useState(""),s=q.useCallback(c=>{a(c.currentTarget.value)},[]),l=q.useCallback(c=>{c.key==="Enter"&&(c.preventDefault(),r.updateBlock(i.id,{props:{name:_7(o),url:o}}))},[r,i.id,o]),u=q.useCallback(()=>{r.updateBlock(i.id,{props:{name:_7(o),url:o}})},[r,i.id,o]);return _.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[_.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:o,onChange:s,onKeyDown:l,"data-test":"embed-input"}),_.jsx(e.FilePanel.Button,{className:"bn-button",onClick:u,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[i.type]||n.file_panel.embed.embed_button.file})]})},pke=t=>{var e,n;const r=_t(),i=sn(),{setLoading:o}=t,a=$t(),s=a.getBlock(t.blockId),[l,u]=q.useState(!1);q.useEffect(()=>{l&&setTimeout(()=>{u(!1)},3e3)},[l]);const c=q.useCallback(h=>{if(h===null)return;async function m(v){if(o(!0),a.uploadFile!==void 0)try{let b=await a.uploadFile(v,t.blockId);typeof b=="string"&&(b={props:{name:v.name,url:b}}),a.updateBlock(t.blockId,b)}catch{u(!0)}finally{o(!1)}}m(h)},[t.blockId,a,o]),f=a.schema.blockSpecs[s.type],d=(n=(e=f.implementation.meta)==null?void 0:e.fileBlockAccept)!=null&&n.length?f.implementation.meta.fileBlockAccept.join(","):"*/*";return _.jsxs(r.FilePanel.TabPanel,{className:"bn-tab-panel",children:[_.jsx(r.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:d,placeholder:i.file_panel.upload.file_placeholder[s.type]||i.file_panel.upload.file_placeholder.file,value:null,onChange:c}),l&&_.jsx("div",{className:"bn-error-text",children:i.file_panel.upload.upload_error})]})},nZ=t=>{const e=_t(),n=sn(),r=$t(),[i,o]=q.useState(!1),a=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:_.jsx(pke,{blockId:t.blockId,setLoading:o})}]:[],{name:n.file_panel.embed.title,tabPanel:_.jsx(hke,{blockId:t.blockId})}],[s,l]=q.useState(t.defaultOpenTab||a[0].name);return _.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:s,openTab:s,setOpenTab:l,tabs:a,loading:i})};function mke(t){let e=new DOMRect;const n="getBoundingClientRect"in t?()=>t.getBoundingClientRect():()=>t.element.getBoundingClientRect();return()=>"element"in t&&(t.cacheMountedBoundingClientRect??!0)?(t.element.isConnected&&(e=n()),e):n()}const kl=t=>{var e,n,r;const{refs:i,floatingStyles:o,context:a}=pC({whileElementsMounted:xw,...t.useFloatingOptions}),{isMounted:s,styles:l}=tke(a,t.useTransitionStylesProps),{status:u}=QX(a,t.useTransitionStatusProps),c=XX(a,t.useDismissProps),f=WX(a,{enabled:!1,...t.useHoverProps}),{getFloatingProps:d}=ZX([c,f]),h=q.useRef(""),m=q.useRef(null),v=BMe([m,i.setFloating]);if(q.useEffect(()=>{if(t.reference){const x="element"in t.reference?t.reference.element:void 0;x!==void 0&&i.setReference(x),i.setPositionReference({getBoundingClientRect:mke(t.reference),contextElement:x})}},[t.reference,i]),q.useEffect(()=>{var x;(u==="initial"||u==="open")&&(x=m.current)!=null&&x.innerHTML&&(h.current=m.current.innerHTML)},[u,t.reference,t.children]),!s)return!1;const b={...t.elementProps,style:{display:"flex",...(e=t.elementProps)==null?void 0:e.style,zIndex:`calc(var(--bn-ui-base-z-index) + ${((r=(n=t.elementProps)==null?void 0:n.style)==null?void 0:r.zIndex)||0})`,...o,...l},...d()};return u==="close"?_.jsx("div",{ref:v,...b,dangerouslySetInnerHTML:{__html:h.current}}):_.jsx("div",{ref:v,...b,children:t.children})},rZ=t=>{const{blockId:e,children:n,...r}=t,i=$t(),o=q.useMemo(()=>i.transact(a=>{if(!e)return;const s=Mo(e,a.doc);if(!s)return;const{node:l}=i.prosemirrorView.domAtPos(s.posBeforeNode+1);if(l instanceof Element)return{element:l}}),[i,e]);return _.jsx(kl,{reference:o,...r,children:e!==void 0&&n})};function Pn(t,e){const n=(e?.editor??$t()).getExtension(t);if(!n)throw new Error("Extension not found",{cause:{plugin:t}});return n}function fr(t,e){const{store:n}=Pn(t,e);if(!n)throw new Error("Store not found on plugin",{cause:{plugin:t}});return uke(n,e?.selector)}const gke=t=>{const e=$t(),n=Pn(Ls),r=fr(Ls),i=q.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:(a,s,l)=>{a||n.closeMenu(),l==="escape-key"&&e.focus()},middleware:[hs(10),Vu()]},elementProps:{style:{zIndex:90}},...t.floatingUIOptions}),[r,e,n,t.floatingUIOptions]),o=t.filePanel||nZ;return _.jsx(rZ,{blockId:r,...i,children:r&&_.jsx(o,{blockId:r})})};function vke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bke=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!(a==="_owner"&&e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const yke=vke(bke);var iZ={exports:{}},c3={},pF={exports:{}},f3={};var mF;function xke(){if(mF)return f3;mF=1;var t=xr;function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function s(f,d){var h=d(),m=r({inst:{value:h,getSnapshot:d}}),v=m[0].inst,b=m[1];return o(function(){v.value=h,v.getSnapshot=d,l(v)&&b({inst:v})},[f,h,d]),i(function(){return l(v)&&b({inst:v}),f(function(){l(v)&&b({inst:v})})},[f]),a(h),h}function l(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function u(f,d){return d()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:s;return f3.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,f3}var gF;function wke(){return gF||(gF=1,pF.exports=xke()),pF.exports}var vF;function Eke(){if(vF)return c3;vF=1;var t=xr,e=wke();function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,s=t.useMemo,l=t.useDebugValue;return c3.useSyncExternalStoreWithSelector=function(u,c,f,d,h){var m=o(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=s(function(){function x(T){if(!C){if(C=!0,w=T,T=d(T),h!==void 0&&v.hasValue){var N=v.value;if(h(N,T))return A=N}return A=T}if(N=A,r(w,T))return N;var D=d(T);return h!==void 0&&h(N,D)?(w=T,N):(w=T,A=D)}var C=!1,w,A,E=f===void 0?null:f;return[function(){return x(c())},E===null?void 0:function(){return x(E())}]},[c,f,d,h]);var b=i(u,m[0],m[1]);return a(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},c3}iZ.exports=Eke();var Cke=iZ.exports;const Ske=typeof window<"u"?q.useLayoutEffect:q.useEffect;class Tke{constructor(e){Tg(this,"transactionNumber",0),Tg(this,"lastTransactionNumber",0),Tg(this,"lastSnapshot"),Tg(this,"editor"),Tg(this,"subscribers",new Set),this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e,n){if(this.editor=e,this.editor){const r=()=>{this.transactionNumber+=1,this.subscribers.forEach(a=>a())},i=this.editor._tiptapEditor,o={all:"transaction",selection:"selectionUpdate",change:"update"};return i.on(o[n],r),()=>{i.off(o[n],r)}}}}function Di(t){const e=il(),n=t.editor||e?.editor||null,r=t.on||"all",[i]=q.useState(()=>new Tke(n)),o=Cke.useSyncExternalStoreWithSelector(i.subscribe,i.getSnapshot,i.getServerSnapshot,t.selector,t.equalityFn??yke);return Ske(()=>i.watch(n,r),[n,i,r]),q.useDebugValue(o),o}const T_=t=>{const{position:e,children:n,...r}=t,{from:i,to:o}=e||{},a=$t(),s=q.useMemo(()=>{var l;if(!(i===void 0||o===void 0))return{element:((l=a.domElement)==null?void 0:l.firstElementChild)||void 0,getBoundingClientRect:()=>ck(a.prosemirrorView,i,o??i)}},[a,i,o]);return _.jsx(kl,{reference:s,...r,children:e!==void 0&&n})};var oZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bF=xr.createContext&&xr.createContext(oZ),Ake=["attr","size","title"];function Nke(t,e){if(t==null)return{};var n=Dke(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ew(){return Ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ew.apply(this,arguments)}function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){Mke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mke(t,e,n){return e=kke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kke(t){var e=_ke(t,"string");return typeof e=="symbol"?e:e+""}function _ke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aZ(t){return t&&t.map((e,n)=>xr.createElement(e.tag,Cw({key:n},e.attr),aZ(e.child)))}function It(t){return e=>xr.createElement(Oke,Ew({attr:Cw({},t.attr)},e),aZ(t.child))}function Oke(t){var e=n=>{var{attr:r,size:i,title:o}=t,a=Nke(t,Ake),s=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),xr.createElement("svg",Ew({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Cw(Cw({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&xr.createElement("title",null,o),t.children)};return bF!==void 0?xr.createElement(bF.Consumer,null,n=>e(n)):e(oZ)}function Ike(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function sZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function Rke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function Bke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function Lke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function Fke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function Pke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function $ke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function zke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function Uke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function Hke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function xF(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function Sw(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function Tw(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function Aw(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function lZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function uZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function cZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function Vke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function qke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function wF(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function jke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function Gke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function fZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function dZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function hZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function pZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function Yke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function Wke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function mZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function Kke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function Xke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function A_(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function Zke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function Qke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function Jke(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function e_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function t_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function gZ(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function n_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function r_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function i_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function o_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function a_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function s_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function l_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function u_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function c_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11V13H19V11H5Z"},child:[]}]})(t)}function f_e(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function EF(t){return It({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}const d_e={bold:Uke,italic:jke,underline:Zke,strike:Kke,code:Bke};function h_e(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const jy=t=>{const e=sn(),n=_t(),r=$t(),i=Di({editor:r,selector:({editor:s})=>{var l;if(!(!s.isEditable||!h_e(t.basicTextStyle,s)||!(((l=s.getSelection())==null?void 0:l.blocks)||[s.getTextCursorPosition().block]).find(u=>u.content!==void 0)))return t.basicTextStyle in s.getActiveStyles()?{active:!0}:{active:!1}}}),o=q.useCallback(s=>{r.focus(),r.toggleStyles({[s]:!0})},[r,t]);if(i===void 0)return null;const a=d_e[t.basicTextStyle];return _.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>o(t.basicTextStyle),isSelected:i.active,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:Qa(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:_.jsx(a,{})})},D4=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,i=q.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return _.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:i,children:"A"})},CF=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],mC=t=>{const e=_t(),n=sn();return _.jsxs(_.Fragment,{children:[_.jsx(()=>t.text?_.jsxs(_.Fragment,{children:[_.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),CF.map(r=>_.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:_.jsx(D4,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),_.jsx(()=>t.background?_.jsxs(_.Fragment,{children:[_.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),CF.map(r=>_.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:_.jsx(D4,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function Gy(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const p_e=()=>{const t=_t(),e=sn(),n=$t(),r=Gy("text",n),i=Gy("background",n),o=Di({editor:n,selector:({editor:l})=>{var u;if(!l.isEditable||!(((u=l.getSelection())==null?void 0:u.blocks)||[l.getTextCursorPosition().block]).find(d=>d.content!==void 0))return;const c=Gy("text",l),f=Gy("background",l);if(!(!c&&!f))return{textColor:c?l.getActiveStyles().textColor||"default":void 0,backgroundColor:f?l.getActiveStyles().backgroundColor||"default":void 0}}}),a=q.useCallback(l=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");l==="default"?n.removeStyles({textColor:l}):n.addStyles({textColor:l}),setTimeout(()=>{n.focus()})},[n,r]),s=q.useCallback(l=>{if(!i)throw Error("Tried to set background color, but style does not exist in editor schema.");l==="default"?n.removeStyles({backgroundColor:l}):n.addStyles({backgroundColor:l}),setTimeout(()=>{n.focus()})},[i,n]);return o===void 0?null:_.jsxs(t.Generic.Menu.Root,{children:[_.jsx(t.Generic.Menu.Trigger,{children:_.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:_.jsx(D4,{textColor:o.textColor,backgroundColor:o.backgroundColor,size:20})})}),_.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:_.jsx(mC,{text:o.textColor?{color:o.textColor,setColor:a}:void 0,background:o.backgroundColor?{color:o.backgroundColor,setColor:s}:void 0})})]})},SF=t=>{for(const e of UK)if(t.startsWith(e))return t;return`${HK}://${t}`},vZ=t=>{const e=_t(),n=sn(),{editLink:r}=Pn(vv),{url:i,text:o,showTextField:a}=t,[s,l]=q.useState(i),[u,c]=q.useState(o);q.useEffect(()=>{l(i),c(o)},[o,i]);const f=q.useCallback(v=>{var b,x;v.key==="Enter"&&(v.preventDefault(),r(SF(s),u,t.range.from),(b=t.setToolbarOpen)==null||b.call(t,!1),(x=t.setToolbarPositionFrozen)==null||x.call(t,!1))},[r,s,u,t]),d=q.useCallback(v=>l(v.currentTarget.value),[]),h=q.useCallback(v=>c(v.currentTarget.value),[]),m=q.useCallback(()=>{var v,b;r(SF(s),u,t.range.from),(v=t.setToolbarOpen)==null||v.call(t,!1),(b=t.setToolbarPositionFrozen)==null||b.call(t,!1)},[r,s,u,t]);return _.jsxs(e.Generic.Form.Root,{children:[_.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:_.jsx(fZ,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:s,onKeyDown:f,onChange:d,onSubmit:m}),a!==!1&&_.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:_.jsx(A_,{}),placeholder:n.link_toolbar.form.title_placeholder,value:u,onKeyDown:f,onChange:h,onSubmit:m})]})};function m_e(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const g_e=()=>{const t=$t(),e=_t(),n=sn(),r=Pn(xf),{showSelection:i}=Pn(pw),[o,a]=q.useState(!1);q.useEffect(()=>(i(o),()=>i(!1)),[o,i]);const s=Di({editor:t,selector:({editor:l})=>{var u;if(!(!l.isEditable||!m_e(l)||jD(l.prosemirrorState.selection)||!(((u=l.getSelection())==null?void 0:u.blocks)||[l.getTextCursorPosition().block]).find(c=>c.content!==void 0)))return{url:l.getSelectedLinkUrl(),text:l.getSelectedText(),range:{from:l.prosemirrorState.selection.from,to:l.prosemirrorState.selection.to}}}});return q.useEffect(()=>{var l;const u=c=>{(c.ctrlKey||c.metaKey)&&c.key==="k"&&(a(!0),c.preventDefault())};return(l=t.domElement)==null||l.addEventListener("keydown",u),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",u)}},[t.domElement]),s===void 0?null:_.jsxs(e.Generic.Popover.Root,{open:o,children:[_.jsx(e.Generic.Popover.Trigger,{children:_.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:n.formatting_toolbar.link.tooltip,mainTooltip:n.formatting_toolbar.link.tooltip,secondaryTooltip:Qa(n.formatting_toolbar.link.secondary_tooltip,n.generic.ctrl_shortcut),icon:_.jsx(fZ,{}),onClick:()=>a(!0)})}),_.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:_.jsx(vZ,{url:s.url||"",text:s.text,range:s.range,showTextField:!1,setToolbarOpen:l=>r.store.setState(l)})})]})},v_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:l})=>{var u;if(!l.isEditable)return;const c=((u=l.getSelection())==null?void 0:u.blocks)||[l.getTextCursorPosition().block];if(c.length!==1)return;const f=c[0];if(Xo(f,l,f.type,{url:"string",caption:"string"}))return f}}),[i,o]=q.useState();q.useEffect(()=>{r!==void 0&&o(r.props.caption)},[r]);const a=q.useCallback(l=>o(l.currentTarget.value),[]),s=q.useCallback(l=>{r!==void 0&&Sr(n,r.type,{caption:"string"})&&l.key==="Enter"&&(l.preventDefault(),n.updateBlock(r.id,{props:{caption:i}}))},[r,i,n]);return r===void 0?null:_.jsxs(e.Generic.Popover.Root,{children:[_.jsx(e.Generic.Popover.Trigger,{children:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:_.jsx(wF,{})})}),_.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:_.jsx(e.Generic.Form.Root,{children:_.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:_.jsx(wF,{}),value:i||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:s,onChange:a})})})]})},b_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:o})=>{var a;if(!o.isEditable)return;const s=((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block];if(s.length!==1)return;const l=s[0];if(Xo(l,o,l.type,{url:"string"}))return l}}),i=q.useCallback(()=>{r!==void 0&&(n.focus(),n.removeBlocks([r.id]))},[r,n]);return r===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[r.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[r.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:_.jsx(o_e,{}),onClick:i})},y_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:l})=>{var u;if(!l.isEditable)return;const c=((u=l.getSelection())==null?void 0:u.blocks)||[l.getTextCursorPosition().block];if(c.length!==1)return;const f=c[0];if(Xo(f,l,f.type,{url:"string",name:"string"}))return f}}),[i,o]=q.useState();q.useEffect(()=>{r!==void 0&&o(r.props.name)},[r]);const a=q.useCallback(l=>o(l.currentTarget.value),[]),s=q.useCallback(l=>{r!==void 0&&Sr(n,r.type,{name:"string"})&&l.key==="Enter"&&(l.preventDefault(),n.updateBlock(r.id,{props:{name:i}}))},[r,i,n]);return r===void 0?null:_.jsxs(e.Generic.Popover.Root,{children:[_.jsx(e.Generic.Popover.Trigger,{children:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[r.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[r.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:_.jsx(xF,{})})}),_.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:_.jsx(e.Generic.Form.Root,{children:_.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:_.jsx(xF,{}),value:i||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[r.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:s,onChange:a})})})]})},x_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:i})=>{var o;if(!i.isEditable)return;const a=((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block];if(a.length!==1)return;const s=a[0];if(Xo(s,i,s.type,{url:"string"}))return s}});return r===void 0?null:_.jsxs(e.Generic.Popover.Root,{position:"bottom",children:[_.jsx(e.Generic.Popover.Trigger,{children:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",mainTooltip:t.formatting_toolbar.file_replace.tooltip[r.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[r.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:_.jsx(t_e,{})})}),_.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:_.jsx(nZ,{blockId:r.id})})]})},w_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:o})=>{var a;if(!(!o.isEditable||!(((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block]).find(s=>s.content!==void 0)))return{canNestBlock:o.canNestBlock()}}}),i=q.useCallback(()=>{r!==void 0&&r.canNestBlock&&(n.focus(),n.nestBlock())},[n,r]);return r===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!r.canNestBlock,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:Qa(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:_.jsx(qke,{})})},E_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:o})=>{var a;if(!(!o.isEditable||!(((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block]).find(s=>s.content!==void 0)))return{canUnnestBlock:o.canUnnestBlock()}}}),i=q.useCallback(()=>{r!==void 0&&r.canUnnestBlock&&(n.focus(),n.unnestBlock())},[n,r]);return r===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!r.canUnnestBlock,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:Qa(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:_.jsx(Vke,{})})},C_e=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:A_},{name:t.slash_menu.heading.title,type:"heading",props:{level:1,isToggleable:!1},icon:Sw},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2,isToggleable:!1},icon:Tw},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3,isToggleable:!1},icon:Aw},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4,isToggleable:!1},icon:lZ},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5,isToggleable:!1},icon:uZ},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6,isToggleable:!1},icon:cZ},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:Sw},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:Tw},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:Aw},{name:t.slash_menu.quote.title,type:"quote",icon:mZ},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:gZ},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:pZ},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:hZ},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:dZ}],S_e=t=>{const e=_t(),n=$t(),r=Di({editor:n,selector:({editor:s})=>{var l;return((l=s.getSelection())==null?void 0:l.blocks)||[s.getTextCursorPosition().block]}}),i=r[0],o=q.useMemo(()=>(t.items||C_e(n.dictionary)).filter(s=>Sr(n,s.type,Object.fromEntries(Object.entries(s.props||{}).map(([l,u])=>[l,typeof u])))),[n,t.items]),a=q.useMemo(()=>o.map(s=>{const l=s.icon,u=s.type===i.type,c=Object.entries(s.props||{}).filter(([f,d])=>d!==i.props[f]).length===0;return{text:s.name,icon:_.jsx(l,{size:16}),onClick:()=>{n.focus(),n.transact(()=>{for(const f of r)n.updateBlock(f,{type:s.type,props:s.props})})},isSelected:u&&c}}),[n,o,i.props,i.type,r]);return!q.useMemo(()=>a.find(s=>s.isSelected)!==void 0,[a])||!n.isEditable?null:_.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:a})},T_e=()=>{const t=sn(),e=_t(),n=Pn("comments"),{store:r}=Pn(xf),i=q.useCallback(()=>{n.startPendingComment(),r.setState(!1)},[n,r]);return _.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:_.jsx(sZ,{}),onClick:i})},A_e=()=>$t().getExtension("comments")?_.jsx(T_e,{}):null,N_e=()=>{const t=sn(),e=_t(),n=$t(),r=q.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:_.jsx(sZ,{}),onClick:r})};function M4(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const D_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:o})=>{var a;const s=((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block];if(s.length!==1)return;const l=s[0];if(Xo(l,o,l.type,{url:"string"}))return l}}),i=q.useCallback(()=>{r!==void 0&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(r.props.url).then(o=>window.open(M4(o,window.location.href))):window.open(M4(r.props.url,window.location.href)))},[r,n]);return r===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[r.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[r.type]||t.formatting_toolbar.file_download.tooltip.file,icon:_.jsx(s_e,{}),onClick:i})},M_e=()=>{const t=sn(),e=_t(),n=$t(),r=Di({editor:n,selector:({editor:o})=>{var a;if(!o.isEditable)return;const s=((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block];if(s.length!==1)return;const l=s[0];if(Xo(l,o,l.type,{url:"string",showPreview:"boolean"}))return l}}),i=q.useCallback(()=>{r!==void 0&&Sr(n,r.type,{showPreview:"boolean"})&&n.updateBlock(r.id,{props:{showPreview:!r.props.showPreview}})},[r,n]);return r===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:_.jsx(e_e,{}),isSelected:r.props.showPreview,onClick:i})},k_e=()=>{const t=sn(),e=_t(),n=$t(),r=Pn(wr),i=Di({editor:n,selector:({editor:a})=>{var s;if(!a.isEditable||!a.settings.tables.splitCells)return;const l=((s=a.getSelection())==null?void 0:s.blocks)||[a.getTextCursorPosition().block];if(l.length!==1)return;const u=l[0];if(u.type==="table")return{mergeDirection:r.getMergeDirection(u)}}}),o=q.useCallback(()=>{r?.mergeCells()},[r]);return i===void 0?null:_.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:i.mergeDirection==="horizontal"?_.jsx(Yke,{}):_.jsx(Wke,{}),onClick:o})},__e=()=>$t().getExtension(wr)?_.jsx(k_e,{}):null,O_e={left:$ke,center:Fke,right:zke,justify:Pke},d3=t=>{const e=_t(),n=sn(),r=$t(),i=Di({editor:r,selector:({editor:s})=>{var l,u;if(!s.isEditable)return;const c=((l=s.getSelection())==null?void 0:l.blocks)||[s.getTextCursorPosition().block],f=c[0];if(Xo(f,s,f.type,{textAlignment:Ln.textAlignment}))return{textAlignment:f.props.textAlignment,blocks:c};if(c.length===1&&Xo(f,s,"table"))return(u=s.getExtension(wr))!=null&&u.getCellSelection()?{textAlignment:pf(f.content.rows[0].cells[0]).props.textAlignment,blocks:[f]}:void 0}}),o=q.useCallback(s=>{var l;if(i!==void 0){r.focus();for(const u of i.blocks)if(Xo(u,r,u.type,{textAlignment:Ln.textAlignment})&&Sr(r,u.type,{textAlignment:Ln.textAlignment}))r.updateBlock(u,{props:{textAlignment:s}});else if(u.type==="table"){const c=(l=r.getExtension(wr))==null?void 0:l.getCellSelection();if(!c)continue;const f=u.content.rows.map(d=>({...d,cells:d.cells.map(h=>pf(h))}));c.cells.forEach(({row:d,col:h})=>{f[d].cells[h].props.textAlignment=s}),r.updateBlock(u,{type:"table",content:{...u.content,type:"tableContent",rows:f}}),r.setTextCursorPosition(u)}}},[r,i]);if(i===void 0)return null;const a=O_e[t.textAlignment];return _.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>o(t.textAlignment),isSelected:i.textAlignment===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:_.jsx(a,{})})},bZ=t=>[_.jsx(S_e,{items:t},"blockTypeSelect"),_.jsx(__e,{},"tableCellMergeButton"),_.jsx(v_e,{},"fileCaptionButton"),_.jsx(x_e,{},"replaceFileButton"),_.jsx(y_e,{},"fileRenameButton"),_.jsx(b_e,{},"fileDeleteButton"),_.jsx(D_e,{},"fileDownloadButton"),_.jsx(M_e,{},"filePreviewButton"),_.jsx(jy,{basicTextStyle:"bold"},"boldStyleButton"),_.jsx(jy,{basicTextStyle:"italic"},"italicStyleButton"),_.jsx(jy,{basicTextStyle:"underline"},"underlineStyleButton"),_.jsx(jy,{basicTextStyle:"strike"},"strikeStyleButton"),_.jsx(d3,{textAlignment:"left"},"textAlignLeftButton"),_.jsx(d3,{textAlignment:"center"},"textAlignCenterButton"),_.jsx(d3,{textAlignment:"right"},"textAlignRightButton"),_.jsx(p_e,{},"colorStyleButton"),_.jsx(w_e,{},"nestBlockButton"),_.jsx(E_e,{},"unnestBlockButton"),_.jsx(g_e,{},"createLinkButton"),_.jsx(A_e,{},"addCommentButton"),_.jsx(N_e,{},"addTiptapCommentButton")],yZ=t=>{const e=_t();return _.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||bZ(t.blockTypeSelectItems)})},I_e=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},xZ=t=>{const e=$t(),n=Pn(xf,{editor:e}),r=fr(xf,{editor:e}),i=Di({editor:e,selector:({editor:l})=>n.store.state?{from:l.prosemirrorState.selection.from,to:l.prosemirrorState.selection.to}:void 0}),o=Di({editor:e,selector:({editor:l})=>{const u=l.getTextCursorPosition().block;return Xo(u,l,u.type,{textAlignment:Ln.textAlignment})?I_e(u.props.textAlignment):"top-start"}}),a=q.useMemo(()=>({useFloatingOptions:{open:r,onOpenChange:(l,u,c)=>{n.store.setState(l),c==="escape-key"&&e.focus()},placement:o,middleware:[hs(10),Rf(),Vu()]},elementProps:{style:{zIndex:40}},...t.floatingUIOptions}),[r,o,t.floatingUIOptions,n.store,e]),s=t.formattingToolbar||yZ;return _.jsx(T_,{position:i,...a,children:r&&_.jsx(s,{})})},R_e=t=>{const e=_t(),n=sn(),{deleteLink:r}=Pn(vv);return _.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:()=>{var i;r(t.range.from),(i=t.setToolbarOpen)==null||i.call(t,!1)},icon:_.jsx(Gke,{})})},B_e=t=>{const e=_t(),n=sn();return _.jsxs(e.Generic.Popover.Root,{onOpenChange:t.setToolbarPositionFrozen,children:[_.jsx(e.Generic.Popover.Trigger,{children:_.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),_.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:_.jsx(vZ,{url:t.url,text:t.text,range:t.range,setToolbarOpen:t.setToolbarOpen,setToolbarPositionFrozen:t.setToolbarPositionFrozen})})]})},L_e=t=>{const e=_t(),n=sn();return _.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(M4(t.url,window.location.href),"_blank")},icon:_.jsx(l_e,{})})},F_e=t=>{const e=_t();return _.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children||_.jsxs(_.Fragment,{children:[_.jsx(B_e,{url:t.url,text:t.text,range:t.range,setToolbarOpen:t.setToolbarOpen,setToolbarPositionFrozen:t.setToolbarPositionFrozen}),_.jsx(L_e,{url:t.url}),_.jsx(R_e,{range:t.range,setToolbarOpen:t.setToolbarOpen})]})})},P_e=t=>{const e=$t(),[n,r]=q.useState(!1),[i,o]=q.useState(!1),a=Pn(vv),[s,l]=q.useState(void 0);q.useEffect(()=>{var d;const h=()=>{const x=a.getLinkAtSelection();if(!x){l(void 0),i||r(!1);return}l({cursorType:"text",url:x.mark.attrs.href,text:x.text,range:x.range,element:a.getLinkElementAtPos(x.range.from)}),i||r(!0)},m=x=>{if(s!==void 0&&s.cursorType==="text"||!(x.target instanceof HTMLElement))return;const C=a.getLinkAtElement(x.target);C&&l({cursorType:"mouse",url:C.mark.attrs.href,text:C.text,range:C.range,element:a.getLinkElementAtPos(C.range.from)})},v=e.onChange(h),b=e.onSelectionChange(h);return(d=e.domElement)==null||d.addEventListener("mouseover",m),()=>{var x;v(),b(),(x=e.domElement)==null||x.removeEventListener("mouseover",m)}},[e,a,s,i]);const u=q.useMemo(()=>({useFloatingOptions:{open:n,onOpenChange:(d,h,m)=>{i||s!==void 0&&s.cursorType==="text"&&m==="hover"||(m==="escape-key"&&e.focus(),r(d))},placement:"top-start",middleware:[hs(10),Vu()]},useHoverProps:{enabled:s!==void 0&&s.cursorType==="mouse",delay:{open:250,close:250},handleClose:rke()},elementProps:{style:{zIndex:50}},...t.floatingUIOptions}),[e,s,t.floatingUIOptions,n,i]),c=q.useMemo(()=>s!=null&&s.element?{element:s.element}:void 0,[s?.element]);if(!e.isEditable)return null;const f=t.linkToolbar||F_e;return _.jsx(kl,{reference:c,...u,children:s&&_.jsx(f,{url:s.url,text:s.text,range:s.range,setToolbarOpen:r,setToolbarPositionFrozen:o})})};function $_e(t){return It({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const z_e=()=>{const t=_t(),e=sn(),n=$t(),r=Pn(fs),i=fr(Ks,{editor:n,selector:a=>a?.block}),o=q.useCallback(()=>{if(i===void 0)return;const a=i.content;if(a!==void 0&&Array.isArray(a)&&a.length===0)n.setTextCursorPosition(i),r.openSuggestionMenu("/");else{const s=n.insertBlocks([{type:"paragraph"}],i,"after")[0];n.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[i,n,r]);return i===void 0?null:_.jsx(t.SideMenu.Button,{className:"bn-button",label:e.side_menu.add_block_label,icon:_.jsx($_e,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function wZ(t){return It({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function U_e(t){return It({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const H_e=t=>{const e=_t(),n=$t(),r=fr(Ks,{editor:n,selector:i=>i?.block});return r===void 0||!Xo(r,n,r.type,{textColor:"string"})&&!Xo(r,n,r.type,{backgroundColor:"string"})?null:_.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[_.jsx(e.Generic.Menu.Trigger,{sub:!0,children:_.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),_.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:_.jsx(mC,{iconSize:18,text:Xo(r,n,r.type,{textColor:"string"})&&Sr(n,r.type,{textColor:"string"})?{color:r.props.textColor,setColor:i=>n.updateBlock(r,{type:r.type,props:{textColor:i}})}:void 0,background:Xo(r,n,r.type,{backgroundColor:"string"})&&Sr(n,r.type,{backgroundColor:"string"})?{color:r.props.backgroundColor,setColor:i=>n.updateBlock(r,{props:{backgroundColor:i}})}:void 0})})]})},V_e=t=>{const e=_t(),n=$t(),r=fr(Ks,{editor:n,selector:i=>i?.block});return r===void 0?null:_.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([r]),children:t.children})},q_e=t=>{const e=_t(),n=$t(),r=fr(Ks,{editor:n,selector:o=>o?.block});if(r===void 0||r.type!=="table"||!n.settings.tables.headers)return null;const i=!!r.content.headerRows;return _.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:i,onClick:()=>{n.updateBlock(r,{content:{...r.content,headerRows:i?void 0:1}})},children:t.children})},j_e=t=>{const e=_t(),n=$t(),r=fr(Ks,{editor:n,selector:o=>o?.block});if(r===void 0||r.type!=="table"||!n.settings.tables.headers)return null;const i=!!r.content.headerCols;return _.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:i,onClick:()=>{n.updateBlock(r,{content:{...r.content,headerCols:i?void 0:1}})},children:t.children})},G_e=t=>{const e=_t(),n=sn();return _.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||_.jsxs(_.Fragment,{children:[_.jsx(V_e,{children:n.drag_handle.delete_menuitem}),_.jsx(H_e,{children:n.drag_handle.colors_menuitem}),_.jsx(q_e,{children:n.drag_handle.header_row_menuitem}),_.jsx(j_e,{children:n.drag_handle.header_column_menuitem})]})})},Y_e=t=>{const e=_t(),n=sn(),r=Pn(Ks),i=fr(Ks,{selector:a=>a?.block});if(i===void 0)return null;const o=t.dragHandleMenu||G_e;return _.jsxs(e.Generic.Menu.Root,{onOpenChange:a=>{a?r.freezeMenu():r.unfreezeMenu()},position:"left",children:[_.jsx(e.Generic.Menu.Trigger,{children:_.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:a=>r.blockDragStart(a,i),onDragEnd:r.blockDragEnd,className:"bn-button",icon:_.jsx(wZ,{size:24,"data-test":"dragHandle"})})}),_.jsx(o,{children:t.children})]})},W_e=t=>{const e=_t(),n=$t(),r=fr(Ks,{editor:n,selector:o=>o?.block}),i=q.useMemo(()=>{var o;if(r===void 0)return{};const a={"data-block-type":r.type};return r.type==="heading"&&(a["data-level"]=r.props.level.toString()),(o=n.schema.blockSpecs[r.type].implementation.meta)!=null&&o.fileBlockAccept&&(r.props.url?a["data-url"]="true":a["data-url"]="false"),a},[r,n.schema.blockSpecs]);return _.jsx(e.SideMenu.Root,{className:"bn-side-menu",...i,children:t.children||_.jsxs(_.Fragment,{children:[_.jsx(z_e,{}),_.jsx(Y_e,{dragHandleMenu:t.dragHandleMenu})]})})},K_e=t=>{const e=fr(Ks,{selector:a=>a!==void 0?{show:a.show,block:a.block}:void 0}),{show:n,block:r}=e||{},i=q.useMemo(()=>({useFloatingOptions:{open:n,placement:"left-start"},useDismissProps:{enabled:!1},elementProps:{style:{zIndex:20}},...t.floatingUIOptions}),[t.floatingUIOptions,n]),o=t.sideMenu||W_e;return _.jsx(rZ,{blockId:n?r?.id:void 0,...i,children:r?.id&&_.jsx(o,{})})};async function X_e(t,e){return(await f4e(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function Z_e(t){const e=_t(),n=sn(),{items:r,loadingState:i,selectedIndex:o,onItemClick:a,columns:s}=t,l=i==="loading-initial"||i==="loading"?_.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:s}):null,u=q.useMemo(()=>{const c=[];for(let f=0;f<r.length;f++){const d=r[f];c.push(_.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:d,id:`bn-grid-suggestion-menu-item-${f}`,isSelected:f===o,onClick:()=>a?.(d)},d.id))}return c},[e,r,a,o]);return _.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:s,className:"bn-grid-suggestion-menu",children:[l,u,u.length===0&&t.loadingState==="loaded"&&_.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:s,children:n.suggestion_menu.no_items_title})]})}function EZ(t,e,n,r=3){const i=q.useRef(0);q.useEffect(()=>{e!==void 0&&(t.length>0?i.current=e.length:e.length-i.current>r&&n())},[n,r,t.length,e])}function CZ(t,e){const[n,r]=q.useState([]),[i,o]=q.useState(!1),a=q.useRef(void 0),s=q.useRef(void 0);return q.useEffect(()=>{const l=t;a.current=t,o(!0),e(t).then(u=>{a.current===l&&(r(u),o(!1),s.current=l)})},[t,e]),{items:n||[],usedQuery:s.current,loadingState:s.current===void 0?"loading-initial":i?"loading":"loaded"}}function Q_e(t,e,n,r,i){const[o,a]=q.useState(0),s=r!==void 0&&r>1;return q.useEffect(()=>{var l;const u=c=>(c.key==="ArrowLeft"&&(c.preventDefault(),n.length&&a((o-1+n.length)%n.length)),c.key==="ArrowRight"&&(c.preventDefault(),n.length&&a((o+1+n.length)%n.length)),c.key==="ArrowUp"?(c.preventDefault(),n.length&&a((o-r+n.length)%n.length),!0):c.key==="ArrowDown"?(c.preventDefault(),n.length&&a((o+r)%n.length),!0):c.key==="Enter"&&!c.isComposing?(c.stopPropagation(),c.preventDefault(),n.length&&i?.(n[o]),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",u,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",u,!0)}},[t.domElement,n,o,i,r,s]),q.useEffect(()=>{a(0)},[e]),{selectedIndex:n.length===0?void 0:o}}function J_e(t){const e=il().setContentEditableProps,n=$t(),{getItems:r,gridSuggestionMenuComponent:i,query:o,clearQuery:a,closeMenu:s,onItemClick:l,columns:u}=t,c=q.useCallback(v=>{s(),a(),l?.(v)},[l,s,a]),{items:f,usedQuery:d,loadingState:h}=CZ(o,r);EZ(f,d,s);const{selectedIndex:m}=Q_e(n,o,f,u,c);return q.useEffect(()=>(e(v=>({...v,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(v=>({...v,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),q.useEffect(()=>(e(v=>({...v,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{e(v=>({...v,"aria-activedescendant":void 0}))}),[e,m]),_.jsx(i,{items:f,onItemClick:c,loadingState:h,selectedIndex:m,columns:u})}function e5e(t){const e=$t(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:i,minQueryLength:o,onItemClick:a,getItems:s}=t,l=q.useMemo(()=>a||(m=>{m.onItemClick(e)}),[e,a]),u=q.useMemo(()=>s||(async m=>await X_e(e,m)),[e,s]),c=Pn(fs);q.useEffect(()=>{c.addTriggerCharacter(n)},[c,n]);const f=fr(fs),d=fr(fs,{selector:m=>{var v;return{element:((v=e.domElement)==null?void 0:v.firstChild)||void 0,getBoundingClientRect:()=>m?.referencePos||new DOMRect}}}),h=q.useMemo(()=>({useFloatingOptions:{open:f?.show&&f?.triggerCharacter===n,onOpenChange:m=>{m||c.closeMenu()},placement:"bottom-start",middleware:[hs(10),jX({allowedPlacements:["bottom-start","top-start"],padding:10}),Rf(),U1({apply({elements:m,availableHeight:v}){m.floating.style.maxHeight=`${Math.max(0,v)}px`},padding:10})]},elementProps:{onMouseDownCapture:m=>m.preventDefault(),style:{zIndex:70}},...t.floatingUIOptions}),[t.floatingUIOptions,f?.show,f?.triggerCharacter,c,n]);return!f||!f.ignoreQueryLength&&o&&(f.query.startsWith(" ")||f.query.length<o)?null:_.jsx(kl,{reference:d,...h,children:n&&_.jsx(J_e,{query:f.query,closeMenu:c.closeMenu,clearQuery:c.clearQuery,getItems:u,columns:i,gridSuggestionMenuComponent:r||Z_e,onItemClick:l})})}function t5e(t){const e=_t(),n=sn(),{items:r,loadingState:i,selectedIndex:o,onItemClick:a}=t,s=i==="loading-initial"||i==="loading"?_.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=q.useMemo(()=>{let u;const c=[];for(let f=0;f<r.length;f++){const d=r[f];d.group!==u&&(u=d.group,c.push(_.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:u},u))),c.push(_.jsx(e.SuggestionMenu.Item,{className:$r("bn-suggestion-menu-item",d.size==="small"?"bn-suggestion-menu-item-small":""),item:d,id:`bn-suggestion-menu-item-${f}`,isSelected:f===o,onClick:()=>a?.(d)},d.title))}return c},[e,r,a,o]);return _.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&_.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),s]})}function n5e(t,e){const[n,r]=q.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:i=>{if(i.key==="ArrowUp")return i.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(i.key==="ArrowDown")return i.preventDefault(),t.length&&r((n+1)%t.length),!0;const o=r5e(i)?i.nativeEvent.isComposing:i.isComposing;return i.key==="Enter"&&!o?(i.preventDefault(),i.stopPropagation(),t.length&&e?.(t[n]),!0):!1}}}function r5e(t){return t.nativeEvent!==void 0}function i5e(t,e,n,r,i){const{selectedIndex:o,setSelectedIndex:a,handler:s}=n5e(n,r);return q.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",s,!0),()=>{var u;(u=t.domElement)==null||u.removeEventListener("keydown",s,!0)}},[t.domElement,n,o,r,i,s]),q.useEffect(()=>{a(0)},[e,a]),{selectedIndex:n.length===0?void 0:o}}function o5e(t){const e=il().setContentEditableProps,n=$t(),{getItems:r,suggestionMenuComponent:i,query:o,clearQuery:a,closeMenu:s,onItemClick:l}=t,u=q.useCallback(m=>{s(),a(),l?.(m)},[l,s,a]),{items:c,usedQuery:f,loadingState:d}=CZ(o,r);EZ(c,f,s);const{selectedIndex:h}=i5e(n,o,c,u);return q.useEffect(()=>(e(m=>({...m,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(m=>({...m,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),q.useEffect(()=>(e(m=>({...m,"aria-activedescendant":h?"bn-suggestion-menu-item-"+h:void 0})),()=>{e(m=>({...m,"aria-activedescendant":void 0}))}),[e,h]),_.jsx(i,{items:c,onItemClick:u,loadingState:d,selectedIndex:h})}const a5e={heading:Sw,heading_2:Tw,heading_3:Aw,heading_4:lZ,heading_5:uZ,heading_6:cZ,toggle_heading:Sw,toggle_heading_2:Tw,toggle_heading_3:Aw,quote:mZ,toggle_list:gZ,numbered_list:hZ,bullet_list:pZ,check_list:dZ,paragraph:A_,table:Xke,image:Jke,video:Qke,audio:n_e,file:Lke,emoji:f_e,code_block:Hke,divider:c_e};function s5e(t){return h1e(t).map(e=>{const n=a5e[e.key];return{...e,icon:_.jsx(n,{size:18})}})}function l5e(t){const e=$t(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:i,onItemClick:o,getItems:a}=t,s=q.useMemo(()=>o||(h=>{h.onItemClick(e)}),[e,o]),l=q.useMemo(()=>a||(async h=>p1e(s5e(e),h)),[e,a]),u=Pn(fs);q.useEffect(()=>{u.addTriggerCharacter(n)},[u,n]);const c=fr(fs),f=fr(fs,{selector:h=>{var m;return{element:((m=e.domElement)==null?void 0:m.firstChild)||void 0,getBoundingClientRect:()=>h?.referencePos||new DOMRect}}}),d=q.useMemo(()=>({useFloatingOptions:{open:c?.show&&c?.triggerCharacter===n,onOpenChange:h=>{h||u.closeMenu()},placement:"bottom-start",middleware:[hs(10),jX({allowedPlacements:["bottom-start","top-start"],padding:10}),Rf(),U1({apply({elements:h,availableHeight:m}){h.floating.style.maxHeight=`${Math.max(0,m)}px`},padding:10})]},elementProps:{onMouseDownCapture:h=>h.preventDefault(),style:{zIndex:80}},...t.floatingUIOptions}),[t.floatingUIOptions,c?.show,c?.triggerCharacter,u,n]);return!c||!c.ignoreQueryLength&&i&&(c.query.startsWith(" ")||c.query.length<i)?null:_.jsx(kl,{reference:f,...d,children:n&&_.jsx(o5e,{query:c.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:l,suggestionMenuComponent:r||t5e,onItemClick:s})})}const u5e=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},c5e=t=>{const e=_t(),n=$t(),r=Pn(wr),i=fr(wr,{selector:c=>c?.block}),o=q.useRef(!1),[a,s]=q.useState(),l=q.useCallback(c=>{r.freezeHandles(),t.hideOtherElements(!0),i&&(s({originalContent:i.content,originalCroppedContent:{rows:r.cropEmptyRowsOrColumns(i,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?c.clientX:c.clientY}),o.current=!1,c.preventDefault())},[i,t,r]),u=q.useCallback(()=>{!i||o.current||n.updateBlock(i,{type:"table",content:{...i.content,rows:t.orientation==="addOrRemoveColumns"?r.addRowsOrColumns(i,"columns",1):r.addRowsOrColumns(i,"rows",1)}})},[i,n,t.orientation,r]);return q.useEffect(()=>{const c=f=>{var d,h;if(!i)return;if(!a)throw new Error("editingState is undefined");o.current=!0;const m=(t.orientation==="addOrRemoveColumns"?f.clientX:f.clientY)-a.startPos,v=t.orientation==="addOrRemoveColumns"?((d=a.originalCroppedContent.rows[0])==null?void 0:d.cells.length)??0:a.originalCroppedContent.rows.length,b=t.orientation==="addOrRemoveColumns"?((h=a.originalContent.rows[0])==null?void 0:h.cells.length)??0:a.originalContent.rows.length,x=t.orientation==="addOrRemoveColumns"?i.content.rows[0].cells.length:i.content.rows.length,C=b+u5e(m/(t.orientation==="addOrRemoveColumns"?Dk:Kge),.3);C>=v&&C>0&&C!==x&&(n.updateBlock(i,{type:"table",content:{...i.content,rows:t.orientation==="addOrRemoveColumns"?r.addRowsOrColumns({type:"table",content:a.originalCroppedContent},"columns",C-v):r.addRowsOrColumns({type:"table",content:a.originalCroppedContent},"rows",C-v)}}),i.content&&n.setTextCursorPosition(i))};return a&&window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c)}},[i,a,n,t.orientation,r]),q.useEffect(()=>{const c=()=>{t.hideOtherElements(!1),r.unfreezeHandles(),s(void 0)};return a&&window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[a,t,r]),n.isEditable?_.jsx(e.TableHandle.ExtendButton,{className:$r("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",a!==null?"bn-extend-button-editing":""),onClick:u,onMouseDown:l,children:t.children||_.jsx(r_e,{size:18,"data-test":"extendButton"})}):null},TF=t=>{const e=_t(),n=sn(),r=Pn(wr),i=fr(wr,{selector:o=>t.orientation==="column"?o?.colIndex:o?.rowIndex});return r===void 0||i===void 0?null:_.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(i,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]})},f5e=t=>{const e=_t(),n=sn(),r=Pn(wr),i=fr(wr,{selector:o=>t.orientation==="column"?o?.colIndex:o?.rowIndex});return r===void 0||i===void 0?null:_.jsx(e.Generic.Menu.Item,{onClick:()=>r.removeRowOrColumn(i,t.orientation),children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem})},d5e=t=>{const e=_t(),n=sn(),r=$t(),i=Pn(wr),{block:o,index:a}=fr(wr,{selector:c=>({block:c?.block,index:t.orientation==="column"?c?.colIndex:c?.rowIndex})}),s=q.useMemo(()=>i===void 0||o===void 0||a===void 0?[]:t.orientation==="row"?i.getCellsAtRowHandle(o,a):i.getCellsAtColumnHandle(o,a),[o,a,t.orientation,i]),l=(c,f)=>{if(o===void 0)return;const d=o.content.rows.map(h=>({...h,cells:h.cells.map(m=>pf(m))}));s.forEach(({row:h,col:m})=>{f==="text"?d[h].cells[m].props.textColor=c:d[h].cells[m].props.backgroundColor=c}),r.updateBlock(o,{type:"table",content:{...o.content,rows:d}}),r.setTextCursorPosition(o)};if(!s||!s[0]||!i||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const u=pf(s[0].cell);return _.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[_.jsx(e.Generic.Menu.Trigger,{sub:!0,children:_.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),_.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:_.jsx(mC,{iconSize:18,text:r.settings.tables.cellTextColor?{color:s.every(({cell:c})=>mf(c)&&c.props.textColor===u.props.textColor)?u.props.textColor:"default",setColor:c=>{l(c,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:s.every(({cell:c})=>mf(c)&&c.props.backgroundColor===u.props.backgroundColor)?u.props.backgroundColor:"default",setColor:c=>l(c,"background")}:void 0})})]})},h5e=t=>{const e=_t(),n=sn(),r=$t(),i=Pn(wr),{block:o,index:a}=fr(wr,{selector:l=>({block:l?.block,index:t.orientation==="column"?l?.colIndex:l?.rowIndex})});if(i===void 0||o===void 0||a!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const s=!!o.content.headerRows;return _.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{r.updateBlock(o,{...o,content:{...o.content,headerRows:s?void 0:1}})},children:n.drag_handle.header_row_menuitem})},p5e=t=>{const e=_t(),n=sn(),r=$t(),i=Pn(wr),o=fr(wr,{selector:l=>l?.block}),a=fr(wr,{selector:l=>t.orientation==="column"?l?.colIndex:l?.rowIndex});if(!i||a!==0||!o||t.orientation!=="column"||!r.settings.tables.headers)return null;const s=!!o.content.headerCols;return _.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{r.updateBlock(o,{...o,content:{...o.content,headerCols:s?void 0:1}})},children:n.drag_handle.header_column_menuitem})},m5e=t=>{const e=_t();return _.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||_.jsxs(_.Fragment,{children:[_.jsx(f5e,{orientation:t.orientation}),_.jsx(TF,{orientation:t.orientation,side:t.orientation==="row"?"above":"left"}),_.jsx(TF,{orientation:t.orientation,side:t.orientation==="row"?"below":"right"}),_.jsx(h5e,{orientation:t.orientation}),_.jsx(p5e,{orientation:t.orientation}),_.jsx(d5e,{orientation:t.orientation})]})})},g5e=t=>{const e=$t(),n=_t(),[r,i]=q.useState(!1),o=t.tableHandleMenu||m5e,a=Pn(wr),s=fr(wr),l=q.useMemo(()=>!a||!s||!s.block||s.block.type!=="table"?!1:t.orientation==="column"?a.getCellsAtColumnHandle(s.block,s.colIndex).every(({cell:u})=>eh(u)===1):a.getCellsAtRowHandle(s.block,s.rowIndex).every(({cell:u})=>O1(u)===1),[t.orientation,s,a]);return s?_.jsxs(n.Generic.Menu.Root,{onOpenChange:u=>{u?(a.freezeHandles(),t.hideOtherElements(!0)):(a.unfreezeHandles(),t.hideOtherElements(!1),e.focus())},position:"right",children:[_.jsx(n.Generic.Menu.Trigger,{children:_.jsx(n.TableHandle.Root,{className:$r("bn-table-handle",r?"bn-table-handle-dragging":"",l?"":"bn-table-handle-not-draggable"),draggable:l,onDragStart:u=>{i(!0),t.hideOtherElements(!0),t.orientation==="column"?a.colDragStart(u):a.rowDragStart(u)},onDragEnd:()=>{a.dragEnd(),t.hideOtherElements(!1),i(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||_.jsx(wZ,{size:24,"data-test":"tableHandle"})})}),_.jsx(o,{orientation:t.orientation})]}):null},v5e=t=>{var e,n;const r=_t(),i=sn(),o=$t(),{block:a,colIndex:s,rowIndex:l}=fr(wr,{selector:f=>({block:f?.block,colIndex:f?.colIndex,rowIndex:f?.rowIndex})}),u=(f,d)=>{if(a===void 0||s===void 0||l===void 0)return;const h=a.content.rows.map(m=>({...m,cells:m.cells.map(v=>pf(v))}));d==="text"?h[l].cells[s].props.textColor=f:h[l].cells[s].props.backgroundColor=f,o.updateBlock(a,{type:"table",content:{...a.content,rows:h}}),o.setTextCursorPosition(a)};if(a===void 0||s===void 0||l===void 0)return null;const c=(n=(e=a.content.rows[l])==null?void 0:e.cells)==null?void 0:n[s];return!c||o.settings.tables.cellTextColor===!1&&o.settings.tables.cellBackgroundColor===!1?null:_.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[_.jsx(r.Generic.Menu.Trigger,{sub:!0,children:_.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||i.drag_handle.colors_menuitem})}),_.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:_.jsx(mC,{iconSize:18,text:o.settings.tables.cellTextColor?{color:mf(c)?c.props.textColor:"default",setColor:f=>u(f,"text")}:void 0,background:o.settings.tables.cellBackgroundColor?{color:mf(c)?c.props.backgroundColor:"default",setColor:f=>u(f,"background")}:void 0})})]})},b5e=()=>{var t,e;const n=_t(),r=sn(),i=$t(),o=Pn(wr),{block:a,colIndex:s,rowIndex:l}=fr(wr,{selector:c=>({block:c?.block,colIndex:c?.colIndex,rowIndex:c?.rowIndex})});if(a===void 0||s===void 0||l===void 0)return null;const u=(e=(t=a.content.rows[l])==null?void 0:t.cells)==null?void 0:e[s];return!u||!mf(u)||O1(u)===1&&eh(u)===1||!i.settings.tables.splitCells?null:_.jsx(n.Generic.Menu.Item,{onClick:()=>{o.splitCell({row:l,col:s})},children:r.table_handle.split_cell_menuitem})},y5e=t=>{const e=_t();return _.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-table-handle-menu",children:t.children||_.jsxs(_.Fragment,{children:[_.jsx(b5e,{}),_.jsx(v5e,{})]})})},x5e=t=>{const e=_t(),n=$t(),r=Pn(wr),i=t.tableCellMenu||y5e;return!n.settings.tables.splitCells&&!n.settings.tables.cellBackgroundColor&&!n.settings.tables.cellTextColor?null:_.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?(r.freezeHandles(),t.hideOtherElements(!0)):(r.unfreezeHandles(),t.hideOtherElements(!1),n.focus())},position:"right",children:[_.jsx(e.Generic.Menu.Trigger,{children:_.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||_.jsx(U_e,{size:12,"data-test":"tableCellHandle"})})}),_.jsx(i,{})]})},w5e=t=>{const e=$t(),[n,r]=q.useState(),i=fr(wr),o=q.useMemo(()=>{const c={};if(i===void 0)return{};const f=Mo(i.block.id,e.prosemirrorState.doc);if(!f)return{};const d=f.posBeforeNode+1,h=e.prosemirrorView.domAtPos(d+1).node;if(!(h instanceof Element))return{};if(c.tableReference={element:h},i.rowIndex===void 0||i.colIndex===void 0)return c;const m=e.prosemirrorState.doc.resolve(d+1).posAtIndex(i.rowIndex),v=e.prosemirrorState.doc.resolve(m+1).posAtIndex(i.colIndex),b=e.prosemirrorView.domAtPos(v+1).node;return b instanceof Element?(c.cellReference={element:b},c.rowReference={element:h,getBoundingClientRect:()=>{const x=h.getBoundingClientRect(),C=b.getBoundingClientRect();return new DOMRect(x.x,i.draggingState&&i.draggingState.draggedCellOrientation==="row"?i.draggingState.mousePos-C.height/2:C.y,x.width,C.height)}},c.columnReference={element:h,getBoundingClientRect:()=>{const x=h.getBoundingClientRect(),C=b.getBoundingClientRect();return new DOMRect(i.draggingState&&i.draggingState.draggedCellOrientation==="col"?i.draggingState.mousePos-C.width/2:C.x,x.y,C.width,x.height)}},c):{}},[e,i]),a=q.useMemo(()=>i!==void 0?{rowTableHandle:{useFloatingOptions:{open:i.show&&i.rowIndex!==void 0&&(!n||n==="rowTableHandle"),placement:"left",middleware:[hs(-10)]},elementProps:{style:{zIndex:10}}},columnTableHandle:{useFloatingOptions:{open:i.show&&i.colIndex!==void 0&&(!n||n==="columnTableHandle"),placement:"top",middleware:[hs(-12)]},elementProps:{style:{zIndex:10}}},tableCellHandle:{useFloatingOptions:{open:i.show&&i.rowIndex!==void 0&&i.colIndex!==void 0&&(!n||n==="tableCellHandle"),placement:"top-end",middleware:[hs({mainAxis:-15,crossAxis:-1})]},elementProps:{style:{zIndex:10}}},extendRowsButton:{useFloatingOptions:{open:i.show&&i.showAddOrRemoveRowsButton&&(!n||n==="extendRowsButton"),placement:"bottom",middleware:[U1({apply({rects:c,elements:f}){Object.assign(f.floating.style,{width:`${c.reference.width}px`})}})]},elementProps:{style:{zIndex:10}}},extendColumnsButton:{useFloatingOptions:{open:i.show&&i.showAddOrRemoveColumnsButton&&(!n||n==="extendColumnsButton"),placement:"right",middleware:[U1({apply({rects:c,elements:f}){Object.assign(f.floating.style,{height:`${c.reference.height}px`})}})]},elementProps:{style:{zIndex:10}}}}:void 0,[n,i]);if(!i)return null;const s=t.tableHandle||g5e,l=t.extendButton||c5e,u=t.tableCellHandle||x5e;return _.jsxs(_.Fragment,{children:[_.jsx(kl,{reference:o?.rowReference,...a?.rowTableHandle,children:i.show&&i.rowIndex!==void 0&&(!n||n==="rowTableHandle")&&_.jsx(s,{orientation:"row",hideOtherElements:c=>r(c?"rowTableHandle":void 0)})}),_.jsx(kl,{reference:o?.columnReference,...a?.columnTableHandle,children:i.show&&i.colIndex!==void 0&&(!n||n==="columnTableHandle")&&_.jsx(s,{orientation:"column",hideOtherElements:c=>r(c?"columnTableHandle":void 0)})}),_.jsx(kl,{reference:o?.cellReference,...a?.tableCellHandle,children:i.show&&i.rowIndex!==void 0&&i.colIndex!==void 0&&(!n||n==="tableCellHandle")&&_.jsx(u,{hideOtherElements:c=>r(c?"tableCellHandle":void 0)})}),_.jsx(kl,{reference:o?.tableReference,...a?.extendRowsButton,children:i.show&&i.showAddOrRemoveRowsButton&&(!n||n==="extendRowsButton")&&_.jsx(l,{orientation:"addOrRemoveRows",hideOtherElements:c=>r(c?"extendRowsButton":void 0)})}),_.jsx(kl,{reference:o?.tableReference,...a?.extendColumnsButton,children:i.show&&i.showAddOrRemoveColumnsButton&&(!n||n==="extendColumnsButton")&&_.jsx(l,{orientation:"addOrRemoveColumns",hideOtherElements:c=>r(c?"extendColumnsButton":void 0)})})]})},E5e=q.lazy(()=>Promise.resolve().then(()=>j5e)),C5e=q.lazy(()=>Promise.resolve().then(()=>W5e));function S5e(t){const e=$t();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return _.jsxs(_.Fragment,{children:[e.getExtension(xf)&&t.formattingToolbar!==!1&&_.jsx(xZ,{}),e.getExtension(vv)&&t.linkToolbar!==!1&&_.jsx(P_e,{}),e.getExtension(fs)&&t.slashMenu!==!1&&_.jsx(l5e,{triggerCharacter:"/"}),e.getExtension(fs)&&t.emojiPicker!==!1&&_.jsx(e5e,{triggerCharacter:":",columns:10,minQueryLength:2}),e.getExtension(Ks)&&t.sideMenu!==!1&&_.jsx(K_e,{}),e.getExtension(Ls)&&t.filePanel!==!1&&_.jsx(gke,{}),e.getExtension(wr)&&t.tableHandles!==!1&&_.jsx(w5e,{}),e.getExtension(gs)&&t.comments!==!1&&_.jsxs(q.Suspense,{children:[_.jsx(E5e,{}),_.jsx(C5e,{})]})]})}function T5e(t,e){const n=il();e||(e=n?.editor),q.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}function A5e(t,e,n){const r=il();e||(e=r?.editor),q.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}const SZ=()=>{const t=q.useMemo(()=>{var a;return(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: dark)")},[]),e=q.useMemo(()=>{var a;return(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: light)")},[]),n=t?.matches,r=e?.matches,[i,o]=q.useState(n?"dark":r?"light":"no-preference");return q.useEffect(()=>{o(n?"dark":r?"light":"no-preference")},[n,r]),q.useEffect(()=>{if(typeof t?.addEventListener=="function"){const a=({matches:l})=>l&&o("dark"),s=({matches:l})=>l&&o("light");return t?.addEventListener("change",a),e?.addEventListener("change",s),()=>{t?.removeEventListener("change",a),e?.removeEventListener("change",s)}}else{const a=()=>o(t.matches?"dark":e.matches?"light":"no-preference");return t?.addEventListener("change",a),e?.addEventListener("change",a),()=>{t?.removeEventListener("change",a),e?.removeEventListener("change",a)}}},[t,e]),i},TZ=q.createContext(void 0);function N5e(){return q.useContext(TZ)}function D5e(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Vs.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}const M5e=({contentComponent:t})=>{const e=q.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return _.jsx(_.Fragment,{children:Object.values(e)})},k5e=q.forwardRef((t,e)=>{const[n,r]=q.useState();return q.useImperativeHandle(e,()=>(i,o)=>{Vs.flushSync(()=>{r({node:i,container:o})}),r(void 0)},[]),_.jsx(_.Fragment,{children:n&&Vs.createPortal(n.node,n.container)})}),AF=()=>{};function _5e(t,e){const{editor:n,className:r,theme:i,children:o,editable:a,onSelectionChange:s,onChange:l,formattingToolbar:u,linkToolbar:c,slashMenu:f,emojiPicker:d,sideMenu:h,filePanel:m,tableHandles:v,comments:b,autoFocus:x,renderEditor:C=!0,...w}=t,[A,E]=q.useState(),T=il(),N=SZ(),D=T?.colorSchemePreference||N,M=i||(D==="dark"?"dark":"light");T5e(l||AF,n),A5e(s||AF,n),q.useEffect(()=>{n.isEditable=a!==!1},[a,n]);const k=q.useCallback($=>{n.elementRenderer=$},[n]),B=q.useMemo(()=>({...T,editor:n,setContentEditableProps:E,colorSchemePreference:M}),[T,n,M]),P=q.useMemo(()=>({editorProps:{autoFocus:x,contentEditableProps:A},defaultUIProps:{formattingToolbar:u,linkToolbar:c,slashMenu:f,emojiPicker:d,sideMenu:h,filePanel:m,tableHandles:v,comments:b}}),[x,A,u,c,f,d,h,m,v,b]);return _.jsx(eZ.Provider,{value:B,children:_.jsxs(TZ.Provider,{value:P,children:[_.jsx(k5e,{ref:k}),_.jsx(O5e,{className:r,renderEditor:C,editable:a,editorColorScheme:M,ref:e,...w,children:o})]})})}const O5e=xr.forwardRef(({className:t,renderEditor:e,editable:n,editorColorScheme:r,children:i,...o},a)=>_.jsx("div",{className:$r("bn-container",r,t),"data-color-scheme":r,...o,ref:a,children:e?_.jsx(R5e,{editable:n,children:i}):i})),I5e=xr.forwardRef(_5e),R5e=t=>{const e=N5e(),n=$t(),r=q.useMemo(()=>D5e(),[]),i=q.useCallback(o=>{t.editable!==void 0&&t.editable!==n.isEditable&&(n.isEditable=t.editable),n._tiptapEditor.contentComponent=r,o?n.mount(o):n.unmount()},[n,r,t.editable]);return _.jsxs(_.Fragment,{children:[_.jsx(M5e,{contentComponent:r}),_.jsx(B5e,{...e.editorProps,...t,mount:i}),_.jsx(S5e,{...e.defaultUIProps}),t.children]})},B5e=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return _.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})},gC=(t={},e=[])=>q.useMemo(()=>{const n=r4e.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e),N_=t=>{const[e,n]=q.useState(!1),r=Di({editor:t.editor,selector:({editor:s})=>s.isEmpty}),i=_t(),o=q.useCallback(()=>{n(!0)},[]),a=q.useCallback(()=>{n(!1)},[]);return q.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),_.jsxs(_.Fragment,{children:[_.jsx(i.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:o,onBlur:a,editable:t.editable}),t.actions&&_.jsx("div",{className:"bn-comment-actions-wrapper",children:_.jsx(t.actions,{isFocused:e,isEmpty:r})})]})};let h3;async function L5e(){return h3||(h3=(async()=>{const[t,e]=await Promise.all([mw(()=>import("./module-RjUF93sV.js"),[]),mw(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),h3)}function F5e(t){const e=q.useRef(null),n=q.useRef(null);return n.current&&n.current.update(t),q.useEffect(()=>((async()=>{const{emojiMart:r}=await L5e();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),xr.createElement("div",{ref:e})}const NF=t=>{const[e,n]=q.useState(!1),r=_t(),i=$t(),o=il();return _.jsxs(r.Generic.Popover.Root,{open:e,children:[_.jsx(r.Generic.Popover.Trigger,{children:_.jsx("div",{onClick:a=>{var s;a.preventDefault(),a.stopPropagation(),n(!e),(s=t.onOpenChange)==null||s.call(t,!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),Vs.createPortal(_.jsx(r.Generic.Popover.Content,{className:"bn-emoji-picker-popover",variant:"panel-popover",children:_.jsx(F5e,{perLine:7,onClickOutside:()=>{var a;n(!1),(a=t.onOpenChange)==null||a.call(t,!1)},onEmojiSelect:a=>{var s;t.onEmojiSelect(a),n(!1),(s=t.onOpenChange)==null||s.call(t,!1)},theme:o?.colorSchemePreference})}),i.domElement.parentElement)]})};function P5e(t){return D_([t]).get(t)}function D_(t){const e=Pn(gs).userStore,n=q.useCallback(()=>{const o=new Map;for(const a of t){const s=e.getUser(a);s&&o.set(a,s)}return o},[e,t]),r=q.useMemo(()=>({current:n()}),[n]),i=q.useCallback(o=>{const a=e.subscribe(s=>{r.current=n(),o()});return e.loadUsers(t),a},[e,n,t,r]);return q.useSyncExternalStore(i,()=>r.current)}const $5e=t=>{const e=_t(),n=sn(),r=Pn(gs),i=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!i)throw new Error("Trying to render reaction badge for non-existing reaction");const[o,a]=q.useState([]),s=D_(o);return _.jsx(e.Generic.Badge.Root,{className:$r("bn-badge","bn-comment-reaction"),text:i.userIds.length.toString(),icon:i.emoji,isSelected:r.threadStore.auth.canDeleteReaction(t.comment,i.emoji),onClick:()=>t.onReactionSelect(i.emoji),onMouseEnter:()=>a(i.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(s.values()).map(l=>l.username).join(`
`)}`},i.emoji)},{textColor:kdt,backgroundColor:_dt,...z5e}=Mk,M_=YK.create({blockSpecs:{paragraph:TY()},styleSpecs:z5e}),U5e=({comment:t,thread:e,showResolveButton:n})=>{const r=Pn(gs),i=sn(),o=gC({initialContent:t.body,trailingBlock:!1,dictionary:{...i,placeholders:{emptyDocument:i.placeholders.edit_comment}},schema:r.commentEditorSchema||M_}),a=_t(),[s,l]=q.useState(!1),[u,c]=q.useState(!1),f=r.threadStore,d=q.useCallback(()=>{l(!0)},[]),h=q.useCallback(()=>{o.replaceBlocks(o.document,t.body),l(!1)},[o,t.body]),m=q.useCallback(async k=>{await f.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),l(!1)},[t,e.id,o,f]),v=q.useCallback(async()=>{await f.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,f]),b=q.useCallback(async k=>{f.auth.canAddReaction(t,k)?await f.addReaction({threadId:e.id,commentId:t.id,emoji:k}):f.auth.canDeleteReaction(t,k)&&await f.deleteReaction({threadId:e.id,commentId:t.id,emoji:k})},[f,t,e.id]),x=q.useCallback(async()=>{await f.resolveThread({threadId:e.id})},[e.id,f]),C=q.useCallback(async()=>{await f.unresolveThread({threadId:e.id})},[e.id,f]),w=P5e(t.userId);if(!t.body)return null;let A;const E=f.auth.canAddReaction(t),T=f.auth.canDeleteComment(t),N=f.auth.canUpdateComment(t),D=n&&(e.resolved?f.auth.canUnresolveThread(e):f.auth.canResolveThread(e));s||(A=_.jsxs(a.Generic.Toolbar.Root,{className:$r("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[E&&_.jsx(NF,{onEmojiSelect:k=>b(k.native),onOpenChange:c,children:_.jsx(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.add_reaction,variant:"compact",children:_.jsx(EF,{size:16})},"add-reaction")}),D&&(e.resolved?_.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:C,children:_.jsx(Ike,{size:16})},"reopen"):_.jsx(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.resolve,variant:"compact",onClick:x,children:_.jsx(i_e,{size:16})},"resolve")),(T||N)&&_.jsxs(a.Generic.Menu.Root,{position:"bottom-start",children:[_.jsx(a.Generic.Menu.Trigger,{children:_.jsx(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.more_actions,variant:"compact",children:_.jsx(u_e,{size:16})},"more-actions")}),_.jsxs(a.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[N&&_.jsx(a.Generic.Menu.Item,{icon:_.jsx(Rke,{}),onClick:d,children:i.comments.actions.edit_comment},"edit-comment"),T&&_.jsx(a.Generic.Menu.Item,{icon:_.jsx(a_e,{}),onClick:v,children:i.comments.actions.delete_comment},"delete-comment")]})]})]}));const M=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return _.jsx(a.Comments.Comment,{authorInfo:w??"loading",timeString:M,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:A,className:"bn-thread-comment",emojiPickerOpen:u,children:_.jsx(N_,{autoFocus:s,editor:o,editable:s,actions:t.reactions.length>0||s?({isEmpty:k})=>_.jsxs(_.Fragment,{children:[t.reactions.length>0&&!s&&_.jsxs(a.Generic.Badge.Group,{className:$r("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(B=>_.jsx($5e,{comment:t,emoji:B.emoji,onReactionSelect:b},B.emoji)),E&&_.jsx(NF,{onEmojiSelect:B=>b(B.native),onOpenChange:c,children:_.jsx(a.Generic.Badge.Root,{className:$r("bn-badge","bn-comment-add-reaction"),text:"+",icon:_.jsx(EF,{size:16}),mainTooltip:i.comments.actions.add_reaction})})]}),s&&_.jsxs(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:$r("bn-action-toolbar","bn-comment-actions"),children:[_.jsx(a.Generic.Toolbar.Button,{mainTooltip:i.comments.save_button_text,variant:"compact",onClick:m,isDisabled:k,children:i.comments.save_button_text}),_.jsx(a.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:i.comments.cancel_button_text,variant:"compact",onClick:h,children:i.comments.cancel_button_text})]})]}):void 0})})},H5e=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=_t(),r=sn(),i=D_(t.resolvedBy?[t.resolvedBy]:[]),o=t.comments.map((a,s)=>_.jsx(U5e,{thread:t,comment:a,showResolveButton:s===0},a.id+JSON.stringify(a.body||"{}")));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(s=>t.resolvedUpdatedAt.getTime()>s.createdAt.getTime())+1;o.splice(a,0,_.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:_.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&o.length>e&&o.splice(1,o.length-2,_.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),o};function V5e(){const t=Pn(gs),e=_t(),n=sn(),r=gC({trailingBlock:!1,dictionary:{...n,placeholders:{emptyDocument:n.placeholders.new_comment}},schema:t.commentEditorSchema||M_});return _.jsx(e.Comments.Card,{className:"bn-thread",children:_.jsx(N_,{autoFocus:!0,editable:!0,editor:r,actions:({isEmpty:i})=>_.jsx(e.Generic.Toolbar.Root,{className:$r("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:_.jsx(e.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await t.createThread({initialComment:{body:r.document}}),t.stopPendingComment()},children:"Save"})})})})}function q5e(t){const e=$t(),n=Pn(gs),r=fr(gs,{editor:e,selector:s=>s.pendingComment}),i=Di({editor:e,selector:({editor:s})=>r?{from:s.prosemirrorState.selection.from,to:s.prosemirrorState.selection.to}:void 0}),o=q.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:s=>{s||(n.stopPendingComment(),e.focus())},placement:"bottom",middleware:[hs(10),Rf(),Vu()]},elementProps:{style:{zIndex:60}},...t.floatingUIOptions}),[n,e,r,t.floatingUIOptions]),a=t.floatingComposer||V5e;return _.jsx(T_,{position:i,...o,children:_.jsx(a,{})})}const j5e=Object.freeze(Object.defineProperty({__proto__:null,default:q5e},Symbol.toStringTag,{value:"Module"})),AZ=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:o,tabIndex:a})=>{const s=_t(),l=sn(),u=Pn(gs),c=gC({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:u.commentEditorSchema||M_}),f=q.useCallback(async()=>{await u.threadStore.addComment({comment:{body:c.document},threadId:t.id}),c.removeBlocks(c.document)},[u,c,t.id]);return _.jsxs(s.Comments.Card,{className:"bn-thread",headerText:n,onFocus:i,onBlur:o,selected:e,tabIndex:a,children:[_.jsx(s.Comments.CardSection,{className:"bn-thread-comments",children:_.jsx(H5e,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&_.jsx(s.Comments.CardSection,{className:"bn-thread-composer",children:_.jsx(N_,{autoFocus:!1,editable:!0,editor:c,actions:({isEmpty:d})=>d?null:_.jsx(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:$r("bn-action-toolbar","bn-comment-actions"),children:_.jsx(s.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:d,onClick:f,children:l.comments.save_button_text})})})})]})};function G5e(){const t=Pn(gs).threadStore,e=q.useRef(void 0);e.current||(e.current=t.getThreads());const n=q.useCallback(r=>t.subscribe(i=>{e.current=i,r()}),[t]);return q.useSyncExternalStore(n,()=>e.current)}function Y5e(t){const e=$t(),n=Pn(gs),r=fr(gs,{editor:e,selector:l=>l.selectedThreadId?{id:l.selectedThreadId,position:l.threadPositions.get(l.selectedThreadId)}:void 0}),i=G5e(),o=q.useMemo(()=>r?i.get(r.id):void 0,[r,i]),a=q.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:(l,u,c)=>{c==="escape-key"&&e.focus(),l||n.selectThread(void 0)},placement:"bottom",middleware:[hs(10),Rf(),Vu()]},elementProps:{style:{zIndex:30}},...t.floatingUIOptions}),[n,e,t.floatingUIOptions,r]),s=t.floatingThread||AZ;return _.jsx(T_,{position:r?.position,...a,children:o&&_.jsx(s,{thread:o,selected:!0})})}const W5e=Object.freeze(Object.defineProperty({__proto__:null,default:Y5e},Symbol.toStringTag,{value:"Module"}));xr.memo(({thread:t,selectedThreadId:e,maxCommentsBeforeCollapse:n,referenceText:r})=>{const i=Pn(gs),o=q.useCallback(s=>{s.target.closest(".bn-action-toolbar")||i.selectThread(t.id)},[i,t.id]),a=q.useCallback(s=>{if(!s.relatedTarget||s.relatedTarget.closest(".bn-action-toolbar"))return;const l=s.target instanceof Node?s.target:null,u=s.relatedTarget instanceof Node?s.relatedTarget.closest(".bn-thread"):null;(!l||!u||!u.contains(l))&&i.selectThread(void 0)},[i]);return _.jsx(AZ,{thread:t,selected:t.id===e,referenceText:r,maxCommentsBeforeCollapse:n,onFocus:o,onBlur:a,tabIndex:0})});function NZ(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.top<r.top,o=n.bottom>r.bottom;return i&&o?"both":i?"top":o?"bottom":"none"}function K5e(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Bl(t){return Object.keys(t)}function p3(t){return t&&typeof t=="object"&&!Array.isArray(t)}function k_(t,e){const n={...t},r=e;return p3(t)&&p3(e)&&Object.keys(e).forEach(i=>{p3(r[i])&&i in t?n[i]=k_(n[i],r[i]):n[i]=r[i]}),n}function X5e(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Z5e(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function Q5e(t){const e=Z5e(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function DF(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function DZ(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const i=`${r/16}${t}`;return e?DF(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");const i=r.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${t}`;return e?DF(o):o}}return r}return n}const We=DZ("rem",{shouldScale:!0}),MF=DZ("em");function vC(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function MZ(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function kZ(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==q.Fragment:!1}function bC(t){const e=q.createContext(null);return[({children:i,value:o})=>_.jsx(e.Provider,{value:o,children:i}),()=>{const i=q.useContext(e);if(i===null)throw new Error(t);return i}]}function yC(t=null){const e=q.createContext(t);return[({children:i,value:o})=>_.jsx(e.Provider,{value:o,children:i}),()=>q.useContext(e)]}function kF(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Nw(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function J5e(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function e6e(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function t6e(t,e,n){return Nw(t,n)===Nw(e,n)}function __({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:o="rtl",orientation:a}){return s=>{n?.(s);const l=Array.from(Nw(s.currentTarget,t)?.querySelectorAll(e)||[]).filter(m=>t6e(s.currentTarget,m,t)),u=l.findIndex(m=>s.currentTarget===m),c=e6e(u,l,r),f=J5e(u,l,r),d=o==="rtl"?f:c,h=o==="rtl"?c:f;switch(s.key){case"ArrowRight":{a==="horizontal"&&(s.stopPropagation(),s.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowLeft":{a==="horizontal"&&(s.stopPropagation(),s.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{a==="vertical"&&(s.stopPropagation(),s.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowDown":{a==="vertical"&&(s.stopPropagation(),s.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{s.stopPropagation(),s.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{s.stopPropagation(),s.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const n6e={app:100,modal:200,popover:300,overlay:400,max:9999};function yv(t){return n6e[t]}const r6e=()=>{};function i6e(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||r6e:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function br(t,e="size",n=!0){if(t!==void 0)return MZ(t)?n?We(t):t:`var(--${e}-${t})`}function xv(t){return br(t,"mantine-spacing")}function uo(t){return t===void 0?"var(--mantine-radius-default)":br(t,"mantine-radius")}function na(t){return br(t,"mantine-font-size")}function o6e(t){return br(t,"mantine-line-height",!1)}function _Z(t){if(t)return br(t,"mantine-shadow",!1)}function Zo(t,e){return n=>{t?.(n),e?.(n)}}function a6e(t,e,n){return n?Array.from(Nw(n,e)?.querySelectorAll(t)||[]).findIndex(r=>r===n):null}function s6e(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const l6e=["mousedown","touchstart"];function u6e(t,e,n){const r=q.useRef(null),i=e||l6e;return q.useEffect(()=>{const o=a=>{const{target:s}=a??{};if(Array.isArray(n)){const l=!document.body.contains(s)&&s?.tagName!=="HTML";n.every(c=>!!c&&!a.composedPath().includes(c))&&!l&&t(a)}else r.current&&!r.current.contains(s)&&t(a)};return i.forEach(a=>document.addEventListener(a,o)),()=>{i.forEach(a=>document.removeEventListener(a,o))}},[r,t,n]),r}function c6e(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function f6e(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function d6e(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=q.useState(n?e:f6e(t));return q.useEffect(()=>{try{const o=window.matchMedia(t);return i(o.matches),c6e(o,a=>i(a.matches))}catch{return}},[t]),r||!1}const wv=typeof document<"u"?q.useLayoutEffect:q.useEffect;function H1(t,e){const n=q.useRef(!1);q.useEffect(()=>()=>{n.current=!1},[]),q.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function h6e({opened:t,shouldReturnFocus:e=!0}){const n=q.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return H1(()=>{let i=-1;const o=a=>{a.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",o),t?n.current=document.activeElement:e&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",o)}},[t,e]),r}const p6e=/input|select|textarea|button|object/,OZ="a, input, select, textarea, button, object, [tabindex]";function m6e(t){return t.style.display==="none"}function g6e(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(m6e(n))return!1;n=n.parentNode}return!0}function IZ(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function k4(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(IZ(t));return(p6e.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&g6e(t)}function RZ(t){const e=IZ(t);return(Number.isNaN(e)||e>=0)&&k4(t)}function v6e(t){return Array.from(t.querySelectorAll(OZ)).filter(RZ)}function b6e(t,e){const n=v6e(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],i=t.getRootNode();let o=r===i.activeElement||t===i.activeElement;const a=i.activeElement;if(a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(o=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===a.getAttribute("name")).includes(r)),!o)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function BZ(t=!0){const e=q.useRef(null),n=i=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(OZ));o=a.find(RZ)||a.find(k4)||null,!o&&k4(i)&&(o=i)}o&&o.focus({preventScroll:!0})},r=q.useCallback(i=>{t&&i!==null&&e.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),e.current=i):e.current=null)},[t]);return q.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const i=o=>{o.key==="Tab"&&e.current&&b6e(e.current,o)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),r}const y6e=xr.useId||(()=>{});function x6e(){const t=y6e();return t?`mantine-${t.replace(/:/g,"")}`:""}function Zm(t){const e=x6e(),[n,r]=q.useState(e);return wv(()=>{r(s6e())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Dw(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function xC(...t){const e=new Map;return n=>{if(t.forEach(r=>{const i=Dw(r,n);i&&e.set(r,i)}),e.size>0)return()=>{t.forEach(r=>{const i=e.get(r);i&&typeof i=="function"?i():Dw(r,null)}),e.clear()}}}function ol(...t){return q.useCallback(xC(...t),t)}function Qm({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[i,o]=q.useState(e!==void 0?e:n),a=(s,...l)=>{o(s),r?.(s,...l)};return t!==void 0?[t,r,!0]:[i,a,!1]}function w6e(t,e){return d6e("(prefers-reduced-motion: reduce)",t,e)}function E6e(){const[t,e]=q.useState(!1),n=q.useRef(null),r=q.useCallback(()=>{e(!0)},[]),i=q.useCallback(()=>{e(!1)},[]);return{ref:q.useCallback(a=>{n.current&&(n.current.removeEventListener("mouseenter",r),n.current.removeEventListener("mouseleave",i)),a&&(a.addEventListener("mouseenter",r),a.addEventListener("mouseleave",i)),n.current=a},[r,i]),hovered:t}}function C6e(t=!1,e={}){const[n,r]=q.useState(t),i=q.useCallback(()=>{r(s=>s||(e.onOpen?.(),!0))},[e.onOpen]),o=q.useCallback(()=>{r(s=>s&&(e.onClose?.(),!1))},[e.onClose]),a=q.useCallback(()=>{n?o():i()},[o,i,n]);return[n,{open:i,close:o,toggle:a}]}function S6e(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function T6e({onBlur:t,onFocus:e}={}){const[n,r]=q.useState(!1),i=q.useRef(!1),o=q.useRef(null),a=q.useCallback(c=>{r(c),i.current=c},[]),s=q.useCallback(c=>{i.current||(a(!0),e?.(c))},[e]),l=q.useCallback(c=>{i.current&&!S6e(c)&&(a(!1),t?.(c))},[t]),u=q.useCallback(c=>{c&&(o.current&&(o.current.removeEventListener("focusin",s),o.current.removeEventListener("focusout",l)),c.addEventListener("focusin",s),c.addEventListener("focusout",l),o.current=c)},[s,l]);return q.useEffect(()=>()=>{o.current&&(o.current.removeEventListener("focusin",s),o.current.removeEventListener("focusout",l))},[]),{ref:u,focused:n}}function O_(t){const e=xr.version;return typeof xr.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}function Ev(t){const e=q.Children.toArray(t);return e.length!==1||!kZ(e[0])?null:e[0]}function LZ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=LZ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function tc(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=LZ(t))&&(r&&(r+=" "),r+=e);return r}const A6e={};function N6e(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,i])=>{e[r]?e[r]=tc(e[r],i):e[r]=i})}),e}function wC({theme:t,classNames:e,props:n,stylesCtx:r}){const o=(Array.isArray(e)?e:[e]).map(a=>typeof a=="function"?a(t,n,r):a||A6e);return N6e(o)}function Mw({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((o,a)=>typeof a=="function"?{...o,...a(t,n,r)}:{...o,...a},{})}const I_=q.createContext(null);function Bf(){const t=q.useContext(I_);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function D6e(){return Bf().cssVariablesResolver}function M6e(){return Bf().classNamesPrefix}function R_(){return Bf().getStyleNonce}function k6e(){return Bf().withStaticClasses}function _6e(){return Bf().headless}function O6e(){return Bf().stylesTransform?.sx}function I6e(){return Bf().stylesTransform?.styles}function EC(){return Bf().env||"default"}function R6e(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function B6e(t){let e=t.replace("#","");if(e.length===3){const a=e.split("");e=[a[0],a[0],a[1],a[1],a[2],a[2]].join("")}if(e.length===8){const a=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a}}const n=parseInt(e,16),r=n>>16&255,i=n>>8&255,o=n&255;return{r,g:i,b:o,a:1}}function L6e(t){const[e,n,r,i]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:i===void 0?1:i}}function F6e(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,a=n[5]?parseFloat(n[5]):void 0,s=(1-Math.abs(2*o-1))*i,l=r/60,u=s*(1-Math.abs(l%2-1)),c=o-s/2;let f,d,h;return l>=0&&l<1?(f=s,d=u,h=0):l>=1&&l<2?(f=u,d=s,h=0):l>=2&&l<3?(f=0,d=s,h=u):l>=3&&l<4?(f=0,d=u,h=s):l>=4&&l<5?(f=u,d=0,h=s):(f=s,d=0,h=u),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:a||1}}function B_(t){return R6e(t)?B6e(t):t.startsWith("rgb")?L6e(t):t.startsWith("hsl")?F6e(t):{r:0,g:0,b:0,a:1}}function Yy(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:i,a:o}=B_(t),a=1-e,s=l=>Math.round(l*a);return`rgba(${s(n)}, ${s(r)}, ${s(i)}, ${o})`}function V1(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function m3(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function P6e(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function $6e(t){if(t.startsWith("oklch("))return(P6e(t)||0)/100;const{r:e,g:n,b:r}=B_(t),i=e/255,o=n/255,a=r/255,s=m3(i),l=m3(o),u=m3(a);return .2126*s+.7152*l+.0722*u}function Ag(t,e=.179){return t.startsWith("var(")?!1:$6e(t)>e}function xh({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Ag(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Ag(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Ag(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,i]=t.split("."),o=i?Number(i):void 0,a=r in e.colors;if(a){const s=o!==void 0?e.colors[r][o]:e.colors[r][V1(e,n||"light")];return{color:r,value:s,shade:o,isThemeColor:a,isLight:Ag(s,e.luminanceThreshold),variable:i?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:a,isLight:Ag(t,e.luminanceThreshold),shade:o,variable:void 0}}function qu(t,e){const n=xh({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function _4(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=qu(n.from,e),i=qu(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Nl(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const o=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${o}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:i}=B_(t);return`rgba(${n}, ${r}, ${i}, ${e})`}const bp=Nl,z6e=({color:t,theme:e,variant:n,gradient:r,autoContrast:i})=>{const o=xh({color:t,theme:e}),a=typeof i=="boolean"?i:e.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const s=a&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:s,border:`${We(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:s,border:`${We(1)} solid transparent`}:{background:t,hover:Yy(t,.1),color:s,border:`${We(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${We(1)} solid transparent`};const s=e.colors[o.color][o.shade];return{background:Nl(s,.1),hover:Nl(s,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:Nl(t,.1),hover:Nl(t,.12),color:t,border:`${We(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${We(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Nl(e.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${We(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:Nl(t,.05),color:t,border:`${We(1)} solid ${t}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${We(1)} solid transparent`};const s=e.colors[o.color][o.shade];return{background:"transparent",hover:Nl(s,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:"transparent",hover:Nl(t,.12),color:t,border:`${We(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${We(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:Yy(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Yy(e.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Yy(e.white,.01),color:t,border:`${We(1)} solid transparent`}:n==="gradient"?{background:_4(r,e),hover:_4(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${We(1)} solid var(--mantine-color-default-border)`}:{}},U6e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},_F="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",L_={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:U6e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:z6e,autoContrast:!1,luminanceThreshold:.3,fontFamily:_F,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:_F,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:We(34),lineHeight:"1.3"},h2:{fontSize:We(26),lineHeight:"1.35"},h3:{fontSize:We(22),lineHeight:"1.4"},h4:{fontSize:We(18),lineHeight:"1.45"},h5:{fontSize:We(16),lineHeight:"1.5"},h6:{fontSize:We(14),lineHeight:"1.5"}}},fontSizes:{xs:We(12),sm:We(14),md:We(16),lg:We(18),xl:We(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:We(2),sm:We(4),md:We(8),lg:We(16),xl:We(32)},spacing:{xs:We(10),sm:We(12),md:We(16),lg:We(20),xl:We(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), 0 ${We(1)} ${We(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(10)} ${We(15)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(7)} ${We(7)} ${We(-5)}`,md:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(20)} ${We(25)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(10)} ${We(10)} ${We(-5)}`,lg:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(28)} ${We(23)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(12)} ${We(12)} ${We(-7)}`,xl:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(36)} ${We(28)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(17)} ${We(17)} ${We(-7)}`},other:{},components:{}};function OF(t){return t==="auto"||t==="dark"||t==="light"}function H6e({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return OF(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&OF(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const V6e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",IF="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function g3(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function RF(t){if(!(t.primaryColor in t.colors))throw new Error(V6e);if(typeof t.primaryShade=="object"&&(!g3(t.primaryShade.dark)||!g3(t.primaryShade.light)))throw new Error(IF);if(typeof t.primaryShade=="number"&&!g3(t.primaryShade))throw new Error(IF)}function q6e(t,e){if(!e)return RF(t),t;const n=k_(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),RF(n),n}const F_=q.createContext(null),j6e=()=>q.useContext(F_)||L_;function la(){const t=q.useContext(F_);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function FZ({theme:t,children:e,inherit:n=!0}){const r=j6e(),i=q.useMemo(()=>q6e(n?r:L_,t),[t,r,n]);return _.jsx(F_.Provider,{value:i,children:e})}FZ.displayName="@mantine/core/MantineThemeProvider";function G6e(){const t=la(),e=R_(),n=Bl(t.breakpoints).reduce((r,i)=>{const o=t.breakpoints[i].includes("px"),a=Q5e(t.breakpoints[i]),s=o?`${a-.1}px`:MF(a-.1),l=o?`${a}px`:MF(a);return`${r}@media (max-width: ${s}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function v3(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function PZ(t,e){const n=e?[e]:[":root",":host"],r=v3(t.variables),i=r?`${n.join(", ")}{${r}}`:"",o=v3(t.dark),a=v3(t.light),s=c=>n.map(f=>f===":host"?`${f}([data-mantine-color-scheme="${c}"])`:`${f}[data-mantine-color-scheme="${c}"]`).join(", "),l=o?`${s("dark")}{${o}}`:"",u=a?`${s("light")}{${a}}`:"";return`${i}

${l}

${u}`}function $Z({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&xh({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function BF(t,e){return $Z({color:t.colors[t.primaryColor][V1(t,e)],theme:t,autoContrast:null})}function Wy({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:i=!0}){if(!t.colors[e])return{};if(n==="light"){const s=V1(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:bp(t.colors[e][s],.1),[`--mantine-color-${r}-light-hover`]:bp(t.colors[e][s],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline-hover`]:bp(t.colors[e][s],.05)};return i?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const o=V1(t,"dark"),a={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:bp(t.colors[e][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:bp(t.colors[e][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:bp(t.colors[e][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...a}:a}function Y6e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function yp(t,e,n){Bl(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const zZ=t=>{const e=V1(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:We(t.defaultRadius),r={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":BF(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":BF(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};yp(r.variables,t.breakpoints,"breakpoint"),yp(r.variables,t.spacing,"spacing"),yp(r.variables,t.fontSizes,"font-size"),yp(r.variables,t.lineHeights,"line-height"),yp(r.variables,t.shadows,"shadow"),yp(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((o,a)=>{r.variables[`--mantine-primary-color-${a}`]=`var(--mantine-color-${t.primaryColor}-${a})`}),Bl(t.colors).forEach(o=>{const a=t.colors[o];if(Y6e(a)){Object.assign(r.light,Wy({theme:t,name:a.name,color:a.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Wy({theme:t,name:a.name,color:a.dark,colorScheme:"dark",withColorValues:!0}));return}a.forEach((s,l)=>{r.variables[`--mantine-color-${o}-${l}`]=s}),Object.assign(r.light,Wy({theme:t,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Wy({theme:t,color:o,colorScheme:"dark",withColorValues:!1}))});const i=t.headings.sizes;return Bl(i).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=i[o].fontSize,r.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||t.headings.fontWeight}),r};function W6e({theme:t,generator:e}){const n=zZ(t),r=e?.(t);return r?k_(n,r):n}const b3=zZ(L_);function K6e(t){const e={variables:{},light:{},dark:{}};return Bl(t.variables).forEach(n=>{b3.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Bl(t.light).forEach(n=>{b3.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Bl(t.dark).forEach(n=>{b3.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function X6e(t){return PZ({variables:{},dark:{"--mantine-color-scheme":"dark"},light:{"--mantine-color-scheme":"light"}},t)}function UZ({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=la(),r=R_(),i=D6e(),o=W6e({theme:n,generator:i}),a=(t===void 0||t===":root"||t===":host")&&e,s=a?K6e(o):o,l=PZ(s,t);return l?_.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${a?"":X6e(t)}`}}):null}UZ.displayName="@mantine/CssVariables";function xp(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function Z6e({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const i=q.useRef(null),[o,a]=q.useState(()=>t.get(e)),s=r||o,l=q.useCallback(c=>{r||(xp(c,n),a(c),t.set(c))},[t.set,s,r]),u=q.useCallback(()=>{a(e),xp(e,n),t.clear()},[t.clear,e]);return q.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),wv(()=>{xp(t.get(e),n)},[]),q.useEffect(()=>{if(r)return xp(r,n),()=>{};r===void 0&&xp(o,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=f=>{o==="auto"&&xp(f.matches?"dark":"light",n)};return i.current?.addEventListener("change",c),()=>i.current?.removeEventListener("change",c)},[o,r]),{colorScheme:s,setColorScheme:l,clearColorScheme:u}}function Q6e({respectReducedMotion:t,getRootElement:e}){wv(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}function HZ({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:a=!0,cssVariablesSelector:s,classNamesPrefix:l="mantine",colorSchemeManager:u=H6e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:m,env:v}){const{colorScheme:b,setColorScheme:x,clearColorScheme:C}=Z6e({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:f});return Q6e({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:f}),_.jsx(I_.Provider,{value:{colorScheme:b,setColorScheme:x,clearColorScheme:C,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:s??":root",withStaticClasses:r,stylesTransform:m,env:v},children:_.jsxs(FZ,{theme:t,children:[a&&_.jsx(UZ,{cssVariablesSelector:s,deduplicateCssVariables:o}),i&&_.jsx(G6e,{}),e]})})}HZ.displayName="@mantine/core/MantineProvider";function CC({classNames:t,styles:e,props:n,stylesCtx:r}){const i=la();return{resolvedClassNames:wC({theme:i,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Mw({theme:i,styles:e,props:n,stylesCtx:r||void 0})}}const J6e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function eOe({theme:t,options:e,unstyled:n}){return tc(e?.focusable&&!n&&(t.focusClassName||J6e[t.focusRing]),e?.active&&!n&&t.activeClassName)}function tOe({selector:t,stylesCtx:e,options:n,props:r,theme:i}){return wC({theme:i,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function LF({selector:t,stylesCtx:e,theme:n,classNames:r,props:i}){return wC({theme:n,classNames:r,props:i,stylesCtx:e})[t]}function nOe({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function rOe({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function iOe({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(i=>`${e}-${i}-${n}`)}function oOe({themeName:t,theme:e,selector:n,props:r,stylesCtx:i}){return t.map(o=>wC({theme:e,classNames:e.components[o]?.classNames,props:r,stylesCtx:i})?.[n])}function aOe({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function sOe({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:i,classNames:o,classes:a,unstyled:s,className:l,rootSelector:u,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:m}){return tc(eOe({theme:t,options:e,unstyled:s||h}),oOe({theme:t,themeName:n,selector:r,props:c,stylesCtx:f}),aOe({options:e,classes:a,selector:r,unstyled:s}),LF({selector:r,stylesCtx:f,theme:t,classNames:o,props:c}),LF({selector:r,stylesCtx:f,theme:t,classNames:m,props:c}),tOe({selector:r,stylesCtx:f,options:e,props:c,theme:t}),nOe({rootSelector:u,selector:r,className:l}),rOe({selector:r,classes:a,unstyled:s||h}),d&&!h&&iOe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function lOe({theme:t,themeName:e,props:n,stylesCtx:r,selector:i}){return e.map(o=>Mw({theme:t,styles:t.components[o]?.styles,props:n,stylesCtx:r})[i]).reduce((o,a)=>({...o,...a}),{})}function O4({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...O4({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function uOe(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...vC(n[r])}}),e),{})}function cOe({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:i,selector:o,themeName:a,headless:s}){return uOe([s?{}:e?.(n,r,i),...a.map(l=>n.components?.[l]?.vars?.(n,r,i)),t?.(n,r,i)])?.[o]}function fOe({theme:t,themeName:e,selector:n,options:r,props:i,stylesCtx:o,rootSelector:a,styles:s,style:l,vars:u,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&lOe({theme:t,themeName:e,props:i,stylesCtx:o,selector:n}),...!d&&Mw({theme:t,styles:s,props:i,stylesCtx:o})[n],...!d&&Mw({theme:t,styles:r?.styles,props:r?.props||i,stylesCtx:o})[n],...cOe({theme:t,props:i,stylesCtx:o,vars:u,varsResolver:c,selector:n,themeName:e,headless:f}),...a===n?O4({style:l,theme:t}):null,...O4({style:r?.style,theme:t})}}function dOe({props:t,stylesCtx:e,themeName:n}){const r=la(),i=I6e()?.();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:t,theme:r,ctx:e})),...n.map(l=>i(r.components[l]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!i}}function Mn({name:t,classes:e,props:n,stylesCtx:r,className:i,style:o,rootSelector:a="root",unstyled:s,classNames:l,styles:u,vars:c,varsResolver:f,attributes:d}){const h=la(),m=M6e(),v=k6e(),b=_6e(),x=(Array.isArray(t)?t:[t]).filter(A=>A),{withStylesTransform:C,getTransformedStyles:w}=dOe({props:n,stylesCtx:r,themeName:x});return(A,E)=>({className:sOe({theme:h,options:E,themeName:x,selector:A,classNamesPrefix:m,classNames:l,classes:e,unstyled:s,className:i,rootSelector:a,props:n,stylesCtx:r,withStaticClasses:v,headless:b,transformedStyles:w([E?.styles,u])}),style:fOe({theme:h,themeName:x,selector:A,options:E,props:n,stylesCtx:r,rootSelector:a,styles:u,style:o,vars:c,varsResolver:f,headless:b,withStylesTransform:C}),...d?.[A]})}function hOe(t,e){return typeof t=="boolean"?t:e.autoContrast}function xt(t,e,n){const r=la(),i=r.components[t]?.defaultProps,o=typeof i=="function"?i(r):i;return{...e,...o,...vC(n)}}function y3(t){return Bl(t).reduce((e,n)=>t[n]!==void 0?`${e}${X5e(n)}:${t[n]};`:e,"").trim()}function pOe({selector:t,styles:e,media:n,container:r}){const i=e?y3(e):"",o=Array.isArray(n)?n.map(s=>`@media${s.query}{${t}{${y3(s.styles)}}}`):[],a=Array.isArray(r)?r.map(s=>`@container ${s.query}{${t}{${y3(s.styles)}}}`):[];return`${i?`${t}{${i}}`:""}${o.join("")}${a.join("")}`.trim()}function VZ(t){const e=R_();return _.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:pOe(t)}})}function SC(t){const{m:e,mx:n,my:r,mt:i,mb:o,ml:a,mr:s,me:l,ms:u,p:c,px:f,py:d,pt:h,pb:m,pl:v,pr:b,pe:x,ps:C,bd:w,bdrs:A,bg:E,c:T,opacity:N,ff:D,fz:M,fw:k,lts:B,ta:P,lh:$,fs:z,tt:j,td:L,w:U,miw:G,maw:Z,h:H,mih:W,mah:K,bgsz:I,bgp:ee,bgr:Q,bga:ce,pos:ve,top:ie,left:X,bottom:le,right:Ce,inset:he,display:Te,flex:Ae,hiddenFrom:qe,visibleFrom:rt,lightHidden:lt,darkHidden:Qe,sx:st,...dt}=t;return{styleProps:vC({m:e,mx:n,my:r,mt:i,mb:o,ml:a,mr:s,me:l,ms:u,p:c,px:f,py:d,pt:h,pb:m,pl:v,pr:b,pe:x,ps:C,bd:w,bg:E,c:T,opacity:N,ff:D,fz:M,fw:k,lts:B,ta:P,lh:$,fs:z,tt:j,td:L,w:U,miw:G,maw:Z,h:H,mih:W,mah:K,bgsz:I,bgp:ee,bgr:Q,bga:ce,pos:ve,top:ie,left:X,bottom:le,right:Ce,inset:he,display:Te,flex:Ae,bdrs:A,hiddenFrom:qe,visibleFrom:rt,lightHidden:lt,darkHidden:Qe,sx:st}),rest:dt}}const mOe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function P_(t,e){const n=xh({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function gOe(t,e){const n=xh({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:P_(t,e)}function vOe(t,e){if(typeof t=="number")return We(t);if(typeof t=="string"){const[n,r,...i]=t.split(" ").filter(a=>a.trim()!=="");let o=`${We(n)}`;return r&&(o+=` ${r}`),i.length>0&&(o+=` ${P_(i.join(" "),e)}`),o.trim()}return t}const FF={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function bOe(t){return typeof t=="string"&&t in FF?FF[t]:t}const yOe=["h1","h2","h3","h4","h5","h6"];function xOe(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&yOe.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?We(t):t}function wOe(t){return t}const EOe=["h1","h2","h3","h4","h5","h6"];function COe(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&EOe.includes(t)?`var(--mantine-${t}-line-height)`:t}function SOe(t,e){return typeof t=="string"&&t in e.radius?`var(--mantine-radius-${t})`:typeof t=="number"||typeof t=="string"?We(t):t}function TOe(t){return typeof t=="number"?We(t):t}function AOe(t,e){if(typeof t=="number")return We(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return We(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const x3={color:P_,textColor:gOe,fontSize:xOe,spacing:AOe,radius:SOe,identity:wOe,size:TOe,lineHeight:COe,fontFamily:bOe,border:vOe};function PF(t){return t.replace("(min-width: ","").replace("em)","")}function NOe({media:t,...e}){const r=Object.keys(t).sort((i,o)=>Number(PF(i))-Number(PF(o))).map(i=>({query:i,styles:t[i]}));return{...e,media:r}}function DOe(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function MOe(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function kOe(t){return typeof t=="object"&&t!==null?Bl(t).filter(e=>e!=="base"):[]}function _Oe(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function qZ({styleProps:t,data:e,theme:n}){return NOe(Bl(t).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const o=e[i],a=Array.isArray(o.property)?o.property:[o.property],s=MOe(t[i]);if(!DOe(t[i]))return a.forEach(u=>{r.inlineStyles[u]=x3[o.type](s,n)}),r;r.hasResponsiveStyles=!0;const l=kOe(t[i]);return a.forEach(u=>{s!=null&&(r.styles[u]=x3[o.type](s,n)),l.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[u]:x3[o.type](_Oe(t[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function jZ(){return`__m__-${q.useId().replace(/[:]/g,"")}`}function GZ(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...GZ(r,e)}),{}):typeof t=="function"?t(e):t??{}}function YZ(t){return t.startsWith("data-")?t:`data-${t}`}function OOe(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[YZ(n)]=t[n]),e},{})}function WZ(t){return t?typeof t=="string"?{[YZ(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...WZ(n)}),{}):OOe(t):null}function I4(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...I4(r,e)}),{}):typeof t=="function"?t(e):t??{}}function IOe({theme:t,style:e,vars:n,styleProps:r}){const i=I4(e,t),o=I4(n,t);return{...i,...o,...r}}const KZ=q.forwardRef(({component:t,style:e,__vars:n,className:r,variant:i,mod:o,size:a,hiddenFrom:s,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:f,__size:d,...h},m)=>{const v=la(),b=t||"div",{styleProps:x,rest:C}=SC(h),A=O6e()?.()?.(x.sx),E=jZ(),T=qZ({styleProps:x,theme:v,data:mOe}),N={ref:m,style:IOe({theme:v,style:e,vars:n,styleProps:T.inlineStyles}),className:tc(r,A,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":MZ(a)?void 0:a||void 0,size:d,...WZ(o),...C};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(VZ,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(N):_.jsx(b,{...N})]})});KZ.displayName="@mantine/core/Box";const zt=KZ;function XZ(t){return t}function ROe(t){const e=t;return n=>{const r=q.forwardRef((i,o)=>_.jsx(e,{...n,...i,ref:o}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function kn(t){const e=q.forwardRef(t);return e.extend=XZ,e.withProps=n=>{const r=q.forwardRef((i,o)=>_.jsx(e,{...n,...i,ref:o}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function co(t){const e=q.forwardRef(t);return e.withProps=n=>{const r=q.forwardRef((i,o)=>_.jsx(e,{...n,...i,ref:o}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=XZ,e}const BOe=q.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Jm(){return q.useContext(BOe)}var ZZ={root:"m_87cf2631"};const LOe={__staticSelector:"UnstyledButton"},Lf=co((t,e)=>{const n=xt("UnstyledButton",LOe,t),{className:r,component:i="button",__staticSelector:o,unstyled:a,classNames:s,styles:l,style:u,attributes:c,...f}=n,d=Mn({name:o,props:n,classes:ZZ,className:r,style:u,classNames:s,styles:l,unstyled:a,attributes:c});return _.jsx(zt,{...d("root",{focusable:!0}),component:i,ref:e,type:i==="button"?"button":void 0,...f})});Lf.classes=ZZ;Lf.displayName="@mantine/core/UnstyledButton";var QZ={root:"m_515a97f8"};const $_=kn((t,e)=>{const n=xt("VisuallyHidden",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,attributes:u,...c}=n,f=Mn({name:"VisuallyHidden",classes:QZ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:u});return _.jsx(zt,{component:"span",ref:e,...f("root"),...c})});$_.classes=QZ;$_.displayName="@mantine/core/VisuallyHidden";var JZ={root:"m_1b7284a3"};const FOe=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:uo(e),"--paper-shadow":_Z(n)}}),z_=co((t,e)=>{const n=xt("Paper",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,withBorder:l,vars:u,radius:c,shadow:f,variant:d,mod:h,attributes:m,...v}=n,b=Mn({name:"Paper",props:n,classes:JZ,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:m,vars:u,varsResolver:FOe});return _.jsx(zt,{ref:e,mod:[{"data-with-border":l},h],...b("root"),variant:d,...v})});z_.classes=JZ;z_.displayName="@mantine/core/Paper";function $F(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function zF(t,e,n,r,i){return t==="center"||r==="center"?{left:e}:t==="end"?{[i==="ltr"?"right":"left"]:n}:t==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const POe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function $Oe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:o,arrowY:a,dir:s}){const[l,u="center"]=t.split("-"),c={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[POe[l]]:r},f=-e/2;return l==="left"?{...c,...$F(u,a,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...c,...$F(u,a,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...c,...zF(u,o,n,i,s),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...c,...zF(u,o,n,i,s),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const kw=q.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:o,arrowX:a,arrowY:s,style:l,...u},c)=>{const{dir:f}=Jm();return o?_.jsx("div",{...u,ref:c,style:{...l,...$Oe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:a,arrowY:s})}}):null});kw.displayName="@mantine/core/FloatingArrow";function eQ(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return e}var tQ={root:"m_9814e45f"};const zOe={zIndex:yv("modal")},UOe=(t,{gradient:e,color:n,backgroundOpacity:r,blur:i,radius:o,zIndex:a})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Nl(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${We(i)})`:void 0,"--overlay-radius":o===void 0?void 0:uo(o),"--overlay-z-index":a?.toString()}}),q1=co((t,e)=>{const n=xt("Overlay",zOe,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,fixed:u,center:c,children:f,radius:d,zIndex:h,gradient:m,blur:v,color:b,backgroundOpacity:x,mod:C,attributes:w,...A}=n,E=Mn({name:"Overlay",props:n,classes:tQ,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:w,vars:l,varsResolver:UOe});return _.jsx(zt,{ref:e,...E("root"),mod:[{center:c,fixed:u},C],...A,children:f})});q1.classes=tQ;q1.displayName="@mantine/core/Overlay";function w3(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function HOe({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||w3(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const i=w3(n);return i.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(i),i}return w3(n)}const VOe={reuseTargetNode:!0},nQ=kn((t,e)=>{const{children:n,target:r,reuseTargetNode:i,...o}=xt("Portal",VOe,t),[a,s]=q.useState(!1),l=q.useRef(null);return wv(()=>(s(!0),l.current=HOe({target:r,reuseTargetNode:i,...o}),Dw(e,l.current),!r&&!i&&l.current&&document.body.appendChild(l.current),()=>{!r&&!i&&l.current&&document.body.removeChild(l.current)}),[r]),!a||!l.current?null:Vs.createPortal(_.jsx(_.Fragment,{children:n}),l.current)});nQ.displayName="@mantine/core/Portal";const Am=kn(({withinPortal:t=!0,children:e,...n},r)=>EC()==="test"||!t?_.jsx(_.Fragment,{children:e}):_.jsx(nQ,{ref:r,...n,children:e}));Am.displayName="@mantine/core/OptionalPortal";const Ng=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Ky={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Ng("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Ng("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Ng("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Ng("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Ng("top"),common:{transformOrigin:"top right"}}},UF={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function qOe({transition:t,state:e,duration:n,timingFunction:r}){const i={WebkitBackfaceVisibility:"hidden",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Ky?{transitionProperty:Ky[t].transitionProperty,...i,...Ky[t].common,...Ky[t][UF[e]]}:{}:{transitionProperty:t.transitionProperty,...i,...t.common,...t[UF[e]]}}function jOe({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:i,onExit:o,onEntered:a,onExited:s,enterDelay:l,exitDelay:u}){const c=la(),f=w6e(),d=c.respectReducedMotion?f:!1,[h,m]=q.useState(d?0:t),[v,b]=q.useState(r?"entered":"exited"),x=q.useRef(-1),C=q.useRef(-1),w=q.useRef(-1);function A(){window.clearTimeout(x.current),window.clearTimeout(C.current),cancelAnimationFrame(w.current)}const E=N=>{A();const D=N?i:o,M=N?a:s,k=d?0:N?t:e;m(k),k===0?(typeof D=="function"&&D(),typeof M=="function"&&M(),b(N?"entered":"exited")):w.current=requestAnimationFrame(()=>{woe.flushSync(()=>{b(N?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof D=="function"&&D(),b(N?"entering":"exiting"),x.current=window.setTimeout(()=>{typeof M=="function"&&M(),b(N?"entered":"exited")},k)})})},T=N=>{if(A(),typeof(N?l:u)!="number"){E(N);return}C.current=window.setTimeout(()=>{E(N)},N?l:u)};return H1(()=>{T(r)},[r]),q.useEffect(()=>()=>{A()},[]),{transitionDuration:h,transitionStatus:v,transitionTimingFunction:n||"ease"}}function wf({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:i,children:o,timingFunction:a="ease",onExit:s,onEntered:l,onEnter:u,onExited:c,enterDelay:f,exitDelay:d}){const h=EC(),{transitionDuration:m,transitionStatus:v,transitionTimingFunction:b}=jOe({mounted:i,exitDuration:r,duration:n,timingFunction:a,onExit:s,onEntered:l,onEnter:u,onExited:c,enterDelay:f,exitDelay:d});return m===0||h==="test"?i?_.jsx(_.Fragment,{children:o({})}):t?o({display:"none"}):null:v==="exited"?t?o({display:"none"}):null:_.jsx(_.Fragment,{children:o(qOe({transition:e,duration:m,state:v,timingFunction:b}))})}wf.displayName="@mantine/core/Transition";const[GOe,rQ]=bC("Popover component was not found in the tree");function U_({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const i=BZ(e),o=ol(i,r),a=Ev(t);return a?q.cloneElement(a,{[n]:o}):t}function iQ(t){return _.jsx($_,{tabIndex:-1,"data-autofocus":!0,...t})}U_.displayName="@mantine/core/FocusTrap";iQ.displayName="@mantine/core/FocusTrapInitialFocus";U_.InitialFocus=iQ;var oQ={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const TC=kn((t,e)=>{const n=xt("PopoverDropdown",null,t),{className:r,style:i,vars:o,children:a,onKeyDownCapture:s,variant:l,classNames:u,styles:c,...f}=n,d=rQ(),h=h6e({opened:d.opened,shouldReturnFocus:d.returnFocus}),m=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},v=ol(e,d.floating);return d.disabled?null:_.jsx(Am,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(wf,{mounted:d.opened,...d.transitionProps,transition:d.transitionProps?.transition||"fade",duration:d.transitionProps?.duration??150,keepMounted:d.keepMounted,exitDuration:typeof d.transitionProps?.exitDuration=="number"?d.transitionProps.exitDuration:d.transitionProps?.duration,children:b=>_.jsx(U_,{active:d.trapFocus&&d.opened,innerRef:v,children:_.jsxs(zt,{...m,...f,variant:l,onKeyDownCapture:i6e(()=>{d.onClose?.(),d.onDismiss?.()},{active:d.closeOnEscape,onTrigger:h,onKeyDown:s}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...b,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:We(d.width),...d.referenceHidden?{display:"none"}:null},d.resolvedStyles.dropdown,c?.dropdown,i]}),children:[a,_.jsx(kw,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});TC.classes=oQ;TC.displayName="@mantine/core/PopoverDropdown";const YOe={refProp:"ref",popupType:"dialog"},H_=kn((t,e)=>{const{children:n,refProp:r,popupType:i,...o}=xt("PopoverTarget",YOe,t),a=Ev(n);if(!a)throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=o,l=rQ(),u=ol(l.reference,O_(a),e),c=l.withRoles?{"aria-haspopup":i,"aria-expanded":l.opened,"aria-controls":l.getDropdownId(),id:l.getTargetId()}:{},f=a.props;return q.cloneElement(a,{...s,...c,...l.targetProps,className:tc(l.targetProps.className,s.className,f.className),[r]:u,...l.controlled?null:{onClick:()=>{l.onToggle(),f.onClick?.()}}})});H_.displayName="@mantine/core/PopoverTarget";function WOe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function KOe(t,e,n){const r=WOe(t.middlewares),i=[hs(t.offset),RMe()];return t.dropdownVisible&&n!=="test"&&t.preventPositionChangeWhenVisible&&(r.flip=!1),r.shift&&i.push(Rf(typeof r.shift=="boolean"?{limiter:eF(),padding:5}:{limiter:eF(),padding:5,...r.shift})),r.flip&&i.push(typeof r.flip=="boolean"?Vu():Vu(r.flip)),r.inline&&i.push(typeof r.inline=="boolean"?l1():l1(r.inline)),i.push(GX({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&i.push(U1({...typeof r.size=="boolean"?{}:r.size,apply({rects:o,availableWidth:a,availableHeight:s,...l}){const c=e().refs.floating.current?.style??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:o,availableWidth:a,availableHeight:s,...l}):Object.assign(c,{maxWidth:`${a}px`,maxHeight:`${s}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),i}function XOe(t){const e=EC(),[n,r]=Qm({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),i=q.useRef(n),o=()=>{n&&!t.disabled&&r(!1)},a=()=>{t.disabled||r(!n)},s=pC({strategy:t.strategy,placement:t.preventPositionChangeWhenVisible?t.positionRef.current:t.position,middleware:KOe(t,()=>s,e),whileElementsMounted:t.keepMounted?void 0:xw});return q.useEffect(()=>{if(!(!s.refs.reference.current||!s.refs.floating.current)&&n)return xw(s.refs.reference.current,s.refs.floating.current,s.update)},[n,s.update]),H1(()=>{t.onPositionChange?.(s.placement),t.positionRef.current=s.placement},[s.placement,t.preventPositionChangeWhenVisible]),H1(()=>{n!==i.current&&(n?t.onOpen?.():t.onClose?.()),i.current=n},[n,t.onClose,t.onOpen]),wv(()=>{let l=-1;return n&&(l=window.setTimeout(()=>t.setDropdownVisible(!0),4)),()=>{window.clearTimeout(l)}},[n,t.position]),{floating:s,controlled:typeof t.opened=="boolean",opened:n,onClose:o,onToggle:a}}const ZOe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:yv("popover"),__staticSelector:"Popover",width:"max-content"},QOe=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:uo(e),"--popover-shadow":_Z(n)}});function al(t){const e=xt("Popover",ZOe,t),{children:n,position:r,offset:i,onPositionChange:o,positionDependencies:a,opened:s,transitionProps:l,onExitTransitionEnd:u,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:b,arrowPosition:x,unstyled:C,classNames:w,styles:A,closeOnClickOutside:E,withinPortal:T,portalProps:N,closeOnEscape:D,clickOutsideEvents:M,trapFocus:k,onClose:B,onDismiss:P,onOpen:$,onChange:z,zIndex:j,radius:L,shadow:U,id:G,defaultOpened:Z,__staticSelector:H,withRoles:W,disabled:K,returnFocus:I,variant:ee,keepMounted:Q,vars:ce,floatingStrategy:ve,withOverlay:ie,overlayProps:X,hideDetached:le,attributes:Ce,preventPositionChangeWhenVisible:he,...Te}=e,Ae=Mn({name:H,props:e,classes:oQ,classNames:w,styles:A,unstyled:C,attributes:Ce,rootSelector:"dropdown",vars:ce,varsResolver:QOe}),{resolvedStyles:qe}=CC({classNames:w,styles:A,props:e}),[rt,lt]=q.useState(s??Z??!1),Qe=q.useRef(r),st=q.useRef(null),[dt,te]=q.useState(null),[me,J]=q.useState(null),{dir:ae}=Jm(),ge=EC(),se=Zm(G),fe=XOe({middlewares:d,width:f,position:eQ(ae,r),offset:typeof i=="number"?i+(h?m/2:0):i,arrowRef:st,arrowOffset:v,onPositionChange:o,positionDependencies:a,opened:s,defaultOpened:Z,onChange:z,onOpen:$,onClose:B,onDismiss:P,strategy:ve,dropdownVisible:rt,setDropdownVisible:lt,positionRef:Qe,disabled:K,preventPositionChangeWhenVisible:he,keepMounted:Q});u6e(()=>{E&&(fe.onClose(),P?.())},M,[dt,me]);const we=q.useCallback(Pe=>{te(Pe),fe.floating.refs.setReference(Pe)},[fe.floating.refs.setReference]),Be=q.useCallback(Pe=>{J(Pe),fe.floating.refs.setFloating(Pe)},[fe.floating.refs.setFloating]),Oe=q.useCallback(()=>{l?.onExited?.(),u?.(),lt(!1),he||(Qe.current=r)},[l?.onExited,u,he,r]),Je=q.useCallback(()=>{l?.onEntered?.(),c?.()},[l?.onEntered,c]);return _.jsxs(GOe,{value:{returnFocus:I,disabled:K,controlled:fe.controlled,reference:we,floating:Be,x:fe.floating.x,y:fe.floating.y,arrowX:fe.floating?.middlewareData?.arrow?.x,arrowY:fe.floating?.middlewareData?.arrow?.y,opened:fe.opened,arrowRef:st,transitionProps:{...l,onExited:Oe,onEntered:Je},width:f,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:b,arrowPosition:x,placement:fe.floating.placement,trapFocus:k,withinPortal:T,portalProps:N,zIndex:j,radius:L,shadow:U,closeOnEscape:D,onDismiss:P,onClose:fe.onClose,onToggle:fe.onToggle,getTargetId:()=>`${se}-target`,getDropdownId:()=>`${se}-dropdown`,withRoles:W,targetProps:Te,__staticSelector:H,classNames:w,styles:A,unstyled:C,variant:ee,keepMounted:Q,getStyles:Ae,resolvedStyles:qe,floatingStrategy:ve,referenceHidden:le&&ge!=="test"?fe.floating.middlewareData.hide?.referenceHidden:!1},children:[n,ie&&_.jsx(wf,{transition:"fade",mounted:fe.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Pe=>_.jsx(Am,{withinPortal:T,children:_.jsx(q1,{...X,...Ae("overlay",{className:X?.className,style:[Pe,X?.style]})})})})]})}al.Target=H_;al.Dropdown=TC;al.displayName="@mantine/core/Popover";al.extend=t=>t;var Ps={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const aQ=q.forwardRef(({className:t,...e},n)=>_.jsxs(zt,{component:"span",className:tc(Ps.barsLoader,t),...e,ref:n,children:[_.jsx("span",{className:Ps.bar}),_.jsx("span",{className:Ps.bar}),_.jsx("span",{className:Ps.bar})]}));aQ.displayName="@mantine/core/Bars";const sQ=q.forwardRef(({className:t,...e},n)=>_.jsxs(zt,{component:"span",className:tc(Ps.dotsLoader,t),...e,ref:n,children:[_.jsx("span",{className:Ps.dot}),_.jsx("span",{className:Ps.dot}),_.jsx("span",{className:Ps.dot})]}));sQ.displayName="@mantine/core/Dots";const lQ=q.forwardRef(({className:t,...e},n)=>_.jsx(zt,{component:"span",className:tc(Ps.ovalLoader,t),...e,ref:n}));lQ.displayName="@mantine/core/Oval";const uQ={bars:aQ,oval:lQ,dots:sQ},JOe={loaders:uQ,type:"oval"},e8e=(t,{size:e,color:n})=>({root:{"--loader-size":br(e,"loader-size"),"--loader-color":n?qu(n,t):void 0}}),Ff=kn((t,e)=>{const n=xt("Loader",JOe,t),{size:r,color:i,type:o,vars:a,className:s,style:l,classNames:u,styles:c,unstyled:f,loaders:d,variant:h,children:m,attributes:v,...b}=n,x=Mn({name:"Loader",props:n,classes:Ps,className:s,style:l,classNames:u,styles:c,unstyled:f,attributes:v,vars:a,varsResolver:e8e});return m?_.jsx(zt,{...x("root"),ref:e,...b,children:m}):_.jsx(zt,{...x("root"),ref:e,component:d[o],variant:h,size:r,...b})});Ff.defaultLoaders=uQ;Ff.classes=Ps;Ff.displayName="@mantine/core/Loader";var e0={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const HF={orientation:"horizontal"},t8e=(t,{borderWidth:e})=>({group:{"--ai-border-width":We(e)}}),V_=kn((t,e)=>{const n=xt("ActionIconGroup",HF,t),{className:r,style:i,classNames:o,styles:a,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:d,attributes:h,...m}=xt("ActionIconGroup",HF,t),v=Mn({name:"ActionIconGroup",props:n,classes:e0,className:r,style:i,classNames:o,styles:a,unstyled:s,attributes:h,vars:u,varsResolver:t8e,rootSelector:"group"});return _.jsx(zt,{...v("group"),ref:e,variant:f,mod:[{"data-orientation":l},d],role:"group",...m})});V_.classes=e0;V_.displayName="@mantine/core/ActionIconGroup";const n8e=(t,{radius:e,color:n,gradient:r,variant:i,autoContrast:o,size:a})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":br(a,"section-height"),"--section-padding-x":br(a,"section-padding-x"),"--section-fz":na(a),"--section-radius":e===void 0?void 0:uo(e),"--section-bg":n||i?s.background:void 0,"--section-color":s.color,"--section-bd":n||i?s.border:void 0}}},q_=kn((t,e)=>{const n=xt("ActionIconGroupSection",null,t),{className:r,style:i,classNames:o,styles:a,unstyled:s,vars:l,variant:u,gradient:c,radius:f,autoContrast:d,attributes:h,...m}=n,v=Mn({name:"ActionIconGroupSection",props:n,classes:e0,className:r,style:i,classNames:o,styles:a,unstyled:s,attributes:h,vars:l,varsResolver:n8e,rootSelector:"groupSection"});return _.jsx(zt,{...v("groupSection"),ref:e,variant:u,...m})});q_.classes=e0;q_.displayName="@mantine/core/ActionIconGroupSection";const r8e=(t,{size:e,radius:n,variant:r,gradient:i,color:o,autoContrast:a})=>{const s=t.variantColorResolver({color:o||t.primaryColor,theme:t,gradient:i,variant:r||"filled",autoContrast:a});return{root:{"--ai-size":br(e,"ai-size"),"--ai-radius":n===void 0?void 0:uo(n),"--ai-bg":o||r?s.background:void 0,"--ai-hover":o||r?s.hover:void 0,"--ai-hover-color":o||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":o||r?s.border:void 0}}},wh=co((t,e)=>{const n=xt("ActionIcon",null,t),{className:r,unstyled:i,variant:o,classNames:a,styles:s,style:l,loading:u,loaderProps:c,size:f,color:d,radius:h,__staticSelector:m,gradient:v,vars:b,children:x,disabled:C,"data-disabled":w,autoContrast:A,mod:E,attributes:T,...N}=n,D=Mn({name:["ActionIcon",m],props:n,className:r,style:l,classes:e0,classNames:a,styles:s,unstyled:i,attributes:T,vars:b,varsResolver:r8e});return _.jsxs(Lf,{...D("root",{active:!C&&!u&&!w}),...N,unstyled:i,variant:o,size:f,disabled:C||u,ref:e,mod:[{loading:u,disabled:C||w},E],children:[typeof u=="boolean"&&_.jsx(wf,{mounted:u,transition:"slide-down",duration:150,children:M=>_.jsx(zt,{component:"span",...D("loader",{style:M}),"aria-hidden":!0,children:_.jsx(Ff,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(zt,{component:"span",mod:{loading:u},...D("icon"),children:x})]})});wh.classes=e0;wh.displayName="@mantine/core/ActionIcon";wh.Group=V_;wh.GroupSection=q_;const cQ=q.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));cQ.displayName="@mantine/core/CloseIcon";var fQ={root:"m_86a44da5","root--subtle":"m_220c80f2"};const i8e={variant:"subtle"},o8e=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":br(e,"cb-size"),"--cb-radius":n===void 0?void 0:uo(n),"--cb-icon-size":We(r)}}),AC=co((t,e)=>{const n=xt("CloseButton",i8e,t),{iconSize:r,children:i,vars:o,radius:a,className:s,classNames:l,style:u,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:m,icon:v,mod:b,attributes:x,__staticSelector:C,...w}=n,A=Mn({name:C||"CloseButton",props:n,className:s,style:u,classes:fQ,classNames:l,styles:c,unstyled:f,attributes:x,vars:o,varsResolver:o8e});return _.jsxs(Lf,{ref:e,...w,unstyled:f,variant:m,disabled:h,mod:[{disabled:h||d},b],...A("root",{variant:m,active:!h&&!d}),children:[v||_.jsx(cQ,{}),i]})});AC.classes=fQ;AC.displayName="@mantine/core/CloseButton";function a8e(t){return q.Children.toArray(t).filter(Boolean)}var dQ={root:"m_4081bf90"};const s8e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},l8e=(t,{grow:e,preventGrowOverflow:n,gap:r,align:i,justify:o,wrap:a},{childWidth:s})=>({root:{"--group-child-width":e&&n?s:void 0,"--group-gap":xv(r),"--group-align":i,"--group-justify":o,"--group-wrap":a}}),Vi=kn((t,e)=>{const n=xt("Group",s8e,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,children:l,gap:u,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:m,vars:v,variant:b,__size:x,mod:C,attributes:w,...A}=n,E=a8e(l),T=E.length,N=xv(u??"md"),M={childWidth:`calc(${100/T}% - (${N} - ${N} / ${T}))`},k=Mn({name:"Group",props:n,stylesCtx:M,className:i,style:o,classes:dQ,classNames:r,styles:a,unstyled:s,attributes:w,vars:v,varsResolver:l8e});return _.jsx(zt,{...k("root"),ref:e,variant:b,mod:[{grow:h},C],size:x,...A,children:E})});Vi.classes=dQ;Vi.displayName="@mantine/core/Group";const[u8e,c8e]=yC({size:"sm"}),hQ=kn((t,e)=>{const n=xt("InputClearButton",null,t),{size:r,variant:i,vars:o,classNames:a,styles:s,...l}=n,u=c8e(),{resolvedClassNames:c,resolvedStyles:f}=CC({classNames:a,styles:s,props:n});return _.jsx(AC,{variant:i||"transparent",ref:e,size:r||u?.size||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",style:{pointerEvents:"all",background:"var(--input-bg)",...l.style},...l})});hQ.displayName="@mantine/core/InputClearButton";const f8e={xs:7,sm:8,md:10,lg:12,xl:15};function d8e({__clearable:t,__clearSection:e,rightSection:n,__defaultRightSection:r,size:i="sm"}){const o=t&&e;return o&&(n||r)?_.jsxs("div",{"data-combined-clear-section":!0,style:{display:"flex",gap:2,alignItems:"center",paddingInlineEnd:f8e[i]},children:[o,n||r]}):n===null?null:n||o||r}const[h8e,NC]=yC({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var xs={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const p8e=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${na(e)} - ${We(2)})`}}),DC=kn((t,e)=>{const n=xt("InputDescription",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,size:u,__staticSelector:c,__inheritStyles:f=!0,attributes:d,variant:h,...m}=xt("InputDescription",null,n),v=NC(),b=Mn({name:["InputWrapper",c],props:n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:d,rootSelector:"description",vars:l,varsResolver:p8e}),x=f&&v?.getStyles||b;return _.jsx(zt,{component:"p",ref:e,variant:h,size:u,...x("description",v?.getStyles?{className:i,style:o}:void 0),...m})});DC.classes=xs;DC.displayName="@mantine/core/InputDescription";const m8e=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${na(e)} - ${We(2)})`}}),MC=kn((t,e)=>{const n=xt("InputError",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,size:u,attributes:c,__staticSelector:f,__inheritStyles:d=!0,variant:h,...m}=n,v=Mn({name:["InputWrapper",f],props:n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:c,rootSelector:"error",vars:l,varsResolver:m8e}),b=NC(),x=d&&b?.getStyles||v;return _.jsx(zt,{component:"p",ref:e,variant:h,size:u,...x("error",b?.getStyles?{className:i,style:o}:void 0),...m})});MC.classes=xs;MC.displayName="@mantine/core/InputError";const VF={labelElement:"label"},g8e=(t,{size:e})=>({label:{"--input-label-size":na(e),"--input-asterisk-color":void 0}}),kC=kn((t,e)=>{const n=xt("InputLabel",VF,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,labelElement:u,size:c,required:f,htmlFor:d,onMouseDown:h,children:m,__staticSelector:v,variant:b,mod:x,attributes:C,...w}=xt("InputLabel",VF,n),A=Mn({name:["InputWrapper",v],props:n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:C,rootSelector:"label",vars:l,varsResolver:g8e}),E=NC(),T=E?.getStyles||A;return _.jsxs(zt,{...T("label",E?.getStyles?{className:i,style:o}:void 0),component:u,variant:b,size:c,ref:e,htmlFor:u==="label"?d:void 0,mod:[{required:f},x],onMouseDown:N=>{h?.(N),!N.defaultPrevented&&N.detail>1&&N.preventDefault()},...w,children:[m,f&&_.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});kC.classes=xs;kC.displayName="@mantine/core/InputLabel";const j_=kn((t,e)=>{const n=xt("InputPlaceholder",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,__staticSelector:u,variant:c,error:f,mod:d,attributes:h,...m}=n,v=Mn({name:["InputPlaceholder",u],props:n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:h,rootSelector:"placeholder"});return _.jsx(zt,{...v("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:e,...m})});j_.classes=xs;j_.displayName="@mantine/core/InputPlaceholder";function v8e(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),i=t.slice(0,r),o=t.slice(r+1),a=e&&i.includes("description")||n&&i.includes("error");return{offsetBottom:e&&o.includes("description")||n&&o.includes("error"),offsetTop:a}}const b8e={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},y8e=(t,{size:e})=>({label:{"--input-label-size":na(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${na(e)} - ${We(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${na(e)} - ${We(2)})`}}),G_=kn((t,e)=>{const n=xt("InputWrapper",b8e,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,size:u,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:m,error:v,description:b,labelProps:x,descriptionProps:C,errorProps:w,labelElement:A,children:E,withAsterisk:T,id:N,required:D,__stylesApiProps:M,mod:k,attributes:B,...P}=n,$=Mn({name:["InputWrapper",f],props:M||n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:B,vars:l,varsResolver:y8e}),z={size:u,variant:c,__staticSelector:f},j=Zm(N),L=typeof T=="boolean"?T:D,U=w?.id||`${j}-error`,G=C?.id||`${j}-description`,Z=j,H=!!v&&typeof v!="boolean",W=!!b,K=`${H?U:""} ${W?G:""}`,I=K.trim().length>0?K.trim():void 0,ee=x?.id||`${j}-label`,Q=m&&_.jsx(kC,{labelElement:A,id:ee,htmlFor:Z,required:L,...z,...x,children:m},"label"),ce=W&&_.jsx(DC,{...C,...z,size:C?.size||z.size,id:C?.id||G,children:b},"description"),ve=_.jsx(q.Fragment,{children:d(E)},"input"),ie=H&&q.createElement(MC,{...w,...z,size:w?.size||z.size,key:"error",id:w?.id||U},v),X=h.map(le=>{switch(le){case"label":return Q;case"input":return ve;case"description":return ce;case"error":return ie;default:return null}});return _.jsx(h8e,{value:{getStyles:$,describedBy:I,inputId:Z,labelId:ee,...v8e(h,{hasDescription:W,hasError:H})},children:_.jsx(zt,{ref:e,variant:c,size:u,mod:[{error:!!v},k],...$("root"),...P,children:X})})});G_.classes=xs;G_.displayName="@mantine/core/InputWrapper";const x8e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},w8e=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":br(e.size,"input-height"),"--input-fz":na(e.size),"--input-radius":e.radius===void 0?void 0:uo(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?We(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?We(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?br(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),ka=co((t,e)=>{const n=xt("Input",x8e,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,required:l,__staticSelector:u,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:m,leftSection:v,leftSectionProps:b,leftSectionWidth:x,rightSection:C,rightSectionProps:w,rightSectionWidth:A,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:N,vars:D,pointer:M,multiline:k,radius:B,id:P,withAria:$,withErrorStyles:z,mod:j,inputSize:L,attributes:U,__clearSection:G,__clearable:Z,__defaultRightSection:H,...W}=n,{styleProps:K,rest:I}=SC(W),ee=NC(),Q={offsetBottom:ee?.offsetBottom,offsetTop:ee?.offsetTop},ce=Mn({name:["Input",u],props:c||n,classes:xs,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:U,stylesCtx:Q,rootSelector:"wrapper",vars:D,varsResolver:w8e}),ve=$?{required:l,disabled:m,"aria-invalid":!!h,"aria-describedby":ee?.describedBy,id:ee?.inputId||P}:{},ie=d8e({__clearable:Z,__clearSection:G,rightSection:C,__defaultRightSection:H,size:f});return _.jsx(u8e,{value:{size:f||"sm"},children:_.jsxs(zt,{...ce("wrapper"),...K,...d,mod:[{error:!!h&&z,pointer:M,disabled:m,multiline:k,"data-with-right-section":!!ie,"data-with-left-section":!!v},j],variant:N,size:f,children:[v&&_.jsx("div",{...b,"data-position":"left",...ce("section",{className:b?.className,style:b?.style}),children:v}),_.jsx(zt,{component:"input",...I,...ve,ref:e,required:l,mod:{disabled:m,error:!!h&&z},variant:N,__size:L,...ce("input")}),ie&&_.jsx("div",{...w,"data-position":"right",...ce("section",{className:w?.className,style:w?.style}),children:ie})]})})});ka.classes=xs;ka.Wrapper=G_;ka.Label=kC;ka.Error=MC;ka.Description=DC;ka.Placeholder=j_;ka.ClearButton=hQ;ka.displayName="@mantine/core/Input";function E8e(t,e,n){const r=xt(t,e,n),{label:i,description:o,error:a,required:s,classNames:l,styles:u,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:m,labelProps:v,descriptionProps:b,wrapperProps:x,id:C,size:w,style:A,inputContainer:E,inputWrapperOrder:T,withAsterisk:N,variant:D,vars:M,mod:k,attributes:B,...P}=r,{styleProps:$,rest:z}=SC(P),j={label:i,description:o,error:a,required:s,classNames:l,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:m,labelProps:v,descriptionProps:b,unstyled:f,styles:u,size:w,style:A,inputContainer:E,inputWrapperOrder:T,withAsterisk:N,variant:D,id:C,mod:k,attributes:B,...x};return{...z,classNames:l,styles:u,unstyled:f,wrapperProps:{...j,...$},inputProps:{required:s,classNames:l,styles:u,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:a,variant:D,id:C,attributes:B}}}const C8e={__staticSelector:"InputBase",withAria:!0,size:"sm"},t0=co((t,e)=>{const{inputProps:n,wrapperProps:r,...i}=E8e("InputBase",C8e,t);return _.jsx(ka.Wrapper,{...r,children:_.jsx(ka,{...n,...i,ref:e})})});t0.classes={...ka.classes,...ka.Wrapper.classes};t0.displayName="@mantine/core/InputBase";const S8e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var pQ={root:"m_8bffd616"};const Y_=co((t,e)=>{const n=xt("Flex",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,gap:u,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:v,attributes:b,...x}=n,C=Mn({name:"Flex",classes:pQ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:b,vars:l}),w=la(),A=jZ(),E=qZ({styleProps:{gap:u,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:v},theme:w,data:S8e});return _.jsxs(_.Fragment,{children:[E.hasResponsiveStyles&&_.jsx(VZ,{selector:`.${A}`,styles:E.styles,media:E.media}),_.jsx(zt,{ref:e,...C("root",{className:A,style:vC(E.inlineStyles)}),...x})]})});Y_.classes=pQ;Y_.displayName="@mantine/core/Flex";function mQ({open:t,close:e,openDelay:n,closeDelay:r}){const i=q.useRef(-1),o=q.useRef(-1),a=()=>{window.clearTimeout(i.current),window.clearTimeout(o.current)},s=()=>{a(),n===0||n===void 0?t():i.current=window.setTimeout(t,n)},l=()=>{a(),r===0||r===void 0?e():o.current=window.setTimeout(e,r)};return q.useEffect(()=>a,[]),{openDropdown:s,closeDropdown:l}}function gQ({style:t,size:e=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:We(e),height:We(e),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}gQ.displayName="@mantine/core/AccordionChevron";var vQ={root:"m_b6d8b162"};function T8e(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const A8e={inherit:!1},N8e=(t,{variant:e,lineClamp:n,gradient:r,size:i,color:o})=>({root:{"--text-fz":na(i),"--text-lh":o6e(i),"--text-gradient":e==="gradient"?_4(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?qu(o,t):void 0}}),$l=co((t,e)=>{const n=xt("Text",A8e,t),{lineClamp:r,truncate:i,inline:o,inherit:a,gradient:s,span:l,__staticSelector:u,vars:c,className:f,style:d,classNames:h,styles:m,unstyled:v,variant:b,mod:x,size:C,attributes:w,...A}=n,E=Mn({name:["Text",u],props:n,classes:vQ,className:f,style:d,classNames:h,styles:m,unstyled:v,attributes:w,vars:c,varsResolver:N8e});return _.jsx(zt,{...E("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:b,mod:[{"data-truncate":T8e(i),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":a},x],size:C,...A})});$l.classes=vQ;$l.displayName="@mantine/core/Text";function _w({size:t,style:e,...n}){const r=t!==void 0?{width:We(t),height:We(t),...e}:e;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const bQ=q.createContext(null),D8e=bQ.Provider;function M8e(){return{withinGroup:!!q.useContext(bQ)}}var _C={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const k8e=(t,{spacing:e})=>({group:{"--ag-spacing":xv(e)}}),W_=kn((t,e)=>{const n=xt("AvatarGroup",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,spacing:u,attributes:c,...f}=n,d=Mn({name:"AvatarGroup",classes:_C,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:c,vars:l,varsResolver:k8e,rootSelector:"group"});return _.jsx(D8e,{value:!0,children:_.jsx(zt,{ref:e,...d("group"),...f})})});W_.classes=_C;W_.displayName="@mantine/core/AvatarGroup";function _8e(t){return _.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function O8e(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const I8e=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function R8e(t,e=I8e){const n=O8e(t),r=Math.abs(n)%e.length;return e[r]}function B8e(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const L8e=(t,{size:e,radius:n,variant:r,gradient:i,color:o,autoContrast:a,name:s,allowedInitialsColors:l})=>{const u=o==="initials"&&typeof s=="string"?R8e(s,l):o,c=t.variantColorResolver({color:u||"gray",theme:t,gradient:i,variant:r||"light",autoContrast:a});return{root:{"--avatar-size":br(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:uo(n),"--avatar-bg":u||r?c.background:void 0,"--avatar-color":u||r?c.color:void 0,"--avatar-bd":u||r?c.border:void 0}}},OC=co((t,e)=>{const n=xt("Avatar",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,src:u,alt:c,radius:f,color:d,gradient:h,imageProps:m,children:v,autoContrast:b,mod:x,name:C,allowedInitialsColors:w,attributes:A,...E}=n,T=M8e(),[N,D]=q.useState(!u),M=Mn({name:"Avatar",props:n,classes:_C,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:A,vars:l,varsResolver:L8e});return q.useEffect(()=>D(!u),[u]),_.jsx(zt,{...M("root"),mod:[{"within-group":T.withinGroup},x],ref:e,...E,children:N||!u?_.jsx("span",{...M("placeholder"),title:c,children:v||typeof C=="string"&&B8e(C)||_.jsx(_8e,{})}):_.jsx("img",{...m,...M("image"),src:u,alt:c,onError:k=>{D(!0),m?.onError?.(k)}})})});OC.classes=_C;OC.displayName="@mantine/core/Avatar";OC.Group=W_;var yQ={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const F8e=(t,{radius:e,color:n,gradient:r,variant:i,size:o,autoContrast:a,circle:s})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--badge-height":br(o,"badge-height"),"--badge-padding-x":br(o,"badge-padding-x"),"--badge-fz":br(o,"badge-fz"),"--badge-radius":s||e===void 0?void 0:uo(e),"--badge-bg":n||i?l.background:void 0,"--badge-color":n||i?l.color:void 0,"--badge-bd":n||i?l.border:void 0,"--badge-dot-color":i==="dot"?qu(n,t):void 0}}},K_=co((t,e)=>{const n=xt("Badge",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,radius:u,color:c,gradient:f,leftSection:d,rightSection:h,children:m,variant:v,fullWidth:b,autoContrast:x,circle:C,mod:w,attributes:A,...E}=n,T=Mn({name:"Badge",props:n,classes:yQ,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:A,vars:l,varsResolver:F8e});return _.jsxs(zt,{variant:v,mod:[{block:b,circle:C,"with-right-section":!!h,"with-left-section":!!d},w],...T("root",{variant:v}),ref:e,...E,children:[d&&_.jsx("span",{...T("section"),"data-position":"left",children:d}),_.jsx("span",{...T("label"),children:m}),h&&_.jsx("span",{...T("section"),"data-position":"right",children:h})]})});K_.classes=yQ;K_.displayName="@mantine/core/Badge";var n0={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const qF={orientation:"horizontal"},P8e=(t,{borderWidth:e})=>({group:{"--button-border-width":We(e)}}),X_=kn((t,e)=>{const n=xt("ButtonGroup",qF,t),{className:r,style:i,classNames:o,styles:a,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:d,attributes:h,...m}=xt("ButtonGroup",qF,t),v=Mn({name:"ButtonGroup",props:n,classes:n0,className:r,style:i,classNames:o,styles:a,unstyled:s,attributes:h,vars:u,varsResolver:P8e,rootSelector:"group"});return _.jsx(zt,{...v("group"),ref:e,variant:f,mod:[{"data-orientation":l},d],role:"group",...m})});X_.classes=n0;X_.displayName="@mantine/core/ButtonGroup";const $8e=(t,{radius:e,color:n,gradient:r,variant:i,autoContrast:o,size:a})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":br(a,"section-height"),"--section-padding-x":br(a,"section-padding-x"),"--section-fz":a?.includes("compact")?na(a.replace("compact-","")):na(a),"--section-radius":e===void 0?void 0:uo(e),"--section-bg":n||i?s.background:void 0,"--section-color":s.color,"--section-bd":n||i?s.border:void 0}}},Z_=kn((t,e)=>{const n=xt("ButtonGroupSection",null,t),{className:r,style:i,classNames:o,styles:a,unstyled:s,vars:l,variant:u,gradient:c,radius:f,autoContrast:d,attributes:h,...m}=n,v=Mn({name:"ButtonGroupSection",props:n,classes:n0,className:r,style:i,classNames:o,styles:a,unstyled:s,attributes:h,vars:l,varsResolver:$8e,rootSelector:"groupSection"});return _.jsx(zt,{...v("groupSection"),ref:e,variant:u,...m})});Z_.classes=n0;Z_.displayName="@mantine/core/ButtonGroupSection";const z8e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${We(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},U8e=(t,{radius:e,color:n,gradient:r,variant:i,size:o,justify:a,autoContrast:s})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--button-justify":a,"--button-height":br(o,"button-height"),"--button-padding-x":br(o,"button-padding-x"),"--button-fz":o?.includes("compact")?na(o.replace("compact-","")):na(o),"--button-radius":e===void 0?void 0:uo(e),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},sl=co((t,e)=>{const n=xt("Button",null,t),{style:r,vars:i,className:o,color:a,disabled:s,children:l,leftSection:u,rightSection:c,fullWidth:f,variant:d,radius:h,loading:m,loaderProps:v,gradient:b,classNames:x,styles:C,unstyled:w,"data-disabled":A,autoContrast:E,mod:T,attributes:N,...D}=n,M=Mn({name:"Button",props:n,classes:n0,className:o,style:r,classNames:x,styles:C,unstyled:w,attributes:N,vars:i,varsResolver:U8e}),k=!!u,B=!!c;return _.jsxs(Lf,{ref:e,...M("root",{active:!s&&!m&&!A}),unstyled:w,variant:d,disabled:s||m,mod:[{disabled:s||A,loading:m,block:f,"with-left-section":k,"with-right-section":B},T],...D,children:[typeof m=="boolean"&&_.jsx(wf,{mounted:m,transition:z8e,duration:150,children:P=>_.jsx(zt,{component:"span",...M("loader",{style:P}),"aria-hidden":!0,children:_.jsx(Ff,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...v})})}),_.jsxs("span",{...M("inner"),children:[u&&_.jsx(zt,{component:"span",...M("section"),mod:{position:"left"},children:u}),_.jsx(zt,{component:"span",mod:{loading:m},...M("label"),children:l}),c&&_.jsx(zt,{component:"span",...M("section"),mod:{position:"right"},children:c})]})]})});sl.classes=n0;sl.displayName="@mantine/core/Button";sl.Group=X_;sl.GroupSection=Z_;const[H8e,V8e]=bC("Card component was not found in tree");var Q_={root:"m_e615b15f",section:"m_599a2148"};const IC=co((t,e)=>{const n=xt("CardSection",null,t),{classNames:r,className:i,style:o,styles:a,vars:s,withBorder:l,inheritPadding:u,mod:c,...f}=n,d=V8e();return _.jsx(zt,{ref:e,mod:[{"with-border":l,"inherit-padding":u},c],...d.getStyles("section",{className:i,style:o,styles:a,classNames:r}),...f})});IC.classes=Q_;IC.displayName="@mantine/core/CardSection";const q8e=(t,{padding:e})=>({root:{"--card-padding":xv(e)}}),Cv=co((t,e)=>{const n=xt("Card",null,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,children:u,padding:c,attributes:f,...d}=n,h=Mn({name:"Card",props:n,classes:Q_,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:f,vars:l,varsResolver:q8e}),m=q.Children.toArray(u),v=m.map((b,x)=>typeof b=="object"&&b&&"type"in b&&b.type===IC?q.cloneElement(b,{"data-first-section":x===0||void 0,"data-last-section":x===m.length-1||void 0}):b);return _.jsx(H8e,{value:{getStyles:h},children:_.jsx(z_,{ref:e,unstyled:s,...h("root"),...d,children:v})})});Cv.classes=Q_;Cv.displayName="@mantine/core/Card";Cv.Section=IC;const[j8e,G8e]=yC();function xQ(t){const{value:e,defaultValue:n,onChange:r,multiple:i,children:o}=xt("ChipGroup",null,t),[a,s]=Qm({value:e,defaultValue:n,finalValue:i?[]:null,onChange:r}),l=c=>Array.isArray(a)?a.includes(c):c===a,u=c=>{const f=c.currentTarget.value;Array.isArray(a)?s(a.includes(f)?a.filter(d=>d!==f):[...a,f]):s(f)};return _.jsx(j8e,{value:{isChipSelected:l,onChange:u,multiple:i},children:o})}xQ.displayName="@mantine/core/ChipGroup";var wQ={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const Y8e={type:"checkbox"},W8e=(t,{size:e,radius:n,variant:r,color:i,autoContrast:o})=>{const a=t.variantColorResolver({color:i||t.primaryColor,theme:t,variant:r||"filled",autoContrast:o});return{root:{"--chip-fz":na(e),"--chip-size":br(e,"chip-size"),"--chip-radius":n===void 0?void 0:uo(n),"--chip-checked-padding":br(e,"chip-checked-padding"),"--chip-padding":br(e,"chip-padding"),"--chip-icon-size":br(e,"chip-icon-size"),"--chip-bg":i||r?a.background:void 0,"--chip-hover":i||r?a.hover:void 0,"--chip-color":i||r?a.color:void 0,"--chip-bd":i||r?a.border:void 0,"--chip-spacing":br(e,"chip-spacing")}}},RC=kn((t,e)=>{const n=xt("Chip",Y8e,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,id:u,checked:c,defaultChecked:f,onChange:d,value:h,wrapperProps:m,type:v,disabled:b,children:x,size:C,variant:w,icon:A,rootRef:E,autoContrast:T,mod:N,attributes:D,...M}=n,k=Mn({name:"Chip",classes:wQ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:D,vars:l,varsResolver:W8e}),B=G8e(),P=Zm(u),{styleProps:$,rest:z}=SC(M),[j,L]=Qm({value:c,defaultValue:f,finalValue:!1,onChange:d}),U=B?{checked:B.isChipSelected(h),onChange:Z=>{B.onChange(Z),d?.(Z.currentTarget.checked)},type:B.multiple?"checkbox":"radio"}:{},G=U.checked||j;return _.jsxs(zt,{size:C,variant:w,ref:E,mod:N,...k("root"),...$,...m,children:[_.jsx("input",{type:v,...k("input"),checked:G,onChange:Z=>L(Z.currentTarget.checked),id:P,disabled:b,ref:e,value:h,...U,...z}),_.jsxs("label",{htmlFor:P,"data-checked":G||void 0,"data-disabled":b||void 0,...k("label",{variant:w||"filled"}),children:[G&&A!==null&&A!==!1&&_.jsx("span",{...k("iconWrapper"),children:A===void 0?_.jsx(_w,{...k("checkIcon")}):A}),_.jsx("span",{children:x})]})]})});RC.classes=wQ;RC.displayName="@mantine/core/Chip";RC.Group=xQ;var EQ={root:"m_3eebeb36",label:"m_9e365f20"};const K8e={orientation:"horizontal"},X8e=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?qu(e,t):void 0,"--divider-border-style":n,"--divider-size":br(r,"divider-size")}}),J_=kn((t,e)=>{const n=xt("Divider",K8e,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,color:u,orientation:c,label:f,labelPosition:d,mod:h,attributes:m,...v}=n,b=Mn({name:"Divider",classes:EQ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:m,vars:l,varsResolver:X8e});return _.jsx(zt,{ref:e,mod:[{orientation:c,"with-label":!!f},h],...b("root"),...v,role:"separator",children:f&&_.jsx(zt,{component:"span",mod:{position:d},...b("label"),children:f})})});J_.classes=EQ;J_.displayName="@mantine/core/Divider";const Z8e={multiple:!1},CQ=q.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:i,accept:o,name:a,form:s,resetRef:l,disabled:u,capture:c,inputProps:f,...d}=xt("FileButton",Z8e,t),h=q.useRef(null),m=()=>{!u&&h.current?.click()},v=x=>{if(x.currentTarget.files===null)return n(i?[]:null);n(i?Array.from(x.currentTarget.files):x.currentTarget.files[0]||null)};return Dw(l,()=>{h.current&&(h.current.value="")}),_.jsxs(_.Fragment,{children:[_.jsx("input",{style:{display:"none"},type:"file",accept:o,multiple:i,onChange:v,ref:ol(e,h),name:a,form:s,capture:c,...f}),r({onClick:m,...d})]})});CQ.displayName="@mantine/core/FileButton";const Q8e=({value:t})=>_.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name}),J8e={valueComponent:Q8e},e5=kn((t,e)=>{const n=xt("FileInput",J8e,t),{unstyled:r,vars:i,onChange:o,value:a,defaultValue:s,multiple:l,accept:u,name:c,form:f,valueComponent:d,clearable:h,clearButtonProps:m,readOnly:v,capture:b,fileInputProps:x,rightSection:C,size:w,placeholder:A,component:E,resetRef:T,classNames:N,styles:D,attributes:M,...k}=n,B=q.useRef(null),{resolvedClassNames:P,resolvedStyles:$}=CC({classNames:N,styles:D,props:n}),[z,j]=Qm({value:a,defaultValue:s,onChange:o,finalValue:l?[]:null}),L=Array.isArray(z)?z.length!==0:z!==null,U=C||(h&&L&&!v?_.jsx(AC,{...m,variant:"subtle",onClick:()=>j(l?[]:null),size:w,unstyled:r}):null);return q.useEffect(()=>{(Array.isArray(z)&&z.length===0||z===null)&&B.current?.()},[z]),_.jsx(CQ,{onChange:j,multiple:l,accept:u,name:c,form:f,resetRef:ol(B,T),disabled:v,capture:b,inputProps:x,children:G=>_.jsx(t0,{component:E||"button",ref:e,rightSection:U,...G,...k,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:N,styles:D,attributes:M,children:L?_.jsx(d,{value:z}):_.jsx(ka.Placeholder,{__staticSelector:"FileInput",classNames:P,styles:$,attributes:M,children:A})})})});e5.classes=t0.classes;e5.displayName="@mantine/core/FileInput";const eIe=e5;function jr(){return jr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jr.apply(null,arguments)}var SQ={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const jF={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:yv("overlay")},tIe=(t,{zIndex:e})=>({root:{"--lo-z-index":e?.toString()}}),t5=kn((t,e)=>{const n=xt("LoadingOverlay",jF,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,transitionProps:u,loaderProps:c,overlayProps:f,visible:d,zIndex:h,attributes:m,...v}=n,b=la(),x=Mn({name:"LoadingOverlay",classes:SQ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:m,vars:l,varsResolver:tIe}),C={...jF.overlayProps,...f};return _.jsx(wf,{transition:"fade",...u,mounted:!!d,children:w=>_.jsxs(zt,{...x("root",{style:w}),ref:e,...v,children:[_.jsx(Ff,{...x("loader"),unstyled:s,...c}),_.jsx(q1,{...C,...x("overlay"),darkHidden:!0,unstyled:s,color:f?.color||b.white}),_.jsx(q1,{...C,...x("overlay"),lightHidden:!0,unstyled:s,color:f?.color||b.colors.dark[5]})]})})});t5.classes=SQ;t5.displayName="@mantine/core/LoadingOverlay";const[nIe,Pf]=bC("Menu component was not found in the tree");var $f={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504",chevron:"m_b85b0bed"};const n5=kn((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,...s}=xt("MenuDivider",null,t),l=Pf();return _.jsx(zt,{ref:e,...l.getStyles("divider",{className:r,style:i,styles:o,classNames:n}),...s})});n5.classes=$f;n5.displayName="@mantine/core/MenuDivider";const r5=kn((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,onMouseEnter:s,onMouseLeave:l,onKeyDown:u,children:c,...f}=xt("MenuDropdown",null,t),d=q.useRef(null),h=Pf(),m=Zo(u,x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&(x.preventDefault(),d.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),v=Zo(s,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),b=Zo(l,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return _.jsxs(al.Dropdown,{...f,onMouseEnter:v,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:ol(e,d),...h.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});r5.classes=$f;r5.displayName="@mantine/core/MenuDropdown";const[rIe,BC]=yC(),i5=co((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,color:s,closeMenuOnClick:l,leftSection:u,rightSection:c,children:f,disabled:d,"data-disabled":h,...m}=xt("MenuItem",null,t),v=Pf(),b=BC(),x=la(),{dir:C}=Jm(),w=q.useRef(null),A=m,E=Zo(A.onClick,()=>{h||(typeof l=="boolean"?l&&v.closeDropdownImmediately():v.closeOnItemClick&&v.closeDropdownImmediately())}),T=s?x.variantColorResolver({color:s,theme:x,variant:"light"}):void 0,N=s?xh({color:s,theme:x}):null,D=Zo(A.onKeyDown,M=>{M.key==="ArrowLeft"&&b&&(b.close(),b.focusParentItem())});return _.jsxs(Lf,{onMouseDown:M=>M.preventDefault(),...m,unstyled:v.unstyled,tabIndex:v.menuItemTabIndex,...v.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:ol(w,e),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||h||void 0,"data-mantine-stop-propagation":!0,onClick:E,onKeyDown:__({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:v.loop,dir:C,orientation:"vertical",onKeyDown:D}),__vars:{"--menu-item-color":N?.isThemeColor&&N?.shade===void 0?`var(--mantine-color-${N.color}-6)`:T?.color,"--menu-item-hover":T?.hover},children:[u&&_.jsx("div",{...v.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:u}),f&&_.jsx("div",{...v.getStyles("itemLabel",{styles:o,classNames:n}),children:f}),c&&_.jsx("div",{...v.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:c})]})});i5.classes=$f;i5.displayName="@mantine/core/MenuItem";const o5=kn((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,...s}=xt("MenuLabel",null,t),l=Pf();return _.jsx(zt,{ref:e,...l.getStyles("label",{className:r,style:i,styles:o,classNames:n}),...s})});o5.classes=$f;o5.displayName="@mantine/core/MenuLabel";const a5=kn((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,onMouseEnter:s,onMouseLeave:l,onKeyDown:u,children:c,...f}=xt("MenuSubDropdown",null,t),d=q.useRef(null),h=Pf(),m=BC(),v=Zo(s,m?.open),b=Zo(l,m?.close);return _.jsx(al.Dropdown,{...f,onMouseEnter:v,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:ol(e,d),...h.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,children:c})});a5.classes=$f;a5.displayName="@mantine/core/MenuSubDropdown";const s5=co((t,e)=>{const{classNames:n,className:r,style:i,styles:o,vars:a,color:s,leftSection:l,rightSection:u,children:c,disabled:f,"data-disabled":d,closeMenuOnClick:h,...m}=xt("MenuSubItem",null,t),v=Pf(),b=BC(),x=la(),{dir:C}=Jm(),w=q.useRef(null),A=m,E=s?x.variantColorResolver({color:s,theme:x,variant:"light"}):void 0,T=s?xh({color:s,theme:x}):null,N=Zo(A.onKeyDown,B=>{B.key==="ArrowRight"&&(b?.open(),b?.focusFirstItem()),B.key==="ArrowLeft"&&b?.parentContext&&(b.parentContext.close(),b.parentContext.focusParentItem())}),D=Zo(A.onClick,()=>{!d&&h&&v.closeDropdownImmediately()}),M=Zo(A.onMouseEnter,b?.open),k=Zo(A.onMouseLeave,b?.close);return _.jsxs(Lf,{onMouseDown:B=>B.preventDefault(),...m,unstyled:v.unstyled,tabIndex:v.menuItemTabIndex,...v.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:ol(w,e),role:"menuitem",disabled:f,"data-menu-item":!0,"data-sub-menu-item":!0,"data-disabled":f||d||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:M,onMouseLeave:k,onClick:D,onKeyDown:__({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:v.loop,dir:C,orientation:"vertical",onKeyDown:N}),__vars:{"--menu-item-color":T?.isThemeColor&&T?.shade===void 0?`var(--mantine-color-${T.color}-6)`:E?.color,"--menu-item-hover":E?.hover},children:[l&&_.jsx("div",{...v.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:l}),c&&_.jsx("div",{...v.getStyles("itemLabel",{styles:o,classNames:n}),children:c}),_.jsx("div",{...v.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:u||_.jsx(gQ,{...v.getStyles("chevron"),size:14})})]})});s5.classes=$f;s5.displayName="@mantine/core/MenuSubItem";function TQ({children:t,refProp:e}){if(!kZ(t))throw new Error("Menu.Sub.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return Pf(),_.jsx(al.Target,{refProp:e,popupType:"menu",children:t})}TQ.displayName="@mantine/core/MenuSubTarget";const iIe={offset:0,position:"right-start",transitionProps:{duration:0},openDelay:0,middlewares:{shift:{crossAxis:!0}}};function r0(t){const{children:e,closeDelay:n,openDelay:r,...i}=xt("MenuSub",iIe,t),o=Zm(),[a,{open:s,close:l}]=C6e(!1),u=BC(),{openDropdown:c,closeDropdown:f}=mQ({open:s,close:l,closeDelay:n,openDelay:r}),d=()=>window.setTimeout(()=>{document.getElementById(`${o}-dropdown`)?.querySelectorAll("[data-menu-item]:not([data-disabled])")[0]?.focus()},16),h=()=>window.setTimeout(()=>{document.getElementById(`${o}-target`)?.focus()},16);return _.jsx(rIe,{value:{opened:a,close:f,open:c,focusFirstItem:d,focusParentItem:h,parentContext:u},children:_.jsx(al,{opened:a,withinPortal:!1,withArrow:!1,id:o,...i,children:e})})}r0.extend=t=>t;r0.displayName="@mantine/core/MenuSub";r0.Target=TQ;r0.Dropdown=a5;r0.Item=s5;const oIe={refProp:"ref"},AQ=q.forwardRef((t,e)=>{const{children:n,refProp:r,...i}=xt("MenuTarget",oIe,t),o=Ev(n);if(!o)throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=Pf(),s=o.props,l=Zo(s.onClick,()=>{a.trigger==="click"?a.toggleDropdown():a.trigger==="click-hover"&&(a.setOpenedViaClick(!0),a.opened||a.openDropdown())}),u=Zo(s.onMouseEnter,()=>(a.trigger==="hover"||a.trigger==="click-hover")&&a.openDropdown()),c=Zo(s.onMouseLeave,()=>{(a.trigger==="hover"||a.trigger==="click-hover"&&!a.openedViaClick)&&a.closeDropdown()});return _.jsx(al.Target,{refProp:r,popupType:"menu",ref:e,...i,children:q.cloneElement(o,{onClick:l,onMouseEnter:u,onMouseLeave:c,"data-expanded":a.opened?!0:void 0})})});AQ.displayName="@mantine/core/MenuTarget";const aIe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ar(t){const e=xt("Menu",aIe,t),{children:n,onOpen:r,onClose:i,opened:o,defaultOpened:a,trapFocus:s,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:m,classNames:v,styles:b,unstyled:x,variant:C,vars:w,menuItemTabIndex:A,keepMounted:E,withInitialFocusPlaceholder:T,attributes:N,...D}=e,M=Mn({name:"Menu",classes:$f,props:e,classNames:v,styles:b,unstyled:x,attributes:N}),[k,B]=Qm({value:o,defaultValue:a,finalValue:!1,onChange:l}),[P,$]=q.useState(!1),z=()=>{B(!1),$(!1),k&&i?.()},j=()=>{B(!0),!k&&r?.()},L=()=>{k?z():j()},{openDropdown:U,closeDropdown:G}=mQ({open:j,close:z,closeDelay:m,openDelay:h}),Z=K=>a6e("[data-menu-item]","[data-menu-dropdown]",K),{resolvedClassNames:H,resolvedStyles:W}=CC({classNames:v,styles:b,props:e});return _.jsx(nIe,{value:{getStyles:M,opened:k,toggleDropdown:L,getItemIndex:Z,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:u,closeDropdown:d==="click"?z:G,openDropdown:d==="click"?j:U,closeDropdownImmediately:z,loop:c,trigger:d,unstyled:x,menuItemTabIndex:A,withInitialFocusPlaceholder:T},children:_.jsx(al,{returnFocus:!0,...D,opened:k,onChange:L,defaultOpened:a,trapFocus:E?!1:s,closeOnEscape:f,__staticSelector:"Menu",classNames:H,styles:W,unstyled:x,variant:C,keepMounted:E,children:n})})}Ar.extend=t=>t;Ar.withProps=ROe(Ar);Ar.classes=$f;Ar.displayName="@mantine/core/Menu";Ar.Item=i5;Ar.Label=o5;Ar.Dropdown=r5;Ar.Target=AQ;Ar.Divider=n5;Ar.Sub=r0;const sIe={duration:100,transition:"fade"};function GF(t,e){return{...sIe,...e,...t}}function lIe({offset:t,position:e,defaultOpened:n}){const[r,i]=q.useState(n),o=q.useRef(null),{x:a,y:s,elements:l,refs:u,update:c,placement:f}=pC({placement:e,middleware:[Rf({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?t:e.includes("left")?t*-1:0,h=f.includes("bottom")?t:e.includes("top")?t*-1:0,m=q.useCallback(({clientX:v,clientY:b})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:v,y:b,left:v+d,top:b+h,right:v,bottom:b}}})},[l.reference]);return q.useEffect(()=>{if(u.floating.current){const v=o.current;v.addEventListener("mousemove",m);const b=Lu(u.floating.current);return b.forEach(x=>{x.addEventListener("scroll",c)}),()=>{v.removeEventListener("mousemove",m),b.forEach(x=>{x.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,m,r]),{handleMouseMove:m,x:a,y:s,opened:r,setOpened:i,boundaryRef:o,floating:u.setFloating}}var LC={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const uIe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:yv("popover")},cIe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:uo(e),"--tooltip-bg":n?qu(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),l5=kn((t,e)=>{const n=xt("TooltipFloating",uIe,t),{children:r,refProp:i,withinPortal:o,style:a,className:s,classNames:l,styles:u,unstyled:c,radius:f,color:d,label:h,offset:m,position:v,multiline:b,zIndex:x,disabled:C,defaultOpened:w,variant:A,vars:E,portalProps:T,attributes:N,...D}=n,M=la(),k=Mn({name:"TooltipFloating",props:n,classes:LC,className:s,style:a,classNames:l,styles:u,unstyled:c,attributes:N,rootSelector:"tooltip",vars:E,varsResolver:cIe}),{handleMouseMove:B,x:P,y:$,opened:z,boundaryRef:j,floating:L,setOpened:U}=lIe({offset:m,position:v,defaultOpened:w}),G=Ev(r);if(!G)throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Z=ol(j,O_(G),e),H=G.props,W=I=>{H.onMouseEnter?.(I),B(I),U(!0)},K=I=>{H.onMouseLeave?.(I),U(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(Am,{...T,withinPortal:o,children:_.jsx(zt,{...D,...k("tooltip",{style:{...GZ(a,M),zIndex:x,display:!C&&z?"block":"none",top:($&&Math.round($))??"",left:(P&&Math.round(P))??""}}),variant:A,ref:L,mod:{multiline:b},children:h})}),q.cloneElement(G,{...H,[i]:Z,onMouseEnter:W,onMouseLeave:K})]})});l5.classes=LC;l5.displayName="@mantine/core/TooltipFloating";const NQ=q.createContext(!1),fIe=NQ.Provider,dIe=()=>q.useContext(NQ),hIe={openDelay:0,closeDelay:0};function u5(t){const{openDelay:e,closeDelay:n,children:r}=xt("TooltipGroup",hIe,t);return _.jsx(fIe,{value:!0,children:_.jsx(jMe,{delay:{open:e,close:n},children:r})})}u5.displayName="@mantine/core/TooltipGroup";u5.extend=t=>t;function pIe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function mIe(t){const e=pIe(t.middlewares),n=[hs(t.offset)];return e.shift&&n.push(Rf(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Vu():Vu(e.flip)),n.push(GX({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?l1():l1(e.inline)):t.inline&&n.push(l1()),n}function gIe(t){const[e,n]=q.useState(t.defaultOpened),i=typeof t.opened=="boolean"?t.opened:e,o=dIe(),a=Zm(),s=q.useCallback(E=>{n(E),E&&x(a)},[a]),{x:l,y:u,context:c,refs:f,placement:d,middlewareData:{arrow:{x:h,y:m}={}}}=pC({strategy:t.strategy,placement:t.position,open:i,onOpenChange:s,middleware:mIe(t),whileElementsMounted:xw}),{delay:v,currentId:b,setCurrentId:x}=GMe(c,{id:a}),{getReferenceProps:C,getFloatingProps:w}=ZX([WX(c,{enabled:t.events?.hover,delay:o?v:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),ZMe(c,{enabled:t.events?.focus,visibleOnly:!0}),JMe(c,{role:"tooltip"}),XX(c,{enabled:typeof t.opened>"u"})]);H1(()=>{t.onPositionChange?.(d)},[d]);const A=i&&b&&b!==a;return{x:l,y:u,arrowX:h,arrowY:m,reference:f.setReference,floating:f.setFloating,getFloatingProps:w,getReferenceProps:C,isGroupPhase:A,opened:i,placement:d}}const YF={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:yv("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},vIe=(t,{radius:e,color:n,variant:r,autoContrast:i})=>{const o=t.variantColorResolver({theme:t,color:n||t.primaryColor,autoContrast:i,variant:r||"filled"});return{tooltip:{"--tooltip-radius":e===void 0?void 0:uo(e),"--tooltip-bg":n?o.background:void 0,"--tooltip-color":n?o.color:void 0}}},i0=kn((t,e)=>{const n=xt("Tooltip",YF,t),{children:r,position:i,refProp:o,label:a,openDelay:s,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:m,classNames:v,styles:b,unstyled:x,style:C,className:w,withArrow:A,arrowSize:E,arrowOffset:T,arrowRadius:N,arrowPosition:D,offset:M,transitionProps:k,multiline:B,events:P,zIndex:$,disabled:z,positionDependencies:j,onClick:L,onMouseEnter:U,onMouseLeave:G,inline:Z,variant:H,keepMounted:W,vars:K,portalProps:I,mod:ee,floatingStrategy:Q,middlewares:ce,autoContrast:ve,attributes:ie,target:X,...le}=xt("Tooltip",YF,n),{dir:Ce}=Jm(),he=q.useRef(null),Te=gIe({position:eQ(Ce,i),closeDelay:l,openDelay:s,onPositionChange:u,opened:c,defaultOpened:f,events:P,arrowRef:he,arrowOffset:T,offset:typeof M=="number"?M+(A?E/2:0):M,positionDependencies:[...j,X??r],inline:Z,strategy:Q,middlewares:ce});q.useEffect(()=>{const st=X instanceof HTMLElement?X:typeof X=="string"?document.querySelector(X):X?.current||null;st&&Te.reference(st)},[X,Te]);const Ae=Mn({name:"Tooltip",props:n,classes:LC,className:w,style:C,classNames:v,styles:b,unstyled:x,attributes:ie,rootSelector:"tooltip",vars:K,varsResolver:vIe}),qe=Ev(r);if(!X&&!qe)return null;if(X){const st=GF(k,{duration:100,transition:"fade"});return _.jsx(_.Fragment,{children:_.jsx(Am,{...I,withinPortal:d,children:_.jsx(wf,{...st,keepMounted:W,mounted:!z&&!!Te.opened,duration:Te.isGroupPhase?10:st.duration,children:dt=>_.jsxs(zt,{...le,"data-fixed":Q==="fixed"||void 0,variant:H,mod:[{multiline:B},ee],...Te.getFloatingProps({ref:Te.floating,className:Ae("tooltip").className,style:{...Ae("tooltip").style,...dt,zIndex:$,top:Te.y??0,left:Te.x??0}}),children:[a,_.jsx(kw,{ref:he,arrowX:Te.arrowX,arrowY:Te.arrowY,visible:A,position:Te.placement,arrowSize:E,arrowOffset:T,arrowRadius:N,arrowPosition:D,...Ae("arrow")})]})})})})}const rt=qe.props,lt=ol(Te.reference,O_(qe),e),Qe=GF(k,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(Am,{...I,withinPortal:d,children:_.jsx(wf,{...Qe,keepMounted:W,mounted:!z&&!!Te.opened,duration:Te.isGroupPhase?10:Qe.duration,children:st=>_.jsxs(zt,{...le,"data-fixed":Q==="fixed"||void 0,variant:H,mod:[{multiline:B},ee],...Te.getFloatingProps({ref:Te.floating,className:Ae("tooltip").className,style:{...Ae("tooltip").style,...st,zIndex:$,top:Te.y??0,left:Te.x??0}}),children:[a,_.jsx(kw,{ref:he,arrowX:Te.arrowX,arrowY:Te.arrowY,visible:A,position:Te.placement,arrowSize:E,arrowOffset:T,arrowRadius:N,arrowPosition:D,...Ae("arrow")})]})})}),q.cloneElement(qe,Te.getReferenceProps({onClick:L,onMouseEnter:U,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,...rt,className:tc(w,rt.className),[o]:lt}))]})});i0.classes=LC;i0.displayName="@mantine/core/Tooltip";i0.Floating=l5;i0.Group=u5;var DQ={root:"m_18320242","skeleton-fade":"m_299c329c"};const bIe={visible:!0,animate:!0},yIe=(t,{width:e,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":We(n),"--skeleton-width":We(i?n:e),"--skeleton-radius":i?"1000px":r===void 0?void 0:uo(r)}}),Ow=kn((t,e)=>{const n=xt("Skeleton",bIe,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,width:u,height:c,circle:f,visible:d,radius:h,animate:m,mod:v,attributes:b,...x}=n,C=Mn({name:"Skeleton",classes:DQ,props:n,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:b,vars:l,varsResolver:yIe});return _.jsx(zt,{ref:e,...C("root"),mod:[{visible:d,animate:m},v],...x})});Ow.classes=DQ;Ow.displayName="@mantine/core/Skeleton";var MQ={root:"m_6d731127"};const xIe={gap:"md",align:"stretch",justify:"flex-start"},wIe=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":xv(e),"--stack-align":n,"--stack-justify":r}}),Sv=kn((t,e)=>{const n=xt("Stack",xIe,t),{classNames:r,className:i,style:o,styles:a,unstyled:s,vars:l,align:u,justify:c,gap:f,variant:d,attributes:h,...m}=n,v=Mn({name:"Stack",props:n,classes:MQ,className:i,style:o,classNames:r,styles:a,unstyled:s,attributes:h,vars:l,varsResolver:wIe});return _.jsx(zt,{ref:e,...v("root"),variant:d,...m})});Sv.classes=MQ;Sv.displayName="@mantine/core/Stack";const[EIe,c5]=bC("Tabs component was not found in the tree");var Tv={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const f5=kn((t,e)=>{const n=xt("TabsList",null,t),{children:r,className:i,grow:o,justify:a,classNames:s,styles:l,style:u,mod:c,...f}=n,d=c5();return _.jsx(zt,{...f,...d.getStyles("list",{className:i,style:u,classNames:s,styles:l,props:n,variant:d.variant}),ref:e,role:"tablist",variant:d.variant,mod:[{grow:o,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":a},children:r})});f5.classes=Tv;f5.displayName="@mantine/core/TabsList";const d5=kn((t,e)=>{const n=xt("TabsPanel",null,t),{children:r,className:i,value:o,classNames:a,styles:s,style:l,mod:u,keepMounted:c,...f}=n,d=c5(),h=d.value===o,m=d.keepMounted||c||h?r:null;return _.jsx(zt,{...d.getStyles("panel",{className:i,classNames:a,styles:s,style:[l,h?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:d.orientation},u],role:"tabpanel",id:d.getPanelId(o),"aria-labelledby":d.getTabId(o),...f,children:m})});d5.classes=Tv;d5.displayName="@mantine/core/TabsPanel";const h5=kn((t,e)=>{const n=xt("TabsTab",null,t),{className:r,children:i,rightSection:o,leftSection:a,value:s,onClick:l,onKeyDown:u,disabled:c,color:f,style:d,classNames:h,styles:m,vars:v,mod:b,tabIndex:x,...C}=n,w=la(),{dir:A}=Jm(),E=c5(),T=s===E.value,N=M=>{E.onChange(E.allowTabDeactivation&&s===E.value?null:s),l?.(M)},D={classNames:h,styles:m,props:n};return _.jsxs(Lf,{...E.getStyles("tab",{className:r,style:d,variant:E.variant,...D}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:T,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},b],ref:e,role:"tab",id:E.getTabId(s),"aria-selected":T,tabIndex:x!==void 0?x:T||E.value===null?0:-1,"aria-controls":E.getPanelId(s),onClick:N,__vars:{"--tabs-color":f?qu(f,w):void 0},onKeyDown:__({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:A,onKeyDown:u}),...C,children:[a&&_.jsx("span",{...E.getStyles("tabSection",D),"data-position":"left",children:a}),i&&_.jsx("span",{...E.getStyles("tabLabel",D),children:i}),o&&_.jsx("span",{...E.getStyles("tabSection",D),"data-position":"right",children:o})]})});h5.classes=Tv;h5.displayName="@mantine/core/TabsTab";const WF="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",CIe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},SIe=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":uo(e),"--tabs-color":qu(n,t),"--tabs-text-color":hOe(r,t)?$Z({color:n,theme:t,autoContrast:r}):void 0}}),Nu=kn((t,e)=>{const n=xt("Tabs",CIe,t),{defaultValue:r,value:i,onChange:o,orientation:a,children:s,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:v,placement:b,keepMounted:x,classNames:C,styles:w,unstyled:A,className:E,style:T,vars:N,autoContrast:D,mod:M,attributes:k,...B}=n,P=Zm(u),[$,z]=Qm({value:i,defaultValue:r,finalValue:null,onChange:o}),j=Mn({name:"Tabs",props:n,classes:Tv,className:E,style:T,classNames:C,styles:w,unstyled:A,attributes:k,vars:N,varsResolver:SIe});return _.jsx(EIe,{value:{placement:b,value:$,orientation:a,id:P,loop:l,activateTabWithKeyboard:c,getTabId:kF(`${P}-tab`,WF),getPanelId:kF(`${P}-panel`,WF),onChange:z,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:v,keepMounted:x,unstyled:A,getStyles:j},children:_.jsx(zt,{ref:e,id:P,variant:d,mod:[{orientation:a,inverted:a==="horizontal"&&v,placement:a==="vertical"&&b},M],...j("root"),...B,children:s})})});Nu.classes=Tv;Nu.displayName="@mantine/core/Tabs";Nu.Tab=h5;Nu.Panel=d5;Nu.List=f5;const FC=kn((t,e)=>{const n=xt("TextInput",null,t);return _.jsx(t0,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});FC.classes=t0.classes;FC.displayName="@mantine/core/TextInput";const kQ=(t,e,n=!1)=>{const r=[];function i(o,a="--bn"){for(const s in o){const l=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u=`${a}-${l}`;typeof o[s]!="object"?(typeof o[s]=="number"&&(o[s]=`${o[s]}px`),n?e.style.removeProperty(u):e.style.setProperty(u,o[s].toString())):i(o[s],u)}}return i(t),r},KF=(t,e)=>kQ(t,e),TIe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},AIe=t=>kQ(TIe,t,!0),_Q=t=>_.jsxs(Sv,{gap:0,className:"bn-tooltip",children:[_.jsx($l,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&_.jsx($l,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),E3=q.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:i,secondaryTooltip:o,icon:a,isSelected:s,isDisabled:l,onClick:u,label:c,variant:f,...d}=t;fn(d,!1);const[h,m]=q.useState(!1),v=r?_.jsx(sl,{"aria-label":c,className:n,onMouseDown:b=>{HD()&&b.currentTarget.focus()},onClick:b=>{m(!0),u?.(b)},onPointerLeave:()=>m(!1),"aria-pressed":s,"data-selected":s||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...d,children:r}):_.jsx(wh,{className:n,"aria-label":c,onMouseDown:b=>{HD()&&b.currentTarget.focus()},onClick:b=>{m(!0),u?.(b)},onPointerLeave:()=>m(!1),"aria-pressed":s,"data-selected":s||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?20:30,disabled:l||!1,ref:e,...d,children:a});return i?_.jsx(i0,{disabled:h,withinPortal:!1,label:_.jsx(_Q,{mainTooltip:i,secondaryTooltip:o}),children:v}):v}),NIe=q.forwardRef((t,e)=>{const{className:n,text:r,icon:i,isSelected:o,mainTooltip:a,secondaryTooltip:s,onClick:l,onMouseEnter:u,...c}=t;fn(c,!1);const[f,d]=q.useState(!1),h=_.jsxs(RC,{className:n,checked:o===!0,wrapperProps:{onMouseEnter:u,onMouseLeave:()=>d(!1),onClick:m=>{d(!0),l?.(m)}},variant:"light",icon:null,ref:e,children:[_.jsx("span",{children:i}),_.jsx("span",{children:r})]});return!a||f?h:_.jsx(i0,{refProp:"rootRef",withinPortal:!1,label:_.jsx(_Q,{mainTooltip:a,secondaryTooltip:s}),children:h})}),DIe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i),_.jsx(Vi,{className:n,ref:e,children:r})}),MIe=q.forwardRef((t,e)=>{const{className:n,children:r,headerText:i,selected:o,onFocus:a,onBlur:s,tabIndex:l,...u}=t;return fn(u,!1),_.jsxs(Cv,{className:$r(n,o?"selected":""),onFocus:a,onBlur:s,tabIndex:l,ref:e,children:[i&&_.jsx($l,{className:"bn-header-text",children:i}),r]})}),kIe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i,!1),_.jsx(Cv.Section,{className:n,ref:e,children:r})}),_Ie=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i,!1),_.jsx(J_,{className:n,label:_.jsx($l,{children:r}),ref:e})}),OIe=q.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:i,...o}=t,a=sn();return fn(o,!1),n==="loading"?_.jsxs(Vi,{children:[_.jsx(Ow,{height:24,width:24}),_.jsx("div",{children:_.jsx(Ow,{height:12,width:100})})]}):_.jsxs(Vi,{children:[_.jsx(OC,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),_.jsxs($l,{fz:"sm",fw:"bold",children:[n.username,_.jsxs($l,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",i&&`(${a.comments.edited})`]})]})]})}),IIe=q.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:i,timeString:o,edited:a,actions:s,emojiPickerOpen:l,children:u,...c}=t,{hovered:f,ref:d}=E6e(),h=K5e([e,d]);return fn(c,!1),_.jsxs(Vi,{pos:"relative",ref:h,className:n,children:[s&&(r===!0||r===void 0||r==="hover"&&f||l)?_.jsx(Vi,{style:{position:"absolute",right:0,top:0,zIndex:10},children:s}):null,_.jsx(OIe,{...t}),u]})}),RIe=q.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:i,onBlur:o,editor:a,editable:s,...l}=t;fn(l,!1);const u=il();return _.jsx(RQ,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:s,theme:u?.colorSchemePreference,ref:e,onFocus:i,onBlur:o,children:_.jsx(xZ,{formattingToolbar:BIe})})}),BIe=()=>{const t=bZ([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return _.jsx(yZ,{blockTypeSelectItems:[],children:t})},LIe=q.forwardRef((t,e)=>{const{className:n,name:r,label:i,variant:o,icon:a,value:s,autoFocus:l,placeholder:u,disabled:c,onKeyDown:f,onChange:d,onSubmit:h,autoComplete:m,rightSection:v,...b}=t;return fn(b),_.jsx(FC,{size:"xs",className:$r(n||"",o==="large"?"bn-mt-input-large":""),ref:e,name:r,label:i,leftSection:a,value:s,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:v,placeholder:u,disabled:c,onKeyDown:f,onChange:d,onSubmit:h,autoComplete:m})}),FIe=q.createContext(void 0),PIe=t=>{const{children:e,onOpenChange:n,position:r,sub:i,...o}=t;return fn(o),i?_.jsx(Ar.Sub,{transitionProps:{duration:250,exitDelay:250},withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e}):_.jsx(Ar,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},$Ie=q.forwardRef((t,e)=>{const{className:n,children:r,icon:i,checked:o,subTrigger:a,onClick:s,...l}=t;return fn(l,!1),a?_.jsx(Ar.Sub.Item,{className:n,ref:e,leftSection:i,rightSection:o?_.jsx(_w,{size:10}):o===!1?_.jsx("div",{className:"bn-tick-space"}):null,onClick:s,...l,children:r}):_.jsx(Ar.Item,{className:n,ref:e,leftSection:i,rightSection:o?_.jsx(_w,{size:10}):o===!1?_.jsx("div",{className:"bn-tick-space"}):null,onClick:s,...l,children:r})}),zIe=t=>{const{children:e,sub:n,...r}=t;return fn(r),n?_.jsx(Ar.Sub.Target,{children:e}):_.jsx(Ar.Target,{children:e})},UIe=q.forwardRef((t,e)=>{const{className:n,children:r,sub:i,...o}=t;fn(o);const a=q.useContext(FIe);return i?_.jsx(Ar.Sub.Dropdown,{className:n,ref:e,onMouseOver:a?.onMenuMouseOver,onMouseLeave:a?.onMenuMouseLeave,children:r}):_.jsx(Ar.Dropdown,{className:n,ref:e,onMouseOver:a?.onMenuMouseOver,onMouseLeave:a?.onMenuMouseLeave,children:r})}),HIe=q.forwardRef((t,e)=>{const{className:n,...r}=t;return fn(r),_.jsx(Ar.Divider,{className:n,ref:e})}),VIe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i),_.jsx(Ar.Label,{className:n,ref:e,children:r})}),qIe=q.forwardRef((t,e)=>{const{className:n,children:r,icon:i,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,label:u,...c}=t;return fn(c,!1),i?_.jsx(wh,{size:24,className:n,ref:e,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":u,...c,children:i}):_.jsx(sl,{className:n,ref:e,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":u,...c,children:r})}),jIe=q.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:i,openTab:o,setOpenTab:a,loading:s,...l}=t;return fn(l),_.jsx(Vi,{className:n,ref:e,children:_.jsxs(Nu,{value:o,defaultValue:i,onChange:a,children:[s&&_.jsx(t5,{visible:s}),_.jsx(Nu.List,{children:r.map(u=>_.jsx(Nu.Tab,{"data-test":`${u.name.toLowerCase()}-tab`,value:u.name,children:u.name},u.name))}),r.map(u=>_.jsx(Nu.Panel,{value:u.name,children:u.tabPanel},u.name))]})})}),GIe=q.forwardRef((t,e)=>{const{className:n,children:r,onClick:i,label:o,...a}=t;return fn(a),_.jsx(sl,{size:"xs","aria-label":o,className:n,ref:e,onClick:i,...a,children:r})}),YIe=q.forwardRef((t,e)=>{const{className:n,accept:r,value:i,placeholder:o,onChange:a,...s}=t;return fn(s),_.jsx(eIe,{size:"xs",className:n,ref:e,accept:r,value:i,placeholder:o,onChange:a,...s})}),WIe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i),_.jsx("div",{className:n,ref:e,children:r})}),KIe=q.forwardRef((t,e)=>{const{className:n,value:r,placeholder:i,onKeyDown:o,onChange:a,...s}=t;return fn(s),_.jsx(FC,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:i,onKeyDown:o,onChange:a})}),XIe=t=>{const{open:e,onOpenChange:n,position:r,children:i,...o}=t;return fn(o),_.jsx(al,{middlewares:{size:{padding:20}},withinPortal:!1,opened:e,onChange:n,position:r,zIndex:1e4,children:i})},ZIe=t=>{const{children:e,...n}=t;return fn(n),_.jsx(H_,{children:e})},QIe=q.forwardRef((t,e)=>{const{className:n,children:r,variant:i,...o}=t;return fn(o),_.jsx(TC,{className:n,ref:e,children:r})}),JIe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i,!1),_.jsx(Vi,{align:"center",gap:0,className:n,ref:e,...i,children:r})}),eRe=q.forwardRef((t,e)=>{const{className:n,children:r,icon:i,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,label:u,...c}=t;return fn(c,!1),i?_.jsx(wh,{size:24,className:n,ref:e,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":u,...c,children:i}):_.jsx(sl,{className:n,ref:e,onClick:o,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":u,...c,children:r})}),tRe=q.forwardRef((t,e)=>{const{className:n,children:r,id:i,...o}=t;return fn(o),_.jsx(Sv,{gap:0,className:n,ref:e,id:i,role:"listbox",children:r})}),nRe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i),_.jsx(Vi,{className:n,ref:e,children:_.jsx(Vi,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),rRe=q.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:i,item:o,id:a,...s}=t;fn(s);const l=q.useRef(null);return q.useEffect(()=>{if(!l.current||!r)return;const u=NZ(l.current,l.current.closest(".bn-suggestion-menu, #ai-suggestion-menu"));u==="top"?l.current.scrollIntoView(!0):u==="bottom"&&l.current.scrollIntoView(!1)},[r]),_.jsxs(Vi,{gap:0,className:n,ref:xC(e,l),id:a,role:"option",onMouseDown:u=>u.preventDefault(),onClick:i,"aria-selected":r||void 0,children:[o.icon&&_.jsx(Vi,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:o.icon}),_.jsxs(Sv,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[_.jsx($l,{className:"bn-mt-suggestion-menu-item-title",children:o.title}),_.jsx($l,{className:"bn-mt-suggestion-menu-item-subtitle",children:o.subtext})]}),o.badge&&_.jsx(Vi,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:_.jsx(K_,{size:"xs",children:o.badge})})]})}),iRe=q.forwardRef((t,e)=>{const{className:n,children:r,...i}=t;return fn(i),_.jsx(Vi,{className:n,ref:e,children:r})}),oRe=q.forwardRef((t,e)=>{const{className:n,...r}=t;return fn(r),_.jsx(Ff,{className:n,type:"dots",size:16,ref:e})}),aRe=q.forwardRef((t,e)=>{const{className:n,children:r,id:i,columns:o,...a}=t;return fn(a),_.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${o}, 1fr)`},ref:e,id:i,role:"grid",children:r})}),sRe=q.forwardRef((t,e)=>{const{className:n,children:r,columns:i,...o}=t;return fn(o),_.jsx(Vi,{className:n,style:{gridColumn:`1 / ${i+1}`},ref:e,children:_.jsx(Vi,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),lRe=q.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:i,item:o,id:a,...s}=t;fn(s);const l=q.useRef(null);return q.useEffect(()=>{if(!l.current||!r)return;const u=NZ(l.current,l.current.closest(".bn-grid-suggestion-menu"));u==="top"?l.current.scrollIntoView(!0):u==="bottom"&&l.current.scrollIntoView(!1)},[r]),_.jsx("div",{className:n,ref:xC(e,l),id:a,role:"option",onClick:i,"aria-selected":r||void 0,children:o.icon})}),uRe=q.forwardRef((t,e)=>{const{className:n,children:r,columns:i,...o}=t;return fn(o),_.jsx(Ff,{className:n,style:{gridColumn:`1 / ${i+1}`},type:"dots",ref:e})}),cRe=q.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:i,onClick:o,...a}=t;return fn(a,!1),_.jsx(sl,{className:r,ref:e,onMouseDown:i,onClick:o,...a,children:n})}),fRe=q.forwardRef((t,e)=>{const{className:n,children:r,draggable:i,onDragStart:o,onDragEnd:a,style:s,label:l,...u}=t;return fn(u,!1),_.jsx(sl,{className:n,ref:e,"aria-label":l,draggable:i,onDragStart:o,onDragEnd:a,style:s,...u,children:r})}),C3=q.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:i,onMouseLeave:o,variant:a,...s}=t;fn(s);const{ref:l,focused:u}=T6e(),c=BZ(u),f=xC(e,l,c);return _.jsx(Y_,{className:n,ref:f,role:"toolbar",onMouseEnter:i,onMouseLeave:o,gap:a==="action-toolbar"?2:void 0,children:r})});var OQ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XF=xr.createContext&&xr.createContext(OQ),dRe=["attr","size","title"];function hRe(t,e){if(t==null)return{};var n=pRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iw.apply(this,arguments)}function ZF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(n),!0).forEach(function(r){mRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mRe(t,e,n){return e=gRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gRe(t){var e=vRe(t,"string");return typeof e=="symbol"?e:e+""}function vRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IQ(t){return t&&t.map((e,n)=>xr.createElement(e.tag,Rw({key:n},e.attr),IQ(e.child)))}function bRe(t){return e=>xr.createElement(yRe,Iw({attr:Rw({},t.attr)},e),IQ(t.child))}function yRe(t){var e=n=>{var{attr:r,size:i,title:o}=t,a=hRe(t,dRe),s=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),xr.createElement("svg",Iw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Rw(Rw({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&xr.createElement("title",null,o),t.children)};return XF!==void 0?xr.createElement(XF.Consumer,null,n=>e(n)):e(OQ)}function xRe(t){return bRe({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}const S3=q.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:i,...o}=t;fn(o);const a=r.filter(s=>s.isSelected)[0];return a?_.jsxs(Ar,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:i,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[_.jsx(Ar.Target,{children:_.jsx(sl,{onMouseDown:s=>{HD()&&s.currentTarget.focus()},leftSection:a.icon,rightSection:_.jsx(xRe,{}),size:"xs",variant:"subtle",disabled:i,children:a.text})}),_.jsx(Ar.Dropdown,{className:n,ref:e,children:r.map(s=>_.jsx(Ar.Item,{onClick:s.onClick,leftSection:s.icon,rightSection:s.isSelected?_.jsx(_w,{size:10,className:"bn-tick-icon"}):_.jsx("div",{className:"bn-tick-space"}),disabled:s.isDisabled,children:s.text},s.text))})]}):null}),wRe={FormattingToolbar:{Root:C3,Button:E3,Select:S3},FilePanel:{Root:jIe,Button:GIe,FileInput:YIe,TabPanel:WIe,TextInput:KIe},GridSuggestionMenu:{Root:aRe,Item:lRe,EmptyItem:sRe,Loader:uRe},LinkToolbar:{Root:C3,Button:E3,Select:S3},SideMenu:{Root:JIe,Button:eRe},SuggestionMenu:{Root:tRe,Item:rRe,EmptyItem:nRe,Label:iRe,Loader:oRe},TableHandle:{Root:fRe,ExtendButton:cRe},Generic:{Badge:{Root:NIe,Group:DIe},Form:{Root:t=>_.jsx("div",{children:t.children}),TextInput:LIe},Menu:{Root:PIe,Trigger:zIe,Dropdown:UIe,Divider:HIe,Label:VIe,Item:$Ie,Button:qIe},Popover:{Root:XIe,Trigger:ZIe,Content:QIe},Toolbar:{Root:C3,Button:E3,Select:S3}},Comments:{Comment:IIe,Editor:RIe,Card:MIe,CardSection:kIe,ExpandSectionsPrompt:_Ie}},RQ=t=>{const{className:e,theme:n,...r}=t,i=il(),o=SZ(),a=i?.colorSchemePreference||o,s=q.useCallback(f=>{if(f&&(AIe(f),typeof n=="object")){if("light"in n&&"dark"in n){KF(n[a==="dark"?"dark":"light"],f);return}KF(n,f);return}},[a,n]),l=q.useContext(I_),u=typeof n=="string"?n:a!=="no-preference"?a:"light",c=_.jsx(tZ.Provider,{value:wRe,children:_.jsx(I5e,{"data-mantine-color-scheme":u,className:$r("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:s})});return l?c:_.jsx(HZ,{withCssVariables:!1,getRootElement:()=>{},children:c})};var V2={exports:{}},ERe=V2.exports,QF;function CRe(){return QF||(QF=1,(function(t,e){(function(n,r){t.exports=r()})(ERe,function(){var n=(function(r,i){var o=Array.prototype.concat,a=Array.prototype.slice,s=Object.prototype.toString;function l(C,w){var A=C>w?C:w;return r.pow(10,17-~~(r.log(A>0?A:-A)*r.LOG10E))}var u=Array.isArray||function(w){return s.call(w)==="[object Array]"};function c(C){return s.call(C)==="[object Function]"}function f(C){return typeof C=="number"?C-C===0:!1}function d(C){return o.apply([],C)}function h(){return new h._init(arguments)}h.fn=h.prototype,h._init=function(w){if(u(w[0]))if(u(w[0][0])){c(w[1])&&(w[0]=h.map(w[0],w[1]));for(var A=0;A<w[0].length;A++)this[A]=w[0][A];this.length=w[0].length}else this[0]=c(w[1])?h.map(w[0],w[1]):w[0],this.length=1;else if(f(w[0]))this[0]=h.seq.apply(null,w),this.length=1;else{if(w[0]instanceof h)return h(w[0].toArray());this[0]=[],this.length=1}return this},h._init.prototype=h.prototype,h._init.constructor=h,h.utils={calcRdx:l,isArray:u,isFunction:c,isNumber:f,toVector:d},h._random_fn=r.random,h.setRandom=function(w){if(typeof w!="function")throw new TypeError("fn is not a function");h._random_fn=w},h.extend=function(w){var A,E;if(arguments.length===1){for(E in w)h[E]=w[E];return this}for(A=1;A<arguments.length;A++)for(E in arguments[A])w[E]=arguments[A][E];return w},h.rows=function(w){return w.length||1},h.cols=function(w){return w[0].length||1},h.dimensions=function(w){return{rows:h.rows(w),cols:h.cols(w)}},h.row=function(w,A){return u(A)?A.map(function(E){return h.row(w,E)}):w[A]},h.rowa=function(w,A){return h.row(w,A)},h.col=function(w,A){if(u(A)){var E=h.arange(w.length).map(function(){return new Array(A.length)});return A.forEach(function(D,M){h.arange(w.length).forEach(function(k){E[k][M]=w[k][D]})}),E}for(var T=new Array(w.length),N=0;N<w.length;N++)T[N]=[w[N][A]];return T},h.cola=function(w,A){return h.col(w,A).map(function(E){return E[0]})},h.diag=function(w){for(var A=h.rows(w),E=new Array(A),T=0;T<A;T++)E[T]=[w[T][T]];return E},h.antidiag=function(w){for(var A=h.rows(w)-1,E=new Array(A),T=0;A>=0;A--,T++)E[T]=[w[T][A]];return E},h.transpose=function(w){var A=[],E,T,N,D,M;for(u(w[0])||(w=[w]),T=w.length,N=w[0].length,M=0;M<N;M++){for(E=new Array(T),D=0;D<T;D++)E[D]=w[D][M];A.push(E)}return A.length===1?A[0]:A},h.map=function(w,A,E){var T,N,D,M,k;for(u(w[0])||(w=[w]),N=w.length,D=w[0].length,M=E?w:new Array(N),T=0;T<N;T++)for(M[T]||(M[T]=new Array(D)),k=0;k<D;k++)M[T][k]=A(w[T][k],T,k);return M.length===1?M[0]:M},h.cumreduce=function(w,A,E){var T,N,D,M,k;for(u(w[0])||(w=[w]),N=w.length,D=w[0].length,M=E?w:new Array(N),T=0;T<N;T++)for(M[T]||(M[T]=new Array(D)),D>0&&(M[T][0]=w[T][0]),k=1;k<D;k++)M[T][k]=A(M[T][k-1],w[T][k]);return M.length===1?M[0]:M},h.alter=function(w,A){return h.map(w,A,!0)},h.create=function(w,A,E){var T=new Array(w),N,D;for(c(A)&&(E=A,A=w),N=0;N<w;N++)for(T[N]=new Array(A),D=0;D<A;D++)T[N][D]=E(N,D);return T};function m(){return 0}h.zeros=function(w,A){return f(A)||(A=w),h.create(w,A,m)};function v(){return 1}h.ones=function(w,A){return f(A)||(A=w),h.create(w,A,v)},h.rand=function(w,A){return f(A)||(A=w),h.create(w,A,h._random_fn)};function b(C,w){return C===w?1:0}h.identity=function(w,A){return f(A)||(A=w),h.create(w,A,b)},h.symmetric=function(w){var A=w.length,E,T;if(w.length!==w[0].length)return!1;for(E=0;E<A;E++)for(T=0;T<A;T++)if(w[T][E]!==w[E][T])return!1;return!0},h.clear=function(w){return h.alter(w,m)},h.seq=function(w,A,E,T){c(T)||(T=!1);var N=[],D=l(w,A),M=(A*D-w*D)/((E-1)*D),k=w,B;for(B=0;k<=A&&B<E;B++,k=(w*D+M*D*B)/D)N.push(T?T(k,B):k);return N},h.arange=function(w,A,E){var T=[],N;if(E=E||1,A===i&&(A=w,w=0),w===A||E===0)return[];if(w<A&&E<0)return[];if(w>A&&E>0)return[];if(E>0)for(N=w;N<A;N+=E)T.push(N);else for(N=w;N>A;N+=E)T.push(N);return T},h.slice=(function(){function C(A,E,T,N){var D,M=[],k=A.length;if(E===i&&T===i&&N===i)return h.copy(A);if(E=E||0,T=T||A.length,E=E>=0?E:k+E,T=T>=0?T:k+T,N=N||1,E===T||N===0)return[];if(E<T&&N<0)return[];if(E>T&&N>0)return[];if(N>0)for(D=E;D<T;D+=N)M.push(A[D]);else for(D=E;D>T;D+=N)M.push(A[D]);return M}function w(A,E){var T,N;if(E=E||{},f(E.row)){if(f(E.col))return A[E.row][E.col];var D=h.rowa(A,E.row);return T=E.col||{},C(D,T.start,T.end,T.step)}if(f(E.col)){var M=h.cola(A,E.col);return N=E.row||{},C(M,N.start,N.end,N.step)}N=E.row||{},T=E.col||{};var k=C(A,N.start,N.end,N.step);return k.map(function(B){return C(B,T.start,T.end,T.step)})}return w})(),h.sliceAssign=function(w,A,E){var T,N;if(f(A.row)){if(f(A.col))return w[A.row][A.col]=E;A.col=A.col||{},A.col.start=A.col.start||0,A.col.end=A.col.end||w[0].length,A.col.step=A.col.step||1,T=h.arange(A.col.start,r.min(w.length,A.col.end),A.col.step);var D=A.row;return T.forEach(function(k,B){w[D][k]=E[B]}),w}if(f(A.col)){A.row=A.row||{},A.row.start=A.row.start||0,A.row.end=A.row.end||w.length,A.row.step=A.row.step||1,N=h.arange(A.row.start,r.min(w[0].length,A.row.end),A.row.step);var M=A.col;return N.forEach(function(k,B){w[k][M]=E[B]}),w}return E[0].length===i&&(E=[E]),A.row.start=A.row.start||0,A.row.end=A.row.end||w.length,A.row.step=A.row.step||1,A.col.start=A.col.start||0,A.col.end=A.col.end||w[0].length,A.col.step=A.col.step||1,N=h.arange(A.row.start,r.min(w.length,A.row.end),A.row.step),T=h.arange(A.col.start,r.min(w[0].length,A.col.end),A.col.step),N.forEach(function(k,B){T.forEach(function(P,$){w[k][P]=E[B][$]})}),w},h.diagonal=function(w){var A=h.zeros(w.length,w.length);return w.forEach(function(E,T){A[T][T]=E}),A},h.copy=function(w){return w.map(function(A){return f(A)?A:A.map(function(E){return E})})};var x=h.prototype;return x.length=0,x.push=Array.prototype.push,x.sort=Array.prototype.sort,x.splice=Array.prototype.splice,x.slice=Array.prototype.slice,x.toArray=function(){return this.length>1?a.call(this):a.call(this)[0]},x.map=function(w,A){return h(h.map(this,w,A))},x.cumreduce=function(w,A){return h(h.cumreduce(this,w,A))},x.alter=function(w){return h.alter(this,w),this},(function(C){for(var w=0;w<C.length;w++)(function(A){x[A]=function(E){var T=this,N;return E?(setTimeout(function(){E.call(T,x[A].call(T))}),this):(N=h[A](this),u(N)?h(N):N)}})(C[w])})("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),(function(C){for(var w=0;w<C.length;w++)(function(A){x[A]=function(E,T){var N=this;return T?(setTimeout(function(){T.call(N,x[A].call(N,E))}),this):h(h[A](this,E))}})(C[w])})("row col".split(" ")),(function(C){for(var w=0;w<C.length;w++)(function(A){x[A]=function(){return h(h[A].apply(null,arguments))}})(C[w])})("create zeros ones rand identity".split(" ")),h})(Math);return(function(r,i){var o=r.utils.isFunction;function a(u,c){return u-c}function s(u,c,f){return i.max(c,i.min(u,f))}r.sum=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.sumsqrd=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d]*c[d];return f},r.sumsqerr=function(c){for(var f=r.mean(c),d=0,h=c.length,m;--h>=0;)m=c[h]-f,d+=m*m;return d},r.sumrow=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.product=function(c){for(var f=1,d=c.length;--d>=0;)f*=c[d];return f},r.min=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]<f&&(f=c[d]);return f},r.max=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]>f&&(f=c[d]);return f},r.unique=function(c){for(var f={},d=[],h=0;h<c.length;h++)f[c[h]]||(f[c[h]]=!0,d.push(c[h]));return d},r.mean=function(c){return r.sum(c)/c.length},r.meansqerr=function(c){return r.sumsqerr(c)/c.length},r.geomean=function(c){var f=c.map(i.log),d=r.mean(f);return i.exp(d)},r.median=function(c){var f=c.length,d=c.slice().sort(a);return f&1?d[f/2|0]:(d[f/2-1]+d[f/2])/2},r.cumsum=function(c){return r.cumreduce(c,function(f,d){return f+d})},r.cumprod=function(c){return r.cumreduce(c,function(f,d){return f*d})},r.diff=function(c){var f=[],d=c.length,h;for(h=1;h<d;h++)f.push(c[h]-c[h-1]);return f},r.rank=function(u){var c,f=[],d={};for(c=0;c<u.length;c++){var h=u[c];d[h]?d[h]++:(d[h]=1,f.push(h))}var m=f.sort(a),v={},b=1;for(c=0;c<m.length;c++){var h=m[c],x=d[h],C=b,w=b+x-1,A=(C+w)/2;v[h]=A,b+=x}return u.map(function(E){return v[E]})},r.mode=function(c){var f=c.length,d=c.slice().sort(a),h=1,m=0,v=0,b=[],x;for(x=0;x<f;x++)d[x]===d[x+1]?h++:(h>m?(b=[d[x]],m=h,v=0):h===m&&(b.push(d[x]),v++),h=1);return v===0?b[0]:b},r.range=function(c){return r.max(c)-r.min(c)},r.variance=function(c,f){return r.sumsqerr(c)/(c.length-(f?1:0))},r.pooledvariance=function(c){var f=c.reduce(function(h,m){return h+r.sumsqerr(m)},0),d=c.reduce(function(h,m){return h+m.length},0);return f/(d-c.length)},r.deviation=function(u){for(var c=r.mean(u),f=u.length,d=new Array(f),h=0;h<f;h++)d[h]=u[h]-c;return d},r.stdev=function(c,f){return i.sqrt(r.variance(c,f))},r.pooledstdev=function(c){return i.sqrt(r.pooledvariance(c))},r.meandev=function(c){for(var f=r.mean(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.mean(d)},r.meddev=function(c){for(var f=r.median(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.median(d)},r.coeffvar=function(c){return r.stdev(c)/r.mean(c)},r.quartiles=function(c){var f=c.length,d=c.slice().sort(a);return[d[i.round(f/4)-1],d[i.round(f/2)-1],d[i.round(f*3/4)-1]]},r.quantiles=function(c,f,d,h){var m=c.slice().sort(a),v=[f.length],b=c.length,x,C,w,A,E,T;for(typeof d>"u"&&(d=3/8),typeof h>"u"&&(h=3/8),x=0;x<f.length;x++)C=f[x],w=d+C*(1-d-h),A=b*C+w,E=i.floor(s(A,1,b-1)),T=s(A-E,0,1),v[x]=(1-T)*m[E-1]+T*m[E];return v},r.percentile=function(c,f,d){var h=c.slice().sort(a),m=f*(h.length+(d?1:-1))+(d?0:1),v=parseInt(m),b=m-v;return v+1<h.length?h[v-1]+b*(h[v]-h[v-1]):h[v-1]},r.percentileOfScore=function(c,f,d){var h=0,m=c.length,v=!1,b,x;for(d==="strict"&&(v=!0),x=0;x<m;x++)b=c[x],(v&&b<f||!v&&b<=f)&&h++;return h/m},r.histogram=function(c,f){f=f||4;var d=r.min(c),h=(r.max(c)-d)/f,m=c.length,v=[],b;for(b=0;b<f;b++)v[b]=0;for(b=0;b<m;b++)v[i.min(i.floor((c[b]-d)/h),f-1)]+=1;return v},r.covariance=function(c,f){var d=r.mean(c),h=r.mean(f),m=c.length,v=new Array(m),b;for(b=0;b<m;b++)v[b]=(c[b]-d)*(f[b]-h);return r.sum(v)/(m-1)},r.corrcoeff=function(c,f){return r.covariance(c,f)/r.stdev(c,1)/r.stdev(f,1)},r.spearmancoeff=function(u,c){return u=r.rank(u),c=r.rank(c),r.corrcoeff(u,c)},r.stanMoment=function(c,f){for(var d=r.mean(c),h=r.stdev(c),m=c.length,v=0,b=0;b<m;b++)v+=i.pow((c[b]-d)/h,f);return v/c.length},r.skewness=function(c){return r.stanMoment(c,3)},r.kurtosis=function(c){return r.stanMoment(c,4)-3};var l=r.prototype;(function(u){for(var c=0;c<u.length;c++)(function(f){l[f]=function(d,h){var m=[],v=0,b=this;if(o(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(b,l[f].call(b,d))}),this;if(this.length>1){for(b=d===!0?this:this.transpose();v<b.length;v++)m[v]=r[f](b[v]);return m}return r[f](this[0],d)}})(u[c])})("cumsum cumprod".split(" ")),(function(u){for(var c=0;c<u.length;c++)(function(f){l[f]=function(d,h){var m=[],v=0,b=this;if(o(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(b,l[f].call(b,d))}),this;if(this.length>1){for(f!=="sumrow"&&(b=d===!0?this:this.transpose());v<b.length;v++)m[v]=r[f](b[v]);return d===!0?r[f](r.utils.toVector(m)):m}return r[f](this[0],d)}})(u[c])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),(function(u){for(var c=0;c<u.length;c++)(function(f){l[f]=function(){var d=[],h=0,m=this,v=Array.prototype.slice.call(arguments),b;if(o(v[v.length-1])){b=v[v.length-1];var x=v.slice(0,v.length-1);return setTimeout(function(){b.call(m,l[f].apply(m,x))}),this}else{b=void 0;var C=function(A){return r[f].apply(m,[A].concat(v))}}if(this.length>1){for(m=m.transpose();h<m.length;h++)d[h]=C(m[h]);return d}return C(this[0])}})(u[c])})("quantiles percentileOfScore".split(" "))})(n,Math),(function(r,i){r.gammaln=function(a){var s=0,l=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,c,f,d;for(d=(f=c=a)+5.5,d-=(c+.5)*i.log(d);s<6;s++)u+=l[s]/++f;return i.log(2.5066282746310007*u/c)-d},r.loggam=function(a){var s,l,u,c,f,d,h,m=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(s=a,h=0,a==1||a==2)return 0;for(a<=7&&(h=i.floor(7-a),s=a+h),l=1/(s*s),u=2*i.PI,f=m[9],d=8;d>=0;d--)f*=l,f+=m[d];if(c=f/s+.5*i.log(u)+(s-.5)*i.log(s)-s,a<=7)for(d=1;d<=h;d++)c-=i.log(s-1),s-=1;return c},r.gammafn=function(a){var s=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],l=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,c=0,f=0,d=0,h=a,m,v,b,x;if(a>171.6243769536076)return 1/0;if(h<=0)if(x=h%1+36e-17,x)u=(h&1?-1:1)*i.PI/i.sin(i.PI*x),h=1-h;else return 1/0;for(b=h,h<1?v=h++:v=(h-=c=(h|0)-1)-1,m=0;m<8;++m)d=(d+s[m])*v,f=f*v+l[m];if(x=d/f+1,b<h)x/=b;else if(b>h)for(m=0;m<c;++m)x*=h,h++;return u&&(x=u/x),x},r.gammap=function(a,s){return r.lowRegGamma(a,s)*r.gammafn(a)},r.lowRegGamma=function(a,s){var l=r.gammaln(a),u=a,c=1/a,f=c,d=s+1-a,h=1/1e-30,m=1/d,v=m,b=1,x=-~(i.log(a>=1?a:1/a)*8.5+a*.4+17),C;if(s<0||a<=0)return NaN;if(s<a+1){for(;b<=x;b++)c+=f*=s/++u;return c*i.exp(-s+a*i.log(s)-l)}for(;b<=x;b++)C=-b*(b-a),d+=2,m=C*m+d,h=d+C/h,m=1/m,v*=m*h;return 1-v*i.exp(-s+a*i.log(s)-l)},r.factorialln=function(a){return a<0?NaN:r.gammaln(a+1)},r.factorial=function(a){return a<0?NaN:r.gammafn(a+1)},r.combination=function(a,s){return a>170||s>170?i.exp(r.combinationln(a,s)):r.factorial(a)/r.factorial(s)/r.factorial(a-s)},r.combinationln=function(a,s){return r.factorialln(a)-r.factorialln(s)-r.factorialln(a-s)},r.permutation=function(a,s){return r.factorial(a)/r.factorial(a-s)},r.betafn=function(a,s){if(!(a<=0||s<=0))return a+s>170?i.exp(r.betaln(a,s)):r.gammafn(a)*r.gammafn(s)/r.gammafn(a+s)},r.betaln=function(a,s){return r.gammaln(a)+r.gammaln(s)-r.gammaln(a+s)},r.betacf=function(a,s,l){var u=1e-30,c=1,f=s+l,d=s+1,h=s-1,m=1,v=1-f*a/d,b,x,C,w;for(i.abs(v)<u&&(v=u),v=1/v,w=v;c<=100&&(b=2*c,x=c*(l-c)*a/((h+b)*(s+b)),v=1+x*v,i.abs(v)<u&&(v=u),m=1+x/m,i.abs(m)<u&&(m=u),v=1/v,w*=v*m,x=-(s+c)*(f+c)*a/((s+b)*(d+b)),v=1+x*v,i.abs(v)<u&&(v=u),m=1+x/m,i.abs(m)<u&&(m=u),v=1/v,C=v*m,w*=C,!(i.abs(C-1)<3e-7));c++);return w},r.gammapinv=function(a,s){var l=0,u=s-1,c=1e-8,f=r.gammaln(s),d,h,m,v,b,x,C;if(a>=1)return i.max(100,s+100*i.sqrt(s));if(a<=0)return 0;for(s>1?(x=i.log(u),C=i.exp(u*(x-1)-f),b=a<.5?a:1-a,m=i.sqrt(-2*i.log(b)),d=(2.30753+m*.27061)/(1+m*(.99229+m*.04481))-m,a<.5&&(d=-d),d=i.max(.001,s*i.pow(1-1/(9*s)-d/(3*i.sqrt(s)),3))):(m=1-s*(.253+s*.12),a<m?d=i.pow(a/m,1/s):d=1-i.log(1-(a-m)/(1-m)));l<12;l++){if(d<=0)return 0;if(h=r.lowRegGamma(s,d)-a,s>1?m=C*i.exp(-(d-u)+u*(i.log(d)-x)):m=i.exp(-d+u*i.log(d)-f),v=h/m,d-=m=v/(1-.5*i.min(1,v*((s-1)/d-1))),d<=0&&(d=.5*(d+m)),i.abs(m)<c*d)break}return d},r.erf=function(a){var s=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],l=s.length-1,u=!1,c=0,f=0,d,h,m,v;for(a<0&&(a=-a,u=!0),d=2/(2+a),h=4*d-2;l>0;l--)m=c,c=h*c-f+s[l],f=m;return v=d*i.exp(-a*a+.5*(s[0]+h*c)-f),u?v-1:1-v},r.erfc=function(a){return 1-r.erf(a)},r.erfcinv=function(a){var s=0,l,u,c,f;if(a>=2)return-100;if(a<=0)return 100;for(f=a<1?a:2-a,c=i.sqrt(-2*i.log(f/2)),l=-.70711*((2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c);s<2;s++)u=r.erfc(l)-f,l+=u/(1.1283791670955126*i.exp(-l*l)-l*u);return a<1?l:-l},r.ibetainv=function(a,s,l){var u=1e-8,c=s-1,f=l-1,d=0,h,m,v,b,x,C,w,A,E,T,N;if(a<=0)return 0;if(a>=1)return 1;for(s>=1&&l>=1?(v=a<.5?a:1-a,b=i.sqrt(-2*i.log(v)),w=(2.30753+b*.27061)/(1+b*(.99229+b*.04481))-b,a<.5&&(w=-w),A=(w*w-3)/6,E=2/(1/(2*s-1)+1/(2*l-1)),T=w*i.sqrt(A+E)/E-(1/(2*l-1)-1/(2*s-1))*(A+5/6-2/(3*E)),w=s/(s+l*i.exp(2*T))):(h=i.log(s/(s+l)),m=i.log(l/(s+l)),b=i.exp(s*h)/s,x=i.exp(l*m)/l,T=b+x,a<b/T?w=i.pow(s*T*a,1/s):w=1-i.pow(l*T*(1-a),1/l)),N=-r.gammaln(s)-r.gammaln(l)+r.gammaln(s+l);d<10;d++){if(w===0||w===1)return w;if(C=r.ibeta(w,s,l)-a,b=i.exp(c*i.log(w)+f*i.log(1-w)+N),x=C/b,w-=b=x/(1-.5*i.min(1,x*(c/w-f/(1-w)))),w<=0&&(w=.5*(w+b)),w>=1&&(w=.5*(w+b+1)),i.abs(b)<u*w&&d>0)break}return w},r.ibeta=function(a,s,l){var u=a===0||a===1?0:i.exp(r.gammaln(s+l)-r.gammaln(s)-r.gammaln(l)+s*i.log(a)+l*i.log(1-a));return a<0||a>1?!1:a<(s+1)/(s+l+2)?u*r.betacf(a,s,l)/s:1-u*r.betacf(1-a,l,s)/l},r.randn=function(a,s){var l,u,c,f,d;if(s||(s=a),a)return r.create(a,s,function(){return r.randn()});do l=r._random_fn(),u=1.7156*(r._random_fn()-.5),c=l-.449871,f=i.abs(u)+.386595,d=c*c+f*(.196*f-.25472*c);while(d>.27597&&(d>.27846||u*u>-4*i.log(l)*l*l));return u/l},r.randg=function(a,s,l){var u=a,c,f,d,h,m,v;if(l||(l=s),a||(a=1),s)return v=r.zeros(s,l),v.alter(function(){return r.randg(a)}),v;a<1&&(a+=1),c=a-1/3,f=1/i.sqrt(9*c);do{do m=r.randn(),h=1+f*m;while(h<=0);h=h*h*h,d=r._random_fn()}while(d>1-.331*i.pow(m,4)&&i.log(d)>.5*m*m+c*(1-h+i.log(h)));if(a==u)return c*h;do d=r._random_fn();while(d===0);return i.pow(d,1/u)*c*h},(function(o){for(var a=0;a<o.length;a++)(function(s){r.fn[s]=function(){return r(r.map(this,function(l){return r[s](l)}))}})(o[a])})("gammaln gammafn factorial factorialln".split(" ")),(function(o){for(var a=0;a<o.length;a++)(function(s){r.fn[s]=function(){return r(r[s].apply(null,arguments))}})(o[a])})("randn".split(" "))})(n,Math),(function(r,i){(function(u){for(var c=0;c<u.length;c++)(function(f){r[f]=function d(h,m,v){return this instanceof d?(this._a=h,this._b=m,this._c=v,this):new d(h,m,v)},r.fn[f]=function(d,h,m){var v=r[f](d,h,m);return v.data=this,v},r[f].prototype.sample=function(d){var h=this._a,m=this._b,v=this._c;return d?r.alter(d,function(){return r[f].sample(h,m,v)}):r[f].sample(h,m,v)},(function(d){for(var h=0;h<d.length;h++)(function(m){r[f].prototype[m]=function(v){var b=this._a,x=this._b,C=this._c;return!v&&v!==0&&(v=this.data),typeof v!="number"?r.fn.map.call(v,function(w){return r[f][m](w,b,x,C)}):r[f][m](v,b,x,C)}})(d[h])})("pdf cdf inv".split(" ")),(function(d){for(var h=0;h<d.length;h++)(function(m){r[f].prototype[m]=function(){return r[f][m](this._a,this._b,this._c)}})(d[h])})("mean median mode variance".split(" "))})(u[c])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),r.extend(r.beta,{pdf:function(c,f,d){return c>1||c<0?0:f==1&&d==1?1:f<512&&d<512?i.pow(c,f-1)*i.pow(1-c,d-1)/r.betafn(f,d):i.exp((f-1)*i.log(c)+(d-1)*i.log(1-c)-r.betaln(f,d))},cdf:function(c,f,d){return c>1||c<0?(c>1)*1:r.ibeta(c,f,d)},inv:function(c,f,d){return r.ibetainv(c,f,d)},mean:function(c,f){return c/(c+f)},median:function(c,f){return r.ibetainv(.5,c,f)},mode:function(c,f){return(c-1)/(c+f-2)},sample:function(c,f){var d=r.randg(c);return d/(d+r.randg(f))},variance:function(c,f){return c*f/(i.pow(c+f,2)*(c+f+1))}}),r.extend(r.centralF,{pdf:function(c,f,d){var h,m,v;return c<0?0:f<=2?c===0&&f<2?1/0:c===0&&f===2?1:1/r.betafn(f/2,d/2)*i.pow(f/d,f/2)*i.pow(c,f/2-1)*i.pow(1+f/d*c,-(f+d)/2):(h=f*c/(d+c*f),m=d/(d+c*f),v=f*m/2,v*r.binomial.pdf((f-2)/2,(f+d-2)/2,h))},cdf:function(c,f,d){return c<0?0:r.ibeta(f*c/(f*c+d),f/2,d/2)},inv:function(c,f,d){return d/(f*(1/r.ibetainv(c,f/2,d/2)-1))},mean:function(c,f){return f>2?f/(f-2):void 0},mode:function(c,f){return c>2?f*(c-2)/(c*(f+2)):void 0},sample:function(c,f){var d=r.randg(c/2)*2,h=r.randg(f/2)*2;return d/c/(h/f)},variance:function(c,f){if(!(f<=4))return 2*f*f*(c+f-2)/(c*(f-2)*(f-2)*(f-4))}}),r.extend(r.cauchy,{pdf:function(c,f,d){return d<0?0:d/(i.pow(c-f,2)+i.pow(d,2))/i.PI},cdf:function(c,f,d){return i.atan((c-f)/d)/i.PI+.5},inv:function(u,c,f){return c+f*i.tan(i.PI*(u-.5))},median:function(c){return c},mode:function(c){return c},sample:function(c,f){return r.randn()*i.sqrt(1/(2*r.randg(.5)))*f+c}}),r.extend(r.chisquare,{pdf:function(c,f){return c<0?0:c===0&&f===2?.5:i.exp((f/2-1)*i.log(c)-c/2-f/2*i.log(2)-r.gammaln(f/2))},cdf:function(c,f){return c<0?0:r.lowRegGamma(f/2,c/2)},inv:function(u,c){return 2*r.gammapinv(u,.5*c)},mean:function(u){return u},median:function(c){return c*i.pow(1-2/(9*c),3)},mode:function(c){return c-2>0?c-2:0},sample:function(c){return r.randg(c/2)*2},variance:function(c){return 2*c}}),r.extend(r.exponential,{pdf:function(c,f){return c<0?0:f*i.exp(-f*c)},cdf:function(c,f){return c<0?0:1-i.exp(-f*c)},inv:function(u,c){return-i.log(1-u)/c},mean:function(u){return 1/u},median:function(u){return 1/u*i.log(2)},mode:function(){return 0},sample:function(c){return-1/c*i.log(r._random_fn())},variance:function(u){return i.pow(u,-2)}}),r.extend(r.gamma,{pdf:function(c,f,d){return c<0?0:c===0&&f===1?1/d:i.exp((f-1)*i.log(c)-c/d-r.gammaln(f)-f*i.log(d))},cdf:function(c,f,d){return c<0?0:r.lowRegGamma(f,c/d)},inv:function(u,c,f){return r.gammapinv(u,c)*f},mean:function(u,c){return u*c},mode:function(c,f){if(c>1)return(c-1)*f},sample:function(c,f){return r.randg(c)*f},variance:function(c,f){return c*f*f}}),r.extend(r.invgamma,{pdf:function(c,f,d){return c<=0?0:i.exp(-(f+1)*i.log(c)-d/c-r.gammaln(f)+f*i.log(d))},cdf:function(c,f,d){return c<=0?0:1-r.lowRegGamma(f,d/c)},inv:function(u,c,f){return f/r.gammapinv(1-u,c)},mean:function(u,c){return u>1?c/(u-1):void 0},mode:function(c,f){return f/(c+1)},sample:function(c,f){return f/r.randg(c)},variance:function(c,f){if(!(c<=2))return f*f/((c-1)*(c-1)*(c-2))}}),r.extend(r.kumaraswamy,{pdf:function(c,f,d){return c===0&&f===1?d:c===1&&d===1?f:i.exp(i.log(f)+i.log(d)+(f-1)*i.log(c)+(d-1)*i.log(1-i.pow(c,f)))},cdf:function(c,f,d){return c<0?0:c>1?1:1-i.pow(1-i.pow(c,f),d)},inv:function(c,f,d){return i.pow(1-i.pow(1-c,1/d),1/f)},mean:function(u,c){return c*r.gammafn(1+1/u)*r.gammafn(c)/r.gammafn(1+1/u+c)},median:function(c,f){return i.pow(1-i.pow(2,-1/f),1/c)},mode:function(c,f){if(c>=1&&f>=1&&c!==1&&f!==1)return i.pow((c-1)/(c*f-1),1/c)},variance:function(){throw new Error("variance not yet implemented")}}),r.extend(r.lognormal,{pdf:function(c,f,d){return c<=0?0:i.exp(-i.log(c)-.5*i.log(2*i.PI)-i.log(d)-i.pow(i.log(c)-f,2)/(2*d*d))},cdf:function(c,f,d){return c<0?0:.5+.5*r.erf((i.log(c)-f)/i.sqrt(2*d*d))},inv:function(u,c,f){return i.exp(-1.4142135623730951*f*r.erfcinv(2*u)+c)},mean:function(c,f){return i.exp(c+f*f/2)},median:function(c){return i.exp(c)},mode:function(c,f){return i.exp(c-f*f)},sample:function(c,f){return i.exp(r.randn()*f+c)},variance:function(c,f){return(i.exp(f*f)-1)*i.exp(2*c+f*f)}}),r.extend(r.noncentralt,{pdf:function(c,f,d){var h=1e-14;return i.abs(d)<h?r.studentt.pdf(c,f):i.abs(c)<h?i.exp(r.gammaln((f+1)/2)-d*d/2-.5*i.log(i.PI*f)-r.gammaln(f/2)):f/c*(r.noncentralt.cdf(c*i.sqrt(1+2/f),f+2,d)-r.noncentralt.cdf(c,f,d))},cdf:function(c,f,d){var h=1e-14,m=200;if(i.abs(d)<h)return r.studentt.cdf(c,f);var v=!1;c<0&&(v=!0,d=-d);for(var b=r.normal.cdf(-d,0,1),x=h+1,C=x,w=c*c/(c*c+f),A=0,E=i.exp(-d*d/2),T=i.exp(-d*d/2-.5*i.log(2)-r.gammaln(3/2))*d;A<m||C>h||x>h;)C=x,A>0&&(E*=d*d/(2*A),T*=d*d/(2*(A+1/2))),x=E*r.beta.cdf(w,A+.5,f/2)+T*r.beta.cdf(w,A+1,f/2),b+=.5*x,A++;return v?1-b:b}}),r.extend(r.normal,{pdf:function(c,f,d){return i.exp(-.5*i.log(2*i.PI)-i.log(d)-i.pow(c-f,2)/(2*d*d))},cdf:function(c,f,d){return .5*(1+r.erf((c-f)/i.sqrt(2*d*d)))},inv:function(u,c,f){return-1.4142135623730951*f*r.erfcinv(2*u)+c},mean:function(u){return u},median:function(c){return c},mode:function(u){return u},sample:function(c,f){return r.randn()*f+c},variance:function(u,c){return c*c}}),r.extend(r.pareto,{pdf:function(c,f,d){return c<f?0:d*i.pow(f,d)/i.pow(c,d+1)},cdf:function(c,f,d){return c<f?0:1-i.pow(f/c,d)},inv:function(c,f,d){return f/i.pow(1-c,1/d)},mean:function(c,f){if(!(f<=1))return f*i.pow(c,f)/(f-1)},median:function(c,f){return c*(f*i.SQRT2)},mode:function(c){return c},variance:function(u,c){if(!(c<=2))return u*u*c/(i.pow(c-1,2)*(c-2))}}),r.extend(r.studentt,{pdf:function(c,f){return f=f>1e100?1e100:f,1/(i.sqrt(f)*r.betafn(.5,f/2))*i.pow(1+c*c/f,-((f+1)/2))},cdf:function(c,f){var d=f/2;return r.ibeta((c+i.sqrt(c*c+f))/(2*i.sqrt(c*c+f)),d,d)},inv:function(u,c){var f=r.ibetainv(2*i.min(u,1-u),.5*c,.5);return f=i.sqrt(c*(1-f)/f),u>.5?f:-f},mean:function(c){return c>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(c){return r.randn()*i.sqrt(c/(2*r.randg(c/2)))},variance:function(c){return c>2?c/(c-2):c>1?1/0:void 0}}),r.extend(r.weibull,{pdf:function(c,f,d){return c<0||f<0||d<0?0:d/f*i.pow(c/f,d-1)*i.exp(-i.pow(c/f,d))},cdf:function(c,f,d){return c<0?0:1-i.exp(-i.pow(c/f,d))},inv:function(u,c,f){return c*i.pow(-i.log(1-u),1/f)},mean:function(u,c){return u*r.gammafn(1+1/c)},median:function(c,f){return c*i.pow(i.log(2),1/f)},mode:function(c,f){return f<=1?0:c*i.pow((f-1)/f,1/f)},sample:function(c,f){return c*i.pow(-i.log(r._random_fn()),1/f)},variance:function(c,f){return c*c*r.gammafn(1+2/f)-i.pow(r.weibull.mean(c,f),2)}}),r.extend(r.uniform,{pdf:function(c,f,d){return c<f||c>d?0:1/(d-f)},cdf:function(c,f,d){return c<f?0:c<d?(c-f)/(d-f):1},inv:function(u,c,f){return c+u*(f-c)},mean:function(c,f){return .5*(c+f)},median:function(c,f){return r.mean(c,f)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return c/2+f/2+(f/2-c/2)*(2*r._random_fn()-1)},variance:function(c,f){return i.pow(f-c,2)/12}});function o(u,c,f,d){for(var h=0,m=1,v=1,b=1,x=0,C=0,w;i.abs((v-C)/v)>d;)C=v,w=-(c+x)*(c+f+x)*u/(c+2*x)/(c+2*x+1),h=v+w*h,m=b+w*m,x=x+1,w=x*(f-x)*u/(c+2*x-1)/(c+2*x),v=h+w*v,b=m+w*b,h=h/b,m=m/b,v=v/b,b=1;return v/c}r.extend(r.binomial,{pdf:function(c,f,d){return d===0||d===1?f*d===c?1:0:r.combination(f,c)*i.pow(d,c)*i.pow(1-d,f-c)},cdf:function(c,f,d){var h,m=1e-10;if(c<0)return 0;if(c>=f)return 1;if(d<0||d>1||f<=0)return NaN;c=i.floor(c);var v=d,b=c+1,x=f-c,C=b+x,w=i.exp(r.gammaln(C)-r.gammaln(x)-r.gammaln(b)+b*i.log(v)+x*i.log(1-v));return v<(b+1)/(C+2)?h=w*o(v,b,x,m):h=1-w*o(1-v,x,b,m),i.round((1-h)*(1/m))/(1/m)}}),r.extend(r.negbin,{pdf:function(c,f,d){return c!==c>>>0?!1:c<0?0:r.combination(c+f-1,f-1)*i.pow(1-d,c)*i.pow(d,f)},cdf:function(c,f,d){var h=0,m=0;if(c<0)return 0;for(;m<=c;m++)h+=r.negbin.pdf(m,f,d);return h}}),r.extend(r.hypgeom,{pdf:function(c,f,d,h){if(c!==c|0)return!1;if(c<0||c<d-(f-h))return 0;if(c>h||c>d)return 0;if(d*2>f)return h*2>f?r.hypgeom.pdf(f-d-h+c,f,f-d,f-h):r.hypgeom.pdf(h-c,f,f-d,h);if(h*2>f)return r.hypgeom.pdf(d-c,f,d,f-h);if(d<h)return r.hypgeom.pdf(c,f,h,d);for(var m=1,v=0,b=0;b<c;b++){for(;m>1&&v<h;)m*=1-d/(f-v),v++;m*=(h-b)*(d-b)/((b+1)*(f-d-h+b+1))}for(;v<h;v++)m*=1-d/(f-v);return i.min(1,i.max(0,m))},cdf:function(c,f,d,h){if(c<0||c<d-(f-h))return 0;if(c>=h||c>=d)return 1;if(d*2>f)return h*2>f?r.hypgeom.cdf(f-d-h+c,f,f-d,f-h):1-r.hypgeom.cdf(h-c-1,f,f-d,h);if(h*2>f)return 1-r.hypgeom.cdf(d-c-1,f,d,f-h);if(d<h)return r.hypgeom.cdf(c,f,h,d);for(var m=1,v=1,b=0,x=0;x<c;x++){for(;m>1&&b<h;){var C=1-d/(f-b);v*=C,m*=C,b++}v*=(h-x)*(d-x)/((x+1)*(f-d-h+x+1)),m+=v}for(;b<h;b++)m*=1-d/(f-b);return i.min(1,i.max(0,m))}}),r.extend(r.poisson,{pdf:function(c,f){return f<0||c%1!==0||c<0?0:i.pow(f,c)*i.exp(-f)/r.factorial(c)},cdf:function(c,f){var d=[],h=0;if(c<0)return 0;for(;h<=c;h++)d.push(r.poisson.pdf(h,f));return r.sum(d)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(c){var f=1,d=0,h=i.exp(-c);do d++,f*=r._random_fn();while(f>h);return d-1},sampleLarge:function(c){var f=c,d,h,m,v,b,x,C,w,A,E;for(v=i.sqrt(f),b=i.log(f),C=.931+2.53*v,x=-.059+.02483*C,w=1.1239+1.1328/(C-3.4),A=.9277-3.6224/(C-2);;){if(h=i.random()-.5,m=i.random(),E=.5-i.abs(h),d=i.floor((2*x/E+C)*h+f+.43),E>=.07&&m<=A)return d;if(!(d<0||E<.013&&m>E)&&i.log(m)+i.log(w)-i.log(x/(E*E)+C)<=-f+d*b-r.loggam(d+1))return d}},sample:function(c){return c<10?this.sampleSmall(c):this.sampleLarge(c)}}),r.extend(r.triangular,{pdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<f||c>d?0:c<h?2*(c-f)/((d-f)*(h-f)):c===h?2/(d-f):2*(d-c)/((d-f)*(d-h))},cdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=f?0:c>=d?1:c<=h?i.pow(c-f,2)/((d-f)*(h-f)):1-i.pow(d-c,2)/((d-f)*(d-h))},inv:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=(h-f)/(d-f)?f+(d-f)*i.sqrt(c*((h-f)/(d-f))):f+(d-f)*(1-i.sqrt((1-c)*(1-(h-f)/(d-f))))},mean:function(c,f,d){return(c+f+d)/3},median:function(c,f,d){if(d<=(c+f)/2)return f-i.sqrt((f-c)*(f-d))/i.sqrt(2);if(d>(c+f)/2)return c+i.sqrt((f-c)*(d-c))/i.sqrt(2)},mode:function(c,f,d){return d},sample:function(c,f,d){var h=r._random_fn();return h<(d-c)/(f-c)?c+i.sqrt(h*(f-c)*(d-c)):f-i.sqrt((1-h)*(f-c)*(f-d))},variance:function(c,f,d){return(c*c+f*f+d*d-c*f-c*d-f*d)/18}}),r.extend(r.arcsine,{pdf:function(c,f,d){return d<=f?NaN:c<=f||c>=d?0:2/i.PI*i.pow(i.pow(d-f,2)-i.pow(2*c-f-d,2),-.5)},cdf:function(c,f,d){return c<f?0:c<d?2/i.PI*i.asin(i.sqrt((c-f)/(d-f))):1},inv:function(u,c,f){return c+(.5-.5*i.cos(i.PI*u))*(f-c)},mean:function(c,f){return f<=c?NaN:(c+f)/2},median:function(c,f){return f<=c?NaN:(c+f)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return(c+f)/2+(f-c)/2*i.sin(2*i.PI*r.uniform.sample(0,1))},variance:function(c,f){return f<=c?NaN:i.pow(f-c,2)/8}});function a(u){return u/i.abs(u)}r.extend(r.laplace,{pdf:function(c,f,d){return d<=0?0:i.exp(-i.abs(c-f)/d)/(2*d)},cdf:function(c,f,d){return d<=0?0:c<f?.5*i.exp((c-f)/d):1-.5*i.exp(-(c-f)/d)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,c){return 2*c*c},sample:function(c,f){var d=r._random_fn()-.5;return c-f*a(d)*i.log(1-2*i.abs(d))}});function s(u,c,f){var d=12,h=6,m=-30,v=-50,b=60,x=8,C=3,w=2,A=3,E=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],T=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],N=u*.5;if(N>=x)return 1;var D=2*r.normal.cdf(N,0,1,1,0)-1;D>=i.exp(v/f)?D=i.pow(D,f):D=0;var M;u>C?M=w:M=A;for(var k=N,B=(x-N)/M,P=k+B,$=0,z=f-1,j=1;j<=M;j++){for(var L=0,U=.5*(P+k),G=.5*(P-k),Z=1;Z<=d;Z++){var H,W;h<Z?(H=d-Z+1,W=E[H-1]):(H=Z,W=-E[H-1]);var K=G*W,I=U+K,ee=I*I;if(ee>b)break;var Q=2*r.normal.cdf(I,0,1,1,0),ce=2*r.normal.cdf(I,u,1,1,0),ve=Q*.5-ce*.5;ve>=i.exp(m/z)&&(ve=T[H-1]*i.exp(-(.5*ee))*i.pow(ve,z),L+=ve)}L*=2*G*f/i.sqrt(2*i.PI),$+=L,k=P,P+=B}return D+=$,D<=i.exp(m/c)?0:(D=i.pow(D,c),D>=1?1:D)}function l(u,c,f){var d=.322232421088,h=.099348462606,m=-1,v=.588581570495,b=-.342242088547,x=.531103462366,C=-.204231210125,w=.10353775285,A=-453642210148e-16,E=.0038560700634,T=.8832,N=.2368,D=1.208,M=1.4142,k=120,B=.5-.5*u,P=i.sqrt(i.log(1/(B*B))),$=P+((((P*A+C)*P+b)*P+m)*P+d)/((((P*E+w)*P+x)*P+v)*P+h);f<k&&($+=($*$*$+$)/f/4);var z=T-N*$;return f<k&&(z+=-1.214/f+D*$/f),$*(z*i.log(c-1)+M)}r.extend(r.tukey,{cdf:function(c,f,d){var h=1,m=f,v=16,b=8,x=-30,C=1e-14,w=100,A=800,E=5e3,T=25e3,N=1,D=.5,M=.25,k=.125,B=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],P=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(c<=0)return 0;if(d<2||h<1||m<2)return NaN;if(!Number.isFinite(c))return 1;if(d>T)return s(c,h,m);var $=d*.5,z=$*i.log(d)-d*i.log(2)-r.gammaln($),j=$-1,L=d*.25,U;d<=w?U=N:d<=A?U=D:d<=E?U=M:U=k,z+=i.log(U);for(var G=0,Z=1;Z<=50;Z++){for(var H=0,W=(2*Z-1)*U,K=1;K<=v;K++){var I,ee;b<K?(I=K-b-1,ee=z+j*i.log(W+B[I]*U)-(B[I]*U+W)*L):(I=K-1,ee=z+j*i.log(W-B[I]*U)+(B[I]*U-W)*L);var Q;if(ee>=x){b<K?Q=c*i.sqrt((B[I]*U+W)*.5):Q=c*i.sqrt((-(B[I]*U)+W)*.5);var ce=s(Q,h,m),ve=ce*P[I]*i.exp(ee);H+=ve}}if(Z*U>=1&&H<=C)break;G+=H}if(H>C)throw new Error("tukey.cdf failed to converge");return G>1&&(G=1),G},inv:function(u,c,f){var d=1,h=c,m=1e-4,v=50;if(f<2||d<1||h<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var b=l(u,h,f),x=r.tukey.cdf(b,c,f)-u,C;x>0?C=i.max(0,b-1):C=b+1;for(var w=r.tukey.cdf(C,c,f)-u,A,E=1;E<v;E++){A=C-w*(C-b)/(w-x),x=w,b=C,A<0&&(A=0,w=-u),w=r.tukey.cdf(A,c,f)-u,C=A;var T=i.abs(C-b);if(T<m)return A}throw new Error("tukey.inv failed to converge")}})})(n,Math),(function(r,i){var o=Array.prototype.push,a=r.utils.isArray;function s(l){return a(l)||l instanceof r}r.extend({add:function(u,c){return s(c)?(s(c[0])||(c=[c]),r.map(u,function(f,d,h){return f+c[d][h]})):r.map(u,function(f){return f+c})},subtract:function(u,c){return s(c)?(s(c[0])||(c=[c]),r.map(u,function(f,d,h){return f-c[d][h]||0})):r.map(u,function(f){return f-c})},divide:function(u,c){return s(c)?(s(c[0])||(c=[c]),r.multiply(u,r.inv(c))):r.map(u,function(f){return f/c})},multiply:function(u,c){var f,d,h,m,v,b,x,C;if(u.length===void 0&&c.length===void 0)return u*c;if(v=u.length,b=u[0].length,x=r.zeros(v,h=s(c)?c[0].length:b),C=0,s(c)){for(;C<h;C++)for(f=0;f<v;f++){for(m=0,d=0;d<b;d++)m+=u[f][d]*c[d][C];x[f][C]=m}return v===1&&C===1?x[0][0]:x}return r.map(u,function(w){return w*c})},outer:function(u,c){return r.multiply(u.map(function(f){return[f]}),[c])},dot:function(u,c){s(u[0])||(u=[u]),s(c[0])||(c=[c]);for(var f=u[0].length===1&&u.length!==1?r.transpose(u):u,d=c[0].length===1&&c.length!==1?r.transpose(c):c,h=[],m=0,v=f.length,b=f[0].length,x,C;m<v;m++){for(h[m]=[],x=0,C=0;C<b;C++)x+=f[m][C]*d[m][C];h[m]=x}return h.length===1?h[0]:h},pow:function(u,c){return r.map(u,function(f){return i.pow(f,c)})},exp:function(u){return r.map(u,function(c){return i.exp(c)})},log:function(u){return r.map(u,function(c){return i.log(c)})},abs:function(u){return r.map(u,function(c){return i.abs(c)})},norm:function(u,c){var f=0,d=0;for(isNaN(c)&&(c=2),s(u[0])&&(u=u[0]);d<u.length;d++)f+=i.pow(i.abs(u[d]),c);return i.pow(f,1/c)},angle:function(u,c){return i.acos(r.dot(u,c)/(r.norm(u)*r.norm(c)))},aug:function(u,c){var f=[],d;for(d=0;d<u.length;d++)f.push(u[d].slice());for(d=0;d<f.length;d++)o.apply(f[d],c[d]);return f},inv:function(u){for(var c=u.length,f=u[0].length,d=r.identity(c,f),h=r.gauss_jordan(u,d),m=[],v=0,b;v<c;v++)for(m[v]=[],b=f;b<h[0].length;b++)m[v][b-f]=h[v][b];return m},det:function l(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var c=0,f=0;f<u.length;f++){for(var d=[],h=1;h<u.length;h++){d[h-1]=[];for(var m=0;m<u.length;m++)m<f?d[h-1][m]=u[h][m]:m>f&&(d[h-1][m-1]=u[h][m])}var v=f%2?-1:1;c+=l(d)*u[0][f]*v}return c},gauss_elimination:function(u,c){var f=0,d=0,h=u.length,m=u[0].length,v=1,b=0,x=[],C,w,A,E;for(u=r.aug(u,c),C=u[0].length,f=0;f<h;f++){for(w=u[f][f],d=f,E=f+1;E<m;E++)w<i.abs(u[E][f])&&(w=u[E][f],d=E);if(d!=f)for(E=0;E<C;E++)A=u[f][E],u[f][E]=u[d][E],u[d][E]=A;for(d=f+1;d<h;d++)for(v=u[d][f]/u[f][f],E=f;E<C;E++)u[d][E]=u[d][E]-v*u[f][E]}for(f=h-1;f>=0;f--){for(b=0,d=f+1;d<=h-1;d++)b=b+x[d]*u[f][d];x[f]=(u[f][C-1]-b)/u[f][f]}return x},gauss_jordan:function(u,c){var f=r.aug(u,c),d=f.length,h=f[0].length,m=0,v,b,x;for(b=0;b<d;b++){var C=b;for(x=b+1;x<d;x++)i.abs(f[x][b])>i.abs(f[C][b])&&(C=x);var w=f[b];for(f[b]=f[C],f[C]=w,x=b+1;x<d;x++)for(m=f[x][b]/f[b][b],v=b;v<h;v++)f[x][v]-=f[b][v]*m}for(b=d-1;b>=0;b--){for(m=f[b][b],x=0;x<b;x++)for(v=h-1;v>b-1;v--)f[x][v]-=f[b][v]*f[x][b]/m;for(f[b][b]/=m,v=d;v<h;v++)f[b][v]/=m}return f},triaUpSolve:function(u,c){var f=u[0].length,d=r.zeros(1,f)[0],h,m=!1;return c[0].length!=null&&(c=c.map(function(v){return v[0]}),m=!0),r.arange(f-1,-1,-1).forEach(function(v){h=r.arange(v+1,f).map(function(b){return d[b]*u[v][b]}),d[v]=(c[v]-r.sum(h))/u[v][v]}),m?d.map(function(v){return[v]}):d},triaLowSolve:function(u,c){var f=u[0].length,d=r.zeros(1,f)[0],h,m=!1;return c[0].length!=null&&(c=c.map(function(v){return v[0]}),m=!0),r.arange(f).forEach(function(v){h=r.arange(v).map(function(b){return u[v][b]*d[b]}),d[v]=(c[v]-r.sum(h))/u[v][v]}),m?d.map(function(v){return[v]}):d},lu:function(u){var c=u.length,f=r.identity(c),d=r.zeros(u.length,u[0].length),h;return r.arange(c).forEach(function(m){d[0][m]=u[0][m]}),r.arange(1,c).forEach(function(m){r.arange(m).forEach(function(v){h=r.arange(v).map(function(b){return f[m][b]*d[b][v]}),f[m][v]=(u[m][v]-r.sum(h))/d[v][v]}),r.arange(m,c).forEach(function(v){h=r.arange(m).map(function(b){return f[m][b]*d[b][v]}),d[m][v]=u[h.length][v]-r.sum(h)})}),[f,d]},cholesky:function(u){var c=u.length,f=r.zeros(u.length,u[0].length),d;return r.arange(c).forEach(function(h){d=r.arange(h).map(function(m){return i.pow(f[h][m],2)}),f[h][h]=i.sqrt(u[h][h]-r.sum(d)),r.arange(h+1,c).forEach(function(m){d=r.arange(h).map(function(v){return f[h][v]*f[m][v]}),f[m][h]=(u[h][m]-r.sum(d))/f[h][h]})}),f},gauss_jacobi:function(u,c,f,d){for(var h=0,m=0,v=u.length,b=[],x=[],C=[],w,A,E,T;h<v;h++)for(b[h]=[],x[h]=[],C[h]=[],m=0;m<v;m++)h>m?(b[h][m]=u[h][m],x[h][m]=C[h][m]=0):h<m?(x[h][m]=u[h][m],b[h][m]=C[h][m]=0):(C[h][m]=u[h][m],b[h][m]=x[h][m]=0);for(E=r.multiply(r.multiply(r.inv(C),r.add(b,x)),-1),A=r.multiply(r.inv(C),c),w=f,T=r.add(r.multiply(E,f),A),h=2;i.abs(r.norm(r.subtract(T,w)))>d;)w=T,T=r.add(r.multiply(E,w),A),h++;return T},gauss_seidel:function(u,c,f,d){for(var h=0,m=u.length,v=[],b=[],x=[],C,w,A,E,T;h<m;h++)for(v[h]=[],b[h]=[],x[h]=[],C=0;C<m;C++)h>C?(v[h][C]=u[h][C],b[h][C]=x[h][C]=0):h<C?(b[h][C]=u[h][C],v[h][C]=x[h][C]=0):(x[h][C]=u[h][C],v[h][C]=b[h][C]=0);for(E=r.multiply(r.multiply(r.inv(r.add(x,v)),b),-1),A=r.multiply(r.inv(r.add(x,v)),c),w=f,T=r.add(r.multiply(E,f),A),h=2;i.abs(r.norm(r.subtract(T,w)))>d;)w=T,T=r.add(r.multiply(E,w),A),h=h+1;return T},SOR:function(u,c,f,d,h){for(var m=0,v=u.length,b=[],x=[],C=[],w,A,E,T,N;m<v;m++)for(b[m]=[],x[m]=[],C[m]=[],w=0;w<v;w++)m>w?(b[m][w]=u[m][w],x[m][w]=C[m][w]=0):m<w?(x[m][w]=u[m][w],b[m][w]=C[m][w]=0):(C[m][w]=u[m][w],b[m][w]=x[m][w]=0);for(T=r.multiply(r.inv(r.add(C,r.multiply(b,h))),r.subtract(r.multiply(C,1-h),r.multiply(x,h))),E=r.multiply(r.multiply(r.inv(r.add(C,r.multiply(b,h))),c),h),A=f,N=r.add(r.multiply(T,f),E),m=2;i.abs(r.norm(r.subtract(N,A)))>d;)A=N,N=r.add(r.multiply(T,A),E),m++;return N},householder:function(u){for(var c=u.length,f=u[0].length,d=0,h=[],m=[],v,b,x,C,w;d<c-1;d++){for(v=0,C=d+1;C<f;C++)v+=u[C][d]*u[C][d];for(w=u[d+1][d]>0?-1:1,v=w*i.sqrt(v),b=i.sqrt((v*v-u[d+1][d]*v)/2),h=r.zeros(c,1),h[d+1][0]=(u[d+1][d]-v)/(2*b),x=d+2;x<c;x++)h[x][0]=u[x][d]/(2*b);m=r.subtract(r.identity(c,f),r.multiply(r.multiply(h,r.transpose(h)),2)),u=r.multiply(m,r.multiply(u,m))}return u},QR:(function(){var l=r.sum,u=r.arange;function c(f){var d=f.length,h=f[0].length,m=r.zeros(h,h);f=r.copy(f);var v,b,x;for(b=0;b<h;b++){for(m[b][b]=i.sqrt(l(u(d).map(function(C){return f[C][b]*f[C][b]}))),v=0;v<d;v++)f[v][b]=f[v][b]/m[b][b];for(x=b+1;x<h;x++)for(m[b][x]=l(u(d).map(function(C){return f[C][b]*f[C][x]})),v=0;v<d;v++)f[v][x]=f[v][x]-f[v][b]*m[b][x]}return[f,m]}return c})(),lstsq:(function(){function l(c){c=r.copy(c);var f=c.length,d=r.identity(f);return r.arange(f-1,-1,-1).forEach(function(h){r.sliceAssign(d,{row:h},r.divide(r.slice(d,{row:h}),c[h][h])),r.sliceAssign(c,{row:h},r.divide(r.slice(c,{row:h}),c[h][h])),r.arange(h).forEach(function(m){var v=r.multiply(c[m][h],-1),b=r.slice(c,{row:m}),x=r.multiply(r.slice(c,{row:h}),v);r.sliceAssign(c,{row:m},r.add(b,x));var C=r.slice(d,{row:m}),w=r.multiply(r.slice(d,{row:h}),v);r.sliceAssign(d,{row:m},r.add(C,w))})}),d}function u(c,f){var d=!1;f[0].length===void 0&&(f=f.map(function(T){return[T]}),d=!0);var h=r.QR(c),m=h[0],v=h[1],b=c[0].length,x=r.slice(m,{col:{end:b}}),C=r.slice(v,{row:{end:b}}),w=l(C),A=r.transpose(x);A[0].length===void 0&&(A=[A]);var E=r.multiply(r.multiply(w,A),f);return E.length===void 0&&(E=[[E]]),d?E.map(function(T){return T[0]}):E}return u})(),jacobi:function(u){for(var c=1,f=u.length,d=r.identity(f,f),h=[],m,v,b,x,C,w,A,E;c===1;){for(w=u[0][1],x=0,C=1,v=0;v<f;v++)for(b=0;b<f;b++)v!=b&&w<i.abs(u[v][b])&&(w=i.abs(u[v][b]),x=v,C=b);for(u[x][x]===u[C][C]?A=u[x][C]>0?i.PI/4:-i.PI/4:A=i.atan(2*u[x][C]/(u[x][x]-u[C][C]))/2,E=r.identity(f,f),E[x][x]=i.cos(A),E[x][C]=-i.sin(A),E[C][x]=i.sin(A),E[C][C]=i.cos(A),d=r.multiply(d,E),m=r.multiply(r.multiply(r.inv(E),u),E),u=m,c=0,v=1;v<f;v++)for(b=1;b<f;b++)v!=b&&i.abs(u[v][b])>.001&&(c=1)}for(v=0;v<f;v++)h.push(u[v][v]);return[d,h]},rungekutta:function(u,c,f,d,h,m){var v,b,x,C,w;if(m===2)for(;d<=f;)v=c*u(d,h),b=c*u(d+c,h+v),x=h+(v+b)/2,h=x,d=d+c;if(m===4)for(;d<=f;)v=c*u(d,h),b=c*u(d+c/2,h+v/2),C=c*u(d+c/2,h+b/2),w=c*u(d+c,h+C),x=h+(v+2*b+2*C+w)/6,h=x,d=d+c;return h},romberg:function(u,c,f,d){for(var h=0,m=(f-c)/2,v=[],b=[],x=[],C,w,A,E,T;h<d/2;){for(T=u(c),A=c,E=0;A<=f;A=A+m,E++)v[E]=A;for(C=v.length,A=1;A<C-1;A++)T+=(A%2!==0?4:2)*u(v[A]);T=m/3*(T+u(f)),x[h]=T,m/=2,h++}for(w=x.length,C=1;w!==1;){for(A=0;A<w-1;A++)b[A]=(i.pow(4,C)*x[A+1]-x[A])/(i.pow(4,C)-1);w=b.length,x=b,b=[],C++}return x},richardson:function(u,c,f,d){function h(N,D){for(var M=0,k=N.length,B;M<k;M++)N[M]===D&&(B=M);return B}for(var m=i.abs(f-u[h(u,f)+1]),v=0,b=[],x=[],C,w,A,E,T;d>=m;)C=h(u,f+d),w=h(u,f),b[v]=(c[C]-2*c[w]+c[2*w-C])/(d*d),d/=2,v++;for(E=b.length,A=1;E!=1;){for(T=0;T<E-1;T++)x[T]=(i.pow(4,A)*b[T+1]-b[T])/(i.pow(4,A)-1);E=x.length,b=x,x=[],A++}return b},simpson:function(u,c,f,d){for(var h=(f-c)/d,m=u(c),v=[],b=c,x=0,C=1,w;b<=f;b=b+h,x++)v[x]=b;for(w=v.length;C<w-1;C++)m+=(C%2!==0?4:2)*u(v[C]);return h/3*(m+u(f))},hermite:function(u,c,f,d){for(var h=u.length,m=0,v=0,b=[],x=[],C=[],w=[],A;v<h;v++){for(b[v]=1,A=0;A<h;A++)v!=A&&(b[v]*=(d-u[A])/(u[v]-u[A]));for(x[v]=0,A=0;A<h;A++)v!=A&&(x[v]+=1/(u[v]-u[A]));C[v]=(1-2*(d-u[v])*x[v])*(b[v]*b[v]),w[v]=(d-u[v])*(b[v]*b[v]),m+=C[v]*c[v]+w[v]*f[v]}return m},lagrange:function(u,c,f){for(var d=0,h=0,m,v,b=u.length;h<b;h++){for(v=c[h],m=0;m<b;m++)h!=m&&(v*=(f-u[m])/(u[h]-u[m]));d+=v}return d},cubic_spline:function(u,c,f){for(var d=u.length,h=0,m,v=[],b=[],x=[],C=[],w=[],A=[],E=[];h<d-1;h++)w[h]=u[h+1]-u[h];for(x[0]=0,h=1;h<d-1;h++)x[h]=3/w[h]*(c[h+1]-c[h])-3/w[h-1]*(c[h]-c[h-1]);for(h=1;h<d-1;h++)v[h]=[],b[h]=[],v[h][h-1]=w[h-1],v[h][h]=2*(w[h-1]+w[h]),v[h][h+1]=w[h],b[h][0]=x[h];for(C=r.multiply(r.inv(v),b),m=0;m<d-1;m++)A[m]=(c[m+1]-c[m])/w[m]-w[m]*(C[m+1][0]+2*C[m][0])/3,E[m]=(C[m+1][0]-C[m][0])/(3*w[m]);for(m=0;m<d&&!(u[m]>f);m++);return m-=1,c[m]+(f-u[m])*A[m]+r.sq(f-u[m])*C[m]+(f-u[m])*r.sq(f-u[m])*E[m]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var c=u.length,f=u[0].length,d=0,h,m,v=[],b=[],x=[],C=[],w=[],A=[],E=[],T=[],N=[],D=[];for(d=0;d<c;d++)v[d]=r.sum(u[d])/f;for(d=0;d<f;d++)for(E[d]=[],h=0;h<c;h++)E[d][h]=u[h][d]-v[h];for(E=r.transpose(E),d=0;d<c;d++)for(T[d]=[],h=0;h<c;h++)T[d][h]=r.dot([E[d]],[E[h]])/(f-1);for(x=r.jacobi(T),N=x[0],b=x[1],D=r.transpose(N),d=0;d<b.length;d++)for(h=d;h<b.length;h++)b[d]<b[h]&&(m=b[d],b[d]=b[h],b[h]=m,C=D[d],D[d]=D[h],D[h]=C);for(A=r.transpose(E),d=0;d<c;d++)for(w[d]=[],h=0;h<A.length;h++)w[d][h]=r.dot([D[d]],[A[h]]);return[u,b,D,w]}}),(function(l){for(var u=0;u<l.length;u++)(function(c){r.fn[c]=function(f,d){var h=this;return d?(setTimeout(function(){d.call(h,r.fn[c].call(h,f))},15),this):typeof r[c](this,f)=="number"?r[c](this,f):r(r[c](this,f))}})(l[u])})("add divide multiply subtract dot pow exp log abs norm angle".split(" "))})(n,Math),(function(r,i){var o=[].slice,a=r.utils.isNumber,s=r.utils.isArray;r.extend({zscore:function(){var c=o.call(arguments);return a(c[1])?(c[0]-c[1])/c[2]:(c[0]-r.mean(c[1]))/r.stdev(c[1],c[2])},ztest:function(){var c=o.call(arguments),f;return s(c[1])?(f=r.zscore(c[0],c[1],c[3]),c[2]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):c.length>2?(f=r.zscore(c[0],c[1],c[2]),c[3]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):(f=c[0],c[1]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2)}}),r.extend(r.fn,{zscore:function(c,f){return(c-this.mean())/this.stdev(f)},ztest:function(c,f,d){var h=i.abs(this.zscore(c,d));return f===1?r.normal.cdf(-h,0,1):r.normal.cdf(-h,0,1)*2}}),r.extend({tscore:function(){var c=o.call(arguments);return c.length===4?(c[0]-c[1])/(c[2]/i.sqrt(c[3])):(c[0]-r.mean(c[1]))/(r.stdev(c[1],!0)/i.sqrt(c[1].length))},ttest:function(){var c=o.call(arguments),f;return c.length===5?(f=i.abs(r.tscore(c[0],c[1],c[2],c[3])),c[4]===1?r.studentt.cdf(-f,c[3]-1):r.studentt.cdf(-f,c[3]-1)*2):a(c[1])?(f=i.abs(c[0]),c[2]==1?r.studentt.cdf(-f,c[1]-1):r.studentt.cdf(-f,c[1]-1)*2):(f=i.abs(r.tscore(c[0],c[1])),c[2]==1?r.studentt.cdf(-f,c[1].length-1):r.studentt.cdf(-f,c[1].length-1)*2)}}),r.extend(r.fn,{tscore:function(c){return(c-this.mean())/(this.stdev(!0)/i.sqrt(this.cols()))},ttest:function(c,f){return f===1?1-r.studentt.cdf(i.abs(this.tscore(c)),this.cols()-1):r.studentt.cdf(-i.abs(this.tscore(c)),this.cols()-1)*2}}),r.extend({anovafscore:function(){var c=o.call(arguments),f,d,h,m,v,b,x,C;if(c.length===1){for(v=new Array(c[0].length),x=0;x<c[0].length;x++)v[x]=c[0][x];c=v}for(d=new Array,x=0;x<c.length;x++)d=d.concat(c[x]);for(h=r.mean(d),f=0,x=0;x<c.length;x++)f=f+c[x].length*i.pow(r.mean(c[x])-h,2);for(f/=c.length-1,b=0,x=0;x<c.length;x++)for(m=r.mean(c[x]),C=0;C<c[x].length;C++)b+=i.pow(c[x][C]-m,2);return b/=d.length-c.length,f/b},anovaftest:function(){var c=o.call(arguments),f,d,h,m;if(a(c[0]))return 1-r.centralF.cdf(c[0],c[1],c[2]);var v=r.anovafscore(c);for(f=c.length-1,h=0,m=0;m<c.length;m++)h=h+c[m].length;return d=h-f-1,1-r.centralF.cdf(v,f,d)},ftest:function(c,f,d){return 1-r.centralF.cdf(c,f,d)}}),r.extend(r.fn,{anovafscore:function(){return r.anovafscore(this.toArray())},anovaftes:function(){var c=0,f;for(f=0;f<this.length;f++)c=c+this[f].length;return r.ftest(this.anovafscore(),this.length-1,c-this.length)}}),r.extend({qscore:function(){var c=o.call(arguments),f,d,h,m,v;return a(c[0])?(f=c[0],d=c[1],h=c[2],m=c[3],v=c[4]):(f=r.mean(c[0]),d=r.mean(c[1]),h=c[0].length,m=c[1].length,v=c[2]),i.abs(f-d)/(v*i.sqrt((1/h+1/m)/2))},qtest:function(){var c=o.call(arguments),f;c.length===3?(f=c[0],c=c.slice(1)):c.length===7?(f=r.qscore(c[0],c[1],c[2],c[3],c[4]),c=c.slice(5)):(f=r.qscore(c[0],c[1],c[2]),c=c.slice(3));var d=c[0],h=c[1];return 1-r.tukey.cdf(f,h,d-h)},tukeyhsd:function(c){for(var f=r.pooledstdev(c),d=c.map(function(C){return r.mean(C)}),h=c.reduce(function(C,w){return C+w.length},0),m=[],v=0;v<c.length;++v)for(var b=v+1;b<c.length;++b){var x=r.qtest(d[v],d[b],c[v].length,c[b].length,f,h,c.length);m.push([[v,b],x])}return m}}),r.extend({normalci:function(){var c=o.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.normal.inv(c[1]/2,0,1)*c[2]/i.sqrt(c[3])):d=i.abs(r.normal.inv(c[1]/2,0,1)*r.stdev(c[2])/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},tci:function(){var c=o.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.studentt.inv(c[1]/2,c[3]-1)*c[2]/i.sqrt(c[3])):d=i.abs(r.studentt.inv(c[1]/2,c[2].length-1)*r.stdev(c[2],!0)/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},significant:function(c,f){return c<f}}),r.extend(r.fn,{normalci:function(c,f){return r.normalci(c,f,this.toArray())},tci:function(c,f){return r.tci(c,f,this.toArray())}});function l(u,c,f,d){if(u>1||f>1||u<=0||f<=0)throw new Error("Proportions should be greater than 0 and less than 1");var h=(u*c+f*d)/(c+d),m=i.sqrt(h*(1-h)*(1/c+1/d));return(u-f)/m}r.extend(r.fn,{oneSidedDifferenceOfProportions:function(c,f,d,h){var m=l(c,f,d,h);return r.ztest(m,1)},twoSidedDifferenceOfProportions:function(c,f,d,h){var m=l(c,f,d,h);return r.ztest(m,2)}})})(n,Math),n.models=(function(){function r(l){var u=l[0].length,c=n.arange(u).map(function(f){var d=n.arange(u).filter(function(h){return h!==f});return i(n.col(l,f).map(function(h){return h[0]}),n.col(l,d))});return c}function i(l,u){var c=l.length,f=u[0].length-1,d=c-f-1,h=n.lstsq(u,l),m=n.multiply(u,h.map(function(E){return[E]})).map(function(E){return E[0]}),v=n.subtract(l,m),b=n.mean(l),x=n.sum(m.map(function(E){return Math.pow(E-b,2)})),C=n.sum(l.map(function(E,T){return Math.pow(E-m[T],2)})),w=x+C,A=x/w;return{exog:u,endog:l,nobs:c,df_model:f,df_resid:d,coef:h,predict:m,resid:v,ybar:b,SST:w,SSE:x,SSR:C,R2:A}}function o(l){var u=r(l.exog),c=Math.sqrt(l.SSR/l.df_resid),f=u.map(function(b){var x=b.SST,C=b.R2;return c/Math.sqrt(x*(1-C))}),d=l.coef.map(function(b,x){return(b-0)/f[x]}),h=d.map(function(b){var x=n.studentt.cdf(b,l.df_resid);return(x>.5?1-x:x)*2}),m=n.studentt.inv(.975,l.df_resid),v=l.coef.map(function(b,x){var C=m*f[x];return[b-C,b+C]});return{se:f,t:d,p:h,sigmaHat:c,interval95:v}}function a(l){var u=l.R2/l.df_model/((1-l.R2)/l.df_resid),c=function(d,h,m){return n.beta.cdf(d/(m/h+d),h/2,m/2)},f=1-c(u,l.df_model,l.df_resid);return{F_statistic:u,pvalue:f}}function s(l,u){var c=i(l,u),f=o(c),d=a(c),h=1-(1-c.R2)*((c.nobs-1)/c.df_resid);return c.t=f,c.f=d,c.adjust_R2=h,c}return{ols:s}})(),n.extend({buildxmatrix:function(){for(var i=new Array(arguments.length),o=0;o<arguments.length;o++){var a=[1];i[o]=a.concat(arguments[o])}return n(i)},builddxmatrix:function(){for(var i=new Array(arguments[0].length),o=0;o<arguments[0].length;o++){var a=[1];i[o]=a.concat(arguments[0][o])}return n(i)},buildjxmatrix:function(i){for(var o=new Array(i.length),a=0;a<i.length;a++)o[a]=i[a];return n.builddxmatrix(o)},buildymatrix:function(i){return n(i).transpose()},buildjymatrix:function(i){return i.transpose()},matrixmult:function(i,o){var a,s,l,u,c;if(i.cols()==o.rows()){if(o.rows()>1){for(u=[],a=0;a<i.rows();a++)for(u[a]=[],s=0;s<o.cols();s++){for(c=0,l=0;l<i.cols();l++)c+=i.toArray()[a][l]*o.toArray()[l][s];u[a][s]=c}return n(u)}for(u=[],a=0;a<i.rows();a++)for(u[a]=[],s=0;s<o.cols();s++){for(c=0,l=0;l<i.cols();l++)c+=i.toArray()[a][l]*o.toArray()[s];u[a][s]=c}return n(u)}},regress:function(i,o){var a=n.xtranspxinv(i),s=i.transpose(),l=n.matrixmult(n(a),s);return n.matrixmult(l,o)},regresst:function(i,o,a){var s=n.regress(i,o),l={};l.anova={};var u=n.jMatYBar(i,s);l.yBar=u;var c=o.mean();l.anova.residuals=n.residuals(o,u),l.anova.ssr=n.ssr(u,c),l.anova.msr=l.anova.ssr/(i[0].length-1),l.anova.sse=n.sse(o,u),l.anova.mse=l.anova.sse/(o.length-(i[0].length-1)-1),l.anova.sst=n.sst(o,c),l.anova.mst=l.anova.sst/(o.length-1),l.anova.r2=1-l.anova.sse/l.anova.sst,l.anova.r2<0&&(l.anova.r2=0),l.anova.fratio=l.anova.msr/l.anova.mse,l.anova.pvalue=n.anovaftest(l.anova.fratio,i[0].length-1,o.length-(i[0].length-1)-1),l.anova.rmse=Math.sqrt(l.anova.mse),l.anova.r2adj=1-l.anova.mse/l.anova.mst,l.anova.r2adj<0&&(l.anova.r2adj=0),l.stats=new Array(i[0].length);for(var f=n.xtranspxinv(i),d,h,m,v=0;v<s.length;v++)d=Math.sqrt(l.anova.mse*Math.abs(f[v][v])),h=Math.abs(s[v]/d),m=n.ttest(h,o.length-i[0].length-1,a),l.stats[v]=[s[v],d,h,m];return l.regress=s,l},xtranspx:function(i){return n.matrixmult(i.transpose(),i)},xtranspxinv:function(i){var o=n.matrixmult(i.transpose(),i),a=n.inv(o);return a},jMatYBar:function(i,o){var a=n.matrixmult(i,o);return new n(a)},residuals:function(i,o){return n.matrixsubtract(i,o)},ssr:function(i,o){for(var a=0,s=0;s<i.length;s++)a+=Math.pow(i[s]-o,2);return a},sse:function(i,o){for(var a=0,s=0;s<i.length;s++)a+=Math.pow(i[s]-o[s],2);return a},sst:function(i,o){for(var a=0,s=0;s<i.length;s++)a+=Math.pow(i[s]-o,2);return a},matrixsubtract:function(i,o){for(var a=new Array(i.length),s=0;s<i.length;s++){a[s]=new Array(i[s].length);for(var l=0;l<i[s].length;l++)a[s][l]=i[s][l]-o[s][l]}return n(a)}}),n.jStat=n,n})})(V2)),V2.exports}var SRe=CRe();const ut=Qs(SRe);var T3={},JF;function TRe(){return JF||(JF=1,(function(t){(function(e){e(typeof DO_NOT_EXPORT_BESSEL>"u"?t:{})})(function(e){e.version="1.0.2";var n=Math;function r(c,f){for(var d=0,h=0;d<c.length;++d)h=f*h+c[d];return h}function i(c,f,d,h,m){if(f===0)return d;if(f===1)return h;for(var v=2/c,b=h,x=1;x<f;++x)b=h*x*v+m*d,d=h,h=b;return b}function o(c,f,d,h,m){return function(b,x){if(h){if(b===0)return h==1?-1/0:1/0;if(b<0)return NaN}if(x===0)return c(b);if(x===1)return f(b);if(x<0)return NaN;x|=0;var C=c(b),w=f(b);return i(b,x,C,w,m)}}var a=(function(){var c=.636619772,f=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),d=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),h=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),m=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function v(E){var T=0,N=0,D=0,M=E*E;if(E<8)N=r(f,M),D=r(d,M),T=N/D;else{var k=E-.785398164;M=64/M,N=r(h,M),D=r(m,M),T=n.sqrt(c/E)*(n.cos(k)*N-n.sin(k)*D*8/E)}return T}var b=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),x=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),C=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),w=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function A(E){var T=0,N=0,D=0,M=E*E,k=n.abs(E)-2.356194491;return Math.abs(E)<8?(N=E*r(b,M),D=r(x,M),T=N/D):(M=64/M,N=r(C,M),D=r(w,M),T=n.sqrt(c/n.abs(E))*(n.cos(k)*N-n.sin(k)*D*8/n.abs(E)),E<0&&(T=-T)),T}return function E(T,N){if(N=Math.round(N),!isFinite(T))return isNaN(T)?T:0;if(N<0)return(N%2?-1:1)*E(T,-N);if(T<0)return(N%2?-1:1)*E(-T,N);if(N===0)return v(T);if(N===1)return A(T);if(T===0)return 0;var D=0;if(T>N)D=i(T,N,v(T),A(T),-1);else{for(var M=2*n.floor((N+n.floor(n.sqrt(40*N)))/2),k=!1,B=0,P=0,$=1,z=0,j=2/T,L=M;L>0;L--)z=L*j*$-B,B=$,$=z,n.abs($)>1e10&&($*=1e-10,B*=1e-10,D*=1e-10,P*=1e-10),k&&(P+=$),k=!k,L==N&&(D=B);P=2*P-$,D/=P}return D}})(),s=(function(){var c=.636619772,f=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),d=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),h=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),m=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse();function v(E){var T=0,N=0,D=0,M=E*E,k=E-.785398164;return E<8?(N=r(f,M),D=r(d,M),T=N/D+c*a(E,0)*n.log(E)):(M=64/M,N=r(h,M),D=r(m,M),T=n.sqrt(c/E)*(n.sin(k)*N+n.cos(k)*D*8/E)),T}var b=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),x=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),C=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),w=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function A(E){var T=0,N=0,D=0,M=E*E,k=E-2.356194491;return E<8?(N=E*r(b,M),D=r(x,M),T=N/D+c*(a(E,1)*n.log(E)-1/E)):(M=64/M,N=r(C,M),D=r(w,M),T=n.sqrt(c/E)*(n.sin(k)*N+n.cos(k)*D*8/E)),T}return o(v,A,"BESSELY",1,-1)})(),l=(function(){var c=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),f=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function d(b){return b<=3.75?r(c,b*b/(3.75*3.75)):n.exp(n.abs(b))/n.sqrt(n.abs(b))*r(f,3.75/n.abs(b))}var h=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),m=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function v(b){return b<3.75?b*r(h,b*b/(3.75*3.75)):(b<0?-1:1)*n.exp(n.abs(b))/n.sqrt(n.abs(b))*r(m,3.75/n.abs(b))}return function b(x,C){if(C=Math.round(C),C===0)return d(x);if(C===1)return v(x);if(C<0)return NaN;if(n.abs(x)===0)return 0;if(x==1/0)return 1/0;var w=0,A,E=2/n.abs(x),T=0,N=1,D=0,M=2*n.round((C+n.round(n.sqrt(40*C)))/2);for(A=M;A>0;A--)D=A*E*N+T,T=N,N=D,n.abs(N)>1e10&&(N*=1e-10,T*=1e-10,w*=1e-10),A==C&&(w=T);return w*=b(x,0)/N,x<0&&C%2?-w:w}})(),u=(function(){var c=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),f=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function d(b){return b<=2?-n.log(b/2)*l(b,0)+r(c,b*b/4):n.exp(-b)/n.sqrt(b)*r(f,2/b)}var h=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),m=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function v(b){return b<=2?n.log(b/2)*l(b,1)+1/b*r(h,b*b/4):n.exp(-b)/n.sqrt(b)*r(m,2/b)}return o(d,v,"BESSELK",2,1)})();e.besselj=a,e.bessely=s,e.besseli=l,e.besselk=u})})(T3)),T3}var ARe=TRe();const PC=Qs(ARe),p5=new Error("#NULL!"),Gi=new Error("#DIV/0!"),xe=new Error("#VALUE!"),Nm=new Error("#REF!"),$C=new Error("#NAME?"),ke=new Error("#NUM!"),Tt=new Error("#N/A"),m5=new Error("#ERROR!"),BQ=new Error("#GETTING_DATA");var NRe=Object.freeze({__proto__:null,data:BQ,div0:Gi,error:m5,na:Tt,name:$C,nil:p5,num:ke,ref:Nm,value:xe});let nc=!1;function DRe(){nc=!0}function MRe(){nc=!1}function LQ(t){t<60&&(t+=1);const n=Math.floor(t-25569)*86400,r=new Date(n*1e3),i=t-Math.floor(t)+1e-7;let o=Math.floor(86400*i);const a=o%60;o-=a;const s=Math.floor(o/3600),l=Math.floor(o/60)%60;let u=r.getUTCDate(),c=r.getUTCMonth();return t>=60&&t<61&&(u=29,c=1),new Date(r.getUTCFullYear(),c,u,s,l,a)}function ju(t){const e=new Date(1900,0,1),n=t>-22038912e5?2:1;return Math.ceil((t-e)/864e5)+n}var kRe=Object.freeze({__proto__:null,dateToSerial:ju,get returnSerial(){return nc},serialToDate:LQ,useDate:MRe,useSerial:DRe});const _Re="=",ORe=[">",">=","<","<=","=","<>"],FQ="operator",PQ="literal",IRe=[FQ,PQ],q2=FQ,zf=PQ;function Fu(t,e){if(IRe.indexOf(e)===-1)throw new Error("Unsupported token type: "+e);return{value:t,type:e}}function RRe(t){return typeof t!="string"||/^\d+(\.\d+)?$/.test(t)&&(t=t.indexOf(".")===-1?parseInt(t,10):parseFloat(t)),t}function BRe(t){const e=t.length,n=[];let r=0,i="",o="";for(;r<e;){const a=t.charAt(r);switch(a){case">":case"<":case"=":o=o+a,i.length>0&&(n.push(i),i="");break;default:o.length>0&&(n.push(o),o=""),i=i+a;break}r++}return i.length>0&&n.push(i),o.length>0&&n.push(o),n}function LRe(t){let e="";const n=[];for(let r=0;r<t.length;r++){const i=t[r];r===0&&ORe.indexOf(i)>=0?n.push(Fu(i,q2)):e+=i}return e.length>0&&n.push(Fu(RRe(e),zf)),n.length>0&&n[0].type!==q2&&n.unshift(Fu(_Re,q2)),n}function FRe(t){const e=[];let n;for(let r=0;r<t.length;r++){const i=t[r];switch(i.type){case q2:n=i.value;break;case zf:e.push(i.value);break}}return PRe(e,n)}function PRe(t,e){let n=!1;switch(e){case">":n=t[0]>t[1];break;case">=":n=t[0]>=t[1];break;case"<":n=t[0]<t[1];break;case"<=":n=t[0]<=t[1];break;case"=":n=t[0]==t[1];break;case"<>":n=t[0]!=t[1];break}return n}function o0(t){return LRe(BRe(t))}const a0=FRe;function zC(t){const e=[];return oo(t,n=>{e.push(n)}),e}function oo(t,e){let n=-1;const r=t.length;for(;++n<r&&e(t[n],n,t)!==!1;);return t}function g5(t){let e=t.length,n;for(;e--;)if(n=t[e],typeof n!="number"){if(n===!0){t[e]=1;continue}if(n===!1){t[e]=0;continue}if(typeof n=="string"){const r=oe(n);t[e]=r instanceof Error?0:r}}return t}function $Q(t,e){if(!t)return xe;(!t.every(i=>Array.isArray(i))||t.length===0)&&(t=[[...t]]),t.map((i,o)=>{i.map((a,s)=>{a||(t[o][s]=0)})});const n=t.reduce((i,o,a)=>o.length>t[i].length?a:i,0),r=t[n].length;return t.map(i=>[...i,...Array(r-i.length).fill(0)])}function Ye(){let t;if(arguments.length===1){const e=arguments[0];t=zRe(e)?zC.apply(null,arguments):[e]}else t=Array.from(arguments);for(;!URe(t);)t=R4(t);return t}function R4(t){return!t||!t.reduce?[t]:t.reduce((e,n)=>{const r=Array.isArray(e),i=Array.isArray(n);return r&&i?e.concat(n):r?(e.push(n),e):i?[e].concat(n):[e,n]})}function $Re(t,e){return e=e||1,!t||typeof t.slice!="function"?t:t.slice(0,t.length-e)}function zRe(t){return t!=null&&typeof t.length=="number"&&typeof t!="string"}function URe(t){if(!t)return!1;for(let e=0;e<t.length;++e)if(Array.isArray(t[e]))return!1;return!0}function Nr(t,e){return e=e||1,!t||typeof t.slice!="function"?t:t.slice(e)}function Bw(t){return t?t[0].map((e,n)=>t.map(r=>r[n])):xe}function ws(t,e){let n=null;return oo(t,(r,i)=>{if(r[0]===e)return n=i,!1}),n??xe}function Jt(){for(let t=0;t<arguments.length;t++)if(arguments[t]instanceof Error)return arguments[t]}function ze(){let t=arguments.length;for(;t--;)if(arguments[t]instanceof Error)return!0;return!1}function zQ(t){return Math.round(t*1e14)/1e14}function rc(){return Ye.apply(null,arguments).filter(e=>typeof e=="number")}function v5(t){if(typeof t=="boolean"||t instanceof Error)return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){const e=t.toUpperCase();if(e==="TRUE")return!0;if(e==="FALSE")return!1}return t instanceof Date&&!isNaN(t)?!0:xe}function cn(t){if(!isNaN(t)){if(t instanceof Date)return new Date(t);const e=parseFloat(t);return e<0||e>=2958466?ke:LQ(e)}return typeof t=="string"&&(t=/(\d{4})-(\d\d?)-(\d\d?)$/.test(t)?new Date(t+"T00:00:00.000"):new Date(t),!isNaN(t))?t:xe}function UQ(t){let e=t.length,n;for(;e--;){if(n=cn(t[e]),n===xe)return n;t[e]=n}return t}function oe(t){return t instanceof Error?t:t==null?0:(typeof t=="boolean"&&(t=+t),!isNaN(t)&&t!==""?parseFloat(t):xe)}function ft(t){let e;if(!t||(e=t.length)===0)return xe;let n;for(;e--;){if(t[e]instanceof Error)return t[e];if(n=oe(t[e]),n instanceof Error)return n;t[e]=n}return t}function zr(t){return t instanceof Error?t:t==null?"":t.toString()}function UC(){let t=arguments.length;for(;t--;)if(typeof arguments[t]=="string")return!0;return!1}function HC(){const t=zC(arguments),e=ft(Ye(t.shift()));if(e instanceof Error)return e;const n=t,r=n.length/2;for(let o=0;o<r;o++)n[o*2]=Ye(n[o*2]);let i=[];for(let o=0;o<e.length;o++){let a=!1;for(let s=0;s<r;s++){const l=n[s*2][o],u=n[s*2+1],c=u===void 0||u==="*";let f=!1;if(c)f=!0;else{const d=o0(u+""),h=[Fu(l,zf)].concat(d);f=a0(h)}if(!f){a=!1;break}a=!0}a&&i.push(e[o])}return i}function Eh(t){return t!=null}const HQ={};HQ.TYPE=t=>{switch(t){case p5:return 1;case Gi:return 2;case xe:return 3;case Nm:return 4;case $C:return 5;case ke:return 6;case Tt:return 7;case BQ:return 8}return Tt};function HRe(t){return t===null}function VQ(t){return[xe,Nm,Gi,ke,$C,p5].indexOf(t)>=0||typeof t=="number"&&(isNaN(t)||!isFinite(t))}function VC(t){return VQ(t)||t===Tt}function VRe(t){return!(Math.floor(Math.abs(t))&1)}function qQ(t){return t===!0||t===!1}function qRe(t){return t===Tt}function jRe(t){return typeof t!="string"}function qC(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function GRe(t){return!!(Math.floor(Math.abs(t))&1)}function jQ(t){return typeof t=="string"}function YRe(t){return qC(t)?t:t instanceof Date?t.getTime():t===!0?1:t===!1?0:VC(t)?t:0}function WRe(){return Tt}function KRe(t){if(qC(t))return 1;if(jQ(t))return 2;if(qQ(t))return 4;if(VC(t))return 16;if(Array.isArray(t))return 64}function XRe(){if(arguments.length<2)return Tt;const t=arguments[0];return t<1||t>254||arguments.length<t+1?xe:arguments[t]}function ZRe(t,e){if(arguments.length!==2)return Tt;if(e<0)return ke;if(!(t instanceof Array)||typeof e!="number")return xe;if(t.length!==0)return ut.col(t,e)}function QRe(t){return arguments.length!==1?Tt:t instanceof Array?t.length===0?0:ut.cols(t):xe}function JRe(t,e,n,r){return GQ(t,Bw(e),n,r)}function e9e(t,e,n){const r=Jt(t,e,n);if(r)return r;if(!Array.isArray(t))return xe;const i=t.length>0&&!Array.isArray(t[0]);return i&&!n?(n=e,e=1):(n=n||1,e=e||1),n<0||e<0?xe:i&&e===1&&n<=t.length?t[n-1]:e<=t.length&&n<=t[e-1].length?t[e-1][n-1]:Nm}function t9e(t,e,n){e=Ye(e),n=n?Ye(n):e;const r=typeof t=="number";let i=Tt;for(let o=0;o<e.length;o++){if(e[o]===t)return n[o];if(r&&e[o]<=t||typeof e[o]=="string"&&e[o].localeCompare(t)<0)i=n[o];else if(r&&e[o]>t)return i}return i}function n9e(t,e,n){if(!t&&t!==0||!e||(arguments.length===2&&(n=1),e=Ye(e),!(e instanceof Array))||n!==-1&&n!==0&&n!==1)return Tt;let r,i;for(let o=0;o<e.length;o++)if(n===1){if(e[o]===t)return o+1;e[o]<t&&(i?e[o]>i&&(r=o+1,i=e[o]):(r=o+1,i=e[o]))}else if(n===0){if(typeof t=="string"&&typeof e[o]=="string"){const a=t.toLowerCase().replace(/\?/g,".").replace(/\*/g,".*").replace(/~/g,"\\").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]");if(new RegExp("^"+a+"$").test(e[o].toLowerCase()))return o+1}else if(e[o]===t)return o+1}else if(n===-1){if(e[o]===t)return o+1;e[o]>t&&(i?e[o]<i&&(r=o+1,i=e[o]):(r=o+1,i=e[o]))}return r||Tt}function r9e(t){return arguments.length!==1?Tt:t instanceof Array?t.length===0?0:ut.rows(t):xe}function i9e(t,e=1,n=1,r=!1){if(!t||!Array.isArray(t))return Tt;if(t.length===0)return 0;if(e=oe(e),!e||e<1||(n=oe(n),n!==1&&n!==-1))return xe;if(r=v5(r),typeof r!="boolean")return $C;const i=s=>s.sort((l,u)=>(l=zr(l[e-1]),u=zr(u[e-1]),n===1?l<u?n*-1:n:l>u?n:n*-1)),o=$Q(t),a=r?Bw(o):o;return e>=1&&e<=a[0].length?r?Bw(i(a)):i(a):xe}function o9e(t){if(!t)return Tt;const e=$Q(t);return Bw(e)}function b5(){const t=[];for(let e=0;e<arguments.length;++e){let n=!1;const r=arguments[e];for(let i=0;i<t.length&&(n=t[i]===r,!n);++i);n||t.push(r)}return t}function GQ(t,e,n,r){if(!e||!n)return Tt;r=!(r===0||r===!1);let i=Tt,o=!1;const a=typeof t=="number",s=typeof t=="string"?t.toLowerCase():t;for(let l=0;l<e.length;l++){const u=e[l],c=typeof u[0]=="string"?u[0].toLowerCase():u[0];if(c===s){i=n<u.length+1?u[n-1]:Nm;break}else!o&&(a&&r&&c<=t||r&&typeof c=="string"&&c.localeCompare(t)<0)&&(i=n<u.length+1?u[n-1]:Nm);a&&c>t&&(o=!0)}return i}function YQ(t){return t=oe(t),t===0?xe:t instanceof Error?t:String.fromCharCode(t)}function a9e(t){if(ze(t))return t;t=t||"";const e=/[\0-\x1F]/g;return t.replace(e,"")}function WQ(t){if(ze(t))return t;t=t||"";let e=t.charCodeAt(0);return isNaN(e)&&(e=xe),e}function KQ(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;let n=0;for(;(n=t.indexOf(!0))>-1;)t[n]="TRUE";let r=0;for(;(r=t.indexOf(!1))>-1;)t[r]="FALSE";return t.join("")}const s9e=KQ;function l9e(t,e=2){if(t=oe(t),isNaN(t))return xe;t=sJ(t,e);const n={style:"currency",currency:"USD",minimumFractionDigits:e>=0?e:0,maximumFractionDigits:e>=0?e:0},r=t.toLocaleString("en-US",n);return t<0?"$("+r.slice(2)+")":r}function u9e(t,e){if(arguments.length!==2)return Tt;const n=Jt(t,e);return n||(t=zr(t),e=zr(e),t===e)}function c9e(t,e,n){if(arguments.length<2)return Tt;t=zr(t),e=zr(e),n=n===void 0?0:n;const r=e.indexOf(t,n-1);return r===-1?xe:r+1}function XQ(t,e=2,n=!1){if(t=oe(t),isNaN(t)||(e=oe(e),isNaN(e)))return xe;if(e<0){const r=Math.pow(10,-e);t=Math.round(t/r)*r}else t=t.toFixed(e);if(n)t=t.toString().replace(/,/g,"");else{const r=t.toString().split(".");r[0]=r[0].replace(/\B(?=(\d{3})+$)/g,","),t=r.join(".")}return t}function f9e(t,e){const n=Jt(t,e);return n||(t=zr(t),e=e===void 0?1:e,e=oe(e),e instanceof Error||typeof t!="string"?xe:t.substring(0,e))}function d9e(t){return arguments.length===0?m5:t instanceof Error?t:Array.isArray(t)?xe:zr(t).length}function h9e(t){return arguments.length!==1?xe:(t=zr(t),ze(t)?t:t.toLowerCase())}function p9e(t,e,n){if(e==null)return xe;if(e=oe(e),n=oe(n),ze(e,n)||typeof t!="string")return n;const r=e-1,i=r+n;return t.substring(r,i)}function m9e(t,e,n){return t=Eh(t)?t:"",typeof t=="number"?t:typeof t!="string"?Tt:(e=typeof e>"u"?".":e,n=typeof n>"u"?",":n,Number(t.replace(e,".").replace(n,"")))}function g9e(t){return ze(t)?t:isNaN(t)&&typeof t=="number"?xe:(t=zr(t),t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()))}function v9e(t,e,n,r){return e=oe(e),n=oe(n),ze(e,n)||typeof t!="string"||typeof r!="string"?xe:t.substr(0,e-1)+r+t.substr(e-1+n)}function _a(t,e){const n=Jt(t,e);return n||(t=zr(t),e=oe(e),e instanceof Error?e:new Array(e+1).join(t))}function b9e(t,e){const n=Jt(t,e);return n||(t=zr(t),e=e===void 0?1:e,e=oe(e),e instanceof Error?e:t.substring(t.length-e))}function y9e(t,e,n){let r;return typeof t!="string"||typeof e!="string"?xe:(n=n===void 0?0:n,r=e.toLowerCase().indexOf(t.toLowerCase(),n-1)+1,r===0?xe:r)}function x9e(t,e,n,r){if(arguments.length<3)return Tt;if(!t||!e)return t;if(r===void 0)return t.split(e).join(n);{if(r=Math.floor(Number(r)),Number.isNaN(r)||r<=0)return xe;let i=0,o=0;for(;i>-1&&t.indexOf(e,i)>-1;)if(i=t.indexOf(e,i+1),o++,i>-1&&o===r)return t.substring(0,i)+n+t.substring(i+e.length);return t}}function ra(t){return t instanceof Error||typeof t=="string"?t:""}function w9e(t,e){if(t===void 0||t instanceof Error||e instanceof Error)return Tt;if(t instanceof Date)return t.toISOString().slice(0,10);if(e==null)return"";if(typeof e=="number")return String(e);if(typeof e!="string")return xe;const n=e.startsWith("$")?"$":"",r=e.endsWith("%");e=e.replace(/%/g,"").replace(/\$/g,"");const i=e.includes(".")?e.split(".")[1].match(/0/g).length:0,o=!e.includes(",");return r&&(t=t*100),t=XQ(t,i,o),t.startsWith("-")?(t=t.replace("-",""),t="-"+n+t):t=n+t,r&&(t=t+"%"),t}function E9e(t,e,...n){if(typeof e!="boolean"&&(e=v5(e)),arguments.length<3)return Tt;t=t??"";let r=Ye(n),i=e?r.filter(o=>o):r;if(Array.isArray(t)){t=Ye(t);let o=i.map(s=>[s]),a=0;for(let s=0;s<o.length-1;s++)o[s].push(t[a]),a++,a===t.length&&(a=0);return i=Ye(o),i.join("")}return i.join(t)}function C9e(t){return t=zr(t),t instanceof Error?t:t.replace(/\s+/g," ").trim()}const S9e=YQ,T9e=WQ;function A9e(t){return t=zr(t),t instanceof Error?t:t.toUpperCase()}function N9e(t){const e=Jt(t);if(e)return e;if(typeof t=="number")return t;if(Eh(t)||(t=""),typeof t!="string")return xe;const n=/(%)$/.test(t)||/^(%)/.test(t);if(t=t.replace(/^[^0-9-]{0,3}/,""),t=t.replace(/[^0-9]{0,3}$/,""),t=t.replace(/[ ,]/g,""),t==="")return 0;let r=Number(t);return isNaN(r)?xe:(r=r||0,n&&(r=r*.01),r)}const D9e=2.5066282746310002;function M9e(){const e=Ye(arguments).filter(Eh);if(e.length===0)return ke;const n=ft(e);return n instanceof Error?n:ut.sum(ut(n).subtract(ut.mean(n)).abs()[0])/n.length}function ah(){const e=Ye(arguments).filter(Eh);if(e.length===0)return Gi;const n=Jt.apply(void 0,e);if(n)return n;const r=rc(e),i=r.length;let o=0,a=0,s;for(let l=0;l<i;l++)o+=r[l],a+=1;return s=o/a,isNaN(s)&&(s=ke),s}function y5(){const e=Ye(arguments).filter(Eh);if(e.length===0)return Gi;const n=Jt.apply(void 0,e);if(n)return n;const r=e,i=r.length;let o=0,a=0,s;for(let l=0;l<i;l++){const u=r[l];typeof u=="number"&&(o+=u),u===!0&&o++,u!==null&&a++}return s=o/a,isNaN(s)&&(s=ke),s}function k9e(t,e,n){if(arguments.length<=1)return Tt;n=n||t;const i=Ye(n).filter(Eh);if(n=ft(i),t=Ye(t),n instanceof Error)return n;let o=0,a=0;const s=e===void 0||e==="*",l=s?null:o0(e+"");for(let u=0;u<t.length;u++){const c=t[u];if(s)a+=n[u],o++;else{const f=[Fu(c,zf)].concat(l);a0(f)&&(a+=n[u],o++)}}return a/o}function _9e(){const t=HC(...arguments),n=t.reduce((r,i)=>r+i,0)/t.length;return isNaN(n)?0:n}const Av={};Av.DIST=function(t,e,n,r,i,o){return arguments.length<4||(i=i===void 0?0:i,o=o===void 0?1:o,t=oe(t),e=oe(e),n=oe(n),i=oe(i),o=oe(o),ze(t,e,n,i,o))?xe:(t=(t-i)/(o-i),r?ut.beta.cdf(t,e,n):ut.beta.pdf(t,e,n))};Av.INV=(t,e,n,r,i)=>(r=r===void 0?0:r,i=i===void 0?1:i,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i)?xe:ut.beta.inv(t,e,n)*(i-r)+r);const s0={};s0.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),r=oe(r),ze(t,e,n,r)?xe:r?ut.binomial.cdf(t,e,n):ut.binomial.pdf(t,e,n));s0.DIST.RANGE=(t,e,n,r)=>{if(r=r===void 0?n:r,t=oe(t),e=oe(e),n=oe(n),r=oe(r),ze(t,e,n,r))return xe;let i=0;for(let o=n;o<=r;o++)i+=tm(t,o)*Math.pow(e,o)*Math.pow(1-e,t-o);return i};s0.INV=(t,e,n)=>{if(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n))return xe;let r=0;for(;r<=t;){if(ut.binomial.cdf(r,t,e)>=n)return r;r++}};const ll={};ll.DIST=(t,e,n)=>(t=oe(t),e=oe(e),ze(t,e)?xe:n?ut.chisquare.cdf(t,e):ut.chisquare.pdf(t,e));ll.DIST.RT=(t,e)=>!t|!e?Tt:t<1||e>Math.pow(10,10)?ke:typeof t!="number"||typeof e!="number"?xe:1-ut.chisquare.cdf(t,e);ll.INV=(t,e)=>(t=oe(t),e=oe(e),ze(t,e)?xe:ut.chisquare.inv(t,e));ll.INV.RT=(t,e)=>!t|!e?Tt:t<0||t>1||e<1||e>Math.pow(10,10)?ke:typeof t!="number"||typeof e!="number"?xe:ut.chisquare.inv(1-t,e);ll.TEST=function(t,e){if(arguments.length!==2)return Tt;if(!(t instanceof Array)||!(e instanceof Array)||t.length!==e.length||t[0]&&e[0]&&t[0].length!==e[0].length)return xe;const n=t.length;let r,i,o;for(i=0;i<n;i++)t[i]instanceof Array||(r=t[i],t[i]=[],t[i].push(r)),e[i]instanceof Array||(r=e[i],e[i]=[],e[i].push(r));const a=t[0].length,s=a===1?n-1:(n-1)*(a-1);let l=0;const u=Math.PI;for(i=0;i<n;i++)for(o=0;o<a;o++)l+=Math.pow(t[i][o]-e[i][o],2)/e[i][o];function c(f,d){let h=Math.exp(-.5*f);d%2===1&&(h=h*Math.sqrt(2*f/u));let m=d;for(;m>=2;)h=h*f/m,m=m-2;let v=h,b=d;for(;v>1e-10*h;)b=b+2,v=v*f/b,h=h+v;return 1-h}return Math.round(c(l,s)*1e6)/1e6};const x5={};x5.NORM=(t,e,n)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:ut.normalci(1,t,e,n)[1]-1);x5.T=(t,e,n)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:ut.tci(1,t,e,n)[1]-1);function O9e(t,e){return t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e)?xe:ut.corrcoeff(t,e)}function j1(){const t=Ye(arguments);return rc(t).length}function G1(){const t=Ye(arguments);return t.length-ZQ(t)}function ZQ(){const t=Ye(arguments);let e=0,n;for(let r=0;r<t.length;r++)n=t[r],(n==null||n==="")&&e++;return e}function I9e(t,e){if(t=Ye(t),e===void 0||e==="*")return t.length;let r=0;const i=o0(e+"");for(let o=0;o<t.length;o++){const a=t[o],s=[Fu(a,zf)].concat(i);a0(s)&&r++}return r}function R9e(){const t=zC(arguments),e=new Array(Ye(t[0]).length);for(let r=0;r<e.length;r++)e[r]=!0;for(let r=0;r<t.length;r+=2){const i=Ye(t[r]),o=t[r+1];if(!(o===void 0||o==="*")){const s=o0(o+"");for(let l=0;l<i.length;l++){const u=i[l],c=[Fu(u,zf)].concat(s);e[l]=e[l]&&a0(c)}}}let n=0;for(let r=0;r<e.length;r++)e[r]&&n++;return n}const l0={};l0.P=(t,e)=>{if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=ut.mean(t),r=ut.mean(e);let i=0;const o=t.length;for(let a=0;a<o;a++)i+=(t[a]-n)*(e[a]-r);return i/o};l0.S=(t,e)=>(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e)?xe:ut.covariance(t,e));function B9e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=ut.mean(t);let n=0;for(let r=0;r<t.length;r++)n+=Math.pow(t[r]-e,2);return n}const w5={};w5.DIST=(t,e,n)=>(t=oe(t),e=oe(e),ze(t,e)?xe:n?ut.exponential.cdf(t,e):ut.exponential.pdf(t,e));const ul={};ul.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:r?ut.centralF.cdf(t,e,n):ut.centralF.pdf(t,e,n));ul.DIST.RT=function(t,e,n){return arguments.length!==3?Tt:t<0||e<1||n<1?ke:typeof t!="number"||typeof e!="number"||typeof n!="number"?xe:1-ut.centralF.cdf(t,e,n)};ul.INV=(t,e,n)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:t<=0||t>1?ke:ut.centralF.inv(t,e,n));ul.INV.RT=function(t,e,n){return arguments.length!==3?Tt:t<0||t>1||e<1||e>Math.pow(10,10)||n<1||n>Math.pow(10,10)?ke:typeof t!="number"||typeof e!="number"||typeof n!="number"?xe:ut.centralF.inv(1-t,e,n)};ul.TEST=(t,e)=>{if(!t||!e||!(t instanceof Array)||!(e instanceof Array))return Tt;if(t.length<2||e.length<2)return Gi;const n=(s,l)=>{let u=0;for(let c=0;c<s.length;c++)u+=Math.pow(s[c]-l,2);return u},r=Yu(t)/t.length,i=Yu(e)/e.length,o=n(t,r)/(t.length-1),a=n(e,i)/(e.length-1);return o/a};function L9e(t){return t=oe(t),t instanceof Error?t:Math.log((1+t)/(1-t))/2}function F9e(t){if(t=oe(t),t instanceof Error)return t;const e=Math.exp(2*t);return(e-1)/(e+1)}function QQ(t,e,n){if(t=oe(t),e=ft(Ye(e)),n=ft(Ye(n)),ze(t,e,n))return xe;const r=ut.mean(n),i=ut.mean(e),o=n.length;let a=0,s=0;for(let c=0;c<o;c++)a+=(n[c]-r)*(e[c]-i),s+=Math.pow(n[c]-r,2);const l=a/s;return i-l*r+l*t}function P9e(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=t.length,r=e.length,i=[];for(let o=0;o<=r;o++){i[o]=0;for(let a=0;a<n;a++)o===0?t[a]<=e[0]&&(i[0]+=1):o<r?t[a]>e[o-1]&&t[a]<=e[o]&&(i[o]+=1):o===r&&t[a]>e[r-1]&&(i[r]+=1)}return i}function Nv(t){return t=oe(t),t instanceof Error?t:t===0||parseInt(t,10)===t&&t<0?ke:ut.gammafn(t)}Nv.DIST=function(t,e,n,r){return arguments.length!==4?Tt:t<0||e<=0||n<=0||typeof t!="number"||typeof e!="number"||typeof n!="number"?xe:r?ut.gamma.cdf(t,e,n,!0):ut.gamma.pdf(t,e,n,!1)};Nv.INV=function(t,e,n){return arguments.length!==3?Tt:t<0||t>1||e<=0||n<=0?ke:typeof t!="number"||typeof e!="number"||typeof n!="number"?xe:ut.gamma.inv(t,e,n)};function E5(t){return t=oe(t),t instanceof Error?t:ut.gammaln(t)}E5.PRECISE=function(t){return arguments.length!==1?Tt:t<=0?ke:typeof t!="number"?xe:ut.gammaln(t)};function $9e(t){return t=oe(t),t instanceof Error?t:ut.normal.cdf(t,0,1)-.5}function z9e(){const t=ft(Ye(arguments));return t instanceof Error?t:ut.geomean(t)}function U9e(t,e,n,r){if(t=ft(Ye(t)),t instanceof Error)return t;let i;if(e===void 0)for(e=[],i=1;i<=t.length;i++)e.push(i);if(n===void 0&&(n=e),e=ft(Ye(e)),n=ft(Ye(n)),ze(e,n))return xe;r===void 0&&(r=!0);const o=t.length;let a=0,s=0,l=0,u=0;for(i=0;i<o;i++){const h=e[i],m=Math.log(t[i]);a+=h,s+=m,l+=h*m,u+=h*h}a/=o,s/=o,l/=o,u/=o;let c,f;r?(c=(l-a*s)/(u-a*a),f=s-c*a):(c=l/u,f=0);const d=[];for(i=0;i<n.length;i++)d.push(Math.exp(f+c*n[i]));return d}function H9e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=t.length;let n=0;for(let r=0;r<e;r++)n+=1/t[r];return e/n}const C5={};C5.DIST=(t,e,n,r,i)=>{if(t=oe(t),e=oe(e),n=oe(n),r=oe(r),ze(t,e,n,r))return xe;function o(s,l,u,c){return tm(u,s)*tm(c-u,l-s)/tm(c,l)}function a(s,l,u,c){let f=0;for(let d=0;d<=s;d++)f+=o(d,l,u,c);return f}return i?a(t,e,n,r):o(t,e,n,r)};function V9e(t,e){return t=ft(t),e=ft(e),ze(t,e)?xe:t.length!==e.length?Tt:QQ(0,t,e)}function q9e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=ut.mean(t),n=t.length;let r=0;for(let i=0;i<n;i++)r+=Math.pow(t[i]-e,4);return r=r/Math.pow(ut.stdev(t,!0),4),n*(n+1)/((n-1)*(n-2)*(n-3))*r-3*(n-1)*(n-1)/((n-2)*(n-3))}function JQ(t,e){const n=Jt.apply(void 0,t);return n||(ze(e)?e:(t=rc(Ye(t)),e=oe(e),e<0||t.length<e?xe:t.sort((r,i)=>i-r)[e-1]))}function S5(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=ut.mean(t),r=ut.mean(e),i=e.length;let o=0,a=0;for(let u=0;u<i;u++)o+=(e[u]-r)*(t[u]-n),a+=Math.pow(e[u]-r,2);const s=o/a,l=n-s*r;return[s,l]}function j9e(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e)||t.length!==e.length)return xe;for(let r=0;r<t.length;r++)t[r]=Math.log(t[r]);const n=S5(t,e);return n[0]=Math.round(Math.exp(n[0])*1e6)/1e6,n[1]=Math.round(Math.exp(n[1])*1e6)/1e6,n}const u0={};u0.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:r?ut.lognormal.cdf(t,e,n):ut.lognormal.pdf(t,e,n));u0.INV=(t,e,n)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:ut.lognormal.inv(t,e,n));function Lw(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;const n=rc(t);return n.length===0?0:Math.max.apply(Math,n)}function G9e(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;let n=g5(t);return n=n.map(r=>r??0),n.length===0?0:Math.max.apply(Math,n)}function Y9e(){const t=HC(...arguments);return t.length===0?0:Math.max.apply(Math,t)}function eJ(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;const n=g5(t);let r=ut.median(n);return isNaN(r)&&(r=ke),r}function Fw(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;const n=rc(t);return n.length===0?0:Math.min.apply(Math,n)}function W9e(){const t=Ye(arguments),e=Jt.apply(void 0,t);if(e)return e;let n=g5(t);return n=n.map(r=>r??0),n.length===0?0:Math.min.apply(Math,n)}function K9e(){const t=HC(...arguments);return t.length===0?0:Math.min.apply(Math,t)}const sh={};sh.MULT=function(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=t.length,n={};let r=[],i=0,o;for(let a=0;a<e;a++)o=t[a],n[o]=n[o]?n[o]+1:1,n[o]>i&&(i=n[o],r=[]),n[o]===i&&(r[r.length]=o);return r};sh.SNGL=function(){const t=ft(Ye(arguments));return t instanceof Error?t:sh.MULT(t).sort((e,n)=>e-n)[0]};const T5={};T5.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:r?ut.negbin.cdf(t,e,n):ut.negbin.pdf(t,e,n));const cl={};cl.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:n<=0?ke:r?ut.normal.cdf(t,e,n):ut.normal.pdf(t,e,n));cl.INV=(t,e,n)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:ut.normal.inv(t,e,n));cl.S={};cl.S.DIST=(t,e)=>(t=oe(t),t instanceof Error?xe:e?ut.normal.cdf(t,0,1):ut.normal.pdf(t,0,1));cl.S.INV=t=>(t=oe(t),t instanceof Error?xe:ut.normal.inv(t,0,1));function tJ(t,e){if(e=ft(Ye(e)),t=ft(Ye(t)),ze(e,t))return xe;const n=ut.mean(t),r=ut.mean(e),i=t.length;let o=0,a=0,s=0;for(let l=0;l<i;l++)o+=(t[l]-n)*(e[l]-r),a+=Math.pow(t[l]-n,2),s+=Math.pow(e[l]-r,2);return o/Math.sqrt(a*s)}const Ta={};Ta.EXC=(t,e)=>{if(t=ft(Ye(t)),e=oe(e),ze(t,e))return xe;t=t.sort((o,a)=>o-a);const n=t.length;if(e<1/(n+1)||e>1-1/(n+1))return ke;const r=e*(n+1)-1,i=Math.floor(r);return zQ(r===i?t[r]:t[i]+(r-i)*(t[i+1]-t[i]))};Ta.INC=(t,e)=>{if(t=ft(Ye(t)),e=oe(e),ze(t,e))return xe;t=t.sort((o,a)=>o-a);const n=t.length,r=e*(n-1),i=Math.floor(r);return zQ(r===i?t[r]:t[i]+(r-i)*(t[i+1]-t[i]))};const Dv={};Dv.EXC=(t,e,n)=>{if(n=n===void 0?3:n,t=ft(Ye(t)),e=oe(e),n=oe(n),ze(t,e,n))return xe;t=t.sort((c,f)=>c-f);const r=b5.apply(null,t),i=t.length,o=r.length,a=Math.pow(10,n);let s=0,l=!1,u=0;for(;!l&&u<o;)e===r[u]?(s=(t.indexOf(r[u])+1)/(i+1),l=!0):e>=r[u]&&(e<r[u+1]||u===o-1)&&(s=(t.indexOf(r[u])+1+(e-r[u])/(r[u+1]-r[u]))/(i+1),l=!0),u++;return Math.floor(s*a)/a};Dv.INC=(t,e,n)=>{if(n=n===void 0?3:n,t=ft(Ye(t)),e=oe(e),n=oe(n),ze(t,e,n))return xe;t=t.sort((c,f)=>c-f);const r=b5.apply(null,t),i=t.length,o=r.length,a=Math.pow(10,n);let s=0,l=!1,u=0;for(;!l&&u<o;)e===r[u]?(s=t.indexOf(r[u])/(i-1),l=!0):e>=r[u]&&(e<r[u+1]||u===o-1)&&(s=(t.indexOf(r[u])+(e-r[u])/(r[u+1]-r[u]))/(i-1),l=!0),u++;return Math.floor(s*a)/a};function X9e(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:Pu(t)/Pu(t-e)}function Z9e(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:Math.pow(t,e)}function Q9e(t){return t=oe(t),t instanceof Error?xe:Math.exp(-.5*t*t)/D9e}const A5={};A5.DIST=(t,e,n)=>(t=oe(t),e=oe(e),ze(t,e)?xe:n?ut.poisson.cdf(t,e):ut.poisson.pdf(t,e));function J9e(t,e,n,r){if(n===void 0)return 0;if(r=r===void 0?n:r,t=ft(Ye(t)),e=ft(Ye(e)),n=oe(n),r=oe(r),ze(t,e,n,r))return xe;if(n===r)return t.indexOf(n)>=0?e[t.indexOf(n)]:0;const i=t.sort((s,l)=>s-l),o=i.length;let a=0;for(let s=0;s<o;s++)i[s]>=n&&i[s]<=r&&(a+=e[t.indexOf(i[s])]);return a}const lh={};lh.EXC=(t,e)=>{if(t=ft(rc(Ye(t))),e=oe(e),ze(t,e))return xe;switch(e){case 1:return Ta.EXC(t,.25);case 2:return Ta.EXC(t,.5);case 3:return Ta.EXC(t,.75);default:return ke}};lh.INC=(t,e)=>{if(t=ft(rc(Ye(t))),e=oe(e),ze(t,e))return xe;switch(e){case 1:return Ta.INC(t,.25);case 2:return Ta.INC(t,.5);case 3:return Ta.INC(t,.75);default:return ke}};const Mv={};Mv.AVG=(t,e,n)=>{if(t=oe(t),e=ft(Ye(e)),ze(t,e))return xe;e=Ye(e),n=n||!1;const r=n?(a,s)=>a-s:(a,s)=>s-a;e=e.sort(r);const i=e.length;let o=0;for(let a=0;a<i;a++)e[a]===t&&o++;return o>1?(2*e.indexOf(t)+o+1)/2:e.indexOf(t)+1};Mv.EQ=(t,e,n)=>{if(t=oe(t),e=ft(Ye(e)),ze(t,e))return xe;n=n||!1;const r=n?(i,o)=>i-o:(i,o)=>o-i;return e=e.sort(r),e.indexOf(t)+1};function e7e(t,e){if(arguments.length!==2)return Tt;if(e<0)return ke;if(!(t instanceof Array)||typeof e!="number")return xe;if(t.length!==0)return ut.row(t,e)}function t7e(t,e){return t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e)?xe:Math.pow(tJ(t,e),2)}function N5(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=ut.mean(t),n=t.length;let r=0;for(let i=0;i<n;i++)r+=Math.pow(t[i]-e,3);return n*r/((n-1)*(n-2)*Math.pow(ut.stdev(t,!0),3))}N5.P=function(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=ut.mean(t),n=t.length;let r=0,i=0;for(let o=0;o<n;o++)i+=Math.pow(t[o]-e,3),r+=Math.pow(t[o]-e,2);return i=i/n,r=r/n,i/Math.pow(r,3/2)};function n7e(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=ut.mean(e),r=ut.mean(t),i=e.length;let o=0,a=0;for(let s=0;s<i;s++)o+=(e[s]-n)*(t[s]-r),a+=Math.pow(e[s]-n,2);return o/a}function nJ(t,e){return t=ft(Ye(t)),e=oe(e),ze(t,e)?t:t.sort((n,r)=>n-r)[e-1]}function r7e(t,e,n){return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:(t-e)/n}const Qo={};Qo.P=function(){const t=yo.P.apply(this,arguments);let e=Math.sqrt(t);return isNaN(e)&&(e=ke),e};Qo.S=function(){const t=yo.S.apply(this,arguments);return Math.sqrt(t)};function i7e(){const t=rJ.apply(this,arguments);return Math.sqrt(t)}function o7e(){const t=iJ.apply(this,arguments);let e=Math.sqrt(t);return isNaN(e)&&(e=ke),e}function a7e(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=ut.mean(e),r=ut.mean(t),i=e.length;let o=0,a=0,s=0;for(let l=0;l<i;l++)o+=Math.pow(t[l]-r,2),a+=(e[l]-n)*(t[l]-r),s+=Math.pow(e[l]-n,2);return Math.sqrt((o-a*a/s)/(i-2))}ra.DIST=(t,e,n)=>n!==1&&n!==2?ke:n===1?ra.DIST.RT(t,e):ra.DIST["2T"](t,e);ra.DIST["2T"]=function(t,e){return arguments.length!==2?Tt:t<0||e<1?ke:typeof t!="number"||typeof e!="number"?xe:(1-ut.studentt.cdf(t,e))*2};ra.DIST.RT=function(t,e){return arguments.length!==2?Tt:t<0||e<1?ke:typeof t!="number"||typeof e!="number"?xe:1-ut.studentt.cdf(t,e)};ra.INV=(t,e)=>(t=oe(t),e=oe(e),ze(t,e)?xe:ut.studentt.inv(t,e));ra.INV["2T"]=(t,e)=>(t=oe(t),e=oe(e),t<=0||t>1||e<1?ke:ze(t,e)?xe:Math.abs(ut.studentt.inv(t/2,e)));ra.TEST=(t,e)=>{if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;const n=ut.mean(t),r=ut.mean(e);let i=0,o=0,a;for(a=0;a<t.length;a++)i+=Math.pow(t[a]-n,2);for(a=0;a<e.length;a++)o+=Math.pow(e[a]-r,2);i=i/(t.length-1),o=o/(e.length-1);const s=Math.abs(n-r)/Math.sqrt(i/t.length+o/e.length);return ra.DIST["2T"](s,t.length+e.length-2)};function s7e(t,e,n){if(t=ft(Ye(t)),e=ft(Ye(e)),n=ft(Ye(n)),ze(t,e,n))return xe;const r=S5(t,e),i=r[0],o=r[1],a=[];return n.forEach(s=>{a.push(i*s+o)}),a}function l7e(t,e){if(t=ft(Ye(t)),e=oe(e),ze(t,e))return xe;const n=Ef(t.length*e,2)/2;return ut.mean($Re(Nr(t.sort((r,i)=>r-i),n),n))}const yo={};yo.P=function(){const t=rc(Ye(arguments)),e=t.length;let n=0;const r=ah(t);let i;for(let o=0;o<e;o++)n+=Math.pow(t[o]-r,2);return i=n/e,isNaN(i)&&(i=ke),i};yo.S=function(){const t=rc(Ye(arguments)),e=t.length;let n=0;const r=ah(t);for(let i=0;i<e;i++)n+=Math.pow(t[i]-r,2);return n/(e-1)};function rJ(){const t=Ye(arguments),e=t.length;let n=0,r=0;const i=y5(t);for(let o=0;o<e;o++){const a=t[o];typeof a=="number"?n+=Math.pow(a-i,2):a===!0?n+=Math.pow(1-i,2):n+=Math.pow(0-i,2),a!==null&&r++}return n/(r-1)}function iJ(){const t=Ye(arguments),e=t.length;let n=0,r=0;const i=y5(t);let o;for(let a=0;a<e;a++){const s=t[a];typeof s=="number"?n+=Math.pow(s-i,2):s===!0?n+=Math.pow(1-i,2):n+=Math.pow(0-i,2),s!==null&&r++}return o=n/r,isNaN(o)&&(o=ke),o}const D5={};D5.DIST=(t,e,n,r)=>(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:r?1-Math.exp(-Math.pow(t/n,e)):Math.pow(t,e-1)*Math.exp(-Math.pow(t/n,e))*e/Math.pow(n,e));const M5={};M5.TEST=(t,e,n)=>{if(t=ft(Ye(t)),e=oe(e),ze(t,e))return xe;n=n||Qo.S(t);const r=t.length;return 1-cl.S.DIST((ah(t)-e)/(n/Math.sqrt(r)),!0)};function u7e(t){return t=oe(t),t instanceof Error?t:Math.abs(t)}function c7e(t){if(t=oe(t),t instanceof Error)return t;let e=Math.acos(t);return isNaN(e)&&(e=ke),e}function f7e(t){if(t=oe(t),t instanceof Error)return t;let e=Math.log(t+Math.sqrt(t*t-1));return isNaN(e)&&(e=ke),e}function d7e(t){return t=oe(t),t instanceof Error?t:Math.atan(1/t)}function h7e(t){if(t=oe(t),t instanceof Error)return t;let e=.5*Math.log((t+1)/(t-1));return isNaN(e)&&(e=ke),e}function p7e(t,e,n,r){if(t=oe(t),e=oe(t),ze(t,e))return xe;switch(t){case 1:return ah(n);case 2:return j1(n);case 3:return G1(n);case 4:return Lw(n);case 5:return Fw(n);case 6:return Pw(n);case 7:return Qo.S(n);case 8:return Qo.P(n);case 9:return Yu(n);case 10:return yo.S(n);case 11:return yo.P(n);case 12:return eJ(n);case 13:return sh.SNGL(n);case 14:return JQ(n,r);case 15:return nJ(n,r);case 16:return Ta.INC(n,r);case 17:return lh.INC(n,r);case 18:return Ta.EXC(n,r);case 19:return lh.EXC(n,r)}}function m7e(t){if(t==null)return 0;if(t instanceof Error)return t;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(t))return xe;let e=0;return t.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,n=>{e+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[n]}),e}function g7e(t){if(t=oe(t),t instanceof Error)return t;let e=Math.asin(t);return isNaN(e)&&(e=ke),e}function v7e(t){return t=oe(t),t instanceof Error?t:Math.log(t+Math.sqrt(t*t+1))}function b7e(t){return t=oe(t),t instanceof Error?t:Math.atan(t)}function y7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||Math.atan2(t,e)}function x7e(t){if(t=oe(t),t instanceof Error)return t;let e=Math.log((1+t)/(1-t))/2;return isNaN(e)&&(e=ke),e}function w7e(t,e,n){t=oe(t),e=oe(e),n=oe(n);const r=Jt(t,e,n);if(r)return r;if(e===0)return ke;const i=t.toString(e);return new Array(Math.max(n+1-i.length,0)).join("0")+i}function Gu(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(e===0?0:t>0&&e<0?ke:Math.ceil(t/e)*e)}Gu.MATH=(t,e,n=0)=>{e===void 0&&(e=t>0?1:-1),t=oe(t),e=oe(e),n=oe(n);const r=Jt(t,e,n);return r||(e===0?0:(e=Math.abs(e),n===0||t>0?Math.ceil(t/e)*e:Math.floor(t/e)*e))};Gu.PRECISE=(t,e)=>Gu.MATH(t,e);function tm(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(t<e?ke:Pu(t)/(Pu(e)*Pu(t-e)))}function E7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(t<e?ke:t===0&&e===0?1:tm(t+e-1,t-1))}function C7e(t){return t=oe(t),t instanceof Error?t:Math.cos(t)}function S7e(t){return t=oe(t),t instanceof Error?t:(Math.exp(t)+Math.exp(-t))/2}function T7e(t){return t=oe(t),t instanceof Error?t:t===0?Gi:1/Math.tan(t)}function A7e(t){if(t=oe(t),t instanceof Error)return t;if(t===0)return Gi;const e=Math.exp(2*t);return(e+1)/(e-1)}function N7e(t){return t=oe(t),t instanceof Error?t:t===0?Gi:1/Math.sin(t)}function D7e(t){return t=oe(t),t instanceof Error?t:t===0?Gi:2/(Math.exp(t)-Math.exp(-t))}function M7e(t,e){if(arguments.length<2)return Tt;t=t||"0",e=oe(e);const n=Jt(t,e);if(n)return n;if(e===0)return ke;const r=parseInt(t,e);return isNaN(r)?ke:r}function k7e(t){return t=oe(t),t instanceof Error?t:t*180/Math.PI}function _7e(t){return t=oe(t),t instanceof Error?t:Gu.MATH(t,-2,-1)}function O7e(t){return arguments.length<1?Tt:arguments.length>1?m5:(t=oe(t),t instanceof Error||(t=Math.exp(t)),t)}const Xy=[];function Pu(t){if(t=oe(t),t instanceof Error)return t;const e=Math.floor(t);return e===0||e===1?1:(Xy[e]>0||(Xy[e]=Pu(e-1)*e),Xy[e])}function oJ(t){if(t=oe(t),t instanceof Error)return t;const e=Math.floor(t);return e<=0?1:e*oJ(e-2)}function Ef(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(e?t>0&&e<0?ke:Math.floor(t/e)*e:Gi)}Ef.MATH=(t,e=1,n=0)=>{t=oe(t),e=oe(e),n=oe(n);const r=Jt(t,e,n);return r||(e===0?0:(e=Math.abs(e),n===0||t>0?Math.floor(t/e)*e:Math.ceil(t/e)*e))};Ef.PRECISE=(t,e)=>Ef.MATH(t,e);function I7e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=t.length,n=t[0];let r=n<0?-n:n;for(let i=1;i<e;i++){const o=t[i];let a=o<0?-o:o;for(;r&&a;)r>a?r%=a:a%=r;r+=a}return r}function R7e(t){return t=oe(t),t instanceof Error?t:Math.floor(t)}const B7e={CEILING:Gu};function L7e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;for(var e,n,r,i,o=1;(r=t.pop())!==void 0;){if(r===0)return 0;for(;r>1;){if(r%2){for(e=3,n=Math.floor(Math.sqrt(r));e<=n&&r%e;e+=2);i=e<=n?e:r}else i=2;for(r/=i,o*=i,e=t.length;e;t[--e]%i===0&&(t[e]/=i)===1&&t.splice(e,1));}}return o}function F7e(t){return t=oe(t),t instanceof Error?t:t===0?ke:Math.log(t)}function P7e(t,e){t=oe(t),e=e?oe(e):10;const n=Jt(t,e);return n||(t===0||e===0?ke:Math.log(t)/Math.log(e))}function $7e(t){return t=oe(t),t instanceof Error?t:t===0?ke:Math.log(t)/Math.log(10)}function z7e(t,e){return!Array.isArray(t)||!Array.isArray(e)||t.some(r=>!r.length)||e.some(r=>!r.length)||R4(t).some(r=>typeof r!="number")||R4(e).some(r=>typeof r!="number")||t[0].length!==e.length?xe:Array(t.length).fill(0).map(()=>Array(e[0].length).fill(0)).map((r,i)=>r.map((o,a)=>t[i].reduce((s,l,u)=>s+l*e[u][a],0)))}function U7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);if(n)return n;if(e===0)return Gi;let r=Math.abs(t%e);return r=t<0?e-r:r,e>0?r:-r}function H7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(t*e===0?0:t*e<0?ke:Math.round(t/e)*e)}function V7e(){const t=ft(Ye(arguments));if(t instanceof Error)return t;let e=0,n=1;for(let r=0;r<t.length;r++)e+=t[r],n*=Pu(t[r]);return Pu(e)/n}function q7e(t){return arguments.length>1?Tt:(t=parseInt(t),!t||t<=0?xe:Array(t).fill(0).map(()=>Array(t).fill(0)).map((e,n)=>(e[n]=1,e)))}function j7e(t){if(t=oe(t),t instanceof Error)return t;let e=Math.ceil(Math.abs(t));return e=e&1?e:e+1,t>=0?e:-e}function G7e(){return Math.PI}function aJ(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);if(n)return n;if(t===0&&e===0)return ke;const r=Math.pow(t,e);return isNaN(r)?ke:r}function Pw(){const e=Ye(arguments).filter(i=>i!=null);if(e.length===0)return 0;const n=ft(e);if(n instanceof Error)return n;let r=1;for(let i=0;i<n.length;i++)r*=n[i];return r}function Y7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||parseInt(t/e,10)}function W7e(t){return t=oe(t),t instanceof Error?t:t*Math.PI/180}function K7e(){return Math.random()}function X7e(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||t+Math.ceil((e-t+1)*Math.random())-1}function Z7e(t){if(t=oe(t),t instanceof Error)return t;const e=String(t).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let r="",i=3;for(;i--;)r=(n[+e.pop()+i*10]||"")+r;return new Array(+e.join("")+1).join("M")+r}function k5(t,e,n){t=oe(t),e=oe(e);const r=Jt(t,e);if(r)return r;const i=t>=0?1:-1;let a=(Math.abs(t)+"e"+e).split("e");return a=(n(a[0]+"e"+a[1])+"e"+-e).split("e"),+(a[0]+"e"+a[1])*i}function sJ(t,e){return k5(t,e,Math.round)}function Q7e(t,e){return k5(t,e,Math.floor)}function J7e(t,e){return k5(t,e,Math.ceil)}function eBe(t){return t=oe(t),t instanceof Error?t:1/Math.cos(t)}function tBe(t){return t=oe(t),t instanceof Error?t:2/(Math.exp(t)+Math.exp(-t))}function nBe(t,e,n,r){if(t=oe(t),e=oe(e),n=oe(n),r=ft(r),ze(t,e,n,r))return xe;let i=r[0]*Math.pow(t,e);for(let o=1;o<r.length;o++)i+=r[o]*Math.pow(t,e+o*n);return i}function rBe(t){return t=oe(t),t instanceof Error?t:t<0?-1:t===0?0:1}function iBe(t){return t=oe(t),t instanceof Error?t:Math.sin(t)}function oBe(t){return t=oe(t),t instanceof Error?t:(Math.exp(t)-Math.exp(-t))/2}function aBe(t){return t=oe(t),t instanceof Error?t:t<0?ke:Math.sqrt(t)}function sBe(t){return t=oe(t),t instanceof Error?t:Math.sqrt(t*Math.PI)}function lBe(t,e){if(t=oe(t),t instanceof Error)return t;switch(t){case 1:return ah(e);case 2:return j1(e);case 3:return G1(e);case 4:return Lw(e);case 5:return Fw(e);case 6:return Pw(e);case 7:return Qo.S(e);case 8:return Qo.P(e);case 9:return Yu(e);case 10:return yo.S(e);case 11:return yo.P(e);case 101:return ah(e);case 102:return j1(e);case 103:return G1(e);case 104:return Lw(e);case 105:return Fw(e);case 106:return Pw(e);case 107:return Qo.S(e);case 108:return Qo.P(e);case 109:return Yu(e);case 110:return yo.S(e);case 111:return yo.P(e)}}function Yu(){let t=0;return oo(zC(arguments),e=>{if(t instanceof Error)return!1;if(e instanceof Error)t=e;else if(typeof e=="number")t+=e;else if(typeof e=="string"){const n=parseFloat(e);!isNaN(n)&&(t+=n)}else if(Array.isArray(e)){const n=Yu.apply(null,e);n instanceof Error?t=n:t+=n}}),t}function uBe(t,e,n){if(t=Ye(t),n=n?Ye(n):t,t instanceof Error)return t;if(e==null||e instanceof Error)return 0;let r=0;const i=e==="*",o=i?null:o0(e+"");for(let a=0;a<t.length;a++){const s=t[a],l=n[a];if(i)r+=s;else{const u=[Fu(s,zf)].concat(o);r+=a0(u)?l:0}}return r}function cBe(){const t=HC(...arguments);return Yu(t)}function fBe(){if(!arguments||arguments.length===0)return xe;const t=arguments.length+1;let e=0,n,r,i,o;for(let a=0;a<arguments[0].length;a++)if(arguments[0][a]instanceof Array)for(let s=0;s<arguments[0][a].length;s++){for(n=1,r=1;r<t;r++){const l=arguments[r-1][a][s];if(l instanceof Error)return l;if(o=oe(l),o instanceof Error)return o;n*=o}e+=n}else{for(n=1,r=1;r<t;r++){const s=arguments[r-1][a];if(s instanceof Error)return s;if(i=oe(s),i instanceof Error)return i;n*=i}e+=n}return e}function dBe(){const t=ft(Ye(arguments));if(t instanceof Error)return t;let e=0;const n=t.length;for(let r=0;r<n;r++)e+=qC(t[r])?t[r]*t[r]:0;return e}function hBe(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;let n=0;for(let r=0;r<t.length;r++)n+=t[r]*t[r]-e[r]*e[r];return n}function pBe(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;let n=0;t=ft(Ye(t)),e=ft(Ye(e));for(let r=0;r<t.length;r++)n+=t[r]*t[r]+e[r]*e[r];return n}function mBe(t,e){if(t=ft(Ye(t)),e=ft(Ye(e)),ze(t,e))return xe;let n=0;t=Ye(t),e=Ye(e);for(let r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n}function gBe(t){return t=oe(t),t instanceof Error?t:Math.tan(t)}function vBe(t){if(t=oe(t),t instanceof Error)return t;const e=Math.exp(2*t);return(e-1)/(e+1)}function bBe(t,e){t=oe(t),e=oe(e);const n=Jt(t,e);return n||(t>0?1:-1)*Math.floor(Math.abs(t)*Math.pow(10,e))/Math.pow(10,e)}function yBe(t,e){if(arguments.length!==2)return Tt;t=oe(t),e=oe(e);const n=Jt(t,e);return n||t+e}function xBe(t,e){if(arguments.length!==2)return Tt;t=oe(t),e=oe(e);const n=Jt(t,e);return n||(e===0?Gi:t/e)}function wBe(t,e){return arguments.length!==2?Tt:t instanceof Error?t:e instanceof Error?e:(t===null&&(t=void 0),e===null&&(e=void 0),t===e)}function EBe(t,e){if(arguments.length!==2)return Tt;if(t instanceof Error)return t;if(e instanceof Error)return e;UC(t,e)?(t=zr(t),e=zr(e)):(t=oe(t),e=oe(e));const n=Jt(t,e);return n||t>e}function CBe(t,e){if(arguments.length!==2)return Tt;UC(t,e)?(t=zr(t),e=zr(e)):(t=oe(t),e=oe(e));const n=Jt(t,e);return n||t>=e}function SBe(t,e){if(arguments.length!==2)return Tt;UC(t,e)?(t=zr(t),e=zr(e)):(t=oe(t),e=oe(e));const n=Jt(t,e);return n||t<e}function TBe(t,e){if(arguments.length!==2)return Tt;UC(t,e)?(t=zr(t),e=zr(e)):(t=oe(t),e=oe(e));const n=Jt(t,e);return n||t<=e}function ABe(t,e){if(arguments.length!==2)return Tt;t=oe(t),e=oe(e);const n=Jt(t,e);return n||t-e}function NBe(t,e){if(arguments.length!==2)return Tt;t=oe(t),e=oe(e);const n=Jt(t,e);return n||t*e}function DBe(t,e){return arguments.length!==2?Tt:t instanceof Error?t:e instanceof Error?e:(t===null&&(t=void 0),e===null&&(e=void 0),t!==e)}function MBe(t,e){return arguments.length!==2?Tt:aJ(t,e)}var kBe=Object.freeze({__proto__:null,ADD:yBe,DIVIDE:xBe,EQ:wBe,GT:EBe,GTE:CBe,LT:SBe,LTE:TBe,MINUS:ABe,MULTIPLY:NBe,NE:DBe,POW:MBe});const _Be=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],OBe=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],$w=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function IBe(t,e,n){let r;return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?r=xe:(r=new Date(t,e-1,n),r.getFullYear()<0&&(r=ke)),nc?ju(r):r}function lf(t,e,n){n=n.toUpperCase(),t=cn(t),e=cn(e);const r=t.getFullYear(),i=t.getMonth(),o=t.getDate(),a=e.getFullYear(),s=e.getMonth(),l=e.getDate();let u;switch(n){case"Y":u=Math.floor(_5(t,e));break;case"D":u=Hd(e,t);break;case"M":u=s-i+12*(a-r),l<o&&u--;break;case"MD":o<=l?u=l-o:(s===0?(t.setFullYear(a-1),t.setMonth(12)):(t.setFullYear(a),t.setMonth(s-1)),u=Hd(e,t));break;case"YM":u=s-i+12*(a-r),l<o&&u--,u=u%12;break;case"YD":s>i||s===i&&l<o?t.setFullYear(a):t.setFullYear(a-1),u=Hd(e,t);break}return u}function RBe(t){if(typeof t!="string")return xe;const e=Date.parse(t);if(isNaN(e))return xe;const n=new Date(t);return nc?ju(n):n}function BBe(t){const e=cn(t);return e instanceof Error?e:e.getDate()}function zw(t){const e=new Date(t);return e.setHours(0,0,0,0),e}function Hd(t,e){return t=cn(t),e=cn(e),t instanceof Error?t:e instanceof Error?e:ju(zw(t))-ju(zw(e))}function Cf(t,e,n){if(n=v5(n||"false"),t=cn(t),e=cn(e),t instanceof Error)return t;if(e instanceof Error)return e;if(n instanceof Error)return n;const r=t.getMonth();let i=e.getMonth(),o,a;if(n)o=t.getDate()===31?30:t.getDate(),a=e.getDate()===31?30:e.getDate();else{const s=new Date(t.getFullYear(),r+1,0).getDate(),l=new Date(e.getFullYear(),i+1,0).getDate();o=t.getDate()===s?30:t.getDate(),e.getDate()===l?o<30?(i++,a=1):a=30:a=e.getDate()}return 360*(e.getFullYear()-t.getFullYear())+30*(i-r)+(a-o)}function LBe(t,e){if(t=cn(t),t instanceof Error)return t;if(isNaN(e))return xe;let n=t.getDate();t.setDate(1),e=parseInt(e,10),t.setMonth(t.getMonth()+e);let r=t.getMonth();if(n>28){let i=[31,28,31,30,31,30,31,31,30,31,30,31][r],o=t.getFullYear();r===1&&(o%4===0&&o%100!==0||o%400===0)&&(i=29),n=Math.min(n,i)}return t.setDate(n),nc?ju(t):t}function FBe(t,e){if(t=cn(t),t instanceof Error)return t;if(isNaN(e))return xe;e=parseInt(e,10);const n=new Date(t.getFullYear(),t.getMonth()+e+1,0);return nc?ju(n):n}function PBe(t){return t=cn(t),t instanceof Error?t:t.getHours()}function lJ(t){if(t=cn(t),t instanceof Error)return t;t=zw(t),t.setDate(t.getDate()+4-(t.getDay()||7));const e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+1)/7)}function $Be(t){return t=cn(t),t instanceof Error?t:t.getMinutes()}function zBe(t){return t=cn(t),t instanceof Error?t:t.getMonth()+1}function jC(t,e,n){return jC.INTL(t,e,1,n)}jC.INTL=(t,e,n,r)=>{if(t=cn(t),t instanceof Error)return t;if(e=cn(e),e instanceof Error)return e;let i=!1;const o=[],a=[1,2,3,4,5,6,0],s=new RegExp("^[0|1]{7}$");if(n===void 0)n=$w[1];else if(typeof n=="string"&&s.test(n)){i=!0,n=n.split("");for(let f=0;f<n.length;f++)n[f]==="1"&&o.push(a[f])}else n=$w[n];if(!(n instanceof Array))return xe;r===void 0?r=[]:r instanceof Array||(r=[r]);for(let f=0;f<r.length;f++){const d=cn(r[f]);if(d instanceof Error)return d;r[f]=d}const l=Math.round((e-t)/(1e3*60*60*24))+1;let u=l;const c=t;for(let f=0;f<l;f++){const d=new Date().getTimezoneOffset()>0?c.getUTCDay():c.getDay();let h=i?o.includes(d):d===n[0]||d===n[1];for(let m=0;m<r.length;m++){const v=r[m];if(v.getDate()===c.getDate()&&v.getMonth()===c.getMonth()&&v.getFullYear()===c.getFullYear()){h=!0;break}}h&&u--,c.setDate(c.getDate()+1)}return u};function UBe(){return nc?ju(new Date):new Date}function HBe(t){return t=cn(t),t instanceof Error?t:t.getSeconds()}function VBe(t,e,n){return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:t<0||e<0||n<0?ke:(3600*t+60*e+n)/86400}function qBe(t){return t=cn(t),t instanceof Error?t:(3600*t.getHours()+60*t.getMinutes()+t.getSeconds())/86400}function jBe(){const t=zw(new Date);return nc?ju(t):t}function GBe(t,e){if(t=cn(t),t instanceof Error)return t;e===void 0&&(e=1);const n=t.getDay();return OBe[e][n]}function YBe(t,e){if(t=cn(t),t instanceof Error)return t;if(e===void 0&&(e=1),e===21)return lJ(t);const n=_Be[e];let r=new Date(t.getFullYear(),0,1);const i=r.getDay()<n?1:0;return r-=Math.abs(r.getDay()-n)*24*60*60*1e3,Math.floor((t-r)/(1e3*60*60*24)/7+1)+i}function GC(t,e,n){return GC.INTL(t,e,1,n)}GC.INTL=(t,e,n,r)=>{if(t=cn(t),t instanceof Error)return t;if(e=oe(e),e instanceof Error)return e;if(n===void 0?n=$w[1]:n=$w[n],!(n instanceof Array))return xe;r===void 0?r=[]:r instanceof Array||(r=[r]);for(let a=0;a<r.length;a++){const s=cn(r[a]);if(s instanceof Error)return s;r[a]=s}let i=0;const o=Math.sign(e);for(;i<e*o;){t.setDate(t.getDate()+o);const a=t.getDay();if(!(a===n[0]||a===n[1])){for(let s=0;s<r.length;s++){const l=r[s];if(l.getDate()===t.getDate()&&l.getMonth()===t.getMonth()&&l.getFullYear()===t.getFullYear()){i--;break}}i++}}return t.getFullYear()<1900?xe:t};function WBe(t){return t=cn(t),t instanceof Error?t:t.getFullYear()}function A3(t){return new Date(t,1,29).getMonth()===1}function Zy(t,e){return Math.ceil((e-t)/1e3/60/60/24)}function _5(t,e,n){if(t=cn(t),t instanceof Error)return t;if(e=cn(e),e instanceof Error)return e;n=n||0;let r=t.getDate();const i=t.getMonth()+1,o=t.getFullYear();let a=e.getDate();const s=e.getMonth()+1,l=e.getFullYear();switch(n){case 0:return r===31&&a===31?(r=30,a=30):r===31?r=30:r===30&&a===31&&(a=30),(a+s*30+l*360-(r+i*30+o*360))/360;case 1:{const u=(m,v)=>{const b=m.getFullYear(),x=new Date(b,2,1);if(A3(b)&&m<x&&v>=x)return!0;const C=v.getFullYear(),w=new Date(C,2,1);return A3(C)&&v>=w&&m<w};let c=365;if(o===l||o+1===l&&(i>s||i===s&&r>=a))return(o===l&&A3(o)||u(t,e)||s===1&&a===29)&&(c=366),Zy(t,e)/c;const f=l-o+1,h=(new Date(l+1,0,1)-new Date(o,0,1))/1e3/60/60/24/f;return Zy(t,e)/h}case 2:return Zy(t,e)/360;case 3:return Zy(t,e)/365;case 4:return(a+s*30+l*360-(r+i*30+o*360))/360}}function O5(t){return/^[01]{1,10}$/.test(t)}function KBe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:PC.besseli(t,e)}function XBe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:PC.besselj(t,e)}function ZBe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:PC.besselk(t,e)}function QBe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:PC.bessely(t,e)}function JBe(t){if(!O5(t))return ke;const e=parseInt(t,2),n=t.toString();return n.length===10&&n.substring(0,1)==="1"?parseInt(n.substring(1),2)-512:e}function eLe(t,e){if(!O5(t))return ke;const n=t.toString();if(n.length===10&&n.substring(0,1)==="1")return(0xfffffffe00+parseInt(n.substring(1),2)).toString(16);const r=parseInt(t,2).toString(16);return e===void 0?r:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=r.length?_a("0",e-r.length)+r:ke)}function tLe(t,e){if(!O5(t))return ke;const n=t.toString();if(n.length===10&&n.substring(0,1)==="1")return(1073741312+parseInt(n.substring(1),2)).toString(8);const r=parseInt(t,2).toString(8);return e===void 0?r:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=r.length?_a("0",e-r.length)+r:ke)}function nLe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<0||e<0||Math.floor(t)!==t||Math.floor(e)!==e||t>0xffffffffffff||e>0xffffffffffff?ke:t&e}function rLe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<0||Math.floor(t)!==t||t>0xffffffffffff||Math.abs(e)>53?ke:e>=0?t<<e:t>>-e}function iLe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<0||e<0||Math.floor(t)!==t||Math.floor(e)!==e||t>0xffffffffffff||e>0xffffffffffff?ke:t|e}function oLe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<0||Math.floor(t)!==t||t>0xffffffffffff||Math.abs(e)>53?ke:e>=0?t>>e:t<<-e}function aLe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<0||e<0||Math.floor(t)!==t||Math.floor(e)!==e||t>0xffffffffffff||e>0xffffffffffff?ke:t^e}function fo(t,e,n){if(t=oe(t),e=oe(e),ze(t,e))return t;if(n=n===void 0?"i":n,n!=="i"&&n!=="j")return xe;if(t===0&&e===0)return 0;if(t===0)return e===1?n:e.toString()+n;if(e===0)return t.toString();{const r=e>0?"+":"";return t.toString()+r+(e===1?n:e.toString()+n)}}function sLe(t,e,n){if(t=oe(t),t instanceof Error)return t;const r=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["ngstrm","",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic ngstrm","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m3",["m^3"],"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,416818182544058e-5],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,758660370370369e-22],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519538e-3],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdestrke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square ngstrm","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988110336e-6],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],i={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,1152921504606847e3,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},o={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]};let a=null,s=null,l=e,u=n,c=1,f=1,d;for(let h=0;h<r.length;h++)d=r[h][2]===null?[]:r[h][2],(r[h][1]===l||d.indexOf(l)>=0)&&(a=r[h]),(r[h][1]===u||d.indexOf(u)>=0)&&(s=r[h]);if(a===null){const h=i[e.substring(0,2)];let m=o[e.substring(0,1)];e.substring(0,2)==="da"&&(m=["dekao",10,"da"]),h?(c=h[2],l=e.substring(2)):m&&(c=m[1],l=e.substring(m[2].length));for(let v=0;v<r.length;v++)d=r[v][2]===null?[]:r[v][2],(r[v][1]===l||d.indexOf(l)>=0)&&(a=r[v])}if(s===null){const h=i[n.substring(0,2)];let m=o[n.substring(0,1)];n.substring(0,2)==="da"&&(m=["dekao",10,"da"]),h?(f=h[2],u=n.substring(2)):m&&(f=m[1],u=n.substring(m[2].length));for(let v=0;v<r.length;v++)d=r[v][2]===null?[]:r[v][2],(r[v][1]===u||d.indexOf(u)>=0)&&(s=r[v])}return a===null||s===null||a[3]!==s[3]?Tt:t*a[6]*c/(s[6]*f)}function lLe(t,e){if(t=oe(t),t instanceof Error)return t;if(!/^-?[0-9]{1,3}$/.test(t)||t<-512||t>511)return ke;if(t<0)return"1"+_a("0",9-(512+t).toString(2).length)+(512+t).toString(2);const n=parseInt(t,10).toString(2);return typeof e>"u"?n:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=n.length?_a("0",e-n.length)+n:ke)}function uLe(t,e){if(t=oe(t),t instanceof Error)return t;if(!/^-?[0-9]{1,12}$/.test(t)||t<-549755813888||t>549755813887)return ke;if(t<0)return(1099511627776+t).toString(16);const n=parseInt(t,10).toString(16);return typeof e>"u"?n:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=n.length?_a("0",e-n.length)+n:ke)}function cLe(t,e){if(t=oe(t),t instanceof Error)return t;if(!/^-?[0-9]{1,9}$/.test(t)||t<-536870912||t>536870911)return ke;if(t<0)return(1073741824+t).toString(8);const n=parseInt(t,10).toString(8);return typeof e>"u"?n:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=n.length?_a("0",e-n.length)+n:ke)}function fLe(t,e){return e=e===void 0?0:e,t=oe(t),e=oe(e),ze(t,e)?xe:t===e?1:0}function uJ(t,e){return e=e===void 0?0:e,t=oe(t),e=oe(e),ze(t,e)?xe:ut.erf(t)}function cJ(t){return isNaN(t)?xe:ut.erfc(t)}function dLe(t,e){return e=e||0,t=oe(t),ze(e,t)?t:t>=e?1:0}function hLe(t,e){if(!/^[0-9A-Fa-f]{1,10}$/.test(t))return ke;const n=t.length===10&&t.substring(0,1).toLowerCase()==="f",r=n?parseInt(t,16)-1099511627776:parseInt(t,16);if(r<-512||r>511)return ke;if(n)return"1"+_a("0",9-(512+r).toString(2).length)+(512+r).toString(2);const i=r.toString(2);return e===void 0?i:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=i.length?_a("0",e-i.length)+i:ke)}function pLe(t){if(!/^[0-9A-Fa-f]{1,10}$/.test(t))return ke;const e=parseInt(t,16);return e>=549755813888?e-1099511627776:e}function mLe(t,e){if(!/^[0-9A-Fa-f]{1,10}$/.test(t))return ke;const n=parseInt(t,16);if(n>536870911&&n<0xffe0000000)return ke;if(n>=0xffe0000000)return(n-0xffc0000000).toString(8);const r=n.toString(8);return e===void 0?r:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=r.length?_a("0",e-r.length)+r:ke)}function I5(t){const e=hr(t),n=dr(t);return ze(e,n)?xe:Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function dr(t){if(t===void 0||t===!0||t===!1)return xe;if(t===0||t==="0")return 0;if(["i","j"].indexOf(t)>=0)return 1;t=t+"",t=t.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j");let e=t.indexOf("+"),n=t.indexOf("-");e===0&&(e=t.indexOf("+",1)),n===0&&(n=t.indexOf("-",1));const r=t.substring(t.length-1,t.length),i=r==="i"||r==="j";return e>=0||n>=0?i?e>=0?isNaN(t.substring(0,e))||isNaN(t.substring(e+1,t.length-1))?ke:Number(t.substring(e+1,t.length-1)):isNaN(t.substring(0,n))||isNaN(t.substring(n+1,t.length-1))?ke:-Number(t.substring(n+1,t.length-1)):ke:i?isNaN(t.substring(0,t.length-1))?ke:t.substring(0,t.length-1):isNaN(t)?ke:0}function R5(t){const e=hr(t),n=dr(t);return ze(e,n)?xe:e===0&&n===0?Gi:e===0&&n>0?Math.PI/2:e===0&&n<0?-Math.PI/2:n===0&&e>0?0:n===0&&e<0?-Math.PI:e>0?Math.atan(n/e):e<0&&n>=0?Math.atan(n/e)+Math.PI:Math.atan(n/e)-Math.PI}function gLe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",n!==0?fo(e,-n,r):t}function YC(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.cos(e)*(Math.exp(n)+Math.exp(-n))/2,-Math.sin(e)*(Math.exp(n)-Math.exp(-n))/2,r)}function fJ(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.cos(n)*(Math.exp(e)+Math.exp(-e))/2,Math.sin(n)*(Math.exp(e)-Math.exp(-e))/2,r)}function vLe(t){const e=hr(t),n=dr(t);return ze(e,n)?xe:Ch(YC(t),WC(t))}function Ch(t,e){const n=hr(t),r=dr(t),i=hr(e),o=dr(e);if(ze(n,r,i,o))return xe;const a=t.substring(t.length-1),s=e.substring(e.length-1);let l="i";if((a==="j"||s==="j")&&(l="j"),i===0&&o===0)return ke;const u=i*i+o*o;return fo((n*i+r*o)/u,(r*i-n*o)/u,l)}function bLe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);r=r==="i"||r==="j"?r:"i";const i=Math.exp(e);return fo(i*Math.cos(n),i*Math.sin(n),r)}function yLe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.log(Math.sqrt(e*e+n*n)),Math.atan(n/e),r)}function xLe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.log(Math.sqrt(e*e+n*n))/Math.log(10),Math.atan(n/e)/Math.log(10),r)}function wLe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.log(Math.sqrt(e*e+n*n))/Math.log(2),Math.atan(n/e)/Math.log(2),r)}function ELe(t,e){e=oe(e);const n=hr(t),r=dr(t);if(ze(e,n,r))return xe;let i=t.substring(t.length-1);i=i==="i"||i==="j"?i:"i";const o=Math.pow(I5(t),e),a=R5(t);return fo(o*Math.cos(e*a),o*Math.sin(e*a),i)}function CLe(){let t=arguments[0];if(!arguments.length)return xe;for(let e=1;e<arguments.length;e++){const n=hr(t),r=dr(t),i=hr(arguments[e]),o=dr(arguments[e]);if(ze(n,r,i,o))return xe;t=fo(n*i-r*o,n*o+r*i)}return t}function hr(t){if(t===void 0||t===!0||t===!1)return xe;if(t===0||t==="0"||["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(t)>=0)return 0;t=t+"";let e=t.indexOf("+"),n=t.indexOf("-");e===0&&(e=t.indexOf("+",1)),n===0&&(n=t.indexOf("-",1));const r=t.substring(t.length-1,t.length),i=r==="i"||r==="j";return e>=0||n>=0?i?e>=0?isNaN(t.substring(0,e))||isNaN(t.substring(e+1,t.length-1))?ke:Number(t.substring(0,e)):isNaN(t.substring(0,n))||isNaN(t.substring(n+1,t.length-1))?ke:Number(t.substring(0,n)):ke:i?isNaN(t.substring(0,t.length-1))?ke:0:isNaN(t)?ke:t}function SLe(t){if(t===!0||t===!1)return xe;const e=hr(t),n=dr(t);return ze(e,n)?xe:Ch("1",YC(t))}function TLe(t){const e=hr(t),n=dr(t);return ze(e,n)?xe:Ch("1",fJ(t))}function WC(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.sin(e)*(Math.exp(n)+Math.exp(-n))/2,Math.cos(e)*(Math.exp(n)-Math.exp(-n))/2,r)}function dJ(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);return r=r==="i"||r==="j"?r:"i",fo(Math.cos(n)*(Math.exp(e)-Math.exp(-e))/2,Math.sin(n)*(Math.exp(e)+Math.exp(-e))/2,r)}function ALe(t){const e=hr(t),n=dr(t);if(ze(e,n))return xe;let r=t.substring(t.length-1);r=r==="i"||r==="j"?r:"i";const i=Math.sqrt(I5(t)),o=R5(t);return fo(i*Math.cos(o/2),i*Math.sin(o/2),r)}function NLe(t){if(t===!0||t===!1)return xe;const e=hr(t),n=dr(t);return ze(e,n)?ke:Ch("1",WC(t))}function DLe(t){if(t===!0||t===!1)return xe;const e=hr(t),n=dr(t);return ze(e,n)?ke:Ch("1",dJ(t))}function MLe(t,e){const n=hr(t),r=dr(t),i=hr(e),o=dr(e);if(ze(n,r,i,o))return xe;const a=t.substring(t.length-1),s=e.substring(e.length-1);let l="i";return(a==="j"||s==="j")&&(l="j"),fo(n-i,r-o,l)}function kLe(){if(!arguments.length)return xe;const t=Ye(arguments);let e=0,n=0;for(const r of t){const i=+hr(r),o=+dr(r);if(ze(i,o))return xe;e+=i,n+=o}return fo(e,n,"i")}function _Le(t){if(t===!0||t===!1)return xe;const e=hr(t),n=dr(t);return ze(e,n)?xe:Ch(WC(t),YC(t))}function OLe(t,e){if(!/^[0-7]{1,10}$/.test(t))return ke;const n=t.length===10&&t.substring(0,1)==="7",r=n?parseInt(t,8)-1073741824:parseInt(t,8);if(r<-512||r>511)return ke;if(n)return"1"+_a("0",9-(512+r).toString(2).length)+(512+r).toString(2);const i=r.toString(2);return typeof e>"u"?i:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=i.length?_a("0",e-i.length)+i:ke)}function ILe(t){if(!/^[0-7]{1,10}$/.test(t))return ke;const e=parseInt(t,8);return e>=536870912?e-1073741824:e}function RLe(t,e){if(!/^[0-7]{1,10}$/.test(t))return ke;const n=parseInt(t,8);if(n>=536870912)return"ff"+(n+3221225472).toString(16);const r=n.toString(16);return e===void 0?r:isNaN(e)?xe:e<0?ke:(e=Math.floor(e),e>=r.length?_a("0",e-r.length)+r:ke)}const BLe=Av.DIST,LLe=Av.INV,FLe=s0.DIST,PLe=Gu.MATH,$Le=Gu.PRECISE,zLe=ll.DIST,ULe=ll.DIST.RT,HLe=ll.INV,VLe=ll.INV.RT,qLe=ll.TEST,jLe=l0.P,GLe=l0.P,YLe=l0.S,WLe=s0.INV,KLe=cJ.PRECISE,XLe=uJ.PRECISE,ZLe=w5.DIST,QLe=ul.DIST,JLe=ul.DIST.RT,eFe=ul.INV,tFe=ul.INV.RT,nFe=Ef.MATH,rFe=Ef.PRECISE,iFe=ul.TEST,oFe=Nv.DIST,aFe=Nv.INV,sFe=E5.PRECISE,lFe=C5.DIST,uFe=u0.INV,cFe=u0.DIST,fFe=u0.INV,dFe=sh.MULT,hFe=sh.SNGL,pFe=T5.DIST,mFe=jC.INTL,gFe=cl.DIST,vFe=cl.INV,bFe=cl.S.DIST,yFe=cl.S.INV,xFe=Ta.EXC,wFe=Ta.INC,EFe=Dv.EXC,CFe=Dv.INC,SFe=A5.DIST,TFe=lh.EXC,AFe=lh.INC,NFe=Mv.AVG,DFe=Mv.EQ,MFe=N5.P,kFe=Qo.P,_Fe=Qo.S,OFe=ra.DIST,IFe=ra.DIST.RT,RFe=ra.INV,BFe=ra.TEST,LFe=yo.P,FFe=yo.S,PFe=D5.DIST,$Fe=GC.INTL,zFe=M5.TEST;function B5(t){const e=[];return oo(t,n=>{n&&e.push(n)}),e}function Es(t,e){const n={};for(let o=1;o<t[0].length;++o)n[o]=!0;let r=e[0].length;for(let o=1;o<e.length;++o)e[o].length>r&&(r=e[o].length);for(let o=1;o<t.length;++o)for(let a=1;a<t[o].length;++a){let s=!1,l=!1;for(let u=0;u<e.length;++u){const c=e[u];if(c.length<r)continue;const f=c[0];if(t[o][0]===f){l=!0;for(let d=1;d<c.length;++d)if(!s)if(c[d]===void 0||c[d]==="*")s=!0;else{const m=o0(c[d]+""),v=[Fu(t[o][a],zf)].concat(m);s=a0(v)}}}l&&(n[a]=n[a]&&s)}const i=[];for(let o=0;o<t[0].length;++o)n[o]&&i.push(o-1);return i}function UFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);let o=0;return oo(r,a=>{o+=i[a]}),r.length===0?Gi:o/r.length}function HFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);const o=[];return oo(r,a=>{o.push(i[a])}),j1(o)}function VFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);const o=[];return oo(r,a=>{o.push(i[a])}),G1(o)}function qFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const o=ws(t,e);i=Nr(t[o])}else i=Nr(t[e]);return r.length===0?xe:r.length>1?ke:i[r[0]]}function jFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);let o=i[r[0]];return oo(r,a=>{o<i[a]&&(o=i[a])}),o}function GFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);let o=i[r[0]];return oo(r,a=>{o>i[a]&&(o=i[a])}),o}function YFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const s=ws(t,e);i=Nr(t[s])}else i=Nr(t[e]);let o=[];oo(r,s=>{o.push(i[s])}),o=B5(o);let a=1;return oo(o,s=>{a*=s}),a}function WFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);let o=[];return oo(r,a=>{o.push(i[a])}),o=B5(o),Qo.S(o)}function KFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);let o=[];return oo(r,a=>{o.push(i[a])}),o=B5(o),Qo.P(o)}function XFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);const o=[];return oo(r,a=>{o.push(i[a])}),Yu(o)}function ZFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);const o=[];return oo(r,a=>{o.push(i[a])}),yo.S(o)}function QFe(t,e,n){if(isNaN(e)&&typeof e!="string")return xe;const r=Es(t,n);let i=[];if(typeof e=="string"){const a=ws(t,e);i=Nr(t[a])}else i=Nr(t[e]);const o=[];return oo(r,a=>{o.push(i[a])}),yo.P(o)}function N3(t){return t&&t.getTime&&!isNaN(t.getTime())}function D3(t){return t instanceof Date?t:new Date(t)}function JFe(t,e,n){let r=cn(e);for(r.setFullYear(t.getFullYear()),r<t&&r.setFullYear(r.getFullYear()+1);r>t;)r.setMonth(r.getMonth()+-12/n);return r}function hJ(t){return t=oe(t),[1,2,4].indexOf(t)===-1?ke:t}function pJ(t){return t=oe(t),[0,1,2,3,4].indexOf(t)===-1?ke:t}function ePe(t,e,n,r,i,o,a){return t=D3(t),e=D3(e),n=D3(n),o=hJ(o),a=pJ(a),Jt(o,a)?ke:!N3(t)||!N3(e)||!N3(n)?xe:r<=0||i<=0||n<=t?ke:(i=i||0,a=a||0,i*r*_5(t,n,a))}function tPe(t,e,n,r){if(r=pJ(r),n=hJ(n),t=cn(t),e=cn(e),Jt(t,e))return xe;if(Jt(n,r)||t>=e)return ke;if(r===1){let o=JFe(t,e,n),a=cn(o);return a.setMonth(a.getMonth()+12/n),lf(o,a,"D")}let i;switch(r){case 0:case 2:case 4:i=360;break;case 3:i=365;break;default:return ke}return i/n}function nPe(t,e,n,r,i,o){if(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n))return xe;if(t<=0||e<=0||n<=0||r<1||i<1||r>i||o!==0&&o!==1)return ke;const a=kv(t,e,n,0,o);let s=0;r===1&&(o===0&&(s=-n),r++);for(let l=r;l<=i;l++)s+=o===1?uh(t,l-2,a,n,1)-a:uh(t,l-1,a,n,0);return s*=t,s}function rPe(t,e,n,r,i,o){if(t=oe(t),e=oe(e),n=oe(n),ze(t,e,n))return xe;if(t<=0||e<=0||n<=0||r<1||i<1||r>i||o!==0&&o!==1)return ke;const a=kv(t,e,n,0,o);let s=0;r===1&&(s=o===0?a+n*t:a,r++);for(let l=r;l<=i;l++)s+=o>0?a-(uh(t,l-2,a,n,1)-a)*t:a-uh(t,l-1,a,n,0)*t;return s}function iPe(t,e,n,r,i){if(i=i===void 0?12:i,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i))return xe;if(t<0||e<0||n<0||r<0||[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(i)===-1||r>n)return ke;if(e>=t)return 0;const o=(1-Math.pow(e/t,1/n)).toFixed(3),a=t*o*i/12;let s=a,l=0;const u=r===n?n-1:r;for(let c=2;c<=u;c++)l=(t-s)*o,s+=l;return r===1?a:r===n?(t-s)*o:l}function oPe(t,e,n,r,i){if(i=i===void 0?2:i,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i))return xe;if(t<0||e<0||n<0||r<0||i<=0||r>n)return ke;if(e>=t)return 0;let o=0,a=0;for(let s=1;s<=r;s++)a=Math.min((t-o)*(i/n),t-e-o),o+=a;return a}function aPe(t,e,n,r,i){if(t=cn(t),e=cn(e),n=oe(n),r=oe(r),i=oe(i),i=i||0,ze(t,e,n,r,i))return xe;if(n<=0||r<=0)return ke;if(t>=e)return xe;let o,a;switch(i){case 0:o=360,a=Cf(t,e,!1);break;case 1:o=365,a=lf(t,e,"D");break;case 2:o=360,a=lf(t,e,"D");break;case 3:o=365,a=lf(t,e,"D");break;case 4:o=360,a=Cf(t,e,!0);break;default:return ke}return(r-n)/r*o/a}function sPe(t,e){if(t=oe(t),e=oe(e),ze(t,e))return xe;if(e<0)return ke;if(e>=0&&e<1)return Gi;e=parseInt(e,10);let n=parseInt(t,10);n+=t%1*Math.pow(10,Math.ceil(Math.log(e)/Math.LN10))/e;const r=Math.pow(10,Math.ceil(Math.log(e)/Math.LN2)+1);return n=Math.round(n*r)/r,n}function lPe(t,e){if(t=oe(t),e=oe(e),ze(t,e))return xe;if(e<0)return ke;if(e>=0&&e<1)return Gi;e=parseInt(e,10);let n=parseInt(t,10);return n+=t%1*Math.pow(10,-Math.ceil(Math.log(e)/Math.LN10))*e,n}function uPe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<=0||e<1?ke:(e=parseInt(e,10),Math.pow(1+t/e,e)-1)}function uh(t,e,n,r,i){if(r=r||0,i=i||0,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i))return xe;let o;if(t===0)o=r+n*e;else{const a=Math.pow(1+t,e);o=i===1?r*a+n*(1+t)*(a-1)/t:r*a+n*(a-1)/t}return-o}function cPe(t,e){if(t=oe(t),e=ft(Ye(e)),ze(t,e))return xe;const n=e.length;let r=t;for(let i=0;i<n;i++)r*=1+e[i];return r}function mJ(t,e,n,r,i,o){if(i=i||0,o=o||0,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),o=oe(o),ze(t,e,n,r,i,o))return xe;const a=kv(t,n,r,i,o);return(e===1?o===1?0:-r:o===1?uh(t,e-2,a,r,1)-a:uh(t,e-1,a,r,0))*t}function fPe(t,e){if(e=typeof e=="number"?e:typeof e>"u"?.1:oe(e),t=Ye(t).filter(Eh),t=ft(t),ze(t,e))return xe;const n=new Float64Array(t.length);let r=!1,i=!1;for(let u=0;u<t.length;u++)n[u]=t[u],n[u]>0&&(r=!0),n[u]<0&&(i=!0);if(!r||!i)return ke;const o=u=>{u<=-1&&(u=-.999999999);let c=n[0];const f=1+u;let d=1;for(let h=1;h<n.length;h++)d*=f,c+=n[h]/d;return c},a=new Map,s=function(u){const c=Math.round(u*1e10)/1e10;if(a.has(c))return a.get(c);const f=o(c);return a.set(c,f),f};return function(){let f=e,d=f,h=0;for(;h<1e3;){const C=s(f);if(Math.abs(C)<1e-10)return f;if(h>0&&Math.abs(f-d)<1e-10*10)break;const w=Math.max(1e-4,Math.abs(f*1e-4)),A=(s(f+w)-C)/w;if(Math.abs(A)<1e-10)break;d=f;const E=C/A,T=Math.max(.1,Math.abs(f)*.5);Math.abs(E)>T?f-=Math.sign(E)*T:f-=E,f<=-1&&(f=-.99999999),f>1e3&&(f=1e3),h++}let m=s(f);if(Math.abs(m)<1e-10)return f;let v,b;if(m>0){for(v=f,b=f+.1;s(b)>0&&b<1e3;)b=b*2+.1;if(b>=1e3)return f}else{for(b=f,v=Math.max(-.99999999,f-.1);s(v)<0&&v>-.99999999;)v=Math.max(-.99999999,v-.1);if(v<=-.99999999)return f}let x;for(let C=0;C<1e3;C++){x=(v+b)/2;const w=s(x);if(Math.abs(w)<1e-10||Math.abs(b-v)<1e-10)return x;w*s(v)<0?b=x:v=x}return x}()}function dPe(t,e,n,r){return t=oe(t),e=oe(e),n=oe(n),r=oe(r),ze(t,e,n,r)?xe:r*t*(e/n-1)}function hPe(t,e,n){if(t=ft(Ye(t)),e=oe(e),n=oe(n),ze(t,e,n))return xe;const r=t.length,i=[],o=[];for(let l=0;l<r;l++)t[l]<0?i.push(t[l]):o.push(t[l]);const a=-B4(n,o)*Math.pow(1+n,r-1),s=B4(e,i)*(1+e);return Math.pow(a/s,1/(r-1))-1}function pPe(t,e){return t=oe(t),e=oe(e),ze(t,e)?xe:t<=0||e<1?ke:(e=parseInt(e,10),(Math.pow(t+1,1/e)-1)*e)}function mPe(t,e,n,r,i){if(i=i===void 0?0:i,r=r===void 0?0:r,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i))return xe;if(t===0)return-(n+r)/e;{const o=e*(1+t*i)-r*t,a=n*t+e*(1+t*i);return Math.log(o/a)/Math.log(1+t)}}function B4(){const t=ft(Ye(arguments));if(t instanceof Error)return t;const e=t[0];let n=0;for(let r=1;r<t.length;r++)n+=t[r]/Math.pow(1+e,r);return n}function gPe(t,e,n){return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:t<=0?ke:(Math.log(n)-Math.log(e))/Math.log(1+t)}function kv(t,e,n,r,i){if(r=r||0,i=i||0,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i))return xe;let o;if(t===0)o=(n+r)/e;else{const a=Math.pow(1+t,e);o=i===1?(r*t/(a-1)+n*t/(1-1/a))/(1+t):r*t/(a-1)+n*t/(1-1/a)}return-o}function vPe(t,e,n,r,i,o){return i=i||0,o=o||0,t=oe(t),n=oe(n),r=oe(r),i=oe(i),o=oe(o),ze(t,n,r,i,o)?xe:kv(t,n,r,i,o)-mJ(t,e,n,r,i,o)}function bPe(t,e,n,r,i){if(t=cn(t),e=cn(e),n=oe(n),r=oe(r),i=oe(i),i=i||0,ze(t,e,n,r,i))return xe;if(n<=0||r<=0)return ke;if(t>=e)return xe;let o,a;switch(i){case 0:o=360,a=Cf(t,e,!1);break;case 1:o=365,a=lf(t,e,"D");break;case 2:o=360,a=lf(t,e,"D");break;case 3:o=365,a=lf(t,e,"D");break;case 4:o=360,a=Cf(t,e,!0);break;default:return ke}return r-n*r*a/o}function yPe(t,e,n,r,i){return r=r||0,i=i||0,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),ze(t,e,n,r,i)?xe:t===0?-n*e-r:((1-Math.pow(1+t,e))/t*n*(1+t*i)-r)/Math.pow(1+t,e)}function xPe(t,e,n,r,i,o){if(o=o===void 0?.1:o,r=r===void 0?0:r,i=i===void 0?0:i,t=oe(t),e=oe(e),n=oe(n),r=oe(r),i=oe(i),o=oe(o),ze(t,e,n,r,i,o))return xe;const a=1e-10,s=100;let l=o;i=i?1:0;for(let u=0;u<s;u++){if(l<=-1)return ke;let c,f;if(Math.abs(l)<a?c=n*(1+t*l)+e*(1+l*i)*t+r:(f=Math.pow(1+l,t),c=n*f+e*(1/l+i)*(f-1)+r),Math.abs(c)<a)return l;let d;if(Math.abs(l)<a)d=n*t+e*i*t;else{f=Math.pow(1+l,t);const h=t*Math.pow(1+l,t-1);d=n*h+e*(1/l+i)*h+e*(-1/(l*l))*(f-1)}l-=c/d}return l}function wPe(t,e,n){return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:t===0||e===0?ke:Math.pow(n/e,1/t)-1}function EPe(t,e,n){return t=oe(t),e=oe(e),n=oe(n),ze(t,e,n)?xe:n===0?ke:(t-e)/n}function CPe(t,e,n,r){return t=oe(t),e=oe(e),n=oe(n),r=oe(r),ze(t,e,n,r)?xe:n===0||r<1||r>n?ke:(r=parseInt(r,10),(t-e)*(n-r+1)*2/(n*(n+1)))}function SPe(t,e,n){return t=cn(t),e=cn(e),n=oe(n),ze(t,e,n)?xe:n<=0||t>e||e-t>365*24*60*60*1e3?ke:365*n/(360-n*Cf(t,e,!1))}function TPe(t,e,n){return t=cn(t),e=cn(e),n=oe(n),ze(t,e,n)?xe:n<=0||t>e||e-t>365*24*60*60*1e3?ke:100*(1-n*Cf(t,e,!1)/360)}function APe(t,e,n){return t=cn(t),e=cn(e),n=oe(n),ze(t,e,n)?xe:n<=0||t>e||e-t>365*24*60*60*1e3?ke:(100-n)*360/(n*Cf(t,e,!1))}function NPe(t,e,n){if(t=ft(Ye(t)),e=UQ(Ye(e)),n=oe(n),ze(t,e,n))return xe;const r=(h,m,v)=>{const b=v+1;let x=h[0];for(let C=1;C<h.length;C++)x+=h[C]/Math.pow(b,Hd(m[C],m[0])/365);return x},i=(h,m,v)=>{const b=v+1;let x=0;for(let C=1;C<h.length;C++){const w=Hd(m[C],m[0])/365;x-=w*h[C]/Math.pow(b,w+1)}return x};let o=!1,a=!1;for(let h=0;h<t.length;h++)t[h]>0&&(o=!0),t[h]<0&&(a=!0);if(!o||!a)return ke;n=n||.1;let s=n;const l=1e-10;let u,c,f,d=!0;do f=r(t,e,s),u=s-f/i(t,e,s),c=Math.abs(u-s),s=u,d=c>l&&Math.abs(f)>l;while(d);return s}function DPe(t,e,n){if(t=oe(t),e=ft(Ye(e)),n=UQ(Ye(n)),ze(t,e,n))return xe;let r=0;for(let i=0;i<e.length;i++)r+=e[i]/Math.pow(1+t,Hd(n[i],n[0])/365);return r}function MPe(){const t=Ye(arguments);let e=xe;for(let n=0;n<t.length;n++){if(t[n]instanceof Error)return t[n];t[n]===void 0||t[n]===null||typeof t[n]=="string"||(e===xe&&(e=!0),t[n]||(e=!1))}return e}function kPe(){return!1}function _Pe(t,e,n){return t instanceof Error?t:(e=arguments.length>=2?e:!0,e==null&&(e=0),n=arguments.length===3?n:!1,n==null&&(n=0),t?e:n)}function OPe(){for(let t=0;t<arguments.length/2;t++)if(arguments[t*2])return arguments[t*2+1];return Tt}function IPe(t,e){return VC(t)?e:t}function RPe(t,e){return t===Tt?e:t}function BPe(t){return typeof t=="string"?xe:t instanceof Error?t:!t}function LPe(){const t=Ye(arguments);let e=xe;for(let n=0;n<t.length;n++){if(t[n]instanceof Error)return t[n];t[n]===void 0||t[n]===null||typeof t[n]=="string"||(e===xe&&(e=!1),t[n]&&(e=!0))}return e}function FPe(){return!0}function PPe(){const t=Ye(arguments);let e=xe;for(let n=0;n<t.length;n++){if(t[n]instanceof Error)return t[n];t[n]===void 0||t[n]===null||typeof t[n]=="string"||(e===xe&&(e=0),t[n]&&e++)}return e===xe?e:!!(Math.floor(Math.abs(e))&1)}function $Pe(){let t;if(arguments.length>0){const e=arguments[0],n=arguments.length-1,r=Math.floor(n/2);let i=!1;const o=n%2!==0,a=n%2===0?null:arguments[arguments.length-1];if(r){for(let s=0;s<r;s++)if(e===arguments[s*2+1]){t=arguments[s*2+2],i=!0;break}}i||(t=o?a:Tt)}else t=xe;return t}const zPe={errors:NRe,symbols:kBe,date:kRe},UPe=Object.freeze(Object.defineProperty({__proto__:null,ABS:u7e,ACCRINT:ePe,ACOS:c7e,ACOSH:f7e,ACOT:d7e,ACOTH:h7e,AGGREGATE:p7e,AND:MPe,ARABIC:m7e,ASIN:g7e,ASINH:v7e,ATAN:b7e,ATAN2:y7e,ATANH:x7e,AVEDEV:M9e,AVERAGE:ah,AVERAGEA:y5,AVERAGEIF:k9e,AVERAGEIFS:_9e,BASE:w7e,BESSELI:KBe,BESSELJ:XBe,BESSELK:ZBe,BESSELY:QBe,BETA:Av,BETADIST:BLe,BETAINV:LLe,BIN2DEC:JBe,BIN2HEX:eLe,BIN2OCT:tLe,BINOM:s0,BINOMDIST:FLe,BITAND:nLe,BITLSHIFT:rLe,BITOR:iLe,BITRSHIFT:oLe,BITXOR:aLe,CEILING:Gu,CEILINGMATH:PLe,CEILINGPRECISE:$Le,CHAR:YQ,CHIDIST:zLe,CHIDISTRT:ULe,CHIINV:HLe,CHIINVRT:VLe,CHISQ:ll,CHITEST:qLe,CHOOSE:XRe,CLEAN:a9e,CODE:WQ,COLUMN:ZRe,COLUMNS:QRe,COMBIN:tm,COMBINA:E7e,COMPLEX:fo,CONCAT:s9e,CONCATENATE:KQ,CONFIDENCE:x5,CONVERT:sLe,CORREL:O9e,COS:C7e,COSH:S7e,COT:T7e,COTH:A7e,COUNT:j1,COUNTA:G1,COUNTBLANK:ZQ,COUNTIF:I9e,COUNTIFS:R9e,COUPDAYS:tPe,COVAR:jLe,COVARIANCE:l0,COVARIANCEP:GLe,COVARIANCES:YLe,CRITBINOM:WLe,CSC:N7e,CSCH:D7e,CUMIPMT:nPe,CUMPRINC:rPe,DATE:IBe,DATEDIF:lf,DATEVALUE:RBe,DAVERAGE:UFe,DAY:BBe,DAYS:Hd,DAYS360:Cf,DB:iPe,DCOUNT:HFe,DCOUNTA:VFe,DDB:oPe,DEC2BIN:lLe,DEC2HEX:uLe,DEC2OCT:cLe,DECIMAL:M7e,DEGREES:k7e,DELTA:fLe,DEVSQ:B9e,DGET:qFe,DISC:aPe,DMAX:jFe,DMIN:GFe,DOLLAR:l9e,DOLLARDE:sPe,DOLLARFR:lPe,DPRODUCT:YFe,DSTDEV:WFe,DSTDEVP:KFe,DSUM:XFe,DVAR:ZFe,DVARP:QFe,EDATE:LBe,EFFECT:uPe,EOMONTH:FBe,ERF:uJ,ERFC:cJ,ERFCPRECISE:KLe,ERFPRECISE:XLe,ERROR:HQ,EVEN:_7e,EXACT:u9e,EXP:O7e,EXPON:w5,EXPONDIST:ZLe,F:ul,FACT:Pu,FACTDOUBLE:oJ,FALSE:kPe,FDIST:QLe,FDISTRT:JLe,FIND:c9e,FINV:eFe,FINVRT:tFe,FISHER:L9e,FISHERINV:F9e,FIXED:XQ,FLOOR:Ef,FLOORMATH:nFe,FLOORPRECISE:rFe,FORECAST:QQ,FREQUENCY:P9e,FTEST:iFe,FV:uh,FVSCHEDULE:cPe,GAMMA:Nv,GAMMADIST:oFe,GAMMAINV:aFe,GAMMALN:E5,GAMMALNPRECISE:sFe,GAUSS:$9e,GCD:I7e,GEOMEAN:z9e,GESTEP:dLe,GROWTH:U9e,HARMEAN:H9e,HEX2BIN:hLe,HEX2DEC:pLe,HEX2OCT:mLe,HLOOKUP:JRe,HOUR:PBe,HYPGEOM:C5,HYPGEOMDIST:lFe,IF:_Pe,IFERROR:IPe,IFNA:RPe,IFS:OPe,IMABS:I5,IMAGINARY:dr,IMARGUMENT:R5,IMCONJUGATE:gLe,IMCOS:YC,IMCOSH:fJ,IMCOT:vLe,IMCSC:NLe,IMCSCH:DLe,IMDIV:Ch,IMEXP:bLe,IMLN:yLe,IMLOG10:xLe,IMLOG2:wLe,IMPOWER:ELe,IMPRODUCT:CLe,IMREAL:hr,IMSEC:SLe,IMSECH:TLe,IMSIN:WC,IMSINH:dJ,IMSQRT:ALe,IMSUB:MLe,IMSUM:kLe,IMTAN:_Le,INDEX:e9e,INT:R7e,INTERCEPT:V9e,IPMT:mJ,IRR:fPe,ISBLANK:HRe,ISERR:VQ,ISERROR:VC,ISEVEN:VRe,ISLOGICAL:qQ,ISNA:qRe,ISNONTEXT:jRe,ISNUMBER:qC,ISO:B7e,ISODD:GRe,ISOWEEKNUM:lJ,ISPMT:dPe,ISTEXT:jQ,KURT:q9e,LARGE:JQ,LCM:L7e,LEFT:f9e,LEN:d9e,LINEST:S5,LN:F7e,LOG:P7e,LOG10:$7e,LOGEST:j9e,LOGINV:uFe,LOGNORM:u0,LOGNORMDIST:cFe,LOGNORMINV:fFe,LOOKUP:t9e,LOWER:h9e,MATCH:n9e,MAX:Lw,MAXA:G9e,MAXIFS:Y9e,MEDIAN:eJ,MID:p9e,MIN:Fw,MINA:W9e,MINIFS:K9e,MINUTE:$Be,MIRR:hPe,MMULT:z7e,MOD:U7e,MODE:sh,MODEMULT:dFe,MODESNGL:hFe,MONTH:zBe,MROUND:H7e,MULTINOMIAL:V7e,MUNIT:q7e,N:YRe,NA:WRe,NEGBINOM:T5,NEGBINOMDIST:pFe,NETWORKDAYS:jC,NETWORKDAYSINTL:mFe,NOMINAL:pPe,NORM:cl,NORMDIST:gFe,NORMINV:vFe,NORMSDIST:bFe,NORMSINV:yFe,NOT:BPe,NOW:UBe,NPER:mPe,NPV:B4,NUMBERVALUE:m9e,OCT2BIN:OLe,OCT2DEC:ILe,OCT2HEX:RLe,ODD:j7e,OR:LPe,PDURATION:gPe,PEARSON:tJ,PERCENTILE:Ta,PERCENTILEEXC:xFe,PERCENTILEINC:wFe,PERCENTRANK:Dv,PERCENTRANKEXC:EFe,PERCENTRANKINC:CFe,PERMUT:X9e,PERMUTATIONA:Z9e,PHI:Q9e,PI:G7e,PMT:kv,POISSON:A5,POISSONDIST:SFe,POWER:aJ,PPMT:vPe,PRICEDISC:bPe,PROB:J9e,PRODUCT:Pw,PROPER:g9e,PV:yPe,QUARTILE:lh,QUARTILEEXC:TFe,QUARTILEINC:AFe,QUOTIENT:Y7e,RADIANS:W7e,RAND:K7e,RANDBETWEEN:X7e,RANK:Mv,RANKAVG:NFe,RANKEQ:DFe,RATE:xPe,REPLACE:v9e,REPT:_a,RIGHT:b9e,ROMAN:Z7e,ROUND:sJ,ROUNDDOWN:Q7e,ROUNDUP:J7e,ROW:e7e,ROWS:r9e,RRI:wPe,RSQ:t7e,SEARCH:y9e,SEC:eBe,SECH:tBe,SECOND:HBe,SERIESSUM:nBe,SIGN:rBe,SIN:iBe,SINH:oBe,SKEW:N5,SKEWP:MFe,SLN:EPe,SLOPE:n7e,SMALL:nJ,SORT:i9e,SQRT:aBe,SQRTPI:sBe,STANDARDIZE:r7e,STDEV:Qo,STDEVA:i7e,STDEVP:kFe,STDEVPA:o7e,STDEVS:_Fe,STEYX:a7e,SUBSTITUTE:x9e,SUBTOTAL:lBe,SUM:Yu,SUMIF:uBe,SUMIFS:cBe,SUMPRODUCT:fBe,SUMSQ:dBe,SUMX2MY2:hBe,SUMX2PY2:pBe,SUMXMY2:mBe,SWITCH:$Pe,SYD:CPe,T:ra,TAN:gBe,TANH:vBe,TBILLEQ:SPe,TBILLPRICE:TPe,TBILLYIELD:APe,TDIST:OFe,TDISTRT:IFe,TEXT:w9e,TEXTJOIN:E9e,TIME:VBe,TIMEVALUE:qBe,TINV:RFe,TODAY:jBe,TRANSPOSE:o9e,TREND:s7e,TRIM:C9e,TRIMMEAN:l7e,TRUE:FPe,TRUNC:bBe,TTEST:BFe,TYPE:KRe,UNICHAR:S9e,UNICODE:T9e,UNIQUE:b5,UPPER:A9e,VALUE:N9e,VAR:yo,VARA:rJ,VARP:LFe,VARPA:iJ,VARS:FFe,VLOOKUP:GQ,WEEKDAY:GBe,WEEKNUM:YBe,WEIBULL:D5,WEIBULLDIST:PFe,WORKDAY:GC,WORKDAYINTL:$Fe,XIRR:NPe,XNPV:DPe,XOR:PPe,YEAR:WBe,YEARFRAC:_5,Z:M5,ZTEST:zFe,utils:zPe},Symbol.toStringTag,{value:"Module"}));var gJ={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function Eo(t,e){if(Uw(t,e))return t[e];throw typeof t[e]=="function"&&L5(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Dm(t,e,n){if(Uw(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Uw(t,e){return!VPe(t)&&!Array.isArray(t)?!1:mt(qPe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function HPe(t,e){if(!L5(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function L5(t,e){return t==null||typeof t[e]!="function"||mt(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:mt(jPe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function VPe(t){return typeof t=="object"&&t&&t.constructor===Object}var qPe={length:!0,name:!0},jPe={toString:!0,valueOf:!0,toLocaleString:!0};class KC{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Eo(this.wrappedObject,e)}set(e,n){return Dm(this.wrappedObject,e,n),this}has(e){return Uw(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return bJ(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){Uw(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class vJ{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return bJ(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function bJ(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function Y1(){return new Map}function nm(t){if(!t)return Y1();if(wJ(t))return t;if(ZC(t))return new KC(t);throw new Error("createMap can create maps from objects or Maps")}function GPe(t){if(t instanceof KC)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);Dm(e,n,r)}return e}function Dt(t){return typeof t=="number"}function Gt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function u1(t){return typeof t=="bigint"}function $u(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function _v(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function xa(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Pr(t){return typeof t=="string"}var Kn=Array.isArray;function Ot(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Oa(t){return Array.isArray(t)||Ot(t)}function Hw(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function _d(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function F5(t){return t&&t.constructor.prototype.isRange===!0||!1}function XC(t){return t&&t.constructor.prototype.isIndex===!0||!1}function YPe(t){return typeof t=="boolean"}function WPe(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function yJ(t){return t&&t.constructor.prototype.isHelp===!0||!1}function xJ(t){return typeof t=="function"}function KPe(t){return t instanceof Date}function XPe(t){return t instanceof RegExp}function ZC(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!$u(t)&&!_v(t))}function wJ(t){return t?t instanceof Map||t instanceof KC||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function ZPe(t){return t===null}function QPe(t){return t===void 0}function Wu(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function es(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function JPe(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function e$e(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function t$e(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function yn(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function L4(t){return yn(t)||qr(t)&&t.args.length===1&&yn(t.args[0])&&"-+~".includes(t.op)}function Ov(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Sf(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function c0(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function jn(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function QC(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function qr(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ku(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function n$e(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function r$e(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Si(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function EJ(t){return t&&t.constructor.prototype.isChain===!0||!1}function Zn(t){var e=typeof t;return e==="object"?t===null?"null":Gt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Ht(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Ht(n)});if(t instanceof Date)return new Date(t.valueOf());if(Gt(t))return t;if(ZC(t))return i$e(t,Ht);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function i$e(t,e){var n={};for(var r in t)mt(t,r)&&(n[r]=e(t[r]));return n}function CJ(t,e){for(var n in e)mt(e,n)&&(t[n]=e[n]);return t}function Xu(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!Xu(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Xu(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function o$e(t,e,n){var r=!0,i;Object.defineProperty(t,e,{get:function(){return r&&(i=n(),r=!1),i},set:function(a){i=a,r=!1},configurable:!0,enumerable:!0})}function mt(t,e){return t&&Object.hasOwnProperty.call(t,e)}function a$e(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=t[i];o!==void 0&&(n[i]=o)}return n}var s$e=["Matrix","Array"],l$e=["number","BigNumber","bigint","Fraction"],He=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(gJ)};jr(He,gJ,{MATRIX_OPTIONS:s$e,NUMBER_OPTIONS:l$e});function eP(){return!0}function Wa(){return!1}function wp(){}const tP="Argument is not a typed-function.";function SJ(){function t(J){return typeof J=="object"&&J!==null&&J.constructor===Object}const e=[{name:"number",test:function(J){return typeof J=="number"}},{name:"string",test:function(J){return typeof J=="string"}},{name:"boolean",test:function(J){return typeof J=="boolean"}},{name:"Function",test:function(J){return typeof J=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(J){return J instanceof Date}},{name:"RegExp",test:function(J){return J instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(J){return J===null}},{name:"undefined",test:function(J){return J===void 0}}],n={name:"any",test:eP,isAny:!0};let r,i,o=0,a={createCount:0};function s(J){const ae=r.get(J);if(ae)return ae;let ge='Unknown type "'+J+'"';const se=J.toLowerCase();let fe;for(fe of i)if(fe.toLowerCase()===se){ge+='. Did you mean "'+fe+'" ?';break}throw new TypeError(ge)}function l(J){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ge=ae?s(ae).index:i.length,se=[];for(let we=0;we<J.length;++we){if(!J[we]||typeof J[we].name!="string"||typeof J[we].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Be=J[we].name;if(r.has(Be))throw new TypeError('Duplicate type name "'+Be+'"');se.push(Be),r.set(Be,{name:Be,test:J[we].test,isAny:J[we].isAny,index:ge+we,conversionsTo:[]})}const fe=i.slice(ge);i=i.slice(0,ge).concat(se).concat(fe);for(let we=ge+se.length;we<i.length;++we)r.get(i[we]).index=we}function u(){r=new Map,i=[],o=0,l([n],!1)}u(),l(e);function c(){let J;for(J of i)r.get(J).conversionsTo=[];o=0}function f(J){const ae=i.filter(ge=>{const se=r.get(ge);return!se.isAny&&se.test(J)});return ae.length?ae:["any"]}function d(J){return J&&typeof J=="function"&&"_typedFunctionData"in J}function h(J,ae,ge){if(!d(J))throw new TypeError(tP);const se=ge&&ge.exact,fe=Array.isArray(ae)?ae.join(","):ae,we=A(fe),Be=b(we);if(!se||Be in J.signatures){const ht=J._typedFunctionData.signatureMap.get(Be);if(ht)return ht}const Oe=we.length;let Je;if(se){Je=[];let ht;for(ht in J.signatures)Je.push(J._typedFunctionData.signatureMap.get(ht))}else Je=J._typedFunctionData.signatures;for(let ht=0;ht<Oe;++ht){const Ct=we[ht],Ut=[];let pt;for(pt of Je){const _n=D(pt.params,ht);if(!(!_n||Ct.restParam&&!_n.restParam)){if(!_n.hasAny){const V=w(_n);if(Ct.types.some(be=>!V.has(be.name)))continue}Ut.push(pt)}}if(Je=Ut,Je.length===0)break}let Pe;for(Pe of Je)if(Pe.params.length<=Oe)return Pe;throw new TypeError("Signature not found (signature: "+(J.name||"unnamed")+"("+b(we,", ")+"))")}function m(J,ae,ge){return h(J,ae,ge).implementation}function v(J,ae){const ge=s(ae);if(ge.test(J))return J;const se=ge.conversionsTo;if(se.length===0)throw new Error("There are no conversions to "+ae+" defined.");for(let fe=0;fe<se.length;fe++)if(s(se[fe].from).test(J))return se[fe].convert(J);throw new Error("Cannot convert "+J+" to "+ae)}function b(J){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return J.map(ge=>ge.name).join(ae)}function x(J){const ae=J.indexOf("...")===0,se=(ae?J.length>3?J.slice(3):"any":J).split("|").map(Oe=>s(Oe.trim()));let fe=!1,we=ae?"...":"";return{types:se.map(function(Oe){return fe=Oe.isAny||fe,we+=Oe.name+"|",{name:Oe.name,typeIndex:Oe.index,test:Oe.test,isAny:Oe.isAny,conversion:null,conversionIndex:-1}}),name:we.slice(0,-1),hasAny:fe,hasConversion:!1,restParam:ae}}function C(J){const ae=J.types.map(Be=>Be.name),ge=U(ae);let se=J.hasAny,fe=J.name;const we=ge.map(function(Be){const Oe=s(Be.from);return se=Oe.isAny||se,fe+="|"+Be.from,{name:Be.from,typeIndex:Oe.index,test:Oe.test,isAny:Oe.isAny,conversion:Be,conversionIndex:Be.index}});return{types:J.types.concat(we),name:fe,hasAny:se,hasConversion:we.length>0,restParam:J.restParam}}function w(J){return J.typeSet||(J.typeSet=new Set,J.types.forEach(ae=>J.typeSet.add(ae.name))),J.typeSet}function A(J){const ae=[];if(typeof J!="string")throw new TypeError("Signatures must be strings");const ge=J.trim();if(ge==="")return ae;const se=ge.split(",");for(let fe=0;fe<se.length;++fe){const we=x(se[fe].trim());if(we.restParam&&fe!==se.length-1)throw new SyntaxError('Unexpected rest parameter "'+se[fe]+'": only allowed for the last parameter');if(we.types.length===0)return null;ae.push(we)}return ae}function E(J){const ae=X(J);return ae?ae.restParam:!1}function T(J){if(!J||J.types.length===0)return eP;if(J.types.length===1)return s(J.types[0].name).test;if(J.types.length===2){const ae=s(J.types[0].name).test,ge=s(J.types[1].name).test;return function(fe){return ae(fe)||ge(fe)}}else{const ae=J.types.map(function(ge){return s(ge.name).test});return function(se){for(let fe=0;fe<ae.length;fe++)if(ae[fe](se))return!0;return!1}}}function N(J){let ae,ge,se;if(E(J)){ae=ie(J).map(T);const fe=ae.length,we=T(X(J)),Be=function(Oe){for(let Je=fe;Je<Oe.length;Je++)if(!we(Oe[Je]))return!1;return!0};return function(Je){for(let Pe=0;Pe<ae.length;Pe++)if(!ae[Pe](Je[Pe]))return!1;return Be(Je)&&Je.length>=fe+1}}else return J.length===0?function(we){return we.length===0}:J.length===1?(ge=T(J[0]),function(we){return ge(we[0])&&we.length===1}):J.length===2?(ge=T(J[0]),se=T(J[1]),function(we){return ge(we[0])&&se(we[1])&&we.length===2}):(ae=J.map(T),function(we){for(let Be=0;Be<ae.length;Be++)if(!ae[Be](we[Be]))return!1;return we.length===ae.length})}function D(J,ae){return ae<J.length?J[ae]:E(J)?X(J):null}function M(J,ae){const ge=D(J,ae);return ge?w(ge):new Set}function k(J){return J.conversion===null||J.conversion===void 0}function B(J,ae){const ge=new Set;return J.forEach(se=>{const fe=M(se.params,ae);let we;for(we of fe)ge.add(we)}),ge.has("any")?["any"]:Array.from(ge)}function P(J,ae,ge){let se,fe;const we=J||"unnamed";let Be=ge,Oe;for(Oe=0;Oe<ae.length;Oe++){const Ct=[];if(Be.forEach(Ut=>{const pt=D(Ut.params,Oe),_n=T(pt);(Oe<Ut.params.length||E(Ut.params))&&_n(ae[Oe])&&Ct.push(Ut)}),Ct.length===0){if(fe=B(Be,Oe),fe.length>0){const Ut=f(ae[Oe]);return se=new TypeError("Unexpected type of argument in function "+we+" (expected: "+fe.join(" or ")+", actual: "+Ut.join(" | ")+", index: "+Oe+")"),se.data={category:"wrongType",fn:we,index:Oe,actual:Ut,expected:fe},se}}else Be=Ct}const Je=Be.map(function(Ct){return E(Ct.params)?1/0:Ct.params.length});if(ae.length<Math.min.apply(null,Je))return fe=B(Be,Oe),se=new TypeError("Too few arguments in function "+we+" (expected: "+fe.join(" or ")+", index: "+ae.length+")"),se.data={category:"tooFewArgs",fn:we,index:ae.length,expected:fe},se;const Pe=Math.max.apply(null,Je);if(ae.length>Pe)return se=new TypeError("Too many arguments in function "+we+" (expected: "+Pe+", actual: "+ae.length+")"),se.data={category:"tooManyArgs",fn:we,index:ae.length,expectedLength:Pe},se;const ht=[];for(let Ct=0;Ct<ae.length;++Ct)ht.push(f(ae[Ct]).join("|"));return se=new TypeError('Arguments of type "'+ht.join(", ")+'" do not match any of the defined signatures of function '+we+"."),se.data={category:"mismatch",actual:ht},se}function $(J){let ae=i.length+1;for(let ge=0;ge<J.types.length;ge++)ae=Math.min(ae,J.types[ge].typeIndex);return ae}function z(J){let ae=o+1;for(let ge=0;ge<J.types.length;ge++)k(J.types[ge])||(ae=Math.min(ae,J.types[ge].conversionIndex));return ae}function j(J,ae){if(J.hasAny){if(!ae.hasAny)return .1}else if(ae.hasAny)return-.1;if(J.restParam){if(!ae.restParam)return .01}else if(ae.restParam)return-.01;const ge=$(J)-$(ae);if(ge<0)return-.001;if(ge>0)return .001;const se=z(J),fe=z(ae);if(J.hasConversion){if(!ae.hasConversion)return(1+se)*1e-6}else if(ae.hasConversion)return-(1+fe)*1e-6;const we=se-fe;return we<0?-1e-7:we>0?1e-7:0}function L(J,ae){const ge=J.params,se=ae.params,fe=X(ge),we=X(se),Be=E(ge),Oe=E(se);if(Be&&fe.hasAny){if(!Oe||!we.hasAny)return 1e7}else if(Oe&&we.hasAny)return-1e7;let Je=0,Pe=0,ht;for(ht of ge)ht.hasAny&&++Je,ht.hasConversion&&++Pe;let Ct=0,Ut=0;for(ht of se)ht.hasAny&&++Ct,ht.hasConversion&&++Ut;if(Je!==Ct)return(Je-Ct)*1e6;if(Be&&fe.hasConversion){if(!Oe||!we.hasConversion)return 1e5}else if(Oe&&we.hasConversion)return-1e5;if(Pe!==Ut)return(Pe-Ut)*1e4;if(Be){if(!Oe)return 1e3}else if(Oe)return-1e3;const pt=(ge.length-se.length)*(Be?-100:100);if(pt!==0)return pt;const _n=[];let V=0;for(let gt=0;gt<ge.length;++gt){const At=j(ge[gt],se[gt]);_n.push(At),V+=At}if(V!==0)return(V<0?-10:10)+V;let be,Ie=9;const Xe=Ie/(_n.length+1);for(be of _n){if(be!==0)return(be<0?-Ie:Ie)+be;Ie-=Xe}return 0}function U(J){if(J.length===0)return[];const ae=J.map(s);if(J.length===1)return ae[0].conversionsTo;const ge=new Set(J),se=new Set;for(let we=0;we<ae.length;++we)for(const Be of ae[we].conversionsTo)ge.has(Be.from)||se.add(Be.from);const fe=[];for(const we of se){let Be=o+1,Oe=null;for(let Je=0;Je<ae.length;++Je)for(const Pe of ae[Je].conversionsTo)Pe.from===we&&Pe.index<Be&&(Be=Pe.index,Oe=Pe);fe.push(Oe)}return fe}function G(J,ae){let ge=ae,se="";if(J.some(we=>we.hasConversion)){const we=E(J),Be=J.map(Z);se=Be.map(Oe=>Oe.name).join(";"),ge=function(){const Je=[],Pe=we?arguments.length-1:arguments.length;for(let ht=0;ht<Pe;ht++)Je[ht]=Be[ht](arguments[ht]);return we&&(Je[Pe]=arguments[Pe].map(Be[Pe])),ae.apply(this,Je)}}let fe=ge;if(E(J)){const we=J.length-1;fe=function(){return ge.apply(this,le(arguments,0,we).concat([le(arguments,we)]))}}return se&&Object.defineProperty(fe,"name",{value:se}),fe}function Z(J){let ae,ge,se,fe;const we=[],Be=[];let Oe="";J.types.forEach(function(Pe){Pe.conversion&&(Oe+=Pe.conversion.from+"~>"+Pe.conversion.to+",",we.push(s(Pe.conversion.from).test),Be.push(Pe.conversion.convert))}),Oe?Oe=Oe.slice(0,-1):Oe="pass";let Je=Pe=>Pe;switch(Be.length){case 0:break;case 1:ae=we[0],se=Be[0],Je=function(ht){return ae(ht)?se(ht):ht};break;case 2:ae=we[0],ge=we[1],se=Be[0],fe=Be[1],Je=function(ht){return ae(ht)?se(ht):ge(ht)?fe(ht):ht};break;default:Je=function(ht){for(let Ct=0;Ct<Be.length;Ct++)if(we[Ct](ht))return Be[Ct](ht);return ht}}return Object.defineProperty(Je,"name",{value:Oe}),Je}function H(J){function ae(ge,se,fe){if(se<ge.length){const we=ge[se];let Be=[];if(we.restParam){const Oe=we.types.filter(k);Oe.length<we.types.length&&Be.push({types:Oe,name:"..."+Oe.map(Je=>Je.name).join("|"),hasAny:Oe.some(Je=>Je.isAny),hasConversion:!1,restParam:!0}),Be.push(we)}else Be=we.types.map(function(Oe){return{types:[Oe],name:Oe.name,hasAny:Oe.isAny,hasConversion:Oe.conversion,restParam:!1}});return he(Be,function(Oe){return ae(ge,se+1,fe.concat([Oe]))})}else return[fe]}return ae(J,0,[])}function W(J,ae){const ge=Math.max(J.length,ae.length);for(let Oe=0;Oe<ge;Oe++){const Je=M(J,Oe),Pe=M(ae,Oe);let ht=!1,Ct;for(Ct of Pe)if(Je.has(Ct)){ht=!0;break}if(!ht)return!1}const se=J.length,fe=ae.length,we=E(J),Be=E(ae);return we?Be?se===fe:fe>=se:Be?se>=fe:se===fe}function K(J){return J.map(ae=>lt(ae)?qe(ae.referToSelf.callback):rt(ae)?Ae(ae.referTo.references,ae.referTo.callback):ae)}function I(J,ae,ge){const se=[];let fe;for(fe of J){let we=ge[fe];if(typeof we!="number")throw new TypeError('No definition for referenced signature "'+fe+'"');if(we=ae[we],typeof we!="function")return!1;se.push(we)}return se}function ee(J,ae,ge){const se=K(J),fe=new Array(se.length).fill(!1);let we=!0;for(;we;){we=!1;let Be=!0;for(let Oe=0;Oe<se.length;++Oe){if(fe[Oe])continue;const Je=se[Oe];if(lt(Je))se[Oe]=Je.referToSelf.callback(ge),se[Oe].referToSelf=Je.referToSelf,fe[Oe]=!0,Be=!1;else if(rt(Je)){const Pe=I(Je.referTo.references,se,ae);Pe?(se[Oe]=Je.referTo.callback.apply(this,Pe),se[Oe].referTo=Je.referTo,fe[Oe]=!0,Be=!1):we=!0}}if(Be&&we)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return se}function Q(J){const ae=/\bthis(\(|\.signatures\b)/;Object.keys(J).forEach(ge=>{const se=J[ge];if(ae.test(se.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ce(J,ae){if(a.createCount++,Object.keys(ae).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&Q(ae);const ge=[],se=[],fe={},we=[];let Be;for(Be in ae){if(!Object.prototype.hasOwnProperty.call(ae,Be))continue;const wn=A(Be);if(!wn)continue;ge.forEach(function(ua){if(W(ua,wn))throw new TypeError('Conflicting signatures "'+b(ua)+'" and "'+b(wn)+'".')}),ge.push(wn);const In=se.length;se.push(ae[Be]);const Zv=wn.map(C);let ed;for(ed of H(Zv)){const ua=b(ed);we.push({params:ed,name:ua,fn:In}),ed.every(lc=>!lc.hasConversion)&&(fe[ua]=In)}}we.sort(L);const Oe=ee(se,fe,As);let Je;for(Je in fe)Object.prototype.hasOwnProperty.call(fe,Je)&&(fe[Je]=Oe[fe[Je]]);const Pe=[],ht=new Map;for(Je of we)ht.has(Je.name)||(Je.fn=Oe[Je.fn],Pe.push(Je),ht.set(Je.name,Je));const Ct=Pe[0]&&Pe[0].params.length<=2&&!E(Pe[0].params),Ut=Pe[1]&&Pe[1].params.length<=2&&!E(Pe[1].params),pt=Pe[2]&&Pe[2].params.length<=2&&!E(Pe[2].params),_n=Pe[3]&&Pe[3].params.length<=2&&!E(Pe[3].params),V=Pe[4]&&Pe[4].params.length<=2&&!E(Pe[4].params),be=Pe[5]&&Pe[5].params.length<=2&&!E(Pe[5].params),Ie=Ct&&Ut&&pt&&_n&&V&&be;for(let wn=0;wn<Pe.length;++wn)Pe[wn].test=N(Pe[wn].params);const Xe=Ct?T(Pe[0].params[0]):Wa,gt=Ut?T(Pe[1].params[0]):Wa,At=pt?T(Pe[2].params[0]):Wa,Xr=_n?T(Pe[3].params[0]):Wa,La=V?T(Pe[4].params[0]):Wa,E0=be?T(Pe[5].params[0]):Wa,qv=Ct?T(Pe[0].params[1]):Wa,C0=Ut?T(Pe[1].params[1]):Wa,Qf=pt?T(Pe[2].params[1]):Wa,vS=_n?T(Pe[3].params[1]):Wa,jv=V?T(Pe[4].params[1]):Wa,Gv=be?T(Pe[5].params[1]):Wa;for(let wn=0;wn<Pe.length;++wn)Pe[wn].implementation=G(Pe[wn].params,Pe[wn].fn);const Yv=Ct?Pe[0].implementation:wp,S0=Ut?Pe[1].implementation:wp,T0=pt?Pe[2].implementation:wp,Wv=_n?Pe[3].implementation:wp,Kv=V?Pe[4].implementation:wp,vl=be?Pe[5].implementation:wp,li=Ct?Pe[0].params.length:-1,Wi=Ut?Pe[1].params.length:-1,oc=pt?Pe[2].params.length:-1,A0=_n?Pe[3].params.length:-1,bS=V?Pe[4].params.length:-1,yS=be?Pe[5].params.length:-1,Xv=Ie?6:0,Jf=Pe.length,N0=Pe.map(wn=>wn.test),ac=Pe.map(wn=>wn.implementation),sc=function(){for(let In=Xv;In<Jf;In++)if(N0[In](arguments))return ac[In].apply(this,arguments);return a.onMismatch(J,arguments,Pe)};function As(wn,In){return arguments.length===li&&Xe(wn)&&qv(In)?Yv.apply(this,arguments):arguments.length===Wi&&gt(wn)&&C0(In)?S0.apply(this,arguments):arguments.length===oc&&At(wn)&&Qf(In)?T0.apply(this,arguments):arguments.length===A0&&Xr(wn)&&vS(In)?Wv.apply(this,arguments):arguments.length===bS&&La(wn)&&jv(In)?Kv.apply(this,arguments):arguments.length===yS&&E0(wn)&&Gv(In)?vl.apply(this,arguments):sc.apply(this,arguments)}try{Object.defineProperty(As,"name",{value:J})}catch{}return As.signatures=fe,As._typedFunctionData={signatures:Pe,signatureMap:ht},As}function ve(J,ae,ge){throw P(J,ae,ge)}function ie(J){return le(J,0,J.length-1)}function X(J){return J[J.length-1]}function le(J,ae,ge){return Array.prototype.slice.call(J,ae,ge)}function Ce(J,ae){for(let ge=0;ge<J.length;ge++)if(ae(J[ge]))return J[ge]}function he(J,ae){return Array.prototype.concat.apply([],J.map(ae))}function Te(){const J=ie(arguments).map(ge=>b(A(ge))),ae=X(arguments);if(typeof ae!="function")throw new TypeError("Callback function expected as last argument");return Ae(J,ae)}function Ae(J,ae){return{referTo:{references:J,callback:ae}}}function qe(J){if(typeof J!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:J}}}function rt(J){return J&&typeof J.referTo=="object"&&Array.isArray(J.referTo.references)&&typeof J.referTo.callback=="function"}function lt(J){return J&&typeof J.referToSelf=="object"&&typeof J.referToSelf.callback=="function"}function Qe(J,ae){if(!J)return ae;if(ae&&ae!==J){const ge=new Error("Function names do not match (expected: "+J+", actual: "+ae+")");throw ge.data={actual:ae,expected:J},ge}return J}function st(J){let ae;for(const ge in J)Object.prototype.hasOwnProperty.call(J,ge)&&(d(J[ge])||typeof J[ge].signature=="string")&&(ae=Qe(ae,J[ge].name));return ae}function dt(J,ae){let ge;for(ge in ae)if(Object.prototype.hasOwnProperty.call(ae,ge)){if(ge in J&&ae[ge]!==J[ge]){const se=new Error('Signature "'+ge+'" is defined twice');throw se.data={signature:ge,sourceFunction:ae[ge],destFunction:J[ge]},se}J[ge]=ae[ge]}}const te=a;a=function(J){const ae=typeof J=="string",ge=ae?1:0;let se=ae?J:"";const fe={};for(let we=ge;we<arguments.length;++we){const Be=arguments[we];let Oe={},Je;if(typeof Be=="function"?(Je=Be.name,typeof Be.signature=="string"?Oe[Be.signature]=Be:d(Be)&&(Oe=Be.signatures)):t(Be)&&(Oe=Be,ae||(Je=st(Be))),Object.keys(Oe).length===0){const Pe=new TypeError("Argument to 'typed' at index "+we+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Pe.data={index:we,argument:Be},Pe}ae||(se=Qe(se,Je)),dt(fe,Oe)}return ce(se||"",fe)},a.create=SJ,a.createCount=te.createCount,a.onMismatch=ve,a.throwMismatchError=ve,a.createError=P,a.clear=u,a.clearConversions=c,a.addTypes=l,a._findType=s,a.referTo=Te,a.referToSelf=qe,a.convert=v,a.findSignature=h,a.find=m,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(J,ae){let ge="any";ae!==!1&&r.has("Object")&&(ge="Object"),a.addTypes([J],ge)};function me(J){if(!J||typeof J.from!="string"||typeof J.to!="string"||typeof J.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(J.to===J.from)throw new SyntaxError('Illegal to define conversion from "'+J.from+'" to itself.')}return a.addConversion=function(J){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};me(J);const ge=s(J.to),se=ge.conversionsTo.find(fe=>fe.from===J.from);if(se)if(ae&&ae.override)a.removeConversion({from:se.from,to:J.to,convert:se.convert});else throw new Error('There is already a conversion from "'+J.from+'" to "'+ge.name+'"');ge.conversionsTo.push({from:J.from,to:ge.name,convert:J.convert,index:o++})},a.addConversions=function(J,ae){J.forEach(ge=>a.addConversion(ge,ae))},a.removeConversion=function(J){me(J);const ae=s(J.to),ge=Ce(ae.conversionsTo,fe=>fe.from===J.from);if(!ge)throw new Error("Attempt to remove nonexistent conversion from "+J.from+" to "+J.to);if(ge.convert!==J.convert)throw new Error("Conversion to remove does not match existing conversion");const se=ae.conversionsTo.indexOf(ge);ae.conversionsTo.splice(se,1)},a.resolve=function(J,ae){if(!d(J))throw new TypeError(tP);const ge=J._typedFunctionData.signatures;for(let se=0;se<ge.length;++se)if(ge[se].test(ae))return ge[se];return null},a}const Vw=SJ();function re(t,e,n,r){function i(o){var a=a$e(o,e.map(f$e));return u$e(t,e,o),n(a)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function u$e(t,e,n){var r=e.filter(o=>!c$e(o)).every(o=>n[o]!==void 0);if(!r){var i=e.filter(o=>n[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function c$e(t){return t&&t[0]==="?"}function f$e(t){return t&&t[0]==="?"?t.slice(1):t}function yt(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function Uf(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var ef=Math.sign||function(t){return t>0?1:t<0?-1:0},d$e=Math.log2||function(e){return Math.log(e)/Math.LN2},h$e=Math.log10||function(e){return Math.log(e)/Math.LN10},p$e=Math.log1p||function(t){return Math.log(t+1)},m$e=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),Number.isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},g$e=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function M3(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!yt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!yt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),o="i".concat(n)}var a="";return t<0&&(t=-t,a="-"),"".concat(a).concat(i).concat(t.toString(e)).concat(o)}function Vd(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=TJ(e);switch(n){case"fixed":return AJ(t,r);case"exponential":return NJ(t,r);case"engineering":return v$e(t,r);case"bin":return M3(t,2,i);case"oct":return M3(t,8,i);case"hex":return M3(t,16,i);case"auto":return b$e(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function TJ(t){var e="auto",n,r;if(t!==void 0)if(Dt(t))n=t;else if(Gt(t))n=t.toNumber();else if(ZC(t))t.precision!==void 0&&(n=nP(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=nP(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function Iv(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=o!==-1?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return a.length===0&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function v$e(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=Iv(t),r=JC(n,e),i=r.exponent,o=r.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Dt(e))for(;e>o.length||i-a+1>o.length;)o.push(0);else for(var s=Math.abs(i-a)-(o.length-1),l=0;l<s;l++)o.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var f=o.slice(c).join(""),d=Dt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=o.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+a.toString();return r.sign+h}function AJ(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=Iv(t),r=typeof e=="number"?JC(n,n.exponent+1+e):n,i=r.coefficients,o=r.exponent+1,a=o+(e||0);return i.length<a&&(i=i.concat(rm(a-i.length))),o<0&&(i=rm(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),r.sign+i.join("")}function NJ(t,e){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var n=Iv(t),r=e?JC(n,e):n,i=r.coefficients,o=r.exponent;i.length<e&&(i=i.concat(rm(e-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function b$e(t,e,n){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=rP(n?.lowerExp,-3),i=rP(n?.upperExp,5),o=Iv(t),a=e?JC(o,e):o;if(a.exponent<r||a.exponent>=i)return NJ(t,e);var s=a.coefficients,l=a.exponent;s.length<e&&(s=s.concat(rm(e-s.length))),s=s.concat(rm(l-s.length+1+(s.length<e?e-s.length:0))),s=rm(-l).concat(s);var u=l>0?l:0;return u<s.length-1&&s.splice(u+1,0,"."),a.sign+s.join("")}function JC(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var o=e-1;for(r[o]++;r[o]===10;)r.pop(),o===0&&(r.unshift(0),n.exponent++,o++),o--,r[o]++}}return n}function rm(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function y$e(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Mi(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!Number.isFinite(t)||!Number.isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var x$e=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},w$e=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},E$e=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},C$e=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},S$e=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},T$e=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function A$e(t,e){var n=!0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function nP(t,e){if(Dt(t))return t;if(Gt(t))return t.toNumber();e()}function rP(t,e){return Dt(t)?t:Gt(t)?t.toNumber():e}var DJ=function(){return DJ=Vw.create,Vw},N$e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],D$e=re("typed",N$e,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:o}=e,a=DJ();return a.clear(),a.addTypes([{name:"number",test:Dt},{name:"Complex",test:$u},{name:"BigNumber",test:Gt},{name:"bigint",test:u1},{name:"Fraction",test:_v},{name:"Unit",test:xa},{name:"identifier",test:s=>Pr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:Pr},{name:"Chain",test:EJ},{name:"Array",test:Kn},{name:"Matrix",test:Ot},{name:"DenseMatrix",test:Hw},{name:"SparseMatrix",test:_d},{name:"Range",test:F5},{name:"Index",test:XC},{name:"boolean",test:YPe},{name:"ResultSet",test:WPe},{name:"Help",test:yJ},{name:"function",test:xJ},{name:"Date",test:KPe},{name:"RegExp",test:XPe},{name:"null",test:ZPe},{name:"undefined",test:QPe},{name:"AccessorNode",test:Wu},{name:"ArrayNode",test:es},{name:"AssignmentNode",test:JPe},{name:"BlockNode",test:e$e},{name:"ConditionalNode",test:t$e},{name:"ConstantNode",test:yn},{name:"FunctionNode",test:Sf},{name:"FunctionAssignmentNode",test:Ov},{name:"IndexNode",test:c0},{name:"Node",test:jn},{name:"ObjectNode",test:QC},{name:"OperatorNode",test:qr},{name:"ParenthesisNode",test:Ku},{name:"RangeNode",test:n$e},{name:"RelationalNode",test:r$e},{name:"SymbolNode",test:Si},{name:"Map",test:wJ},{name:"Object",test:ZC}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(n||Qy(l),y$e(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new n(l)}},{from:"number",to:"Complex",convert:function(l){return r||Jy(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||Jy(l),new r(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return n||Qy(l),new n(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return o||e2(l),new o(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||Jy(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||e2(l);var u=new o(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){n||Qy(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){o||e2(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||Jy(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return n||Qy(l),new n(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||e2(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||M$e(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(s,l,u)=>{var c=a.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Oa(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},a.onMismatch=(s,l,u)=>{var c=a.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Oa(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},a});function Qy(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Jy(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function M$e(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function e2(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var k$e="ResultSet",_$e=[],O$e=re(k$e,_$e,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});var $p=9e15,Hf=1e9,F4="0123456789abcdef",qw="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",jw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",P4={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-$p,maxE:$p,crypto:!1},MJ,Du,jt=!0,eS="[DecimalError] ",Tf=eS+"Invalid argument: ",kJ=eS+"Precision limit exceeded",_J=eS+"crypto unavailable",OJ="[object Decimal]",ao=Math.floor,ci=Math.pow,I$e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,R$e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,B$e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,IJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hs=1e7,Ft=7,L$e=9007199254740991,F$e=qw.length-1,$4=jw.length-1,Ke={toStringTag:OJ};Ke.absoluteValue=Ke.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Mt(t)};Ke.ceil=function(){return Mt(new this.constructor(this),this.e+1,2)};Ke.clampedTo=Ke.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Tf+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Ke.comparedTo=Ke.cmp=function(t){var e,n,r,i,o=this,a=o.d,s=(t=new o.constructor(t)).d,l=o.s,u=t.s;if(!a||!s)return!l||!u?NaN:l!==u?l:a===s?0:!a^l<0?1:-1;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==t.e)return o.e>t.e^l<0?1:-1;for(r=a.length,i=s.length,e=0,n=r<i?r:i;e<n;++e)if(a[e]!==s[e])return a[e]>s[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};Ke.cosine=Ke.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ft,r.rounding=1,n=P$e(r,PJ(r,n)),r.precision=t,r.rounding=e,Mt(Du==2||Du==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ke.cubeRoot=Ke.cbrt=function(){var t,e,n,r,i,o,a,s,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(jt=!1,o=c.s*ci(c.s*c,1/3),!o||Math.abs(o)==1/0?(n=Ui(c.d),t=c.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=ci(n,1/3),t=ao((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(o.toString()),a=(t=f.precision)+3;;)if(s=r,l=s.times(s).times(s),u=l.plus(c),r=ur(u.plus(c).times(s),u.plus(l),a+2,1),Ui(s.d).slice(0,a)===(n=Ui(r.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!i&&n=="4999"){if(!i&&(Mt(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}a+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Mt(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return jt=!0,Mt(r,t,f.rounding,e)};Ke.decimalPlaces=Ke.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-ao(this.e/Ft))*Ft,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ke.dividedBy=Ke.div=function(t){return ur(this,new this.constructor(t))};Ke.dividedToIntegerBy=Ke.divToInt=function(t){var e=this,n=e.constructor;return Mt(ur(e,new n(t),0,1,1),n.precision,n.rounding)};Ke.equals=Ke.eq=function(t){return this.cmp(t)===0};Ke.floor=function(){return Mt(new this.constructor(this),this.e+1,3)};Ke.greaterThan=Ke.gt=function(t){return this.cmp(t)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ke.hyperbolicCosine=Ke.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(t=Math.ceil(i/3),e=(1/nS(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=Mm(a,1,o.times(e),new a(1),!0);for(var l,u=t,c=new a(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return Mt(o,a.precision=n,a.rounding=r,!0)};Ke.hyperbolicSine=Ke.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=Mm(o,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/nS(5,t)),i=Mm(o,2,i,i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);t--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=e,o.rounding=n,Mt(i,e,n,!0)};Ke.hyperbolicTangent=Ke.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,ur(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ke.inverseCosine=Ke.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?_l(e,r,i):new e(0):new e(NaN):t.isZero()?_l(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};Ke.inverseHyperbolicCosine=Ke.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,jt=!1,n=n.times(n).minus(1).sqrt().plus(n),jt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ke.inverseHyperbolicSine=Ke.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,jt=!1,n=n.times(n).plus(1).sqrt().plus(n),jt=!0,r.precision=t,r.rounding=e,n.ln())};Ke.inverseHyperbolicTangent=Ke.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Mt(new o(i),t,e,!0):(o.precision=n=r-i.e,i=ur(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)};Ke.inverseSine=Ke.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,e!==-1?e===0?(t=_l(o,n+4,r).times(.5),t.s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};Ke.inverseTangent=Ke.atan=function(){var t,e,n,r,i,o,a,s,l,u=this,c=u.constructor,f=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=$4)return a=_l(c,f+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(f+4<=$4)return a=_l(c,f+4,d).times(.5),a.s=u.s,a}for(c.precision=s=f+10,c.rounding=1,n=Math.min(28,s/Ft+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(jt=!1,e=Math.ceil(s/Ft),r=1,l=u.times(u),a=new c(u),i=u;t!==-1;)if(i=i.times(l),o=a.minus(i.div(r+=2)),i=i.times(l),a=o.plus(i.div(r+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),jt=!0,Mt(a,c.precision=f,c.rounding=d,!0)};Ke.isFinite=function(){return!!this.d};Ke.isInteger=Ke.isInt=function(){return!!this.d&&ao(this.e/Ft)>this.d.length-2};Ke.isNaN=function(){return!this.s};Ke.isNegative=Ke.isNeg=function(){return this.s<0};Ke.isPositive=Ke.isPos=function(){return this.s>0};Ke.isZero=function(){return!!this.d&&this.d[0]===0};Ke.lessThan=Ke.lt=function(t){return this.cmp(t)<0};Ke.lessThanOrEqualTo=Ke.lte=function(t){return this.cmp(t)<1};Ke.logarithm=Ke.log=function(t){var e,n,r,i,o,a,s,l,u=this,c=u.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(jt=!1,s=f+h,a=tf(u,s),r=e?Gw(c,s+10):tf(t,s),l=ur(a,r,s,1),W1(l.d,i=f,d))do if(s+=10,a=tf(u,s),r=e?Gw(c,s+10):tf(t,s),l=ur(a,r,s,1),!o){+Ui(l.d).slice(i+1,i+15)+1==1e14&&(l=Mt(l,f+1,0));break}while(W1(l.d,i+=10,d));return jt=!0,Mt(l,f,d)};Ke.minus=Ke.sub=function(t){var e,n,r,i,o,a,s,l,u,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(u=h.d,d=t.d,s=m.precision,l=m.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else if(u[0])t=new m(h);else return new m(l===3?-0:0);return jt?Mt(t,s,l):t}if(n=ao(t.e/Ft),c=ao(h.e/Ft),u=u.slice(),o=c-n,o){for(f=o<0,f?(e=u,o=-o,a=d.length):(e=d,n=c,a=u.length),r=Math.max(Math.ceil(s/Ft),a)+2,o>r&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for(r=u.length,a=d.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){f=u[r]<d[r];break}o=0}for(f&&(e=u,u=d,d=e,t.s=-t.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=Hs-1;--u[i],u[r]+=Hs}u[r]-=d[r]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=tS(u,n),jt?Mt(t,s,l):t):new m(l===3?-0:0)};Ke.modulo=Ke.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Mt(new r(n),r.precision,r.rounding):(jt=!1,r.modulo==9?(e=ur(n,t.abs(),0,3,1),e.s*=t.s):e=ur(n,t,0,r.modulo,1),e=e.times(t),jt=!0,n.minus(e))};Ke.naturalExponential=Ke.exp=function(){return z4(this)};Ke.naturalLogarithm=Ke.ln=function(){return tf(this)};Ke.negated=Ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Mt(t)};Ke.plus=Ke.add=function(t){var e,n,r,i,o,a,s,l,u,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(u=f.d,c=t.d,s=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(t=new d(f)),jt?Mt(t,s,l):t;if(o=ao(f.e/Ft),r=ao(t.e/Ft),u=u.slice(),i=o-r,i){for(i<0?(n=u,i=-i,a=c.length):(n=c,r=o,a=u.length),o=Math.ceil(s/Ft),a=o>a?o+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,n=c,c=u,u=n),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Hs|0,u[i]%=Hs;for(e&&(u.unshift(e),++r),a=u.length;u[--a]==0;)u.pop();return t.d=u,t.e=tS(u,r),jt?Mt(t,s,l):t};Ke.precision=Ke.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Tf+t);return n.d?(e=RJ(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ke.round=function(){var t=this,e=t.constructor;return Mt(new e(t),t.e+1,e.rounding)};Ke.sine=Ke.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ft,r.rounding=1,n=z$e(r,PJ(r,n)),r.precision=t,r.rounding=e,Mt(Du>2?n.neg():n,t,e,!0)):new r(NaN)};Ke.squareRoot=Ke.sqrt=function(){var t,e,n,r,i,o,a=this,s=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(jt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Ui(s),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=ao((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(o=r,r=o.plus(ur(a,o,n+2,1)).times(.5),Ui(o.d).slice(0,n)===(e=Ui(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Mt(o,l+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Mt(r,l+1,1),t=!r.times(r).eq(a));break}return jt=!0,Mt(r,l,c.rounding,t)};Ke.tangent=Ke.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=ur(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Mt(Du==2||Du==4?n.neg():n,t,e,!0)):new r(NaN)};Ke.times=Ke.mul=function(t){var e,n,r,i,o,a,s,l,u,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=ao(c.e/Ft)+ao(t.e/Ft),l=d.length,u=h.length,l<u&&(o=d,d=h,h=o,a=l,l=u,u=a),o=[],a=l+u,r=a;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+h[r]*d[i-r-1]+e,o[i--]=s%Hs|0,e=s/Hs|0;o[i]=(o[i]+e)%Hs|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=tS(o,n),jt?Mt(t,f.precision,f.rounding):t};Ke.toBinary=function(t,e){return P5(this,2,t,e)};Ke.toDecimalPlaces=Ke.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(aa(t,0,Hf),e===void 0?e=r.rounding:aa(e,0,8),Mt(n,t+n.e+1,e))};Ke.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=zl(r,!0):(aa(t,0,Hf),e===void 0?e=i.rounding:aa(e,0,8),r=Mt(new i(r),t+1,e),n=zl(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ke.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?n=zl(i):(aa(t,0,Hf),e===void 0?e=o.rounding:aa(e,0,8),r=Mt(new o(i),t+i.e+1,e),n=zl(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ke.toFraction=function(t){var e,n,r,i,o,a,s,l,u,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(u=n=new v(1),r=l=new v(0),e=new v(r),o=e.e=RJ(m)-h.e-1,a=o%Ft,e.d[0]=ci(10,a<0?Ft+a:a),t==null)t=o>0?e:u;else{if(s=new v(t),!s.isInt()||s.lt(u))throw Error(Tf+s);t=s.gt(e)?o>0?e:u:s}for(jt=!1,s=new v(Ui(m)),c=v.precision,v.precision=o=m.length*Ft*2;f=ur(s,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=ur(t.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=h.s,d=ur(u,r,o,1).minus(h).abs().cmp(ur(l,n,o,1).minus(h).abs())<1?[u,r]:[l,n],v.precision=c,jt=!0,d};Ke.toHexadecimal=Ke.toHex=function(t,e){return P5(this,16,t,e)};Ke.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:aa(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(jt=!1,n=ur(n,t,0,e,1).times(t),jt=!0,Mt(n)):(t.s=n.s,n=t),n};Ke.toNumber=function(){return+this};Ke.toOctal=function(t,e){return P5(this,8,t,e)};Ke.toPower=Ke.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,u=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(ci(+s,u));if(s=new l(s),s.eq(1))return s;if(r=l.precision,o=l.rounding,t.eq(1))return Mt(s,r,o);if(e=ao(t.e/Ft),e>=t.d.length-1&&(n=u<0?-u:u)<=L$e)return i=BJ(l,s,n,r),t.s<0?new l(1).div(i):Mt(i,r,o);if(a=s.s,a<0){if(e<t.d.length-1)return new l(NaN);if((t.d[e]&1)==0&&(a=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=a,s}return n=ci(+s,u),e=n==0||!isFinite(n)?ao(u*(Math.log("0."+Ui(s.d))/Math.LN10+s.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(jt=!1,l.rounding=s.s=1,n=Math.min(12,(e+"").length),i=z4(t.times(tf(s,r+n)),r),i.d&&(i=Mt(i,r+5,1),W1(i.d,r,o)&&(e=r+10,i=Mt(z4(t.times(tf(s,e+n)),e),e+5,1),+Ui(i.d).slice(r+1,r+15)+1==1e14&&(i=Mt(i,r+1,0)))),i.s=a,jt=!0,l.rounding=o,Mt(i,r,o))};Ke.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=zl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(aa(t,1,Hf),e===void 0?e=i.rounding:aa(e,0,8),r=Mt(new i(r),t,e),n=zl(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ke.toSignificantDigits=Ke.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(aa(t,1,Hf),e===void 0?e=r.rounding:aa(e,0,8)),Mt(new r(n),t,e)};Ke.toString=function(){var t=this,e=t.constructor,n=zl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ke.truncated=Ke.trunc=function(){return Mt(new this.constructor(this),this.e+1,1)};Ke.valueOf=Ke.toJSON=function(){var t=this,e=t.constructor,n=zl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Ui(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Ft-r.length,n&&(o+=Uc(n)),o+=r;a=t[e],r=a+"",n=Ft-r.length,n&&(o+=Uc(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function aa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Tf+t)}function W1(t,e,n,r){var i,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Ft,i=0):(i=Math.ceil((e+1)/Ft),e%=Ft),o=ci(10,Ft-e),s=t[i]%o|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),a=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[i+1]/o/100|0)==ci(10,e-2)-1||(s==o/2||s==0)&&(t[i+1]/o/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),a=(r||n<4)&&s==9999||!r&&n>3&&s==4999):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(t[i+1]/o/1e3|0)==ci(10,e-3)-1,a}function j2(t,e,n){for(var r,i=[0],o,a=0,s=t.length;a<s;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=F4.indexOf(t.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function P$e(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/nS(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Mm(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}var ur=(function(){function t(r,i,o){var a,s=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+s,r[l]=a%o|0,s=a/o|0;return s&&r.unshift(s),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o,a){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*a+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a,s,l){var u,c,f,d,h,m,v,b,x,C,w,A,E,T,N,D,M,k,B,P,$=r.constructor,z=r.s==i.s?1:-1,j=r.d,L=i.d;if(!j||!j[0]||!L||!L[0])return new $(!r.s||!i.s||(j?L&&j[0]==L[0]:!L)?NaN:j&&j[0]==0||!L?z*0:z/0);for(l?(h=1,c=r.e-i.e):(l=Hs,h=Ft,c=ao(r.e/h)-ao(i.e/h)),B=L.length,M=j.length,x=new $(z),C=x.d=[],f=0;L[f]==(j[f]||0);f++);if(L[f]>(j[f]||0)&&c--,o==null?(T=o=$.precision,a=$.rounding):s?T=o+(r.e-i.e)+1:T=o,T<0)C.push(1),m=!0;else{if(T=T/h+2|0,f=0,B==1){for(d=0,L=L[0],T++;(f<M||d)&&T--;f++)N=d*l+(j[f]||0),C[f]=N/L|0,d=N%L|0;m=d||f<M}else{for(d=l/(L[0]+1)|0,d>1&&(L=t(L,d,l),j=t(j,d,l),B=L.length,M=j.length),D=B,w=j.slice(0,B),A=w.length;A<B;)w[A++]=0;P=L.slice(),P.unshift(0),k=L[0],L[1]>=l/2&&++k;do d=0,u=e(L,w,B,A),u<0?(E=w[0],B!=A&&(E=E*l+(w[1]||0)),d=E/k|0,d>1?(d>=l&&(d=l-1),v=t(L,d,l),b=v.length,A=w.length,u=e(v,w,b,A),u==1&&(d--,n(v,B<b?P:L,b,l))):(d==0&&(u=d=1),v=L.slice()),b=v.length,b<A&&v.unshift(0),n(w,v,A,l),u==-1&&(A=w.length,u=e(L,w,B,A),u<1&&(d++,n(w,B<A?P:L,A,l))),A=w.length):u===0&&(d++,w=[0]),C[f++]=d,u&&w[0]?w[A++]=j[D]||0:(w=[j[D]],A=1);while((D++<M||w[0]!==void 0)&&T--);m=w[0]!==void 0}C[0]||C.shift()}if(h==1)x.e=c,MJ=m;else{for(f=1,d=C[0];d>=10;d/=10)f++;x.e=f+c*h-1,Mt(x,s?o+x.e+1:o,a,m)}return x}})();function Mt(t,e,n,r){var i,o,a,s,l,u,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(o=e-i,o<0)o+=Ft,a=e,c=f[d=0],l=c/ci(10,i-a-1)%10|0;else if(d=Math.ceil((o+1)/Ft),s=f.length,d>=s)if(r){for(;s++<=d;)f.push(0);c=l=0,i=1,o%=Ft,a=o-Ft+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;o%=Ft,a=o-Ft+i,l=a<0?0:c/ci(10,i-a-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(a<0?c:c%ci(10,i-a-1)),u=n<4?(l||r)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(o>0?a>0?c/ci(10,i-a):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=t.e+1,f[0]=ci(10,(Ft-e%Ft)%Ft),t.e=-e||0):f[0]=t.e=0,t;if(o==0?(f.length=d,s=1,d--):(f.length=d+1,s=ci(10,Ft-o),f[d]=a>0?(c/ci(10,i-a)%ci(10,a)|0)*s:0),u)for(;;)if(d==0){for(o=1,a=f[0];a>=10;a/=10)o++;for(a=f[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,f[0]==Hs&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=Hs)break;f[d--]=0,s=1}for(o=f.length;f[--o]===0;)f.pop()}return jt&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function zl(t,e,n){if(!t.isFinite())return FJ(t);var r,i=t.e,o=Ui(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Uc(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Uc(-i-1)+o,n&&(r=n-a)>0&&(o+=Uc(r))):i>=a?(o+=Uc(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Uc(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Uc(r))),o}function tS(t,e){var n=t[0];for(e*=Ft;n>=10;n/=10)e++;return e}function Gw(t,e,n){if(e>F$e)throw jt=!0,n&&(t.precision=n),Error(kJ);return Mt(new t(qw),e,1,!0)}function _l(t,e,n){if(e>$4)throw Error(kJ);return Mt(new t(jw),e,n,!0)}function RJ(t){var e=t.length-1,n=e*Ft+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Uc(t){for(var e="";t--;)e+="0";return e}function BJ(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/Ft+4);for(jt=!1;;){if(n%2&&(o=o.times(e),oP(o.d,a)&&(i=!0)),n=ao(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}e=e.times(e),oP(e.d,a)}return jt=!0,o}function iP(t){return t.d[t.d.length-1]&1}function LJ(t,e,n){for(var r,i,o=new t(e[0]),a=0;++a<e.length;){if(i=new t(e[a]),!i.s){o=i;break}r=o.cmp(i),(r===n||r===0&&o.s===n)&&(o=i)}return o}function z4(t,e){var n,r,i,o,a,s,l,u=0,c=0,f=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(jt=!1,l=m):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(r=Math.log(ci(2,f))/Math.LN10*2+5|0,l+=r,n=o=a=new d(1),d.precision=l;;){if(o=Mt(o.times(t),l,1),n=n.times(++c),s=a.plus(ur(o,n,l,1)),Ui(s.d).slice(0,l)===Ui(a.d).slice(0,l)){for(i=f;i--;)a=Mt(a.times(a),l,1);if(e==null)if(u<3&&W1(a.d,l-r,h,u))d.precision=l+=10,n=o=s=new d(1),c=0,u++;else return Mt(a,d.precision=m,h,jt=!0);else return d.precision=m,a}a=s}}function tf(t,e){var n,r,i,o,a,s,l,u,c,f,d,h=1,m=10,v=t,b=v.d,x=v.constructor,C=x.rounding,w=x.precision;if(v.s<0||!b||!b[0]||!v.e&&b[0]==1&&b.length==1)return new x(b&&!b[0]?-1/0:v.s!=1?NaN:b?0:v);if(e==null?(jt=!1,c=w):c=e,x.precision=c+=m,n=Ui(b),r=n.charAt(0),Math.abs(o=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Ui(v.d),r=n.charAt(0),h++;o=v.e,r>1?(v=new x("0."+n),o++):v=new x(r+"."+n.slice(1))}else return u=Gw(x,c+2,w).times(o+""),v=tf(new x(r+"."+n.slice(1)),c-m).plus(u),x.precision=w,e==null?Mt(v,w,C,jt=!0):v;for(f=v,l=a=v=ur(v.minus(1),v.plus(1),c,1),d=Mt(v.times(v),c,1),i=3;;){if(a=Mt(a.times(d),c,1),u=l.plus(ur(a,new x(i),c,1)),Ui(u.d).slice(0,c)===Ui(l.d).slice(0,c))if(l=l.times(2),o!==0&&(l=l.plus(Gw(x,c+2,w).times(o+""))),l=ur(l,new x(h),c,1),e==null)if(W1(l.d,c-m,C,s))x.precision=c+=m,u=a=v=ur(f.minus(1),f.plus(1),c,1),d=Mt(v.times(v),c,1),i=s=1;else return Mt(l,x.precision=w,C,jt=!0);else return x.precision=w,l;l=u,i+=2}}function FJ(t){return String(t.s*t.s/0)}function G2(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Ft,n<0&&(r+=Ft),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ft;r<i;)t.d.push(+e.slice(r,r+=Ft));e=e.slice(r),r=Ft-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),jt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function $$e(t,e){var n,r,i,o,a,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),IJ.test(e))return G2(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(R$e.test(e))n=16,e=e.toLowerCase();else if(I$e.test(e))n=2;else if(B$e.test(e))n=8;else throw Error(Tf+e);for(o=e.search(/p/i),o>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),a=o>=0,r=t.constructor,a&&(e=e.replace(".",""),s=e.length,o=s-o,i=BJ(r,new r(n),o,o*2)),u=j2(e,n,Hs),c=u.length-1,o=c;u[o]===0;--o)u.pop();return o<0?new r(t.s*0):(t.e=tS(u,c),t.d=u,jt=!1,a&&(t=ur(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?ci(2,l):Af.pow(2,l))),jt=!0,t)}function z$e(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Mm(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/nS(5,n)),e=Mm(t,2,e,e);for(var i,o=new t(5),a=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}function Mm(t,e,n,r,i){var o,a,s,l,u=t.precision,c=Math.ceil(u/Ft);for(jt=!1,l=n.times(n),s=new t(r);;){if(a=ur(s.times(l),new t(e++*e++),u,1),s=i?r.plus(a):r.minus(a),r=ur(a.times(l),new t(e++*e++),u,1),a=s.plus(r),a.d[c]!==void 0){for(o=c;a.d[o]===s.d[o]&&o--;);if(o==-1)break}o=s,s=r,r=a,a=o}return jt=!0,a.d.length=c+1,a}function nS(t,e){for(var n=t;--e;)n*=t;return n}function PJ(t,e){var n,r=e.s<0,i=_l(t,t.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return Du=r?4:1,e;if(n=e.divToInt(i),n.isZero())Du=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(o))return Du=iP(n)?r?2:3:r?4:1,e;Du=iP(n)?r?1:4:r?3:2}return e.minus(i).abs()}function P5(t,e,n,r){var i,o,a,s,l,u,c,f,d,h=t.constructor,m=n!==void 0;if(m?(aa(n,1,Hf),r===void 0?r=h.rounding:aa(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=FJ(t);else{for(c=zl(t),a=c.indexOf("."),m?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,a>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-a,d.d=j2(zl(d),10,i),d.e=d.d.length),f=j2(c,10,i),o=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(a<0?o--:(t=new h(t),t.d=f,t.e=o,t=ur(t,d,n,r,0,i),f=t.d,o=t.e,u=MJ),a=f[n],s=i/2,u=u||f[n+1]!==void 0,u=r<4?(a!==void 0||u)&&(r===0||r===(t.s<0?3:2)):a>s||a===s&&(r===4||u||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,u)for(;++f[--n]>i-1;)f[n]=0,n||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(a=0,c="";a<l;a++)c+=F4.charAt(f[a]);if(m){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(f=j2(c,i,e),l=f.length;!f[l-1];--l);for(a=1,c="1.";a<l;a++)c+=F4.charAt(f[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>l)for(o-=l;o--;)c+="0";else o<l&&(c=c.slice(0,o)+"."+c.slice(o))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function oP(t,e){if(t.length>e)return t.length=e,!0}function U$e(t){return new this(t).abs()}function H$e(t){return new this(t).acos()}function V$e(t){return new this(t).acosh()}function q$e(t,e){return new this(t).plus(e)}function j$e(t){return new this(t).asin()}function G$e(t){return new this(t).asinh()}function Y$e(t){return new this(t).atan()}function W$e(t){return new this(t).atanh()}function K$e(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=_l(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?_l(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=_l(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(ur(t,e,o,1)),e=_l(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(ur(t,e,o,1)),n}function X$e(t){return new this(t).cbrt()}function Z$e(t){return Mt(t=new this(t),t.e+1,2)}function Q$e(t,e,n){return new this(t).clamp(e,n)}function J$e(t){if(!t||typeof t!="object")throw Error(eS+"Object expected");var e,n,r,i=t.defaults===!0,o=["precision",1,Hf,"rounding",0,8,"toExpNeg",-$p,0,"toExpPos",0,$p,"maxE",0,$p,"minE",-$p,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=P4[n]),(r=t[n])!==void 0)if(ao(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(Tf+n+": "+r);if(n="crypto",i&&(this[n]=P4[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(_J);else this[n]=!1;else throw Error(Tf+n+": "+r);return this}function eze(t){return new this(t).cos()}function tze(t){return new this(t).cosh()}function $J(t){var e,n,r;function i(o){var a,s,l,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,aP(o)){u.s=o.s,jt?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,s=o;s>=10;s/=10)a++;jt?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]);return}if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return G2(u,o.toString())}if(l==="string")return(s=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(s===43&&(o=o.slice(1)),u.s=1),IJ.test(o)?G2(u,o):$$e(u,o);if(l==="bigint")return o<0?(o=-o,u.s=-1):u.s=1,G2(u,o.toString());throw Error(Tf+o)}if(i.prototype=Ke,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=J$e,i.clone=$J,i.isDecimal=aP,i.abs=U$e,i.acos=H$e,i.acosh=V$e,i.add=q$e,i.asin=j$e,i.asinh=G$e,i.atan=Y$e,i.atanh=W$e,i.atan2=K$e,i.cbrt=X$e,i.ceil=Z$e,i.clamp=Q$e,i.cos=eze,i.cosh=tze,i.div=nze,i.exp=rze,i.floor=ize,i.hypot=oze,i.ln=aze,i.log=sze,i.log10=uze,i.log2=lze,i.max=cze,i.min=fze,i.mod=dze,i.mul=hze,i.pow=pze,i.random=mze,i.round=gze,i.sign=vze,i.sin=bze,i.sinh=yze,i.sqrt=xze,i.sub=wze,i.sum=Eze,i.tan=Cze,i.tanh=Sze,i.trunc=Tze,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function nze(t,e){return new this(t).div(e)}function rze(t){return new this(t).exp()}function ize(t){return Mt(t=new this(t),t.e+1,3)}function oze(){var t,e,n=new this(0);for(jt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return jt=!0,new this(1/0);n=e}return jt=!0,n.sqrt()}function aP(t){return t instanceof Af||t&&t.toStringTag===OJ||!1}function aze(t){return new this(t).ln()}function sze(t,e){return new this(t).log(e)}function lze(t){return new this(t).log(2)}function uze(t){return new this(t).log(10)}function cze(){return LJ(this,arguments,-1)}function fze(){return LJ(this,arguments,1)}function dze(t,e){return new this(t).mod(e)}function hze(t,e){return new this(t).mul(e)}function pze(t,e){return new this(t).pow(e)}function mze(t){var e,n,r,i,o=0,a=new this(1),s=[];if(t===void 0?t=this.precision:aa(t,1,Hf),r=Math.ceil(t/Ft),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);o<r;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=r/4}else throw Error(_J);else for(;o<r;)s[o++]=Math.random()*1e7|0;for(r=s[--o],t%=Ft,r&&t&&(i=ci(10,Ft-t),s[o]=(r/i|0)*i);s[o]===0;o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=Ft)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<Ft&&(n-=Ft-r)}return a.e=n,a.d=s,a}function gze(t){return Mt(t=new this(t),t.e+1,this.rounding)}function vze(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function bze(t){return new this(t).sin()}function yze(t){return new this(t).sinh()}function xze(t){return new this(t).sqrt()}function wze(t,e){return new this(t).sub(e)}function Eze(){var t=0,e=arguments,n=new this(e[t]);for(jt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return jt=!0,Mt(n,this.precision,this.rounding)}function Cze(t){return new this(t).tan()}function Sze(t){return new this(t).tanh()}function Tze(t){return Mt(t=new this(t),t.e+1,1)}Ke[Symbol.for("nodejs.util.inspect.custom")]=Ke.toString;Ke[Symbol.toStringTag]="Decimal";var Af=Ke.constructor=$J(P4);qw=new Af(qw);jw=new Af(jw);var Aze="BigNumber",Nze=["?on","config"],Dze=re(Aze,Nze,t=>{var{on:e,config:n}=t,r=Af.clone({precision:n.precision,modulo:Af.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Zi=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Ka=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},Mze=t=>{const e=Math.sin(.5*t);return-2*e*e},k3=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Ep=function(){throw SyntaxError("Invalid Param")};function _3(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const kze={re:0,im:0},wd=function(t,e){const n=kze;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return Le.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return Le.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Ep();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,o=0;r===null&&Ep();for(let a=0;a<r.length;a++){const s=r[a];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?o++:s==="i"||s==="I"?(i+o===0&&Ep(),r[a+1]!==" "&&!isNaN(r[a+1])?(n.im+=parseFloat((o%2?"-":"")+r[a+1]),a++):n.im+=parseFloat((o%2?"-":"")+"1"),i=o=0):((i+o===0||isNaN(s))&&Ep(),r[a+1]==="i"||r[a+1]==="I"?(n.im+=parseFloat((o%2?"-":"")+s),a++):n.re+=parseFloat((o%2?"-":"")+s),i=o=0))}i+o>0&&Ep();break;case"number":n.im=0,n.re=t;break;default:Ep()}return isNaN(n.re)||isNaN(n.im),n};function Le(t,e){if(!(this instanceof Le))return new Le(t,e);const n=wd(t,e);this.re=n.re,this.im=n.im}Le.prototype={re:0,im:0,sign:function(){const t=k3(this.re,this.im);return new Le(this.re/t,this.im/t)},add:function(t,e){const n=wd(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Le.NAN:Le.INFINITY:new Le(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=wd(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Le.NAN:Le.INFINITY:new Le(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=wd(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),o=this.re===0&&this.im===0,a=n.re===0&&n.im===0;return r&&a||i&&o?Le.NAN:r||i?Le.INFINITY:n.im===0&&this.im===0?new Le(this.re*n.re,0):new Le(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=wd(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),o=this.re===0&&this.im===0,a=n.re===0&&n.im===0;if(o&&a||r&&i)return Le.NAN;if(a||r)return Le.INFINITY;if(o||i)return Le.ZERO;if(n.im===0)return new Le(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const s=n.re/n.im,l=n.re*s+n.im;return new Le((this.re*s+this.im)/l,(this.im*s-this.re)/l)}else{const s=n.im/n.re,l=n.im*s+n.re;return new Le((this.re+this.im*s)/l,(this.im-this.re*s)/l)}},pow:function(t,e){const n=wd(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Le.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Le(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Le(Math.pow(this.im,n.re),0);case 1:return new Le(0,Math.pow(this.im,n.re));case 2:return new Le(-Math.pow(this.im,n.re),0);case 3:return new Le(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Le.ZERO;const o=Math.atan2(this.im,this.re),a=_3(this.re,this.im);let s=Math.exp(n.re*a-n.im*o),l=n.im*a+n.re*o;return new Le(s*Math.cos(l),s*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new Le(Math.sqrt(t),0):new Le(0,Math.sqrt(-t));const n=k3(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new Le(r,e<0?-i:i):new Le(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new Le(t,0):new Le(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new Le(Math.expm1(t)*Math.cos(e)+Mze(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new Le(Math.log(t),0):new Le(_3(t,e),Math.atan2(e,t))},abs:function(){return k3(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new Le(Math.sin(t)*Zi(e),Math.cos(t)*Ka(e))},cos:function(){const t=this.re,e=this.im;return new Le(Math.cos(t)*Zi(e),-Math.sin(t)*Ka(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+Zi(e);return new Le(Math.sin(t)/n,Ka(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-Zi(e);return new Le(-Math.sin(t)/n,Ka(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*Zi(2*e)+.5*Math.cos(2*t);return new Le(Math.cos(t)*Zi(e)/n,Math.sin(t)*Ka(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*Zi(2*e)-.5*Math.cos(2*t);return new Le(Math.sin(t)*Zi(e)/n,-Math.cos(t)*Ka(e)/n)},asin:function(){const t=this.re,e=this.im,n=new Le(e*e-t*t+1,-2*t*e).sqrt(),r=new Le(n.re-e,n.im+t).log();return new Le(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new Le(e*e-t*t+1,-2*t*e).sqrt(),r=new Le(n.re-e,n.im+t).log();return new Le(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new Le(0,1/0);if(e===-1)return new Le(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new Le((1-e*e-t*t)/n,-2*t/n).log();return new Le(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new Le(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).atan():new Le(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Le(0,1/0);const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).acos():new Le(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Le(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).asin():new Le(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new Le(Ka(t)*Math.cos(e),Zi(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new Le(Zi(t)*Math.cos(e),Ka(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=Zi(t)+Math.cos(e);return new Le(Ka(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=Zi(t)-Math.cos(e);return new Le(Ka(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-Zi(2*t);return new Le(-2*Ka(t)*Math.cos(e)/n,2*Zi(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+Zi(2*t);return new Le(2*Zi(t)*Math.cos(e)/n,-2*Ka(t)*Math.sin(e)/n)},asinh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new Le(0,0);const o=Math.abs(t),a=Math.log(o+Math.sqrt(o*o+1));return new Le(t<0?-a:a,0)}const n=t*t-e*e+1,r=2*t*e,i=new Le(n,r).sqrt();return new Le(t+i.re,e+i.im).log()},acosh:function(){const t=this.re,e=this.im;if(e===0){if(t>1)return new Le(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const i=Math.sqrt(t*t-1);return new Le(Math.log(-t+i),Math.PI)}return new Le(0,Math.acos(t))}const n=new Le(t-1,e).sqrt(),r=new Le(t+1,e).sqrt();return new Le(t+n.re*r.re-n.im*r.im,e+n.re*r.im+n.im*r.re).log()},atanh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new Le(0,0);if(t===1)return new Le(1/0,0);if(t===-1)return new Le(-1/0,0);if(-1<t&&t<1)return new Le(.5*Math.log((1+t)/(1-t)),0);if(t>1){const l=(t+1)/(t-1);return new Le(.5*Math.log(l),-Math.PI/2)}const s=(1+t)/(1-t);return new Le(.5*Math.log(-s),Math.PI/2)}const n=1-t,r=1+t,i=n*n+e*e;if(i===0)return new Le(t!==-1?t/0:0,e!==0?e/0:0);const o=(r*n-e*e)/i,a=(e*n+r*e)/i;return new Le(_3(o,a)/2,Math.atan2(a,o)/2)},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Le(0,Math.PI/2);const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).atanh():new Le(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new Le(1/0,0);const r=1/t;return new Le(Math.log(r+Math.sqrt(r*r+1)),0)}const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).asinh():new Le(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return Le.INFINITY;const n=t*t+e*e;return n!==0?new Le(t/n,-e/n).acosh():new Le(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return Le.INFINITY;if(this.isInfinite())return Le.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new Le(t/n,-e/n)},conjugate:function(){return new Le(this.re,-this.im)},neg:function(){return new Le(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new Le(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new Le(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new Le(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=wd(t,e);return Math.abs(n.re-this.re)<=Le.EPSILON&&Math.abs(n.im-this.im)<=Le.EPSILON},clone:function(){return new Le(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<Le.EPSILON&&(t=0),Math.abs(e)<Le.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Le.ZERO=new Le(0,0);Le.ONE=new Le(1,0);Le.I=new Le(0,1);Le.PI=new Le(Math.PI,0);Le.E=new Le(Math.E,0);Le.INFINITY=new Le(1/0,1/0);Le.NAN=new Le(NaN,NaN);Le.EPSILON=1e-15;var _ze="Complex",Oze=[],Ize=re(_ze,Oze,()=>(Object.defineProperty(Le,"name",{value:"Complex"}),Le.prototype.constructor=Le,Le.prototype.type="Complex",Le.prototype.isComplex=!0,Le.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Le.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Le.prototype.format=function(t){var e="",n=this.im,r=this.re,i=Vd(this.re,t),o=Vd(this.im,t),a=Dt(t)?t:t?t.precision:null;if(a!==null){var s=Math.pow(10,-a);Math.abs(r/n)<s&&(r=0),Math.abs(n/r)<s&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=o+"i":n<0?n===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+o+"i",e},Le.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Le(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Dt(n)){if(xa(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Dt(r))return new Le({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Le.prototype.valueOf=Le.prototype.toString,Le.fromJSON=function(t){return new Le(t)},Le.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Le),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const St=BigInt(0),un=BigInt(1),wi=BigInt(2),c1=BigInt(3),zp=BigInt(5),Go=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const Rze=2e3,ct={s:un,n:St,d:un};function bu(t,e){try{t=BigInt(t)}catch{throw Fc()}return t*e}function ks(t){return typeof t=="bigint"?t:Math.floor(t)}function kr(t,e){if(e===St)throw $5();const n=Object.create(Za.prototype);n.s=t<St?-un:un,t=t<St?-t:t;const r=Sd(t,e);return n.n=t/r,n.d=e/r,n}const Bze=[wi*wi,wi,wi*wi,wi,wi*wi,wi*c1,wi,wi*c1];function Cp(t){const e=Object.create(null);if(t<=un)return e[t]=un,e;const n=r=>{e[r]=(e[r]||St)+un};for(;t%wi===St;)n(wi),t/=wi;for(;t%c1===St;)n(c1),t/=c1;for(;t%zp===St;)n(zp),t/=zp;for(let r=0,i=wi+zp;i*i<=t;){for(;t%i===St;)n(i),t/=i;i+=Bze[r],r=r+1&7}return t>un&&n(t),e}const bi=function(t,e){let n=St,r=un,i=un;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Fc();if(t%1!==0)throw sP();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Fc();if(e%1!==0)throw sP();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw Fc();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw Fc();if(t<0&&(i=-un,t=-t),t%1===0)n=BigInt(t);else{let o=1,a=0,s=1,l=1,u=1,c=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);s<=c&&u<=c;){let f=(a+l)/(s+u);if(t===f){s+u<=c?(n=a+l,r=s+u):u>s?(n=l,r=u):(n=a,r=s);break}else t>f?(a+=l,s+=u):(l+=a,u+=s),s>c?(n=l,r=u):(n=a,r=s)}n=BigInt(n)*BigInt(o),r=BigInt(r)}}else if(typeof t=="string"){let o=0,a=St,s=St,l=St,u=un,c=un,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Fc();if(f[o]==="-"?(i=-un,o++):f[o]==="+"&&o++,f.length===o+1?s=bu(f[o++],i):f[o+1]==="."||f[o]==="."?(f[o]!=="."&&(a=bu(f[o++],i)),o++,(o+1===f.length||f[o+1]==="("&&f[o+3]===")"||f[o+1]==="'"&&f[o+3]==="'")&&(s=bu(f[o],i),u=Go**BigInt(f[o].length),o++),(f[o]==="("&&f[o+2]===")"||f[o]==="'"&&f[o+2]==="'")&&(l=bu(f[o+1],i),c=Go**BigInt(f[o+1].length)-un,o+=3)):f[o+1]==="/"||f[o+1]===":"?(s=bu(f[o],i),u=bu(f[o+2],un),o+=3):f[o+3]==="/"&&f[o+1]===" "&&(a=bu(f[o],i),s=bu(f[o+2],i),u=bu(f[o+4],un),o+=5),f.length<=o)r=u*c,i=n=l+r*a+c*s;else throw Fc()}else if(typeof t=="bigint")n=t,i=t,r=un;else throw Fc();if(r===St)throw $5();ct.s=i<St?-un:un,ct.n=n<St?-n:n,ct.d=r<St?-r:r};function Lze(t,e,n){let r=un;for(;e>St;t=t*t%n,e>>=un)e&un&&(r=r*t%n);return r}function Fze(t,e){for(;e%wi===St;e/=wi);for(;e%zp===St;e/=zp);if(e===un)return St;let n=Go%e,r=1;for(;n!==un;r++)if(n=n*Go%e,r>Rze)return St;return BigInt(r)}function Pze(t,e,n){let r=un,i=Lze(Go,n,e);for(let o=0;o<300;o++){if(r===i)return BigInt(o);r=r*Go%e,i=i*Go%e}return 0}function Sd(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Za(t,e){if(bi(t,e),this instanceof Za)t=Sd(ct.d,ct.n),this.s=ct.s,this.n=ct.n/t,this.d=ct.d/t;else return kr(ct.s*ct.n,ct.d)}const $5=function(){return new Error("Division by Zero")},Fc=function(){return new Error("Invalid argument")},sP=function(){return new Error("Parameters must be integer")};Za.prototype={s:un,n:St,d:un,abs:function(){return kr(this.n,this.d)},neg:function(){return kr(-this.s*this.n,this.d)},add:function(t,e){return bi(t,e),kr(this.s*this.n*ct.d+ct.s*this.d*ct.n,this.d*ct.d)},sub:function(t,e){return bi(t,e),kr(this.s*this.n*ct.d-ct.s*this.d*ct.n,this.d*ct.d)},mul:function(t,e){return bi(t,e),kr(this.s*ct.s*this.n*ct.n,this.d*ct.d)},div:function(t,e){return bi(t,e),kr(this.s*ct.s*this.n*ct.d,this.d*ct.n)},clone:function(){return kr(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return kr(this.s*this.n%this.d,un);if(bi(t,e),St===ct.n*this.d)throw $5();return kr(this.s*(ct.d*this.n)%(ct.n*this.d),ct.d*this.d)},gcd:function(t,e){return bi(t,e),kr(Sd(ct.n,this.n)*Sd(ct.d,this.d),ct.d*this.d)},lcm:function(t,e){return bi(t,e),ct.n===St&&this.n===St?kr(St,un):kr(ct.n*this.n,Sd(ct.n,this.n)*Sd(ct.d,this.d))},inverse:function(){return kr(this.s*this.d,this.n)},pow:function(t,e){if(bi(t,e),ct.d===un)return ct.s<St?kr((this.s*this.d)**ct.n,this.n**ct.n):kr((this.s*this.n)**ct.n,this.d**ct.n);if(this.s<St)return null;let n=Cp(this.n),r=Cp(this.d),i=un,o=un;for(let a in n)if(a!=="1"){if(a==="0"){i=St;break}if(n[a]*=ct.n,n[a]%ct.d===St)n[a]/=ct.d;else return null;i*=BigInt(a)**n[a]}for(let a in r)if(a!=="1"){if(r[a]*=ct.n,r[a]%ct.d===St)r[a]/=ct.d;else return null;o*=BigInt(a)**r[a]}return ct.s<St?kr(o,i):kr(i,o)},log:function(t,e){if(bi(t,e),this.s<=St||ct.s<=St)return null;const n=Object.create(null),r=Cp(ct.n),i=Cp(ct.d),o=Cp(this.n),a=Cp(this.d);for(const u in i)r[u]=(r[u]||St)-i[u];for(const u in a)o[u]=(o[u]||St)-a[u];for(const u in r)u!=="1"&&(n[u]=!0);for(const u in o)u!=="1"&&(n[u]=!0);let s=null,l=null;for(const u in n){const c=r[u]||St,f=o[u]||St;if(c===St){if(f!==St)return null;continue}let d=f,h=c;const m=Sd(d,h);if(d/=m,h/=m,s===null&&l===null)s=d,l=h;else if(d*l!==s*h)return null}return s!==null&&l!==null?kr(s,l):null},equals:function(t,e){return bi(t,e),this.s*this.n*ct.d===ct.s*ct.n*this.d},lt:function(t,e){return bi(t,e),this.s*this.n*ct.d<ct.s*ct.n*this.d},lte:function(t,e){return bi(t,e),this.s*this.n*ct.d<=ct.s*ct.n*this.d},gt:function(t,e){return bi(t,e),this.s*this.n*ct.d>ct.s*ct.n*this.d},gte:function(t,e){return bi(t,e),this.s*this.n*ct.d>=ct.s*ct.n*this.d},compare:function(t,e){bi(t,e);let n=this.s*this.n*ct.d-ct.s*ct.n*this.d;return(St<n)-(n<St)},ceil:function(t){return t=Go**BigInt(t||0),kr(ks(this.s*t*this.n/this.d)+(t*this.n%this.d>St&&this.s>=St?un:St),t)},floor:function(t){return t=Go**BigInt(t||0),kr(ks(this.s*t*this.n/this.d)-(t*this.n%this.d>St&&this.s<St?un:St),t)},round:function(t){return t=Go**BigInt(t||0),kr(ks(this.s*t*this.n/this.d)+this.s*((this.s>=St?un:St)+wi*(t*this.n%this.d)>this.d?un:St),t)},roundTo:function(t,e){bi(t,e);const n=this.n*ct.d,r=this.d*ct.n,i=n%r;let o=ks(n/r);return i+i>=r&&o++,kr(this.s*o*ct.n,ct.d)},divisible:function(t,e){return bi(t,e),ct.n===St?!1:this.n*ct.d%(ct.n*this.d)===St},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,n=this.d,r=Fze(e,n),i=Pze(e,n,r),o=this.s<St?"-":"";if(o+=ks(e/n),e%=n,e*=Go,e&&(o+="."),r){for(let a=i;a--;)o+=ks(e/n),e%=n,e*=Go;o+="(";for(let a=r;a--;)o+=ks(e/n),e%=n,e*=Go;o+=")"}else for(let a=t;e&&a--;)o+=ks(e/n),e%=n,e*=Go;return o},toFraction:function(t=!1){let e=this.n,n=this.d,r=this.s<St?"-":"";if(n===un)r+=e;else{const i=ks(e/n);t&&i>St&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t=!1){let e=this.n,n=this.d,r=this.s<St?"-":"";if(n===un)r+=e;else{const i=ks(e/n);t&&i>St&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d;const n=[];for(;e;){n.push(ks(t/e));const r=t%e;t=e,e=r}return n},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let o=kr(r[i-1],un);for(let s=i-2;s>=0;s--)o=o.inverse().add(r[s]);let a=o.sub(n);if(a.n*e<a.d)return o.mul(this.s)}return this}};var $ze="Fraction",zze=[],Uze=re($ze,zze,()=>(Object.defineProperty(Za,"name",{value:"Fraction"}),Za.prototype.constructor=Za,Za.prototype.type="Fraction",Za.prototype.isFraction=!0,Za.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Za.fromJSON=function(t){return new Za(t)},Za),{isClass:!0}),Hze="Range",Vze=[],qze=re(Hze,Vze,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,o=n!=null,a=r!=null;if(i){if(Gt(e))e=e.toNumber();else if(typeof e!="number"&&!u1(e))throw new TypeError("Parameter start must be a number or bigint")}if(o){if(Gt(n))n=n.toNumber();else if(typeof n!="number"&&!u1(n))throw new TypeError("Parameter end must be a number or bigint")}if(a){if(Gt(r))r=r.toNumber();else if(typeof r!="number"&&!u1(r))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=o?parseFloat(n):0,this.step=a?parseFloat(r):1,a&&Mi(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(o){return parseFloat(o)}),i=r.some(function(o){return isNaN(o)});if(i)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,i=this.end,o=i-n;return ef(r)===ef(o)?e=Math.ceil(o/r):o===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,i=this.end,o=0;if(r>0)for(;n<i;)e(n,[o],this),n+=r,o++;else if(r<0)for(;n>i;)e(n,[o],this),n+=r,o++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,i,o){n[i[0]]=e(r,i,o)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Vd(this.start,e);return this.step!==1&&(n+=":"+Vd(this.step,e)),n+=":"+Vd(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),jze="Matrix",Gze=[],Yze=re(jze,Gze,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function O3(t,e,n){var r=t.constructor,i=new r(2),o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!yt(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),o="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function Wze(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=TJ(e);switch(n){case"fixed":return Xze(t,r);case"exponential":return lP(t,r);case"engineering":return Kze(t,r);case"bin":return O3(t,2,i);case"oct":return O3(t,8,i);case"hex":return O3(t,16,i);case"auto":{var o=uP(e?.lowerExp,-3),a=uP(e?.upperExp,5);if(t.isZero())return"0";var s,l=t.toSignificantDigits(r),u=l.e;return u>=o&&u<a?s=l.toFixed():s=lP(t,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Kze(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),o=i.toPrecision(e);if(o.includes("e")){var a=t.constructor;o=new a(o).toFixed()}return o+"e"+(n>=0?"+":"")+r.toString()}function lP(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Xze(t,e){return t.toFixed(e)}function uP(t,e){return Dt(t)?t:Gt(t)?t.toNumber():e}function Zze(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function tn(t,e){var n=Qze(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Qze(t,e){if(typeof t=="number")return Vd(t,e);if(Gt(t))return Wze(t,e);if(Jze(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return zJ(t,e);if(Pr(t))return Up(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Up(r)+": "+tn(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Up(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in cP?cP[i]:i,r++}return'"'+n+'"'}var cP={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ss(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function zJ(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=zJ(t[i],e);return n+="]",n}else return tn(t,e)}function Jze(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function U4(t,e){if(!Pr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zn(t)+", index: 0)");if(!Pr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zn(e)+", index: 1)");return t===e?0:t>e?1:-1}function Zt(t,e,n){if(!(this instanceof Zt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Zt.prototype=new RangeError;Zt.prototype.constructor=RangeError;Zt.prototype.name="DimensionError";Zt.prototype.isDimensionError=!0;function fl(t,e,n){if(!(this instanceof fl))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}fl.prototype=new RangeError;fl.prototype.constructor=RangeError;fl.prototype.name="IndexError";fl.prototype.isIndexError=!0;function Vt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function UJ(t,e,n){var r,i=t.length;if(i!==e[n])throw new Zt(i,e[n]);if(n<e.length-1){var o=n+1;for(r=0;r<i;r++){var a=t[r];if(!Array.isArray(a))throw new Zt(e.length-1,e.length,"<");UJ(t[r],e,o)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new Zt(e.length+1,e.length,">")}function fP(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new Zt(t.length,0)}else UJ(t,e,0)}function Yw(t,e){var n=t.isMatrix?t._size:Vt(t),r=e._sourceSize;r.forEach((i,o)=>{if(i!==null&&i!==n[o])throw new Zt(i,n[o])})}function rr(t,e){if(t!==void 0){if(!Dt(t)||!yt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new fl(t,e)}}function km(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&Kn(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Pr(n)&&n.length===0)return!0}return!1}function _m(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Dt(i)||!yt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(e)+")")}),(Dt(t)||Gt(t))&&(t=[t]);var r=n!==void 0?n:0;return H4(t,e,0,r),t}function H4(t,e,n,r){var i,o,a=t.length,s=e[n],l=Math.min(a,s);if(t.length=s,n<e.length-1){var u=n+1;for(i=0;i<l;i++)o=t[i],Array.isArray(o)||(o=[o],t[i]=o),H4(o,e,u,r);for(i=l;i<s;i++)o=[],t[i]=o,H4(o,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=r}}function z5(t,e){var n=Nn(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Zt(0,r,"!=");e=U5(e,r);var i=HJ(e);if(r!==i)throw new Zt(i,r,"!=");try{return eUe(n,e)}catch(o){throw o instanceof Zt?new Zt(i,r,"!="):o}}function U5(t,e){var n=HJ(t),r=t.slice(),i=-1,o=t.indexOf(i),a=t.indexOf(i,o+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var s=o>=0,l=e%n===0;if(s)if(l)r[o]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function HJ(t){return t.reduce((e,n)=>e*n,1)}function eUe(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var o=e[i];r=[];for(var a=n.length/o,s=0;s<a;s++)r.push(n.slice(s*o,(s+1)*o));n=r}return n}function Ww(t,e){for(var n=Vt(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=VJ(t,r,0),n.length=r),t}function VJ(t,e,n){var r,i;if(n<e){var o=n+1;for(r=0,i=t.length;r<i;r++)t[r]=VJ(t[r],e,o)}else for(;Array.isArray(t);)t=t[0];return t}function qJ(t,e,n,r){var i=r||Vt(t);if(n)for(var o=0;o<n;o++)t=[t],i.unshift(1);for(t=jJ(t,e,0);i.length<e;)i.push(1);return t}function jJ(t,e,n){var r,i;if(Array.isArray(t)){var o=n+1;for(r=0,i=t.length;r<i;r++)t[r]=jJ(t[r],e,o)}else for(var a=n;a<e;a++)t=[t];return t}function Nn(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(o){for(var a=0;a<o.length;a++){var s=o[a];Array.isArray(s)?r(s):n.push(s)}}function i(o){if(Array.isArray(o[0]))for(var a=0;a<o.length;a++)i(o[a]);else for(var s=0;s<o.length;s++)n.push(o[s])}}function uf(t,e){return Array.prototype.map.call(t,e)}function GJ(t,e){Array.prototype.forEach.call(t,e)}function dP(t,e){if(Vt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function hP(t,e){if(Vt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function pP(t,e){return Array.prototype.join.call(t,e)}function Om(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function Kw(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function rS(t,e){for(var n,r=0,i=0;i<t.length;i++){var o=t[i],a=Array.isArray(o);if(i===0&&a&&(r=o.length),a&&o.length!==r)return;var s=a?rS(o,e):e(o);if(n===void 0)n=s;else if(n!==s)return"mixed"}return n}function YJ(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Zt(t.length,e.length);for(var i=[],o=0;o<t.length;o++)i[o]=YJ(t[o],e[o],n,r+1);return i}else return t.concat(e)}function WJ(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return YJ(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Xw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),i=Math.max(...r),o=new Array(i).fill(null),a=0;a<e.length;a++)for(var s=e[a],l=r[a],u=0;u<l;u++){var c=i-l+u;s[u]>o[c]&&(o[c]=s[u])}for(var f=0;f<e.length;f++)KJ(e[f],o);return o}function KJ(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var o=n-r+i;if(t[i]<e[o]&&t[i]>1||t[i]>e[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[o]))}}function Od(t,e){var n=Vt(t);if(Xu(n,e))return t;KJ(n,e);var r=Xw(n,e),i=r.length,o=[...Array(i-n.length).fill(1),...n],a=nUe(t);n.length<i&&(a=z5(a,o),n=Vt(a));for(var s=0;s<i;s++)n[s]<r[s]&&(a=tUe(a,r[s],s),n=Vt(a));return a}function tUe(t,e,n){return WJ(...Array(e).fill(t),n)}function Zw(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Vt(t);if(e.length!==n.length)throw new Zt(e.length,n.length);for(var r=0;r<e.length;r++)rr(e[r],n[r]);return e.reduce((i,o)=>i[o],t)}function V4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return o(t);var r=[];return i(t,0);function i(a,s){if(Array.isArray(a)){for(var l=a.length,u=Array(l),c=0;c<l;c++)r[s]=c,u[c]=i(a[c],s+1);return u}else return e(a,r.slice(0,s),t)}function o(a){if(Array.isArray(a)){for(var s=a.length,l=Array(s),u=0;u<s;u++)l[u]=o(a[u]);return l}else return e(a)}}function XJ(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(n){o(t);return}var r=[];i(t,0);function i(a,s){if(Array.isArray(a))for(var l=a.length,u=0;u<l;u++)r[s]=u,i(a[u],s+1);else e(a,r.slice(0,s),t)}function o(a){if(Array.isArray(a))for(var s=a.length,l=0;l<s;l++)o(a[l]);else e(a)}}function nUe(t){return jr([],t)}function ch(t,e,n,r){if(Vw.isTypedFunction(t)){var i;if(r)i=1;else{var o=e.isMatrix?e.size():Vt(e),a=o.length?o[o.length-1]===0:!0;if(a)return{isUnary:r,fn:t};var s=o.map(()=>0),l=e.isMatrix?e.get(s):Zw(e,s);i=oUe(t,l,s,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=rUe(t,i);u=c!==void 0?c:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return mP(u,h.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return mP(u,h,n,t.name)}}}return r===void 0?{isUnary:iUe(t),fn:t}:{isUnary:r,fn:t}}function rUe(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,o]=r;i.split(",").length===e&&n.push(o)}),n.length===1)return n[0]}function iUe(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function oUe(t,e,n,r){for(var i=[e,n,r],o=3;o>0;o--){var a=i.slice(0,o);if(Vw.resolve(t,a)!==null)return o}}function mP(t,e,n,r){try{return t(...e)}catch(i){aUe(i,e,n,r)}}function aUe(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var o=[];throw o.push("value: ".concat(Zn(e[0]))),e.length>=2&&o.push("index: ".concat(Zn(e[1]))),e.length>=3&&o.push("array: ".concat(Zn(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var sUe="DenseMatrix",lUe=["Matrix","config"],uUe=re(sUe,lUe,t=>{var{Matrix:e,config:n}=t;function r(f,d){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Pr(d))throw new Error("Invalid datatype: "+d);if(Ot(f))f.type==="DenseMatrix"?(this._data=Ht(f._data),this._size=Ht(f._size),this._datatype=d||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=d||f._datatype);else if(f&&Kn(f.data)&&Kn(f.size))this._data=f.data,this._size=f.size,fP(this._data,this._size),this._datatype=d||f.datatype;else if(Kn(f))this._data=c(f),this._size=Vt(this._data),fP(this._data,this._size),this._datatype=d;else{if(f)throw new TypeError("Unsupported type of data ("+Zn(f)+")");this._data=[],this._size=[0],this._datatype=d}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,d){return new r(f,d)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return rS(this._data,Zn)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,d){return new r(f,d)},r.prototype.subset=function(f,d,h){switch(arguments.length){case 1:return i(this,f);case 2:case 3:return a(this,f,d,h);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){return Zw(this._data,f)},r.prototype.set=function(f,d,h){if(!Kn(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Zt(f.length,this._size.length,"<");var m,v,b,x=f.map(function(w){return w+1});u(this,x,h);var C=this._data;for(m=0,v=f.length-1;m<v;m++)b=f[m],rr(b,C.length),C=C[b];return b=f[f.length-1],rr(b,C.length),C[b]=d,this};function i(f,d){if(!XC(d))throw new TypeError("Invalid index");var h=n.legacySubset?d.size().every(E=>E===1):d.isScalar();if(h)return f.get(d.min());var m=d.size();if(m.length!==f._size.length)throw new Zt(m.length,f._size.length);for(var v=d.min(),b=d.max(),x=0,C=f._size.length;x<C;x++)rr(v[x],f._size[x]),rr(b[x],f._size[x]);var w=new r,A=o(f._data,d);return w._size=A.size,w._datatype=f._datatype,w._data=A.data,n.legacySubset?w.reshape(d.size()):w}function o(f,d){var h=d.size().length-1,m=Array(h);return{data:v(f),size:m.filter(b=>b!==null)};function v(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=d.dimension(x);function w(A,E){return Dt(A)?E(A):A.map(E).valueOf()}return Dt(C)?m[x]=null:m[x]=C.size()[0],x<h?w(C,A=>(rr(A,b.length),v(b[A],x+1))):w(C,A=>(rr(A,b.length),b[A]))}}function a(f,d,h,m){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var v=d.size(),b=d.isScalar(),x;if(Ot(h)?(x=h.size(),h=h.valueOf()):x=Vt(h),b){if(x.length!==0)throw new TypeError("Scalar expected");f.set(d.min(),h,m)}else{if(!Xu(x,v)){if(x.length===0)h=Od([h],v);else try{h=Od(h,v)}catch{}x=Vt(h)}if(v.length<f._size.length)throw new Zt(v.length,f._size.length,"<");if(x.length<v.length){for(var C=0,w=0;v[C]===1&&x[C]===1;)C++;for(;v[C]===1;)w++,C++;h=qJ(h,v.length,w,x)}if(!Xu(v,x))throw new Zt(v,x,">");var A=d.max().map(function(E){return E+1});u(f,A,m),s(f._data,d,h)}return f}function s(f,d,h){var m=d.size().length-1;v(f,h);function v(b,x){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=d.dimension(C),A=(T,N)=>{rr(T,b.length),v(b[T],x[N[0]],C+1)},E=(T,N)=>{rr(T,b.length),b[T]=x[N[0]]};C<m?Dt(w)?A(w,[0]):w.forEach(A):Dt(w)?E(w,[0]):w.forEach(E)}}r.prototype.resize=function(f,d,h){if(!Oa(f))throw new TypeError("Array or Matrix expected");var m=f.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b),v=h?this.clone():this;return l(v,m,d)};function l(f,d,h){if(d.length===0){for(var m=f._data;Kn(m);)m=m[0];return m}return f._size=d.slice(0),f._data=_m(f._data,f._size,h),f}r.prototype.reshape=function(f,d){var h=d?this.clone():this;h._data=z5(h._data,f);var m=h._size.reduce((v,b)=>v*b);return h._size=U5(f,m),h};function u(f,d,h){for(var m=f._size.slice(0),v=!1;m.length<d.length;)m.push(0),v=!0;for(var b=0,x=d.length;b<x;b++)d[b]>m[b]&&(m[b]=d[b],v=!0);v&&l(f,m,h)}r.prototype.clone=function(){var f=new r({data:Ht(this._data),size:Ht(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,m=h._size.length-1;if(m<0)return h.clone();var v=ch(f,h,"map",d),b=v.fn,x=h.create(void 0,h._datatype);if(x._size=h._size,d||v.isUnary)return x._data=N(h._data),x;if(m===0){for(var C=h.valueOf(),w=Array(C.length),A=0;A<C.length;A++)w[A]=b(C[A],[A],h);return x._data=w,x}var E=[];return x._data=T(h._data),x;function T(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=Array(D.length);if(M<m)for(var B=0;B<D.length;B++)E[M]=B,k[B]=T(D[B],M+1);else for(var P=0;P<D.length;P++)E[M]=P,k[P]=b(D[P],E.slice(),h);return k}function N(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=Array(D.length);if(M<m)for(var B=0;B<D.length;B++)k[B]=N(D[B],M+1);else for(var P=0;P<D.length;P++)k[P]=b(D[P]);return k}},r.prototype.forEach=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,m=h._size.length-1;if(m<0)return;var v=ch(f,h,"map",d),b=v.fn;if(d||v.isUnary){A(h._data);return}if(m===0){for(var x=0;x<h._data.length;x++)b(h._data[x],[x],h);return}var C=[];w(h._data);function w(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(T<m)for(var N=0;N<E.length;N++)C[T]=N,w(E[N],T+1);else for(var D=0;D<E.length;D++)C[T]=D,b(E[D],C.slice(),h)}function A(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(T<m)for(var N=0;N<E.length;N++)A(E[N],T+1);else for(var D=0;D<E.length;D++)b(E[D])}},r.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var h=Array(f+1).fill(0),m=this._size.reduce((w,A)=>w*A,1),v=0;v<m;v++){for(var b=this._data,x=0;x<f;x++)b=b[h[x]];yield{value:b[h[f]],index:h.slice()};for(var C=f;C>=0&&(h[C]++,!(h[C]<this._size[C]));C--)h[C]=0}}},r.prototype.rows=function(){var f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var m of h)f.push(new r([m],this._datatype));return f},r.prototype.columns=function(){var f=this,d=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,v=function(C){var w=m.map(A=>[A[C]]);d.push(new r(w,f._datatype))},b=0;b<h[1];b++)v(b);return d},r.prototype.toArray=function(){return Ht(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return tn(this._data,f)},r.prototype.toString=function(){return tn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Gt(f)&&(f=f.toNumber()),!Dt(f)||!yt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var d=f>0?f:0,h=f<0?-f:0,m=this._size[0],v=this._size[1],b=Math.min(m-h,v-d),x=[],C=0;C<b;C++)x[C]=this._data[C+h][C+d];return new r({data:x,size:[b],datatype:this._datatype})},r.diagonal=function(f,d,h,m){if(!Kn(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(D){if(Gt(D)&&(D=D.toNumber()),!Dt(D)||!yt(D)||D<1)throw new Error("Size values must be positive integers");return D}),h){if(Gt(h)&&(h=h.toNumber()),!Dt(h)||!yt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var v=h>0?h:0,b=h<0?-h:0,x=f[0],C=f[1],w=Math.min(x-b,C-v),A;if(Kn(d)){if(d.length!==w)throw new Error("Invalid value array length");A=function(M){return d[M]}}else if(Ot(d)){var E=d.size();if(E.length!==1||E[0]!==w)throw new Error("Invalid matrix length");A=function(M){return d.get([M])}}else A=function(){return d};m||(m=Gt(A(0))?A(0).mul(0):0);var T=[];if(f.length>0){T=_m(T,f,m);for(var N=0;N<w;N++)T[N+b][N+v]=A(N)}return new r({data:T,size:[x,C]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,d){if(!Dt(f)||!yt(f)||!Dt(d)||!yt(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return rr(f,this._size[0]),rr(d,this._size[0]),r._swapRows(f,d,this._data),this},r._swapRows=function(f,d,h){var m=h[f];h[f]=h[d],h[d]=m};function c(f){return Ot(f)?c(f.valueOf()):Kn(f)?f.map(c):f}return r},{isClass:!0}),gP="clone",cUe=["typed"],fUe=re(gP,cUe,t=>{var{typed:e}=t;return e(gP,{any:Ht})});function ZJ(t){var e=t.length,n=t[0].length,r,i,o=[];for(i=0;i<n;i++){var a=[];for(r=0;r<e;r++)a.push(t[r][i]);o.push(a)}return o}function f0(t){for(var e=0;e<t.length;e++)if(Oa(t[e]))return!0;return!1}function Nf(t,e){Ot(t)?t.forEach(n=>e(n),!1,!0):XJ(t,e,!0)}function Yt(t,e,n){if(!n)return Ot(t)?t.map(i=>e(i),!1,!0):V4(t,e,!0);var r=i=>i===0?i:e(i);return Ot(t)?t.map(i=>r(i),!1,!0):V4(t,r,!0)}function iS(t,e,n){var r=Array.isArray(t)?Vt(t):t.size();if(e<0||e>=r.length)throw new fl(e,r.length);return Ot(t)?t.create(Qw(t.valueOf(),e,n),t.datatype()):Qw(t,e,n)}function Qw(t,e,n){var r,i,o,a;if(e<=0)if(Array.isArray(t[0])){for(a=ZJ(t),i=[],r=0;r<a.length;r++)i[r]=Qw(a[r],e-1,n);return i}else{for(o=t[0],r=1;r<t.length;r++)o=n(o,t[r]);return o}else{for(i=[],r=0;r<t.length;r++)i[r]=Qw(t[r],e-1,n);return i}}function vP(t,e,n,r,i,o,a,s,l,u,c){var f=t._values,d=t._index,h=t._ptr,m,v,b,x;if(r)for(v=h[e],b=h[e+1],m=v;m<b;m++)x=d[m],n[x]!==o?(n[x]=o,a.push(x),r[x]=f[m]):(r[x]=s(r[x],f[m]),i[x]=o);else for(v=h[e],b=h[e+1],m=v;m<b;m++)x=d[m],n[x]!==o?(n[x]=o,a.push(x)):i[x]=o}var bP="isInteger",dUe=["typed","equal"],hUe=re(bP,dUe,t=>{var{typed:e,equal:n}=t;return e(bP,{number:r=>Number.isFinite(r)?n(r,Math.round(r)):!1,BigNumber:r=>r.isFinite()?n(r.round(),r):!1,bigint:r=>!0,Fraction:r=>r.d===1n,"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),dl="number",d0="number, number";function QJ(t){return Math.abs(t)}QJ.signature=dl;function JJ(t,e){return t+e}JJ.signature=d0;function eee(t,e){return t-e}eee.signature=d0;function tee(t,e){return t*e}tee.signature=d0;function nee(t){return-t}nee.signature=dl;function ree(t){return t}ree.signature=dl;function $g(t){return m$e(t)}$g.signature=dl;function iee(t){return t*t*t}iee.signature=dl;function oee(t){return Math.exp(t)}oee.signature=dl;function aee(t){return g$e(t)}aee.signature=dl;function see(t,e){if(!yt(t)||!yt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}see.signature=d0;function yP(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function Jw(t){return h$e(t)}Jw.signature=dl;function q4(t){return d$e(t)}q4.signature=dl;function xP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function j4(t){return ef(t)}j4.signature=dl;function lee(t){return t*t}lee.signature=dl;function uee(t,e){var n,r,i,o=0,a=1,s=1,l=0;if(!yt(t)||!yt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),i=t-r*e,n=o,o=a-r*o,a=n,n=s,s=l-r*s,l=n,t=e,e=i;var u;return t<0?u=[-t,-a,-l]:u=[t,t?a:0,l],u}uee.signature=d0;function cee(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}cee.signature=d0;function Dg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!yt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(AJ(t,e))}var pUe="number",h0="number, number";function fee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function bitAnd");return t&e}fee.signature=h0;function dee(t){if(!yt(t))throw new Error("Integer expected in function bitNot");return~t}dee.signature=pUe;function hee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function bitOr");return t|e}hee.signature=h0;function pee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function bitXor");return t^e}pee.signature=h0;function mee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function leftShift");return t<<e}mee.signature=h0;function gee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}gee.signature=h0;function vee(t,e){if(!yt(t)||!yt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}vee.signature=h0;function Mu(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Mu(t,n)*Mu(n+1,e)}function bee(t,e){if(!yt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!yt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,i=e<n?n+1:e+1,o=2,a=e<n?e:n,s=i;s<=t;++s)for(r*=s;o<=a&&r%o===0;)r/=o,++o;return o<=a&&(r/=Mu(o,a)),r}bee.signature="number, number";var mUe=Math.PI,gUe=2*Math.PI,vUe=Math.E,bUe=1.618033988749895,yUe="number",H5="number, number";function yee(t){return!t}yee.signature=yUe;function G4(t,e){return!!(t||e)}G4.signature=H5;function Y4(t,e){return!!t!=!!e}Y4.signature=H5;function W4(t,e){return!!(t&&e)}W4.signature=H5;function eE(t){var e;if(yt(t))return t<=0?Number.isFinite(t)?1/0:NaN:t>171?1/0:Mu(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*eE(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,i=r*t,o=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*t))}--t,e=im[0];for(var a=1;a<im.length;++a)e+=im[a]/(t+a);var s=t+xee+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*e}eE.signature="number";var xee=4.7421875,im=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],wee=.9189385332046728,xUe=5,wUe=7,wP=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function tE(t){if(t<0)return NaN;if(t===0)return 1/0;if(!Number.isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-tE(1-t);t=t-1;for(var e=t+xUe+.5,n=wP[0],r=wUe-1;r>=1;r--)n+=wP[r]/(t+r);return wee+(t+.5)*Math.log(e)-e+Math.log(n)}tE.signature="number";var ho="number";function Eee(t){return x$e(t)}Eee.signature=ho;function Cee(t){return Math.atan(1/t)}Cee.signature=ho;function See(t){return Number.isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}See.signature=ho;function Tee(t){return Math.asin(1/t)}Tee.signature=ho;function Aee(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}Aee.signature=ho;function Nee(t){return Math.acos(1/t)}Nee.signature=ho;function Dee(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}Dee.signature=ho;function Mee(t){return w$e(t)}Mee.signature=ho;function kee(t){return E$e(t)}kee.signature=ho;function _ee(t){return 1/Math.tan(t)}_ee.signature=ho;function Oee(t){var e=Math.exp(2*t);return(e+1)/(e-1)}Oee.signature=ho;function Iee(t){return 1/Math.sin(t)}Iee.signature=ho;function Ree(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*ef(t)}Ree.signature=ho;function Bee(t){return 1/Math.cos(t)}Bee.signature=ho;function Lee(t){return 2/(Math.exp(t)+Math.exp(-t))}Lee.signature=ho;function Fee(t){return S$e(t)}Fee.signature=ho;var V5="number";function Pee(t){return t<0}Pee.signature=V5;function $ee(t){return t>0}$ee.signature=V5;function zee(t){return Number.isNaN(t)}zee.signature=V5;function bs(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var EP="isNegative",EUe=["typed","config"],CUe=re(EP,EUe,t=>{var{typed:e,config:n}=t;return e(EP,{number:r=>Mi(r,0,n.relTol,n.absTol)?!1:Pee(r),BigNumber:r=>bs(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),CP="isNumeric",SUe=["typed"],TUe=re(CP,SUe,t=>{var{typed:e}=t;return e(CP,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),SP="hasNumericValue",AUe=["typed","isNumeric"],NUe=re(SP,AUe,t=>{var{typed:e,isNumeric:n}=t;return e(SP,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return n(i)}})}),TP="isPositive",DUe=["typed","config"],MUe=re(TP,DUe,t=>{var{typed:e,config:n}=t;return e(TP,{number:r=>Mi(r,0,n.relTol,n.absTol)?!1:$ee(r),BigNumber:r=>bs(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),AP="isZero",kUe=["typed","equalScalar"],_Ue=re(AP,kUe,t=>{var{typed:e,equalScalar:n}=t;return e(AP,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),NP="isNaN",OUe=["typed"],IUe=re(NP,OUe,t=>{var{typed:e}=t;return e(NP,{number:zee,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),DP="isBounded",RUe=["typed"],BUe=re(DP,RUe,t=>{var{typed:e}=t;return e(DP,{number:n=>Number.isFinite(n),"BigNumber | Complex":n=>n.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(n=>r=>n(r.value)),"Array | Matrix":e.referToSelf(n=>r=>(Array.isArray(r)||(r=r.valueOf()),r.every(i=>n(i))))})}),MP="isFinite",LUe=["typed","isBounded","map"],FUe=re(MP,LUe,t=>{var{typed:e,isBounded:n,map:r}=t;return e(MP,{"Array | Matrix":i=>r(i,n),any:i=>n(i)})}),kP="typeOf",PUe=["typed"],$Ue=re(kP,PUe,t=>{var{typed:e}=t;return e(kP,{any:Zn})});function zUe(t,e,n,r){return Mi(t.re,e.re,n,r)&&Mi(t.im,e.im,n,r)}var p0=re("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),nE="equalScalar",UUe=["typed","config"],HUe=re(nE,UUe,t=>{var{typed:e,config:n}=t,r=p0({typed:e});return e(nE,{"boolean, boolean":function(o,a){return o===a},"number, number":function(o,a){return Mi(o,a,n.relTol,n.absTol)},"BigNumber, BigNumber":function(o,a){return o.eq(a)||bs(o,a,n.relTol,n.absTol)},"bigint, bigint":function(o,a){return o===a},"Fraction, Fraction":function(o,a){return o.equals(a)},"Complex, Complex":function(o,a){return zUe(o,a,n.relTol,n.absTol)}},r)});re(nE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(nE,{"number, number":function(i,o){return Mi(i,o,n.relTol,n.absTol)}})});var VUe="SparseMatrix",qUe=["typed","equalScalar","Matrix"],jUe=re(VUe,qUe,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(v,b){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!Pr(b))throw new Error("Invalid datatype: "+b);if(Ot(v))o(this,v,b);else if(v&&Kn(v.index)&&Kn(v.ptr)&&Kn(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=b||v.datatype;else if(Kn(v))a(this,v,b);else{if(v)throw new TypeError("Unsupported type of data ("+Zn(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function o(v,b,x){b.type==="SparseMatrix"?(v._values=b._values?Ht(b._values):void 0,v._index=Ht(b._index),v._ptr=Ht(b._ptr),v._size=Ht(b._size),v._datatype=x||b._datatype):a(v,b.valueOf(),x||b._datatype)}function a(v,b,x){v._values=[],v._index=[],v._ptr=[],v._datatype=x;var C=b.length,w=0,A=n,E=0;if(Pr(x)&&(A=e.find(n,[x,x])||n,E=e.convert(0,x)),C>0){var T=0;do{v._ptr.push(v._index.length);for(var N=0;N<C;N++){var D=b[N];if(Kn(D)){if(T===0&&w<D.length&&(w=D.length),T<D.length){var M=D[T];A(M,E)||(v._values.push(M),v._index.push(N))}}else T===0&&w<1&&(w=1),A(D,E)||(v._values.push(D),v._index.push(N))}T++}while(T<w)}for(;v._ptr.length<=w;)v._ptr.push(v._index.length);v._size=[C,w]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,b){return new i(v,b)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return rS(this._values,Zn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,b){return new i(v,b)},i.prototype.density=function(){var v=this._size[0],b=this._size[1];return v!==0&&b!==0?this._index.length/(v*b):0},i.prototype.subset=function(v,b,x){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,b,x);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,b){if(!XC(b))throw new TypeError("Invalid index");var x=b.isScalar();if(x)return v.get(b.min());var C=b.size();if(C.length!==v._size.length)throw new Zt(C.length,v._size.length);var w,A,E,T,N=b.min(),D=b.max();for(w=0,A=v._size.length;w<A;w++)rr(N[w],v._size[w]),rr(D[w],v._size[w]);var M=v._values,k=v._index,B=v._ptr,P=b.dimension(0),$=b.dimension(1),z=[],j=[];function L(W,K){j[W]=K[0],z[W]=!0}Number.isInteger(P)?L(P,[0]):P.forEach(L);var U=M?[]:void 0,G=[],Z=[];function H(W){for(Z.push(G.length),E=B[W],T=B[W+1];E<T;E++)w=k[E],z[w]===!0&&(G.push(j[w]),U&&U.push(M[E]))}return Number.isInteger($)?H($):$.forEach(H),Z.push(G.length),new i({values:U,index:G,ptr:Z,size:C,datatype:v._datatype})}function l(v,b,x,C){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var w=b.size(),A=b.isScalar(),E;if(Ot(x)?(E=x.size(),x=x.toArray()):E=Vt(x),A){if(E.length!==0)throw new TypeError("Scalar expected");v.set(b.min(),x,C)}else{if(w.length!==1&&w.length!==2)throw new Zt(w.length,v._size.length,"<");if(E.length<w.length){for(var T=0,N=0;w[T]===1&&E[T]===1;)T++;for(;w[T]===1;)N++,T++;x=qJ(x,w.length,N,E)}if(!Xu(w,E))throw new Zt(w,E,">");if(w.length===1){var D=b.dimension(0);B(D,(P,$)=>{rr(P),v.set([P,0],x[$[0]],C)})}else{var M=b.dimension(0),k=b.dimension(1);B(M,(P,$)=>{rr(P),B(k,(z,j)=>{rr(z),v.set([P,z],x[$[0]][j[0]],C)})})}}return v;function B(P,$){Dt(P)?$(P,[0]):P.forEach($)}}i.prototype.get=function(v){if(!Kn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Zt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=v[0],x=v[1];rr(b,this._size[0]),rr(x,this._size[1]);var C=u(b,this._ptr[x],this._ptr[x+1],this._index);return C<this._ptr[x+1]&&this._index[C]===b?this._values[C]:0},i.prototype.set=function(v,b,x){if(!Kn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Zt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=v[0],w=v[1],A=this._size[0],E=this._size[1],T=n,N=0;Pr(this._datatype)&&(T=e.find(n,[this._datatype,this._datatype])||n,N=e.convert(0,this._datatype)),(C>A-1||w>E-1)&&(d(this,Math.max(C+1,A),Math.max(w+1,E),x),A=this._size[0],E=this._size[1]),rr(C,A),rr(w,E);var D=u(C,this._ptr[w],this._ptr[w+1],this._index);return D<this._ptr[w+1]&&this._index[D]===C?T(b,N)?c(D,w,this._values,this._index,this._ptr):this._values[D]=b:T(b,N)||f(D,C,w,b,this._values,this._index,this._ptr),this};function u(v,b,x,C){if(x-b===0)return x;for(var w=b;w<x;w++)if(C[w]===v)return w;return b}function c(v,b,x,C,w){x.splice(v,1),C.splice(v,1);for(var A=b+1;A<w.length;A++)w[A]--}function f(v,b,x,C,w,A,E){w.splice(v,0,C),A.splice(v,0,b);for(var T=x+1;T<E.length;T++)E[T]++}i.prototype.resize=function(v,b,x){if(!Oa(v))throw new TypeError("Array or Matrix expected");var C=v.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(A){if(!Dt(A)||!yt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(C)+")")});var w=x?this.clone():this;return d(w,C[0],C[1],b)};function d(v,b,x,C){var w=C||0,A=n,E=0;Pr(v._datatype)&&(A=e.find(n,[v._datatype,v._datatype])||n,E=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var T=!A(w,E),N=v._size[0],D=v._size[1],M,k,B;if(x>D){for(k=D;k<x;k++)if(v._ptr[k]=v._values.length,T)for(M=0;M<N;M++)v._values.push(w),v._index.push(M);v._ptr[x]=v._values.length}else x<D&&(v._ptr.splice(x+1,D-x),v._values.splice(v._ptr[x],v._values.length),v._index.splice(v._ptr[x],v._index.length));if(D=x,b>N){if(T){var P=0;for(k=0;k<D;k++){v._ptr[k]=v._ptr[k]+P,B=v._ptr[k+1]+P;var $=0;for(M=N;M<b;M++,$++)v._values.splice(B+$,0,w),v._index.splice(B+$,0,M),P++}v._ptr[D]=v._values.length}}else if(b<N){var z=0;for(k=0;k<D;k++){v._ptr[k]=v._ptr[k]-z;var j=v._ptr[k],L=v._ptr[k+1]-z;for(B=j;B<L;B++)M=v._index[B],M>b-1&&(v._values.splice(B,1),v._index.splice(B,1),z++)}v._ptr[k]=v._values.length}return v._size[0]=b,v._size[1]=x,v}i.prototype.reshape=function(v,b){if(!Kn(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(Z){if(!Dt(Z)||!yt(Z)||Z<=-2||Z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+tn(v)+")")});var x=this._size[0]*this._size[1];v=U5(v,x);var C=v[0]*v[1];if(x!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=b?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var A=[],E=0;E<w._ptr.length;E++)for(var T=0;T<w._ptr[E+1]-w._ptr[E];T++)A.push(E);for(var N=w._values.slice(),D=w._index.slice(),M=0;M<w._index.length;M++){var k=D[M],B=A[M],P=k*w._size[1]+B;A[M]=P%v[1],D[M]=Math.floor(P/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var $=0;$<w._ptr.length;$++)w._ptr[$]=0;for(var z=0;z<N.length;z++){var j=D[z],L=A[z],U=N[z],G=u(j,w._ptr[L],w._ptr[L+1],w._index);f(G,j,L,U,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var v=new i({values:this._values?Ht(this._values):void 0,index:Ht(this._index),ptr:Ht(this._ptr),size:Ht(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var x=this,C=this._size[0],w=this._size[1],A=ch(v,x,"map"),E=function(N,D,M){return A.fn(N,[D,M],x)};return h(this,0,C-1,0,w-1,E,b)};function h(v,b,x,C,w,A,E){var T=[],N=[],D=[],M=n,k=0;Pr(v._datatype)&&(M=e.find(n,[v._datatype,v._datatype])||n,k=e.convert(0,v._datatype));for(var B=function(I,ee,Q){var ce=A(I,ee,Q);M(ce,k)||(T.push(ce),N.push(ee))},P=C;P<=w;P++){D.push(T.length);var $=v._ptr[P],z=v._ptr[P+1];if(E)for(var j=$;j<z;j++){var L=v._index[j];L>=b&&L<=x&&B(v._values[j],L-b,P-C)}else{for(var U={},G=$;G<z;G++){var Z=v._index[G];U[Z]=v._values[G]}for(var H=b;H<=x;H++){var W=H in U?U[H]:0;B(W,H-b,P-C)}}}return D.push(T.length),new i({values:T,index:N,ptr:D,size:[x-b+1,w-C+1]})}i.prototype.forEach=function(v,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var x=this,C=this._size[0],w=this._size[1],A=ch(v,x,"forEach"),E=0;E<w;E++){var T=this._ptr[E],N=this._ptr[E+1];if(b)for(var D=T;D<N;D++){var M=this._index[D];A.fn(this._values[D],[M,E],x)}else{for(var k={},B=T;B<N;B++){var P=this._index[B];k[P]=this._values[B]}for(var $=0;$<C;$++){var z=$ in k?k[$]:0;A.fn(z,[$,E],x)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],b=0;b<v;b++)for(var x=this._ptr[b],C=this._ptr[b+1],w=x;w<C;w++){var A=this._index[w];yield{value:this._values[w],index:[A,b]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,b,x,C,w){var A=C[0],E=C[1],T=[],N,D;for(N=0;N<A;N++)for(T[N]=[],D=0;D<E;D++)T[N][D]=0;for(D=0;D<E;D++)for(var M=x[D],k=x[D+1],B=M;B<k;B++)N=b[B],T[N][D]=v?w?Ht(v[B]):v[B]:1;return T}return i.prototype.format=function(v){for(var b=this._size[0],x=this._size[1],C=this.density(),w="Sparse Matrix ["+tn(b,v)+" x "+tn(x,v)+"] density: "+tn(C,v)+`
`,A=0;A<x;A++)for(var E=this._ptr[A],T=this._ptr[A+1],N=E;N<T;N++){var D=this._index[N];w+=`
    (`+tn(D,v)+", "+tn(A,v)+") ==> "+(this._values?tn(this._values[N],v):"X")}return w},i.prototype.toString=function(){return tn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Gt(v)&&(v=v.toNumber()),!Dt(v)||!yt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=v>0?v:0,x=v<0?-v:0,C=this._size[0],w=this._size[1],A=Math.min(C-x,w-b),E=[],T=[],N=[];N[0]=0;for(var D=b;D<w&&E.length<A;D++)for(var M=this._ptr[D],k=this._ptr[D+1],B=M;B<k;B++){var P=this._index[B];if(P===D-b+x){E.push(this._values[B]),T[E.length-1]=P-x;break}}return N.push(E.length),new i({values:E,index:T,ptr:N,size:[A,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,b,x,C,w){if(!Kn(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(Z){if(Gt(Z)&&(Z=Z.toNumber()),!Dt(Z)||!yt(Z)||Z<1)throw new Error("Size values must be positive integers");return Z}),x){if(Gt(x)&&(x=x.toNumber()),!Dt(x)||!yt(x))throw new TypeError("The parameter k must be an integer number")}else x=0;var A=n,E=0;Pr(w)&&(A=e.find(n,[w,w])||n,E=e.convert(0,w));var T=x>0?x:0,N=x<0?-x:0,D=v[0],M=v[1],k=Math.min(D-N,M-T),B;if(Kn(b)){if(b.length!==k)throw new Error("Invalid value array length");B=function(H){return b[H]}}else if(Ot(b)){var P=b.size();if(P.length!==1||P[0]!==k)throw new Error("Invalid matrix length");B=function(H){return b.get([H])}}else B=function(){return b};for(var $=[],z=[],j=[],L=0;L<M;L++){j.push($.length);var U=L-T;if(U>=0&&U<k){var G=B(U);A(G,E)||(z.push(U+N),$.push(G))}}return j.push($.length),new i({values:$,index:z,ptr:j,size:[D,M]})},i.prototype.swapRows=function(v,b){if(!Dt(v)||!yt(v)||!Dt(b)||!yt(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return rr(v,this._size[0]),rr(b,this._size[0]),i._swapRows(v,b,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,b,x,C,w){for(var A=C[v],E=C[v+1],T=A;T<E;T++)w(x[T],b[T])},i._swapRows=function(v,b,x,C,w,A){for(var E=0;E<x;E++){var T=A[E],N=A[E+1],D=u(v,T,N,w),M=u(b,T,N,w);if(D<N&&M<N&&w[D]===v&&w[M]===b){if(C){var k=C[D];C[D]=C[M],C[M]=k}continue}if(D<N&&w[D]===v&&(M>=N||w[M]!==b)){var B=C?C[D]:void 0;w.splice(M,0,b),C&&C.splice(M,0,B),w.splice(M<=D?D+1:D,1),C&&C.splice(M<=D?D+1:D,1);continue}if(M<N&&w[M]===b&&(D>=N||w[D]!==v)){var P=C?C[M]:void 0;w.splice(D,0,v),C&&C.splice(D,0,P),w.splice(D<=M?M+1:M,1),C&&C.splice(D<=M?M+1:M,1)}}},i},{isClass:!0}),GUe="number",YUe=["typed"];function WUe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function KUe(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var o=e+n;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is not a valid number');return o}var XUe=re(GUe,YUe,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=WUe(i);if(o)return KUe(o);var a=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(a=Number(s[2]),i=s[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),ZUe="bigint",QUe=["typed"],JUe=re(ZUe,QUe,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),_P="string",eHe=["typed"],tHe=re(_P,eHe,t=>{var{typed:e}=t;return e(_P,{"":function(){return""},number:Vd,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n)),any:function(r){return String(r)}})}),OP="boolean",nHe=["typed"],rHe=re(OP,nHe,t=>{var{typed:e}=t;return e(OP,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var o=Number(r);if(r!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),iHe="bignumber",oHe=["typed","BigNumber"],aHe=re(iHe,oHe,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var a=o[2],s=n(o[1]),l=new n(2).pow(Number(a));if(s.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new n(2).pow(Number(a)-1);return s.gte(u)?s.sub(l):s}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),sHe="complex",lHe=["typed","Complex"],uHe=re(sHe,lHe,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(i){return new n(i,0)},"number, number":function(i,o){return new n(i,o)},"BigNumber, BigNumber":function(i,o){return new n(i.toNumber(),o.toNumber())},Fraction:function(i){return new n(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return n(i)},null:function(i){return n(0)},Object:function(i){if("re"in i&&"im"in i)return new n(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new n(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),cHe="fraction",fHe=["typed","Fraction"],dHe=re(cHe,fHe,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,o){return new n(i,o)},"bigint, bigint":function(i,o){return new n(i,o)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),IP="matrix",hHe=["typed","Matrix","DenseMatrix","SparseMatrix"],pHe=re(IP,hHe,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(IP,{"":function(){return o([])},string:function(s){return o([],s)},"string, string":function(s,l){return o([],s,l)},Array:function(s){return o(s)},Matrix:function(s){return o(s,s.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(a,s,l){if(s==="dense"||s==="default"||s===void 0)return new r(a,l);if(s==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),RP="matrixFromFunction",mHe=["typed","matrix","isZero"],gHe=re(RP,mHe,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(RP,{"Array | Matrix, function, string, string":function(a,s,l,u){return i(a,s,l,u)},"Array | Matrix, function, string":function(a,s,l){return i(a,s,l)},"Matrix, function":function(a,s){return i(a,s,"dense")},"Array, function":function(a,s){return i(a,s,"dense").toArray()},"Array | Matrix, string, function":function(a,s,l){return i(a,l,s)},"Array | Matrix, string, string, function":function(a,s,l,u){return i(a,u,s,l)}});function i(o,a,s,l){var u;return l!==void 0?u=n(s,l):u=n(s),u.resize(o),u.forEach(function(c,f){var d=a(f);r(d)||u.set(f,d)}),u}}),BP="matrixFromRows",vHe=["typed","matrix","flatten","size"],bHe=re(BP,vHe,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(BP,{"...Array":function(l){return o(l)},"...Matrix":function(l){return n(o(l.map(u=>u.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(s[0]),u=[];for(var c of s){var f=a(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));u.push(r(c))}return u}function a(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),LP="matrixFromColumns",yHe=["typed","matrix","flatten","size"],xHe=re(LP,yHe,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(LP,{"...Array":function(l){return o(l)},"...Matrix":function(l){return n(o(l.map(u=>u.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(s[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of s){var d=a(f);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var h=r(f),m=0;m<l;m++)u[m].push(h[m])}return u}function a(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),FP="splitUnit",wHe=["typed"],EHe=re(FP,wHe,t=>{var{typed:e}=t;return e(FP,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),PP="unaryMinus",CHe=["typed"],SHe=re(PP,CHe,t=>{var{typed:e}=t;return e(PP,{number:nee,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n,!0))})}),$P="unaryPlus",THe=["typed","config","numeric"],AHe=re($P,THe,t=>{var{typed:e,config:n,numeric:r}=t;return e($P,{number:ree,Complex:function(o){return o},BigNumber:function(o){return o},bigint:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":e.referToSelf(i=>o=>Yt(o,i,!0)),boolean:function(o){return r(o?1:0,n.number)},string:function(o){return r(o,Uf(o,n))}})}),zP="abs",NHe=["typed"],DHe=re(zP,NHe,t=>{var{typed:e}=t;return e(zP,{number:QJ,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n,!0))})}),UP="mapSlices",MHe=["typed","isInteger"],K4=re(UP,MHe,t=>{var{typed:e,isInteger:n}=t;return e(UP,{"Array | Matrix, number | BigNumber, function":function(i,o,a){if(!n(o))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?Vt(i):i.size();if(o<0||o>=s.length)throw new fl(o,s.length);return Ot(i)?i.create(rE(i.valueOf(),o,a),i.datatype()):rE(i,o,a)}})},{formerly:"apply"});function rE(t,e,n){var r,i,o;if(e<=0)if(Array.isArray(t[0])){for(o=kHe(t),i=[],r=0;r<o.length;r++)i[r]=rE(o[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=rE(t[r],e-1,n);return i}}function kHe(t){var e=t.length,n=t[0].length,r,i,o=[];for(i=0;i<n;i++){var a=[];for(r=0;r<e;r++)a.push(t[r][i]);o.push(a)}return o}var HP="addScalar",_He=["typed"],OHe=re(HP,_He,t=>{var{typed:e}=t;return e(HP,{"number, number":JJ,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),VP="subtractScalar",IHe=["typed"],RHe=re(VP,IHe,t=>{var{typed:e}=t;return e(VP,{"number, number":eee,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),qP="cbrt",BHe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],LHe=re(qP,BHe,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:i,matrix:o,Complex:a,BigNumber:s,Fraction:l}=t;return n(qP,{number:$g,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(f,d){var h=f.arg()/3,m=f.abs(),v=new a($g(m),0).mul(new a(0,h).exp());if(d){var b=[v,new a($g(m),0).mul(new a(0,h+Math.PI*2/3).exp()),new a($g(m),0).mul(new a(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?b:o(b)}else return v}function c(f){if(f.value&&$u(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=u(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var m;Gt(f.value)?m=new s(1).div(3):_v(f.value)?m=new l(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=i(v.value)),v}}}),FHe="matAlgo11xS0s",PHe=["typed","equalScalar"],Yi=re(FHe,PHe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,b=n,x=0,C=a;typeof d=="string"&&(v=d,b=e.find(n,[v,v]),x=e.convert(0,v),o=e.convert(o,v),C=e.find(a,[v,v]));for(var w=[],A=[],E=[],T=0;T<m;T++){E[T]=A.length;for(var N=c[T],D=c[T+1],M=N;M<D;M++){var k=u[M],B=s?C(o,l[M]):C(l[M],o);b(B,x)||(A.push(k),w.push(B))}}return E[m]=A.length,i.createSparseMatrix({values:w,index:A,ptr:E,size:[h,m],datatype:v})}}),$He="matAlgo12xSfs",zHe=["typed","DenseMatrix"],di=re($He,zHe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,b=a;typeof d=="string"&&(v=d,o=e.convert(o,v),b=e.find(a,[v,v]));for(var x=[],C=[],w=[],A=0;A<m;A++){for(var E=A+1,T=c[A],N=c[A+1],D=T;D<N;D++){var M=u[D];C[M]=l[D],w[M]=E}for(var k=0;k<h;k++)A===0&&(x[k]=[]),w[k]===E?x[k][A]=s?b(o,C[k]):b(C[k],o):x[k][A]=s?b(o,0):b(0,o)}return new n({data:x,size:[h,m],datatype:v})}}),UHe="matAlgo14xDs",HHe=["typed"],Cs=re(UHe,HHe,t=>{var{typed:e}=t;return function(i,o,a,s){var l=i._data,u=i._size,c=i._datatype,f,d=a;typeof c=="string"&&(f=c,o=e.convert(o,f),d=e.find(a,[f,f]));var h=u.length>0?n(d,0,u,u[0],l,o,s):[];return i.createDenseMatrix({data:h,size:Ht(u),datatype:f})};function n(r,i,o,a,s,l,u){var c=[];if(i===o.length-1)for(var f=0;f<a;f++)c[f]=u?r(l,s[f]):r(s[f],l);else for(var d=0;d<a;d++)c[d]=n(r,i+1,o,o[i+1],s[d],l,u);return c}}),X4="ceil",VHe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],qHe=new Af(10),jHe=re(X4,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(o){var a=Math.ceil(o),s=r(o);return a===s?a:Mi(o,s,n.relTol,n.absTol)&&!Mi(o,a,n.relTol,n.absTol)?s:a}return e(X4,{number:i,"number, number":function(a,s){if(!yt(s))throw new RangeError("number of decimals in function ceil must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**s;return i(a*l)/l}})}),GHe=re(X4,VHe,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}=t,l=Yi({typed:e,equalScalar:o}),u=di({typed:e,DenseMatrix:s}),c=Cs({typed:e}),f=jHe({typed:e,config:n,round:r});function d(h){var m=(x,C)=>bs(x,C,n.relTol,n.absTol),v=h.ceil(),b=r(h);return v.eq(b)?v:m(h,b)&&!m(h,v)?b:v}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(m){return m.ceil()},"Complex, number":function(m,v){return m.ceil(v)},"Complex, BigNumber":function(m,v){return m.ceil(v.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(m,v){var b=qHe.pow(v);return d(m.mul(b)).div(b)},bigint:h=>h,"bigint, number":(h,m)=>h,"bigint, BigNumber":(h,m)=>h,Fraction:function(m){return m.ceil()},"Fraction, number":function(m,v){return m.ceil(v)},"Fraction, BigNumber":function(m,v){return m.ceil(v.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(m,v,b){var x=m.toNumeric(b);return b.multiply(h(x,v))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(m,v,b)=>h(m,v.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(m,v,b)=>Yt(m,x=>h(x,v,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(m,v)=>h(m,0,v)),"Array | Matrix":e.referToSelf(h=>m=>Yt(m,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(m,v)=>Yt(m,b=>h(b,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(m,v)=>l(m,v,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(m,v)=>c(m,v,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(m,v)=>c(i(v),m,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(m,v)=>o(m,0)?a(v.size(),v.storage()):v.storage()==="dense"?c(v,m,h,!0):u(v,m,h,!0))})}),jP="cube",YHe=["typed"],WHe=re(jP,YHe,t=>{var{typed:e}=t;return e(jP,{number:iee,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),GP="exp",KHe=["typed"],XHe=re(GP,KHe,t=>{var{typed:e}=t;return e(GP,{number:oee,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),YP="expm1",ZHe=["typed","Complex"],QHe=re(YP,ZHe,t=>{var{typed:e,Complex:n}=t;return e(YP,{number:aee,Complex:function(i){var o=Math.exp(i.re);return new n(o*Math.cos(i.im)-1,o*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),Z4="fix",JHe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],eVe=re(Z4,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(Z4,{number:function(o){return o>0?r(o):n(o)},"number, number":function(o,a){return o>0?r(o,a):n(o,a)}})}),tVe=re(Z4,JHe,t=>{var{typed:e,Complex:n,matrix:r,ceil:i,floor:o,equalScalar:a,zeros:s,DenseMatrix:l}=t,u=di({typed:e,DenseMatrix:l}),c=Cs({typed:e}),f=eVe({typed:e,ceil:i,floor:o});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new n(h.re>0?o(h.re,m):i(h.re,m),h.im>0?o(h.im,m):i(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new n(h.re>0?o(h.re,v):i(h.re,v),h.im>0?o(h.im,v):i(h.im,v))},BigNumber:function(h){return h.isNegative()?i(h):o(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?i(h,m):o(h,m)},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0n?i(h,m):o(h,m)},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var b=h.toNumeric(v);return v.multiply(d(b,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Yt(h,b=>d(b,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Yt(h,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>Yt(h,v=>d(v,m),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>a(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),Q4="floor",nVe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],rVe=new Af(10),iVe=re(Q4,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(o){var a=Math.floor(o),s=r(o);return a===s?a:Mi(o,s,n.relTol,n.absTol)&&!Mi(o,a,n.relTol,n.absTol)?s:a}return e(Q4,{number:i,"number, number":function(a,s){if(!yt(s))throw new RangeError("number of decimals in function floor must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**s;return i(a*l)/l}})}),Uee=re(Q4,nVe,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}=t,l=Yi({typed:e,equalScalar:o}),u=di({typed:e,DenseMatrix:s}),c=Cs({typed:e}),f=iVe({typed:e,config:n,round:r});function d(h){var m=(x,C)=>bs(x,C,n.relTol,n.absTol),v=h.floor(),b=r(h);return v.eq(b)?v:m(h,b)&&!m(h,v)?b:v}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(m){return m.floor()},"Complex, number":function(m,v){return m.floor(v)},"Complex, BigNumber":function(m,v){return m.floor(v.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(m,v){var b=rVe.pow(v);return d(m.mul(b)).div(b)},bigint:h=>h,"bigint, number":(h,m)=>h,"bigint, BigNumber":(h,m)=>h,Fraction:function(m){return m.floor()},"Fraction, number":function(m,v){return m.floor(v)},"Fraction, BigNumber":function(m,v){return m.floor(v.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(m,v,b){var x=m.toNumeric(b);return b.multiply(h(x,v))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(m,v,b)=>h(m,v.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(m,v,b)=>Yt(m,x=>h(x,v,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(m,v)=>h(m,0,v)),"Array | Matrix":e.referToSelf(h=>m=>Yt(m,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(m,v)=>Yt(m,b=>h(b,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(m,v)=>l(m,v,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(m,v)=>c(m,v,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(m,v)=>c(i(v),m,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(m,v)=>o(m,0)?a(v.size(),v.storage()):v.storage()==="dense"?c(v,m,h,!0):u(v,m,h,!0))})}),oVe="matAlgo02xDS0",aVe=["typed","equalScalar"],hl=re(oVe,aVe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a,s){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=o._values,d=o._index,h=o._ptr,m=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==m.length)throw new Zt(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=u[0],x=u[1],C,w=n,A=0,E=a;typeof c=="string"&&c===v&&c!=="mixed"&&(C=c,w=e.find(n,[C,C]),A=e.convert(0,C),E=e.find(a,[C,C]));for(var T=[],N=[],D=[],M=0;M<x;M++){D[M]=N.length;for(var k=h[M],B=h[M+1],P=k;P<B;P++){var $=d[P],z=s?E(f[P],l[$][M]):E(l[$][M],f[P]);w(z,A)||(N.push($),T.push(z))}}return D[x]=N.length,o.createSparseMatrix({values:T,index:N,ptr:D,size:[b,x],datatype:c===i._datatype&&v===o._datatype?C:void 0})}}),sVe="matAlgo03xDSf",lVe=["typed"],po=re(sVe,lVe,t=>{var{typed:e}=t;return function(r,i,o,a){var s=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new Zt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],b=l[1],x,C=0,w=o;typeof u=="string"&&u===m&&u!=="mixed"&&(x=u,C=e.convert(0,x),w=e.find(o,[x,x]));for(var A=[],E=0;E<v;E++)A[E]=[];for(var T=[],N=[],D=0;D<b;D++){for(var M=D+1,k=d[D],B=d[D+1],P=k;P<B;P++){var $=f[P];T[$]=a?w(c[P],s[$][D]):w(s[$][D],c[P]),N[$]=M}for(var z=0;z<v;z++)N[z]===M?A[z][D]=T[z]:A[z][D]=a?w(C,s[z][D]):w(s[z][D],C)}return r.createDenseMatrix({data:A,size:[v,b],datatype:u===r._datatype&&m===i._datatype?x:void 0})}}),uVe="matAlgo05xSfSf",cVe=["typed","equalScalar"],oS=re(uVe,cVe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,v=o._size,b=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var x=c[0],C=c[1],w,A=n,E=0,T=a;typeof f=="string"&&f===b&&f!=="mixed"&&(w=f,A=e.find(n,[w,w]),E=e.convert(0,w),T=e.find(a,[w,w]));var N=s&&d?[]:void 0,D=[],M=[],k=N?[]:void 0,B=N?[]:void 0,P=[],$=[],z,j,L,U;for(j=0;j<C;j++){M[j]=D.length;var G=j+1;for(L=u[j],U=u[j+1];L<U;L++)z=l[L],D.push(z),P[z]=G,k&&(k[z]=s[L]);for(L=m[j],U=m[j+1];L<U;L++)z=h[L],P[z]!==G&&D.push(z),$[z]=G,B&&(B[z]=d[L]);if(N)for(L=M[j];L<D.length;){z=D[L];var Z=P[z],H=$[z];if(Z===G||H===G){var W=Z===G?k[z]:E,K=H===G?B[z]:E,I=T(W,K);A(I,E)?D.splice(L,1):(N.push(I),L++)}}}return M[C]=D.length,i.createSparseMatrix({values:N,index:D,ptr:M,size:[x,C],datatype:f===i._datatype&&b===o._datatype?w:void 0})}}),fVe="matAlgo13xDD",dVe=["typed"],Hee=re(fVe,dVe,t=>{var{typed:e}=t;return function(i,o,a){var s=i._data,l=i._size,u=i._datatype,c=o._data,f=o._size,d=o._datatype,h=[];if(l.length!==f.length)throw new Zt(l.length,f.length);for(var m=0;m<l.length;m++){if(l[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");h[m]=l[m]}var v,b=a;typeof u=="string"&&u===d&&(v=u,b=e.find(a,[v,v]));var x=h.length>0?n(b,0,h,h[0],s,c):[];return i.createDenseMatrix({data:x,size:h,datatype:v})};function n(r,i,o,a,s,l){var u=[];if(i===o.length-1)for(var c=0;c<a;c++)u[c]=r(s[c],l[c]);else for(var f=0;f<a;f++)u[f]=n(r,i+1,o,o[i+1],s[f],l[f]);return u}});function vi(t,e){if(Xu(t.size(),e.size()))return[t,e];var n=Xw(t.size(),e.size());return[t,e].map(r=>hVe(r,n))}function hVe(t,e){return Xu(t.size(),e)?t:t.create(Od(t.valueOf(),e),t.datatype())}var pVe="matrixAlgorithmSuite",mVe=["typed","matrix"],or=re(pVe,mVe,t=>{var{typed:e,matrix:n}=t,r=Hee({typed:e}),i=Cs({typed:e});return function(a){var s=a.elop,l=a.SD||a.DS,u;s?(u={"DenseMatrix, DenseMatrix":(h,m)=>r(...vi(h,m),s),"Array, Array":(h,m)=>r(...vi(n(h),n(m)),s).valueOf(),"Array, DenseMatrix":(h,m)=>r(...vi(n(h),m),s),"DenseMatrix, Array":(h,m)=>r(...vi(h,n(m)),s)},a.SS&&(u["SparseMatrix, SparseMatrix"]=(h,m)=>a.SS(...vi(h,m),s,!1)),a.DS&&(u["DenseMatrix, SparseMatrix"]=(h,m)=>a.DS(...vi(h,m),s,!1),u["Array, SparseMatrix"]=(h,m)=>a.DS(...vi(n(h),m),s,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(h,m)=>l(...vi(m,h),s,!0),u["SparseMatrix, Array"]=(h,m)=>l(...vi(n(m),h),s,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...vi(m,v),h)),"Array, Array":e.referToSelf(h=>(m,v)=>r(...vi(n(m),n(v)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...vi(n(m),v),h)),"DenseMatrix, Array":e.referToSelf(h=>(m,v)=>r(...vi(m,n(v)),h))},a.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>a.SS(...vi(m,v),h,!1))),a.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>a.DS(...vi(m,v),h,!1)),u["Array, SparseMatrix"]=e.referToSelf(h=>(m,v)=>a.DS(...vi(n(m),v),h,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(m,v)=>l(...vi(v,m),h,!0)),u["SparseMatrix, Array"]=e.referToSelf(h=>(m,v)=>l(...vi(n(v),m),h,!0))));var c=a.scalar||"any",f=a.Ds||a.Ss;f&&(s?(u["DenseMatrix,"+c]=(h,m)=>i(h,m,s,!1),u[c+", DenseMatrix"]=(h,m)=>i(m,h,s,!0),u["Array,"+c]=(h,m)=>i(n(h),m,s,!1).valueOf(),u[c+", Array"]=(h,m)=>i(n(m),h,s,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(h=>(m,v)=>i(m,v,h,!1)),u[c+", DenseMatrix"]=e.referToSelf(h=>(m,v)=>i(v,m,h,!0)),u["Array,"+c]=e.referToSelf(h=>(m,v)=>i(n(m),v,h,!1).valueOf()),u[c+", Array"]=e.referToSelf(h=>(m,v)=>i(n(v),m,h,!0).valueOf())));var d=a.sS!==void 0?a.sS:a.Ss;return s?(a.Ss&&(u["SparseMatrix,"+c]=(h,m)=>a.Ss(h,m,s,!1)),d&&(u[c+", SparseMatrix"]=(h,m)=>d(m,h,s,!0))):(a.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(h=>(m,v)=>a.Ss(m,v,h,!1))),d&&(u[c+", SparseMatrix"]=e.referToSelf(h=>(m,v)=>d(v,m,h,!0)))),s&&s.signatures&&CJ(u,s.signatures),u}}),WP="mod",gVe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],Vee=re(WP,gVe,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s,concat:l}=t,u=Uee({typed:e,config:n,round:r,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}),c=hl({typed:e,equalScalar:o}),f=po({typed:e}),d=oS({typed:e,equalScalar:o}),h=Yi({typed:e,equalScalar:o}),m=di({typed:e,DenseMatrix:s}),v=or({typed:e,matrix:i,concat:l});return e(WP,{"number, number":b,"BigNumber, BigNumber":function(C,w){return w.isZero()?C:C.sub(w.mul(u(C.div(w))))},"bigint, bigint":function(C,w){if(w===0n)return C;if(C<0){var A=C%w;return A===0n?A:A+w}return C%w},"Fraction, Fraction":function(C,w){return w.equals(0)?C:C.sub(w.mul(u(C.div(w))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function b(x,C){return C===0?x:x-C*u(x/C)}}),vVe="matAlgo01xDSid",bVe=["typed"],Vf=re(vVe,bVe,t=>{var{typed:e}=t;return function(r,i,o,a){var s=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new Zt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],b=l[1],x=typeof u=="string"&&u!=="mixed"&&u===m?u:void 0,C=x?e.find(o,[x,x]):o,w,A,E=[];for(w=0;w<v;w++)E[w]=[];var T=[],N=[];for(A=0;A<b;A++){for(var D=A+1,M=d[A],k=d[A+1],B=M;B<k;B++)w=f[B],T[w]=a?C(c[B],s[w][A]):C(s[w][A],c[B]),N[w]=D;for(w=0;w<v;w++)N[w]===D?E[w][A]=T[w]:E[w][A]=s[w][A]}return r.createDenseMatrix({data:E,size:[v,b],datatype:u===r._datatype&&m===i._datatype?x:void 0})}}),yVe="matAlgo04xSidSid",xVe=["typed","equalScalar"],q5=re(yVe,xVe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,v=o._size,b=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var x=c[0],C=c[1],w,A=n,E=0,T=a;typeof f=="string"&&f===b&&f!=="mixed"&&(w=f,A=e.find(n,[w,w]),E=e.convert(0,w),T=e.find(a,[w,w]));var N=s&&d?[]:void 0,D=[],M=[],k=s&&d?[]:void 0,B=s&&d?[]:void 0,P=[],$=[],z,j,L,U,G;for(j=0;j<C;j++){M[j]=D.length;var Z=j+1;for(U=u[j],G=u[j+1],L=U;L<G;L++)z=l[L],D.push(z),P[z]=Z,k&&(k[z]=s[L]);for(U=m[j],G=m[j+1],L=U;L<G;L++)if(z=h[L],P[z]===Z){if(k){var H=T(k[z],d[L]);A(H,E)?P[z]=null:k[z]=H}}else D.push(z),$[z]=Z,B&&(B[z]=d[L]);if(k&&B)for(L=M[j];L<D.length;)z=D[L],P[z]===Z?(N[L]=k[z],L++):$[z]===Z?(N[L]=B[z],L++):D.splice(L,1)}return M[C]=D.length,i.createSparseMatrix({values:N,index:D,ptr:M,size:[x,C],datatype:f===i._datatype&&b===o._datatype?w:void 0})}}),wVe="matAlgo10xSids",EVe=["typed","DenseMatrix"],Sh=re(wVe,EVe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,b=a;typeof d=="string"&&(v=d,o=e.convert(o,v),b=e.find(a,[v,v]));for(var x=[],C=[],w=[],A=0;A<m;A++){for(var E=A+1,T=c[A],N=c[A+1],D=T;D<N;D++){var M=u[D];C[M]=l[D],w[M]=E}for(var k=0;k<h;k++)A===0&&(x[k]=[]),w[k]===E?x[k][A]=s?b(o,C[k]):b(C[k],o):x[k][A]=o}return new n({data:x,size:[h,m],datatype:v})}});function Th(t,e,n,r){if(!(this instanceof Th))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}Th.prototype=new Error;Th.prototype.constructor=Error;Th.prototype.name="ArgumentsError";Th.prototype.isArgumentsError=!0;var KP="gcd",CVe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],I3="number | BigNumber | Fraction | Matrix | Array",SVe="".concat(I3,", ").concat(I3,", ...").concat(I3);function XP(t){return!t.some(e=>Array.isArray(e))}var TVe=re(KP,CVe,t=>{var{typed:e,matrix:n,config:r,round:i,equalScalar:o,zeros:a,BigNumber:s,DenseMatrix:l,concat:u}=t,c=Vee({typed:e,config:r,round:i,matrix:n,equalScalar:o,zeros:a,DenseMatrix:l,concat:u}),f=Vf({typed:e}),d=q5({typed:e,equalScalar:o}),h=Sh({typed:e,DenseMatrix:l}),m=or({typed:e,matrix:n,concat:u});return e(KP,{"number, number":v,"BigNumber, BigNumber":b,"Fraction, Fraction":(x,C)=>x.gcd(C)},m({SS:d,DS:f,Ss:h}),{[SVe]:e.referToSelf(x=>(C,w,A)=>{for(var E=x(C,w),T=0;T<A.length;T++)E=x(E,A[T]);return E}),Array:e.referToSelf(x=>C=>{if(C.length===1&&Array.isArray(C[0])&&XP(C[0]))return x(...C[0]);if(XP(C))return x(...C);throw new Th("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(x=>C=>x(C.toArray()))});function v(x,C){if(!yt(x)||!yt(C))throw new Error("Parameters in function gcd must be integer numbers");for(var w;C!==0;)w=c(x,C),x=C,C=w;return x<0?-x:x}function b(x,C){if(!x.isInt()||!C.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var w=new s(0);!C.isZero();){var A=c(x,C);x=C,C=A}return x.lt(w)?x.neg():x}}),AVe="matAlgo06xS0S0",NVe=["typed","equalScalar"],aS=re(AVe,NVe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a){var s=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=o._values,f=o._size,d=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(l.length!==f.length)throw new Zt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var h=l[0],m=l[1],v,b=n,x=0,C=a;typeof u=="string"&&u===d&&u!=="mixed"&&(v=u,b=e.find(n,[v,v]),x=e.convert(0,v),C=e.find(a,[v,v]));for(var w=s&&c?[]:void 0,A=[],E=[],T=w?[]:void 0,N=[],D=[],M=0;M<m;M++){E[M]=A.length;var k=M+1;if(vP(i,M,N,T,D,k,A,C),vP(o,M,N,T,D,k,A,C),T)for(var B=E[M];B<A.length;){var P=A[B];if(D[P]===k){var $=T[P];b($,x)?A.splice(B,1):(w.push($),B++)}else A.splice(B,1)}else for(var z=E[M];z<A.length;){var j=A[z];D[j]!==k?A.splice(z,1):z++}}return E[m]=A.length,i.createSparseMatrix({values:w,index:A,ptr:E,size:[h,m],datatype:u===i._datatype&&d===o._datatype?v:void 0})}}),ZP="lcm",DVe=["typed","matrix","equalScalar","concat"],MVe=re(ZP,DVe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,o=hl({typed:e,equalScalar:r}),a=aS({typed:e,equalScalar:r}),s=Yi({typed:e,equalScalar:r}),l=or({typed:e,matrix:n,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(h,m,v)=>{for(var b=d(h,m),x=0;x<v.length;x++)b=d(b,v[x]);return b}),e(ZP,{"number, number":see,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},l({SS:a,DS:o,Ss:s}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}});function j5(t,e,n,r){return function(i){if(i>0||n.predictable){if(i<=0)return NaN;var o=i.toString(16),a=o.substring(0,15);return t*(o.length-a.length)+e(+("0x"+a))}return r(i.toNumber())}}var QP="log10",kVe=["typed","config","Complex"],_Ve=Jw(16),OVe=re(QP,kVe,t=>{var{typed:e,config:n,Complex:r}=t;function i(a){return a.log().div(Math.LN10)}function o(a){return i(new r(a,0))}return e(QP,{number:function(s){return s>=0||n.predictable?Jw(s):o(s)},bigint:j5(_Ve,Jw,n,o),Complex:i,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log():o(s.toNumber())},"Array | Matrix":e.referToSelf(a=>s=>Yt(s,a))})}),JP="log2",IVe=["typed","config","Complex"],RVe=re(JP,IVe,t=>{var{typed:e,config:n,Complex:r}=t;function i(a){return o(new r(a,0))}return e(JP,{number:function(s){return s>=0||n.predictable?q4(s):i(s)},bigint:j5(4,q4,n,i),Complex:o,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):i(s.toNumber())},"Array | Matrix":e.referToSelf(a=>s=>Yt(s,a))});function o(a){var s=Math.sqrt(a.re*a.re+a.im*a.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),BVe="multiplyScalar",LVe=["typed"],FVe=re(BVe,LVe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":tee,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),e$="multiply",PVe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],$Ve=re(e$,PVe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:o,dot:a}=t,s=Yi({typed:e,equalScalar:o}),l=Cs({typed:e});function u(E,T){switch(E.length){case 1:switch(T.length){case 1:if(E[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;case 2:switch(T.length){case 1:if(E[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+T[0]+")");break;case 2:if(E[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function c(E,T,N){if(N===0)throw new Error("Cannot multiply two empty vectors");return a(E,T)}function f(E,T){if(T.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,T)}function d(E,T){var N=E._data,D=E._size,M=E._datatype||E.getDataType(),k=T._data,B=T._size,P=T._datatype||T.getDataType(),$=D[0],z=B[1],j,L=r,U=i;M&&P&&M===P&&typeof M=="string"&&M!=="mixed"&&(j=M,L=e.find(r,[j,j]),U=e.find(i,[j,j]));for(var G=[],Z=0;Z<z;Z++){for(var H=U(N[0],k[0][Z]),W=1;W<$;W++)H=L(H,U(N[W],k[W][Z]));G[Z]=H}return E.createDenseMatrix({data:G,size:[z],datatype:M===E._datatype&&P===T._datatype?j:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":C}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":x,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":A});function v(E,T){var N=E._data,D=E._size,M=E._datatype||E.getDataType(),k=T._data,B=T._datatype||T.getDataType(),P=D[0],$=D[1],z,j=r,L=i;M&&B&&M===B&&typeof M=="string"&&M!=="mixed"&&(z=M,j=e.find(r,[z,z]),L=e.find(i,[z,z]));for(var U=[],G=0;G<P;G++){for(var Z=N[G],H=L(Z[0],k[0]),W=1;W<$;W++)H=j(H,L(Z[W],k[W]));U[G]=H}return E.createDenseMatrix({data:U,size:[P],datatype:M===E._datatype&&B===T._datatype?z:void 0})}function b(E,T){var N=E._data,D=E._size,M=E._datatype||E.getDataType(),k=T._data,B=T._size,P=T._datatype||T.getDataType(),$=D[0],z=D[1],j=B[1],L,U=r,G=i;M&&P&&M===P&&typeof M=="string"&&M!=="mixed"&&M!=="mixed"&&(L=M,U=e.find(r,[L,L]),G=e.find(i,[L,L]));for(var Z=[],H=0;H<$;H++){var W=N[H];Z[H]=[];for(var K=0;K<j;K++){for(var I=G(W[0],k[0][K]),ee=1;ee<z;ee++)I=U(I,G(W[ee],k[ee][K]));Z[H][K]=I}}return E.createDenseMatrix({data:Z,size:[$,j],datatype:M===E._datatype&&P===T._datatype?L:void 0})}function x(E,T){var N=E._data,D=E._size,M=E._datatype||E.getDataType(),k=T._values,B=T._index,P=T._ptr,$=T._size,z=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!k)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var j=D[0],L=$[1],U,G=r,Z=i,H=o,W=0;M&&z&&M===z&&typeof M=="string"&&M!=="mixed"&&(U=M,G=e.find(r,[U,U]),Z=e.find(i,[U,U]),H=e.find(o,[U,U]),W=e.convert(0,U));for(var K=[],I=[],ee=[],Q=T.createSparseMatrix({values:K,index:I,ptr:ee,size:[j,L],datatype:M===E._datatype&&z===T._datatype?U:void 0}),ce=0;ce<L;ce++){ee[ce]=I.length;var ve=P[ce],ie=P[ce+1];if(ie>ve)for(var X=0,le=0;le<j;le++){for(var Ce=le+1,he=void 0,Te=ve;Te<ie;Te++){var Ae=B[Te];X!==Ce?(he=Z(N[le][Ae],k[Te]),X=Ce):he=G(he,Z(N[le][Ae],k[Te]))}X===Ce&&!H(he,W)&&(I.push(le),K.push(he))}}return ee[L]=I.length,Q}function C(E,T){var N=E._values,D=E._index,M=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!N)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var B=T._data,P=T._datatype||T.getDataType(),$=E._size[0],z=T._size[0],j=[],L=[],U=[],G,Z=r,H=i,W=o,K=0;k&&P&&k===P&&typeof k=="string"&&k!=="mixed"&&(G=k,Z=e.find(r,[G,G]),H=e.find(i,[G,G]),W=e.find(o,[G,G]),K=e.convert(0,G));var I=[],ee=[];U[0]=0;for(var Q=0;Q<z;Q++){var ce=B[Q];if(!W(ce,K))for(var ve=M[Q],ie=M[Q+1],X=ve;X<ie;X++){var le=D[X];ee[le]?I[le]=Z(I[le],H(ce,N[X])):(ee[le]=!0,L.push(le),I[le]=H(ce,N[X]))}}for(var Ce=L.length,he=0;he<Ce;he++){var Te=L[he];j[he]=I[Te]}return U[1]=L.length,E.createSparseMatrix({values:j,index:L,ptr:U,size:[$,1],datatype:k===E._datatype&&P===T._datatype?G:void 0})}function w(E,T){var N=E._values,D=E._index,M=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!N)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var B=T._data,P=T._datatype||T.getDataType(),$=E._size[0],z=T._size[0],j=T._size[1],L,U=r,G=i,Z=o,H=0;k&&P&&k===P&&typeof k=="string"&&k!=="mixed"&&(L=k,U=e.find(r,[L,L]),G=e.find(i,[L,L]),Z=e.find(o,[L,L]),H=e.convert(0,L));for(var W=[],K=[],I=[],ee=E.createSparseMatrix({values:W,index:K,ptr:I,size:[$,j],datatype:k===E._datatype&&P===T._datatype?L:void 0}),Q=[],ce=[],ve=0;ve<j;ve++){I[ve]=K.length;for(var ie=ve+1,X=0;X<z;X++){var le=B[X][ve];if(!Z(le,H))for(var Ce=M[X],he=M[X+1],Te=Ce;Te<he;Te++){var Ae=D[Te];ce[Ae]!==ie?(ce[Ae]=ie,K.push(Ae),Q[Ae]=G(le,N[Te])):Q[Ae]=U(Q[Ae],G(le,N[Te]))}}for(var qe=I[ve],rt=K.length,lt=qe;lt<rt;lt++){var Qe=K[lt];W[lt]=Q[Qe]}}return I[j]=K.length,ee}function A(E,T){var N=E._values,D=E._index,M=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType(),B=T._values,P=T._index,$=T._ptr,z=T._datatype||T._data===void 0?T._datatype:T.getDataType(),j=E._size[0],L=T._size[1],U=N&&B,G,Z=r,H=i;k&&z&&k===z&&typeof k=="string"&&k!=="mixed"&&(G=k,Z=e.find(r,[G,G]),H=e.find(i,[G,G]));for(var W=U?[]:void 0,K=[],I=[],ee=E.createSparseMatrix({values:W,index:K,ptr:I,size:[j,L],datatype:k===E._datatype&&z===T._datatype?G:void 0}),Q=U?[]:void 0,ce=[],ve,ie,X,le,Ce,he,Te,Ae,qe=0;qe<L;qe++){I[qe]=K.length;var rt=qe+1;for(Ce=$[qe],he=$[qe+1],le=Ce;le<he;le++)if(Ae=P[le],U)for(ie=M[Ae],X=M[Ae+1],ve=ie;ve<X;ve++)Te=D[ve],ce[Te]!==rt?(ce[Te]=rt,K.push(Te),Q[Te]=H(B[le],N[ve])):Q[Te]=Z(Q[Te],H(B[le],N[ve]));else for(ie=M[Ae],X=M[Ae+1],ve=ie;ve<X;ve++)Te=D[ve],ce[Te]!==rt&&(ce[Te]=rt,K.push(Te));if(U)for(var lt=I[qe],Qe=K.length,st=lt;st<Qe;st++){var dt=K[st];W[st]=Q[dt]}}return I[L]=K.length,ee}return e(e$,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(T,N)=>{u(Vt(T),Vt(N));var D=E(n(T),n(N));return Ot(D)?D.valueOf():D}),"Matrix, Matrix":function(T,N){var D=T.size(),M=N.size();return u(D,M),D.length===1?M.length===1?c(T,N,D[0]):f(T,N):M.length===1?h(T,N):m(T,N)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(T,N)=>E(T,n(N))),"Array, Matrix":e.referToSelf(E=>(T,N)=>E(n(T,N.storage()),N)),"SparseMatrix, any":function(T,N){return s(T,N,i,!1)},"DenseMatrix, any":function(T,N){return l(T,N,i,!1)},"any, SparseMatrix":function(T,N){return s(N,T,i,!0)},"any, DenseMatrix":function(T,N){return l(N,T,i,!0)},"Array, any":function(T,N){return l(n(T),N,i,!1).valueOf()},"any, Array":function(T,N){return l(n(N),T,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(T,N,D)=>{for(var M=E(T,N),k=0;k<D.length;k++)M=E(M,D[k]);return M})})}),t$="nthRoot",zVe=["typed","matrix","equalScalar","BigNumber","concat"],UVe=re(t$,zVe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,concat:o}=t,a=Vf({typed:e}),s=hl({typed:e,equalScalar:r}),l=aS({typed:e,equalScalar:r}),u=Yi({typed:e,equalScalar:r}),c=or({typed:e,matrix:n,concat:o});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(t$,{number:xP,"number, number":xP,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(n(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return a(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(n(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function d(h,m){var v=i.precision,b=i.clone({precision:v+2}),x=new i(0),C=new b(1),w=m.isNegative();if(w&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return w?new b(1/0):0;if(!h.isFinite())return w?x:h;var A=h.abs().pow(C.div(m));return A=h.isNeg()?A.neg():A,new i((w?C.div(A):A).toPrecision(v))}}),n$="sign",HVe=["typed","BigNumber","Fraction","complex"],VVe=re(n$,HVe,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:i}=t;return e(n$,{number:j4,Complex:function(a){return a.im===0?r(j4(a.re)):a.sign()},BigNumber:function(a){return new n(a.cmp(0))},bigint:function(a){return a>0n?1n:a<0n?-1n:0n},Fraction:function(a){return a.n===0n?new i(0):new i(a.s)},"Array | Matrix":e.referToSelf(o=>a=>Yt(a,o,!0)),Unit:e.referToSelf(o=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(o,a.valueType())(a.value)})})}),qVe="sqrt",jVe=["config","typed","Complex"],GVe=re(qVe,jVe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new r(o,0).sqrt()}}),r$="square",YVe=["typed"],WVe=re(r$,YVe,t=>{var{typed:e}=t;return e(r$,{number:lee,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),i$="subtract",KVe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],XVe=re(i$,KVe,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:o,DenseMatrix:a,concat:s}=t,l=Vf({typed:e}),u=po({typed:e}),c=oS({typed:e,equalScalar:r}),f=Sh({typed:e,DenseMatrix:a}),d=di({typed:e,DenseMatrix:a}),h=or({typed:e,matrix:n,concat:s});return e(i$,{"any, any":i},h({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:f}))}),o$="xgcd",ZVe=["typed","config","matrix","BigNumber"],QVe=re(o$,ZVe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(o$,{"number, number":function(s,l){var u=uee(s,l);return n.matrix==="Array"?u:r(u)},"BigNumber, BigNumber":o});function o(a,s){var l,u,c,f=new i(0),d=new i(1),h=f,m=d,v=d,b=f;if(!a.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)u=a.div(s).floor(),c=a.mod(s),l=h,h=m.minus(u.times(h)),m=l,l=v,v=b.minus(u.times(v)),b=l,a=s,s=c;var x;return a.lt(f)?x=[a.neg(),m.neg(),b.neg()]:x=[a,a.isZero()?0:m,b],n.matrix==="Array"?x:r(x)}}),a$="invmod",JVe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],eqe=re(a$,JVe,t=>{var{typed:e,config:n,BigNumber:r,xgcd:i,equal:o,smaller:a,mod:s,add:l,isInteger:u}=t;return e(a$,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!u(f)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=s(f,d),o(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[m,v]=h;return o(m,r(1))?(v=s(v,d),a(v,r(0))&&(v=l(v,d)),v):NaN}}),tqe="matAlgo09xS0Sf",nqe=["typed","equalScalar"],qee=re(tqe,nqe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,v=o._size,b=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var x=c[0],C=c[1],w,A=n,E=0,T=a;typeof f=="string"&&f===b&&f!=="mixed"&&(w=f,A=e.find(n,[w,w]),E=e.convert(0,w),T=e.find(a,[w,w]));var N=s&&d?[]:void 0,D=[],M=[],k=N?[]:void 0,B=[],P,$,z,j,L;for($=0;$<C;$++){M[$]=D.length;var U=$+1;if(k)for(j=m[$],L=m[$+1],z=j;z<L;z++)P=h[z],B[P]=U,k[P]=d[z];for(j=u[$],L=u[$+1],z=j;z<L;z++)if(P=l[z],k){var G=B[P]===U?k[P]:E,Z=T(s[z],G);A(Z,E)||(D.push(P),N.push(Z))}else D.push(P)}return M[C]=D.length,i.createSparseMatrix({values:N,index:D,ptr:M,size:[x,C],datatype:f===i._datatype&&b===o._datatype?w:void 0})}}),s$="dotMultiply",rqe=["typed","matrix","equalScalar","multiplyScalar","concat"],iqe=re(s$,rqe,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:i,concat:o}=t,a=hl({typed:e,equalScalar:r}),s=qee({typed:e,equalScalar:r}),l=Yi({typed:e,equalScalar:r}),u=or({typed:e,matrix:n,concat:o});return e(s$,u({elop:i,SS:s,DS:a,Ss:l}))});function oqe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return G5(t,e,function(r,i){return r&i})}function K1(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function aqe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:G5(t,e,function(i,o){return i|o})}function G5(t,e,n){var r=t.constructor,i,o,a=+(t.s<0),s=+(e.s<0);if(a){i=t2(K1(t));for(var l=0;l<i.length;++l)i[l]^=1}else i=t2(t);if(s){o=t2(K1(e));for(var u=0;u<o.length;++u)o[u]^=1}else o=t2(e);var c,f,d;i.length<=o.length?(c=i,f=o,d=a):(c=o,f=i,d=s);var h=c.length,m=f.length,v=n(a,s)^1,b=new r(v^1),x=new r(1),C=new r(2),w=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--m])===v&&(b=b.plus(x)),x=x.times(C);for(;m>0;)n(d,f[--m])===v&&(b=b.plus(x)),x=x.times(C);return r.config({precision:w}),v===0&&(b.s=-b.s),b}function t2(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",o=7-i.length;o--;)i="0"+i;n+=i}for(var a=n.length;n.charAt(a)==="0";)a--;var s=t.e,l=n.slice(0,a+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],f=0;f<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function sqe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?K1(e):e.eq(r)?K1(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):G5(t,e,function(i,o){return i^o})}function lqe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function uqe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var l$="bitAnd",cqe=["typed","matrix","equalScalar","concat"],jee=re(l$,cqe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,o=hl({typed:e,equalScalar:r}),a=aS({typed:e,equalScalar:r}),s=Yi({typed:e,equalScalar:r}),l=or({typed:e,matrix:n,concat:i});return e(l$,{"number, number":fee,"BigNumber, BigNumber":oqe,"bigint, bigint":(u,c)=>u&c},l({SS:a,DS:o,Ss:s}))}),u$="bitNot",fqe=["typed"],dqe=re(u$,fqe,t=>{var{typed:e}=t;return e(u$,{number:dee,BigNumber:K1,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),c$="bitOr",hqe=["typed","matrix","equalScalar","DenseMatrix","concat"],Gee=re(c$,hqe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o}=t,a=Vf({typed:e}),s=q5({typed:e,equalScalar:r}),l=Sh({typed:e,DenseMatrix:i}),u=or({typed:e,matrix:n,concat:o});return e(c$,{"number, number":hee,"BigNumber, BigNumber":aqe,"bigint, bigint":(c,f)=>c|f},u({SS:s,DS:a,Ss:l}))}),pqe="matAlgo07xSSf",mqe=["typed","SparseMatrix"],jl=re(pqe,mqe,t=>{var{typed:e,SparseMatrix:n}=t;return function(o,a,s){var l=o._size,u=o._datatype||o._data===void 0?o._datatype:o.getDataType(),c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new Zt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],h=l[1],m,v=0,b=s;typeof u=="string"&&u===f&&u!=="mixed"&&(m=u,v=e.convert(0,m),b=e.find(s,[m,m]));for(var x=[],C=[],w=new Array(h+1).fill(0),A=[],E=[],T=[],N=[],D=0;D<h;D++){var M=D+1,k=0;r(o,D,T,A,M),r(a,D,N,E,M);for(var B=0;B<d;B++){var P=T[B]===M?A[B]:v,$=N[B]===M?E[B]:v,z=b(P,$);z!==0&&z!==!1&&(C.push(B),x.push(z),k++)}w[D+1]=w[D]+k}return new n({values:x,index:C,ptr:w,size:[d,h],datatype:u===o._datatype&&f===a._datatype?m:void 0})};function r(i,o,a,s,l){for(var u=i._values,c=i._index,f=i._ptr,d=f[o],h=f[o+1];d<h;d++){var m=c[d];a[m]=l,s[m]=u[d]}}}),f$="bitXor",gqe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],vqe=re(f$,gqe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:o}=t,a=po({typed:e}),s=jl({typed:e,SparseMatrix:o}),l=di({typed:e,DenseMatrix:r}),u=or({typed:e,matrix:n,concat:i});return e(f$,{"number, number":pee,"BigNumber, BigNumber":sqe,"bigint, bigint":(c,f)=>c^f},u({SS:s,DS:a,Ss:l}))}),d$="arg",bqe=["typed"],yqe=re(d$,bqe,t=>{var{typed:e}=t;return e(d$,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),h$="conj",xqe=["typed"],wqe=re(h$,xqe,t=>{var{typed:e}=t;return e(h$,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),Unit:e.referToSelf(n=>r=>new r.constructor(n(r.toNumeric()),r.formatUnits())),"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),p$="im",Eqe=["typed"],Cqe=re(p$,Eqe,t=>{var{typed:e}=t;return e(p$,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),m$="re",Sqe=["typed"],Tqe=re(m$,Sqe,t=>{var{typed:e}=t;return e(m$,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),g$="not",Aqe=["typed"],Nqe=re(g$,Aqe,t=>{var{typed:e}=t;return e(g$,{"null | undefined":()=>!0,number:yee,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),v$="nullish",Dqe=["typed","matrix","size","flatten","deepEqual"],Yee=re(v$,Dqe,t=>{var{typed:e,matrix:n,size:r,flatten:i,deepEqual:o}=t,a=po({typed:e}),s=Cs({typed:e}),l=Hee({typed:e});return e(v$,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var f=r(u),d=r(c);if(o(f,d))return u;throw new Zt(f,d)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,f)=>l(c,f,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,f)=>a(c,f,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,f)=>l(c,n(f),u)),"DenseMatrix, any":e.referToSelf(u=>(c,f)=>s(c,f,u,!1)),"Array, Array":e.referToSelf(u=>(c,f)=>l(n(c),n(f),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,f)=>l(n(c),f,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,f)=>a(n(c),f,u,!1)),"Array, any":e.referToSelf(u=>(c,f)=>s(n(c),f,u,!1).valueOf())})}),b$="or",Mqe=["typed","matrix","equalScalar","DenseMatrix","concat"],Wee=re(b$,Mqe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o}=t,a=po({typed:e}),s=oS({typed:e,equalScalar:r}),l=di({typed:e,DenseMatrix:i}),u=or({typed:e,matrix:n,concat:o});return e(b$,{"number, number":G4,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":G4,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},u({SS:s,DS:a,Ss:l}))}),y$="xor",kqe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],_qe=re(y$,kqe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:o}=t,a=po({typed:e}),s=jl({typed:e,SparseMatrix:o}),l=di({typed:e,DenseMatrix:r}),u=or({typed:e,matrix:n,concat:i});return e(y$,{"number, number":Y4,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":Y4,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},u({SS:s,DS:a,Ss:l}))}),x$="concat",Oqe=["typed","matrix","isInteger"],Kee=re(x$,Oqe,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(x$,{"...Array | Matrix | number | BigNumber":function(o){var a,s=o.length,l=-1,u,c=!1,f=[];for(a=0;a<s;a++){var d=o[a];if(Ot(d)&&(c=!0),Dt(d)||Gt(d)){if(a!==s-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new fl(l,u+1)}else{var h=Ht(d).valueOf(),m=Vt(h);if(f[a]=h,u=l,l=m.length-1,a>0&&l!==u)throw new Zt(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=WJ(v,f.shift(),l);return c?n(v):v},"...string":function(o){return o.join("")}})}),w$="column",Iqe=["typed","Index","matrix","range"],Xee=re(w$,Iqe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(w$,{"Matrix, number":o,"Array, number":function(s,l){return o(r(Ht(s)),l).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");rr(s,a.size()[1]);var l=i(0,a.size()[0]),u=new n(l,[s]),c=a.subset(u);return Ot(c)?c:r([[c]])}}),E$="count",Rqe=["typed","size","prod"],Bqe=re(E$,Rqe,t=>{var{typed:e,size:n,prod:r}=t;return e(E$,{string:function(o){return o.length},"Matrix | Array":function(o){return r(n(o))}})}),C$="cross",Lqe=["typed","matrix","subtract","multiply"],Fqe=re(C$,Lqe,t=>{var{typed:e,matrix:n,subtract:r,multiply:i}=t;return e(C$,{"Matrix, Matrix":function(s,l){return n(o(s.toArray(),l.toArray()))},"Matrix, Array":function(s,l){return n(o(s.toArray(),l))},"Array, Matrix":function(s,l){return n(o(s,l.toArray()))},"Array, Array":o});function o(a,s){var l=Math.max(Vt(a).length,Vt(s).length);a=Ww(a),s=Ww(s);var u=Vt(a),c=Vt(s);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(a[1],s[2]),i(a[2],s[1])),r(i(a[2],s[0]),i(a[0],s[2])),r(i(a[0],s[1]),i(a[1],s[0]))];return l>1?[f]:f}}),S$="diag",Pqe=["typed","matrix","DenseMatrix","SparseMatrix"],$qe=re(S$,Pqe,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(S$,{Array:function(u){return o(u,0,Vt(u),null)},"Array, number":function(u,c){return o(u,c,Vt(u),null)},"Array, BigNumber":function(u,c){return o(u,c.toNumber(),Vt(u),null)},"Array, string":function(u,c){return o(u,0,Vt(u),c)},"Array, number, string":function(u,c,f){return o(u,c,Vt(u),f)},"Array, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),Vt(u),f)},Matrix:function(u){return o(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return o(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return o(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return o(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return o(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),u.size(),f)}});function o(l,u,c,f){if(!yt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,h=u<0?-u:0;switch(c.length){case 1:return a(l,u,f,c[0],h,d);case 2:return s(l,u,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(m,l,u):r.diagonal(m,l,u);return c!==null?v:v.valueOf()}function s(l,u,c,f,d,h){if(Ot(l)){var m=l.diagonal(u);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),b=[],x=0;x<v;x++)b[x]=l[x+d][x+h];return c!==null?n(b):b}}),zqe="filter",Uqe=["typed"],Zee=re(zqe,Uqe,t=>{var{typed:e}=t;return e("filter",{"Array, function":T$,"Matrix, function":function(r,i){return r.create(T$(r.valueOf(),i),r.datatype())},"Array, RegExp":hP,"Matrix, RegExp":function(r,i){return r.create(hP(r.valueOf(),i),r.datatype())}})});function T$(t,e){var n=ch(e,t,"filter");return n.isUnary?dP(t,n.fn):dP(t,function(r,i,o){return n.fn(r,[i],o)})}var A$="flatten",Hqe=["typed"],Vqe=re(A$,Hqe,t=>{var{typed:e}=t;return e(A$,{Array:function(r){return Nn(r)},DenseMatrix:function(r){return r.create(Nn(r.valueOf(),!0),r.datatype())},SparseMatrix:function(r){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),J4="forEach",qqe=["typed"],Qee=re(J4,qqe,t=>{var{typed:e}=t;return e(J4,{"Array, function":jqe,"Matrix, function":function(r,i){r.forEach(i)}})});function jqe(t,e){var n=ch(e,t,J4);XJ(t,n.fn,n.isUnary)}var N$="getMatrixDataType",Gqe=["typed"],Yqe=re(N$,Gqe,t=>{var{typed:e}=t;return e(N$,{Array:function(r){return rS(r,Zn)},Matrix:function(r){return r.getDataType()}})}),D$="identity",Wqe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Kqe=re(D$,Wqe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:a}=t;return e(D$,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return l(c,f,d)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var d=Gt(u)||Gt(c)?i:null;if(Gt(u)&&(u=u.toNumber()),Gt(c)&&(c=c.toNumber()),!yt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!yt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,v=[u,c];if(f){if(f==="sparse")return a.diagonal(v,h,0,m);if(f==="dense")return o.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var b=_m([],v,m),x=u<c?u:c,C=0;C<x;C++)b[C][C]=h;return b}}),M$="kron",Xqe=["typed","matrix","multiplyScalar"],Zqe=re(M$,Xqe,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(M$,{"Matrix, Matrix":function(s,l){return n(o(s.toArray(),l.toArray()))},"Matrix, Array":function(s,l){return n(o(s.toArray(),l))},"Array, Matrix":function(s,l){return n(o(s,l.toArray()))},"Array, Array":o});function i(a,s){return a.flatMap(l=>s.map(u=>r(l,u)))}function o(a,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=Vt(a).length,c=Vt(s).length;for(l=Math.max(u,c);u++<l;)a=[a];for(;c++<l;)s=[s]}return l===1?i(a,s):a.flatMap(f=>s.map(d=>o(f,d,l-1)))}}),R3="map",Qqe=["typed"],Jee=re(R3,Qqe,t=>{var{typed:e}=t;return e(R3,{"Array, function":s,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>n([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function n(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,f=l.map(E=>E.isMatrix?E.size():Vt(E)),d=Xw(...f),h=l.length,m=c?(E,T)=>E.get(T):Zw,v=l.map((E,T)=>{var N=f[T].map(()=>0);return E.isMatrix?E.get(N):Zw(E,N)}),b=e.isTypedFunction(u)?a(u,v,d.map(()=>0),l):o(u,h);if(b<2){var x=i(b,u,null);return r(l,x)}var C=c?l.map(E=>E.isMatrix?E.create(Od(E.toArray(),d),E.datatype()):l[0].create(Od(E.valueOf(),d))):l.map(E=>E.isMatrix?Od(E.toArray(),d):Od(E,d)),w=i(b,u,C),A=(E,T)=>w([E,...C.slice(1).map(N=>m(N,T))],T);return c?C[0].map(A):s(C[0],A)}function r(l,u){var c=l[0],f=l.map(E=>E.isMatrix?E.valueOf():E),d=l.map(E=>E.isMatrix?E.size():Vt(E)),h=Xw(...d),m=d.map(E=>h.length-E.length),v=h.length-1,b=u.length>1,x=b?[]:null,C=A(f,0);if(c.isMatrix){var w=c.create();return w._data=C,w._size=h,w}else return C;function A(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=h[T],D=Array(N);if(T<v)for(var M=function(z){x&&(x[T]=z),D[z]=A(E.map((j,L)=>m[L]>T?j:j.length===1?j[0]:j[z]),T+1)},k=0;k<N;k++)M(k);else for(var B=function(z){x&&(x[T]=z),D[z]=u(E.map(j=>j.length===1?j[0]:j[z]),x?x.slice():void 0)},P=0;P<N;P++)B(P);return D}}function i(l,u,c){switch(l){case 0:return f=>u(...f);case 1:return(f,d)=>u(...f,d);case 2:return(f,d)=>u(...f,d,...c)}}function o(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var f=c.match(/\(.*?\)/);return/\.\.\./.test(f)||l.length>u+1?2:l.length===u+1?1:0}function a(l,u,c,f){return e.resolve(l,[...u,c,...f])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function s(l,u){var c=ch(u,l,R3);return V4(l,c.fn,c.isUnary)}}),k$="diff",Jqe=["typed","matrix","subtract","number"],ete=re(k$,Jqe,t=>{var{typed:e,matrix:n,subtract:r,number:i}=t;return e(k$,{"Array | Matrix":function(c){return Ot(c)?n(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,f){if(!yt(f))throw new RangeError("Dimension must be a whole number");return Ot(c)?n(o(c.toArray(),f)):o(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function o(u,c){if(Ot(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(d=>{f.push(o(d,c-1))}),f}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],f=u.length,d=1;d<f;d++)c.push(s(u[d-1],u[d]));return c}function s(u,c){Ot(u)&&(u=u.toArray()),Ot(c)&&(c=c.toArray());var f=Array.isArray(u),d=Array.isArray(c);if(f&&d)return l(u,c);if(!f&&!d)return r(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=u.length,h=0;h<d;h++)f.push(s(u[h],c[h]));return f}}),eje="ones",tje=["typed","config","matrix","BigNumber"],nje=re(eje,tje,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e("ones",{"":function(){return n.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return n.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=a(l),f=c?new i(1):1;if(s(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?_m(h,l,f):h}}function a(l){var u=!1;return l.forEach(function(c,f,d){Gt(c)&&(u=!0,d[f]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!yt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function Y5(){throw new Error('No "bignumber" implementation available')}function tte(){throw new Error('No "fraction" implementation available')}function rje(){throw new Error('No "matrix" implementation available')}var _$="range",ije=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],nte=re(_$,ije,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:l,add:u,isZero:c,isPositive:f}=t;return e(_$,{string:h,"string, boolean":h,number:function(x){throw new TypeError("Too few arguments to function range(): ".concat(x))},boolean:function(x){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(x,", number|bigint|BigNumber|Fraction"))},"number, number":function(x,C){return d(m(x,C,1,!1))},"number, number, number":function(x,C,w){return d(m(x,C,w,!1))},"number, number, boolean":function(x,C,w){return d(m(x,C,1,w))},"number, number, number, boolean":function(x,C,w,A){return d(m(x,C,w,A))},"bigint, bigint|number":function(x,C){return d(m(x,C,1n,!1))},"number, bigint":function(x,C){return d(m(BigInt(x),C,1n,!1))},"bigint, bigint|number, bigint|number":function(x,C,w){return d(m(x,C,BigInt(w),!1))},"number, bigint, bigint|number":function(x,C,w){return d(m(BigInt(x),C,BigInt(w),!1))},"bigint, bigint|number, boolean":function(x,C,w){return d(m(x,C,1n,w))},"number, bigint, boolean":function(x,C,w){return d(m(BigInt(x),C,1n,w))},"bigint, bigint|number, bigint|number, boolean":function(x,C,w,A){return d(m(x,C,BigInt(w),A))},"number, bigint, bigint|number, boolean":function(x,C,w,A){return d(m(BigInt(x),C,BigInt(w),A))},"BigNumber, BigNumber":function(x,C){var w=x.constructor;return d(m(x,C,new w(1),!1))},"BigNumber, BigNumber, BigNumber":function(x,C,w){return d(m(x,C,w,!1))},"BigNumber, BigNumber, boolean":function(x,C,w){var A=x.constructor;return d(m(x,C,new A(1),w))},"BigNumber, BigNumber, BigNumber, boolean":function(x,C,w,A){return d(m(x,C,w,A))},"Fraction, Fraction":function(x,C){return d(m(x,C,1,!1))},"Fraction, Fraction, Fraction":function(x,C,w){return d(m(x,C,w,!1))},"Fraction, Fraction, boolean":function(x,C,w){return d(m(x,C,1,w))},"Fraction, Fraction, Fraction, boolean":function(x,C,w,A){return d(m(x,C,w,A))},"Unit, Unit, Unit":function(x,C,w){return d(m(x,C,w,!1))},"Unit, Unit, Unit, boolean":function(x,C,w,A){return d(m(x,C,w,A))}});function d(b){return n.matrix==="Matrix"?r?r(b):rje():b}function h(b,x){var C=v(b);if(!C)throw new SyntaxError('String "'+b+'" is no valid range');return n.number==="BigNumber"?(i===void 0&&Y5(),d(m(i(C.start),i(C.end),i(C.step)))):d(m(C.start,C.end,C.step,x))}function m(b,x,C,w){var A=[];if(c(C))throw new Error("Step must be non-zero");for(var E=f(C)?w?a:o:w?l:s,T=b;E(T,x);)A.push(T),T=u(T,C);return A}function v(b){var x=b.split(":"),C=x.map(function(A){return Number(A)}),w=C.some(function(A){return isNaN(A)});if(w)return null;switch(C.length){case 2:return{start:C[0],end:C[1],step:1};case 3:return{start:C[0],end:C[2],step:C[1]};default:return null}}}),O$="reshape",oje=["typed","isInteger","matrix"],aje=re(O$,oje,t=>{var{typed:e,isInteger:n}=t;return e(O$,{"Matrix, Array":function(i,o){return i.reshape(o,!0)},"Array, Array":function(i,o){return o.forEach(function(a){if(!n(a))throw new TypeError("Invalid size for dimension: "+a)}),z5(i,o)}})}),sje="resize",lje=["config","matrix"],uje=re(sje,lje,t=>{var{config:e,matrix:n}=t;return function(o,a,s){if(arguments.length!==2&&arguments.length!==3)throw new Th("resize",arguments.length,2,3);if(Ot(a)&&(a=a.valueOf()),Gt(a[0])&&(a=a.map(function(c){return Gt(c)?c.toNumber():c})),Ot(o))return o.resize(a,s,!0);if(typeof o=="string")return r(o,a,s);var l=Array.isArray(o)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(o);)o=o[0];return Ht(o)}else{Array.isArray(o)||(o=[o]),o=Ht(o);var u=_m(o,a,s);return l?n(u):u}};function r(i,o,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(o.length!==1)throw new Zt(o.length,1);var s=o[0];if(typeof s!="number"||!yt(s))throw new TypeError("Invalid size, must contain positive integers (size: "+tn(o)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var l=i,u=0,c=s-i.length;u<c;u++)l+=a;return l}else return i}}),I$="rotate",cje=["typed","multiply","rotationMatrix"],fje=re(I$,cje,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(I$,{"Array , number | BigNumber | Complex | Unit":function(a,s){i(a,2);var l=n(r(s),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,s){return i(a,2),n(r(s),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,l){i(a,3);var u=n(r(s,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,l){return i(a,3),n(r(s,l),a)}});function i(o,a){var s=Array.isArray(o)?Vt(o):o.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}}),R$="rotationMatrix",dje=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],hje=re(R$,dje,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:i,unaryMinus:o,norm:a,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:d}=t;return e(R$,{"":function(){return n.matrix==="Matrix"?l([]):[]},string:function(w){return l(w)},"number | BigNumber | Complex | Unit":function(w){return h(w,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(w,A){return h(w,A)},"number | BigNumber | Complex | Unit, Array":function(w,A){var E=l(A);return m(E),x(w,E,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(w,A){m(A);var E=A.storage()||(n.matrix==="Matrix"?"dense":void 0);return x(w,A,E)},"number | BigNumber | Complex | Unit, Array, string":function(w,A,E){var T=l(A);return m(T),x(w,T,E)},"number | BigNumber | Complex | Unit, Matrix, string":function(w,A,E){return m(A),x(w,A,E)}});function h(C,w){var A=Gt(C),E=A?new s(-1):-1,T=f(C),N=d(C),D=[[T,r(E,N)],[N,T]];return b(D,w)}function m(C){var w=C.size();if(w.length<1||w[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(C){return C.reduce((w,A)=>r(w,A))}function b(C,w){if(w){if(w==="sparse")return new c(C);if(w==="dense")return new u(C);throw new TypeError('Unknown matrix type "'.concat(w,'"'))}return C}function x(C,w,A){var E=a(w);if(E===0)throw new RangeError("Rotation around zero vector");var T=Gt(C)?s:null,N=T?new T(1):1,D=T?new T(-1):-1,M=T?new T(w.get([0])/E):w.get([0])/E,k=T?new T(w.get([1])/E):w.get([1])/E,B=T?new T(w.get([2])/E):w.get([2])/E,P=f(C),$=i(N,o(P)),z=d(C),j=i(P,v([M,M,$])),L=i(v([M,k,$]),v([D,B,z])),U=i(v([M,B,$]),v([k,z])),G=i(v([M,k,$]),v([B,z])),Z=i(P,v([k,k,$])),H=i(v([k,B,$]),v([D,M,z])),W=i(v([M,B,$]),v([D,k,z])),K=i(v([k,B,$]),v([M,z])),I=i(P,v([B,B,$])),ee=[[j,L,U],[G,Z,H],[W,K,I]];return b(ee,A)}}),B$="row",pje=["typed","Index","matrix","range"],rte=re(B$,pje,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(B$,{"Matrix, number":o,"Array, number":function(s,l){return o(r(Ht(s)),l).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");rr(s,a.size()[0]);var l=i(0,a.size()[1]),u=new n([s],l),c=a.subset(u);return Ot(c)?c:r([[c]])}}),L$="size",mje=["typed"],gje=re(L$,mje,t=>{var{typed:e}=t;return e(L$,{Matrix:n=>n.size(),Array:Vt,string:n=>[n.length],"number | Complex | BigNumber | Unit | boolean | null":n=>[]})}),F$="squeeze",vje=["typed"],bje=re(F$,vje,t=>{var{typed:e}=t;return e(F$,{Array:function(r){return Ww(Ht(r))},Matrix:function(r){var i=Ww(r.toArray());return Array.isArray(i)?r.create(i,r.datatype()):i},any:function(r){return Ht(r)}})}),P$="subset",yje=["typed","matrix","zeros","add"],ite=re(P$,yje,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t;return e(P$,{"Matrix, Index":function(s,l){return km(l)?n():(Yw(s,l),s.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(s,l){var u=a(n(s),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":wje,"string, Index":xje,"Matrix, Index, any, any":function(s,l,u,c){return km(l)?s:(Yw(s,l),s.clone().subset(l,o(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u,c){var f=a(n(s),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u){return a(n(s),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u){return a(s,l,u,void 0)}}),"string, Index, string":$$,"string, Index, string, string":$$,"Object, Index, any":Eje});function o(a,s){if(typeof a=="string")throw new Error("can't boradcast a string");if(s.isScalar())return a;var l=s.size();if(l.every(u=>u>0))try{return i(a,r(l))}catch{return a}else return a}});function xje(t,e){if(!XC(e))throw new TypeError("Index expected");if(km(e))return"";if(Yw(Array.from(t),e),e.size().length!==1)throw new Zt(e.size().length,1);var n=t.length;rr(e.min()[0],n),rr(e.max()[0],n);var r=e.dimension(0),i="";function o(a){i+=t.charAt(a)}return Number.isInteger(r)?o(r):r.forEach(o),i}function $$(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(km(e))return t;if(Yw(Array.from(t),e),e.size().length!==1)throw new Zt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),o=Number.isInteger(i)?1:i.size()[0];if(o!==n.length)throw new Zt(i.size()[0],n.length);var a=t.length;rr(e.min()[0]),rr(e.max()[0]);for(var s=[],l=0;l<a;l++)s[l]=t.charAt(l);function u(d,h){s[d]=n.charAt(h[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),s.length>a)for(var c=a-1,f=s.length;c<f;c++)s[c]||(s[c]=r);return s.join("")}function wje(t,e){if(!km(e)){if(e.size().length!==1)throw new Zt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return Eo(t,n)}}function Eje(t,e,n){if(km(e))return t;if(e.size().length!==1)throw new Zt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Ht(t);return Dm(i,r,n),i}var z$="transpose",Cje=["typed","matrix"],Sje=re(z$,Cje,t=>{var{typed:e,matrix:n}=t;return e(z$,{Array:a=>r(n(a)).valueOf(),Matrix:r,any:Ht});function r(a){var s=a.size(),l;switch(s.length){case 1:l=a.clone();break;case 2:{var u=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+tn(s)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=o(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+tn(s)+")")}return l}function i(a,s,l){for(var u=a._data,c=[],f,d=0;d<l;d++){f=c[d]=[];for(var h=0;h<s;h++)f[h]=Ht(u[h][d])}return a.createDenseMatrix({data:c,size:[l,s],datatype:a._datatype})}function o(a,s,l){for(var u=a._values,c=a._index,f=a._ptr,d=u?[]:void 0,h=[],m=[],v=[],b=0;b<s;b++)v[b]=0;var x,C,w;for(x=0,C=c.length;x<C;x++)v[c[x]]++;for(var A=0,E=0;E<s;E++)m.push(A),A+=v[E],v[E]=m[E];for(m.push(A),w=0;w<l;w++)for(var T=f[w],N=f[w+1],D=T;D<N;D++){var M=v[c[D]]++;h[M]=w,u&&(d[M]=Ht(u[D]))}return a.createSparseMatrix({values:d,index:h,ptr:m,size:[l,s],datatype:a._datatype})}}),U$="ctranspose",Tje=["typed","transpose","conj"],Aje=re(U$,Tje,t=>{var{typed:e,transpose:n,conj:r}=t;return e(U$,{any:function(o){return r(n(o))}})}),H$="zeros",Nje=["typed","config","matrix","BigNumber"],Dje=re(H$,Nje,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(H$,{"":function(){return n.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return n.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=a(l),f=c?new i(0):0;if(s(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?_m(h,l,f):h}}function a(l){var u=!1;return l.forEach(function(c,f,d){Gt(c)&&(u=!0,d[f]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!yt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),V$="fft",Mje=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],kje=re(V$,Mje,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:o,exp:a,tau:s,i:l,dotDivide:u,conj:c,pow:f,ceil:d,log2:h}=t;return e(V$,{Array:m,Matrix:function(w){return w.create(m(w.valueOf()),w.datatype())}});function m(C){var w=Vt(C);return w.length===1?x(C,w[0]):v(C.map(A=>m(A,w.slice(1))),0)}function v(C,w){var A=Vt(C);if(w!==0)return new Array(A[0]).fill(0).map((T,N)=>v(C[N],w-1));if(A.length===1)return x(C);function E(T){var N=Vt(T);return new Array(N[1]).fill(0).map((D,M)=>new Array(N[0]).fill(0).map((k,B)=>T[B][M]))}return E(v(E(C),1))}function b(C){for(var w=C.length,A=a(o(i(-1,i(l,s)),w)),E=[],T=1-w;T<w;T++)E.push(f(A,o(f(T,2),2)));for(var N=f(2,d(h(w+w-1))),D=[...new Array(w).fill(0).map((L,U)=>i(C[U],E[w-1+U])),...new Array(N-w).fill(0)],M=[...new Array(w+w-1).fill(0).map((L,U)=>o(1,E[U])),...new Array(N-(w+w-1)).fill(0)],k=x(D),B=x(M),P=new Array(N).fill(0).map((L,U)=>i(k[U],B[U])),$=u(c(m(c(P))),N),z=[],j=w-1;j<w+w-1;j++)z.push(i($[j],E[j]));return z}function x(C){var w=C.length;if(w===1)return[C[0]];if(w%2===0){for(var A=[...x(C.filter((D,M)=>M%2===0)),...x(C.filter((D,M)=>M%2===1))],E=0;E<w/2;E++){var T=A[E],N=i(A[E+w/2],a(i(i(s,l),o(-E,w))));A[E]=r(T,N),A[E+w/2]=r(T,i(-1,N))}return A}else return b(C)}}),q$="ifft",_je=["typed","fft","dotDivide","conj"],Oje=re(q$,_je,t=>{var{typed:e,fft:n,dotDivide:r,conj:i}=t;return e(q$,{"Array | Matrix":function(a){var s=Ot(a)?a.size():Vt(a);return r(i(n(i(a))),s.reduce((l,u)=>l*u,1))}})});function X1(t){"@babel/helpers - typeof";return X1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X1(t)}function Ije(t,e){if(X1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(X1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rje(t){var e=Ije(t,"string");return X1(e)=="symbol"?e:e+""}function oi(t,e,n){return(e=Rje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bje(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(n),!0).forEach(function(r){oi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Lje="solveODE",Fje=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],Pje=re(Lje,Fje,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:o,max:a,map:s,abs:l,isPositive:u,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=t;function b(D){return function(M,k,B,P){var $=!(k.length===2&&(k.every(T)||k.every(xa)));if($)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var z=k[0],j=k[1],L=f(j,z),U=P.firstStep;if(U!==void 0&&!u(U))throw new Error('"firstStep" must be positive');var G=P.maxStep;if(G!==void 0&&!u(G))throw new Error('"maxStep" must be positive');var Z=P.minStep;if(Z&&c(Z))throw new Error('"minStep" must be positive or zero');var H=[z,j,U,Z,G].filter(J=>J!==void 0);if(!(H.every(T)||H.every(xa)))throw new Error('Inconsistent type of "t" dependant variables');for(var W=1,K=P.tol?P.tol:1e-4,I=P.minDelta?P.minDelta:.2,ee=P.maxDelta?P.maxDelta:5,Q=P.maxIter?P.maxIter:1e4,ce=[z,j,...B,G,Z].some(Gt),[ve,ie,X,le]=ce?[m(D.a),m(D.c),m(D.b),m(D.bp)]:[D.a,D.c,D.b,D.bp],Ce=U?L?U:v(U):o(r(j,z),W),he=[z],Te=[B],Ae=r(X,le),qe=0,rt=0,lt=A(L),Qe=E(L);lt(he[qe],j);){var st=[];Ce=Qe(he[qe],j,Ce),st.push(M(he[qe],Te[qe]));for(var dt=1;dt<ie.length;++dt)st.push(M(n(he[qe],i(ie[dt],Ce)),n(Te[qe],i(Ce,ve[dt],st))));var te=a(l(s(i(Ae,st),J=>xa(J)?J.value:J)));te<K&&K/te>1/4&&(he.push(n(he[qe],Ce)),Te.push(n(Te[qe],i(Ce,X,st))),qe++);var me=.84*(K/te)**(1/5);if(d(me,I)?me=I:f(me,ee)&&(me=ee),me=ce?m(me):me,Ce=i(Ce,me),G&&f(l(Ce),G)?Ce=L?G:v(G):Z&&d(l(Ce),Z)&&(Ce=L?Z:v(Z)),rt++,rt>Q)throw new Error("Maximum number of iterations reached, try changing options")}return{t:he,y:Te}}}function x(D,M,k,B){var P=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],$=[null,1/2,3/4,1],z=[2/9,1/3,4/9,0],j=[7/24,1/4,1/3,1/8],L={a:P,c:$,b:z,bp:j};return b(L)(D,M,k,B)}function C(D,M,k,B){var P=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],$=[null,1/5,3/10,4/5,8/9,1,1],z=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],j=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],L={a:P,c:$,b:z,bp:j};return b(L)(D,M,k,B)}function w(D,M,k,B){var P=B.method?B.method:"RK45",$={RK23:x,RK45:C};if(P.toUpperCase()in $){var z=Bje({},B);return delete z.method,$[P.toUpperCase()](D,M,k,z)}else{var j=Object.keys($).map(U=>'"'.concat(U,'"')),L="".concat(j.slice(0,-1).join(", ")," and ").concat(j.slice(-1));throw new Error('Unavailable method "'.concat(P,'". Available methods are ').concat(L))}}function A(D){return D?d:f}function E(D){var M=D?f:d;return function(k,B,P){var $=n(k,P);return M($,B)?r(B,k):P}}function T(D){return Gt(D)||Dt(D)}function N(D,M,k,B){var P=w(D,M.toArray(),k.toArray(),B);return{t:h(P.t),y:h(P.y)}}return e("solveODE",{"function, Array, Array, Object":w,"function, Matrix, Matrix, Object":N,"function, Array, Array":(D,M,k)=>w(D,M,k,{}),"function, Matrix, Matrix":(D,M,k)=>N(D,M,k,{}),"function, Array, number | BigNumber | Unit":(D,M,k)=>{var B=w(D,M,[k],{});return{t:B.t,y:B.y.map(P=>P[0])}},"function, Matrix, number | BigNumber | Unit":(D,M,k)=>{var B=w(D,M.toArray(),[k],{});return{t:h(B.t),y:h(B.y.map(P=>P[0]))}},"function, Array, number | BigNumber | Unit, Object":(D,M,k,B)=>{var P=w(D,M,[k],B);return{t:P.t,y:P.y.map($=>$[0])}},"function, Matrix, number | BigNumber | Unit, Object":(D,M,k,B)=>{var P=w(D,M.toArray(),[k],B);return{t:h(P.t),y:h(P.y.map($=>$[0]))}}})}),$je="erf",zje=["typed"],Uje=re($je,zje,t=>{var{typed:e}=t;return e("name",{number:function(a){var s=Math.abs(a);return s>=qje?ef(a):s<=Hje?ef(a)*n(s):s<=4?ef(a)*(1-r(s)):ef(a)*(1-i(s))},"Array | Matrix":e.referToSelf(o=>a=>Yt(a,o))});function n(o){var a=o*o,s=yu[0][4]*a,l=a,u;for(u=0;u<3;u+=1)s=(s+yu[0][u])*a,l=(l+Sp[0][u])*a;return o*(s+yu[0][3])/(l+Sp[0][3])}function r(o){var a=yu[1][8]*o,s=o,l;for(l=0;l<7;l+=1)a=(a+yu[1][l])*o,s=(s+Sp[1][l])*o;var u=(a+yu[1][7])/(s+Sp[1][7]),c=parseInt(o*16)/16,f=(o-c)*(o+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(o){var a=1/(o*o),s=yu[2][5]*a,l=a,u;for(u=0;u<4;u+=1)s=(s+yu[2][u])*a,l=(l+Sp[2][u])*a;var c=a*(s+yu[2][4])/(l+Sp[2][4]);c=(Vje-c)/o,a=parseInt(o*16)/16;var f=(o-a)*(o+a);return Math.exp(-a*a)*Math.exp(-f)*c}}),Hje=.46875,Vje=.5641895835477563,yu=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Sp=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],qje=Math.pow(2,53),G$="zeta",jje=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],Gje=re(G$,jje,t=>{var{typed:e,config:n,multiply:r,pow:i,divide:o,factorial:a,equal:s,smallerEq:l,isBounded:u,isNegative:c,gamma:f,sin:d,subtract:h,add:m,Complex:v,BigNumber:b,pi:x}=t;return e(G$,{number:N=>C(N,D=>D,()=>20),BigNumber:N=>C(N,D=>new b(D),()=>Math.abs(Math.log10(n.relTol))),Complex:w});function C(N,D,M){return s(N,0)?D(-.5):s(N,1)?D(NaN):u(N)?A(N,D,M,k=>k):c(N)?D(NaN):D(1)}function w(N){return N.re===0&&N.im===0?new v(-.5):N.re===1?new v(NaN,NaN):N.re===1/0&&N.im===0?new v(1):N.im===1/0||N.re===-1/0?new v(NaN,NaN):A(N,D=>D,D=>Math.round(1.3*15+.9*Math.abs(D.im)),D=>D.re)}function A(N,D,M,k){var B=M(N);if(k(N)>-(B-1)/2)return T(N,D(B),D);var P=r(i(2,N),i(D(x),h(N,1)));return P=r(P,d(r(o(D(x),2),N))),P=r(P,f(h(1,N))),r(P,A(h(1,N),D,M,k))}function E(N,D){for(var M=N,k=N;l(k,D);k=m(k,1)){var B=o(r(a(m(D,h(k,1))),i(4,k)),r(a(h(D,k)),a(r(2,k))));M=m(M,B)}return r(D,M)}function T(N,D,M){for(var k=o(1,r(E(M(0),D),h(1,i(2,h(1,N))))),B=M(0),P=M(1);l(P,D);P=m(P,1))B=m(B,o(r((-1)**(P-1),E(P,D)),i(P,N)));return r(k,B)}}),Y$="mode",Yje=["typed","isNaN","isNumeric"],Wje=re(Y$,Yje,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(Y$,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(o){o=Nn(o.valueOf());var a=o.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},l=[],u=0,c=0;c<o.length;c++){var f=o[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===u?l.push(f):s[f]>u&&(u=s[f],l=[f])}return l}});function ko(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Zn(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Zn(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var W$="prod",Kje=["typed","config","multiplyScalar","numeric"],Xje=re(W$,Kje,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:i}=t;return e(W$,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return o(s)}});function o(a){var s;if(Nf(a,function(l){try{s=s===void 0?l:r(s,l)}catch(u){throw ko(u,"prod",l)}}),typeof s=="string"&&(s=i(s,Uf(s,n))),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),K$="format",Zje=["typed"],Qje=re(K$,Zje,t=>{var{typed:e}=t;return e(K$,{any:tn,"any, Object | function | number | BigNumber":tn})}),X$="bin",Jje=["typed","format"],eGe=re(X$,Jje,t=>{var{typed:e,format:n}=t;return e(X$,{"number | BigNumber":function(i){return n(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,o){return n(i,{notation:"bin",wordSize:o})}})}),Z$="oct",tGe=["typed","format"],nGe=re(Z$,tGe,t=>{var{typed:e,format:n}=t;return e(Z$,{"number | BigNumber":function(i){return n(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,o){return n(i,{notation:"oct",wordSize:o})}})}),Q$="hex",rGe=["typed","format"],iGe=re(Q$,rGe,t=>{var{typed:e,format:n}=t;return e(Q$,{"number | BigNumber":function(i){return n(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,o){return n(i,{notation:"hex",wordSize:o})}})}),ote=/\$([\w.]+)/g,J$="print",oGe=["typed"],ate=re(J$,oGe,t=>{var{typed:e}=t;return e(J$,{"string, Object | Array":ez,"string, Object | Array, number | Object":ez})});function ez(t,e,n){return t.replace(ote,function(r,i){var o=i.split("."),a=e[o.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());o.length&&a!==void 0;){var s=o.shift();a=s?a[s]:a+"."}return a!==void 0?Pr(a)?a:tn(a,n):r})}var tz="to",aGe=["typed","matrix","concat"],sGe=re(tz,aGe,t=>{var{typed:e,matrix:n,concat:r}=t,i=or({typed:e,matrix:n,concat:r});return e(tz,{"Unit, Unit | string":(o,a)=>o.to(a)},i({Ds:!0}))}),nz="toBest",lGe=["typed"],uGe=re(nz,lGe,t=>{var{typed:e}=t;return e(nz,{Unit:n=>n.toBest(),"Unit, string":(n,r)=>n.toBest(r.split(",")),"Unit, string, Object":(n,r,i)=>n.toBest(r.split(","),i),"Unit, Array":(n,r)=>n.toBest(r),"Unit, Array, Object":(n,r,i)=>n.toBest(r,i)})}),rz="isPrime",cGe=["typed"],fGe=re(rz,cGe,t=>{var{typed:e}=t;return e(rz,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var i=5n;i*i<=r;i+=6n)if(r%i===0n||r%(i+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),o=5;o*o<=i;o+=6)if(i%o===0||i%(o+2)===0)return!1;return!0}function a(C,w,A){for(var E=1;!w.eq(0);)w.mod(2).eq(0)?(w=w.div(2),C=C.mul(C).mod(A)):(w=w.sub(1),E=C.mul(E).mod(A));return E}var s=r.constructor.clone({precision:r.toFixed(0).length*2});r=new s(r);for(var l=0,u=r.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(C=>C<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=a(r.sub(r).add(m),u,r);if(!v.eq(1)){for(var b=0,x=v;!x.eq(r.sub(1));b+=1,x=x.mul(x).mod(r))if(b===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>Yt(r,n))})}),dGe="numeric",hGe=["number","?bignumber","?fraction"],pGe=re(dGe,hGe,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:a=>e(a),BigNumber:n?a=>n(a):Y5,bigint:a=>BigInt(a),Fraction:r?a=>r(a):tte};return function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Zn(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+s+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===c?s:o[l](s)}}),iz="divideScalar",mGe=["typed","numeric"],gGe=re(iz,mGe,t=>{var{typed:e,numeric:n}=t;return e(iz,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"bigint, bigint":function(i,o){return i/o},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),oz="pow",vGe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],bGe=re(oz,vGe,t=>{var{typed:e,config:n,identity:r,multiply:i,matrix:o,inv:a,number:s,fraction:l,Complex:u}=t;return e(oz,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||n.predictable?m.pow(v):new u(m.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(h,m)=>h**m,"Fraction, Fraction":function(m,v){var b=m.pow(v);if(b!=null)return b;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(n.predictable&&!yt(m)&&h<0)try{var v=l(m),b=s(v);if((m===b||Math.abs((m-b)/m)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-h,m)}catch{}return n.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:yt(m)||h>=0||n.predictable?cee(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new u(h,0).pow(m,0)}function f(h,m){if(!yt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=Vt(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(a(h),-m)}catch(C){throw C.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):C}for(var b=r(v[0]).valueOf(),x=h;m>=1;)(m&1)===1&&(b=i(x,b)),m>>=1,x=i(x,x);return b}function d(h,m){return o(f(h.valueOf(),m))}}),Tp="Number of decimals in function round must be an integer",az="round",yGe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],xGe=re(az,yGe,t=>{var{typed:e,config:n,matrix:r,equalScalar:i,zeros:o,BigNumber:a,DenseMatrix:s}=t,l=Yi({typed:e,equalScalar:i}),u=di({typed:e,DenseMatrix:s}),c=Cs({typed:e});function f(d){return Math.abs(Iv(d).exponent)}return e(az,{number:function(h){var m=Dg(h,f(n.relTol)),v=Mi(h,m,n.relTol,n.absTol)?m:h;return Dg(v)},"number, number":function(h,m){var v=f(n.relTol);if(m>=v)return Dg(h,m);var b=Dg(h,v),x=Mi(h,b,n.relTol,n.absTol)?b:h;return Dg(x,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);return new a(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(Tp);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);var v=m.toNumber();return h.round(v)},BigNumber:function(h){var m=new a(h).toDecimalPlaces(f(n.relTol)),v=bs(h,m,n.relTol,n.absTol)?m:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);var v=f(n.relTol);if(m>=v)return h.toDecimalPlaces(m.toNumber());var b=h.toDecimalPlaces(v),x=bs(h,b,n.relTol,n.absTol)?b:h;return x.toDecimalPlaces(m.toNumber())},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(Tp);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var b=h.toNumeric(v);return v.multiply(d(b,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Yt(h,b=>d(b,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Yt(h,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?o(m.size(),m.storage()):u(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?o(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),sz="log",wGe=["config","typed","typeOf","divideScalar","Complex"],EGe=Math.log(16),CGe=re(sz,wGe,t=>{var{typed:e,typeOf:n,config:r,divideScalar:i,Complex:o}=t;function a(l){return l.log()}function s(l){return a(new o(l,0))}return e(sz,{number:function(u){return u>=0||r.predictable?yP(u):s(u)},bigint:j5(EGe,yP,r,s),Complex:a,BigNumber:function(u){return!u.isNegative()||r.predictable?u.ln():s(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(n(u)==="Fraction"&&n(c)==="Fraction"){var f=u.log(c);if(f!==null)return f}return i(l(u),l(c))})})}),lz="log1p",SGe=["typed","config","divideScalar","log","Complex"],TGe=re(lz,SGe,t=>{var{typed:e,config:n,divideScalar:r,log:i,Complex:o}=t;return e(lz,{number:function(l){return l>=-1||n.predictable?p$e(l):a(new o(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||n.predictable?u.ln():a(new o(l.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>l=>Yt(l,s)),"any, any":e.referToSelf(s=>(l,u)=>r(s(l),i(u)))});function a(s){var l=s.re+1;return new o(Math.log(Math.sqrt(l*l+s.im*s.im)),Math.atan2(s.im,l))}}),uz="nthRoots",AGe=["config","typed","divideScalar","Complex"],NGe=re(uz,AGe,t=>{var{typed:e,config:n,divideScalar:r,Complex:i}=t,o=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(s,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var u=typeof s=="number",c;(u||s.re===0||s.im===0)&&(u?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var f=s.arg(),d=s.abs(),h=[],m=Math.pow(d,1/l),v=0;v<l;v++){var b=(c+4*v)/l;if(b===Math.round(b)){h.push(o[b%4](m));continue}h.push(new i({r:m,phi:(f+2*Math.PI*v)/l}))}return h}return e(uz,{Complex:function(l){return a(l,2)},"Complex, number":a})}),cz="dotPow",DGe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],MGe=re(cz,DGe,t=>{var{typed:e,equalScalar:n,matrix:r,pow:i,DenseMatrix:o,concat:a,SparseMatrix:s}=t,l=po({typed:e}),u=jl({typed:e,SparseMatrix:s}),c=Yi({typed:e,equalScalar:n}),f=di({typed:e,DenseMatrix:o}),d=or({typed:e,matrix:r,concat:a}),h={};for(var m in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,m)&&!m.includes("Matrix")&&!m.includes("Array")&&(h[m]=i.signatures[m]);var v=e(h);return e(cz,d({elop:v,SS:u,DS:l,Ss:c,sS:f}))}),fz="dotDivide",kGe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],_Ge=re(fz,kGe,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:o,concat:a,SparseMatrix:s}=t,l=hl({typed:e,equalScalar:r}),u=po({typed:e}),c=jl({typed:e,SparseMatrix:s}),f=Yi({typed:e,equalScalar:r}),d=di({typed:e,DenseMatrix:o}),h=or({typed:e,matrix:n,concat:a});return e(fz,h({elop:i,SS:c,DS:u,SD:l,Ss:f,sS:d}))});function Rv(t){var{DenseMatrix:e}=t;return function(r,i,o){var a=r.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+tn(a)+")");var s=a[0],l=a[1];if(s!==l)throw new RangeError("Matrix must be square (size: "+tn(a)+")");var u=[];if(Ot(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<s;d++)u[d]=[f[d]];return new e({data:u,size:[s,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==s||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Hw(i)){if(o){u=[];for(var h=0;h<s;h++)u[h]=[f[h][0]];return new e({data:u,size:[s,1],datatype:i._datatype})}return i}if(_d(i)){for(var m=0;m<s;m++)u[m]=[0];for(var v=i._values,b=i._index,x=i._ptr,C=x[1],w=x[0];w<C;w++){var A=b[w];u[A][0]=v[w]}return new e({data:u,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Kn(i)){var E=Vt(i);if(E.length===1){if(E[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<s;T++)u[T]=[i[T]];return new e({data:u,size:[s,1]})}if(E.length===2){if(E[0]!==s||E[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var N=0;N<s;N++)u[N]=[i[N][0]];return new e({data:u,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var dz="lsolve",OGe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],IGe=re(dz,OGe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=t,l=Rv({DenseMatrix:s});return e(dz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=u(m,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],b=[],x=f._data,C=0;C<v;C++){var w=h[C][0]||0,A=void 0;if(a(w,0))A=0;else{var E=x[C][C];if(a(E,0))throw new Error("Linear system cannot be solved since matrix is singular");A=r(w,E);for(var T=C+1;T<m;T++)h[T]=[o(h[T][0]||0,i(A,x[T][C]))]}b[C]=[A]}return new s({data:b,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],b=f._values,x=f._index,C=f._ptr,w=[],A=0;A<v;A++){var E=h[A][0]||0;if(a(E,0))w[A]=[0];else{for(var T=0,N=[],D=[],M=C[A],k=C[A+1],B=M;B<k;B++){var P=x[B];P===A?T=b[B]:P>A&&(N.push(b[B]),D.push(P))}if(a(T,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var $=r(E,T),z=0,j=D.length;z<j;z++){var L=D[z];h[L]=[o(h[L][0]||0,i($,N[z]))]}w[A]=[$]}}return new s({data:w,size:[m,1]})}}),hz="usolve",RGe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],BGe=re(hz,RGe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=t,l=Rv({DenseMatrix:s});return e(hz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=u(m,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],b=[],x=f._data,C=v-1;C>=0;C--){var w=h[C][0]||0,A=void 0;if(a(w,0))A=0;else{var E=x[C][C];if(a(E,0))throw new Error("Linear system cannot be solved since matrix is singular");A=r(w,E);for(var T=C-1;T>=0;T--)h[T]=[o(h[T][0]||0,i(A,x[T][C]))]}b[C]=[A]}return new s({data:b,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],b=f._values,x=f._index,C=f._ptr,w=[],A=v-1;A>=0;A--){var E=h[A][0]||0;if(a(E,0))w[A]=[0];else{for(var T=0,N=[],D=[],M=C[A],k=C[A+1],B=k-1;B>=M;B--){var P=x[B];P===A?T=b[B]:P<A&&(N.push(b[B]),D.push(P))}if(a(T,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var $=r(E,T),z=0,j=D.length;z<j;z++){var L=D[z];h[L]=[o(h[L][0],i($,N[z]))]}w[A]=[$]}}return new s({data:w,size:[m,1]})}}),pz="lsolveAll",LGe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],FGe=re(pz,LGe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=t,l=Rv({DenseMatrix:s});return e(pz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=u(m,h);return v.map(b=>b.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(D=>D[0])],m=f._data,v=f._size[0],b=f._size[1],x=0;x<b;x++)for(var C=h.length,w=0;w<C;w++){var A=h[w];if(a(m[x][x],0))if(a(A[x],0)){if(w===0){var T=[...A];T[x]=1;for(var N=x+1;N<b;N++)T[N]=o(T[N],m[N][x]);h.push(T)}}else{if(w===0)return[];h.splice(w,1),w-=1,C-=1}else{A[x]=r(A[x],m[x][x]);for(var E=x+1;E<b;E++)A[E]=o(A[E],i(A[x],m[E][x]))}}return h.map(D=>new s({data:D.map(M=>[M]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(W=>W[0])],m=f._size[0],v=f._size[1],b=f._values,x=f._index,C=f._ptr,w=0;w<v;w++)for(var A=h.length,E=0;E<A;E++){for(var T=h[E],N=[],D=[],M=C[w],k=C[w+1],B=0,P=M;P<k;P++){var $=x[P];$===w?B=b[P]:$>w&&(N.push(b[P]),D.push($))}if(a(B,0))if(a(T[w],0)){if(E===0){var U=[...T];U[w]=1;for(var G=0,Z=D.length;G<Z;G++){var H=D[G];U[H]=o(U[H],N[G])}h.push(U)}}else{if(E===0)return[];h.splice(E,1),E-=1,A-=1}else{T[w]=r(T[w],B);for(var z=0,j=D.length;z<j;z++){var L=D[z];T[L]=o(T[L],i(T[w],N[z]))}}}return h.map(W=>new s({data:W.map(K=>[K]),size:[m,1]}))}}),mz="usolveAll",PGe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],$Ge=re(mz,PGe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=t,l=Rv({DenseMatrix:s});return e(mz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=u(m,h);return v.map(b=>b.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(D=>D[0])],m=f._data,v=f._size[0],b=f._size[1],x=b-1;x>=0;x--)for(var C=h.length,w=0;w<C;w++){var A=h[w];if(a(m[x][x],0))if(a(A[x],0)){if(w===0){var T=[...A];T[x]=1;for(var N=x-1;N>=0;N--)T[N]=o(T[N],m[N][x]);h.push(T)}}else{if(w===0)return[];h.splice(w,1),w-=1,C-=1}else{A[x]=r(A[x],m[x][x]);for(var E=x-1;E>=0;E--)A[E]=o(A[E],i(A[x],m[E][x]))}}return h.map(D=>new s({data:D.map(M=>[M]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(W=>W[0])],m=f._size[0],v=f._size[1],b=f._values,x=f._index,C=f._ptr,w=v-1;w>=0;w--)for(var A=h.length,E=0;E<A;E++){for(var T=h[E],N=[],D=[],M=C[w],k=C[w+1],B=0,P=k-1;P>=M;P--){var $=x[P];$===w?B=b[P]:$<w&&(N.push(b[P]),D.push($))}if(a(B,0))if(a(T[w],0)){if(E===0){var U=[...T];U[w]=1;for(var G=0,Z=D.length;G<Z;G++){var H=D[G];U[H]=o(U[H],N[G])}h.push(U)}}else{if(E===0)return[];h.splice(E,1),E-=1,A-=1}else{T[w]=r(T[w],B);for(var z=0,j=D.length;z<j;z++){var L=D[z];T[L]=o(T[L],i(T[w],N[z]))}}}return h.map(W=>new s({data:W.map(K=>[K]),size:[m,1]}))}}),zGe="matAlgo08xS0Sid",UGe=["typed","equalScalar"],W5=re(zGe,UGe,t=>{var{typed:e,equalScalar:n}=t;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,v=o._size,b=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!s||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var x=c[0],C=c[1],w,A=n,E=0,T=a;typeof f=="string"&&f===b&&f!=="mixed"&&(w=f,A=e.find(n,[w,w]),E=e.convert(0,w),T=e.find(a,[w,w]));for(var N=[],D=[],M=[],k=[],B=[],P,$,z,j,L=0;L<C;L++){M[L]=D.length;var U=L+1;for($=u[L],z=u[L+1],P=$;P<z;P++)j=l[P],B[j]=U,k[j]=s[P],D.push(j);for($=m[L],z=m[L+1],P=$;P<z;P++)j=h[P],B[j]===U&&(k[j]=T(k[j],d[P]));for(P=M[L];P<D.length;){j=D[P];var G=k[j];A(G,E)?D.splice(P,1):(N.push(G),P++)}}return M[C]=D.length,i.createSparseMatrix({values:N,index:D,ptr:M,size:[x,C],datatype:f===i._datatype&&b===o._datatype?w:void 0})}}),K5=re("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,o)=>r(n(i),o).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,o)=>r(n(i),o).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,o)=>r(i,n(o)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,o)=>r(i,n(o)).valueOf())}}),gz="leftShift",HGe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],VGe=re(gz,HGe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:o,concat:a}=t,s=Vf({typed:e}),l=hl({typed:e,equalScalar:r}),u=W5({typed:e,equalScalar:r}),c=Sh({typed:e,DenseMatrix:o}),f=Yi({typed:e,equalScalar:r}),d=Cs({typed:e}),h=or({typed:e,matrix:n,concat:a}),m=K5({typed:e,matrix:n});return e(gz,{"number, number":mee,"BigNumber, BigNumber":lqe,"bigint, bigint":(v,b)=>v<<b,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():f(b,x,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():d(b,x,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):c(x,b,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):d(x,b,v,!0))},m,h({SS:u,DS:s,SD:l}))}),vz="rightArithShift",qGe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],jGe=re(vz,qGe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:o,concat:a}=t,s=Vf({typed:e}),l=hl({typed:e,equalScalar:r}),u=W5({typed:e,equalScalar:r}),c=Sh({typed:e,DenseMatrix:o}),f=Yi({typed:e,equalScalar:r}),d=Cs({typed:e}),h=or({typed:e,matrix:n,concat:a}),m=K5({typed:e,matrix:n});return e(vz,{"number, number":gee,"BigNumber, BigNumber":uqe,"bigint, bigint":(v,b)=>v>>b,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():f(b,x,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():d(b,x,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):c(x,b,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):d(x,b,v,!0))},m,h({SS:u,DS:s,SD:l}))}),bz="rightLogShift",GGe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],YGe=re(bz,GGe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:o,concat:a}=t,s=Vf({typed:e}),l=hl({typed:e,equalScalar:r}),u=W5({typed:e,equalScalar:r}),c=Sh({typed:e,DenseMatrix:o}),f=Yi({typed:e,equalScalar:r}),d=Cs({typed:e}),h=or({typed:e,matrix:n,concat:a}),m=K5({typed:e,matrix:n});return e(bz,{"number, number":vee,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():f(b,x,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(b,x)=>r(x,0)?b.clone():d(b,x,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):c(x,b,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(b,x)=>r(b,0)?i(x.size(),x.storage()):d(x,b,v,!0))},m,h({SS:u,DS:s,SD:l}))}),yz="and",WGe=["typed","matrix","equalScalar","zeros","not","concat"],ste=re(yz,WGe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:o,concat:a}=t,s=hl({typed:e,equalScalar:r}),l=aS({typed:e,equalScalar:r}),u=Yi({typed:e,equalScalar:r}),c=Cs({typed:e}),f=or({typed:e,matrix:n,concat:a});return e(yz,{"number, number":W4,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"bigint, bigint":W4,"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>o(m)?i(h.size(),h.storage()):u(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>o(m)?i(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>o(h)?i(h.size(),h.storage()):u(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>o(h)?i(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(n(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,n(m)).valueOf())},f({SS:l,DS:s}))}),iE="compare",KGe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],XGe=re(iE,KGe,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,BigNumber:o,Fraction:a,DenseMatrix:s,concat:l}=t,u=po({typed:e}),c=oS({typed:e,equalScalar:r}),f=di({typed:e,DenseMatrix:s}),d=or({typed:e,matrix:i,concat:l}),h=p0({typed:e});return e(iE,ZGe({typed:e,config:n}),{"boolean, boolean":function(v,b){return v===b?0:v>b?1:-1},"BigNumber, BigNumber":function(v,b){return bs(v,b,n.relTol,n.absTol)?new o(0):new o(v.cmp(b))},"bigint, bigint":function(v,b){return v===b?0n:v>b?1n:-1n},"Fraction, Fraction":function(v,b){return new a(v.compare(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:u,Ss:f}))}),ZGe=re(iE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(iE,{"number, number":function(i,o){return Mi(i,o,n.relTol,n.absTol)?0:i>o?1:-1}})}),B3,xz;function QGe(){return xz||(xz=1,B3=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,s=/^0/,l=function(w){return t.insensitive&&(""+w).toLowerCase()||""+w},u=l(e).replace(i,"")||"",c=l(n).replace(i,"")||"",f=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(u.match(a),16)||f.length!==1&&u.match(o)&&Date.parse(u),m=parseInt(c.match(a),16)||h&&c.match(o)&&Date.parse(c)||null,v,b;if(m){if(h<m)return-1;if(h>m)return 1}for(var x=0,C=Math.max(f.length,d.length);x<C;x++){if(v=!(f[x]||"").match(s)&&parseFloat(f[x])||f[x]||0,b=!(d[x]||"").match(s)&&parseFloat(d[x])||d[x]||0,isNaN(v)!==isNaN(b))return isNaN(v)?1:-1;if(typeof v!=typeof b&&(v+="",b+=""),v<b)return-1;if(v>b)return 1}return 0}),B3}var JGe=QGe();const Ap=Qs(JGe);var wz="compareNatural",eYe=["typed","compare"],tYe=re(wz,eYe,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(wz,{"any, any":i});function i(l,u){var c=Zn(l),f=Zn(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(l,u),d.toString()!=="0"?d>0?1:-1:Ap(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=o(i,l,u),d!==0?d:Ap(c,f);if(c!==f)return Ap(c,f);if(c==="Complex")return nYe(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return r(l,u);if(c==="string")return Ap(l,u);if(c==="Object")return s(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function o(l,u,c){return _d(u)&&_d(c)?a(l,u.toJSON().values,c.toJSON().values):_d(u)?o(l,u.toArray(),c):_d(c)?o(l,u,c.toArray()):Hw(u)?o(l,u.toJSON().data,c):Hw(c)?o(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):o(l,u,[c]):o(l,[u],c)}function a(l,u,c){for(var f=0,d=Math.min(u.length,c.length);f<d;f++){var h=l(u[f],c[f]);if(h!==0)return h}return u.length>c.length?1:u.length<c.length?-1:0}function s(l,u,c){var f=Object.keys(u),d=Object.keys(c);f.sort(Ap),d.sort(Ap);var h=a(l,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=l(u[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function nYe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var Ez="compareText",rYe=["typed","matrix","concat"];U4.signature="any, any";var iYe=re(Ez,rYe,t=>{var{typed:e,matrix:n,concat:r}=t,i=or({typed:e,matrix:n,concat:r});return e(Ez,U4,i({elop:U4,Ds:!0}))}),oE="equal",oYe=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],aYe=re(oE,oYe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o,SparseMatrix:a}=t,s=po({typed:e}),l=jl({typed:e,SparseMatrix:a}),u=di({typed:e,DenseMatrix:i}),c=or({typed:e,matrix:n});return e(oE,sYe({typed:e,equalScalar:r}),c({elop:r,SS:l,DS:s,Ss:u}))}),sYe=re(oE,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(oE,{"any, any":function(i,o){return i===null?o===null:o===null?i===null:i===void 0?o===void 0:o===void 0?i===void 0:n(i,o)}})}),Cz="equalText",lYe=["typed","compareText","isZero"],uYe=re(Cz,lYe,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(Cz,{"any, any":function(o,a){return r(n(o,a))}})}),aE="smaller",cYe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],fYe=re(aE,cYe,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:o,concat:a,SparseMatrix:s}=t,l=po({typed:e}),u=jl({typed:e,SparseMatrix:s}),c=di({typed:e,DenseMatrix:o}),f=or({typed:e,matrix:i,concat:a}),d=p0({typed:e});function h(m,v){return m.lt(v)&&!bs(m,v,n.relTol,n.absTol)}return e(aE,dYe({typed:e,config:n}),{"boolean, boolean":(m,v)=>m<v,"BigNumber, BigNumber":h,"bigint, bigint":(m,v)=>m<v,"Fraction, Fraction":(m,v)=>m.compare(v)===-1,"Fraction, BigNumber":function(v,b){return h(r(v),b)},"BigNumber, Fraction":function(v,b){return h(v,r(b))},"Complex, Complex":function(v,b){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:u,DS:l,Ss:c}))}),dYe=re(aE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(aE,{"number, number":function(i,o){return i<o&&!Mi(i,o,n.relTol,n.absTol)}})}),sE="smallerEq",hYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],pYe=re(sE,hYe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:o,SparseMatrix:a}=t,s=po({typed:e}),l=jl({typed:e,SparseMatrix:a}),u=di({typed:e,DenseMatrix:i}),c=or({typed:e,matrix:r,concat:o}),f=p0({typed:e});return e(sE,mYe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,m){return h.lte(m)||bs(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:s,Ss:u}))}),mYe=re(sE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(sE,{"number, number":function(i,o){return i<=o||Mi(i,o,n.relTol,n.absTol)}})}),lE="larger",gYe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],vYe=re(lE,gYe,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:o,concat:a,SparseMatrix:s}=t,l=po({typed:e}),u=jl({typed:e,SparseMatrix:s}),c=di({typed:e,DenseMatrix:o}),f=or({typed:e,matrix:i,concat:a}),d=p0({typed:e});function h(m,v){return m.gt(v)&&!bs(m,v,n.relTol,n.absTol)}return e(lE,bYe({typed:e,config:n}),{"boolean, boolean":(m,v)=>m>v,"BigNumber, BigNumber":h,"bigint, bigint":(m,v)=>m>v,"Fraction, Fraction":(m,v)=>m.compare(v)===1,"Fraction, BigNumber":function(v,b){return h(r(v),b)},"BigNumber, Fraction":function(v,b){return h(v,r(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:u,DS:l,Ss:c}))}),bYe=re(lE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(lE,{"number, number":function(i,o){return i>o&&!Mi(i,o,n.relTol,n.absTol)}})}),uE="largerEq",yYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],xYe=re(uE,yYe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:o,SparseMatrix:a}=t,s=po({typed:e}),l=jl({typed:e,SparseMatrix:a}),u=di({typed:e,DenseMatrix:i}),c=or({typed:e,matrix:r,concat:o}),f=p0({typed:e});return e(uE,wYe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,m){return h.gte(m)||bs(h,m,n.relTol,n.absTol)},"bigint, bigint":function(h,m){return h>=m},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:s,Ss:u}))}),wYe=re(uE,["typed","config"],t=>{var{typed:e,config:n}=t;return e(uE,{"number, number":function(i,o){return i>=o||Mi(i,o,n.relTol,n.absTol)}})}),Sz="deepEqual",EYe=["typed","equal"],CYe=re(Sz,EYe,t=>{var{typed:e,equal:n}=t;return e(Sz,{"any, any":function(o,a){return r(o.valueOf(),a.valueOf())}});function r(i,o){if(Array.isArray(i))if(Array.isArray(o)){var a=i.length;if(a!==o.length)return!1;for(var s=0;s<a;s++)if(!r(i[s],o[s]))return!1;return!0}else return!1;else return Array.isArray(o)?!1:n(i,o)}}),cE="unequal",SYe=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],TYe=re(cE,SYe,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,DenseMatrix:o,concat:a,SparseMatrix:s}=t,l=po({typed:e}),u=jl({typed:e,SparseMatrix:s}),c=di({typed:e,DenseMatrix:o}),f=or({typed:e,matrix:i,concat:a});return e(cE,AYe({typed:e,equalScalar:r}),f({elop:d,SS:u,DS:l,Ss:c}));function d(h,m){return!r(h,m)}}),AYe=re(cE,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(cE,{"any, any":function(i,o){return i===null?o!==null:o===null?i!==null:i===void 0?o!==void 0:o===void 0?i!==void 0:!n(i,o)}})}),Tz="partitionSelect",NYe=["typed","isNumeric","isNaN","compare"],DYe=re(Tz,NYe,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:i}=t,o=i,a=(u,c)=>-i(u,c);return e(Tz,{"Array | Matrix, number":function(c,f){return s(c,f,o)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return s(c,f,o);if(d==="desc")return s(c,f,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(u,c,f){if(!yt(c)||c<0)throw new Error("k must be a non-negative integer");if(Ot(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(n(u[d])&&r(u[d]))return u[d];for(var h=0,m=u.length-1;h<m;){for(var v=h,b=m,x=u[Math.floor(Math.random()*(m-h+1))+h];v<b;)if(f(u[v],x)>=0){var C=u[b];u[b]=u[v],u[v]=C,--b}else++v;f(u[v],x)>0&&--v,c<=v?m=v:h=v+1}return u[c]}}),Az="sort",MYe=["typed","matrix","compare","compareNatural"],kYe=re(Az,MYe,t=>{var{typed:e,matrix:n,compare:r,compareNatural:i}=t,o=r,a=(c,f)=>-r(c,f);return e(Az,{Array:function(f){return l(f),f.sort(o)},Matrix:function(f){return u(f),n(f.toArray().sort(o),f.storage())},"Array, function":function(f,d){return l(f),f.sort(d)},"Matrix, function":function(f,d){return u(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return l(f),f.sort(s(d))},"Matrix, string":function(f,d){return u(f),n(f.toArray().sort(s(d)),f.storage())}});function s(c){if(c==="asc")return o;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(Vt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Nz="max",_Ye=["typed","config","numeric","larger","isNaN"],lte=re(Nz,_Ye,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:o}=t;return e(Nz,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,c){return iS(u,c.valueOf(),a)},"...":function(u){if(f0(u))throw new TypeError("Scalar values expected in function max");return s(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw ko(c,"max",u)}}function s(l){var u;if(Nf(l,function(c){try{(o(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw ko(f,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=r(u,Uf(u,n))),u}}),Dz="min",OYe=["typed","config","numeric","smaller","isNaN"],ute=re(Dz,OYe,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:o}=t;return e(Dz,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,c){return iS(u,c.valueOf(),a)},"...":function(u){if(f0(u))throw new TypeError("Scalar values expected in function min");return s(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw ko(c,"min",u)}}function s(l){var u;if(Nf(l,function(c){try{(o(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw ko(f,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=r(u,Uf(u,n))),u}}),IYe="ImmutableDenseMatrix",RYe=["smaller","DenseMatrix"],BYe=re(IYe,RYe,t=>{var{smaller:e,DenseMatrix:n}=t;function r(i,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Pr(o))throw new Error("Invalid datatype: "+o);if(Ot(i)||Kn(i)){var a=new n(i,o);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&Kn(i.data)&&Kn(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Zn(i)+")");this._data=[],this._size=[0],this._datatype=o,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var o=n.prototype.subset.call(this,i);return Ot(o)?new r({data:o._data,size:o._size,datatype:o._datatype}):o}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Ht(this._data),size:Ht(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(o){(i===null||e(o,i))&&(i=o)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(o){(i===null||e(i,o))&&(i=o)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),LYe="Index",FYe=["ImmutableDenseMatrix","getMatrixDataType"],PYe=re(LYe,FYe,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,a=arguments.length;o<a;o++){var s=o<0||arguments.length<=o?void 0:arguments[o],l=Kn(s),u=Ot(s),c=typeof s,f=null;if(F5(s))this._dimensions.push(s),this._isScalar=!1;else if(l||u){var d=void 0;this._isScalar=!1,n(s)==="boolean"?(l&&(d=i(Mz(s).valueOf())),u&&(d=i(Mz(s._data).valueOf())),f=s.valueOf().length):d=i(s.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(s);else if(c==="bigint")this._dimensions.push(Number(s));else if(c==="string")this._dimensions.push(s);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(o){for(var a=0,s=o.length;a<s;a++)if(!Dt(o[a])||!yt(o[a]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=o,l._size=[o.length],l}return r.prototype.clone=function(){var o=new r;return o._dimensions=Ht(this._dimensions),o._isScalar=this._isScalar,o._sourceSize=this._sourceSize,o},r.create=function(o){var a=new r;return r.apply(a,o),a},r.prototype.size=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=Pr(l)||Dt(l)?1:l.size()[0]}return o},r.prototype.max=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=Pr(l)||Dt(l)?l:l.max()}return o},r.prototype.min=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=Pr(l)||Dt(l)?l:l.min()}return o},r.prototype.forEach=function(o){for(var a=0,s=this._dimensions.length;a<s;a++)o(this._dimensions[a],a,this)},r.prototype.dimension=function(o){var a;return Dt(o)&&(a=this._dimensions[o])!==null&&a!==void 0?a:null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&Pr(this._dimensions[0])},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o.push(Pr(l)||Dt(l)?l:l.toArray())}return o},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];Pr(l)?o.push(JSON.stringify(l)):o.push(l.toString())}return"["+o.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(o){return r.create(o.dimensions)},r},{isClass:!0});function Mz(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var $Ye="FibonacciHeap",zYe=["smaller","larger"],UYe=re($Ye,zYe,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=o(this._minimum,c,-1),this.extractMinimum()};function o(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(a(c,f,h),s(c,h)),e(f.key,c.key)&&(c=f),c}function a(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(c,f){var d=f.parent;d&&(f.mark?(a(c,f,d),s(d)):f.mark=!0)}var l=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function u(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var b;m>0;){for(var x=v.degree,C=v.right;b=h[x],!!b;){if(n(v.key,b.key)){var w=b;b=v,v=w}l(b,v),h[x]=null,x++}h[x]=v,v=C,m--}c=null;for(var A=0;A<d;A++)b=h[A],b&&(c?(b.left.right=b.right,b.right.left=b.left,b.left=c,b.right=c.right,c.right=b,b.right.left=b,e(b.key,c.key)&&(c=b)):c=b);return c}return i},{isClass:!0}),HYe="Spa",VYe=["addScalar","equalScalar","FibonacciHeap"],qYe=re(HYe,VYe,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,a){if(this._values[o])this._values[o].value=a;else{var s=this._heap.insert(o,a);this._values[o]=s}},i.prototype.get=function(o){var a=this._values[o];return a?a.value:0},i.prototype.accumulate=function(o,a){var s=this._values[o];s?s.value=e(s.value,a):(s=this._heap.insert(o,a),this._values[o]=s)},i.prototype.forEach=function(o,a,s){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=a;)f.key>=o&&(n(f.value,0)||s(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=l.insert(h.key,h.value),u[f.key]=f}},i.prototype.swap=function(o,a){var s=this._values[o],l=this._values[a];if(!s&&l)s=this._heap.insert(o,l.value),this._heap.remove(l),this._values[o]=s,this._values[a]=void 0;else if(s&&!l)l=this._heap.insert(a,s.value),this._heap.remove(s),this._values[a]=l,this._values[o]=void 0;else if(s&&l){var u=s.value;s.value=l.value,l.value=u}},i},{isClass:!0});function jYe(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),o=0,a=function(l){var u=i[l];if(u&&(delete r[u],delete i[l],--e,n===u)){if(!e){o=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(l){var u=i[l],c=++o;if(r[c]=l,i[l]=c,!u)return++e,e<=t?void 0:(l=r[n],a(l),l);if(delete r[u],n===u)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:a,clear:function(){e=o=0,n=1,r=Object.create(null),i=Object.create(null)}}}function Bv(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:jYe(n||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e(i);if(r.cache.values.has(a))return r.cache.lru.hit(a),r.cache.values.get(a);var s=t.apply(t,i);return r.cache.values.set(a,s),r.cache.values.delete(r.cache.lru.hit(a)),s}}var GYe=Bv(function(t){return new t(1).exp()},{hasher:sS}),YYe=Bv(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:sS}),X5=Bv(function(t){return t.acos(-1)},{hasher:sS}),WYe=Bv(function(t){return X5(t).times(2)},{hasher:sS});function sS(t){return t[0].precision}function kz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(n),!0).forEach(function(r){oi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var KYe="Unit",XYe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],ZYe=re(KYe,XYe,t=>{var{on:e,config:n,addScalar:r,subtractScalar:i,multiplyScalar:o,divideScalar:a,pow:s,abs:l,fix:u,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:b,Fraction:x}=t,C=m,w=!1,A=!0;function E(te,me){if(!(this instanceof E))throw new Error("Constructor must be called with the new operator");if(!(te==null||d(te)||$u(te)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=w,this.skipAutomaticSimplification=A,me===void 0)this.units=[],this.dimensions=ee.map(ae=>0);else if(typeof me=="string"){var J=E.parse(me);this.units=J.units,this.dimensions=J.dimensions}else if(xa(me)&&me.value===null)this.fixPrefix=me.fixPrefix,this.skipAutomaticSimplification=me.skipAutomaticSimplification,this.dimensions=me.dimensions.slice(0),this.units=me.units.map(ae=>jr({},ae));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(te)}Object.defineProperty(E,"name",{value:"Unit"}),E.prototype.constructor=E,E.prototype.type="Unit",E.prototype.isUnit=!0;var T,N,D;function M(){for(;D===" "||D==="	";)P()}function k(te){return te>="0"&&te<="9"||te==="."}function B(te){return te>="0"&&te<="9"}function P(){N++,D=T.charAt(N)}function $(te){N=te,D=T.charAt(N)}function z(){var te="",me=N;if(D==="+"?P():D==="-"&&(te+=D,P()),!k(D))return $(me),null;if(D==="."){if(te+=D,P(),!B(D))return $(me),null}else{for(;B(D);)te+=D,P();D==="."&&(te+=D,P())}for(;B(D);)te+=D,P();if(D==="E"||D==="e"){var J="",ae=N;if(J+=D,P(),(D==="+"||D==="-")&&(J+=D,P()),!B(D))return $(ae),te;for(te=te+J;B(D);)te+=D,P()}return te}function j(){for(var te="";B(D)||E.isValidAlpha(D);)te+=D,P();var me=te.charAt(0);return E.isValidAlpha(me)?te:null}function L(te){return D===te?(P(),te):null}E.parse=function(te,me){if(me=me||{},T=te,N=-1,D="",typeof T!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var J=new E;J.units=[];var ae=1,ge=!1;P(),M();var se=z(),fe=null;if(se){if(n.number==="BigNumber")fe=new b(se);else if(n.number==="Fraction")try{fe=new x(se)}catch{fe=parseFloat(se)}else fe=parseFloat(se);M(),L("*")?(ae=1,ge=!0):L("/")&&(ae=-1,ge=!0)}for(var we=[],Be=1;;){for(M();D==="(";)we.push(ae),Be*=ae,ae=1,P(),M();var Oe=void 0;if(D){var Je=D;if(Oe=j(),Oe===null)throw new SyntaxError('Unexpected "'+Je+'" in "'+T+'" at index '+N.toString())}else break;var Pe=U(Oe);if(Pe===null)throw new SyntaxError('Unit "'+Oe+'" not found.');var ht=ae*Be;if(M(),L("^")){M();var Ct=z();if(Ct===null)throw new SyntaxError('In "'+te+'", "^" must be followed by a floating-point number');ht*=Ct}J.units.push({unit:Pe.unit,prefix:Pe.prefix,power:ht});for(var Ut=0;Ut<ee.length;Ut++)J.dimensions[Ut]+=(Pe.unit.dimensions[Ut]||0)*ht;for(M();D===")";){if(we.length===0)throw new SyntaxError('Unmatched ")" in "'+T+'" at index '+N.toString());Be/=we.pop(),P(),M()}if(ge=!1,L("*")?(ae=1,ge=!0):L("/")?(ae=-1,ge=!0):ae=1,Pe.unit.base){var pt=Pe.unit.base.key;he.auto[pt]={unit:Pe.unit,prefix:Pe.prefix}}}if(M(),D)throw new SyntaxError('Could not parse: "'+te+'"');if(ge)throw new SyntaxError('Trailing characters: "'+te+'"');if(we.length!==0)throw new SyntaxError('Unmatched "(" in "'+T+'"');if(J.units.length===0&&!me.allowNoUnits)throw new SyntaxError('"'+te+'" contains no units');return J.value=fe!==void 0?J._normalize(fe):null,J},E.prototype.clone=function(){var te=new E;te.fixPrefix=this.fixPrefix,te.skipAutomaticSimplification=this.skipAutomaticSimplification,te.value=Ht(this.value),te.dimensions=this.dimensions.slice(0),te.units=[];for(var me=0;me<this.units.length;me++){te.units[me]={};for(var J in this.units[me])mt(this.units[me],J)&&(te.units[me][J]=this.units[me][J])}return te},E.prototype.valueType=function(){return Zn(this.value)},E.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},E.prototype._normalize=function(te){if(te==null||this.units.length===0)return te;for(var me=te,J=E._getNumberConverter(Zn(te)),ae=0;ae<this.units.length;ae++){var ge=J(this.units[ae].unit.value),se=J(this.units[ae].prefix.value),fe=J(this.units[ae].power);me=o(me,s(o(ge,se),fe))}return me},E.prototype._denormalize=function(te,me){if(te==null||this.units.length===0)return te;for(var J=te,ae=E._getNumberConverter(Zn(te)),ge=0;ge<this.units.length;ge++){var se=ae(this.units[ge].unit.value),fe=ae(this.units[ge].prefix.value),we=ae(this.units[ge].power);J=a(J,s(o(se,fe),we))}return J};var U=Bv(te=>{if(mt(X,te)){var me=X[te],J=me.prefixes[""];return{unit:me,prefix:J}}for(var ae in X)if(mt(X,ae)&&Zze(te,ae)){var ge=X[ae],se=te.length-ae.length,fe=te.substring(0,se),we=mt(ge.prefixes,fe)?ge.prefixes[fe]:void 0;if(we!==void 0)return{unit:ge,prefix:we}}return null},{hasher:te=>te[0],limit:100});E.isValuelessUnit=function(te){return U(te)!==null},E.prototype.hasBase=function(te){if(typeof te=="string"&&(te=Q[te]),!te)return!1;for(var me=0;me<ee.length;me++)if(Math.abs((this.dimensions[me]||0)-(te.dimensions[me]||0))>1e-12)return!1;return!0},E.prototype.equalBase=function(te){for(var me=0;me<ee.length;me++)if(Math.abs((this.dimensions[me]||0)-(te.dimensions[me]||0))>1e-12)return!1;return!0},E.prototype.equals=function(te){return this.equalBase(te)&&f(this.value,te.value)},E.prototype.multiply=function(te){for(var me=this.clone(),J=xa(te)?te:new E(te),ae=0;ae<ee.length;ae++)me.dimensions[ae]=(this.dimensions[ae]||0)+(J.dimensions[ae]||0);for(var ge=0;ge<J.units.length;ge++){var se=L3({},J.units[ge]);me.units.push(se)}if(this.value!==null||J.value!==null){var fe=this.value===null?this._normalize(Z(J.value)):this.value,we=J.value===null?J._normalize(Z(this.value)):J.value;me.value=o(fe,we)}else me.value=null;return xa(te)&&(me.skipAutomaticSimplification=!1),G(me)},E.prototype.divideInto=function(te){return new E(te).divide(this)},E.prototype.divide=function(te){for(var me=this.clone(),J=xa(te)?te:new E(te),ae=0;ae<ee.length;ae++)me.dimensions[ae]=(this.dimensions[ae]||0)-(J.dimensions[ae]||0);for(var ge=0;ge<J.units.length;ge++){var se=L3(L3({},J.units[ge]),{},{power:-J.units[ge].power});me.units.push(se)}if(this.value!==null||J.value!==null){var fe=this.value===null?this._normalize(Z(J.value)):this.value,we=J.value===null?J._normalize(Z(this.value)):J.value;me.value=a(fe,we)}else me.value=null;return xa(te)&&(me.skipAutomaticSimplification=!1),G(me)},E.prototype.pow=function(te){for(var me=this.clone(),J=0;J<ee.length;J++)me.dimensions[J]=(this.dimensions[J]||0)*te;for(var ae=0;ae<me.units.length;ae++)me.units[ae].power*=te;return me.value!==null?me.value=s(me.value,te):me.value=null,me.skipAutomaticSimplification=!1,G(me)};function G(te){return te.equalBase(Q.NONE)&&te.value!==null&&!n.predictable?te.value:te}function Z(te){var me=E._getNumberConverter(Zn(te));return me(1)}E.prototype.abs=function(){var te=this.clone();if(te.value!==null)if(te._isDerived()||te.units.length===0||te.units[0].unit.offset===0)te.value=l(te.value);else{var me=te._numberConverter(),J=me(te.units[0].unit.value),ae=me(te.units[0].unit.offset),ge=o(J,ae);te.value=i(l(r(te.value,ge)),ge)}for(var se in te.units)(te.units[se].unit.name==="VA"||te.units[se].unit.name==="VAR")&&(te.units[se].unit=X.W);return te},E.prototype.to=function(te){var me=this.value===null?this._normalize(1):this.value,J;if(typeof te=="string")J=E.parse(te);else if(xa(te))J=te.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(J))throw new Error("Units do not match ('".concat(J.toString(),"' != '").concat(this.toString(),"')"));if(J.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||J.units.length===0||this.units[0].unit.offset===J.units[0].unit.offset)J.value=Ht(me);else{var ae=E._getNumberConverter(Zn(me)),ge=this.units[0].unit.value,se=this.units[0].unit.offset,fe=o(ge,se),we=J.units[0].unit.value,Be=J.units[0].unit.offset,Oe=o(we,Be);J.value=r(me,ae(i(fe,Oe)))}return J.fixPrefix=!0,J.skipAutomaticSimplification=!0,J},E.prototype.toNumber=function(te){return C(this.toNumeric(te))},E.prototype.toNumeric=function(te){var me;return te?me=this.to(te):me=this.clone(),me._isDerived()||me.units.length===0?me._denormalize(me.value):me._denormalize(me.value,me.units[0].prefix.value)},E.prototype.toString=function(){return this.format()},E.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},E.fromJSON=function(te){var me,J,ae,ge=new E(te.value,(me=te.unit)!==null&&me!==void 0?me:void 0);return ge.fixPrefix=(J=te.fixPrefix)!==null&&J!==void 0?J:w,ge.skipAutomaticSimplification=(ae=te.skipSimp)!==null&&ae!==void 0?ae:A,ge},E.prototype.valueOf=E.prototype.toString,E.prototype.simplify=function(){var te=this.clone(),me=[],J;for(var ae in Te)if(mt(Te,ae)&&te.hasBase(Q[ae])){J=ae;break}if(J==="NONE")te.units=[];else{var ge;if(J&&mt(Te,J)&&(ge=Te[J]),ge)te.units=[{unit:ge.unit,prefix:ge.prefix,power:1}];else{for(var se=!1,fe=0;fe<ee.length;fe++){var we=ee[fe];Math.abs(te.dimensions[fe]||0)>1e-12&&(mt(Te,we)?me.push({unit:Te[we].unit,prefix:Te[we].prefix,power:te.dimensions[fe]||0}):se=!0)}me.length<te.units.length&&!se&&(te.units=me)}}return te},E.prototype.toSI=function(){for(var te=this.clone(),me=[],J=0;J<ee.length;J++){var ae=ee[J];if(Math.abs(te.dimensions[J]||0)>1e-12)if(mt(he.si,ae))me.push({unit:he.si[ae].unit,prefix:he.si[ae].prefix,power:te.dimensions[J]||0});else throw new Error("Cannot express custom unit "+ae+" in SI units")}return te.units=me,te.fixPrefix=!0,te.skipAutomaticSimplification=!0,this.value!==null?(te.value=null,this.to(te)):te},E.prototype.formatUnits=function(){for(var te="",me="",J=0,ae=0,ge=0;ge<this.units.length;ge++)this.units[ge].power>0?(J++,te+=" "+this.units[ge].prefix.name+this.units[ge].unit.name,Math.abs(this.units[ge].power-1)>1e-15&&(te+="^"+this.units[ge].power)):this.units[ge].power<0&&ae++;if(ae>0)for(var se=0;se<this.units.length;se++)this.units[se].power<0&&(J>0?(me+=" "+this.units[se].prefix.name+this.units[se].unit.name,Math.abs(this.units[se].power+1)>1e-15&&(me+="^"+-this.units[se].power)):(me+=" "+this.units[se].prefix.name+this.units[se].unit.name,me+="^"+this.units[se].power));te=te.substr(1),me=me.substr(1),J>1&&ae>0&&(te="("+te+")"),ae>1&&J>0&&(me="("+me+")");var fe=te;return J>0&&ae>0&&(fe+=" / "),fe+=me,fe},E.prototype.toBest=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(te&&!Array.isArray(te))throw new Error("Invalid unit type. Expected string or Unit.");var J=this.units[0].unit.prefixes;if(te&&te.length>0){var ae=te.map(fe=>{var we=null;if(typeof fe=="string"){if(we=E.parse(fe),!we)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!xa(fe))throw new Error("Invalid unit type. Expected compatible string or Unit.");we===null&&(we=fe.clone());try{return this.to(we.formatUnits()),we}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),ge=ae.map(fe=>fe.units[0].prefix);this.units[0].unit.prefixes=ge.reduce((fe,we)=>(fe[we.name]=we,fe),{}),this.units[0].prefix=ge[0]}var se=H(this,me).simp;return this.units[0].unit.prefixes=J,se.fixPrefix=!0,se},E.prototype.format=function(te){var{simp:me,valueStr:J,unitStr:ae}=H(this,te),ge=J;return me.value&&$u(me.value)&&(ge="("+ge+")"),ae.length>0&&ge.length>0&&(ge+=" "),ge+=ae,ge};function H(te){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=te.skipAutomaticSimplification||te.value===null?te.clone():te.simplify();W(J),K(J,me.offset);var ae=J._denormalize(J.value),ge=J.value!==null?h(ae,me||{}):"",se=J.formatUnits();return{simp:J,valueStr:ge,unitStr:se}}function W(te){var me=!1;typeof te.value<"u"&&te.value!==null&&$u(te.value)&&(me=Math.abs(te.value.re)<1e-14);for(var J in te.units)mt(te.units,J)&&te.units[J].unit&&(te.units[J].unit.name==="VA"&&me?te.units[J].unit=X.VAR:te.units[J].unit.name==="VAR"&&!me&&(te.units[J].unit=X.VA))}function K(te,me){te.units.length===1&&!te.fixPrefix&&Math.abs(te.units[0].power-Math.round(te.units[0].power))<1e-14&&(te.units[0].prefix=te._bestPrefix(me))}E.prototype._bestPrefix=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var me=this.value!==null?l(this.value):0,J=l(this.units[0].unit.value),ae=this.units[0].prefix;if(me===0)return ae;var ge=this.units[0].power,se=Math.log(me/Math.pow(ae.value*J,ge))/Math.LN10-te;if(se>-2.200001&&se<1.800001)return ae;se=Math.abs(se);var fe=this.units[0].unit.prefixes;for(var we in fe)if(mt(fe,we)){var Be=fe[we];if(Be.scientific){var Oe=Math.abs(Math.log(me/Math.pow(Be.value*J,ge))/Math.LN10-te);(Oe<se||Oe===se&&Be.name.length<ae.name.length)&&(ae=Be,se=Oe)}}return ae},E.prototype.splitUnit=function(te){for(var me=this.clone(),J=[],ae=0;ae<te.length&&(me=me.to(te[ae]),ae!==te.length-1);ae++){var ge=me.toNumeric(),se=c(ge),fe=void 0,we=f(se,ge);we?fe=se:fe=u(me.toNumeric());var Be=new E(fe,te[ae].toString());J.push(Be),me=i(me,Be)}for(var Oe=0,Je=0;Je<J.length;Je++)Oe=r(Oe,J[Je].value);return f(Oe,this.value)&&(me.value=0),J.push(me),J};var I={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};I.SHORTLONG=jr({},I.SHORT,I.LONG),I.BINARY_SHORT=jr({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=jr({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var ee=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],Q={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var ce in Q)mt(Q,ce)&&(Q[ce].key=ce);var ve={},ie={name:"",base:ve,value:1,offset:0,dimensions:ee.map(te=>0)},X={meter:{name:"meter",base:Q.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:"inch",base:Q.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:"foot",base:Q.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:"yard",base:Q.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:"mile",base:Q.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:"link",base:Q.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:"rod",base:Q.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:"chain",base:Q.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:Q.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:"m",base:Q.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:"in",base:Q.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:"ft",base:Q.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:"yd",base:Q.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:"mi",base:Q.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:"li",base:Q.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:"rd",base:Q.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:"ch",base:Q.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:"mil",base:Q.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:"m2",base:Q.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:Q.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:Q.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:Q.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:Q.SURFACE,prefixes:I.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:Q.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:Q.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:Q.SURFACE,prefixes:I.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:Q.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:Q.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:"m3",base:Q.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:"L",base:Q.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:"l",base:Q.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:"litre",base:Q.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:"cuin",base:Q.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:Q.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:Q.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:Q.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:Q.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:"drop",base:Q.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:Q.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:"minim",base:Q.VOLUME,prefixes:I.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:Q.VOLUME,prefixes:I.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:Q.VOLUME,prefixes:I.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:Q.VOLUME,prefixes:I.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:Q.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:"cup",base:Q.VOLUME,prefixes:I.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:Q.VOLUME,prefixes:I.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:Q.VOLUME,prefixes:I.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:Q.VOLUME,prefixes:I.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:Q.VOLUME,prefixes:I.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:Q.VOLUME,prefixes:I.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:Q.VOLUME,prefixes:I.NONE,value:.238480942392,offset:0},g:{name:"g",base:Q.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:"gram",base:Q.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:"ton",base:Q.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:"t",base:Q.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:Q.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:"grain",base:Q.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:Q.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:Q.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:Q.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:Q.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:"stick",base:Q.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:"stone",base:Q.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:Q.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:Q.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:Q.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:Q.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:Q.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:"s",base:Q.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:"min",base:Q.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:"h",base:Q.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:"second",base:Q.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:"sec",base:Q.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:"minute",base:Q.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:"hour",base:Q.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:"day",base:Q.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:"week",base:Q.TIME,prefixes:I.NONE,value:7*86400,offset:0},month:{name:"month",base:Q.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:"year",base:Q.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:"decade",base:Q.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:"century",base:Q.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:Q.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:Q.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:Q.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:Q.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:"radian",base:Q.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:"deg",base:Q.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:"degree",base:Q.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:"grad",base:Q.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:"gradian",base:Q.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:"cycle",base:Q.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:Q.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:Q.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:"A",base:Q.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:"ampere",base:Q.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:"K",base:Q.TEMPERATURE,prefixes:I.SHORT,value:1,offset:0},degC:{name:"degC",base:Q.TEMPERATURE,prefixes:I.SHORT,value:1,offset:273.15},degF:{name:"degF",base:Q.TEMPERATURE,prefixes:I.SHORT,value:new x(5,9),offset:459.67},degR:{name:"degR",base:Q.TEMPERATURE,prefixes:I.SHORT,value:new x(5,9),offset:0},kelvin:{name:"kelvin",base:Q.TEMPERATURE,prefixes:I.LONG,value:1,offset:0},celsius:{name:"celsius",base:Q.TEMPERATURE,prefixes:I.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:Q.TEMPERATURE,prefixes:I.LONG,value:new x(5,9),offset:459.67},rankine:{name:"rankine",base:Q.TEMPERATURE,prefixes:I.LONG,value:new x(5,9),offset:0},mol:{name:"mol",base:Q.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:"mole",base:Q.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:"cd",base:Q.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:"candela",base:Q.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:"N",base:Q.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:"newton",base:Q.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:"dyn",base:Q.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:Q.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:Q.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:Q.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:Q.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:Q.FORCE,prefixes:I.NONE,value:9.80665,offset:0},J:{name:"J",base:Q.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:"joule",base:Q.ENERGY,prefixes:I.LONG,value:1,offset:0},erg:{name:"erg",base:Q.ENERGY,prefixes:I.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:Q.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:Q.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:Q.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:Q.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:Q.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:"watt",base:Q.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:"hp",base:Q.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:Q.POWER,prefixes:I.SHORT,value:v.I,offset:0},VA:{name:"VA",base:Q.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:"Pa",base:Q.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:"psi",base:Q.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:Q.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:"bar",base:Q.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:Q.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:Q.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:Q.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:Q.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:Q.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:"C",base:Q.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:"farad",base:Q.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:"F",base:Q.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:"volt",base:Q.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:"V",base:Q.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:"ohm",base:Q.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:Q.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:"H",base:Q.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:"siemens",base:Q.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:"S",base:Q.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:"weber",base:Q.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:"Wb",base:Q.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:"tesla",base:Q.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:"T",base:Q.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:"b",base:Q.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:Q.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:"B",base:Q.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:Q.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},le={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function Ce(te){if(te.number==="BigNumber"){var me=X5(b);X.rad.value=new b(1),X.deg.value=me.div(180),X.grad.value=me.div(200),X.cycle.value=me.times(2),X.arcsec.value=me.div(648e3),X.arcmin.value=me.div(10800)}else X.rad.value=1,X.deg.value=Math.PI/180,X.grad.value=Math.PI/200,X.cycle.value=Math.PI*2,X.arcsec.value=Math.PI/648e3,X.arcmin.value=Math.PI/10800;X.radian.value=X.rad.value,X.degree.value=X.deg.value,X.gradian.value=X.grad.value}Ce(n),e&&e("config",function(te,me){te.number!==me.number&&Ce(te)});var he={si:{NONE:{unit:ie,prefix:I.NONE[""]},LENGTH:{unit:X.m,prefix:I.SHORT[""]},MASS:{unit:X.g,prefix:I.SHORT.k},TIME:{unit:X.s,prefix:I.SHORT[""]},CURRENT:{unit:X.A,prefix:I.SHORT[""]},TEMPERATURE:{unit:X.K,prefix:I.SHORT[""]},LUMINOUS_INTENSITY:{unit:X.cd,prefix:I.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:X.mol,prefix:I.SHORT[""]},ANGLE:{unit:X.rad,prefix:I.SHORT[""]},BIT:{unit:X.bits,prefix:I.SHORT[""]},FORCE:{unit:X.N,prefix:I.SHORT[""]},ENERGY:{unit:X.J,prefix:I.SHORT[""]},POWER:{unit:X.W,prefix:I.SHORT[""]},PRESSURE:{unit:X.Pa,prefix:I.SHORT[""]},ELECTRIC_CHARGE:{unit:X.C,prefix:I.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:X.F,prefix:I.SHORT[""]},ELECTRIC_POTENTIAL:{unit:X.V,prefix:I.SHORT[""]},ELECTRIC_RESISTANCE:{unit:X.ohm,prefix:I.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:X.H,prefix:I.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:X.S,prefix:I.SHORT[""]},MAGNETIC_FLUX:{unit:X.Wb,prefix:I.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:X.T,prefix:I.SHORT[""]},FREQUENCY:{unit:X.Hz,prefix:I.SHORT[""]}}};he.cgs=JSON.parse(JSON.stringify(he.si)),he.cgs.LENGTH={unit:X.m,prefix:I.SHORT.c},he.cgs.MASS={unit:X.g,prefix:I.SHORT[""]},he.cgs.FORCE={unit:X.dyn,prefix:I.SHORT[""]},he.cgs.ENERGY={unit:X.erg,prefix:I.NONE[""]},he.us=JSON.parse(JSON.stringify(he.si)),he.us.LENGTH={unit:X.ft,prefix:I.NONE[""]},he.us.MASS={unit:X.lbm,prefix:I.NONE[""]},he.us.TEMPERATURE={unit:X.degF,prefix:I.NONE[""]},he.us.FORCE={unit:X.lbf,prefix:I.NONE[""]},he.us.ENERGY={unit:X.BTU,prefix:I.BTU[""]},he.us.POWER={unit:X.hp,prefix:I.NONE[""]},he.us.PRESSURE={unit:X.psi,prefix:I.NONE[""]},he.auto=JSON.parse(JSON.stringify(he.si));var Te=he.auto;E.setUnitSystem=function(te){if(mt(he,te))Te=he[te];else throw new Error("Unit system "+te+" does not exist. Choices are: "+Object.keys(he).join(", "))},E.getUnitSystem=function(){for(var te in he)if(mt(he,te)&&he[te]===Te)return te},E.typeConverters={BigNumber:function(me){return me!=null&&me.isFraction?new b(String(me.n)).div(String(me.d)).times(String(me.s)):new b(me+"")},Fraction:function(me){return new x(me)},Complex:function(me){return me},number:function(me){return me!=null&&me.isFraction?m(me):me}},E.prototype._numberConverter=function(){var te=E.typeConverters[this.valueType()];if(te)return te;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},E._getNumberConverter=function(te){if(!E.typeConverters[te])throw new TypeError('Unsupported type "'+te+'"');return E.typeConverters[te]};for(var Ae in X)if(mt(X,Ae)){var qe=X[Ae];qe.dimensions=qe.base.dimensions}for(var rt in le)if(mt(le,rt)){var lt=X[le[rt]],Qe={};for(var st in lt)mt(lt,st)&&(Qe[st]=lt[st]);Qe.name=rt,X[rt]=Qe}E.isValidAlpha=function(me){return/^[a-zA-Z]$/.test(me)};function dt(te){for(var me=0;me<te.length;me++){if(D=te.charAt(me),me===0&&!E.isValidAlpha(D))throw new Error('Invalid unit name (must begin with alpha character): "'+te+'"');if(me>0&&!(E.isValidAlpha(D)||B(D)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+te+'"')}}return E.createUnit=function(te,me){if(typeof te!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(me&&me.override){for(var J in te)if(mt(te,J)&&E.deleteUnit(J),te[J].aliases)for(var ae=0;ae<te[J].aliases.length;ae++)E.deleteUnit(te[J].aliases[ae])}var ge;for(var se in te)mt(te,se)&&(ge=E.createUnitSingle(se,te[se]));return ge},E.createUnitSingle=function(te,me){if((typeof me>"u"||me===null)&&(me={}),typeof te!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(mt(X,te))throw new Error('Cannot create unit "'+te+'": a unit with that name already exists');dt(te);var J=null,ae=[],ge=0,se,fe,we;if(me&&me.type==="Unit")J=me.clone();else if(typeof me=="string")me!==""&&(se=me);else if(typeof me=="object")se=me.definition,fe=me.prefixes,ge=me.offset,we=me.baseName,me.aliases&&(ae=me.aliases.valueOf());else throw new TypeError('Cannot create unit "'+te+'" from "'+me.toString()+'": expecting "string" or "Unit" or "Object"');if(ae){for(var Be=0;Be<ae.length;Be++)if(mt(X,ae[Be]))throw new Error('Cannot create alias "'+ae[Be]+'": a unit with that name already exists')}if(se&&typeof se=="string"&&!J)try{J=E.parse(se,{allowNoUnits:!0})}catch(At){throw At.message='Could not create unit "'+te+'" from "'+se+'": '+At.message,At}else se&&se.type==="Unit"&&(J=se.clone());ae=ae||[],ge=ge||0,fe&&fe.toUpperCase?fe=I[fe.toUpperCase()]||I.NONE:fe=I.NONE;var Oe={};if(J){Oe={name:te,value:J.value,dimensions:J.dimensions.slice(0),prefixes:fe,offset:ge};var Ct=!1;for(var Ut in Q)if(mt(Q,Ut)){for(var pt=!0,_n=0;_n<ee.length;_n++)if(Math.abs((Oe.dimensions[_n]||0)-(Q[Ut].dimensions[_n]||0))>1e-12){pt=!1;break}if(pt){Ct=!0,Oe.base=Q[Ut];break}}if(!Ct){we=we||te+"_STUFF";var V={dimensions:J.dimensions.slice(0)};V.key=we,Q[we]=V,Te[we]={unit:Oe,prefix:I.NONE[""]},Oe.base=Q[we]}}else{if(we=we||te+"_STUFF",ee.indexOf(we)>=0)throw new Error('Cannot create new base unit "'+te+'": a base unit with that name already exists (and cannot be overridden)');ee.push(we);for(var Je in Q)mt(Q,Je)&&(Q[Je].dimensions[ee.length-1]=0);for(var Pe={dimensions:[]},ht=0;ht<ee.length;ht++)Pe.dimensions[ht]=0;Pe.dimensions[ee.length-1]=1,Pe.key=we,Q[we]=Pe,Oe={name:te,value:1,dimensions:Q[we].dimensions.slice(0),prefixes:fe,offset:ge,base:Q[we]},Te[we]={unit:Oe,prefix:I.NONE[""]}}E.UNITS[te]=Oe;for(var be=0;be<ae.length;be++){var Ie=ae[be],Xe={};for(var gt in Oe)mt(Oe,gt)&&(Xe[gt]=Oe[gt]);Xe.name=Ie,E.UNITS[Ie]=Xe}return delete U.cache,new E(null,te)},E.deleteUnit=function(te){delete E.UNITS[te],delete U.cache},E.PREFIXES=I,E.BASE_DIMENSIONS=ee,E.BASE_UNITS=Q,E.UNIT_SYSTEMS=he,E.UNITS=X,E},{isClass:!0}),_z="unit",QYe=["typed","Unit"],JYe=re(_z,QYe,t=>{var{typed:e,Unit:n}=t;return e(_z,{Unit:function(i){return i.clone()},string:function(i){return n.isValuelessUnit(i)?new n(null,i):n.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,o){return new n(i,o)},"number | BigNumber | Fraction":function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),Oz="sparse",eWe=["typed","SparseMatrix"],tWe=re(Oz,eWe,t=>{var{typed:e,SparseMatrix:n}=t;return e(Oz,{"":function(){return new n([])},string:function(i){return new n([],i)},"Array | Matrix":function(i){return new n(i)},"Array | Matrix, string":function(i,o){return new n(i,o)}})}),Iz="createUnit",nWe=["typed","Unit"],rWe=re(Iz,nWe,t=>{var{typed:e,Unit:n}=t;return e(Iz,{"Object, Object":function(i,o){return n.createUnit(i,o)},Object:function(i){return n.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,o,a){var s={};return s[i]=o,n.createUnit(s,a)},"string, Unit | string | Object":function(i,o){var a={};return a[i]=o,n.createUnit(a,{})},string:function(i){var o={};return o[i]={},n.createUnit(o,{})}})}),Rz="acos",iWe=["typed","config","Complex"],oWe=re(Rz,iWe,t=>{var{typed:e,config:n,Complex:r}=t;return e(Rz,{number:function(o){return o>=-1&&o<=1||n.predictable?Math.acos(o):new r(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()}})}),Bz="acosh",aWe=["typed","config","Complex"],sWe=re(Bz,aWe,t=>{var{typed:e,config:n,Complex:r}=t;return e(Bz,{number:function(o){return o>=1||n.predictable?Eee(o):o<=-1?new r(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new r(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()}})}),Lz="acot",lWe=["typed","BigNumber"],uWe=re(Lz,lWe,t=>{var{typed:e,BigNumber:n}=t;return e(Lz,{number:Cee,Complex:function(i){return i.acot()},BigNumber:function(i){return new n(1).div(i).atan()}})}),Fz="acoth",cWe=["typed","config","Complex","BigNumber"],fWe=re(Fz,cWe,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(Fz,{number:function(a){return a>=1||a<=-1||n.predictable?See(a):new r(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),Pz="acsc",dWe=["typed","config","Complex","BigNumber"],hWe=re(Pz,dWe,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(Pz,{number:function(a){return a<=-1||a>=1||n.predictable?Tee(a):new r(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),$z="acsch",pWe=["typed","BigNumber"],mWe=re($z,pWe,t=>{var{typed:e,BigNumber:n}=t;return e($z,{number:Aee,Complex:function(i){return i.acsch()},BigNumber:function(i){return new n(1).div(i).asinh()}})}),zz="asec",gWe=["typed","config","Complex","BigNumber"],vWe=re(zz,gWe,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(zz,{number:function(a){return a<=-1||a>=1||n.predictable?Nee(a):new r(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),Uz="asech",bWe=["typed","config","Complex","BigNumber"],yWe=re(Uz,bWe,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(Uz,{number:function(a){if(a<=1&&a>=-1||n.predictable){var s=1/a;if(s>0||n.predictable)return Dee(a);var l=Math.sqrt(s*s-1);return new r(Math.log(l-s),Math.PI)}return new r(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),Hz="asin",xWe=["typed","config","Complex"],wWe=re(Hz,xWe,t=>{var{typed:e,config:n,Complex:r}=t;return e(Hz,{number:function(o){return o>=-1&&o<=1||n.predictable?Math.asin(o):new r(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()}})}),EWe="asinh",CWe=["typed"],SWe=re(EWe,CWe,t=>{var{typed:e}=t;return e("asinh",{number:Mee,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),TWe="atan",AWe=["typed"],NWe=re(TWe,AWe,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),Vz="atan2",DWe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],MWe=re(Vz,DWe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:o,concat:a}=t,s=hl({typed:e,equalScalar:r}),l=po({typed:e}),u=qee({typed:e,equalScalar:r}),c=Yi({typed:e,equalScalar:r}),f=di({typed:e,DenseMatrix:o}),d=or({typed:e,matrix:n,concat:a});return e(Vz,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>i.atan2(h,m)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:f}))}),qz="atanh",kWe=["typed","config","Complex"],_We=re(qz,kWe,t=>{var{typed:e,config:n,Complex:r}=t;return e(qz,{number:function(o){return o<=1&&o>=-1||n.predictable?kee(o):new r(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()}})}),m0=re("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),jz="cos",OWe=["typed"],IWe=re(jz,OWe,t=>{var{typed:e}=t,n=m0({typed:e});return e(jz,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),Gz="cosh",RWe=["typed"],BWe=re(Gz,RWe,t=>{var{typed:e}=t;return e(Gz,{number:C$e,"Complex | BigNumber":n=>n.cosh()})}),Yz="cot",LWe=["typed","BigNumber"],FWe=re(Yz,LWe,t=>{var{typed:e,BigNumber:n}=t,r=m0({typed:e});return e(Yz,{number:_ee,Complex:i=>i.cot(),BigNumber:i=>new n(1).div(i.tan())},r)}),Wz="coth",PWe=["typed","BigNumber"],$We=re(Wz,PWe,t=>{var{typed:e,BigNumber:n}=t;return e(Wz,{number:Oee,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),Kz="csc",zWe=["typed","BigNumber"],UWe=re(Kz,zWe,t=>{var{typed:e,BigNumber:n}=t,r=m0({typed:e});return e(Kz,{number:Iee,Complex:i=>i.csc(),BigNumber:i=>new n(1).div(i.sin())},r)}),Xz="csch",HWe=["typed","BigNumber"],VWe=re(Xz,HWe,t=>{var{typed:e,BigNumber:n}=t;return e(Xz,{number:Ree,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),Zz="sec",qWe=["typed","BigNumber"],jWe=re(Zz,qWe,t=>{var{typed:e,BigNumber:n}=t,r=m0({typed:e});return e(Zz,{number:Bee,Complex:i=>i.sec(),BigNumber:i=>new n(1).div(i.cos())},r)}),Qz="sech",GWe=["typed","BigNumber"],YWe=re(Qz,GWe,t=>{var{typed:e,BigNumber:n}=t;return e(Qz,{number:Lee,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),Jz="sin",WWe=["typed"],KWe=re(Jz,WWe,t=>{var{typed:e}=t,n=m0({typed:e});return e(Jz,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),eU="sinh",XWe=["typed"],ZWe=re(eU,XWe,t=>{var{typed:e}=t;return e(eU,{number:Fee,"Complex | BigNumber":n=>n.sinh()})}),tU="tan",QWe=["typed"],JWe=re(tU,QWe,t=>{var{typed:e}=t,n=m0({typed:e});return e(tU,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),eKe="tanh",tKe=["typed"],nKe=re(eKe,tKe,t=>{var{typed:e}=t;return e("tanh",{number:T$e,"Complex | BigNumber":n=>n.tanh()})}),nU="setCartesian",rKe=["typed","size","subset","compareNatural","Index","DenseMatrix"],iKe=re(nU,rKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o,DenseMatrix:a}=t;return e(nU,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(r(n(l),new o(0))!==0&&r(n(u),new o(0))!==0){var f=Nn(Array.isArray(l)?l:l.toArray()).sort(i),d=Nn(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})}),rU="setDifference",oKe=["typed","size","subset","compareNatural","Index","DenseMatrix"],aKe=re(rU,oKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o,DenseMatrix:a}=t;return e(rU,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(n(l),new o(0))===0)c=[];else{if(r(n(u),new o(0))===0)return Nn(l.toArray());var f=Om(Nn(Array.isArray(l)?l:l.toArray()).sort(i)),d=Om(Nn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(i(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(l)&&Array.isArray(u)?Kw(c):new a(Kw(c))}})}),iU="setDistinct",sKe=["typed","size","subset","compareNatural","Index","DenseMatrix"],lKe=re(iU,sKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o,DenseMatrix:a}=t;return e(iU,{"Array | Matrix":function(l){var u;if(r(n(l),new o(0))===0)u=[];else{var c=Nn(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new a(u)}})}),oU="setIntersect",uKe=["typed","size","subset","compareNatural","Index","DenseMatrix"],cKe=re(oU,uKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o,DenseMatrix:a}=t;return e(oU,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(n(l),new o(0))===0||r(n(u),new o(0))===0)c=[];else{var f=Om(Nn(Array.isArray(l)?l:l.toArray()).sort(i)),d=Om(Nn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(i(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(l)&&Array.isArray(u)?Kw(c):new a(Kw(c))}})}),aU="setIsSubset",fKe=["typed","size","subset","compareNatural","Index"],dKe=re(aU,fKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o}=t;return e(aU,{"Array | Matrix, Array | Matrix":function(s,l){if(r(n(s),new o(0))===0)return!0;if(r(n(l),new o(0))===0)return!1;for(var u=Om(Nn(Array.isArray(s)?s:s.toArray()).sort(i)),c=Om(Nn(Array.isArray(l)?l:l.toArray()).sort(i)),f,d=0;d<u.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(u[d].value,c[h].value)===0&&u[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),sU="setMultiplicity",hKe=["typed","size","subset","compareNatural","Index"],pKe=re(sU,hKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o}=t;return e(sU,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,l){if(r(n(l),new o(0))===0)return 0;for(var u=Nn(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],s)===0&&c++;return c}})}),lU="setPowerset",mKe=["typed","size","subset","compareNatural","Index"],gKe=re(lU,mKe,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:o}=t;return e(lU,{"Array | Matrix":function(u){if(r(n(u),new o(0))===0)return[];for(var c=Nn(Array.isArray(u)?u:u.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(a(c,d.toString(2).split("").reverse())),d++;return s(f)}});function a(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function s(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),uU="setSize",vKe=["typed","compareNatural"],bKe=re(uU,vKe,t=>{var{typed:e,compareNatural:n}=t;return e(uU,{"Array | Matrix":function(i){return Array.isArray(i)?Nn(i).length:Nn(i.toArray()).length},"Array | Matrix, boolean":function(i,o){if(o===!1||i.length===0)return Array.isArray(i)?Nn(i).length:Nn(i.toArray()).length;for(var a=Nn(Array.isArray(i)?i:i.toArray()).sort(n),s=1,l=1;l<a.length;l++)n(a[l],a[l-1])!==0&&s++;return s}})}),cU="setSymDifference",yKe=["typed","size","concat","subset","setDifference","Index"],xKe=re(cU,yKe,t=>{var{typed:e,size:n,concat:r,subset:i,setDifference:o,Index:a}=t;return e(cU,{"Array | Matrix, Array | Matrix":function(l,u){if(i(n(l),new a(0))===0)return Nn(u);if(i(n(u),new a(0))===0)return Nn(l);var c=Nn(l),f=Nn(u);return r(o(c,f),o(f,c))}})}),fU="setUnion",wKe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],EKe=re(fU,wKe,t=>{var{typed:e,size:n,concat:r,subset:i,setIntersect:o,setSymDifference:a,Index:s}=t;return e(fU,{"Array | Matrix, Array | Matrix":function(u,c){if(i(n(u),new s(0))===0)return Nn(c);if(i(n(c),new s(0))===0)return Nn(u);var f=Nn(u),d=Nn(c);return r(a(f,d),o(f,d))}})}),dU="add",CKe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],SKe=re(dU,CKe,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:o,SparseMatrix:a,concat:s}=t,l=Vf({typed:e}),u=q5({typed:e,equalScalar:i}),c=Sh({typed:e,DenseMatrix:o}),f=or({typed:e,matrix:n,concat:s});return e(dU,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var b=d(h,m),x=0;x<v.length;x++)b=d(b,v[x]);return b})},f({elop:r,DS:l,SS:u,Ss:c}))}),hU="hypot",TKe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],AKe=re(hU,TKe,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:i,multiplyScalar:o,sqrt:a,smaller:s,isPositive:l}=t;return e(hU,{"... number | BigNumber":u,Array:u,Matrix:c=>u(Nn(c.toArray(),!0))});function u(c){for(var f=0,d=0,h=0;h<c.length;h++){if($u(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=n(c[h]);s(d,m)?(f=o(f,o(i(d,m),i(d,m))),f=r(f,1),d=m):f=r(f,l(m)?o(i(m,d),i(m,d)):m)}return o(d,a(f))}}),pU="norm",NKe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],DKe=re(pU,NKe,t=>{var{typed:e,abs:n,add:r,pow:i,conj:o,sqrt:a,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(pU,{number:Math.abs,Complex:function(D){return D.abs()},BigNumber:function(D){return D.abs()},boolean:function(D){return Math.abs(D)},Array:function(D){return T(f(D),2)},Matrix:function(D){return T(D,2)},"Array, number | BigNumber | string":function(D,M){return T(f(D),M)},"Matrix, number | BigNumber | string":function(D,M){return T(D,M)}});function m(N){var D=0;return N.forEach(function(M){var k=n(M);u(k,D)&&(D=k)},!0),D}function v(N){var D;return N.forEach(function(M){var k=n(M);(!D||c(k,D))&&(D=k)},!0),D||0}function b(N,D){if(D===Number.POSITIVE_INFINITY||D==="inf")return m(N);if(D===Number.NEGATIVE_INFINITY||D==="-inf")return v(N);if(D==="fro")return T(N,2);if(typeof D=="number"&&!isNaN(D)){if(!l(D,0)){var M=0;return N.forEach(function(k){M=r(i(n(k),D),M)},!0),i(M,1/D)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function x(N){var D=0;return N.forEach(function(M,k){D=r(D,s(M,o(M)))}),n(a(D))}function C(N){var D=[],M=0;return N.forEach(function(k,B){var P=B[1],$=r(D[P]||0,n(k));u($,M)&&(M=$),D[P]=$},!0),M}function w(N){var D=N.size();if(D[0]!==D[1])throw new RangeError("Invalid matrix dimensions");var M=d(N),k=s(M,N),B=h(k).values.toArray(),P=B[B.length-1];return n(a(P))}function A(N){var D=[],M=0;return N.forEach(function(k,B){var P=B[0],$=r(D[P]||0,n(k));u($,M)&&(M=$),D[P]=$},!0),M}function E(N,D){if(D===1)return C(N);if(D===Number.POSITIVE_INFINITY||D==="inf")return A(N);if(D==="fro")return x(N);if(D===2)return w(N);throw new Error("Unsupported parameter value "+D)}function T(N,D){var M=N.size();if(M.length===1)return b(N,D);if(M.length===2){if(M[0]&&M[1])return E(N,D);throw new RangeError("Invalid matrix dimensions")}}}),mU="dot",MKe=["typed","addScalar","multiplyScalar","conj","size"],kKe=re(mU,MKe,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:o}=t;return e(mU,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function a(u,c){var f=o(u),d=o(c),h,m;if(f.length===1)h=f[0];else if(f.length===2&&f[1]===1)h=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h!==m)throw new RangeError("Vectors must have equal length ("+h+" != "+m+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function s(u,c){var f=a(u,c),d=Ot(u)?u._data:u,h=Ot(u)?u._datatype||u.getDataType():void 0,m=Ot(c)?c._data:c,v=Ot(c)?c._datatype||c.getDataType():void 0,b=o(u).length===2,x=o(c).length===2,C=n,w=r;if(h&&v&&h===v&&typeof h=="string"&&h!=="mixed"){var A=h;C=e.find(n,[A,A]),w=e.find(r,[A,A])}if(!b&&!x){for(var E=w(i(d[0]),m[0]),T=1;T<f;T++)E=C(E,w(i(d[T]),m[T]));return E}if(!b&&x){for(var N=w(i(d[0]),m[0][0]),D=1;D<f;D++)N=C(N,w(i(d[D]),m[D][0]));return N}if(b&&!x){for(var M=w(i(d[0][0]),m[0]),k=1;k<f;k++)M=C(M,w(i(d[k][0]),m[k]));return M}if(b&&x){for(var B=w(i(d[0][0]),m[0][0]),P=1;P<f;P++)B=C(B,w(i(d[P][0]),m[P][0]));return B}}function l(u,c){a(u,c);for(var f=u._index,d=u._values,h=c._index,m=c._values,v=0,b=n,x=r,C=0,w=0;C<f.length&&w<h.length;){var A=f[C],E=h[w];if(A<E){C++;continue}if(A>E){w++;continue}A===E&&(v=b(v,x(d[C],m[w])),C++,w++)}return v}}),_Ke="trace",OKe=["typed","matrix","add"],IKe=re(_Ke,OKe,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(s){return i(n(s))},SparseMatrix:o,DenseMatrix:i,any:Ht});function i(a){var s=a._size,l=a._data;switch(s.length){case 1:if(s[0]===1)return Ht(l[0]);throw new RangeError("Matrix must be square (size: "+tn(s)+")");case 2:{var u=s[0],c=s[1];if(u===c){for(var f=0,d=0;d<u;d++)f=r(f,l[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+tn(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+tn(s)+")")}}function o(a){var s=a._values,l=a._index,u=a._ptr,c=a._size,f=c[0],d=c[1];if(f===d){var h=0;if(s.length>0)for(var m=0;m<d;m++)for(var v=u[m],b=u[m+1],x=v;x<b;x++){var C=l[x];if(C===m){h=r(h,s[x]);break}if(C>m)break}return h}throw new RangeError("Matrix must be square (size: "+tn(c)+")")}}),gU="index",RKe=["typed","Index"],BKe=re(gU,RKe,t=>{var{typed:e,Index:n}=t;return e(gU,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var o=i.map(function(s){return Gt(s)?s.toNumber():Kn(s)||Ot(s)?s.map(function(l){return Gt(l)?l.toNumber():l}):s}),a=new n;return n.apply(a,o),a}})}),cte=new Set(["end"]),LKe="Node",FKe=["mathWithTransform"],PKe=re(LKe,FKe,t=>{var{mathWithTransform:e}=t;function n(i){for(var o of[...cte])if(i.has(o))throw new Error('Scope contains an illegal symbol, "'+o+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(o){return this.compile().evaluate(o)}compile(){var o=this._compile(e,{}),a={},s=null;function l(u){var c=nm(u);return n(c),o(c,a,s)}return{evaluate:l}}_compile(o,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(o){throw new Error("Cannot run forEach on a Node interface")}map(o){throw new Error("Cannot run map on a Node interface")}_ifNode(o){if(!jn(o))throw new TypeError("Callback function must return a Node");return o}traverse(o){o(this,null,null);function a(s,l){s.forEach(function(u,c,f){l(u,c,f),a(u,l)})}a(this,o)}transform(o){function a(s,l,u){var c=o(s,l,u);return c!==s?c:s.map(a)}return a(this,null,null)}filter(o){var a=[];return this.traverse(function(s,l,u){o(s,l,u)&&a.push(s)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(o){return o.cloneDeep()})}equals(o){return o?this.type===o.type&&Xu(this,o):!1}toString(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toString(o)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toHTML(o)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toTex(o)}_toTex(o){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(o){if(o&&typeof o=="object")switch(typeof o.handler){case"object":case"undefined":return;case"function":return o.handler(this,o);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Oo(t){return t&&t.isIndexError?new fl(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function fte(t){var{subset:e}=t;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Eo(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(o){throw Oo(o)}}}var n2="AccessorNode",$Ke=["subset","Node"],zKe=re(n2,$Ke,t=>{var{subset:e,Node:n}=t,r=fte({subset:e});function i(a){return!(Wu(a)||es(a)||yn(a)||Sf(a)||QC(a)||Ku(a)||Si(a))}class o extends n{constructor(s,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!jn(s))throw new TypeError('Node expected for parameter "object"');if(!c0(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return n2}get isAccessorNode(){return!0}_compile(s,l){var u=this.object._compile(s,l),c=this.index._compile(s,l),f=this.optionalChaining,d=Wu(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(v,b,x){var C=x||{},w=u(v,b,C);if(f&&w==null){C.optionalShortCircuit=!0;return}if(!(d&&C!==null&&C!==void 0&&C.optionalShortCircuit))return Eo(w,h)}}else return function(v,b,x){var C=x||{},w=u(v,b,C);if(f&&w==null){C.optionalShortCircuit=!0;return}if(!(d&&C!==null&&C!==void 0&&C.optionalShortCircuit)){var A=c(v,b,w);return r(w,A)}}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new o(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)),this.optionalChaining)}clone(){return new o(this.object,this.index,this.optionalChaining)}_toString(s){var l=this.object.toString(s);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(s)}_toHTML(s){var l=this.object.toHTML(s);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(s)}_toTex(s){var l=this.object.toTex(s);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(s)}toJSON(){return{mathjs:n2,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(s){return new o(s.object,s.index,s.optionalChaining)}}return oi(o,"name",n2),o},{isClass:!0,isNode:!0}),r2="ArrayNode",UKe=["Node"],HKe=re(r2,UKe,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(jn))throw new TypeError("Array containing Nodes expected")}get type(){return r2}get isArrayNode(){return!0}_compile(i,o){var a=uf(this.items,function(u){return u._compile(i,o)}),s=i.config.matrix!=="Array";if(s){var l=i.matrix;return function(c,f,d){return l(uf(a,function(h){return h(c,f,d)}))}}else return function(c,f,d){return uf(a,function(h){return h(c,f,d)})}}forEach(i){for(var o=0;o<this.items.length;o++){var a=this.items[o];i(a,"items["+o+"]",this)}}map(i){for(var o=[],a=0;a<this.items.length;a++)o[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new n(o)}clone(){return new n(this.items.slice(0))}_toString(i){var o=this.items.map(function(a){return a.toString(i)});return"["+o.join(", ")+"]"}toJSON(){return{mathjs:r2,items:this.items}}static fromJSON(i){return new n(i.items)}_toHTML(i){var o=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function o(a,s){var l=a.some(es)&&!a.every(es),u=s||l,c=u?"&":"\\\\",f=a.map(function(d){return d.items?o(d.items,!s):d.toTex(i)}).join(c);return l||!u||u&&!s?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return o(this.items,!1)}}return oi(n,"name",r2),n},{isClass:!0,isNode:!0});function VKe(t){var{subset:e,matrix:n}=t;return function(i,o,a){try{if(Array.isArray(i)){var s=n(i).subset(o,a).valueOf();return s.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(o,a);if(typeof i=="string")return e(i,o,a);if(typeof i=="object"){if(!o.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Dm(i,o.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Oo(l)}}}var Os=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function i2(t,e){if(!e||e!=="auto")return t;for(var n=t;Ku(n);)n=n.content;return n}function Xn(t,e,n,r){var i=t;e!=="keep"&&(i=t.getContent());for(var o=i.getIdentifier(),a=null,s=0;s<Os.length;s++)if(o in Os[s]){a=s;break}if(o==="OperatorNode:multiply"&&i.implicit&&n!=="show"){var l=i2(i.args[0],e);!(yn(l)&&r&&r.getIdentifier()==="OperatorNode:divide"&&L4(i2(r.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&L4(i2(l.args[0],e))&&yn(i2(l.args[1])))&&(a+=1)}return a}function Mg(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),i=Xn(n,e);if(i===null)return null;var o=Os[i][r];if(mt(o,"associativity")){if(o.associativity==="left")return"left";if(o.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+o.associativity+"'.")}return null}function F3(t,e,n){var r=n!=="keep"?t.getContent():t,i=n!=="keep"?t.getContent():e,o=r.getIdentifier(),a=i.getIdentifier(),s=Xn(r,n);if(s===null)return null;var l=Os[s][o];if(mt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function qKe(t){var e="OperatorNode:"+t;for(var n of Os)if(e in n)return n[e].op;return null}var o2="AssignmentNode",jKe=["subset","?matrix","Node"],GKe=re(o2,jKe,t=>{var{subset:e,matrix:n,Node:r}=t,i=fte({subset:e}),o=VKe({subset:e,matrix:n});function a(l,u,c){u||(u="keep");var f=Xn(l,u,c),d=Xn(l.value,u,c);return u==="all"||d!==null&&d<=f}class s extends r{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!Si(u)&&!Wu(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Si(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!c0(this.index))throw new TypeError('IndexNode expected as "index"');if(!jn(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return o2}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,h=this.value._compile(u,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(A,E,T){var N=f(A,E,T),D=h(A,E,T);return Dm(N,v,D),D}}else{if(Si(this.object))return function(A,E,T){var N=f(A,E,T),D=h(A,E,T),M=d(A,E,N);return A.set(m,o(N,M,D)),D};var b=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var x=this.object.index.getObjectProperty();return function(A,E,T){var N=b(A,E,T),D=Eo(N,x),M=d(A,E,D),k=h(A,E,T);return Dm(N,x,o(D,M,k)),k}}else{var C=this.object.index._compile(u,c);return function(A,E,T){var N=b(A,E,T),D=C(A,E,N),M=i(N,D),k=d(A,E,M),B=h(A,E,T);return o(N,D,o(M,k,B)),B}}}else{if(!Si(this.object))throw new TypeError("SymbolNode expected as object");return function(A,E,T){var N=h(A,E,T);return A.set(m,N),N}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new s(c,f,d)}clone(){return new s(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",d=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:o2,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new s(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return oi(s,"name",o2),s},{isClass:!0,isNode:!0}),a2="BlockNode",YKe=["ResultSet","Node"],WKe=re(a2,YKe,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(o){if(super(),!Array.isArray(o))throw new Error("Array expected");this.blocks=o.map(function(a){var s=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!jn(s))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:l}})}get type(){return a2}get isBlockNode(){return!0}_compile(o,a){var s=uf(this.blocks,function(l){return{evaluate:l.node._compile(o,a),visible:l.visible}});return function(u,c,f){var d=[];return GJ(s,function(m){var v=m.evaluate(u,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(o){for(var a=0;a<this.blocks.length;a++)o(this.blocks[a].node,"blocks["+a+"].node",this)}map(o){for(var a=[],s=0;s<this.blocks.length;s++){var l=this.blocks[s],u=this._ifNode(o(l.node,"blocks["+s+"].node",this));a[s]={node:u,visible:l.visible}}return new r(a)}clone(){var o=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new r(o)}_toString(o){return this.blocks.map(function(a){return a.node.toString(o)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:a2,blocks:this.blocks}}static fromJSON(o){return new r(o.blocks)}_toHTML(o){return this.blocks.map(function(a){return a.node.toHTML(o)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(o){return this.blocks.map(function(a){return a.node.toTex(o)+(a.visible?"":";")}).join(`\\;\\;
`)}}return oi(r,"name",a2),r},{isClass:!0,isNode:!0}),s2="ConditionalNode",KKe=["Node"],XKe=re(s2,KKe,t=>{var{Node:e}=t;function n(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Gt(i))return!i.isZero();if($u(i))return!!(i.re||i.im);if(xa(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Zn(i)+'"')}class r extends e{constructor(o,a,s){if(super(),!jn(o))throw new TypeError("Parameter condition must be a Node");if(!jn(a))throw new TypeError("Parameter trueExpr must be a Node");if(!jn(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=o,this.trueExpr=a,this.falseExpr=s}get type(){return s2}get isConditionalNode(){return!0}_compile(o,a){var s=this.condition._compile(o,a),l=this.trueExpr._compile(o,a),u=this.falseExpr._compile(o,a);return function(f,d,h){return n(s(f,d,h))?l(f,d,h):u(f,d,h)}}forEach(o){o(this.condition,"condition",this),o(this.trueExpr,"trueExpr",this),o(this.falseExpr,"falseExpr",this)}map(o){return new r(this._ifNode(o(this.condition,"condition",this)),this._ifNode(o(this.trueExpr,"trueExpr",this)),this._ifNode(o(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=Xn(this,a,o&&o.implicit),l=this.condition.toString(o),u=Xn(this.condition,a,o&&o.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l="("+l+")");var c=this.trueExpr.toString(o),f=Xn(this.trueExpr,a,o&&o.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c="("+c+")");var d=this.falseExpr.toString(o),h=Xn(this.falseExpr,a,o&&o.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:s2,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(o){return new r(o.condition,o.trueExpr,o.falseExpr)}_toHTML(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=Xn(this,a,o&&o.implicit),l=this.condition.toHTML(o),u=Xn(this.condition,a,o&&o.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(o),f=Xn(this.trueExpr,a,o&&o.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(o),h=Xn(this.falseExpr,a,o&&o.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(o){return"\\begin{cases} {"+this.trueExpr.toTex(o)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(o)+"}\\\\{"+this.falseExpr.toTex(o)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return oi(r,"name",s2),r},{isClass:!0,isNode:!0}),P3,vU;function ZKe(){if(vU)return P3;vU=1;var t=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},r=function(o,a){return t({},o,a)};return P3=function(i){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.preserveFormatting,s=a===void 0?!1:a,l=o.escapeMapFn,u=l===void 0?r:l,c=String(i),f="",d=u(t({},e),s?t({},n):{}),h=Object.keys(d),m=function(){var b=!1;h.forEach(function(x,C){b||c.length>=x.length&&c.slice(0,x.length)===x&&(f+=d[h[C]],c=c.slice(x.length,c.length),b=!0)}),b||(f+=c.slice(0,1),c=c.slice(1,c.length))};c;)m();return f},P3}var QKe=ZKe();const JKe=Qs(QKe);var eM={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},An={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},bU={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(An.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(An.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(An.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(An.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(An.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(An.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(An.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(An.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(An.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(An.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(An.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(An.bitAnd,"${args[1]}\\right)")},bitNot:{1:An.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(An.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(An.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(An.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(An.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(An.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(An.and,"${args[1]}\\right)")},not:{1:An.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(An.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(An.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(An.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(An.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(An.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(An.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(An.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(An.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(An.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(An.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(An.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(An.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(An.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(eM.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},eXe="\\mathrm{${name}}\\left(${args}\\right)",yU={deg:"^\\circ"};function tM(t){return JKe(t,{preserveFormatting:!0})}function dte(t,e){return e=typeof e>"u"?!1:e,e?mt(yU,t)?yU[t]:"\\mathrm{"+tM(t)+"}":mt(eM,t)?eM[t]:tM(t)}var l2="ConstantNode",tXe=["Node","isBounded"],nXe=re(l2,tXe,t=>{var{Node:e,isBounded:n}=t;class r extends e{constructor(o){super(),this.value=o}get type(){return l2}get isConstantNode(){return!0}_compile(o,a){var s=this.value;return function(){return s}}forEach(o){}map(o){return this.clone()}clone(){return new r(this.value)}_toString(o){return tn(this.value,o)}_toHTML(o){var a=this._toString(o);switch(Zn(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:l2,value:this.value}}static fromJSON(o){return new r(o.value)}_toTex(o){var a=this._toString(o),s=Zn(this.value);switch(s){case"string":return"\\mathtt{"+tM(a)+"}";case"number":case"BigNumber":{if(!n(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return oi(r,"name",l2),r},{isClass:!0,isNode:!0}),u2="FunctionAssignmentNode",rXe=["typed","Node"],iXe=re(u2,rXe,t=>{var{typed:e,Node:n}=t;function r(o,a,s){var l=Xn(o,a,s),u=Xn(o.expr,a,s);return a==="all"||u!==null&&u<=l}class i extends n{constructor(a,s,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!jn(l))throw new TypeError('Node expected for parameter "expr"');if(cte.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of s){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=a,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return u2}get isFunctionAssignmentNode(){return!0}_compile(a,s){var l=Object.create(s);GJ(this.params,function(v){l[v]=!0});var u=this.expr,c=u._compile(a,l),f=this.name,d=this.params,h=pP(this.types,","),m=f+"("+pP(this.params,", ")+")";return function(b,x,C){var w={};w[h]=function(){for(var E=Object.create(x),T=0;T<d.length;T++)E[d[T]]=arguments[T];return c(b,E,C)};var A=e(f,w);return A.syntax=m,A.expr=u.toString(),b.set(f,A),A}}forEach(a){a(this.expr,"expr",this)}map(a){var s=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return r(this,s,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:u2,name:this.name,params:this.params.map(function(s,l){return{name:s,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ss(this.params[u])+"</span>");var c=this.expr.toHTML(a);return r(this,s,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ss(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return r(this,s,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(dte).join(",")+"\\right)="+l}}return oi(i,"name",u2),i},{isClass:!0,isNode:!0}),c2="IndexNode",oXe=["Node","size"],aXe=re(c2,oXe,t=>{var{Node:e,size:n}=t;class r extends e{constructor(o,a){if(super(),this.dimensions=o,this.dotNotation=a||!1,!Array.isArray(o)||!o.every(jn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return c2}get isIndexNode(){return!0}_compile(o,a){var s=uf(this.dimensions,function(u,c){var f=u.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(a);d.end=!0;var h=u._compile(o,d);return function(v,b,x){if(!Ot(x)&&!Kn(x)&&!Pr(x))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Zn(x));var C=n(x),w=Object.create(b);return w.end=C[c],h(v,w,x)}}else return u._compile(o,a)}),l=Eo(o,"index");return function(c,f,d){var h=uf(s,function(m){return m(c,f,d)});return l(...h)}}forEach(o){for(var a=0;a<this.dimensions.length;a++)o(this.dimensions[a],"dimensions["+a+"]",this)}map(o){for(var a=[],s=0;s<this.dimensions.length;s++)a[s]=this._ifNode(o(this.dimensions[s],"dimensions["+s+"]",this));return new r(a,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&yn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(o){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:c2,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(o){return new r(o.dimensions,o.dotNotation)}_toHTML(o){for(var a=[],s=0;s<this.dimensions.length;s++)a[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ss(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(o){var a=this.dimensions.map(function(s){return s.toTex(o)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return oi(r,"name",c2),r},{isClass:!0,isNode:!0}),f2="ObjectNode",sXe=["Node"],lXe=re(f2,sXe,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(o){return jn(i[o])})))throw new TypeError("Object containing Nodes expected")}get type(){return f2}get isObjectNode(){return!0}_compile(i,o){var a={};for(var s in this.properties)if(mt(this.properties,s)){var l=Up(s),u=JSON.parse(l),c=Eo(this.properties,s);a[u]=c._compile(i,o)}return function(d,h,m){var v={};for(var b in a)mt(a,b)&&(v[b]=a[b](d,h,m));return v}}forEach(i){for(var o in this.properties)mt(this.properties,o)&&i(this.properties[o],"properties["+Up(o)+"]",this)}map(i){var o={};for(var a in this.properties)mt(this.properties,a)&&(o[a]=this._ifNode(i(this.properties[a],"properties["+Up(a)+"]",this)));return new n(o)}clone(){var i={};for(var o in this.properties)mt(this.properties,o)&&(i[o]=this.properties[o]);return new n(i)}_toString(i){var o=[];for(var a in this.properties)mt(this.properties,a)&&o.push(Up(a)+": "+this.properties[a].toString(i));return"{"+o.join(", ")+"}"}toJSON(){return{mathjs:f2,properties:this.properties}}static fromJSON(i){return new n(i.properties)}_toHTML(i){var o=[];for(var a in this.properties)mt(this.properties,a)&&o.push('<span class="math-symbol math-property">'+ss(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var o=[];for(var a in this.properties)mt(this.properties,a)&&o.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+o.join(`
`)+"\\end{array}\\right\\}";return s}}return oi(n,"name",f2),n},{isClass:!0,isNode:!0});function zg(t,e){return new vJ(t,new KC(e),new Set(Object.keys(e)))}var d2="OperatorNode",uXe=["Node"],cXe=re(d2,uXe,t=>{var{Node:e}=t;function n(o,a){var s=o;if(a==="auto")for(;Ku(s);)s=s.content;return yn(s)?!0:qr(s)?n(s.args[0],a):!1}function r(o,a,s,l,u){var c=Xn(o,a,s),f=Mg(o,a);if(a==="all"||l.length>2&&o.getIdentifier()!=="OperatorNode:add"&&o.getIdentifier()!=="OperatorNode:multiply")return l.map(function(k){switch(k.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var h=Xn(l[0],a,s,o);if(u&&h!==null){var m,v;if(a==="keep"?(m=l[0].getIdentifier(),v=o.getIdentifier()):(m=l[0].getContent().getIdentifier(),v=o.getContent().getIdentifier()),Os[c][v].latexLeftParens===!1){d=[!1];break}if(Os[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var b,x=Xn(l[0],a,s,o),C=F3(o,l[0],a);x===null?b=!1:x===c&&f==="right"&&!C||x<c?b=!0:b=!1;var w,A=Xn(l[1],a,s,o),E=F3(o,l[1],a);if(A===null?w=!1:A===c&&f==="left"&&!E||A<c?w=!0:w=!1,u){var T,N,D;a==="keep"?(T=o.getIdentifier(),N=o.args[0].getIdentifier(),D=o.args[1].getIdentifier()):(T=o.getContent().getIdentifier(),N=o.args[0].getContent().getIdentifier(),D=o.args[1].getContent().getIdentifier()),x!==null&&(Os[c][T].latexLeftParens===!1&&(b=!1),Os[x][N].latexParens===!1&&(b=!1)),A!==null&&(Os[c][T].latexRightParens===!1&&(w=!1),Os[A][D].latexParens===!1&&(w=!1))}d=[b,w]}break;default:(o.getIdentifier()==="OperatorNode:add"||o.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(k){var B=Xn(k,a,s,o),P=F3(o,k,a),$=Mg(k,a);return B===null?!1:c===B&&f===$&&!P?!0:B<c}));break}if(l.length>=2&&o.getIdentifier()==="OperatorNode:multiply"&&o.implicit&&a!=="all"&&s==="hide")for(var M=1;M<d.length;++M)n(l[M],a)&&!d[M-1]&&(a!=="keep"||!Ku(l[M-1]))&&(d[M]=!0);return d}class i extends e{constructor(a,s,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(jn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=s,this.args=l||[]}get type(){return d2}get isOperatorNode(){return!0}_compile(a,s){if(typeof this.fn!="string"||!L5(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=Eo(a,this.fn),u=uf(this.args,function(m){return m._compile(a,s)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(v,b,x){return l(c,a,zg(v,b))}}else if(u.length===1){var f=u[0];return function(v,b,x){return l(f(v,b,x))}}else if(u.length===2){var d=u[0],h=u[1];return function(v,b,x){return l(d(v,b,x),h(v,b,x))}}else return function(v,b,x){return l.apply(null,uf(u,function(C){return C(v,b,x)}))}}forEach(a){for(var s=0;s<this.args.length;s++)a(this.args[s],"args["+s+"]",this)}map(a){for(var s=[],l=0;l<this.args.length;l++)s[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,s,l,u,!1);if(u.length===1){var f=Mg(this,s),d=u[0].toString(a);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(u.length===2){var m=u[0].toString(a),v=u[1].toString(a);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(x,C){return x=x.toString(a),c[C]&&(x="("+x+")"),x});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?b.join(" "):b.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:d2,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,s,l,u,!1);if(u.length===1){var f=Mg(this,s),d=u[0].toHTML(a);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ss(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ss(this.op)+"</span>"}else if(u.length===2){var h=u[0].toHTML(a),m=u[1].toHTML(a);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ss(this.op)+"</span>"+m}else{var v=u.map(function(b,x){return b=b.toHTML(a),c[x]&&(b='<span class="math-parenthesis math-round-parenthesis">(</span>'+b+'<span class="math-parenthesis math-round-parenthesis">)</span>'),b});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ss(this.op)+"</span>"):'<span class="math-function">'+ss(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=r(this,s,l,u,!0),f=An[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var d=Mg(this,s),h=u[0].toTex(a);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(u.length===2){var m=u[0],v=m.toTex(a);c[0]&&(v="\\left(".concat(v,"\\right)"));var b=u[1],x=b.toTex(a);c[1]&&(x="\\left(".concat(x,"\\right)"));var C;switch(s==="keep"?C=m.getIdentifier():C=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+x+"}";case"OperatorNode:pow":switch(v="{"+v+"}",x="{"+x+"}",C){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+x}return v+f+x}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var w=u.map(function(A,E){return A=A.toTex(a),c[E]&&(A="\\left(".concat(A,"\\right)")),A});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?w.join("~"):w.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(A){return A.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return oi(i,"name",d2),i},{isClass:!0,isNode:!0}),h2="ParenthesisNode",fXe=["Node"],dXe=re(h2,fXe,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),!jn(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return h2}get isParenthesisNode(){return!0}_compile(i,o){return this.content._compile(i,o)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var o=i(this.content,"content",this);return new n(o)}clone(){return new n(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:h2,content:this.content}}static fromJSON(i){return new n(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return oi(n,"name",h2),n},{isClass:!0,isNode:!0}),p2="RangeNode",hXe=["Node"],pXe=re(p2,hXe,t=>{var{Node:e}=t;function n(i,o,a){var s=Xn(i,o,a),l={},u=Xn(i.start,o,a);if(l.start=u!==null&&u<=s||o==="all",i.step){var c=Xn(i.step,o,a);l.step=c!==null&&c<=s||o==="all"}var f=Xn(i.end,o,a);return l.end=f!==null&&f<=s||o==="all",l}class r extends e{constructor(o,a,s){if(super(),!jn(o))throw new TypeError("Node expected");if(!jn(a))throw new TypeError("Node expected");if(s&&!jn(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=o,this.end=a,this.step=s||null}get type(){return p2}get isRangeNode(){return!0}needsEnd(){var o=this.filter(function(a){return Si(a)&&a.name==="end"});return o.length>0}_compile(o,a){var s=o.range,l=this.start._compile(o,a),u=this.end._compile(o,a);if(this.step){var c=this.step._compile(o,a);return function(d,h,m){return s(l(d,h,m),u(d,h,m),c(d,h,m))}}else return function(d,h,m){return s(l(d,h,m),u(d,h,m))}}forEach(o){o(this.start,"start",this),o(this.end,"end",this),this.step&&o(this.step,"step",this)}map(o){return new r(this._ifNode(o(this.start,"start",this)),this._ifNode(o(this.end,"end",this)),this.step&&this._ifNode(o(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=n(this,a,o&&o.implicit),l,u=this.start.toString(o);if(s.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(o);s.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(o);return s.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:p2,start:this.start,end:this.end,step:this.step}}static fromJSON(o){return new r(o.start,o.end,o.step)}_toHTML(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=n(this,a,o&&o.implicit),l,u=this.start.toHTML(o);if(s.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(o);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(o);return s.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=n(this,a,o&&o.implicit),l=this.start.toTex(o);if(s.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(o);s.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(o);return s.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return oi(r,"name",p2),r},{isClass:!0,isNode:!0}),m2="RelationalNode",mXe=["Node"],gXe=re(m2,mXe,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(o,a){if(super(),!Array.isArray(o))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(o.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=o,this.params=a}get type(){return m2}get isRelationalNode(){return!0}_compile(o,a){var s=this,l=this.params.map(u=>u._compile(o,a));return function(c,f,d){for(var h,m=l[0](c,f,d),v=0;v<s.conditionals.length;v++){h=m,m=l[v+1](c,f,d);var b=Eo(o,s.conditionals[v]);if(!b(h,m))return!1}return!0}}forEach(o){this.params.forEach((a,s)=>o(a,"params["+s+"]",this),this)}map(o){return new r(this.conditionals.slice(),this.params.map((a,s)=>this._ifNode(o(a,"params["+s+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=Xn(this,a,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,a,o&&o.implicit);return a==="all"||h!==null&&h<=s?"("+f.toString(o)+")":f.toString(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+n[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:m2,conditionals:this.conditionals,params:this.params}}static fromJSON(o){return new r(o.conditionals,o.params)}_toHTML(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=Xn(this,a,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,a,o&&o.implicit);return a==="all"||h!==null&&h<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(o)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ss(n[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=Xn(this,a,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,a,o&&o.implicit);return a==="all"||h!==null&&h<=s?"\\left("+f.toTex(o)+"\right)":f.toTex(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=An[this.conditionals[c]]+l[c+1];return u}}return oi(r,"name",m2),r},{isClass:!0,isNode:!0}),vXe="SymbolNode",bXe=["math","?Unit","Node"],yXe=re(vXe,bXe,t=>{var{math:e,Unit:n,Node:r}=t;function i(a){return n?n.isValuelessUnit(a):!1}class o extends r{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,l){var u=this.name;if(l[u]===!0)return function(f,d,h){return Eo(d,u)};if(u in s)return function(f,d,h){return f.has(u)?f.get(u):Eo(s,u)};var c=i(u);return function(f,d,h){return f.has(u)?f.get(u):c?new n(null,u):o.onUndefinedSymbol(u)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new o(this.name)}_toString(s){return this.name}_toHTML(s){var l=ss(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new o(s.name)}_toTex(s){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=dte(this.name,l);return u[0]==="\\"?u:" "+u}}return o},{isClass:!0,isNode:!0}),g2="FunctionNode",xXe=["math","Node","SymbolNode"],wXe=re(g2,xXe,t=>{var e,{math:n,Node:r,SymbolNode:i}=t,o=l=>tn(l,{truncate:78});function a(l,u,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(l))!==null;)if(f+=l.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=u[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(jn(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(b,x){if(jn(b))return b.toTex(c);throw new TypeError("Template: "+m[1]+"["+x+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(jn(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=l.slice(h),f}class s extends r{constructor(u,c,f){if(super(),typeof u=="string"&&(u=new i(u)),!jn(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(jn))throw new TypeError('Array containing Nodes expected for parameter "args"');var d=typeof f;if(!(d==="undefined"||d==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!f}get name(){return this.fn.name||""}get type(){return g2}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(M=>M._compile(u,c)),d=this.optional||Wu(this.fn)&&this.fn.optionalChaining;if(Si(this.fn)){var h=this.fn.name;if(c[h]){var C=this.args;return function(k,B,P){var $=Eo(B,h);if(!(d&&$===void 0)){if(typeof $!="function")throw new TypeError("Argument '".concat(h,"' was not a function; received: ").concat(o($)));if($.rawArgs)return $(C,u,zg(k,B));var z=f.map(j=>j(k,B,P));return $.apply($,z)}}}else{var m=h in u?Eo(u,h):void 0,v=typeof m=="function"&&m.rawArgs===!0,b=M=>{var k;if(M.has(h))k=M.get(h);else if(h in u)k=Eo(u,h);else if(d)k=void 0;else return s.onUndefinedFunction(h);if(typeof k=="function"||d&&k===void 0)return k;throw new TypeError("'".concat(h,`' is not a function; its value is:
  `).concat(o(k)))};if(v){var x=this.args;return function(k,B,P){var $=b(k);if($.rawArgs===!0)return $(x,u,zg(k,B));var z=f.map(j=>j(k,B,P));return $(...z)}}else switch(f.length){case 0:return function(k,B,P){var $=b(k);if(!(d&&$===void 0))return $()};case 1:return function(k,B,P){var $=b(k);if(!(d&&$===void 0)){var z=f[0];return $(z(k,B,P))}};case 2:return function(k,B,P){var $=b(k);if(!(d&&$===void 0)){var z=f[0],j=f[1];return $(z(k,B,P),j(k,B,P))}};default:return function(k,B,P){var $=b(k);if(!(d&&$===void 0)){var z=f.map(j=>j(k,B,P));return $(...z)}}}}}else if(Wu(this.fn)&&c0(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(u,c),A=this.fn.index.getObjectProperty(),E=this.args;return function(k,B,P){var $=w(k,B,P);if(!(d&&($==null||$[A]===void 0))){var z=HPe($,A);if(z!=null&&z.rawArgs)return z(E,u,zg(k,B));var j=f.map(L=>L(k,B,P));return z.apply($,j)}}}else{var T=this.fn.toString(),N=this.fn._compile(u,c),D=this.args;return function(k,B,P){var $=N(k,B,P);if(!(d&&$===void 0)){if(typeof $!="function")throw new TypeError("Expression '".concat(T,"' did not evaluate to a function; value is:")+`
  `.concat(o($)));if($.rawArgs)return $(D,u,zg(k,B));var z=f.map(j=>j(k,B,P));return $.apply($,z)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new s(c,f)}clone(){return new s(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&mt(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),f=Ov(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:g2,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+ss(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&mt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(h){return h.toTex(u)}),f;bU[this.name]&&(f=bU[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,u);break;case"string":d=a(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,u);break;case"string":d=a(f[c.length],this,u);break}}return typeof d<"u"?d:a(eXe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=s,oi(s,"name",g2),oi(s,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),oi(s,"fromJSON",function(l){return new e(l.fn,l.args)}),s},{isClass:!0,isNode:!0}),xU="parse",EXe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],CXe=re(xU,EXe,t=>{var{typed:e,numeric:n,config:r,AccessorNode:i,ArrayNode:o,AssignmentNode:a,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:b,RelationalNode:x,SymbolNode:C}=t,w=e(xU,{string:function(be){return W(be,{})},"Array | Matrix":function(be){return A(be,{})},"string, Object":function(be,Ie){var Xe=Ie.nodes!==void 0?Ie.nodes:{};return W(be,Xe)},"Array | Matrix, Object":A});function A(V){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=be.nodes!==void 0?be.nodes:{};return Yt(V,function(Xe){if(typeof Xe!="string")throw new TypeError("String expected");return W(Xe,Ie)})}var E={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},T={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},N={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},D={true:!0,false:!1,null:null,undefined:void 0},M=["NaN","Infinity"],k={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function B(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:E.NULL,nestingLevel:0,conditionalLevel:null}}function P(V,be){return V.expression.substr(V.index,be)}function $(V){return P(V,1)}function z(V){V.index++}function j(V){return V.expression.charAt(V.index-1)}function L(V){return V.expression.charAt(V.index+1)}function U(V){for(V.tokenType=E.NULL,V.token="",V.comment="";;){if($(V)==="#")for(;$(V)!==`
`&&$(V)!=="";)V.comment+=$(V),z(V);if(w.isWhitespace($(V),V.nestingLevel))z(V);else break}if($(V)===""){V.tokenType=E.DELIMITER;return}if($(V)===`
`&&!V.nestingLevel){V.tokenType=E.DELIMITER,V.token=$(V),z(V);return}var be=$(V),Ie=P(V,2),Xe=P(V,3);if(Xe.length===3&&T[Xe]){V.tokenType=E.DELIMITER,V.token=Xe,z(V),z(V),z(V);return}if(Ie.length===2&&T[Ie]&&(Ie!=="?."||!w.isDigit(V.expression.charAt(V.index+2)))){V.tokenType=E.DELIMITER,V.token=Ie,z(V),z(V);return}if(T[be]){V.tokenType=E.DELIMITER,V.token=be,z(V);return}if(w.isDigitDot(be)){V.tokenType=E.NUMBER;var gt=P(V,2);if(gt==="0b"||gt==="0o"||gt==="0x"){for(V.token+=$(V),z(V),V.token+=$(V),z(V);w.isAlpha($(V),j(V),L(V))||w.isDigit($(V));)V.token+=$(V),z(V);if($(V)===".")for(V.token+=".",z(V);w.isAlpha($(V),j(V),L(V))||w.isDigit($(V));)V.token+=$(V),z(V);else if($(V)==="i")for(V.token+="i",z(V);w.isDigit($(V));)V.token+=$(V),z(V);return}if($(V)==="."){if(V.token+=$(V),z(V),!w.isDigit($(V))){V.tokenType=E.DELIMITER;return}}else{for(;w.isDigit($(V));)V.token+=$(V),z(V);w.isDecimalMark($(V),L(V))&&(V.token+=$(V),z(V))}for(;w.isDigit($(V));)V.token+=$(V),z(V);if($(V)==="E"||$(V)==="e"){if(w.isDigit(L(V))||L(V)==="-"||L(V)==="+"){if(V.token+=$(V),z(V),($(V)==="+"||$(V)==="-")&&(V.token+=$(V),z(V)),!w.isDigit($(V)))throw pt(V,'Digit expected, got "'+$(V)+'"');for(;w.isDigit($(V));)V.token+=$(V),z(V);if(w.isDecimalMark($(V),L(V)))throw pt(V,'Digit expected, got "'+$(V)+'"')}else if(w.isDecimalMark(L(V),V.expression.charAt(V.index+2)))throw z(V),pt(V,'Digit expected, got "'+$(V)+'"')}return}if(w.isAlpha($(V),j(V),L(V))){for(;w.isAlpha($(V),j(V),L(V))||w.isDigit($(V));)V.token+=$(V),z(V);mt(N,V.token)?V.tokenType=E.DELIMITER:V.tokenType=E.SYMBOL;return}for(V.tokenType=E.UNKNOWN;$(V)!=="";)V.token+=$(V),z(V);throw pt(V,'Syntax error in part "'+V.token+'"')}function G(V){do U(V);while(V.token===`
`)}function Z(V){V.nestingLevel++}function H(V){V.nestingLevel--}w.isAlpha=function(be,Ie,Xe){return w.isValidLatinOrGreek(be)||w.isValidMathSymbol(be,Xe)||w.isValidMathSymbol(Ie,be)},w.isValidLatinOrGreek=function(be){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(be)},w.isValidMathSymbol=function(be,Ie){return/^[\uD835]$/.test(be)&&/^[\uDC00-\uDFFF]$/.test(Ie)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Ie)},w.isWhitespace=function(be,Ie){return be===" "||be==="	"||be===""||be===`
`&&Ie>0},w.isDecimalMark=function(be,Ie){return be==="."&&Ie!=="/"&&Ie!=="*"&&Ie!=="^"},w.isDigitDot=function(be){return be>="0"&&be<="9"||be==="."},w.isDigit=function(be){return be>="0"&&be<="9"};function W(V,be){var Ie=B();jr(Ie,{expression:V,extraNodes:be}),U(Ie);var Xe=K(Ie);if(Ie.token!=="")throw Ie.tokenType===E.DELIMITER?_n(Ie,"Unexpected operator "+Ie.token):pt(Ie,'Unexpected part "'+Ie.token+'"');return Xe}function K(V){var be,Ie=[],Xe;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(be=I(V),V.comment&&(be.comment=V.comment));V.token===`
`||V.token===";";)Ie.length===0&&be&&(Xe=V.token!==";",Ie.push({node:be,visible:Xe})),U(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(be=I(V),V.comment&&(be.comment=V.comment),Xe=V.token!==";",Ie.push({node:be,visible:Xe}));return Ie.length>0?new s(Ie):(be||(be=new u(void 0),V.comment&&(be.comment=V.comment)),be)}function I(V){var be,Ie,Xe,gt,At=ee(V);if(V.token==="="){if(Si(At))return be=At.name,G(V),Xe=I(V),new a(new C(be),Xe);if(Wu(At)){if(At.optionalChaining)throw pt(V,"Cannot assign to optional chain");return G(V),Xe=I(V),new a(At.object,At.index,Xe)}else if(Sf(At)&&Si(At.fn)&&(gt=!0,Ie=[],be=At.name,At.args.forEach(function(Xr,La){Si(Xr)?Ie[La]=Xr.name:gt=!1}),gt))return G(V),Xe=I(V),new c(be,Ie,Xe);throw pt(V,"Invalid left hand side of assignment operator =")}return At}function ee(V){for(var be=Q(V);V.token==="?";){var Ie=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,G(V);var Xe=be,gt=I(V);if(V.token!==":")throw pt(V,"False part of conditional expression expected");V.conditionalLevel=null,G(V);var At=I(V);be=new l(Xe,gt,At),V.conditionalLevel=Ie}return be}function Q(V){for(var be=ce(V);V.token==="or";)G(V),be=new m("or","or",[be,ce(V)]);return be}function ce(V){for(var be=ve(V);V.token==="xor";)G(V),be=new m("xor","xor",[be,ve(V)]);return be}function ve(V){for(var be=ie(V);V.token==="and";)G(V),be=new m("and","and",[be,ie(V)]);return be}function ie(V){for(var be=X(V);V.token==="|";)G(V),be=new m("|","bitOr",[be,X(V)]);return be}function X(V){for(var be=le(V);V.token==="^|";)G(V),be=new m("^|","bitXor",[be,le(V)]);return be}function le(V){for(var be=Ce(V);V.token==="&";)G(V),be=new m("&","bitAnd",[be,Ce(V)]);return be}function Ce(V){for(var be=[he(V)],Ie=[],Xe={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};mt(Xe,V.token);){var gt={name:V.token,fn:Xe[V.token]};Ie.push(gt),G(V),be.push(he(V))}return be.length===1?be[0]:be.length===2?new m(Ie[0].name,Ie[0].fn,be):new x(Ie.map(At=>At.fn),be)}function he(V){var be,Ie,Xe,gt;be=Te(V);for(var At={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};mt(At,V.token);)Ie=V.token,Xe=At[Ie],G(V),gt=[be,Te(V)],be=new m(Ie,Xe,gt);return be}function Te(V){var be,Ie,Xe,gt;be=Ae(V);for(var At={to:"to",in:"to"};mt(At,V.token);)Ie=V.token,Xe=At[Ie],G(V),Ie==="in"&&"])},;".includes(V.token)?be=new m("*","multiply",[be,new C("in")],!0):(gt=[be,Ae(V)],be=new m(Ie,Xe,gt));return be}function Ae(V){var be,Ie=[];if(V.token===":"?be=new u(1):be=qe(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(Ie.push(be);V.token===":"&&Ie.length<3;)G(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?Ie.push(new C("end")):Ie.push(qe(V));Ie.length===3?be=new b(Ie[0],Ie[2],Ie[1]):be=new b(Ie[0],Ie[1])}return be}function qe(V){var be,Ie,Xe,gt;be=rt(V);for(var At={"+":"add","-":"subtract"};mt(At,V.token);){Ie=V.token,Xe=At[Ie],G(V);var Xr=rt(V);Xr.isPercentage?gt=[be,new m("*","multiply",[be,Xr])]:gt=[be,Xr],be=new m(Ie,Xe,gt)}return be}function rt(V){var be,Ie,Xe,gt;be=lt(V),Ie=be;for(var At={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};mt(At,V.token);)Xe=V.token,gt=At[Xe],G(V),Ie=lt(V),be=new m(Xe,gt,[be,Ie]);return be}function lt(V){var be,Ie;for(be=Qe(V),Ie=be;V.tokenType===E.SYMBOL||V.token==="in"&&yn(be)||V.token==="in"&&qr(be)&&be.fn==="unaryMinus"&&yn(be.args[0])||V.tokenType===E.NUMBER&&!yn(Ie)&&(!qr(Ie)||Ie.op==="!")||V.token==="(";)Ie=Qe(V),be=new m("*","multiply",[be,Ie],!0);return be}function Qe(V){for(var be=st(V),Ie=be,Xe=[];V.token==="/"&&L4(Ie);)if(Xe.push(jr({},V)),G(V),V.tokenType===E.NUMBER)if(Xe.push(jr({},V)),G(V),V.tokenType===E.SYMBOL||V.token==="("||V.token==="in")jr(V,Xe.pop()),Xe.pop(),Ie=st(V),be=new m("/","divide",[be,Ie]);else{Xe.pop(),jr(V,Xe.pop());break}else{jr(V,Xe.pop());break}return be}function st(V){var be=dt(V);if(V.token==="%"){var Ie=jr({},V);G(V);try{dt(V),jr(V,Ie)}catch{be=new m("/","divide",[be,new u(100)],!1,!0)}}return be}function dt(V){var be,Ie,Xe,gt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return mt(gt,V.token)?(Xe=gt[V.token],be=V.token,G(V),Ie=[dt(V)],new m(be,Xe,Ie)):te(V)}function te(V){var be,Ie,Xe,gt;return be=me(V),(V.token==="^"||V.token===".^")&&(Ie=V.token,Xe=Ie==="^"?"pow":"dotPow",G(V),gt=[be,dt(V)],be=new m(Ie,Xe,gt)),be}function me(V){for(var be=J(V);V.token==="??";)G(V),be=new m("??","nullish",[be,J(V)]);return be}function J(V){var be,Ie,Xe,gt;be=ae(V);for(var At={"!":"factorial","'":"ctranspose"};mt(At,V.token);)Ie=V.token,Xe=At[Ie],U(V),gt=[be],be=new m(Ie,Xe,gt),be=se(V,be);return be}function ae(V){var be=[];if(V.tokenType===E.SYMBOL&&mt(V.extraNodes,V.token)){var Ie=V.extraNodes[V.token];if(U(V),V.token==="("){if(be=[],Z(V),U(V),V.token!==")")for(be.push(I(V));V.token===",";)U(V),be.push(I(V));if(V.token!==")")throw pt(V,"Parenthesis ) expected");H(V),U(V)}return new Ie(be)}return ge(V)}function ge(V){var be,Ie;return V.tokenType===E.SYMBOL||V.tokenType===E.DELIMITER&&V.token in N?(Ie=V.token,U(V),mt(D,Ie)?be=new u(D[Ie]):M.includes(Ie)?be=new u(n(Ie,"number")):be=new C(Ie),be=se(V,be),be):fe(V)}function se(V,be,Ie){for(var Xe;;){var gt=!1;V.token==="?."&&(gt=!0,U(V));var At=(V.token==="("||V.token==="["||V.token===".")&&!0;if(!(gt||At))break;if(Xe=[],V.token==="(")if(gt||Si(be)||Wu(be)){if(Z(V),U(V),V.token!==")")for(Xe.push(I(V));V.token===",";)U(V),Xe.push(I(V));if(V.token!==")")throw pt(V,"Parenthesis ) expected");H(V),U(V),be=new f(be,Xe,gt)}else return be;else if(V.token==="["){if(Z(V),U(V),V.token!=="]")for(Xe.push(I(V));V.token===",";)U(V),Xe.push(I(V));if(V.token!=="]")throw pt(V,"Parenthesis ] expected");H(V),U(V),be=new i(be,new d(Xe),gt)}else{gt||U(V);var Xr=V.tokenType===E.SYMBOL||V.tokenType===E.DELIMITER&&V.token in N;if(!Xr){var La="Property name expected after ";throw La+=gt?"optional chain":"dot",pt(V,La)}Xe.push(new u(V.token)),U(V);var E0=!0;be=new i(be,new d(Xe,E0),gt)}}return be}function fe(V){var be,Ie;return V.token==='"'||V.token==="'"?(Ie=we(V,V.token),be=new u(Ie),be=se(V,be),be):Be(V)}function we(V,be){for(var Ie="";$(V)!==""&&$(V)!==be;)if($(V)==="\\"){z(V);var Xe=$(V),gt=k[Xe];if(gt!==void 0)Ie+=gt,V.index+=1;else if(Xe==="u"){var At=V.expression.slice(V.index+1,V.index+5);if(/^[0-9A-Fa-f]{4}$/.test(At))Ie+=String.fromCharCode(parseInt(At,16)),V.index+=5;else throw pt(V,"Invalid unicode character \\u".concat(At))}else throw pt(V,"Bad escape character \\".concat(Xe))}else Ie+=$(V),z(V);if(U(V),V.token!==be)throw pt(V,"End of string ".concat(be," expected"));return U(V),Ie}function Be(V){var be,Ie,Xe,gt;if(V.token==="["){if(Z(V),U(V),V.token!=="]"){var At=Oe(V);if(V.token===";"){for(Xe=1,Ie=[At];V.token===";";)U(V),V.token!=="]"&&(Ie[Xe]=Oe(V),Xe++);if(V.token!=="]")throw pt(V,"End of matrix ] expected");H(V),U(V),gt=Ie[0].items.length;for(var Xr=1;Xr<Xe;Xr++)if(Ie[Xr].items.length!==gt)throw _n(V,"Column dimensions mismatch ("+Ie[Xr].items.length+" !== "+gt+")");be=new o(Ie)}else{if(V.token!=="]")throw pt(V,"End of matrix ] expected");H(V),U(V),be=At}}else H(V),U(V),be=new o([]);return se(V,be)}return Je(V)}function Oe(V){for(var be=[I(V)],Ie=1;V.token===",";)U(V),V.token!=="]"&&V.token!==";"&&(be[Ie]=I(V),Ie++);return new o(be)}function Je(V){if(V.token==="{"){Z(V);var be,Ie={};do if(U(V),V.token!=="}"){if(V.token==='"'||V.token==="'")be=we(V,V.token);else if(V.tokenType===E.SYMBOL||V.tokenType===E.DELIMITER&&V.token in N)be=V.token,U(V);else throw pt(V,"Symbol or string expected as object key");if(V.token!==":")throw pt(V,"Colon : expected after object key");U(V),Ie[be]=I(V)}while(V.token===",");if(V.token!=="}")throw pt(V,"Comma , or bracket } expected after object value");H(V),U(V);var Xe=new h(Ie);return Xe=se(V,Xe),Xe}return Pe(V)}function Pe(V){var be;if(V.tokenType===E.NUMBER){be=V.token,U(V);var Ie=Uf(be,r),Xe=n(be,Ie);return new u(Xe)}return ht(V)}function ht(V){var be;if(V.token==="("){if(Z(V),U(V),be=I(V),V.token!==")")throw pt(V,"Parenthesis ) expected");return H(V),U(V),be=new v(be),be=se(V,be),be}return Ct(V)}function Ct(V){throw V.token===""?pt(V,"Unexpected end of expression"):pt(V,"Value expected")}function Ut(V){return V.index-V.token.length+1}function pt(V,be){var Ie=Ut(V),Xe=new SyntaxError(be+" (char "+Ie+")");return Xe.char=Ie,Xe}function _n(V,be){var Ie=Ut(V),Xe=new SyntaxError(be+" (char "+Ie+")");return Xe.char=Ie,Xe}return e.addConversion({from:"string",to:"Node",convert:w}),w}),wU="compile",SXe=["typed","parse"],TXe=re(wU,SXe,t=>{var{typed:e,parse:n}=t;return e(wU,{string:function(i){return n(i).compile()},"Array | Matrix":function(i){return Yt(i,function(o){return n(o).compile()})}})}),EU="evaluate",AXe=["typed","parse"],NXe=re(EU,AXe,t=>{var{typed:e,parse:n}=t;return e(EU,{string:function(i){var o=Y1();return n(i).compile().evaluate(o)},"string, Map | Object":function(i,o){return n(i).compile().evaluate(o)},"Array | Matrix":function(i){var o=Y1();return Yt(i,function(a){return n(a).compile().evaluate(o)})},"Array | Matrix, Map | Object":function(i,o){return Yt(i,function(a){return n(a).compile().evaluate(o)})}})}),DXe="Parser",MXe=["evaluate","parse"],kXe=re(DXe,MXe,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Y1(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(o){return e(o,this.scope)},r.prototype.get=function(o){if(this.scope.has(o))return this.scope.get(o)},r.prototype.getAll=function(){return GPe(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function i(o){if(o.length===0)return!1;for(var a=0;a<o.length;a++){var s=o.charAt(a-1),l=o.charAt(a),u=o.charAt(a+1),c=n.isAlpha(l,s,u)||a>0&&n.isDigit(l);if(!c)return!1}return!0}return r.prototype.set=function(o,a){if(!i(o))throw new Error("Invalid variable name: '".concat(o,"'. Variable names must follow the specified rules."));return this.scope.set(o,a),a},r.prototype.remove=function(o){this.scope.delete(o)},r.prototype.clear=function(){this.scope.clear()},r.prototype.toJSON=function(){var o={mathjs:"Parser",variables:{},functions:{}};for(var[a,s]of this.scope)if(xJ(s)){if(!_Xe(s))throw new Error("Cannot serialize external function ".concat(a));o.functions[a]="".concat(s.syntax," = ").concat(s.expr)}else o.variables[a]=s;return o},r.fromJSON=function(o){var a=new r;return Object.entries(o.variables).forEach(s=>{var[l,u]=s;return a.set(l,u)}),Object.entries(o.functions).forEach(s=>{var[l,u]=s;return a.evaluate(u)}),a},r},{isClass:!0});function _Xe(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var CU="parser",OXe=["typed","Parser"],IXe=re(CU,OXe,t=>{var{typed:e,Parser:n}=t;return e(CU,{"":function(){return new n}})}),SU="lup",RXe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],BXe=re(SU,RXe,t=>{var{typed:e,matrix:n,abs:r,addScalar:i,divideScalar:o,multiplyScalar:a,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(SU,{DenseMatrix:function(x){return m(x)},SparseMatrix:function(x){return v(x)},Array:function(x){var C=n(x),w=m(C);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function m(b){var x=b._size[0],C=b._size[1],w=Math.min(x,C),A=Ht(b._data),E=[],T=[x,w],N=[],D=[w,C],M,k,B,P=[];for(M=0;M<x;M++)P[M]=M;for(k=0;k<C;k++){if(k>0)for(M=0;M<x;M++){var $=Math.min(M,k),z=0;for(B=0;B<$;B++)z=i(z,a(A[M][B],A[B][k]));A[M][k]=s(A[M][k],z)}var j=k,L=0,U=0;for(M=k;M<x;M++){var G=A[M][k],Z=r(G);l(Z,L)&&(j=M,L=Z,U=G)}if(k!==j&&(P[k]=[P[j],P[j]=P[k]][0],f._swapRows(k,j,A)),k<x)for(M=k+1;M<x;M++){var H=A[M][k];u(H,0)||(A[M][k]=o(A[M][k],U))}}for(k=0;k<C;k++)for(M=0;M<x;M++){if(k===0&&(M<C&&(N[M]=[]),E[M]=[]),M<k){M<C&&(N[M][k]=A[M][k]),k<x&&(E[M][k]=0);continue}if(M===k){M<C&&(N[M][k]=A[M][k]),k<x&&(E[M][k]=1);continue}M<C&&(N[M][k]=0),k<x&&(E[M][k]=A[M][k])}var W=new f({data:E,size:T}),K=new f({data:N,size:D}),I=[];for(M=0,w=P.length;M<w;M++)I[P[M]]=M;return{L:W,U:K,p:I,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(b){var x=b._size[0],C=b._size[1],w=Math.min(x,C),A=b._values,E=b._index,T=b._ptr,N=[],D=[],M=[],k=[x,w],B=[],P=[],$=[],z=[w,C],j,L,U,G=[],Z=[];for(j=0;j<x;j++)G[j]=j,Z[j]=j;var H=function(I,ee){var Q=Z[I],ce=Z[ee];G[Q]=ee,G[ce]=I,Z[I]=ce,Z[ee]=Q},W=function(){var I=new h;L<x&&(M.push(N.length),N.push(1),D.push(L)),$.push(B.length);var ee=T[L],Q=T[L+1];for(U=ee;U<Q;U++)j=E[U],I.set(G[j],A[U]);L>0&&I.forEach(0,L-1,function(X,le){d._forEachRow(X,N,D,M,function(Ce,he){Ce>X&&I.accumulate(Ce,c(a(he,le)))})});var ce=L,ve=I.get(L),ie=r(ve);I.forEach(L+1,x-1,function(X,le){var Ce=r(le);l(Ce,ie)&&(ce=X,ie=Ce,ve=le)}),L!==ce&&(d._swapRows(L,ce,k[1],N,D,M),d._swapRows(L,ce,z[1],B,P,$),I.swap(L,ce),H(L,ce)),I.forEach(0,x-1,function(X,le){X<=L?(B.push(le),P.push(X)):(le=o(le,ve),u(le,0)||(N.push(le),D.push(X)))})};for(L=0;L<C;L++)W();return $.push(B.length),M.push(N.length),{L:new d({values:N,index:D,ptr:M,size:k}),U:new d({values:B,index:P,ptr:$,size:z}),p:G,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),TU="qr",LXe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],FXe=re(TU,LXe,t=>{var{typed:e,matrix:n,zeros:r,identity:i,isZero:o,equal:a,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=t;return jr(e(TU,{DenseMatrix:function(A){return x(A)},SparseMatrix:function(A){return C()},Array:function(A){var E=n(A),T=x(E);return{Q:T.Q.valueOf(),R:T.R.valueOf()}}}),{_denseQRimpl:b});function b(w){var A=w._size[0],E=w._size[1],T=i([A],"dense"),N=T._data,D=w.clone(),M=D._data,k,B,P,$=r([A],"");for(P=0;P<Math.min(E,A);++P){var z=M[P][P],j=c(a(z,0)?1:s(z)),L=u(j),U=0;for(k=P;k<A;k++)U=f(U,h(M[k][P],u(M[k][P])));var G=h(j,l(U));if(!o(G)){var Z=m(z,G);for($[P]=1,k=P+1;k<A;k++)$[k]=d(M[k][P],Z);var H=c(u(d(Z,G))),W=void 0;for(B=P;B<E;B++){for(W=0,k=P;k<A;k++)W=f(W,h(u($[k]),M[k][B]));for(W=h(W,H),k=P;k<A;k++)M[k][B]=h(m(M[k][B],h($[k],W)),L)}for(k=0;k<A;k++){for(W=0,B=P;B<A;B++)W=f(W,h(N[k][B],$[B]));for(W=h(W,H),B=P;B<A;++B)N[k][B]=d(m(N[k][B],h(W,u($[B]))),L)}}}return{Q:T,R:D,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function x(w){var A=b(w),E=A.R._data;if(w._data.length>0)for(var T=E[0][0].type==="Complex"?v(0):0,N=0;N<E.length;++N)for(var D=0;D<N&&D<(E[0]||[]).length;++D)E[N][D]=T;return A}function C(w){throw new Error("qr not implemented for sparse matrices yet")}});function PXe(t,e,n,r){t._values;for(var i=t._index,o=t._ptr,a=t._size,s=t._datatype,l=a[0],u=a[1],c=null,f=[],d=[],h=0,m=0;m<u;m++){d[m]=h;for(var v=n?n[m]:m,b=o[v],x=o[v+1],C=b;C<x;C++){var w=i[C];f[h]=w,h++}}return d[u]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[l,u],datatype:s})}function hte(t,e,n,r,i,o,a){var s=0;for(n[a]=t;s>=0;){var l=n[a+s],u=n[r+l];u===-1?(s--,o[e++]=l):(n[r+l]=n[i+u],++s,n[a+s]=u)}return e}function $Xe(t,e){if(!t)return null;var n=0,r,i=[],o=[],a=0,s=e,l=2*e;for(r=0;r<e;r++)o[a+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(o[s+r]=o[a+t[r]],o[a+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=hte(r,n,o,a,s,i,l));return i}function zXe(t,e){if(!t)return null;var n=t._index,r=t._ptr,i=t._size,o=i[0],a=i[1],s=[],l=[],u=0,c=a,f,d;for(f=0;f<o;f++)l[c+f]=-1;for(var h=0;h<a;h++){s[h]=-1,l[u+h]=-1;for(var m=r[h],v=r[h+1],b=m;b<v;b++){var x=n[b];for(f=l[c+x];f!==-1&&f<h;f=d)d=l[u+f],l[u+f]=h,d===-1&&(s[f]=h);l[c+x]=h}}return s}function UXe(t,e,n){for(var r=t._values,i=t._index,o=t._ptr,a=t._size,s=a[1],l=0,u=0;u<s;u++){var c=o[u];for(o[u]=l;c<o[u+1];c++)e(i[c],u,r?r[c]:1,n)&&(i[l]=i[c],r&&(r[l]=r[c]),l++)}return o[s]=l,i.splice(l,i.length-l),r&&r.splice(l,r.length-l),l}function Hc(t){return-t-2}var HXe="csAmd",VXe=["add","multiply","transpose"],qXe=re(HXe,VXe,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,b=Math.max(16,10*Math.sqrt(m));b=Math.min(m-2,b);var x=i(c,f,h,m,b);UXe(x,l,null);for(var C=x._index,w=x._ptr,A=w[m],E=[],T=[],N=0,D=m+1,M=2*(m+1),k=3*(m+1),B=4*(m+1),P=5*(m+1),$=6*(m+1),z=7*(m+1),j=E,L=o(m,w,T,N,k,j,M,z,D,$,B,P),U=a(m,w,T,P,B,$,b,D,k,j,M),G=0,Z,H,W,K,I,ee,Q,ce,ve,ie,X,le,Ce,he,Te,Ae;U<m;){for(W=-1;G<m&&(W=T[k+G])===-1;G++);T[M+W]!==-1&&(j[T[M+W]]=-1),T[k+G]=T[M+W];var qe=T[B+W],rt=T[D+W];U+=rt;var lt=0;T[D+W]=-rt;var Qe=w[W],st=qe===0?Qe:A,dt=st;for(K=1;K<=qe+1;K++){for(K>qe?(ee=W,Q=Qe,ce=T[N+W]-qe):(ee=C[Qe++],Q=w[ee],ce=T[N+ee]),I=1;I<=ce;I++)Z=C[Q++],!((ve=T[D+Z])<=0)&&(lt+=ve,T[D+Z]=-ve,C[dt++]=Z,T[M+Z]!==-1&&(j[T[M+Z]]=j[Z]),j[Z]!==-1?T[M+j[Z]]=T[M+Z]:T[k+T[P+Z]]=T[M+Z]);ee!==W&&(w[ee]=Hc(W),T[$+ee]=0)}for(qe!==0&&(A=dt),T[P+W]=lt,w[W]=st,T[N+W]=dt-st,T[B+W]=-2,L=s(L,v,T,$,m),ie=st;ie<dt;ie++)if(Z=C[ie],!((X=T[B+Z])<=0)){ve=-T[D+Z];var te=L-ve;for(Qe=w[Z],le=w[Z]+X-1;Qe<=le;Qe++)ee=C[Qe],T[$+ee]>=L?T[$+ee]-=ve:T[$+ee]!==0&&(T[$+ee]=T[P+ee]+te)}for(ie=st;ie<dt;ie++){for(Z=C[ie],le=w[Z],Ce=le+T[B+Z]-1,he=le,Te=0,Ae=0,Qe=le;Qe<=Ce;Qe++)if(ee=C[Qe],T[$+ee]!==0){var me=T[$+ee]-L;me>0?(Ae+=me,C[he++]=ee,Te+=ee):(w[ee]=Hc(W),T[$+ee]=0)}T[B+Z]=he-le+1;var J=he,ae=le+T[N+Z];for(Qe=Ce+1;Qe<ae;Qe++){H=C[Qe];var ge=T[D+H];ge<=0||(Ae+=ge,C[he++]=H,Te+=H)}Ae===0?(w[Z]=Hc(W),ve=-T[D+Z],lt-=ve,rt+=ve,U+=ve,T[D+Z]=0,T[B+Z]=-1):(T[P+Z]=Math.min(T[P+Z],Ae),C[he]=C[J],C[J]=C[le],C[le]=W,T[N+Z]=he-le+1,Te=(Te<0?-Te:Te)%m,T[M+Z]=T[z+Te],T[z+Te]=Z,j[Z]=Te)}for(T[P+W]=lt,v=Math.max(v,lt),L=s(L+v,v,T,$,m),ie=st;ie<dt;ie++)if(Z=C[ie],!(T[D+Z]>=0))for(Te=j[Z],Z=T[z+Te],T[z+Te]=-1;Z!==-1&&T[M+Z]!==-1;Z=T[M+Z],L++){for(ce=T[N+Z],X=T[B+Z],Qe=w[Z]+1;Qe<=w[Z]+ce-1;Qe++)T[$+C[Qe]]=L;var se=Z;for(H=T[M+Z];H!==-1;){var fe=T[N+H]===ce&&T[B+H]===X;for(Qe=w[H]+1;fe&&Qe<=w[H]+ce-1;Qe++)T[$+C[Qe]]!==L&&(fe=0);fe?(w[H]=Hc(Z),T[D+Z]+=T[D+H],T[D+H]=0,T[B+H]=-1,H=T[M+H],T[M+se]=H):(se=H,H=T[M+H])}}for(Qe=st,ie=st;ie<dt;ie++)Z=C[ie],!((ve=-T[D+Z])<=0)&&(T[D+Z]=ve,Ae=T[P+Z]+lt-ve,Ae=Math.min(Ae,m-U-ve),T[k+Ae]!==-1&&(j[T[k+Ae]]=Z),T[M+Z]=T[k+Ae],j[Z]=-1,T[k+Ae]=Z,G=Math.min(G,Ae),T[P+Z]=Ae,C[Qe++]=Z);T[D+W]=rt,(T[N+W]=Qe-st)===0&&(w[W]=-1,T[$+W]=0),qe!==0&&(A=Qe)}for(Z=0;Z<m;Z++)w[Z]=Hc(w[Z]);for(H=0;H<=m;H++)T[k+H]=-1;for(H=m;H>=0;H--)T[D+H]>0||(T[M+H]=T[k+w[H]],T[k+w[H]]=H);for(ee=m;ee>=0;ee--)T[D+ee]<=0||w[ee]!==-1&&(T[M+ee]=T[k+w[ee]],T[k+w[ee]]=ee);for(W=0,Z=0;Z<=m;Z++)w[Z]===-1&&(W=hte(Z,W,T,k,M,E,$));return E.splice(E.length-1,1),E};function i(u,c,f,d,h){var m=r(c);if(u===1&&d===f)return e(c,m);if(u===2){for(var v=m._index,b=m._ptr,x=0,C=0;C<f;C++){var w=b[C];if(b[C]=x,!(b[C+1]-w>h))for(var A=b[C+1];w<A;w++)v[x++]=v[w]}return b[f]=x,c=r(m),n(m,c)}return n(m,c)}function o(u,c,f,d,h,m,v,b,x,C,w,A){for(var E=0;E<u;E++)f[d+E]=c[E+1]-c[E];f[d+u]=0;for(var T=0;T<=u;T++)f[h+T]=-1,m[T]=-1,f[v+T]=-1,f[b+T]=-1,f[x+T]=1,f[C+T]=1,f[w+T]=0,f[A+T]=f[d+T];var N=s(0,0,f,C,u);return f[w+u]=-2,c[u]=-1,f[C+u]=0,N}function a(u,c,f,d,h,m,v,b,x,C,w){for(var A=0,E=0;E<u;E++){var T=f[d+E];if(T===0)f[h+E]=-2,A++,c[E]=-1,f[m+E]=0;else if(T>v)f[b+E]=0,f[h+E]=-1,A++,c[E]=Hc(u),f[b+u]++;else{var N=f[x+T];N!==-1&&(C[N]=E),f[w+E]=f[x+T],f[x+T]=E}}return A}function s(u,c,f,d,h){if(u<2||u+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);u=2}return u}function l(u,c){return u!==c}});function jXe(t,e,n,r,i,o,a){var s,l,u=0,c;if(t<=e||n[r+e]<=n[i+t])return-1;n[i+t]=n[r+e];var f=n[o+t];if(n[o+t]=e,f===-1)u=1,c=t;else{for(u=2,c=f;c!==n[a+c];c=n[a+c]);for(s=f;s!==c;s=l)l=n[a+s],n[a+s]=c}return{jleaf:u,q:c}}var GXe="csCounts",YXe=["transpose"],WXe=re(GXe,YXe,t=>{var{transpose:e}=t;return function(n,r,i,o){if(!n||!r||!i)return null;var a=n._size,s=a[0],l=a[1],u,c,f,d,h,m,v,b=4*l+(o?l+s+1:0),x=[],C=0,w=l,A=2*l,E=3*l,T=4*l,N=5*l+1;for(f=0;f<b;f++)x[f]=-1;var D=[],M=e(n),k=M._index,B=M._ptr;for(f=0;f<l;f++)for(c=i[f],D[c]=x[E+c]===-1?1:0;c!==-1&&x[E+c]===-1;c=r[c])x[E+c]=f;if(o){for(f=0;f<l;f++)x[i[f]]=f;for(u=0;u<s;u++){for(f=l,m=B[u],v=B[u+1],h=m;h<v;h++)f=Math.min(f,x[k[h]]);x[N+u]=x[T+f],x[T+f]=u}}for(u=0;u<l;u++)x[C+u]=u;for(f=0;f<l;f++){for(c=i[f],r[c]!==-1&&D[r[c]]--,d=o?x[T+f]:c;d!==-1;d=o?x[N+d]:-1)for(h=B[d];h<B[d+1];h++){u=k[h];var P=jXe(u,c,x,E,w,A,C);P.jleaf>=1&&D[c]++,P.jleaf===2&&D[P.q]--}r[c]!==-1&&(x[C+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(D[r[c]]+=D[c]);return D}}),KXe="csSqr",XXe=["add","multiply","transpose"],ZXe=re(KXe,XXe,t=>{var{add:e,multiply:n,transpose:r}=t,i=qXe({add:e,multiply:n,transpose:r}),o=WXe({transpose:r});return function(l,u,c){var f=u._ptr,d=u._size,h=d[1],m,v={};if(v.q=i(l,u),l&&!v.q)return null;if(c){var b=l?PXe(u,null,v.q):u;v.parent=zXe(b);var x=$Xe(v.parent,h);if(v.cp=o(b,v.parent,x,1),b&&v.parent&&v.cp&&a(b,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function a(s,l){var u=s._ptr,c=s._index,f=s._size,d=f[0],h=f[1];l.pinv=[],l.leftmost=[];var m=l.parent,v=l.pinv,b=l.leftmost,x=[],C=0,w=d,A=d+h,E=d+2*h,T,N,D,M,k;for(N=0;N<h;N++)x[w+N]=-1,x[A+N]=-1,x[E+N]=0;for(T=0;T<d;T++)b[T]=-1;for(N=h-1;N>=0;N--)for(M=u[N],k=u[N+1],D=M;D<k;D++)b[c[D]]=N;for(T=d-1;T>=0;T--)v[T]=-1,N=b[T],N!==-1&&(x[E+N]++===0&&(x[A+N]=T),x[C+T]=x[w+N],x[w+N]=T);for(l.lnz=0,l.m2=d,N=0;N<h;N++)if(T=x[w+N],l.lnz++,T<0&&(T=l.m2++),v[T]=N,!(--E[N]<=0)){l.lnz+=x[E+N];var B=m[N];B!==-1&&(x[E+B]===0&&(x[A+B]=x[A+N]),x[C+x[A+N]]=x[w+B],x[w+B]=x[C+T],x[E+B]+=x[E+N])}for(T=0;T<d;T++)v[T]<0&&(v[T]=N++);return!0}});function nM(t,e){return t[e]<0}function pte(t,e){t[e]=Hc(t[e])}function AU(t){return t<0?Hc(t):t}function QXe(t,e,n,r,i){var o=e._index,a=e._ptr,s=e._size,l=s[1],u,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=i?i[t]:t;nM(a,t)||(pte(a,t),r[l+d]=h<0?0:AU(a[h]));var m=1;for(c=r[l+d],f=h<0?0:AU(a[h+1]);c<f;c++)if(u=o[c],!nM(a,u)){r[l+d]=c,r[++d]=u,m=0;break}m&&(d--,r[--n]=t)}return n}function JXe(t,e,n,r,i){var o=t._ptr,a=t._size,s=e._index,l=e._ptr,u=a[1],c,f,d,h=u;for(f=l[n],d=l[n+1],c=f;c<d;c++){var m=s[c];nM(o,m)||(h=QXe(m,t,h,r,i))}for(c=h;c<u;c++)pte(o,r[c]);return h}var eZe="csSpsolve",tZe=["divideScalar","multiply","subtract"],nZe=re(eZe,tZe,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(o,a,s,l,u,c,f){var d=o._values,h=o._index,m=o._ptr,v=o._size,b=v[1],x=a._values,C=a._index,w=a._ptr,A,E,T,N,D=JXe(o,a,s,l,c);for(A=D;A<b;A++)u[l[A]]=0;for(E=w[s],T=w[s+1],A=E;A<T;A++)u[C[A]]=x[A];for(var M=D;M<b;M++){var k=l[M],B=c?c[k]:k;if(!(B<0))for(E=m[B],T=m[B+1],u[k]=e(u[k],d[f?E:T-1]),A=f?E+1:E,N=f?T:T-1;A<N;A++){var P=h[A];u[P]=r(u[P],n(d[A],u[k]))}}return D}}),rZe="csLu",iZe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],oZe=re(rZe,iZe,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:i,larger:o,largerEq:a,SparseMatrix:s}=t,l=nZe({divideScalar:n,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,b=100,x=100;f&&(v=f.q,b=f.lnz||b,x=f.unz||x);var C=[],w=[],A=[],E=new s({values:C,index:w,ptr:A,size:[m,m]}),T=[],N=[],D=[],M=new s({values:T,index:N,ptr:D,size:[m,m]}),k=[],B,P,$=[],z=[];for(B=0;B<m;B++)$[B]=0,k[B]=-1,A[B+1]=0;b=0,x=0;for(var j=0;j<m;j++){A[j]=b,D[j]=x;var L=v?v[j]:j,U=l(E,c,L,z,$,k,1),G=-1,Z=-1;for(P=U;P<m;P++)if(B=z[P],k[B]<0){var H=e($[B]);o(H,Z)&&(Z=H,G=B)}else N[x]=k[B],T[x++]=$[B];if(G===-1||Z<=0)return null;k[L]<0&&a(e($[L]),r(Z,d))&&(G=L);var W=$[G];for(N[x]=j,T[x++]=W,k[G]=j,w[b]=G,C[b++]=1,P=U;P<m;P++)B=z[P],k[B]<0&&(w[b]=B,C[b++]=n($[B],W)),$[B]=0}for(A[m]=b,D[m]=x,P=0;P<b;P++)w[P]=k[w[P]];return C.splice(b,C.length-b),w.splice(b,w.length-b),T.splice(x,T.length-x),N.splice(x,N.length-x),{L:E,U:M,pinv:k}}}),NU="slu",aZe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],sZe=re(NU,aZe,t=>{var{typed:e,abs:n,add:r,multiply:i,transpose:o,divideScalar:a,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=t,f=ZXe({add:r,multiply:i,transpose:o}),d=oZe({abs:n,divideScalar:a,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return e(NU,{"SparseMatrix, number, number":function(m,v,b){if(!yt(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(b<0||b>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var x=f(v,m,!1),C=d(m,x,b);return{L:C.L,U:C.U,p:C.pinv,q:x.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function DU(t,e){var n,r=e.length,i=[];if(t)for(n=0;n<r;n++)i[t[n]]=e[n];else for(n=0;n<r;n++)i[n]=e[n];return i}var MU="lusolve",lZe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],uZe=re(MU,lZe,t=>{var{typed:e,matrix:n,lup:r,slu:i,usolve:o,lsolve:a,DenseMatrix:s}=t,l=Rv({DenseMatrix:s});return e(MU,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var b=i(d,m,v);return c(b.L,b.U,b.p,b.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function u(f){if(Ot(f))return f;if(Kn(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=u(f),d=u(d),h&&(v=l(f,v,!0),v._data=DU(h,v._data));var b=a(f,v),x=o(d,b);return m&&(x._data=DU(m,x._data)),x}}),kU="polynomialRoot",cZe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],fZe=re(kU,cZe,t=>{var{typed:e,isZero:n,equalScalar:r,add:i,subtract:o,multiply:a,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:d,re:h}=t;return e(kU,{"number|Complex, ...number|Complex":(m,v)=>{for(var b=[m,...v];b.length>0&&n(b[b.length-1]);)b.pop();if(b.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(b.length){case 2:return[u(s(b[0],b[1]))];case 3:{var[x,C,w]=b,A=a(2,w),E=a(C,C),T=a(4,w,x);if(r(E,T))return[s(u(C),A)];var N=l(o(E,T));return[s(o(N,C),A),s(o(u(N),C),A)]}case 4:{var[D,M,k,B]=b,P=u(a(3,B)),$=a(k,k),z=a(3,B,M),j=i(a(2,k,k,k),a(27,B,B,D)),L=a(9,B,k,M);if(r($,z)&&r(j,L))return[s(k,P)];var U=o($,z),G=o(j,L),Z=i(a(18,B,k,M,D),a(k,k,M,M)),H=i(a(4,k,k,k,D),a(4,B,M,M,M),a(27,B,B,D,D));if(r(Z,H))return[s(o(a(4,B,k,M),i(a(9,B,B,D),a(k,k,k))),a(B,U)),s(o(a(9,B,D),a(k,M)),a(2,U))];var W;r($,z)?W=G:W=s(i(G,l(o(a(G,G),a(4,U,U,U)))),2);var K=!0,I=c(W,K).toArray().map(ee=>s(i(k,ee,s(U,ee)),P));return I.map(ee=>f(ee)==="Complex"&&r(h(ee),h(ee)+d(ee))?h(ee):ee)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(b))}}})}),dZe="Help",hZe=["evaluate"],pZe=re(dZe,hZe,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var o=!1,a=e("config()"),s={config:f=>(o=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<r.examples.length;l++){var u=r.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,s)}catch(f){c=f}c!==void 0&&!yJ(c)&&(i+="        "+tn(c,{precision:14})+`
`)}i+=`
`,o&&e("config(originalConfig)",{originalConfig:a})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},n.prototype.toJSON=function(){var r=Ht(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var i={};return Object.keys(r).filter(o=>o!=="mathjs").forEach(o=>{i[o]=r[o]}),new n(i)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),mZe="Chain",gZe=["?on","math","typed"],vZe=re(mZe,gZe,t=>{var{on:e,math:n,typed:r}=t;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");EJ(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return tn(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function o(u,c){typeof c=="function"&&(i.prototype[u]=s(c))}function a(u,c){o$e(i.prototype,u,function(){var d=c();if(typeof d=="function")return s(d)})}function s(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(u)){var d=r.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")o(u,c);else{var f=function(m){mt(u,m)&&l[m]===void 0&&a(m,()=>u[m])};for(var d in u)f(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),e&&e("import",function(u,c,f){f||a(u,c)}),i},{isClass:!0}),_U={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},bZe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},yZe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},xZe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},wZe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},EZe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},CZe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},SZe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},TZe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},AZe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},NZe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},OU={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},DZe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},MZe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},kZe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},_Ze={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},OZe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},IZe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},RZe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},BZe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},LZe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},FZe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},PZe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},$Ze={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},zZe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},UZe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},HZe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},VZe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},qZe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},jZe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},GZe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},YZe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},WZe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},KZe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},XZe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},ZZe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},QZe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},JZe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},eQe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},tQe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},nQe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},rQe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},iQe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},oQe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},aQe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},sQe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},lQe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},uQe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},cQe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},fQe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},dQe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},hQe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},pQe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},mQe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},gQe={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},vQe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},bQe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},yQe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},xQe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},wQe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},EQe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},CQe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},SQe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},TQe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},AQe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},NQe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},DQe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},MQe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},kQe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},_Qe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},OQe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},IQe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},RQe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},BQe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},LQe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},FQe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},PQe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},$Qe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},zQe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},UQe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},HQe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},VQe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},qQe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},jQe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},GQe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},YQe={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},WQe={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},KQe={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},XQe={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},ZQe={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},QQe={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},JQe={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},eJe={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},tJe={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},nJe={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rJe={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},iJe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},oJe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},aJe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},sJe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},lJe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},uJe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},cJe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},fJe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},dJe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},hJe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},pJe={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},mJe={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},gJe={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},vJe={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},bJe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},yJe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},xJe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},wJe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},EJe={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},CJe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},SJe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},TJe={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},AJe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},NJe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},DJe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},MJe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},kJe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},_Je={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},OJe={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},IJe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},RJe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},BJe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},LJe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},FJe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},PJe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},$Je={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},zJe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},UJe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},HJe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},VJe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},qJe={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},jJe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},GJe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},YJe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},WJe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},KJe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},XJe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},ZJe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},QJe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},JJe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},eet={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},tet={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},net={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},ret={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},iet={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},oet={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},aet={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},set={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},uet={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},cet={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},fet={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},det={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},het={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},pet={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},met={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},get={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},vet={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},bet={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},yet={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},xet={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},wet={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},Eet={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Cet={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Tet={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Aet={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},Net={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},Det={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Met={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},ket={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},_et={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Oet={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},Iet={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},Ret={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},Bet={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},Let={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},Fet={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},Pet={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},$et={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},zet={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Uet={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Het={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},Vet={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},qet={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},jet={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Get={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Yet={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Wet={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},Ket={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},Xet={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},Zet={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},Qet={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},Jet={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},ett={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},ttt={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},ntt={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},rtt={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},itt={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},ott={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},att={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},stt={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},ltt={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},utt={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},ctt={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},ftt={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},dtt={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},htt={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},ptt={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},mtt={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},gtt={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},vtt={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},btt={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},ytt={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},xtt={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},wtt={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},Ett={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},Ctt={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},Stt={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Ttt={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Att={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},Ntt={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},Dtt={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Mtt={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},ktt={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},_tt={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Ott={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},Itt={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},Rtt={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},Btt={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},Ltt={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},Ftt={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},Ptt={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},$tt={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},ztt={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},Utt={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Htt={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},Vtt={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},qtt={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},jtt={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},Gtt={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},Ytt={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Wtt={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Ktt={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Xtt={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},Ztt={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Qtt={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Jtt={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},ent={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},tnt={bignumber:IZe,bigint:RZe,boolean:BZe,complex:LZe,createUnit:FZe,fraction:PZe,index:$Ze,matrix:zZe,number:UZe,sparse:HZe,splitUnit:VZe,string:qZe,unit:jZe,e:_U,E:_U,false:bZe,i:yZe,Infinity:xZe,LN2:EZe,LN10:wZe,LOG2E:SZe,LOG10E:CZe,NaN:TZe,null:AZe,pi:OU,PI:OU,phi:NZe,SQRT1_2:DZe,SQRT2:MZe,tau:kZe,true:_Ze,version:OZe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:KZe,lsolve:ZZe,lsolveAll:QZe,lup:JZe,lusolve:eQe,leafCount:XZe,polynomialRoot:tQe,resolve:iQe,simplify:oQe,simplifyConstant:aQe,simplifyCore:sQe,symbolicEqual:uQe,rationalize:rQe,slu:lQe,usolve:cQe,usolveAll:fQe,qr:nQe,abs:dQe,add:hQe,cbrt:pQe,ceil:mQe,cube:gQe,divide:vQe,dotDivide:bQe,dotMultiply:yQe,dotPow:xQe,exp:wQe,expm:EQe,expm1:CQe,fix:SQe,floor:TQe,gcd:AQe,hypot:NQe,lcm:MQe,log:kQe,log2:IQe,log1p:OQe,log10:_Qe,mod:RQe,multiply:BQe,norm:LQe,nthRoot:FQe,nthRoots:PQe,pow:$Qe,round:zQe,sign:UQe,sqrt:HQe,sqrtm:VQe,square:YQe,subtract:WQe,unaryMinus:KQe,unaryPlus:XQe,xgcd:ZQe,invmod:DQe,bitAnd:QQe,bitNot:JQe,bitOr:eJe,bitXor:tJe,leftShift:nJe,rightArithShift:rJe,rightLogShift:iJe,bellNumbers:oJe,catalan:aJe,composition:sJe,stirlingS2:lJe,config:GZe,import:YZe,typed:WZe,arg:uJe,conj:cJe,re:dJe,im:fJe,evaluate:hJe,help:vJe,parse:mJe,parser:pJe,compile:gJe,distance:bJe,intersect:yJe,and:xJe,not:wJe,nullish:EJe,or:CJe,xor:SJe,mapSlices:TJe,concat:NJe,count:DJe,cross:MJe,column:AJe,ctranspose:kJe,det:_Je,diag:OJe,diff:IJe,dot:RJe,getMatrixDataType:$Je,identity:zJe,filter:LJe,flatten:FJe,forEach:PJe,inv:UJe,pinv:HJe,eigs:BJe,kron:VJe,matrixFromFunction:GJe,matrixFromRows:YJe,matrixFromColumns:jJe,map:qJe,ones:WJe,partitionSelect:KJe,range:XJe,resize:QJe,reshape:ZJe,rotate:JJe,rotationMatrix:eet,row:tet,size:net,sort:ret,squeeze:iet,subset:oet,trace:aet,transpose:set,zeros:uet,fft:cet,ifft:fet,sylvester:qQe,schur:jQe,lyap:GQe,solveODE:ent,bernoulli:det,combinations:het,combinationsWithRep:pet,factorial:met,gamma:get,kldivergence:bet,lgamma:vet,multinomial:yet,permutations:xet,pickRandom:wet,random:Eet,randomInt:Cet,compare:Tet,compareNatural:Aet,compareText:Net,deepEqual:Det,equal:Met,equalText:ket,larger:_et,largerEq:Oet,smaller:Iet,smallerEq:Ret,unequal:Bet,setCartesian:Let,setDifference:Fet,setDistinct:Pet,setIntersect:$et,setIsSubset:zet,setMultiplicity:Uet,setPowerset:Het,setSize:Vet,setSymDifference:qet,setUnion:jet,zpk2tf:Get,freqz:Yet,erf:Wet,zeta:Ket,cumsum:ott,mad:Xet,max:Zet,mean:Qet,median:Jet,min:ett,mode:ttt,prod:ntt,quantileSeq:rtt,std:itt,sum:att,variance:stt,corr:ltt,acos:utt,acosh:ctt,acot:ftt,acoth:dtt,acsc:htt,acsch:ptt,asec:mtt,asech:gtt,asin:vtt,asinh:btt,atan:ytt,atanh:wtt,atan2:xtt,cos:Ett,cosh:Ctt,cot:Stt,coth:Ttt,csc:Att,csch:Ntt,sec:Dtt,sech:Mtt,sin:ktt,sinh:_tt,tan:Ott,tanh:Itt,to:Rtt,toBest:Btt,clone:Ftt,format:Ptt,bin:Ltt,oct:Ztt,hex:ztt,isNaN:Htt,isBounded:Vtt,isFinite:qtt,isInteger:Utt,isNegative:jtt,isNumeric:Gtt,hasNumericValue:$tt,isPositive:Ytt,isPrime:Wtt,isZero:Ktt,print:Qtt,typeOf:Jtt,numeric:Xtt},IU="help",nnt=["typed","mathWithTransform","Help"],rnt=re(IU,nnt,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(IU,{any:function(o){var a,s=o;if(typeof o!="string"){for(a in n)if(mt(n,a)&&o===n[a]){s=a;break}}var l=Eo(tnt,s);if(!l){var u=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+u+'"')}return new r(l)}})}),RU="chain",int=["typed","Chain"],ont=re(RU,int,t=>{var{typed:e,Chain:n}=t;return e(RU,{"":function(){return new n},any:function(i){return new n(i)}})}),BU="det",ant=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],snt=re(BU,ant,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:i,divideScalar:o,isZero:a,unaryMinus:s}=t;return e(BU,{any:function(c){return Ht(c)},"Array | Matrix":function(c){var f;switch(Ot(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Ht(c);case 1:if(f[0]===1)return Ht(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+tn(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return l(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+tn(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+tn(f)+")")}}});function l(u,c,f){if(c===1)return Ht(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,h=new Array(c).fill(0).map((N,D)=>D),m=0;m<c;m++){var v=h[m];if(a(u[v][m])){var b=void 0;for(b=m+1;b<c;b++)if(!a(u[h[b]][m])){v=h[b],h[b]=h[m],h[m]=v,d=!d;break}if(b===c)return u[v][m]}for(var x=u[v][m],C=m===0?1:u[h[m-1]][m-1],w=m+1;w<c;w++)for(var A=h[w],E=m+1;E<c;E++)u[A][E]=o(r(i(u[A][E],x),i(u[A][m],u[v][E])),C)}var T=u[h[c-1]][c-1];return d?s(T):T}}),LU="inv",lnt=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],unt=re(LU,lnt,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:o,unaryMinus:a,det:s,identity:l,abs:u}=t;return e(LU,{"Array | Matrix":function(d){var h=Ot(d)?d.size():Vt(d);switch(h.length){case 1:if(h[0]===1)return Ot(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+tn(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return Ot(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+tn(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+tn(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,b,x,C;if(d===1){if(x=f[0][0],x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,x)]]}else if(d===2){var w=s(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(a(f[0][1]),w)],[r(a(f[1][0]),w),r(f[0][0],w)]]}else{var A=f.concat();for(m=0;m<d;m++)A[m]=A[m].concat();for(var E=l(d).valueOf(),T=0;T<h;T++){var N=u(A[T][T]),D=T;for(m=T+1;m<d;)u(A[m][T])>N&&(N=u(A[m][T]),D=m),m++;if(N===0)throw Error("Cannot calculate inverse, determinant is zero");m=D,m!==T&&(C=A[T],A[T]=A[m],A[m]=C,C=E[T],E[T]=E[m],E[m]=C);var M=A[T],k=E[T];for(m=0;m<d;m++){var B=A[m],P=E[m];if(m!==T){if(B[T]!==0){for(b=r(a(B[T]),M[T]),v=T;v<h;v++)B[v]=i(B[v],o(b,M[v]));for(v=0;v<h;v++)P[v]=i(P[v],o(b,k[v]))}}else{for(b=M[T],v=T;v<h;v++)B[v]=r(B[v],b);for(v=0;v<h;v++)P[v]=r(P[v],b)}}}return E}}}),FU="pinv",cnt=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],fnt=re(FU,cnt,t=>{var{typed:e,matrix:n,inv:r,deepEqual:i,equal:o,dotDivide:a,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:d}=t;return e(FU,{"Array | Matrix":function(w){var A=Ot(w)?w.size():Vt(w);switch(A.length){case 1:return x(w)?l(w):A[0]===1?r(w):a(l(w),s(w,w));case 2:{if(x(w))return l(w);var E=A[0],T=A[1];if(E===T)try{return r(w)}catch(N){if(!(N instanceof Error&&N.message.match(/Cannot calculate inverse, determinant is zero/)))throw N}return Ot(w)?n(h(w.valueOf(),E,T),w.storage()):h(w,E,T)}default:throw new RangeError("Matrix must be two dimensional (size: "+tn(A)+")")}},any:function(w){return o(w,0)?Ht(w):u(1,w)}});function h(C,w,A){var{C:E,F:T}=v(C,w,A),N=c(r(c(l(E),E)),l(E)),D=c(l(T),r(c(T,l(T))));return c(D,N)}function m(C,w,A){for(var E=Ht(C),T=0,N=0;N<w;N++){if(A<=T)return E;for(var D=N;b(E[D][T]);)if(D++,w===D&&(D=N,T++,A===T))return E;[E[D],E[N]]=[E[N],E[D]];for(var M=E[N][T],k=0;k<A;k++)E[N][k]=a(E[N][k],M);for(var B=0;B<w;B++)if(B!==N){M=E[B][T];for(var P=0;P<A;P++)E[B][P]=f(E[B][P],c(-1,c(M,E[N][P])))}T++}return E}function v(C,w,A){var E=m(C,w,A),T=C.map((D,M)=>D.filter((k,B)=>B<w&&!b(s(E[B],E[B])))),N=E.filter((D,M)=>!b(s(E[M],E[M])));return{C:T,F:N}}function b(C){return o(f(C,d(1,1)),f(0,d(1,1)))}function x(C){return i(f(C,d(1,1)),f(c(C,0),d(1,1)))}});function dnt(t){var{addScalar:e,subtract:n,flatten:r,multiply:i,multiplyScalar:o,divideScalar:a,sqrt:s,abs:l,bignumber:u,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:b,equal:x,complex:C,larger:w,smaller:A,matrixFromColumns:E,dot:T}=t;function N(K,I,ee,Q){var ce=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ve=D(K,I,ee,Q,ce);M(K,I,ee,Q,ce,ve);var{values:ie,C:X}=k(K,I,ee,Q,ce);if(ce){var le=B(K,I,X,ve,ie,ee,Q);return{values:ie,eigenvectors:le}}return{values:ie}}function D(K,I,ee,Q,ce){var ve=Q==="BigNumber",ie=Q==="Complex",X=ve?u(0):0,le=ve?u(1):ie?C(1):1,Ce=ve?u(1):1,he=ve?u(10):2,Te=o(he,he),Ae;ce&&(Ae=Array(I).fill(le));for(var qe=!1;!qe;){qe=!0;for(var rt=0;rt<I;rt++){for(var lt=X,Qe=X,st=0;st<I;st++)rt!==st&&(lt=e(lt,l(K[st][rt])),Qe=e(Qe,l(K[rt][st])));if(!x(lt,0)&&!x(Qe,0)){for(var dt=Ce,te=lt,me=a(Qe,he),J=o(Qe,he);A(te,me);)te=o(te,Te),dt=o(dt,he);for(;w(te,J);)te=a(te,Te),dt=a(dt,he);var ae=A(a(e(te,Qe),dt),o(e(lt,Qe),.95));if(ae){qe=!1;for(var ge=a(1,dt),se=0;se<I;se++)rt!==se&&(K[rt][se]=o(K[rt][se],ge),K[se][rt]=o(K[se][rt],dt));ce&&(Ae[rt]=o(Ae[rt],ge))}}}}return ce?c(Ae):null}function M(K,I,ee,Q,ce,ve){var ie=Q==="BigNumber",X=Q==="Complex",le=ie?u(0):X?C(0):0;ie&&(ee=u(ee));for(var Ce=0;Ce<I-2;Ce++){for(var he=0,Te=le,Ae=Ce+1;Ae<I;Ae++){var qe=K[Ae][Ce];A(l(Te),l(qe))&&(Te=qe,he=Ae)}if(!A(l(Te),ee)){if(he!==Ce+1){var rt=K[he];K[he]=K[Ce+1],K[Ce+1]=rt;for(var lt=0;lt<I;lt++){var Qe=K[lt][he];K[lt][he]=K[lt][Ce+1],K[lt][Ce+1]=Qe}if(ce){var st=ve[he];ve[he]=ve[Ce+1],ve[Ce+1]=st}}for(var dt=Ce+2;dt<I;dt++){var te=a(K[dt][Ce],Te);if(te!==0){for(var me=0;me<I;me++)K[dt][me]=n(K[dt][me],o(te,K[Ce+1][me]));for(var J=0;J<I;J++)K[J][Ce+1]=e(K[J][Ce+1],o(te,K[J][dt]));if(ce)for(var ae=0;ae<I;ae++)ve[dt][ae]=n(ve[dt][ae],o(te,ve[Ce+1][ae]))}}}}return ve}function k(K,I,ee,Q,ce){var ve=Q==="BigNumber",ie=Q==="Complex",X=ve?u(1):ie?C(1):1;ve&&(ee=u(ee));for(var le=Ht(K),Ce=[],he=I,Te=[],Ae=ce?c(Array(I).fill(X)):void 0,qe=ce?c(Array(he).fill(X)):void 0,rt=0;rt<=100;){rt+=1;for(var lt=le[he-1][he-1],Qe=0;Qe<he;Qe++)le[Qe][Qe]=n(le[Qe][Qe],lt);var{Q:st,R:dt}=m(le);le=i(dt,st);for(var te=0;te<he;te++)le[te][te]=e(le[te][te],lt);if(ce&&(qe=i(qe,st)),he===1||A(l(le[he-1][he-2]),ee)){rt=0,Ce.push(le[he-1][he-1]),ce&&(Te.unshift([[1]]),z(qe,I),Ae=i(Ae,qe),he>1&&(qe=c(Array(he-1).fill(X)))),he-=1,le.pop();for(var me=0;me<he;me++)le[me].pop()}else if(he===2||A(l(le[he-2][he-3]),ee)){rt=0;var J=P(le[he-2][he-2],le[he-2][he-1],le[he-1][he-2],le[he-1][he-1]);Ce.push(...J),ce&&(Te.unshift($(le[he-2][he-2],le[he-2][he-1],le[he-1][he-2],le[he-1][he-1],J[0],J[1],ee,Q)),z(qe,I),Ae=i(Ae,qe),he>2&&(qe=c(Array(he-2).fill(X)))),he-=2,le.pop(),le.pop();for(var ae=0;ae<he;ae++)le[ae].pop(),le[ae].pop()}if(he===0)break}if(Ce.sort((fe,we)=>+n(l(fe),l(we))),rt>100){var ge=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Ce.join(", "));throw ge.values=Ce,ge.vectors=[],ge}var se=ce?i(Ae,j(Te,I)):void 0;return{values:Ce,C:se}}function B(K,I,ee,Q,ce,ve,ie){var X=h(ee),le=i(X,K,ee),Ce=ie==="BigNumber",he=ie==="Complex",Te=Ce?u(0):he?C(0):0,Ae=Ce?u(1):he?C(1):1,qe=[],rt=[];for(var lt of ce){var Qe=L(qe,lt,x);Qe===-1?(qe.push(lt),rt.push(1)):rt[Qe]+=1}for(var st=[],dt=qe.length,te=Array(I).fill(Te),me=c(Array(I).fill(Ae)),J=function(){var se=qe[ae],fe=n(le,i(se,me)),we=b(fe,te);for(we.shift();we.length<rt[ae];){var Be=U(fe,I,we,ve,ie);if(Be===null)break;we.push(Be)}var Oe=i(h(Q),ee);we=we.map(Je=>i(Oe,Je)),st.push(...we.map(Je=>({value:se,vector:r(Je)})))},ae=0;ae<dt;ae++)J();return st}function P(K,I,ee,Q){var ce=e(K,Q),ve=n(o(K,Q),o(I,ee)),ie=o(ce,.5),X=o(s(n(o(ce,ce),o(4,ve))),.5);return[e(ie,X),n(ie,X)]}function $(K,I,ee,Q,ce,ve,ie,X){var le=X==="BigNumber",Ce=X==="Complex",he=le?u(0):Ce?C(0):0,Te=le?u(1):Ce?C(1):1;if(A(l(ee),ie))return[[Te,he],[he,Te]];if(w(l(n(ce,ve)),ie))return[[n(ce,Q),n(ve,Q)],[ee,ee]];var Ae=n(K,ce),qe=n(Q,ce);return A(l(I),ie)&&A(l(qe),ie)?[[Ae,Te],[ee,he]]:[[I,he],[qe,Te]]}function z(K,I){for(var ee=0;ee<K.length;ee++)K[ee].push(...Array(I-K[ee].length).fill(0));for(var Q=K.length;Q<I;Q++)K.push(Array(I).fill(0)),K[Q][Q]=1;return K}function j(K,I){for(var ee=[],Q=0;Q<I;Q++)ee[Q]=Array(I).fill(0);var ce=0;for(var ve of K){for(var ie=ve.length,X=0;X<ie;X++)for(var le=0;le<ie;le++)ee[ce+X][ce+le]=ve[X][le];ce+=ie}return ee}function L(K,I,ee){for(var Q=0;Q<K.length;Q++)if(ee(K[Q],I))return Q;return-1}function U(K,I,ee,Q,ce){for(var ve=ce==="BigNumber"?u(1e3):1e3,ie,X=0;X<5;++X){ie=G(I,ee,ce);try{ie=v(K,ie)}catch{continue}if(w(H(ie),ve))break}if(X>=5)return null;for(X=0;;){var le=v(K,ie);if(A(H(Z(ie,[le])),Q))break;if(++X>=10)return null;ie=W(le)}return ie}function G(K,I,ee){var Q=ee==="BigNumber",ce=ee==="Complex",ve=Array(K).fill(0).map(ie=>2*Math.random()-1);return Q&&(ve=ve.map(ie=>u(ie))),ce&&(ve=ve.map(ie=>C(ie))),ve=Z(ve,I),W(ve,ee)}function Z(K,I){var ee=f(K);for(var Q of I)Q=d(Q,ee),K=n(K,i(a(T(Q,K),T(Q,Q)),Q));return K}function H(K){return l(s(T(K,K)))}function W(K,I){var ee=I==="BigNumber",Q=I==="Complex",ce=ee?u(1):Q?C(1):1;return i(a(ce,H(K)),K)}return N}function hnt(t){var{config:e,addScalar:n,subtract:r,abs:i,atan:o,cos:a,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:d}=t;function h(M,k){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,P=arguments.length>3?arguments[3]:void 0,$=arguments.length>4?arguments[4]:void 0;if(P==="number")return m(M,B,$);if(P==="BigNumber")return v(M,B,$);throw TypeError("Unsupported data type: "+P)}function m(M,k,B){var P=M.length,$=Math.abs(k/P),z,j;if(B){j=new Array(P);for(var L=0;L<P;L++)j[L]=Array(P).fill(0),j[L][L]=1}for(var U=T(M);Math.abs(U[1])>=Math.abs($);){var G=U[0][0],Z=U[0][1];z=b(M[G][G],M[Z][Z],M[G][Z]),M=E(M,z,G,Z),B&&(j=C(j,z,G,Z)),U=T(M)}for(var H=Array(P).fill(0),W=0;W<P;W++)H[W]=M[W][W];return D(Ht(H),j,B)}function v(M,k,B){var P=M.length,$=i(k/P),z,j;if(B){j=new Array(P);for(var L=0;L<P;L++)j[L]=Array(P).fill(0),j[L][L]=1}for(var U=N(M);i(U[1])>=i($);){var G=U[0][0],Z=U[0][1];z=x(M[G][G],M[Z][Z],M[G][Z]),M=A(M,z,G,Z),B&&(j=w(j,z,G,Z)),U=N(M)}for(var H=Array(P).fill(0),W=0;W<P;W++)H[W]=M[W][W];return D(Ht(H),j,B)}function b(M,k,B){var P=k-M;return Math.abs(P)<=e.relTol?Math.PI/4:.5*Math.atan(2*B/(k-M))}function x(M,k,B){var P=r(k,M);return i(P)<=e.relTol?c(-1).acos().div(4):l(.5,o(f(2,B,u(P))))}function C(M,k,B,P){for(var $=M.length,z=Math.cos(k),j=Math.sin(k),L=Array($).fill(0),U=Array($).fill(0),G=0;G<$;G++)L[G]=z*M[G][B]-j*M[G][P],U[G]=j*M[G][B]+z*M[G][P];for(var Z=0;Z<$;Z++)M[Z][B]=L[Z],M[Z][P]=U[Z];return M}function w(M,k,B,P){for(var $=M.length,z=a(k),j=s(k),L=Array($).fill(c(0)),U=Array($).fill(c(0)),G=0;G<$;G++)L[G]=r(l(z,M[G][B]),l(j,M[G][P])),U[G]=n(l(j,M[G][B]),l(z,M[G][P]));for(var Z=0;Z<$;Z++)M[Z][B]=L[Z],M[Z][P]=U[Z];return M}function A(M,k,B,P){for(var $=M.length,z=c(a(k)),j=c(s(k)),L=l(z,z),U=l(j,j),G=Array($).fill(c(0)),Z=Array($).fill(c(0)),H=f(c(2),z,j,M[B][P]),W=n(r(l(L,M[B][B]),H),l(U,M[P][P])),K=d(l(U,M[B][B]),H,l(L,M[P][P])),I=0;I<$;I++)G[I]=r(l(z,M[B][I]),l(j,M[P][I])),Z[I]=n(l(j,M[B][I]),l(z,M[P][I]));M[B][B]=W,M[P][P]=K,M[B][P]=c(0),M[P][B]=c(0);for(var ee=0;ee<$;ee++)ee!==B&&ee!==P&&(M[B][ee]=G[ee],M[ee][B]=G[ee],M[P][ee]=Z[ee],M[ee][P]=Z[ee]);return M}function E(M,k,B,P){for(var $=M.length,z=Math.cos(k),j=Math.sin(k),L=z*z,U=j*j,G=Array($).fill(0),Z=Array($).fill(0),H=L*M[B][B]-2*z*j*M[B][P]+U*M[P][P],W=U*M[B][B]+2*z*j*M[B][P]+L*M[P][P],K=0;K<$;K++)G[K]=z*M[B][K]-j*M[P][K],Z[K]=j*M[B][K]+z*M[P][K];M[B][B]=H,M[P][P]=W,M[B][P]=0,M[P][B]=0;for(var I=0;I<$;I++)I!==B&&I!==P&&(M[B][I]=G[I],M[I][B]=G[I],M[P][I]=Z[I],M[I][P]=Z[I]);return M}function T(M){for(var k=M.length,B=0,P=[0,1],$=0;$<k;$++)for(var z=$+1;z<k;z++)Math.abs(B)<Math.abs(M[$][z])&&(B=Math.abs(M[$][z]),P=[$,z]);return[P,B]}function N(M){for(var k=M.length,B=0,P=[0,1],$=0;$<k;$++)for(var z=$+1;z<k;z++)i(B)<i(M[$][z])&&(B=i(M[$][z]),P=[$,z]);return[P,B]}function D(M,k,B){var P=M.length,$=Array(P),z;if(B){z=Array(P);for(var j=0;j<P;j++)z[j]=Array(P)}for(var L=0;L<P;L++){for(var U=0,G=M[0],Z=0;Z<M.length;Z++)i(M[Z])<i(G)&&(U=Z,G=M[U]);if($[L]=M.splice(U,1)[0],B)for(var H=0;H<P;H++)z[L][H]=k[H][U],k[H].splice(U,1)}if(!B)return{values:$};var W=z.map((K,I)=>({value:$[I],vector:K}));return{values:$,eigenvectors:W}}return h}var pnt="eigs",mnt=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],gnt=re(pnt,mnt,t=>{var{config:e,typed:n,matrix:r,addScalar:i,subtract:o,equal:a,abs:s,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:b,larger:x,column:C,flatten:w,number:A,complex:E,sqrt:T,diag:N,size:D,reshape:M,qr:k,usolve:B,usolveAll:P,im:$,re:z,smaller:j,matrixFromColumns:L,dot:U}=t,G=hnt({config:e,addScalar:i,subtract:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:f,inv:h,bignumber:m,multiply:v,add:b}),Z=dnt({addScalar:i,subtract:o,multiply:v,multiplyScalar:f,flatten:w,divideScalar:d,sqrt:T,abs:s,bignumber:m,diag:N,size:D,reshape:M,qr:k,inv:h,usolve:B,usolveAll:P,equal:a,complex:E,larger:x,smaller:j,matrixFromColumns:L,dot:U});return n("eigs",{Array:function(ve){return H(r(ve))},"Array, number|BigNumber":function(ve,ie){return H(r(ve),{precision:ie})},"Array, Object"(ce,ve){return H(r(ce),ve)},Matrix:function(ve){return H(ve,{matricize:!0})},"Matrix, number|BigNumber":function(ve,ie){return H(ve,{precision:ie,matricize:!0})},"Matrix, Object":function(ve,ie){var X={matricize:!0};return jr(X,ie),H(ve,X)}});function H(ce){var ve,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X="eigenvectors"in ie?ie.eigenvectors:!0,le=(ve=ie.precision)!==null&&ve!==void 0?ve:e.relTol,Ce=W(ce,le,X);return ie.matricize&&(Ce.values=r(Ce.values),X&&(Ce.eigenvectors=Ce.eigenvectors.map(he=>{var{value:Te,vector:Ae}=he;return{value:Te,vector:r(Ae)}}))),X&&Object.defineProperty(Ce,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Ce}function W(ce,ve,ie){var X=ce.toArray(),le=ce.size();if(le.length!==2||le[0]!==le[1])throw new RangeError("Matrix must be square (size: ".concat(tn(le),")"));var Ce=le[0];if(I(X,Ce,ve)&&(ee(X,Ce),K(X,Ce,ve))){var he=Q(ce,X,Ce);return G(X,Ce,ve,he,ie)}var Te=Q(ce,X,Ce);return Z(X,Ce,ve,Te,ie)}function K(ce,ve,ie){for(var X=0;X<ve;X++)for(var le=X;le<ve;le++)if(x(m(s(o(ce[X][le],ce[le][X]))),ie))return!1;return!0}function I(ce,ve,ie){for(var X=0;X<ve;X++)for(var le=0;le<ve;le++)if(x(m(s($(ce[X][le]))),ie))return!1;return!0}function ee(ce,ve){for(var ie=0;ie<ve;ie++)for(var X=0;X<ve;X++)ce[ie][X]=z(ce[ie][X])}function Q(ce,ve,ie){var X=ce.datatype();if(X==="number"||X==="BigNumber"||X==="Complex")return X;for(var le=!1,Ce=!1,he=!1,Te=0;Te<ie;Te++)for(var Ae=0;Ae<ie;Ae++){var qe=ve[Te][Ae];if(Dt(qe)||_v(qe))le=!0;else if(Gt(qe))Ce=!0;else if($u(qe))he=!0;else throw TypeError("Unsupported type in Matrix: "+Zn(qe))}if(Ce&&he&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),he){for(var rt=0;rt<ie;rt++)for(var lt=0;lt<ie;lt++)ve[rt][lt]=E(ve[rt][lt]);return"Complex"}if(Ce){for(var Qe=0;Qe<ie;Qe++)for(var st=0;st<ie;st++)ve[Qe][st]=m(ve[Qe][st]);return"BigNumber"}if(le){for(var dt=0;dt<ie;dt++)for(var te=0;te<ie;te++)ve[dt][te]=A(ve[dt][te]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),PU="expm",vnt=["typed","abs","add","identity","inv","multiply"],bnt=re(PU,vnt,t=>{var{typed:e,abs:n,add:r,identity:i,inv:o,multiply:a}=t;return e(PU,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+tn(d)+")");for(var h=d[0],m=1e-15,v=s(f),b=l(v,m),x=b.q,C=b.j,w=a(f,Math.pow(2,-C)),A=i(h),E=i(h),T=1,N=w,D=-1,M=1;M<=x;M++)M>1&&(N=a(N,w),D=-D),T=T*(x-M+1)/((2*x-M+1)*M),A=r(A,a(T,N)),E=r(E,a(T*D,N));for(var k=a(o(E),A),B=0;B<C;B++)k=a(k,k);return _d(f)?f.createSparseMatrix(k):k}});function s(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function l(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(u(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,b=f+1;b<=2*f;b++)v*=b;var x=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*x)}}),$U="sqrtm",ynt=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],xnt=re($U,ynt,t=>{var{typed:e,abs:n,add:r,multiply:i,map:o,sqrt:a,subtract:s,inv:l,size:u,max:c,identity:f}=t,d=1e3,h=1e-6;function m(v){var b,x=0,C=v,w=f(u(v));do{var A=C;if(C=i(.5,r(A,l(w))),w=i(.5,r(w,l(A))),b=c(n(s(C,A))),b>h&&++x>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(b>h);return C}return e($U,{"Array | Matrix":function(b){var x=Ot(b)?b.size():Vt(b);switch(x.length){case 1:if(x[0]===1)return o(b,a);throw new RangeError("Matrix must be square (size: "+tn(x)+")");case 2:{var C=x[0],w=x[1];if(C===w)return m(b);throw new RangeError("Matrix must be square (size: "+tn(x)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+tn(x)+")")}}})}),zU="sylvester",wnt=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Ent=re(zU,wnt,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:i,multiply:o,range:a,concat:s,transpose:l,index:u,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v,config:b}=t;return e(zU,{"Matrix, Matrix, Matrix":x,"Array, Matrix, Matrix":function(w,A,E){return x(i(w),A,E)},"Array, Array, Matrix":function(w,A,E){return x(i(w),i(A),E)},"Array, Matrix, Array":function(w,A,E){return x(i(w),A,i(E))},"Matrix, Array, Matrix":function(w,A,E){return x(w,i(A),E)},"Matrix, Array, Array":function(w,A,E){return x(w,i(A),i(E))},"Matrix, Matrix, Array":function(w,A,E){return x(w,A,i(E))},"Array, Array, Array":function(w,A,E){return x(i(w),i(A),i(E)).toArray()}});function x(C,w,A){for(var E=w.size()[0],T=C.size()[0],N=n(C),D=N.T,M=N.U,k=n(o(-1,w)),B=k.T,P=k.U,$=o(o(l(M),A),P),z=a(0,T),j=[],L=(Te,Ae)=>s(Te,Ae,1),U=(Te,Ae)=>s(Te,Ae,0),G=0;G<E;G++)if(G<E-1&&v(c(B,u(G+1,G)))>1e-5){for(var Z=U(c($,u(z,[G])),c($,u(z,[G+1]))),H=0;H<G;H++)Z=f(Z,U(o(j[H],c(B,u(H,G))),o(j[H],c(B,u(H,G+1)))));var W=o(h(T),o(-1,c(B,u(G,G)))),K=o(h(T),o(-1,c(B,u(G+1,G)))),I=o(h(T),o(-1,c(B,u(G,G+1)))),ee=o(h(T),o(-1,c(B,u(G+1,G+1)))),Q=U(L(f(D,W),K),L(I,f(D,ee))),ce=m(Q,Z);j[G]=ce.subset(u(a(0,T),[0])),j[G+1]=ce.subset(u(a(T,2*T),[0])),G++}else{for(var ve=c($,u(z,[G])),ie=0;ie<G;ie++)ve=f(ve,o(j[ie],c(B,u(ie,G))));var X=c(B,u(G,G)),le=d(D,o(X,h(T)));j[G]=m(le,ve)}var Ce=i(r(...j)),he=o(M,o(Ce,l(P)));return he}}),UU="schur",Cnt=["typed","matrix","identity","multiply","qr","norm","subtract"],Snt=re(UU,Cnt,t=>{var{typed:e,matrix:n,identity:r,multiply:i,qr:o,norm:a,subtract:s}=t;return e(UU,{Array:function(c){var f=l(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,d=r(c),h=0,m;do{m=f;var v=o(f),b=v.Q,x=v.R;if(f=i(x,b),d=i(d,b),h++>100)break}while(a(s(f,m))>1e-4);return{U:d,T:f}}}),HU="lyap",Tnt=["typed","matrix","sylvester","multiply","transpose"],Ant=re(HU,Tnt,t=>{var{typed:e,matrix:n,sylvester:r,multiply:i,transpose:o}=t;return e(HU,{"Matrix, Matrix":function(s,l){return r(s,o(s),i(-1,l))},"Array, Matrix":function(s,l){return r(n(s),o(n(s)),i(-1,l))},"Matrix, Array":function(s,l){return r(s,o(n(s)),n(i(-1,l)))},"Array, Array":function(s,l){return r(n(s),o(n(s)),n(i(-1,l))).toArray()}})}),Nnt="divide",Dnt=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Mnt=re(Nnt,Dnt,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:o,inv:a}=t,s=Yi({typed:e,equalScalar:i}),l=Cs({typed:e});return e("divide",CJ({"Array | Matrix, Array | Matrix":function(c,f){return r(c,a(f))},"DenseMatrix, any":function(c,f){return l(c,f,o,!1)},"SparseMatrix, any":function(c,f){return s(c,f,o,!1)},"Array, any":function(c,f){return l(n(c),f,o,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,a(f))}},o.signatures))}),VU="distance",knt=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],_nt=re(VU,knt,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:o,deepEqual:a,sqrt:s,abs:l}=t;return e(VU,{"Array, Array, Array":function(E,T,N){if(E.length===2&&T.length===2&&N.length===2){if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(T,N))throw new TypeError("LinePoint1 should not be same with LinePoint2");var D=r(N[1],T[1]),M=r(T[0],N[0]),k=r(i(N[0],T[1]),i(T[0],N[1]));return b(E[0],E[1],D,M,k)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(E,T,N){if(Object.keys(E).length===2&&Object.keys(T).length===2&&Object.keys(N).length===2){if(!c(E))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(T))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(N))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(m(T),m(N)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in E&&"pointY"in E&&"lineOnePtX"in T&&"lineOnePtY"in T&&"lineTwoPtX"in N&&"lineTwoPtY"in N){var D=r(N.lineTwoPtY,T.lineOnePtY),M=r(T.lineOnePtX,N.lineTwoPtX),k=r(i(N.lineTwoPtX,T.lineOnePtY),i(T.lineOnePtX,N.lineTwoPtY));return b(E.pointX,E.pointY,D,M,k)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(E,T){if(E.length===2&&T.length===3){if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return b(E[0],E[1],T[0],T[1],T[2])}else if(E.length===3&&T.length===6){if(!f(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(T))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return x(E[0],E[1],E[2],T[0],T[1],T[2],T[3],T[4],T[5])}else if(E.length===T.length&&E.length>0){if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(T))throw new TypeError("All values of an array should be numbers or BigNumbers");return C(E,T)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(E,T){if(Object.keys(E).length===2&&Object.keys(T).length===3){if(!c(E))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(T))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in E&&"pointY"in E&&"xCoeffLine"in T&&"yCoeffLine"in T&&"constant"in T)return b(E.pointX,E.pointY,T.xCoeffLine,T.yCoeffLine,T.constant);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===3&&Object.keys(T).length===6){if(!f(E))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(T))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in E&&"pointY"in E&&"x0"in T&&"y0"in T&&"z0"in T&&"a"in T&&"b"in T&&"c"in T)return x(E.pointX,E.pointY,E.pointZ,T.x0,T.y0,T.z0,T.a,T.b,T.c);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===2&&Object.keys(T).length===2){if(!c(E))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(T))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in E&&"pointOneY"in E&&"pointTwoX"in T&&"pointTwoY"in T)return C([E.pointOneX,E.pointOneY],[T.pointTwoX,T.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===3&&Object.keys(T).length===3){if(!f(E))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(T))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in E&&"pointOneY"in E&&"pointOneZ"in E&&"pointTwoX"in T&&"pointTwoY"in T&&"pointTwoZ"in T)return C([E.pointOneX,E.pointOneY,E.pointOneZ],[T.pointTwoX,T.pointTwoY,T.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(E){if(!v(E))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return w(E)}});function u(A){return typeof A=="number"||Gt(A)}function c(A){return A.constructor!==Array&&(A=m(A)),u(A[0])&&u(A[1])}function f(A){return A.constructor!==Array&&(A=m(A)),u(A[0])&&u(A[1])&&u(A[2])}function d(A){return Array.isArray(A)||(A=m(A)),A.every(u)}function h(A){return A.constructor!==Array&&(A=m(A)),u(A[0])&&u(A[1])&&u(A[2])&&u(A[3])&&u(A[4])&&u(A[5])}function m(A){for(var E=Object.keys(A),T=[],N=0;N<E.length;N++)T.push(A[E[N]]);return T}function v(A){if(A[0].length===2&&u(A[0][0])&&u(A[0][1])){if(A.some(E=>E.length!==2||!u(E[0])||!u(E[1])))return!1}else if(A[0].length===3&&u(A[0][0])&&u(A[0][1])&&u(A[0][2])){if(A.some(E=>E.length!==3||!u(E[0])||!u(E[1])||!u(E[2])))return!1}else return!1;return!0}function b(A,E,T,N,D){var M=l(n(n(i(T,A),i(N,E)),D)),k=s(n(i(T,T),i(N,N)));return o(M,k)}function x(A,E,T,N,D,M,k,B,P){var $=[r(i(r(D,E),P),i(r(M,T),B)),r(i(r(M,T),k),i(r(N,A),P)),r(i(r(N,A),B),i(r(D,E),k))];$=s(n(n(i($[0],$[0]),i($[1],$[1])),i($[2],$[2])));var z=s(n(n(i(k,k),i(B,B)),i(P,P)));return o($,z)}function C(A,E){for(var T=A.length,N=0,D=0,M=0;M<T;M++)D=r(A[M],E[M]),N=n(i(D,D),N);return s(N)}function w(A){for(var E=[],T=[],N=[],D=0;D<A.length-1;D++)for(var M=D+1;M<A.length;M++)A[0].length===2?(T=[A[D][0],A[D][1]],N=[A[M][0],A[M][1]]):A[0].length===3&&(T=[A[D][0],A[D][1],A[D][2]],N=[A[M][0],A[M][1],A[M][2]]),E.push(C(T,N));return E}}),Ont="intersect",Int=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Rnt=re(Ont,Int,t=>{var{typed:e,config:n,abs:r,add:i,addScalar:o,matrix:a,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":b,"Array, Array, Array, Array":x,"Matrix, Matrix, Matrix":function(B,P,$){var z=b(B.valueOf(),P.valueOf(),$.valueOf());return z===null?null:a(z)},"Matrix, Matrix, Matrix, Matrix":function(B,P,$,z){var j=x(B.valueOf(),P.valueOf(),$.valueOf(),z.valueOf());return j===null?null:a(j)}});function b(k,B,P){if(k=C(k),B=C(B),P=C(P),!A(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!E(P))throw new TypeError("Array with 4 numbers expected as third argument");return M(k[0],k[1],k[2],B[0],B[1],B[2],P[0],P[1],P[2],P[3])}function x(k,B,P,$){if(k=C(k),B=C(B),P=C(P),$=C($),k.length===2){if(!w(k))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!w(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!w(P))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!w($))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return T(k,B,P,$)}else if(k.length===3){if(!A(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!A(P))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!A($))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return D(k[0],k[1],k[2],B[0],B[1],B[2],P[0],P[1],P[2],$[0],$[1],$[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function C(k){return k.length===1?k[0]:k.length>1&&Array.isArray(k[0])&&k.every(B=>Array.isArray(B)&&B.length===1)?h(k):k}function w(k){return k.length===2&&v(k[0])&&v(k[1])}function A(k){return k.length===3&&v(k[0])&&v(k[1])&&v(k[2])}function E(k){return k.length===4&&v(k[0])&&v(k[1])&&v(k[2])&&v(k[3])}function T(k,B,P,$){var z=k,j=P,L=c(z,B),U=c(j,$),G=c(l(L[0],U[1]),l(U[0],L[1]));if(m(G)||f(r(G),n.relTol))return null;var Z=l(U[0],z[1]),H=l(U[1],z[0]),W=l(U[0],j[1]),K=l(U[1],j[0]),I=u(o(c(c(Z,H),W),K),G);return i(s(L,I),z)}function N(k,B,P,$,z,j,L,U,G,Z,H,W){var K=l(c(k,B),c(P,$)),I=l(c(z,j),c(L,U)),ee=l(c(G,Z),c(H,W));return o(o(K,I),ee)}function D(k,B,P,$,z,j,L,U,G,Z,H,W){var K=N(k,L,Z,L,B,U,H,U,P,G,W,G),I=N(Z,L,$,k,H,U,z,B,W,G,j,P),ee=N(k,L,$,k,B,U,z,B,P,G,j,P),Q=N(Z,L,Z,L,H,U,H,U,W,G,W,G),ce=N($,k,$,k,z,B,z,B,j,P,j,P),ve=c(l(K,I),l(ee,Q)),ie=c(l(ce,Q),l(I,I));if(m(ie))return null;var X=u(ve,ie),le=u(o(K,l(X,I)),Q),Ce=o(k,l(X,c($,k))),he=o(B,l(X,c(z,B))),Te=o(P,l(X,c(j,P))),Ae=o(L,l(le,c(Z,L))),qe=o(U,l(le,c(H,U))),rt=o(G,l(le,c(W,G)));return d(Ce,Ae)&&d(he,qe)&&d(Te,rt)?[Ce,he,Te]:null}function M(k,B,P,$,z,j,L,U,G,Z){var H=l(k,L),W=l($,L),K=l(B,U),I=l(z,U),ee=l(P,G),Q=l(j,G),ce=c(c(c(Z,H),K),ee),ve=c(c(c(o(o(W,I),Q),H),K),ee),ie=u(ce,ve),X=o(k,l(ie,c($,k))),le=o(B,l(ie,c(z,B))),Ce=o(P,l(ie,c(j,P)));return[X,le,Ce]}}),qU="sum",Bnt=["typed","config","add","numeric"],mte=re(qU,Bnt,t=>{var{typed:e,config:n,add:r,numeric:i}=t;return e(qU,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":a,"...":function(l){if(f0(l))throw new TypeError("Scalar values expected in function sum");return o(l)}});function o(s){var l;return Nf(s,function(u){try{l=l===void 0?u:r(l,u)}catch(c){throw ko(c,"sum",u)}}),l===void 0&&(l=i(0,n.number)),typeof l=="string"&&(l=i(l,Uf(l,n))),l}function a(s,l){try{var u=iS(s,l,r);return u}catch(c){throw ko(c,"sum")}}}),v2="cumsum",Lnt=["typed","add","unaryPlus"],gte=re(v2,Lnt,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(v2,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c),u.datatype())},"...":function(u){if(f0(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return o(l)}catch(u){throw ko(u,v2)}}function o(l){if(l.length===0)return[];for(var u=[r(l[0])],c=1;c<l.length;++c)u.push(n(u[c-1],l[c]));return u}function a(l,u){var c=Vt(l);if(u<0||u>=c.length)throw new fl(u,c.length);try{return s(l,u)}catch(f){throw ko(f,v2)}}function s(l,u){var c,f,d;if(u<=0){var h=l[0][0];if(Array.isArray(h)){for(d=ZJ(l),f=[],c=0;c<d.length;c++)f[c]=s(d[c],u-1);return f}else return o(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=s(l[c],u-1);return f}}}),jU="mean",Fnt=["typed","add","divide"],vte=re(jU,Fnt,t=>{var{typed:e,add:n,divide:r}=t;return e(jU,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(s){if(f0(s))throw new TypeError("Scalar values expected in function mean");return o(s)}});function i(a,s){try{var l=iS(a,s,n),u=Array.isArray(a)?Vt(a):a.size();return r(l,u[s])}catch(c){throw ko(c,"mean")}}function o(a){var s,l=0;if(Nf(a,function(u){try{s=s===void 0?u:n(s,u),l++}catch(c){throw ko(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(s,l)}}),GU="median",Pnt=["typed","add","divide","compare","partitionSelect"],$nt=re(GU,Pnt,t=>{var{typed:e,add:n,divide:r,compare:i,partitionSelect:o}=t;function a(u){try{u=Nn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=o(u,f+1),h=u[f],m=0;m<f;++m)i(u[m],h)>0&&(h=u[m]);return l(h,d)}else{var v=o(u,(c-1)/2);return s(v)}}catch(b){throw ko(b,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(GU,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(f0(c))throw new TypeError("Scalar values expected in function median");return a(c)}})}),YU="mad",znt=["typed","abs","map","median","subtract"],Unt=re(YU,znt,t=>{var{typed:e,abs:n,map:r,median:i,subtract:o}=t;return e(YU,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(s){if(s=Nn(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(s);return i(r(s,function(u){return n(o(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):ko(u,"mad")}}}),$3="unbiased",WU="variance",Hnt=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],bte=re(WU,Hnt,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:o,mapSlices:a,isNaN:s}=t;return e(WU,{"Array | Matrix":function(f){return l(f,$3)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,d){return u(f,d,$3)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,$3)}});function l(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Nf(c,function(b){try{d=d===void 0?b:n(d,b),h++}catch(x){throw ko(x,"variance",b)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=o(d,h);if(d=void 0,Nf(c,function(b){var x=r(b,m);d=d===void 0?i(x,x):n(d,i(x,x))}),s(d))return d;switch(f){case"uncorrected":return o(d,h);case"biased":return o(d,h+1);case"unbiased":{var v=Gt(d)?d.mul(0):0;return h===1?v:o(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,f,h=>l(h,d))}catch(h){throw ko(h,"variance")}}}),KU="quantileSeq",Vnt=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],yte=re(KU,Vnt,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t;return e(KU,{"Array | Matrix, number | BigNumber":(C,w)=>v(C,w,!1),"Array | Matrix, number | BigNumber, number":(C,w,A)=>m(C,w,!1,A,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(C,w,A,E)=>m(C,w,A,E,v),"Array | Matrix, Array | Matrix":(C,w)=>b(C,w,!1),"Array | Matrix, Array | Matrix, number":(C,w,A)=>m(C,w,!1,A,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(C,w,A,E)=>m(C,w,A,E,b)});function m(C,w,A,E,T){return h(C,E,N=>T(N,w,A))}function v(C,w,A){var E,T=C.valueOf();if(c(w,0))throw new Error("N/prob must be non-negative");if(f(w,1))return Dt(w)?x(T,w,A):n(x(T,w,A));if(d(w,1)){if(!u(w))throw new Error("N must be a positive integer");if(d(w,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var N=r(w,1);E=[];for(var D=0;c(D,w);D++){var M=o(D+1,N);E.push(x(T,M,A))}return Dt(w)?E:n(E)}}function b(C,w,A){for(var E=C.valueOf(),T=w.valueOf(),N=[],D=0;D<T.length;++D)N.push(x(E,T[D],A));return N}function x(C,w,A){var E=Nn(C),T=E.length;if(T===0)throw new Error("Cannot calculate quantile of an empty sequence");var N=Dt(w)?w*(T-1):w.times(T-1),D=Dt(w)?Math.floor(N):N.floor().toNumber(),M=Dt(w)?N%1:N.minus(D);if(u(N))return A?E[N]:s(E,Dt(w)?N:N.valueOf());var k,B;if(A)k=E[D],B=E[D+1];else{B=s(E,D+1),k=E[D];for(var P=0;P<D;++P)l(E[P],k)>0&&(k=E[P])}return r(a(k,i(1,M)),a(B,M))}}),XU="std",qnt=["typed","map","sqrt","variance"],xte=re(XU,qnt,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(XU,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(s){return o(s)}});function o(a,s){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Oa(l)?n(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),ZU="corr",jnt=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Gnt=re(ZU,jnt,t=>{var{typed:e,matrix:n,sqrt:r,sum:i,add:o,subtract:a,multiply:s,pow:l,divide:u}=t;return e(ZU,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?n(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=i(d),b=i(h),x=d.reduce((T,N,D)=>o(T,s(N,h[D])),0),C=i(d.map(T=>l(T,2))),w=i(h.map(T=>l(T,2))),A=a(s(m,x),s(v,b)),E=r(s(a(s(m,C),l(v,2)),a(s(m,w),l(b,2))));return u(A,E)}}),QU="bernoulli",Ynt=["typed","config","isInteger","number","?BigNumber","?Fraction"],Wnt=re(QU,Ynt,t=>{var{typed:e,config:n,number:r,BigNumber:i,Fraction:o}=t,a=[void 0],s=[void 0],l=[void 0],u=50;return e(QU,{number:c=>z3(c,f=>f,a,(f,d)=>f+d,(f,d)=>f*d,(f,d)=>f/d),"bigint | Fraction":c=>z3(r(c),f=>new o(f),s,(f,d)=>f.add(d),(f,d)=>f.mul(d),(f,d)=>f.div(d)),BigNumber:c=>(n.precision!==u&&(l=[void 0],u=n.precision),z3(r(c),f=>new i(f),l,(f,d)=>f.add(d),(f,d)=>f.mul(d),(f,d)=>f.div(d)))})});function z3(t,e,n,r,i,o){if(t<0||!yt(t))throw new RangeError("Bernoulli index must be nonnegative integer");if(t===0)return e(1);if(t===1)return o(e(-1),e(2));if(t%2===1)return e(0);var a=e(1);n.length===1&&n.push([o(a,e(-3)),o(a,e(-2)),o(a,e(6))]);for(var s=t/2,l=e(0),u=e(2);n.length<=s;){for(var c=n.length,f=Math.floor((c+1)/2),d=l,h=1;h<f;++h)d=r(d,i(n[h][0],n[c-h][0]));d=i(d,u),c%2===0&&(d=r(d,i(n[f][0],n[f][0]))),d=o(d,e(-(2*c+1)));var m=o(i(n[c-1][1],e(-c*(2*c-1))),u);n.push([d,m,i(m,d)])}return n[s][2]}var JU="combinations",Knt=["typed"],Xnt=re(JU,Knt,t=>{var{typed:e}=t;return e(JU,{"number, number":bee,"BigNumber, BigNumber":function(r,i){var o=r.constructor,a,s,l=r.minus(i),u=new o(1);if(!eH(r)||!eH(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(s=u;s.lte(l);s=s.plus(u))a=a.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))a=a.times(l.plus(s)).dividedBy(s);return a}})});function eH(t){return t.isInteger()&&t.gte(0)}var tH="combinationsWithRep",Znt=["typed"],Qnt=re(tH,Znt,t=>{var{typed:e}=t;return e(tH,{"number, number":function(r,i){if(!yt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!yt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var o=Mu(r,r+i-1);return o/Mu(1,i)}var a=Mu(i+1,r+i-1);return a/Mu(1,r-1)},"BigNumber, BigNumber":function(r,i){var o=r.constructor,a,s,l=new o(1),u=r.minus(l);if(!nH(r)||!nH(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(s=l;s.lte(u);s=s.plus(l))a=a.times(i.plus(s)).dividedBy(s);else for(s=l;s.lte(i);s=s.plus(l))a=a.times(u.plus(s)).dividedBy(s);return a}})});function nH(t){return t.isInteger()&&t.gte(0)}var rH="gamma",Jnt=["typed","config","multiplyScalar","pow","BigNumber","Complex"],ert=re(rH,Jnt,t=>{var{typed:e,config:n,multiplyScalar:r,pow:i,BigNumber:o,Complex:a}=t;function s(u){if(u.im===0)return eE(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),f=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(f.sin()).div(s(c))}u=new a(u.re-1,u.im);for(var d=new a(im[0],0),h=1;h<im.length;++h){var m=new a(im[h],0);d=d.add(m.div(u.add(h)))}var v=new a(u.re+xee+.5,u.im),b=Math.sqrt(2*Math.PI),x=v.pow(u.add(.5)),C=v.neg().exp();return d.mul(b).mul(x).mul(C)}return e(rH,{number:eE,Complex:s,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new o(1/0):l(c.minus(1));if(!c.isFinite())return new o(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new o([1,1,2,6,24,120,720,5040][u]);var c=n.precision+(Math.log(u.toNumber())|0),f=o.clone({precision:c});if(u%2===1)return u.times(l(new o(u-1)));for(var d=u,h=new f(u),m=u.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new o(h.toPrecision(o.precision))}}),iH="lgamma",trt=["Complex","typed"],nrt=re(iH,trt,t=>{var{Complex:e,typed:n}=t,r=7,i=7,o=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(iH,{number:tE,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(tE(u.re),0);if(u.re>=r||Math.abs(u.im)>=i)return s(u);if(u.re<=d){var h=A$e(c,u.im)*Math.floor(.5*u.re+.25),m=u.mul(Math.PI).sin().log(),v=a(new e(1-u.re,-u.im));return new e(f,h).sub(m).sub(v)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function s(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(wee),f=new e(1,0).div(u),d=f.div(u),h=o[0],m=o[1],v=2*d.re,b=d.re*d.re+d.im*d.im,x=2;x<8;x++){var C=m;m=-b*h+o[x],h=v*h+C}var w=f.mul(d.mul(h).add(m));return c.add(w)}function l(u){var c=0,f=0,d=u;for(u=u.add(1);u.re<=r;){d=d.mul(u);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,u=u.add(1)}return s(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),oH="factorial",rrt=["typed","gamma"],irt=re(oH,rrt,t=>{var{typed:e,gamma:n}=t;return e(oH,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return n(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return n(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>Yt(i,r))})}),aH="kldivergence",ort=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],art=re(aH,ort,t=>{var{typed:e,matrix:n,divide:r,sum:i,multiply:o,map:a,dotDivide:s,log:l,isNumeric:u}=t;return e(aH,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=i(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var b=i(d);if(b===0)throw new Error("Sum of elements in second object must be non zero");var x=r(f,i(f)),C=r(d,i(d)),w=i(o(x,a(s(x,C),A=>l(A))));return u(w)?w:Number.NaN}}),sH="multinomial",srt=["typed","add","divide","multiply","factorial","isInteger","isPositive"],lrt=re(sH,srt,t=>{var{typed:e,add:n,divide:r,multiply:i,factorial:o,isInteger:a,isPositive:s}=t;return e(sH,{"Array | Matrix":function(u){var c=0,f=1;return Nf(u,function(d){if(!a(d)||!s(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=i(f,o(d))}),r(o(c),f)}})}),lH="permutations",urt=["typed","factorial"],crt=re(lH,urt,t=>{var{typed:e,factorial:n}=t;return e(lH,{"number | BigNumber":n,"number, number":function(i,o){if(!yt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!yt(o)||o<0)throw new TypeError("Positive integer value expected in function permutations");if(o>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Mu(i-o+1,i)},"BigNumber, BigNumber":function(i,o){var a,s;if(!uH(i)||!uH(o))throw new TypeError("Positive integer value expected in function permutations");if(o.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,s=i.minus(o).plus(1);s.lte(i);s=s.plus(1))a=a.times(s);return a}})});function uH(t){return t.isInteger()&&t.gte(0)}var Y2={exports:{}},frt=Y2.exports,cH;function drt(){return cH||(cH=1,(function(t){(function(e,n,r){function i(l){var u=this,c=s();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function o(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function s(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:this.alea=a})(frt,t)})(Y2)),Y2.exports}var W2={exports:{}},hrt=W2.exports,fH;function prt(){return fH||(fH=1,(function(t){(function(e,n,r){function i(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function o(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function a(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(hrt,t)})(W2)),W2.exports}var K2={exports:{}},mrt=K2.exports,dH;function grt(){return dH||(dH=1,(function(t){(function(e,n,r){function i(s){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function a(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(mrt,t)})(K2)),K2.exports}var X2={exports:{}},vrt=X2.exports,hH;function brt(){return hH||(hH=1,(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,s)}function o(s,l){return l.x=s.x.slice(),l.i=s.i,l}function a(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(vrt,t)})(X2)),X2.exports}var Z2={exports:{}},yrt=Z2.exports,pH;function xrt(){return pH||(pH=1,(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,m;return l.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,l.i=d,m+(c^c>>>16)|0};function u(c,f){var d,h,m,v,b,x=[],C=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,C=Math.max(C,f.length)),m=0,v=-32;v<C;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(b=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(b=b+1640531527|0,d=x[v&127]^=h+b,m=d==0?m+1:0);for(m>=128&&(x[(f&&f.length||0)&127]=-1),m=127,v=512;v>0;--v)h=x[m+34&127],d=x[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,x[m]=h^d;c.w=b,c.X=x,c.i=m}u(l,s)}function o(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function a(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(yrt,t)})(Z2)),Z2.exports}var Q2={exports:{}},wrt=Q2.exports,mH;function Ert(){return mH||(mH=1,(function(t){(function(e,n,r){function i(s){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,m=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function o(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function a(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(wrt,t)})(Q2)),Q2.exports}var J2={exports:{}};const Crt={},Srt=Object.freeze(Object.defineProperty({__proto__:null,default:Crt},Symbol.toStringTag,{value:"Module"})),Trt=$ie(Srt);var Art=J2.exports,gH;function Nrt(){return gH||(gH=1,(function(t){(function(e,n,r){var i=256,o=6,a=52,s="random",l=r.pow(i,o),u=r.pow(2,a),c=u*2,f=i-1,d;function h(A,E,T){var N=[];E=E==!0?{entropy:!0}:E||{};var D=x(b(E.entropy?[A,w(n)]:A??C(),3),N),M=new m(N),k=function(){for(var B=M.g(o),P=l,$=0;B<u;)B=(B+$)*i,P*=i,$=M.g(1);for(;B>=c;)B/=2,P/=2,$>>>=1;return(B+$)/P};return k.int32=function(){return M.g(4)|0},k.quick=function(){return M.g(4)/4294967296},k.double=k,x(w(M.S),n),(E.pass||T||function(B,P,$,z){return z&&(z.S&&v(z,M),B.state=function(){return v(M,{})}),$?(r[s]=B,P):B})(k,D,"global"in E?E.global:this==r,E.state)}function m(A){var E,T=A.length,N=this,D=0,M=N.i=N.j=0,k=N.S=[];for(T||(A=[T++]);D<i;)k[D]=D++;for(D=0;D<i;D++)k[D]=k[M=f&M+A[D%T]+(E=k[D])],k[M]=E;(N.g=function(B){for(var P,$=0,z=N.i,j=N.j,L=N.S;B--;)P=L[z=f&z+1],$=$*i+L[f&(L[z]=L[j=f&j+P])+(L[j]=P)];return N.i=z,N.j=j,$})(i)}function v(A,E){return E.i=A.i,E.j=A.j,E.S=A.S.slice(),E}function b(A,E){var T=[],N=typeof A,D;if(E&&N=="object")for(D in A)try{T.push(b(A[D],E-1))}catch{}return T.length?T:N=="string"?A:A+"\0"}function x(A,E){for(var T=A+"",N,D=0;D<T.length;)E[f&D]=f&(N^=E[f&D]*19)+T.charCodeAt(D++);return w(E)}function C(){try{var A;return d&&(A=d.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),w(A)}catch{var E=e.navigator,T=E&&E.plugins;return[+new Date,e,T,e.screen,w(n)]}}function w(A){return String.fromCharCode.apply(0,A)}if(x(r.random(),n),t.exports){t.exports=h;try{d=Trt}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:Art,[],Math)})(J2)),J2.exports}var U3,vH;function Drt(){if(vH)return U3;vH=1;var t=drt(),e=prt(),n=grt(),r=brt(),i=xrt(),o=Ert(),a=Nrt();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=r,a.xor4096=i,a.tychei=o,U3=a,U3}var Mrt=Drt();const wte=Qs(Mrt);var krt=wte(Date.now());function Im(t){var e;function n(i){e=i===null?krt:wte(String(i))}n(t);function r(){return e()}return r}var bH="pickRandom",_rt=["typed","config","?on"],Ort=re(bH,_rt,t=>{var{typed:e,config:n,on:r}=t,i=Im(n.randomSeed);return r&&r("config",function(a,s){a.randomSeed!==s.randomSeed&&(i=Im(a.randomSeed))}),e(bH,{"Array | Matrix":function(s){return o(s,{})},"Array | Matrix, Object":function(s,l){return o(s,l)},"Array | Matrix, number":function(s,l){return o(s,{number:l})},"Array | Matrix, Array | Matrix":function(s,l){return o(s,{weights:l})},"Array | Matrix, Array | Matrix, number":function(s,l,u){return o(s,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(s,l,u){return o(s,{number:l,weights:u})}});function o(a,s){var{number:l,weights:u,elementWise:c=!0}=s,f=typeof l>"u";f&&(l=1);var d=Ot(a)?a.create:Ot(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=Nn(a),u=Nn(u));var h=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=u.length;m<v;m++){if(!Dt(u[m])||u[m]<0)throw new Error("Weights must be an array of positive numbers");h+=u[m]}}for(var b=a.length,x=[],C;x.length<l;){if(typeof u>"u")C=a[Math.floor(i()*b)];else for(var w=i()*h,A=0,E=a.length;A<E;A++)if(w-=u[A],w<0){C=a[A];break}x.push(C)}return f?x[0]:d?d(x):x}});function Z5(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,i=t.shift();r<i;r++)n.push(Z5(t,e));else for(var o=0,a=t.shift();o<a;o++)n.push(e());return n}var yH="random",Irt=["typed","config","?on"],Rrt=re(yH,Irt,t=>{var{typed:e,config:n,on:r}=t,i=Im(n.randomSeed);return r&&r("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=Im(s.randomSeed))}),e(yH,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,l)=>a(s,l),"Array | Matrix":s=>o(s,0,1),"Array | Matrix, number":(s,l)=>o(s,0,l),"Array | Matrix, number, number":(s,l,u)=>o(s,l,u)});function o(s,l,u){var c=Z5(s.valueOf(),()=>a(l,u));return Ot(s)?s.create(c,"number"):c}function a(s,l){return s+i()*(l-s)}}),xH="randomInt",Brt=["typed","config","log2","?on"],Lrt=re(xH,Brt,t=>{var{typed:e,config:n,log2:r,on:i}=t,o=Im(n.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(o=Im(u.randomSeed))}),e(xH,{"":()=>s(0,2),number:u=>s(0,u),"number, number":(u,c)=>s(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>a(u,0,1),"Array | Matrix, number":(u,c)=>a(u,0,c),"Array | Matrix, number, number":(u,c,f)=>a(u,c,f)});function a(u,c,f){var d=Z5(u.valueOf(),()=>s(c,f));return Ot(u)?u.create(d,"number"):d}function s(u,c){return Math.floor(u+o()*(c-u))}function l(u,c){var f=2n**30n,d=c-u;if(d<=f)return u+BigInt(s(0,Number(d)));for(var h=r(d),m=d;m>=d;){m=0n;for(var v=0;v<h;++v)m=2n*m+(o()<.5?0n:1n)}return u+m}}),wH="stirlingS2",Frt=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],Prt=re(wH,Frt,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:o,pow:a,factorial:s,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:d,larger:h}=t,m=[],v=[];return e(wH,{"number | BigNumber, number | BigNumber":function(x,C){if(!c(x)||u(x)||!c(C)||u(C))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(C,x))throw new TypeError("k must be less than or equal to n in function stirlingS2");var w=!(Dt(x)&&Dt(C)),A=w?v:m,E=w?d:f,T=f(x),N=f(C);if(A[T]&&A[T].length>N)return A[T][N];for(var D=0;D<=T;++D)if(A[D]||(A[D]=[E(D===0?1:0)]),D!==0)for(var M=A[D],k=A[D-1],B=M.length;B<=D&&B<=N;++B)B===D?M[B]=1:M[B]=n(i(E(B),k[B]),k[B-1]);return A[T][N]}})}),EH="bellNumbers",$rt=["typed","addScalar","isNegative","isInteger","stirlingS2"],zrt=re(EH,$rt,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:i,stirlingS2:o}=t;return e(EH,{"number | BigNumber":function(s){if(!i(s)||r(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=s;u++)l=n(l,o(s,u));return l}})}),CH="catalan",Urt=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Hrt=re(CH,Urt,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:o,isNegative:a,isInteger:s}=t;return e(CH,{"number | BigNumber":function(u){if(!s(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return r(o(i(u,2),u),n(u,1))}})}),SH="composition",Vrt=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],qrt=re(SH,Vrt,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:i,isNegative:o,isInteger:a,larger:s}=t;return e(SH,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(s(c,u))throw new TypeError("k must be less than or equal to n in function composition");return r(n(u,-1),n(c,-1))}})}),TH="leafCount",jrt=["parse","typed"],Grt=re(TH,jrt,t=>{var{parse:e,typed:n}=t;function r(i){var o=0;return i.forEach(a=>{o+=r(a)}),o||1}return n(TH,{Node:function(o){return r(o)}})});function AH(t){return yn(t)||qr(t)&&t.isUnary()&&yn(t.args[0])}function fE(t){return!!(yn(t)||(Sf(t)||qr(t))&&t.args.every(fE)||Ku(t)&&fE(t.content))}function NH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NH(Object(n),!0).forEach(function(r){oi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Yrt="simplifyUtil",Wrt=["FunctionNode","OperatorNode","SymbolNode"],Q5=re(Yrt,Wrt,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,i=!0,o=!1,a="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:o,total:i,commutative:o,associative:o},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:o,total:i,commutative:o,associative:o},paren:{trivial:i,total:i,commutative:i,associative:o},defaultF:{trivial:o,total:i,commutative:o,associative:o}},l={divide:{total:o},log:{total:o}},u={subtract:{total:o},abs:{trivial:i},log:{total:i}};function c(w,A){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,T=a;if(typeof w=="string"?T=w:qr(w)?T=w.fn.toString():Sf(w)?T=w.name:Ku(w)&&(T="paren"),mt(E,T)){var N=E[T];if(mt(N,A))return N[A];if(mt(s,T))return s[T][A]}if(mt(E,a)){var D=E[a];return mt(D,A)?D[A]:s[a][A]}if(mt(s,T)){var M=s[T];if(mt(M,A))return M[A]}return s[a][A]}function f(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(w,"commutative",A)}function d(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(w,"associative",A)}function h(w,A){var E=H3({},w);for(var T in A)mt(w,T)?E[T]=H3(H3({},A[T]),w[T]):E[T]=A[T];return E}function m(w,A){if(!w.args||w.args.length===0)return w;w.args=v(w,A);for(var E=0;E<w.args.length;E++)m(w.args[E],A)}function v(w,A){var E,T=[],N=function(M){for(var k=0;k<M.args.length;k++){var B=M.args[k];qr(B)&&E===B.op?N(B):T.push(B)}};return d(w,A)?(E=w.op,N(w),T):w.args}function b(w,A){if(!(!w.args||w.args.length===0)){for(var E=C(w),T=w.args.length,N=0;N<T;N++)b(w.args[N],A);if(T>2&&d(w,A)){for(var D=w.args.pop();w.args.length>0;)D=E([w.args.pop(),D]);w.args=D.args}}}function x(w,A){if(!(!w.args||w.args.length===0)){for(var E=C(w),T=w.args.length,N=0;N<T;N++)x(w.args[N],A);if(T>2&&d(w,A)){for(var D=w.args.shift();w.args.length>0;)D=E([D,w.args.shift()]);w.args=D.args}}}function C(w){return qr(w)?function(A){try{return new n(w.op,w.fn,A,w.implicit)}catch(E){return console.error(E),[]}}:function(A){return new e(new r(w.name),A)}}return{createMakeNodeFunction:C,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:b,unflattenl:x,defaultContext:s,realContext:l,positiveContext:u}}),Krt="simplify",Xrt=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],Zrt=re(Krt,Xrt,t=>{var{typed:e,parse:n,equal:r,resolve:i,simplifyConstant:o,simplifyCore:a,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:m,SymbolNode:v,replacer:b}=t,{hasProperty:x,isCommutative:C,isAssociative:w,mergeContext:A,flatten:E,unflattenr:T,unflattenl:N,createMakeNodeFunction:D,defaultContext:M,realContext:k,positiveContext:B}=Q5({FunctionNode:c,OperatorNode:h,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:nm});var P=e("simplify",{Node:Z,"Node, Map":(ie,X)=>Z(ie,!1,X),"Node, Map, Object":(ie,X,le)=>Z(ie,!1,X,le),"Node, Array":Z,"Node, Array, Map":Z,"Node, Array, Map, Object":Z});e.removeConversion({from:"Object",to:"Map",convert:nm}),P.defaultContext=M,P.realContext=k,P.positiveContext=B;function $(ie){return ie.transform(function(X){return Ku(X)?$(X.content):X})}var z={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};P.rules=[a,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},o,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},o,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function j(ie,X){var le={};if(ie.s){var Ce=ie.s.split("->");if(Ce.length===2)le.l=Ce[0],le.r=Ce[1];else throw SyntaxError("Could not parse rule: "+ie.s)}else le.l=ie.l,le.r=ie.r;le.l=$(n(le.l)),le.r=$(n(le.r));for(var he of["imposeContext","repeat","assuming"])he in ie&&(le[he]=ie[he]);if(ie.evaluate&&(le.evaluate=n(ie.evaluate)),w(le.l,X)){var Te=!C(le.l,X),Ae;Te&&(Ae=G());var qe=D(le.l),rt=G();le.expanded={},le.expanded.l=qe([le.l,rt]),E(le.expanded.l,X),T(le.expanded.l,X),le.expanded.r=qe([le.r,rt]),Te&&(le.expandedNC1={},le.expandedNC1.l=qe([Ae,le.l]),le.expandedNC1.r=qe([Ae,le.r]),le.expandedNC2={},le.expandedNC2.l=qe([Ae,le.expanded.l]),le.expandedNC2.r=qe([Ae,le.expanded.r]))}return le}function L(ie,X){for(var le=[],Ce=0;Ce<ie.length;Ce++){var he=ie[Ce],Te=void 0,Ae=typeof he;switch(Ae){case"string":he={s:he};case"object":Te=j(he,X);break;case"function":Te=he;break;default:throw TypeError("Unsupported type of rule: "+Ae)}le.push(Te)}return le}var U=0;function G(){return new v("_p"+U++)}function Z(ie,X){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y1(),Ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=Ce.consoleDebug;X=L(X||P.rules,Ce.context);var Te=i(ie,le);Te=$(Te);for(var Ae={},qe=Te.toString({parenthesis:"all"});!Ae[qe];){Ae[qe]=!0,U=0;var rt=qe;he&&console.log("Working on: ",qe);for(var lt=0;lt<X.length;lt++){var Qe="";if(typeof X[lt]=="function"?(Te=X[lt](Te,Ce),he&&(Qe=X[lt].name)):(E(Te,Ce.context),Te=W(Te,X[lt],Ce.context),he&&(Qe="".concat(X[lt].l.toString()," -> ").concat(X[lt].r.toString()))),he){var st=Te.toString({parenthesis:"all"});st!==rt&&(console.log("Applying",Qe,"produced",st),rt=st)}N(Te,Ce.context)}qe=Te.toString({parenthesis:"all"})}return Te}function H(ie,X,le){var Ce=ie;if(ie)for(var he=0;he<ie.length;++he){var Te=W(ie[he],X,le);Te!==ie[he]&&(Ce===ie&&(Ce=ie.slice()),Ce[he]=Te)}return Ce}function W(ie,X,le){if(X.assuming){for(var Ce in X.assuming)for(var he in X.assuming[Ce])if(x(Ce,he,le)!==X.assuming[Ce][he])return ie}var Te=A(X.imposeContext,le),Ae=ie;if(Ae instanceof h||Ae instanceof c){var qe=H(Ae.args,X,le);qe!==Ae.args&&(Ae=Ae.clone(),Ae.args=qe)}else if(Ae instanceof m){if(Ae.content){var rt=W(Ae.content,X,le);rt!==Ae.content&&(Ae=new m(rt))}}else if(Ae instanceof l){var lt=H(Ae.items,X,le);lt!==Ae.items&&(Ae=new l(lt))}else if(Ae instanceof s){var Qe=Ae.object;Ae.object&&(Qe=W(Ae.object,X,le));var st=Ae.index;Ae.index&&(st=W(Ae.index,X,le)),(Qe!==Ae.object||st!==Ae.index)&&(Ae=new s(Qe,st))}else if(Ae instanceof f){var dt=H(Ae.dimensions,X,le);dt!==Ae.dimensions&&(Ae=new f(dt))}else if(Ae instanceof d){var te=!1,me={};for(var J in Ae.properties)me[J]=W(Ae.properties[J],X,le),me[J]!==Ae.properties[J]&&(te=!0);te&&(Ae=new d(me))}var ae=X.r,ge=ce(X.l,Ae,Te)[0];if(!ge&&X.expanded&&(ae=X.expanded.r,ge=ce(X.expanded.l,Ae,Te)[0]),!ge&&X.expandedNC1&&(ae=X.expandedNC1.r,ge=ce(X.expandedNC1.l,Ae,Te)[0],ge||(ae=X.expandedNC2.r,ge=ce(X.expandedNC2.l,Ae,Te)[0])),ge){var se=Ae.implicit;Ae=ae.clone(),se&&"implicit"in ae&&(Ae.implicit=!0),Ae=Ae.transform(function(fe){return fe.isSymbolNode&&mt(ge.placeholders,fe.name)?ge.placeholders[fe.name].clone():fe})}return X.repeat&&Ae!==ie&&(Ae=W(Ae,X,le)),Ae}function K(ie,X){var le=[],Ce,he,Te=D(ie);if(C(ie,X))for(var Ae=0;Ae<ie.args.length;Ae++)he=ie.args.slice(0),he.splice(Ae,1),Ce=he.length===1?he[0]:Te(he),le.push(Te([ie.args[Ae],Ce]));else for(var qe=1;qe<ie.args.length;qe++){var rt=ie.args[0];qe>1&&(rt=Te(ie.args.slice(0,qe))),he=ie.args.slice(qe),Ce=he.length===1?he[0]:Te(he),le.push(Te([rt,Ce]))}return le}function I(ie,X){var le={placeholders:{}};if(!ie.placeholders&&!X.placeholders)return le;if(ie.placeholders){if(!X.placeholders)return ie}else return X;for(var Ce in ie.placeholders)if(mt(ie.placeholders,Ce)&&(le.placeholders[Ce]=ie.placeholders[Ce],mt(X.placeholders,Ce)&&!ve(ie.placeholders[Ce],X.placeholders[Ce])))return null;for(var he in X.placeholders)mt(X.placeholders,he)&&(le.placeholders[he]=X.placeholders[he]);return le}function ee(ie,X){var le=[];if(ie.length===0||X.length===0)return le;for(var Ce,he=0;he<ie.length;he++)for(var Te=0;Te<X.length;Te++)Ce=I(ie[he],X[Te]),Ce&&le.push(Ce);return le}function Q(ie){if(ie.length===0)return ie;for(var X=ie.reduce(ee),le=[],Ce={},he=0;he<X.length;he++){var Te=JSON.stringify(X[he],b);Ce[Te]||(Ce[Te]=!0,le.push(X[he]))}return le}function ce(ie,X,le,Ce){var he=[{placeholders:{}}];if(ie instanceof h&&X instanceof h||ie instanceof c&&X instanceof c){if(ie instanceof h){if(ie.op!==X.op||ie.fn!==X.fn)return[]}else if(ie instanceof c&&ie.name!==X.name)return[];if(X.args.length===1&&ie.args.length===1||!w(X,le)&&X.args.length===ie.args.length||Ce){for(var Te=[],Ae=0;Ae<ie.args.length;Ae++){var qe=ce(ie.args[Ae],X.args[Ae],le);if(qe.length===0)break;Te.push(qe)}if(Te.length!==ie.args.length){if(!C(X,le)||ie.args.length===1)return[];if(ie.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var rt=ce(ie.args[0],X.args[1],le);if(rt.length===0)return[];var lt=ce(ie.args[1],X.args[0],le);if(lt.length===0)return[];Te=[rt,lt]}he=Q(Te)}else if(X.args.length>=2&&ie.args.length===2){for(var Qe=K(X,le),st=[],dt=0;dt<Qe.length;dt++){var te=ce(ie,Qe[dt],le,!0);st=st.concat(te)}return st}else{if(ie.args.length>2)throw Error("Unexpected non-binary associative function: "+ie.toString());return[]}}else if(ie instanceof v){if(ie.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(z[ie.name]){if(ie.name!==X.name)return[]}else switch(ie.name[1]>="a"&&ie.name[1]<="z"?ie.name.substring(0,2):ie.name[0]){case"n":case"_p":he[0].placeholders[ie.name]=X;break;case"c":case"cl":if(yn(X))he[0].placeholders[ie.name]=X;else return[];break;case"v":if(!yn(X))he[0].placeholders[ie.name]=X;else return[];break;case"vl":if(Si(X))he[0].placeholders[ie.name]=X;else return[];break;case"cd":if(AH(X))he[0].placeholders[ie.name]=X;else return[];break;case"vd":if(!AH(X))he[0].placeholders[ie.name]=X;else return[];break;case"ce":if(fE(X))he[0].placeholders[ie.name]=X;else return[];break;case"ve":if(!fE(X))he[0].placeholders[ie.name]=X;else return[];break;default:throw new Error("Invalid symbol in rule: "+ie.name)}}else if(ie instanceof u){if(!r(ie.value,X.value))return[]}else return[];return he}function ve(ie,X){if(ie instanceof u&&X instanceof u){if(!r(ie.value,X.value))return!1}else if(ie instanceof v&&X instanceof v){if(ie.name!==X.name)return!1}else if(ie instanceof h&&X instanceof h||ie instanceof c&&X instanceof c){if(ie instanceof h){if(ie.op!==X.op||ie.fn!==X.fn)return!1}else if(ie instanceof c&&ie.name!==X.name)return!1;if(ie.args.length!==X.args.length)return!1;for(var le=0;le<ie.args.length;le++)if(!ve(ie.args[le],X.args[le]))return!1}else return!1;return!0}return P}),Qrt="simplifyConstant",Jrt=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],eit=re(Qrt,Jrt,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:i,isBounded:o,fraction:a,bignumber:s,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,SymbolNode:v}=t,{isCommutative:b,isAssociative:x,allChildren:C,createMakeNodeFunction:w}=Q5({FunctionNode:f,OperatorNode:m,SymbolNode:v}),A=e("simplifyConstant",{Node:L=>D(j(L,{})),"Node, Object":function(U,G){return D(j(U,G))}});function E(L){return _v(L)?L.valueOf():L instanceof Array?L.map(E):Ot(L)?i(E(L.valueOf())):L}function T(L,U,G){try{return r[L].apply(null,U)}catch{return U=U.map(E),k(r[L].apply(null,U),G)}}var N=e({Fraction:P,number:function(U){return U<0?B(new c(-U)):new c(U)},BigNumber:function(U){return U<0?B(new c(-U)):new c(U)},bigint:function(U){return U<0n?B(new c(-U)):new c(U)},Complex:function(U){throw new Error("Cannot convert Complex number to Node")},string:function(U){return new c(U)},Matrix:function(U){return new u(U.valueOf().map(G=>N(G)))}});function D(L){return jn(L)?L:N(L)}function M(L,U){var G=U&&U.exactFractions!==!1;if(G&&o(L)&&a){var Z=a(L),H=U&&typeof U.fractionsLimit=="number"?U.fractionsLimit:1/0;if(Z.valueOf()===L&&Z.n<H&&Z.d<H)return Z}return L}var k=e({"string, Object":function(U,G){var Z=Uf(U,n);if(Z==="BigNumber")return s===void 0&&Y5(),s(U);if(Z==="bigint")return BigInt(U);if(Z==="Fraction")return a===void 0&&tte(),a(U);var H=parseFloat(U);return M(H,G)},"Fraction, Object":function(U,G){return U},"BigNumber, Object":function(U,G){return U},"number, Object":function(U,G){return M(U,G)},"bigint, Object":function(U,G){return U},"Complex, Object":function(U,G){return U.im!==0?U:M(U.re,G)},"Matrix, Object":function(U,G){return i(M(U.valueOf()))},"Array, Object":function(U,G){return U.map(M)}});function B(L){return new m("-","unaryMinus",[L])}function P(L){var U=H=>n.number==="BigNumber"&&s?s(H):Number(H),G=L.s*L.n,Z=G<0n?new m("-","unaryMinus",[new c(-U(G))]):new c(U(G));return L.d===1n?Z:new m("/","divide",[Z,new c(U(L.d))])}function $(L,U,G){if(!c0(U))return new l(D(L),D(U));if(es(L)||Ot(L)){for(var Z=Array.from(U.dimensions);Z.length>0;)if(yn(Z[0])&&typeof Z[0].value!="string"){var H=k(Z.shift().value,G);es(L)?L=L.items[H-1]:(L=L.valueOf()[H-1],L instanceof Array&&(L=i(L)))}else if(Z.length>1&&yn(Z[1])&&typeof Z[1].value!="string"){var W=k(Z[1].value,G),K=[],I=es(L)?L.items:L.valueOf();for(var ee of I)if(es(ee))K.push(ee.items[W-1]);else if(Ot(L))K.push(ee[W-1]);else break;if(K.length===I.length)es(L)?L=new u(K):L=i(K),Z.splice(1,1);else break}else break;return Z.length===U.dimensions.length?new l(D(L),U):Z.length>0?(U=new d(Z),new l(D(L),U)):L}if(QC(L)&&U.dimensions.length===1&&yn(U.dimensions[0])){var Q=U.dimensions[0].value;return Q in L.properties?L.properties[Q]:new c}return new l(D(L),U)}function z(L,U,G,Z){var H=U.shift(),W=U.reduce((K,I)=>{if(!jn(I)){var ee=K.pop();if(jn(ee))return[ee,I];try{return K.push(T(L,[ee,I],Z)),K}catch{K.push(ee)}}K.push(D(K.pop()));var Q=K.length===1?K[0]:G(K);return[G([Q,D(I)])]},[H]);return W.length===1?W[0]:G([W[0],N(W[1])])}function j(L,U){switch(L.type){case"SymbolNode":return L;case"ConstantNode":switch(typeof L.value){case"number":return k(L.value,U);case"bigint":return k(L.value,U);case"string":return L.value;default:if(!isNaN(L.value))return k(L.value,U)}return L;case"FunctionNode":if(r[L.name]&&r[L.name].rawArgs)return L;{var G=["add","multiply"];if(!G.includes(L.name)){var Z=L.args.map(he=>j(he,U));if(!Z.some(jn))try{return T(L.name,Z,U)}catch{}if(L.name==="size"&&Z.length===1&&es(Z[0])){for(var H=[],W=Z[0];es(W);)H.push(W.items.length),W=W.items[0];return i(H)}return new f(L.name,Z.map(D))}}case"OperatorNode":{var K=L.fn.toString(),I,ee,Q=w(L);if(qr(L)&&L.isUnary())I=[j(L.args[0],U)],jn(I[0])?ee=Q(I):ee=T(K,I,U);else if(x(L,U.context))if(I=C(L,U.context),I=I.map(he=>j(he,U)),b(K,U.context)){for(var ce=[],ve=[],ie=0;ie<I.length;ie++)jn(I[ie])?ve.push(I[ie]):ce.push(I[ie]);ce.length>1?(ee=z(K,ce,Q,U),ve.unshift(ee),ee=z(K,ve,Q,U)):ee=z(K,I,Q,U)}else ee=z(K,I,Q,U);else I=L.args.map(he=>j(he,U)),ee=z(K,I,Q,U);return ee}case"ParenthesisNode":return j(L.content,U);case"AccessorNode":return $(j(L.object,U),j(L.index,U),U);case"ArrayNode":{var X=L.items.map(he=>j(he,U));return X.some(jn)?new u(X.map(D)):i(X)}case"IndexNode":return new d(L.dimensions.map(he=>A(he,U)));case"ObjectNode":{var le={};for(var Ce in L.properties)le[Ce]=A(L.properties[Ce],U);return new h(le)}default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(L.type))}}return A}),DH="simplifyCore",tit=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],nit=re(DH,tit,t=>{var{typed:e,parse:n,equal:r,isZero:i,add:o,subtract:a,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:b,ParenthesisNode:x,SymbolNode:C}=t,w=new d(0),A=new d(1),E=new d(!0),T=new d(!1);function N(B){return qr(B)&&["and","not","or"].includes(B.op)}var{hasProperty:D,isCommutative:M}=Q5({FunctionNode:h,OperatorNode:b,SymbolNode:C});function k(B){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=P?P.context:void 0;if(D(B,"trivial",$)){if(Sf(B)&&B.args.length===1)return k(B.args[0],P);var z=!1,j=0;if(B.forEach(ce=>{++j,j===1&&(z=k(ce,P))}),j===1)return z}var L=B;if(Sf(L)){var U=qKe(L.name);if(U){if(L.args.length>2&&D(L,"associative",$))for(;L.args.length>2;){var G=L.args.pop(),Z=L.args.pop();L.args.push(new b(U,L.name,[G,Z]))}L=new b(U,L.name,L.args)}else return new h(k(L.fn),L.args.map(ce=>k(ce,P)))}if(qr(L)&&L.isUnary()){var H=k(L.args[0],P);if(L.op==="~"&&qr(H)&&H.isUnary()&&H.op==="~"||L.op==="not"&&qr(H)&&H.isUnary()&&H.op==="not"&&N(H.args[0]))return H.args[0];var W=!0;if(L.op==="-"&&qr(H)&&(H.isBinary()&&H.fn==="subtract"&&(L=new b("-","subtract",[H.args[1],H.args[0]]),W=!1),H.isUnary()&&H.op==="-"))return H.args[0];if(W)return new b(L.op,L.fn,[H])}if(qr(L)&&L.isBinary()){var K=k(L.args[0],P),I=k(L.args[1],P);if(L.op==="+"){if(yn(K)&&i(K.value))return I;if(yn(I)&&i(I.value))return K;qr(I)&&I.isUnary()&&I.op==="-"&&(I=I.args[0],L=new b("-","subtract",[K,I]))}if(L.op==="-")return qr(I)&&I.isUnary()&&I.op==="-"?k(new b("+","add",[K,I.args[0]]),P):yn(K)&&i(K.value)?k(new b("-","unaryMinus",[I])):yn(I)&&i(I.value)?K:new b(L.op,L.fn,[K,I]);if(L.op==="*"){if(yn(K)){if(i(K.value))return w;if(r(K.value,1))return I}if(yn(I)){if(i(I.value))return w;if(r(I.value,1))return K;if(M(L,$))return new b(L.op,L.fn,[I,K],L.implicit)}return new b(L.op,L.fn,[K,I],L.implicit)}if(L.op==="/")return yn(K)&&i(K.value)?w:yn(I)&&r(I.value,1)?K:new b(L.op,L.fn,[K,I]);if(L.op==="^"&&yn(I)){if(i(I.value))return A;if(r(I.value,1))return K}if(L.op==="and"){if(yn(K))if(K.value){if(N(I))return I;if(yn(I))return I.value?E:T}else return T;if(yn(I))if(I.value){if(N(K))return K}else return T}if(L.op==="or"){if(yn(K)){if(K.value)return E;if(N(I))return I}if(yn(I)){if(I.value)return E;if(N(K))return K}}return new b(L.op,L.fn,[K,I])}if(qr(L))return new b(L.op,L.fn,L.args.map(ce=>k(ce,P)));if(es(L))return new f(L.items.map(ce=>k(ce,P)));if(Wu(L))return new c(k(L.object,P),k(L.index,P));if(c0(L))return new m(L.dimensions.map(ce=>k(ce,P)));if(QC(L)){var ee={};for(var Q in L.properties)ee[Q]=k(L.properties[Q],P);return new v(ee)}return L}return e(DH,{Node:k,"Node,Object":k})}),rit="resolve",iit=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],oit=re(rit,iit,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:o,ParenthesisNode:a}=t;function s(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(Si(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=u.get(l.name);if(jn(d)){var h=new Set(c);return h.add(l.name),s(d,u,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):l}else if(qr(l)){var m=l.args.map(function(b){return s(b,u,c)});return new o(l.op,l.fn,m,l.implicit)}else{if(Ku(l))return new a(s(l.content,u,c));if(Sf(l)){var v=l.args.map(function(b){return s(b,u,c)});return new i(l.name,v)}}return l.map(b=>s(b,u,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(l,u)=>s(l,nm(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,nm(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,nm(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),MH="symbolicEqual",ait=["parse","simplify","typed","OperatorNode"],sit=re(MH,ait,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:i}=t;function o(a,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,s]),c=n(u,{},l);return yn(c)&&!c.value}return r(MH,{"Node, Node":o,"Node, Node, Object":o})}),kH="derivative",lit=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],uit=re(kH,lit,t=>{var{typed:e,config:n,parse:r,simplify:i,equal:o,isZero:a,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(A,E){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},N=new Map,D=E.name;function M(B){var P=N.get(B);if(P!==void 0)return P;var $=x(M,B,D);return N.set(B,$),$}var k=C(A,M);return T.simplify?i(k):k}function m(A){var E=r(A);if(!E.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(A)," into a variable in function derivative"));return E}var v=e(kH,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(A,E)=>h(A,m(E)),"Node, string, Object":(A,E,T)=>h(A,m(E),T)});v._simplify=!0,v.toTex=function(A){return b.apply(null,A.args)};var b=e("_derivTex",{"Node, SymbolNode":function(E,T){return yn(E)&&Zn(E.value)==="string"?b(r(E.value).toString(),T.toString(),1):b(E.toTex(),T.toString(),1)},"Node, ConstantNode":function(E,T){if(Zn(T.value)==="string")return b(E,r(T.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(E,T,N){return b(E.toString(),T.name,N.value)},"string, string, number":function(E,T,N){var D;return N===1?D="{d\\over d"+T+"}":D="{d^{"+N+"}\\over d"+T+"^{"+N+"}}",D+"\\left[".concat(E,"\\right]")}}),x=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(E,T,N){return T.name!==N},"function, ParenthesisNode, string":function(E,T,N){return E(T.content,N)},"function, FunctionAssignmentNode, string":function(E,T,N){return T.params.includes(N)?E(T.expr,N):!0},"function, FunctionNode | OperatorNode, string":function(E,T,N){return T.args.every(D=>E(D,N))}}),C=e("_derivative",{"ConstantNode, function":function(){return w(0)},"SymbolNode, function":function(E,T){return T(E)?w(0):w(1)},"ParenthesisNode, function":function(E,T){return new f(C(E.content,T))},"FunctionAssignmentNode, function":function(E,T){return T(E)?w(0):C(E.expr,T)},"FunctionNode, function":function(E,T){if(T(E))return w(0);var N=E.args[0],D,M=!1,k=!1,B;switch(E.name){case"cbrt":M=!0,B=new c("*","multiply",[w(3),new c("^","pow",[N,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(E.args.length===1)M=!0,B=new c("*","multiply",[w(2),new u("sqrt",[N])]);else if(E.args.length===2)return D=new c("/","divide",[w(1),E.args[1]]),C(new c("^","pow",[N,D]),T);break;case"log10":D=w(10);case"log":if(!D&&E.args.length===1)B=N.clone(),M=!0;else if(E.args.length===1&&D||E.args.length===2&&T(E.args[1]))B=new c("*","multiply",[N.clone(),new u("log",[D||E.args[1]])]),M=!0;else if(E.args.length===2)return C(new c("/","divide",[new u("log",[N]),new u("log",[E.args[1]])]),T);break;case"pow":if(E.args.length===2)return C(new c("^","pow",[N,E.args[1]]),T);break;case"exp":B=new u("exp",[N.clone()]);break;case"sin":B=new u("cos",[N.clone()]);break;case"cos":B=new c("-","unaryMinus",[new u("sin",[N.clone()])]);break;case"tan":B=new c("^","pow",[new u("sec",[N.clone()]),w(2)]);break;case"sec":B=new c("*","multiply",[E,new u("tan",[N.clone()])]);break;case"csc":k=!0,B=new c("*","multiply",[E,new u("cot",[N.clone()])]);break;case"cot":k=!0,B=new c("^","pow",[new u("csc",[N.clone()]),w(2)]);break;case"asin":M=!0,B=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[N.clone(),w(2)])])]);break;case"acos":M=!0,k=!0,B=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[N.clone(),w(2)])])]);break;case"atan":M=!0,B=new c("+","add",[new c("^","pow",[N.clone(),w(2)]),w(1)]);break;case"asec":M=!0,B=new c("*","multiply",[new u("abs",[N.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[N.clone(),w(2)]),w(1)])])]);break;case"acsc":M=!0,k=!0,B=new c("*","multiply",[new u("abs",[N.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[N.clone(),w(2)]),w(1)])])]);break;case"acot":M=!0,k=!0,B=new c("+","add",[new c("^","pow",[N.clone(),w(2)]),w(1)]);break;case"sinh":B=new u("cosh",[N.clone()]);break;case"cosh":B=new u("sinh",[N.clone()]);break;case"tanh":B=new c("^","pow",[new u("sech",[N.clone()]),w(2)]);break;case"sech":k=!0,B=new c("*","multiply",[E,new u("tanh",[N.clone()])]);break;case"csch":k=!0,B=new c("*","multiply",[E,new u("coth",[N.clone()])]);break;case"coth":k=!0,B=new c("^","pow",[new u("csch",[N.clone()]),w(2)]);break;case"asinh":M=!0,B=new u("sqrt",[new c("+","add",[new c("^","pow",[N.clone(),w(2)]),w(1)])]);break;case"acosh":M=!0,B=new u("sqrt",[new c("-","subtract",[new c("^","pow",[N.clone(),w(2)]),w(1)])]);break;case"atanh":M=!0,B=new c("-","subtract",[w(1),new c("^","pow",[N.clone(),w(2)])]);break;case"asech":M=!0,k=!0,B=new c("*","multiply",[N.clone(),new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[N.clone(),w(2)])])])]);break;case"acsch":M=!0,k=!0,B=new c("*","multiply",[new u("abs",[N.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[N.clone(),w(2)]),w(1)])])]);break;case"acoth":M=!0,k=!0,B=new c("-","subtract",[w(1),new c("^","pow",[N.clone(),w(2)])]);break;case"abs":B=new c("/","divide",[new u(new d("abs"),[N.clone()]),N.clone()]);break;default:throw new Error('Cannot process function "'+E.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var P,$;M?(P="/",$="divide"):(P="*",$="multiply");var z=C(N,T);return k&&(z=new c("-","unaryMinus",[z])),new c(P,$,[z,B])},"OperatorNode, function":function(E,T){if(T(E))return w(0);if(E.op==="+")return new c(E.op,E.fn,E.args.map(function(L){return C(L,T)}));if(E.op==="-"){if(E.isUnary())return new c(E.op,E.fn,[C(E.args[0],T)]);if(E.isBinary())return new c(E.op,E.fn,[C(E.args[0],T),C(E.args[1],T)])}if(E.op==="*"){var N=E.args.filter(function(L){return T(L)});if(N.length>0){var D=E.args.filter(function(L){return!T(L)}),M=D.length===1?D[0]:new c("*","multiply",D),k=N.concat(C(M,T));return new c("*","multiply",k)}return new c("+","add",E.args.map(function(L){return new c("*","multiply",E.args.map(function(U){return U===L?C(U,T):U.clone()}))}))}if(E.op==="/"&&E.isBinary()){var B=E.args[0],P=E.args[1];return T(P)?new c("/","divide",[C(B,T),P]):T(B)?new c("*","multiply",[new c("-","unaryMinus",[B]),new c("/","divide",[C(P,T),new c("^","pow",[P.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[C(B,T),P.clone()]),new c("*","multiply",[B.clone(),C(P,T)])]),new c("^","pow",[P.clone(),w(2)])])}if(E.op==="^"&&E.isBinary()){var $=E.args[0],z=E.args[1];if(T($))return yn($)&&(a($.value)||o($.value,1))?w(0):new c("*","multiply",[E,new c("*","multiply",[new u("log",[$.clone()]),C(z.clone(),T)])]);if(T(z)){if(yn(z)){if(a(z.value))return w(0);if(o(z.value,1))return C($,T)}var j=new c("^","pow",[$.clone(),new c("-","subtract",[z,w(1)])]);return new c("*","multiply",[z.clone(),new c("*","multiply",[C($,T),j])])}return new c("*","multiply",[new c("^","pow",[$.clone(),z.clone()]),new c("+","add",[new c("*","multiply",[C($,T),new c("/","divide",[z.clone(),$.clone()])]),new c("*","multiply",[C(z,T),new u("log",[$.clone()])])])])}throw new Error('Cannot process operator "'+E.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(A,E){return new l(s(A,Uf(String(A),n)))}return v}),_H="rationalize",cit=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],fit=re(_H,cit,t=>{var{config:e,typed:n,equal:r,isZero:i,add:o,subtract:a,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:b,matrix:x,AccessorNode:C,ArrayNode:w,ConstantNode:A,FunctionNode:E,IndexNode:T,ObjectNode:N,OperatorNode:D,SymbolNode:M,ParenthesisNode:k}=t;function B(L){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Z=$(),H=P(L,U,!0,Z.firstRules),W=H.variables.length,K={exactFractions:!1},I={exactFractions:!0};if(L=H.expression,W>=1){L=z(L);var ee,Q,ce=!0,ve=!1;L=h(L,Z.firstRules,{},K);for(var ie;Q=ce?Z.distrDivRules:Z.sucDivRules,L=h(L,Q,{},I),ce=!ce,ie=L.toString(),ie!==ee;)ve=!0,ee=ie;ve&&(L=h(L,Z.firstRulesAgain,{},K)),L=h(L,Z.finalRules,{},K)}var X=[],le={};return L.type==="OperatorNode"&&L.isBinary()&&L.op==="/"?(W===1&&(L.args[0]=j(L.args[0],X),L.args[1]=j(L.args[1])),G&&(le.numerator=L.args[0],le.denominator=L.args[1])):(W===1&&(L=j(L,X)),G&&(le.numerator=L,le.denominator=null)),G?(le.coefficients=X,le.variables=H.variables,le.expression=L,le):L}return n(_H,{Node:B,"Node, boolean":(L,U)=>B(L,{},U),"Node, Object":B,"Node, Object, boolean":B});function P(L,U,G,Z){var H=[],W=h(L,Z,U,{exactFractions:!1});G=!!G;var K="+-*"+(G?"/":"");ee(W);var I={};return I.expression=W,I.variables=H,I;function ee(Q){var ce=Q.type;if(ce==="FunctionNode")throw new Error("There is an unsolved function call");if(ce==="OperatorNode")if(Q.op==="^"){if(Q.args[1].type!=="ConstantNode"||!yt(parseFloat(Q.args[1].value)))throw new Error("There is a non-integer exponent");ee(Q.args[0])}else{if(!K.includes(Q.op))throw new Error("Operator "+Q.op+" invalid in polynomial expression");for(var ve=0;ve<Q.args.length;ve++)ee(Q.args[ve])}else if(ce==="SymbolNode"){var ie=Q.name,X=H.indexOf(ie);X===-1&&H.push(ie)}else if(ce==="ParenthesisNode")ee(Q.content);else if(ce!=="ConstantNode")throw new Error("type "+ce+" is not allowed in polynomial expression")}}function $(){var L=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],U=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],G=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],Z=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],H={};return H.firstRules=L.concat(U,Z),H.distrDivRules=G,H.sucDivRules=Z,H.firstRulesAgain=L.concat(U),H.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],H}function z(L,U,G){var Z=L.type,H=arguments.length>1;if(Z==="OperatorNode"&&L.isBinary()){var W=!1,K;if(L.op==="^"&&(L.args[0].type==="ParenthesisNode"||L.args[0].type==="OperatorNode")&&L.args[1].type==="ConstantNode"&&(K=parseFloat(L.args[1].value),W=K>=2&&yt(K)),W){if(K>2){var I=L.args[0],ee=new D("^","pow",[L.args[0].cloneDeep(),new A(K-1)]);L=new D("*","multiply",[I,ee])}else L=new D("*","multiply",[L.args[0],L.args[0].cloneDeep()]);H&&(G==="content"?U.content=L:U.args[G]=L)}}if(Z==="ParenthesisNode")z(L.content,L,"content");else if(Z!=="ConstantNode"&&Z!=="SymbolNode")for(var Q=0;Q<L.args.length;Q++)z(L.args[Q],L,Q);if(!H)return L}function j(L,U){U===void 0&&(U=[]),U[0]=0;var G={};G.cte=1,G.oper="+",G.fire="";var Z=0,H="";ie(L,null,G),Z=U.length-1;for(var W=!0,K,I=Z;I>=0;I--)if(U[I]!==0){var ee=new A(W?U[I]:Math.abs(U[I])),Q=U[I]<0?"-":"+";if(I>0){var ce=new M(H);if(I>1){var ve=new A(I);ce=new D("^","pow",[ce,ve])}U[I]===-1&&W?ee=new D("-","unaryMinus",[ce]):Math.abs(U[I])===1?ee=ce:ee=new D("*","multiply",[ee,ce])}W?K=ee:Q==="+"?K=new D("+","add",[K,ee]):K=new D("-","subtract",[K,ee]),W=!1}if(W)return new A(0);return K;function ie(X,le,Ce){var he=X.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode"){if(!"+-*^".includes(X.op))throw new Error("Operator "+X.op+" invalid");if(le!==null){if((X.fn==="unaryMinus"||X.fn==="pow")&&le.fn!=="add"&&le.fn!=="subtract"&&le.fn!=="multiply")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="multiply")&&le.fn!=="add"&&le.fn!=="subtract")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="unaryMinus")&&Ce.noFil!==0)throw new Error("Invalid "+X.op+" placing")}(X.op==="^"||X.op==="*")&&(Ce.fire=X.op);for(var Te=0;Te<X.args.length;Te++)X.fn==="unaryMinus"&&(Ce.oper="-"),(X.op==="+"||X.fn==="subtract")&&(Ce.fire="",Ce.cte=1,Ce.oper=Te===0?"+":X.op),Ce.noFil=Te,ie(X.args[Te],X,Ce)}else if(he==="SymbolNode"){if(X.name!==H&&H!=="")throw new Error("There is more than one variable");if(H=X.name,le===null){U[1]=1;return}if(le.op==="^"&&Ce.noFil!==0)throw new Error("In power the variable should be the first parameter");if(le.op==="*"&&Ce.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Ce.fire===""||Ce.fire==="*")&&(Z<1&&(U[1]=0),U[1]+=Ce.cte*(Ce.oper==="+"?1:-1),Z=Math.max(1,Z))}else if(he==="ConstantNode"){var Ae=parseFloat(X.value);if(le===null){U[0]=Ae;return}if(le.op==="^"){if(Ce.noFil!==1)throw new Error("Constant cannot be powered");if(!yt(Ae)||Ae<=0)throw new Error("Non-integer exponent is not allowed");for(var qe=Z+1;qe<Ae;qe++)U[qe]=0;Ae>Z&&(U[Ae]=0),U[Ae]+=Ce.cte*(Ce.oper==="+"?1:-1),Z=Math.max(Ae,Z);return}Ce.cte=Ae,Ce.fire===""&&(U[0]+=Ce.cte*(Ce.oper==="+"?1:-1))}else throw new Error("Type "+he+" is not allowed")}}}),OH="zpk2tf",dit=["typed","add","multiply","Complex","number"],hit=re(OH,dit,t=>{var{typed:e,add:n,multiply:r,Complex:i,number:o}=t;return e(OH,{"Array,Array,number":function(u,c,f){return a(u,c,f)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return a(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(C=>C.type==="BigNumber")&&(l=l.map(C=>o(C))),u.some(C=>C.type==="BigNumber")&&(u=u.map(C=>o(C)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<l.length;h++){var m=l[h];typeof m=="number"&&(m=i(m,0)),f=s(f,[i(1,0),i(-m.re,-m.im)])}for(var v=0;v<u.length;v++){var b=u[v];typeof b=="number"&&(b=i(b,0)),d=s(d,[i(1,0),i(-b.re,-b.im)])}for(var x=0;x<f.length;x++)f[x]=r(f[x],c);return[f,d]}function s(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var d=0;d<l.length;d++)f-d>=0&&f-d<u.length&&(c[f]=n(c[f],r(l[d],u[f-d])))}return c}}),IH="freqz",pit=["typed","add","multiply","Complex","divide","matrix"],mit=re(IH,pit,t=>{var{typed:e,add:n,multiply:r,Complex:i,divide:o,matrix:a}=t;return e(IH,{"Array, Array":function(c,f){var d=l(512);return s(c,f,d)},"Array, Array, Array":function(c,f,d){return s(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d);return s(c,f,h)},"Matrix, Matrix":function(c,f){var d=l(512),{w:h,h:m}=s(c.valueOf(),f.valueOf(),d);return{w:a(h),h:a(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=s(c.valueOf(),f.valueOf(),d.valueOf());return{h:a(h),w:a(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d),{h:m}=s(c.valueOf(),f.valueOf(),h);return{h:a(m),w:a(h)}}});function s(u,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=i(0,0),b=i(0,0),x=0;x<u.length;x++)v=n(v,r(u[x],i(Math.cos(-x*f[m]),Math.sin(-x*f[m]))));for(var C=0;C<c.length;C++)b=n(b,r(c[C],i(Math.cos(-C*f[m]),Math.sin(-C*f[m]))));d.push(v),h.push(b)}for(var w=[],A=0;A<d.length;A++)w.push(o(d[A],h[A]));return{h:w,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),git="reviver",vit=["classes"],bit=re(git,vit,t=>{var{classes:e}=t;return function(r,i){var o=e[i&&i.mathjs];return o&&typeof o.fromJSON=="function"?o.fromJSON(i):i}}),yit="replacer",xit=[],wit=re(yit,xit,()=>function(e,n){return typeof n=="number"&&(!Number.isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),Eit="15.1.0",Cit=re("true",[],()=>!0),Sit=re("false",[],()=>!1),Tit=re("null",[],()=>null),Ait=Ra("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),Nit=Ra("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),Dit=Ra("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?X5(n):mUe}),Mit=Ra("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?WYe(n):gUe}),kit=Ra("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?GYe(n):vUe}),_it=Ra("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?YYe(n):bUe}),Oit=Ra("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),Iit=Ra("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),Rit=Ra("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),Bit=Ra("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),Lit=Ra("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),Fit=Ra("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),Pit=Ra("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),$it=re("version",[],()=>Eit);function Ra(t,e,n){return re(t,e,n,{recreateOnConfigChange:!0})}var zit=qt("speedOfLight","299792458","m s^-1"),Uit=qt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Hit=qt("planckConstant","6.62607015e-34","J s"),Vit=qt("reducedPlanckConstant","1.0545718176461565e-34","J s"),qit=qt("magneticConstant","1.25663706212e-6","N A^-2"),jit=qt("electricConstant","8.8541878128e-12","F m^-1"),Git=qt("vacuumImpedance","376.730313667","ohm"),Yit=qt("coulomb","8.987551792261171e9","N m^2 C^-2"),Wit=qt("coulombConstant","8.987551792261171e9","N m^2 C^-2"),Kit=qt("elementaryCharge","1.602176634e-19","C"),Xit=qt("bohrMagneton","9.2740100783e-24","J T^-1"),Zit=qt("conductanceQuantum","7.748091729863649e-5","S"),Qit=qt("inverseConductanceQuantum","12906.403729652257","ohm"),Jit=qt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),eot=qt("nuclearMagneton","5.0507837461e-27","J T^-1"),tot=qt("klitzing","25812.807459304513","ohm"),not=qt("bohrRadius","5.29177210903e-11","m"),rot=qt("classicalElectronRadius","2.8179403262e-15","m"),iot=qt("electronMass","9.1093837015e-31","kg"),oot=qt("fermiCoupling","1.1663787e-5","GeV^-2"),aot=lS("fineStructure",.0072973525693),sot=qt("hartreeEnergy","4.3597447222071e-18","J"),lot=qt("protonMass","1.67262192369e-27","kg"),uot=qt("deuteronMass","3.3435830926e-27","kg"),cot=qt("neutronMass","1.6749271613e-27","kg"),fot=qt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),dot=qt("rydberg","10973731.568160","m^-1"),hot=qt("thomsonCrossSection","6.6524587321e-29","m^2"),pot=lS("weakMixingAngle",.2229),mot=lS("efimovFactor",22.7),got=qt("atomicMass","1.66053906660e-27","kg"),vot=qt("avogadro","6.02214076e23","mol^-1"),bot=qt("boltzmann","1.380649e-23","J K^-1"),yot=qt("faraday","96485.33212331001","C mol^-1"),xot=qt("firstRadiation","3.7417718521927573e-16","W m^2"),wot=qt("loschmidt","2.686780111798444e25","m^-3"),Eot=qt("gasConstant","8.31446261815324","J K^-1 mol^-1"),Cot=qt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Sot=qt("molarVolume","0.022413969545014137","m^3 mol^-1"),Tot=lS("sackurTetrode",-1.16487052358),Aot=qt("secondRadiation","0.014387768775039337","m K"),Not=qt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Dot=qt("wienDisplacement","2.897771955e-3","m K"),Mot=qt("molarMass","0.99999999965e-3","kg mol^-1"),kot=qt("molarMassC12","11.9999999958e-3","kg mol^-1"),_ot=qt("gravity","9.80665","m s^-2"),Oot=qt("planckLength","1.616255e-35","m"),Iot=qt("planckMass","2.176435e-8","kg"),Rot=qt("planckTime","5.391245e-44","s"),Bot=qt("planckCharge","1.87554603778e-18","C"),Lot=qt("planckTemperature","1.416785e+32","K");function qt(t,e,n){var r=["config","Unit","BigNumber"];return re(t,r,i=>{var{config:o,Unit:a,BigNumber:s}=i,l=o.number==="BigNumber"?new s(e):parseFloat(e),u=new a(l,n);return u.fixPrefix=!0,u})}function lS(t,e){var n=["config","BigNumber"];return re(t,n,r=>{var{config:i,BigNumber:o}=r;return i.number==="BigNumber"?new o(e):e})}function RH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RH(Object(n),!0).forEach(function(r){oi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Pot="mapSlices",$ot=["typed","isInteger"],zot=re(Pot,$ot,t=>{var{typed:e,isInteger:n}=t,r=K4({typed:e,isInteger:n});return e("mapSlices",{"...any":function(o){var a=o[1];Dt(a)?o[1]=a-1:Gt(a)&&(o[1]=a.minus(1));try{return r.apply(null,o)}catch(s){throw Oo(s)}}})},Fot({isTransformFunction:!0},K4.meta)),Uot="column",Hot=["typed","Index","matrix","range"],Vot=re(Uot,Hot,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,o=Xee({typed:e,Index:n,matrix:r,range:i});return e("column",{"...any":function(s){var l=s.length-1,u=s[l];Dt(u)&&(s[l]=u-1);try{return o.apply(null,s)}catch(c){throw Oo(c)}}})},{isTransformFunction:!0});function J5(t,e,n){var r=t.filter(function(l){return Si(l)&&!(l.name in e)&&!n.has(l.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=r.name,o=new Map,a=new vJ(n,o,new Set([i])),s=t.compile();return function(u){return o.set(i,u),s.evaluate(a)}}var qot="transformCallback",jot=["typed"],e6=re(qot,jot,t=>{var{typed:e}=t;return function(r,i){return e.isTypedFunction(r)?n(r,i):BH(r,r.length,i)};function n(r,i){var o=Object.fromEntries(Object.entries(r.signatures).map(a=>{var[s,l]=a,u=s.split(",").length;return e.isTypedFunction(l)?[s,n(l,i)]:[s,BH(l,u,i)]}));return typeof r.name=="string"?e(r.name,o):e(o)}});function BH(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.slice(0,n),s=LH(i[n]);return t(...a,s)}:e>n+1?function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.slice(0,n),s=LH(i[n]),l=i.slice(n+1);return t(...a,s,...l)}:t}function LH(t){return t.map(e=>e+1)}var Got="filter",Yot=["typed"],Wot=re(Got,Yot,t=>{var{typed:e}=t;function n(i,o,a){var s=Zee({typed:e}),l=e6({typed:e});if(i.length===0)return s();var u=i[0];if(i.length===1)return s(u);var c=i.length-1,f=i[c];return u&&(u=r(u,a)),f&&(Si(f)||Ov(f)?f=r(f,a):f=J5(f,o,a)),s(u,l(f,c))}n.rawArgs=!0;function r(i,o){return i.compile().evaluate(o)}return n},{isTransformFunction:!0}),Kot="forEach",Xot=["typed"],Zot=re(Kot,Xot,t=>{var{typed:e}=t,n=Qee({typed:e}),r=e6({typed:e});function i(a,s,l){if(a.length===0)return n();var u=a[0];if(a.length===1)return n(u);var c=a.length-1,f=a[c];return u&&(u=o(u,l)),f&&(Si(f)||Ov(f)?f=o(f,l):f=J5(f,s,l)),n(u,r(f,c))}i.rawArgs=!0;function o(a,s){return a.compile().evaluate(s)}return i},{isTransformFunction:!0}),Qot="index",Jot=["Index","getMatrixDataType"],eat=re(Qot,Jot,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var i=[],o=0,a=arguments.length;o<a;o++){var s=arguments[o];if(F5(s))s.start--,s.end-=s.step>0?0:2;else if(s&&s.isSet===!0)s=s.map(function(u){return u-1});else if(Kn(s)||Ot(s))n(s)!=="boolean"&&(s=s.map(function(u){return u-1}));else if(Dt(s)||u1(s))s--;else if(Gt(s))s=s.toNumber()-1;else if(typeof s!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[o]=s}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),tat="map",nat=["typed"],rat=re(tat,nat,t=>{var{typed:e}=t,n=Jee({typed:e}),r=e6({typed:e});function i(o,a,s){if(o.length===0)return n();if(o.length===1)return n(o[0]);var l=o.length-1,u=o.slice(0,l),c=o[l];return u=u.map(d=>f(d,s)),c&&(Si(c)||Ov(c)?c=f(c,s):c=J5(c,a,s)),n(...u,r(c,l));function f(d,h){return d.compile().evaluate(h)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function iat(t){return Dt(t)?t-1:Gt(t)?t.minus(1):t}function oat(t){return Dt(t)||Gt(t)}function qf(t){if(t.length===2&&Oa(t[0])){t=t.slice();var e=t[1];oat(e)&&(t[1]=iat(e))}return t}var aat="max",sat=["typed","config","numeric","larger","isNaN"],lat=re(aat,sat,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:o}=t,a=lte({typed:e,config:n,numeric:r,larger:i,isNaN:o});return e("max",{"...any":function(l){l=qf(l);try{return a.apply(null,l)}catch(u){throw Oo(u)}}})},{isTransformFunction:!0}),uat="mean",cat=["typed","add","divide"],fat=re(uat,cat,t=>{var{typed:e,add:n,divide:r}=t,i=vte({typed:e,add:n,divide:r});return e("mean",{"...any":function(a){a=qf(a);try{return i.apply(null,a)}catch(s){throw Oo(s)}}})},{isTransformFunction:!0}),dat="min",hat=["typed","config","numeric","smaller","isNaN"],pat=re(dat,hat,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:o}=t,a=ute({typed:e,config:n,numeric:r,smaller:i,isNaN:o});return e("min",{"...any":function(l){l=qf(l);try{return a.apply(null,l)}catch(u){throw Oo(u)}}})},{isTransformFunction:!0}),mat="range",gat=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],vat=re(mat,gat,t=>{var{typed:e,config:n,matrix:r,bignumber:i,equal:o,smaller:a,smallerEq:s,larger:l,largerEq:u,add:c,isZero:f,isPositive:d}=t,h=nte({typed:e,config:n,matrix:r,bignumber:i,equal:o,smaller:a,smallerEq:s,larger:l,largerEq:u,add:c,isZero:f,isPositive:d});return e("range",{"...any":function(v){var b=v.length-1,x=v[b];return typeof x!="boolean"&&v.push(!0),h.apply(null,v)}})},{isTransformFunction:!0}),bat="row",yat=["typed","Index","matrix","range"],xat=re(bat,yat,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,o=rte({typed:e,Index:n,matrix:r,range:i});return e("row",{"...any":function(s){var l=s.length-1,u=s[l];Dt(u)&&(s[l]=u-1);try{return o.apply(null,s)}catch(c){throw Oo(c)}}})},{isTransformFunction:!0}),wat="subset",Eat=["typed","matrix","zeros","add"],Cat=re(wat,Eat,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,o=ite({typed:e,matrix:n,zeros:r,add:i});return e("subset",{"...any":function(s){try{return o.apply(null,s)}catch(l){throw Oo(l)}}})},{isTransformFunction:!0}),Sat="concat",Tat=["typed","matrix","isInteger"],Aat=re(Sat,Tat,t=>{var{typed:e,matrix:n,isInteger:r}=t,i=Kee({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(a){var s=a.length-1,l=a[s];Dt(l)?a[s]=l-1:Gt(l)&&(a[s]=l.minus(1));try{return i.apply(null,a)}catch(u){throw Oo(u)}}})},{isTransformFunction:!0}),FH="diff",Nat=["typed","matrix","subtract","number","bignumber"],Dat=re(FH,Nat,t=>{var{typed:e,matrix:n,subtract:r,number:i,bignumber:o}=t,a=ete({typed:e,matrix:n,subtract:r,number:i,bignumber:o});return e(FH,{"...any":function(l){l=qf(l);try{return a.apply(null,l)}catch(u){throw Oo(u)}}})},{isTransformFunction:!0}),Mat="std",kat=["typed","map","sqrt","variance"],_at=re(Mat,kat,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t,o=xte({typed:e,map:n,sqrt:r,variance:i});return e("std",{"...any":function(s){s=qf(s);try{return o.apply(null,s)}catch(l){throw Oo(l)}}})},{isTransformFunction:!0}),PH="sum",Oat=["typed","config","add","numeric"],Iat=re(PH,Oat,t=>{var{typed:e,config:n,add:r,numeric:i}=t,o=mte({typed:e,config:n,add:r,numeric:i});return e(PH,{"...any":function(s){s=qf(s);try{return o.apply(null,s)}catch(l){throw Oo(l)}}})},{isTransformFunction:!0}),Rat="quantileSeq",Bat=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],Lat=re(Rat,Bat,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t,m=yte({typed:e,bignumber:n,add:r,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d,mapSlices:h});return e("quantileSeq",{"Array | Matrix, number | BigNumber":m,"Array | Matrix, number | BigNumber, number":(b,x,C)=>m(b,x,v(C)),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(b,x,C,w)=>m(b,x,C,v(w)),"Array | Matrix, Array | Matrix":m,"Array | Matrix, Array | Matrix, number":(b,x,C)=>m(b,x,v(C)),"Array | Matrix, Array | Matrix, boolean":m,"Array | Matrix, Array | Matrix, boolean, number":(b,x,C,w)=>m(b,x,C,v(w))});function v(b){return qf([[],b])[1]}},{isTransformFunction:!0}),$H="cumsum",Fat=["typed","add","unaryPlus"],Pat=re($H,Fat,t=>{var{typed:e,add:n,unaryPlus:r}=t,i=gte({typed:e,add:n,unaryPlus:r});return e($H,{"...any":function(a){if(a.length===2&&Oa(a[0])){var s=a[1];Dt(s)?a[1]=s-1:Gt(s)&&(a[1]=s.minus(1))}try{return i.apply(null,a)}catch(l){throw Oo(l)}}})},{isTransformFunction:!0}),zH="variance",$at=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],zat=re(zH,$at,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:o,mapSlices:a,isNaN:s}=t,l=bte({typed:e,add:n,subtract:r,multiply:i,divide:o,mapSlices:a,isNaN:s});return e(zH,{"...any":function(c){c=qf(c);try{return l.apply(null,c)}catch(f){throw Oo(f)}}})},{isTransformFunction:!0}),UH="print",Uat=["typed","matrix","zeros","add"],Hat=re(UH,Uat,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,o=ate({typed:e,matrix:n,zeros:r,add:i});return e(UH,{"string, Object | Array":function(l,u){return o(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return o(a(l),u,c)}});function a(s){return s.replace(ote,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),Vat="and",qat=["typed","matrix","zeros","add","equalScalar","not","concat"],jat=re(Vat,qat,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:o,concat:a}=t,s=ste({typed:e,matrix:n,equalScalar:r,zeros:i,not:o,concat:a});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!Oa(d)&&!s(d,!0))return!1;var h=u[1].compile().evaluate(f);return s(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Gat="or",Yat=["typed","matrix","equalScalar","DenseMatrix","concat"],Wat=re(Gat,Yat,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o}=t,a=Wee({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o});function s(l,u,c){var f=l[0].compile().evaluate(c);if(!Oa(f)&&a(f,!1))return!0;var d=l[1].compile().evaluate(c);return a(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),Kat="nullish",Xat=["typed","matrix","size","flatten","deepEqual"],Zat=re(Kat,Xat,t=>{var{typed:e,matrix:n,size:r,flatten:i,deepEqual:o}=t,a=Yee({typed:e,matrix:n,size:r,flatten:i,deepEqual:o});function s(l,u,c){var f=l[0].compile().evaluate(c);if(!Oa(f)&&f!=null&&f!==void 0)return f;var d=l[1].compile().evaluate(c);return a(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),Qat="bitAnd",Jat=["typed","matrix","zeros","add","equalScalar","not","concat"],est=re(Qat,Jat,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:o,concat:a}=t,s=jee({typed:e,matrix:n,equalScalar:r,zeros:i,not:o,concat:a});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!Oa(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=u[1].compile().evaluate(f);return s(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),tst="bitOr",nst=["typed","matrix","equalScalar","DenseMatrix","concat"],rst=re(tst,nst,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o}=t,a=Gee({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o});function s(l,u,c){var f=l[0].compile().evaluate(c);if(!Oa(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=l[1].compile().evaluate(c);return a(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),nt=Dze({config:He}),Jn=Ize({}),HH=kit({BigNumber:nt,config:He}),ist=Sit({}),ost=aot({BigNumber:nt,config:He}),jf=Uze({}),Ete=Pit({Complex:Jn}),ast=Ait({BigNumber:nt,config:He}),sst=Iit({BigNumber:nt,config:He}),lst=Bit({BigNumber:nt,config:He}),uS=Yze({}),ust=Nit({BigNumber:nt,config:He}),cst=Tit({}),fst=_it({BigNumber:nt,config:He}),dst=qze({}),Cte=O$e({}),hst=Lit({BigNumber:nt,config:He}),pst=Tot({BigNumber:nt,config:He}),Ste=Mit({BigNumber:nt,config:He}),mst=Cit({}),gst=$it({}),Xt=uUe({Matrix:uS,config:He}),vst=mot({BigNumber:nt,config:He}),bst=Oit({BigNumber:nt,config:He}),rM=Dit({BigNumber:nt,config:He}),Tte=wit({}),yst=Fit({BigNumber:nt,config:He}),pe=D$e({BigNumber:nt,Complex:Jn,DenseMatrix:Xt,Fraction:jf}),xst=pot({BigNumber:nt,config:He}),Io=DHe({typed:pe}),wst=oWe({Complex:Jn,config:He,typed:pe}),Est=uWe({BigNumber:nt,typed:pe}),Cst=hWe({BigNumber:nt,Complex:Jn,config:He,typed:pe}),hi=OHe({typed:pe}),Sst=yqe({typed:pe}),Tst=yWe({BigNumber:nt,Complex:Jn,config:He,typed:pe}),Ast=SWe({typed:pe}),Ate=NWe({typed:pe}),Nst=_We({Complex:Jn,config:He,typed:pe}),Dst=JUe({typed:pe}),Mst=dqe({typed:pe}),kst=rHe({typed:pe}),_st=fUe({typed:pe}),cS=Xnt({typed:pe}),fS=uHe({Complex:Jn,typed:pe}),Ah=wqe({typed:pe}),t6=IWe({typed:pe}),Ost=FWe({BigNumber:nt,typed:pe}),Ist=UWe({BigNumber:nt,typed:pe}),Rst=WHe({typed:pe}),rn=HUe({config:He,typed:pe}),Bst=Uje({typed:pe}),Nte=XHe({typed:pe}),Lst=QHe({Complex:Jn,typed:pe}),Fst=Zee({typed:pe}),Nh=Vqe({typed:pe}),Pst=Qee({typed:pe}),Lv=Qje({typed:pe}),n6=Yqe({typed:pe}),$st=iGe({format:Lv,typed:pe}),r6=Cqe({typed:pe}),Fv=BUe({typed:pe}),zu=IUe({typed:pe}),Dh=TUe({typed:pe}),zst=fGe({typed:pe}),Ust=Rit({BigNumber:nt,config:He}),Hst=nrt({Complex:Jn,typed:pe}),Vst=OVe({Complex:Jn,config:He,typed:pe}),i6=RVe({Complex:Jn,config:He,typed:pe}),Gf=Jee({typed:pe}),qst=Wje({isNaN:zu,isNumeric:Dh,typed:pe}),Ur=FVe({typed:pe}),dE=Nqe({typed:pe}),Gl=XUe({typed:pe}),jst=nGe({format:Lv,typed:pe}),Gst=Ort({config:He,typed:pe}),Yst=ate({typed:pe}),Wst=Rrt({config:He,typed:pe}),o6=Tqe({typed:pe}),Kst=jWe({BigNumber:nt,typed:pe}),Dte=VVe({BigNumber:nt,Fraction:jf,complex:fS,typed:pe}),dS=KWe({typed:pe}),pi=gje({typed:pe}),mi=jUe({Matrix:uS,equalScalar:rn,typed:pe}),Xst=EHe({typed:pe}),Zst=WVe({typed:pe}),Qst=tHe({typed:pe}),Ss=RHe({typed:pe}),Jst=JWe({typed:pe}),elt=uGe({typed:pe}),a6=$Ue({typed:pe}),tlt=sWe({Complex:Jn,config:He,typed:pe}),nlt=mWe({BigNumber:nt,typed:pe}),rlt=vWe({BigNumber:nt,Complex:Jn,config:He,typed:pe}),ia=aHe({BigNumber:nt,typed:pe}),ilt=Qnt({typed:pe}),olt=BWe({typed:pe}),alt=VWe({BigNumber:nt,typed:pe}),hS=kKe({addScalar:hi,conj:Ah,multiplyScalar:Ur,size:pi,typed:pe}),slt=NUe({isNumeric:Dh,typed:pe}),llt=FUe({isBounded:Fv,map:Gf,typed:pe}),Yf=CUe({config:He,typed:pe}),Ts=_Ue({equalScalar:rn,typed:pe}),tt=pHe({DenseMatrix:Xt,Matrix:uS,SparseMatrix:mi,typed:pe}),ult=gHe({isZero:Ts,matrix:tt,typed:pe}),qn=$Ve({addScalar:hi,dot:hS,equalScalar:rn,matrix:tt,multiplyScalar:Ur,typed:pe}),clt=nje({BigNumber:nt,config:He,matrix:tt,typed:pe}),flt=Lrt({config:He,log2:i6,typed:pe}),dlt=uje({config:He,matrix:tt}),hlt=YWe({BigNumber:nt,typed:pe}),plt=ZWe({typed:pe}),mlt=tWe({SparseMatrix:mi,typed:pe}),pl=GVe({Complex:Jn,config:He,typed:pe}),glt=bje({typed:pe}),vlt=nKe({typed:pe}),Pv=Sje({matrix:tt,typed:pe}),Mte=QVe({BigNumber:nt,config:He,matrix:tt,typed:pe}),Hi=Dje({BigNumber:nt,config:He,matrix:tt,typed:pe}),blt=fWe({BigNumber:nt,Complex:Jn,config:He,typed:pe}),ylt=wWe({Complex:Jn,config:He,typed:pe}),xlt=eGe({format:Lv,typed:pe}),wlt=$We({BigNumber:nt,typed:pe}),s6=Aje({conj:Ah,transpose:Pv,typed:pe}),kte=$qe({DenseMatrix:Xt,SparseMatrix:mi,matrix:tt,typed:pe}),Ro=aYe({DenseMatrix:Xt,SparseMatrix:mi,equalScalar:rn,matrix:tt,typed:pe}),$v=dHe({Fraction:jf,typed:pe}),Wf=Kqe({BigNumber:nt,DenseMatrix:Xt,SparseMatrix:mi,config:He,matrix:tt,typed:pe}),Co=hUe({equal:Ro,typed:pe}),Elt=Zqe({matrix:tt,multiplyScalar:Ur,typed:pe}),Z1=K4({isInteger:Co,typed:pe}),l6=xHe({flatten:Nh,matrix:tt,size:pi,typed:pe}),ps=pGe({bignumber:ia,fraction:$v,number:Gl}),_te=Xje({config:He,multiplyScalar:Ur,numeric:ps,typed:pe}),Ote=aje({isInteger:Co,matrix:tt,typed:pe}),g0=xGe({BigNumber:nt,DenseMatrix:Xt,config:He,equalScalar:rn,matrix:tt,typed:pe,zeros:Hi}),Yl=SHe({typed:pe}),Clt=Wnt({BigNumber:nt,Fraction:jf,config:He,isInteger:Co,number:Gl,typed:pe}),Ite=LHe({BigNumber:nt,Complex:Jn,Fraction:jf,config:He,isNegative:Yf,matrix:tt,typed:pe,unaryMinus:Yl}),Dn=Kee({isInteger:Co,matrix:tt,typed:pe}),Slt=Bqe({prod:_te,size:pi,typed:pe}),zv=CYe({equal:Ro,typed:pe}),Or=gGe({numeric:ps,typed:pe}),Tlt=iqe({concat:Dn,equalScalar:rn,matrix:tt,multiplyScalar:Ur,typed:pe}),Rte=Uee({DenseMatrix:Xt,config:He,equalScalar:rn,matrix:tt,round:g0,typed:pe,zeros:Hi}),Alt=TVe({BigNumber:nt,DenseMatrix:Xt,concat:Dn,config:He,equalScalar:rn,matrix:tt,round:g0,typed:pe,zeros:Hi}),Mh=MUe({config:He,typed:pe}),So=vYe({DenseMatrix:Xt,SparseMatrix:mi,bignumber:ia,concat:Dn,config:He,matrix:tt,typed:pe}),Nlt=MVe({concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),Dlt=VGe({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe,zeros:Hi}),Bte=IGe({DenseMatrix:Xt,divideScalar:Or,equalScalar:rn,matrix:tt,multiplyScalar:Ur,subtractScalar:Ss,typed:pe}),u6=lte({config:He,isNaN:zu,larger:So,numeric:ps,typed:pe}),Lte=Vee({DenseMatrix:Xt,concat:Dn,config:He,equalScalar:rn,matrix:tt,round:g0,typed:pe,zeros:Hi}),Mlt=UVe({BigNumber:nt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),klt=Yee({deepEqual:zv,flatten:Nh,matrix:tt,size:pi,typed:pe}),_lt=Wee({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),c6=FXe({addScalar:hi,complex:fS,conj:Ah,divideScalar:Or,equal:Ro,identity:Wf,isZero:Ts,matrix:tt,multiplyScalar:Ur,sign:Dte,sqrt:pl,subtractScalar:Ss,typed:pe,unaryMinus:Yl,zeros:Hi}),Olt=jGe({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe,zeros:Hi}),To=fYe({DenseMatrix:Xt,SparseMatrix:mi,bignumber:ia,concat:Dn,config:He,matrix:tt,typed:pe}),Wr=XVe({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,subtractScalar:Ss,typed:pe,unaryMinus:Yl}),Ilt=sGe({concat:Dn,matrix:tt,typed:pe}),f6=AHe({config:He,numeric:ps,typed:pe}),d6=BGe({DenseMatrix:Xt,divideScalar:Or,equalScalar:rn,matrix:tt,multiplyScalar:Ur,subtractScalar:Ss,typed:pe}),Rlt=_qe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,matrix:tt,typed:pe}),pn=SKe({DenseMatrix:Xt,SparseMatrix:mi,addScalar:hi,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),Blt=MWe({BigNumber:nt,DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),Llt=jee({concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),Flt=Gee({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),Plt=vqe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,matrix:tt,typed:pe}),$lt=Hrt({addScalar:hi,combinations:cS,divideScalar:Or,isInteger:Co,isNegative:Yf,multiplyScalar:Ur,typed:pe}),kh=XGe({BigNumber:nt,DenseMatrix:Xt,Fraction:jf,concat:Dn,config:He,equalScalar:rn,matrix:tt,typed:pe}),Fte=iYe({concat:Dn,matrix:tt,typed:pe}),zlt=qrt({addScalar:hi,combinations:cS,isInteger:Co,isNegative:Yf,isPositive:Mh,larger:So,typed:pe}),Ult=Fqe({matrix:tt,multiply:qn,subtract:Wr,typed:pe}),Pte=snt({divideScalar:Or,isZero:Ts,matrix:tt,multiply:qn,subtractScalar:Ss,typed:pe,unaryMinus:Yl}),Hlt=ete({matrix:tt,number:Gl,subtract:Wr,typed:pe}),Vlt=_nt({abs:Io,addScalar:hi,deepEqual:zv,divideScalar:Or,multiplyScalar:Ur,sqrt:pl,subtractScalar:Ss,typed:pe}),Uv=_Ge({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,divideScalar:Or,equalScalar:rn,matrix:tt,typed:pe}),qlt=uYe({compareText:Fte,isZero:Ts,typed:pe}),$te=UYe({larger:So,smaller:To}),jlt=AKe({abs:Io,addScalar:hi,divideScalar:Or,isPositive:Mh,multiplyScalar:Ur,smaller:To,sqrt:pl,typed:pe}),zte=BYe({DenseMatrix:Xt,smaller:To}),no=PYe({ImmutableDenseMatrix:zte,getMatrixDataType:n6}),Glt=Rnt({abs:Io,add:pn,addScalar:hi,config:He,divideScalar:Or,equalScalar:rn,flatten:Nh,isNumeric:Dh,isZero:Ts,matrix:tt,multiply:qn,multiplyScalar:Ur,smaller:To,subtract:Wr,typed:pe}),Ylt=eqe({BigNumber:nt,add:pn,config:He,equal:Ro,isInteger:Co,mod:Lte,smaller:To,typed:pe,xgcd:Mte}),pS=xYe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,config:He,matrix:tt,typed:pe}),h6=CGe({Complex:Jn,config:He,divideScalar:Or,typeOf:a6,typed:pe}),Wlt=FGe({DenseMatrix:Xt,divideScalar:Or,equalScalar:rn,matrix:tt,multiplyScalar:Ur,subtractScalar:Ss,typed:pe}),Klt=bHe({flatten:Nh,matrix:tt,size:pi,typed:pe}),Xlt=ute({config:He,isNaN:zu,numeric:ps,smaller:To,typed:pe}),Zlt=NGe({Complex:Jn,config:He,divideScalar:Or,typed:pe}),mS=DYe({compare:kh,isNaN:zu,isNumeric:Dh,typed:pe}),Qlt=YGe({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe,zeros:Hi}),Ute=sZe({SparseMatrix:mi,abs:Io,add:pn,divideScalar:Or,larger:So,largerEq:pS,multiply:qn,subtract:Wr,transpose:Pv,typed:pe}),Hte=qYe({FibonacciHeap:$te,addScalar:hi,equalScalar:rn}),Ba=ite({add:pn,matrix:tt,typed:pe,zeros:Hi}),p6=mte({add:pn,config:He,numeric:ps,typed:pe}),Jlt=IKe({add:pn,matrix:tt,typed:pe}),Vte=$Ge({DenseMatrix:Xt,divideScalar:Or,equalScalar:rn,matrix:tt,multiplyScalar:Ur,subtractScalar:Ss,typed:pe}),eut=hit({Complex:Jn,add:pn,multiply:qn,number:Gl,typed:pe}),m6=GHe({DenseMatrix:Xt,config:He,equalScalar:rn,matrix:tt,round:g0,typed:pe,zeros:Hi}),Wl=tYe({compare:kh,typed:pe}),tut=gte({add:pn,typed:pe,unaryPlus:f6}),qte=tVe({Complex:Jn,DenseMatrix:Xt,ceil:m6,equalScalar:rn,floor:Rte,matrix:tt,typed:pe,zeros:Hi}),jte=BKe({Index:no,typed:pe}),_h=unt({abs:Io,addScalar:hi,det:Pte,divideScalar:Or,identity:Wf,matrix:tt,multiply:qn,typed:pe,unaryMinus:Yl}),nut=TGe({Complex:Jn,config:He,divideScalar:Or,log:h6,typed:pe}),Gte=BXe({DenseMatrix:Xt,Spa:Hte,SparseMatrix:mi,abs:Io,addScalar:hi,divideScalar:Or,equalScalar:rn,larger:So,matrix:tt,multiplyScalar:Ur,subtractScalar:Ss,typed:pe,unaryMinus:Yl}),rut=fnt({Complex:Jn,add:pn,ctranspose:s6,deepEqual:zv,divideScalar:Or,dot:hS,dotDivide:Uv,equal:Ro,inv:_h,matrix:tt,multiply:qn,typed:pe}),ml=bGe({Complex:Jn,config:He,fraction:$v,identity:Wf,inv:_h,matrix:tt,multiply:qn,number:Gl,typed:pe}),iut=iKe({DenseMatrix:Xt,Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),out=lKe({DenseMatrix:Xt,Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),aut=dKe({Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),sut=gKe({Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),Rm=pYe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,config:He,matrix:tt,typed:pe}),lut=kYe({compare:kh,compareNatural:Wl,matrix:tt,typed:pe}),uut=xnt({abs:Io,add:pn,identity:Wf,inv:_h,map:Gf,max:u6,multiply:qn,size:pi,sqrt:pl,subtract:Wr,typed:pe}),cut=TYe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,config:He,equalScalar:rn,matrix:tt,typed:pe}),fut=ste({concat:Dn,equalScalar:rn,matrix:tt,not:dE,typed:pe,zeros:Hi}),qi=Mnt({divideScalar:Or,equalScalar:rn,inv:_h,matrix:tt,multiply:qn,typed:pe}),dut=bnt({abs:Io,add:pn,identity:Wf,inv:_h,multiply:qn,typed:pe}),Yte=kje({addScalar:hi,ceil:m6,conj:Ah,divideScalar:Or,dotDivide:Uv,exp:Nte,i:Ete,log2:i6,matrix:tt,multiplyScalar:Ur,pow:ml,tau:Ste,typed:pe}),hut=mit({Complex:Jn,add:pn,divide:qi,matrix:tt,multiply:qn,typed:pe}),g6=ert({BigNumber:nt,Complex:Jn,config:He,multiplyScalar:Ur,pow:ml,typed:pe}),put=Oje({conj:Ah,dotDivide:Uv,fft:Yte,typed:pe}),mut=art({divide:qi,dotDivide:Uv,isNumeric:Dh,log:h6,map:Gf,matrix:tt,multiply:qn,sum:p6,typed:pe}),Wte=uZe({DenseMatrix:Xt,lsolve:Bte,lup:Gte,matrix:tt,slu:Ute,typed:pe,usolve:d6}),Kte=vte({add:pn,divide:qi,typed:pe}),Xte=$nt({add:pn,compare:kh,divide:qi,partitionSelect:mS,typed:pe}),gut=fZe({add:pn,cbrt:Ite,divide:qi,equalScalar:rn,im:r6,isZero:Ts,multiply:qn,re:o6,sqrt:pl,subtract:Wr,typeOf:a6,typed:pe,unaryMinus:Yl}),vut=yte({bignumber:ia,add:pn,compare:kh,divide:qi,isInteger:Co,larger:So,mapSlices:Z1,multiply:qn,partitionSelect:mS,smaller:To,smallerEq:Rm,subtract:Wr,typed:pe}),Bm=nte({bignumber:ia,matrix:tt,add:pn,config:He,equal:Ro,isPositive:Mh,isZero:Ts,larger:So,largerEq:pS,smaller:To,smallerEq:Rm,typed:pe}),but=rte({Index:no,matrix:tt,range:Bm,typed:pe}),Zte=aKe({DenseMatrix:Xt,Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),yut=pKe({Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),Qte=xKe({Index:no,concat:Dn,setDifference:Zte,size:pi,subset:Ba,typed:pe}),xut=Pje({abs:Io,add:pn,bignumber:ia,divide:qi,isNegative:Yf,isPositive:Mh,larger:So,map:Gf,matrix:tt,max:u6,multiply:qn,smaller:To,subtract:Wr,typed:pe,unaryMinus:Yl}),Pt=ZYe({BigNumber:nt,Complex:Jn,Fraction:jf,abs:Io,addScalar:hi,config:He,divideScalar:Or,equal:Ro,fix:qte,format:Lv,isNumeric:Dh,multiplyScalar:Ur,number:Gl,pow:ml,round:g0,subtractScalar:Ss}),wut=Git({BigNumber:nt,Unit:Pt,config:He}),Eut=got({BigNumber:nt,Unit:Pt,config:He}),Cut=Xit({BigNumber:nt,Unit:Pt,config:He}),Sut=bot({BigNumber:nt,Unit:Pt,config:He}),Jte=Xee({Index:no,matrix:tt,range:Bm,typed:pe}),Tut=Zit({BigNumber:nt,Unit:Pt,config:He}),Aut=Yit({BigNumber:nt,Unit:Pt,config:He}),Nut=rWe({Unit:Pt,typed:pe}),Dut=uot({BigNumber:nt,Unit:Pt,config:He}),ene=gnt({abs:Io,add:pn,addScalar:hi,atan:Ate,bignumber:ia,column:Jte,complex:fS,config:He,cos:t6,diag:kte,divideScalar:Or,dot:hS,equal:Ro,flatten:Nh,im:r6,inv:_h,larger:So,matrix:tt,matrixFromColumns:l6,multiply:qn,multiplyScalar:Ur,number:Gl,qr:c6,re:o6,reshape:Ote,sin:dS,size:pi,smaller:To,sqrt:pl,subtract:Wr,typed:pe,usolve:d6,usolveAll:Vte}),Mut=iot({BigNumber:nt,Unit:Pt,config:He}),Hv=irt({gamma:g6,typed:pe}),kut=oot({BigNumber:nt,Unit:Pt,config:He}),_ut=Eot({BigNumber:nt,Unit:Pt,config:He}),Out=_ot({BigNumber:nt,Unit:Pt,config:He}),Iut=tot({BigNumber:nt,Unit:Pt,config:He}),Rut=wot({BigNumber:nt,Unit:Pt,config:He}),But=Unt({abs:Io,map:Gf,median:Xte,subtract:Wr,typed:pe}),Lut=Jit({BigNumber:nt,Unit:Pt,config:He}),Fut=Mot({BigNumber:nt,Unit:Pt,config:He}),Put=Cot({BigNumber:nt,Unit:Pt,config:He}),$ut=lrt({add:pn,divide:qi,factorial:Hv,isInteger:Co,isPositive:Mh,multiply:qn,typed:pe}),v6=DKe({abs:Io,add:pn,conj:Ah,ctranspose:s6,eigs:ene,equalScalar:rn,larger:So,matrix:tt,multiply:qn,pow:ml,smaller:To,sqrt:pl,typed:pe}),zut=crt({factorial:Hv,typed:pe}),Uut=Hit({BigNumber:nt,Unit:Pt,config:He}),Hut=Iot({BigNumber:nt,Unit:Pt,config:He}),Vut=Rot({BigNumber:nt,Unit:Pt,config:He}),qut=Vit({BigNumber:nt,Unit:Pt,config:He}),tne=hje({BigNumber:nt,DenseMatrix:Xt,SparseMatrix:mi,addScalar:hi,config:He,cos:t6,matrix:tt,multiplyScalar:Ur,norm:v6,sin:dS,typed:pe,unaryMinus:Yl}),jut=dot({BigNumber:nt,Unit:Pt,config:He}),Gut=Aot({BigNumber:nt,Unit:Pt,config:He}),Yut=bKe({compareNatural:Wl,typed:pe}),Wut=zit({BigNumber:nt,Unit:Pt,config:He}),Kut=Not({BigNumber:nt,Unit:Pt,config:He}),Xut=hot({BigNumber:nt,Unit:Pt,config:He}),b6=bte({add:pn,divide:qi,isNaN:zu,mapSlices:Z1,multiply:qn,subtract:Wr,typed:pe}),Zut=Gje({BigNumber:nt,Complex:Jn,add:pn,config:He,divide:qi,equal:Ro,factorial:Hv,gamma:g6,isBounded:Fv,isNegative:Yf,multiply:qn,pi:rM,pow:ml,sin:dS,smallerEq:Rm,subtract:Wr,typed:pe}),Qut=vot({BigNumber:nt,Unit:Pt,config:He}),Jut=not({BigNumber:nt,Unit:Pt,config:He}),ect=Gnt({add:pn,divide:qi,matrix:tt,mean:Kte,multiply:qn,pow:ml,sqrt:pl,subtract:Wr,sum:p6,typed:pe}),tct=MGe({DenseMatrix:Xt,SparseMatrix:mi,concat:Dn,equalScalar:rn,matrix:tt,pow:ml,typed:pe}),nct=Kit({BigNumber:nt,Unit:Pt,config:He}),rct=yot({BigNumber:nt,Unit:Pt,config:He}),ict=sot({BigNumber:nt,Unit:Pt,config:He}),oct=Qit({BigNumber:nt,Unit:Pt,config:He}),act=qit({BigNumber:nt,Unit:Pt,config:He}),sct=kot({BigNumber:nt,Unit:Pt,config:He}),lct=cot({BigNumber:nt,Unit:Pt,config:He}),uct=Bot({BigNumber:nt,Unit:Pt,config:He}),cct=Lot({BigNumber:nt,Unit:Pt,config:He}),fct=fot({BigNumber:nt,Unit:Pt,config:He}),nne=cKe({DenseMatrix:Xt,Index:no,compareNatural:Wl,size:pi,subset:Ba,typed:pe}),dct=xte({map:Gf,sqrt:pl,typed:pe,variance:b6}),rne=Prt({bignumber:ia,addScalar:hi,combinations:cS,divideScalar:Or,factorial:Hv,isInteger:Co,isNegative:Yf,larger:So,multiplyScalar:Ur,number:Gl,pow:ml,subtractScalar:Ss,typed:pe}),hct=JYe({Unit:Pt,typed:pe}),pct=zrt({addScalar:hi,isInteger:Co,isNegative:Yf,stirlingS2:rne,typed:pe}),mct=jit({BigNumber:nt,Unit:Pt,config:He}),gct=xot({BigNumber:nt,Unit:Pt,config:He}),vct=eot({BigNumber:nt,Unit:Pt,config:He}),bct=Oot({BigNumber:nt,Unit:Pt,config:He}),yct=fje({multiply:qn,rotationMatrix:tne,typed:pe}),xct=EKe({Index:no,concat:Dn,setIntersect:nne,setSymDifference:Qte,size:pi,subset:Ba,typed:pe}),wct=Dot({BigNumber:nt,Unit:Pt,config:He}),Ect=rot({BigNumber:nt,Unit:Pt,config:He}),Cct=Sot({BigNumber:nt,Unit:Pt,config:He}),ine=Snt({identity:Wf,matrix:tt,multiply:qn,norm:v6,qr:c6,subtract:Wr,typed:pe}),Sct=Wit({BigNumber:nt,Unit:Pt,config:He}),Tct=Uit({BigNumber:nt,Unit:Pt,config:He}),Act=lot({BigNumber:nt,Unit:Pt,config:He}),one=Ent({abs:Io,add:pn,concat:Dn,identity:Wf,index:jte,lusolve:Wte,matrix:tt,matrixFromColumns:l6,multiply:qn,range:Bm,schur:ine,subset:Ba,subtract:Wr,transpose:Pv,typed:pe}),Nct=Ant({matrix:tt,multiply:qn,sylvester:one,transpose:Pv,typed:pe}),v0={},Vv={},ane={},mo=PKe({mathWithTransform:Vv}),b0=lXe({Node:mo}),ic=cXe({Node:mo}),Oh=dXe({Node:mo}),sne=gXe({Node:mo}),y0=HKe({Node:mo}),lne=WKe({Node:mo,ResultSet:Cte}),une=XKe({Node:mo}),cne=pXe({Node:mo}),Dct=bit({classes:ane}),y6=vZe({math:v0,typed:pe}),fne=iXe({Node:mo,typed:pe}),Mct=ont({Chain:y6,typed:pe}),Kf=nXe({Node:mo,isBounded:Fv}),x0=aXe({Node:mo,size:pi}),w0=zKe({Node:mo,subset:Ba}),dne=GKe({matrix:tt,Node:mo,subset:Ba}),Xf=yXe({Unit:Pt,Node:mo,math:v0}),Zf=wXe({Node:mo,SymbolNode:Xf,math:v0}),gl=CXe({AccessorNode:w0,ArrayNode:y0,AssignmentNode:dne,BlockNode:lne,ConditionalNode:une,ConstantNode:Kf,FunctionAssignmentNode:fne,FunctionNode:Zf,IndexNode:x0,ObjectNode:b0,OperatorNode:ic,ParenthesisNode:Oh,RangeNode:cne,RelationalNode:sne,SymbolNode:Xf,config:He,numeric:ps,typed:pe}),hne=oit({ConstantNode:Kf,FunctionNode:Zf,OperatorNode:ic,ParenthesisNode:Oh,parse:gl,typed:pe}),x6=eit({bignumber:ia,fraction:$v,AccessorNode:w0,ArrayNode:y0,ConstantNode:Kf,FunctionNode:Zf,IndexNode:x0,ObjectNode:b0,OperatorNode:ic,SymbolNode:Xf,config:He,isBounded:Fv,mathWithTransform:Vv,matrix:tt,typed:pe}),pne=TXe({parse:gl,typed:pe}),kct=Grt({parse:gl,typed:pe}),w6=nit({AccessorNode:w0,ArrayNode:y0,ConstantNode:Kf,FunctionNode:Zf,IndexNode:x0,ObjectNode:b0,OperatorNode:ic,ParenthesisNode:Oh,SymbolNode:Xf,add:pn,divide:qi,equal:Ro,isZero:Ts,multiply:qn,parse:gl,pow:ml,subtract:Wr,typed:pe}),E6=NXe({parse:gl,typed:pe}),mne=pZe({evaluate:E6}),gne=kXe({evaluate:E6,parse:gl}),_ct=IXe({Parser:gne,typed:pe}),gS=Zrt({AccessorNode:w0,ArrayNode:y0,ConstantNode:Kf,FunctionNode:Zf,IndexNode:x0,ObjectNode:b0,OperatorNode:ic,ParenthesisNode:Oh,SymbolNode:Xf,equal:Ro,parse:gl,replacer:Tte,resolve:hne,simplifyConstant:x6,simplifyCore:w6,typed:pe}),Oct=sit({OperatorNode:ic,parse:gl,simplify:gS,typed:pe}),Ict=uit({ConstantNode:Kf,FunctionNode:Zf,OperatorNode:ic,ParenthesisNode:Oh,SymbolNode:Xf,config:He,equal:Ro,isZero:Ts,numeric:ps,parse:gl,simplify:gS,typed:pe}),Rct=rnt({Help:mne,mathWithTransform:Vv,typed:pe}),Bct=fit({bignumber:ia,fraction:$v,AccessorNode:w0,ArrayNode:y0,ConstantNode:Kf,FunctionNode:Zf,IndexNode:x0,ObjectNode:b0,OperatorNode:ic,ParenthesisNode:Oh,SymbolNode:Xf,add:pn,config:He,divide:qi,equal:Ro,isZero:Ts,mathWithTransform:Vv,matrix:tt,multiply:qn,parse:gl,pow:ml,simplify:gS,simplifyConstant:x6,simplifyCore:w6,subtract:Wr,typed:pe});jr(v0,{e:HH,false:ist,fineStructure:ost,i:Ete,Infinity:ast,LN10:sst,LOG10E:lst,NaN:ust,null:cst,phi:fst,SQRT1_2:hst,sackurTetrode:pst,tau:Ste,true:mst,E:HH,version:gst,efimovFactor:vst,LN2:bst,pi:rM,replacer:Tte,reviver:Dct,SQRT2:yst,typed:pe,PI:rM,weakMixingAngle:xst,abs:Io,acos:wst,acot:Est,acsc:Cst,addScalar:hi,arg:Sst,asech:Tst,asinh:Ast,atan:Ate,atanh:Nst,bigint:Dst,bitNot:Mst,boolean:kst,clone:_st,combinations:cS,complex:fS,conj:Ah,cos:t6,cot:Ost,csc:Ist,cube:Rst,equalScalar:rn,erf:Bst,exp:Nte,expm1:Lst,filter:Fst,flatten:Nh,forEach:Pst,format:Lv,getMatrixDataType:n6,hex:$st,im:r6,isBounded:Fv,isNaN:zu,isNumeric:Dh,isPrime:zst,LOG2E:Ust,lgamma:Hst,log10:Vst,log2:i6,map:Gf,mode:qst,multiplyScalar:Ur,not:dE,number:Gl,oct:jst,pickRandom:Gst,print:Yst,random:Wst,re:o6,sec:Kst,sign:Dte,sin:dS,size:pi,splitUnit:Xst,square:Zst,string:Qst,subtractScalar:Ss,tan:Jst,toBest:elt,typeOf:a6,acosh:tlt,acsch:nlt,asec:rlt,bignumber:ia,chain:Mct,combinationsWithRep:ilt,cosh:olt,csch:alt,dot:hS,hasNumericValue:slt,isFinite:llt,isNegative:Yf,isZero:Ts,matrix:tt,matrixFromFunction:ult,multiply:qn,ones:clt,randomInt:flt,resize:dlt,sech:hlt,sinh:plt,sparse:mlt,sqrt:pl,squeeze:glt,tanh:vlt,transpose:Pv,xgcd:Mte,zeros:Hi,acoth:blt,asin:ylt,bin:xlt,coth:wlt,ctranspose:s6,diag:kte,equal:Ro,fraction:$v,identity:Wf,isInteger:Co,kron:Elt,mapSlices:Z1,matrixFromColumns:l6,numeric:ps,prod:_te,reshape:Ote,round:g0,unaryMinus:Yl,bernoulli:Clt,cbrt:Ite,concat:Dn,count:Slt,deepEqual:zv,divideScalar:Or,dotMultiply:Tlt,floor:Rte,gcd:Alt,isPositive:Mh,larger:So,lcm:Nlt,leftShift:Dlt,lsolve:Bte,max:u6,mod:Lte,nthRoot:Mlt,nullish:klt,or:_lt,qr:c6,rightArithShift:Olt,smaller:To,subtract:Wr,to:Ilt,unaryPlus:f6,usolve:d6,xor:Rlt,add:pn,atan2:Blt,bitAnd:Llt,bitOr:Flt,bitXor:Plt,catalan:$lt,compare:kh,compareText:Fte,composition:zlt,cross:Ult,det:Pte,diff:Hlt,distance:Vlt,dotDivide:Uv,equalText:qlt,hypot:jlt,intersect:Glt,invmod:Ylt,largerEq:pS,log:h6,lsolveAll:Wlt,matrixFromRows:Klt,min:Xlt,nthRoots:Zlt,partitionSelect:mS,rightLogShift:Qlt,slu:Ute,subset:Ba,sum:p6,trace:Jlt,usolveAll:Vte,zpk2tf:eut,ceil:m6,compareNatural:Wl,cumsum:tut,fix:qte,index:jte,inv:_h,log1p:nut,lup:Gte,pinv:rut,pow:ml,setCartesian:iut,setDistinct:out,setIsSubset:aut,setPowerset:sut,smallerEq:Rm,sort:lut,sqrtm:uut,unequal:cut,and:fut,divide:qi,expm:dut,fft:Yte,freqz:hut,gamma:g6,ifft:put,kldivergence:mut,lusolve:Wte,mean:Kte,median:Xte,polynomialRoot:gut,quantileSeq:vut,range:Bm,row:but,setDifference:Zte,setMultiplicity:yut,setSymDifference:Qte,solveODE:xut,vacuumImpedance:wut,atomicMass:Eut,bohrMagneton:Cut,boltzmann:Sut,column:Jte,conductanceQuantum:Tut,coulomb:Aut,createUnit:Nut,deuteronMass:Dut,eigs:ene,electronMass:Mut,factorial:Hv,fermiCoupling:kut,gasConstant:_ut,gravity:Out,klitzing:Iut,loschmidt:Rut,mad:But,magneticFluxQuantum:Lut,molarMass:Fut,molarPlanckConstant:Put,multinomial:$ut,norm:v6,permutations:zut,planckConstant:Uut,planckMass:Hut,planckTime:Vut,reducedPlanckConstant:qut,rotationMatrix:tne,rydberg:jut,secondRadiation:Gut,setSize:Yut,speedOfLight:Wut,stefanBoltzmann:Kut,thomsonCrossSection:Xut,variance:b6,zeta:Zut,avogadro:Qut,bohrRadius:Jut,corr:ect,dotPow:tct,elementaryCharge:nct,faraday:rct,hartreeEnergy:ict,inverseConductanceQuantum:oct,magneticConstant:act,molarMassC12:sct,neutronMass:lct,parse:gl,planckCharge:uct,planckTemperature:cct,quantumOfCirculation:fct,resolve:hne,setIntersect:nne,simplifyConstant:x6,std:dct,stirlingS2:rne,unit:hct,bellNumbers:pct,compile:pne,electricConstant:mct,firstRadiation:gct,leafCount:kct,nuclearMagneton:vct,planckLength:bct,rotate:yct,setUnion:xct,simplifyCore:w6,wienDisplacement:wct,classicalElectronRadius:Ect,evaluate:E6,molarVolume:Cct,schur:ine,coulombConstant:Sct,gravitationConstant:Tct,parser:_ct,simplify:gS,symbolicEqual:Oct,derivative:Ict,protonMass:Act,sylvester:one,help:Rct,rationalize:Bct,lyap:Nct,config:He});jr(Vv,v0,{map:rat({typed:pe}),filter:Wot({typed:pe}),forEach:Zot({typed:pe}),mapSlices:zot({isInteger:Co,typed:pe}),and:jat({add:pn,concat:Dn,equalScalar:rn,matrix:tt,not:dE,typed:pe,zeros:Hi}),cumsum:Pat({add:pn,typed:pe,unaryPlus:f6}),nullish:Zat({deepEqual:zv,flatten:Nh,matrix:tt,size:pi,typed:pe}),print:Hat({add:pn,matrix:tt,typed:pe,zeros:Hi}),bitAnd:est({add:pn,concat:Dn,equalScalar:rn,matrix:tt,not:dE,typed:pe,zeros:Hi}),concat:Aat({isInteger:Co,matrix:tt,typed:pe}),diff:Dat({bignumber:ia,matrix:tt,number:Gl,subtract:Wr,typed:pe}),max:lat({config:He,isNaN:zu,larger:So,numeric:ps,typed:pe}),min:pat({config:He,isNaN:zu,numeric:ps,smaller:To,typed:pe}),or:Wat({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),subset:Cat({add:pn,matrix:tt,typed:pe,zeros:Hi}),bitOr:rst({DenseMatrix:Xt,concat:Dn,equalScalar:rn,matrix:tt,typed:pe}),sum:Iat({add:pn,config:He,numeric:ps,typed:pe}),variance:zat({add:pn,divide:qi,isNaN:zu,mapSlices:Z1,multiply:qn,subtract:Wr,typed:pe}),index:eat({Index:no,getMatrixDataType:n6}),quantileSeq:Lat({add:pn,bignumber:ia,compare:kh,divide:qi,isInteger:Co,larger:So,mapSlices:Z1,multiply:qn,partitionSelect:mS,smaller:To,smallerEq:Rm,subtract:Wr,typed:pe}),range:vat({bignumber:ia,matrix:tt,add:pn,config:He,equal:Ro,isPositive:Mh,isZero:Ts,larger:So,largerEq:pS,smaller:To,smallerEq:Rm,typed:pe}),column:Vot({Index:no,matrix:tt,range:Bm,typed:pe}),row:xat({Index:no,matrix:tt,range:Bm,typed:pe}),mean:fat({add:pn,divide:qi,typed:pe}),std:_at({map:Gf,sqrt:pl,typed:pe,variance:b6})});jr(ane,{BigNumber:nt,Complex:Jn,Fraction:jf,Matrix:uS,Node:mo,ObjectNode:b0,OperatorNode:ic,ParenthesisNode:Oh,Range:dst,RelationalNode:sne,ResultSet:Cte,ArrayNode:y0,BlockNode:lne,ConditionalNode:une,DenseMatrix:Xt,RangeNode:cne,Chain:y6,FunctionAssignmentNode:fne,SparseMatrix:mi,ConstantNode:Kf,IndexNode:x0,FibonacciHeap:$te,ImmutableDenseMatrix:zte,Index:no,Spa:Hte,AccessorNode:w0,AssignmentNode:dne,Unit:Pt,SymbolNode:Xf,FunctionNode:Zf,Help:mne,Parser:gne});y6.createProxy(v0);class Lct{static evaluate(e,n,r){if(!e||!e.trim())return null;try{const i={...UPe,FLOOR:(u,c=1)=>Ef(u,c),CEILING:(u,c=1)=>Gu(u,c)},o="VAR_";let a=e;return r.forEach(u=>{const c=n[u.id],f=`${o}${u.id.replace(/-/g,"_")}`;u.type==="number"?i[f]=Number(c)||0:u.type==="text"?i[f]=String(c||""):u.type==="date"?i[f]=c?new Date(c).getTime():0:i[f]=c;const d=u.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h=new RegExp(`\\[${d}\\]`,"gi");a=a.replace(h,f)}),pne(a).evaluate(i)}catch(i){return i instanceof Error?`Error: ${i.message}`:"Unknown error"}}static getVariables(e){return e.map(n=>`[${n.name}]`)}}function Fct(t){const e=_r.c(28),{column:n,onUpdate:r,onDelete:i,isFirst:o}=t,[a,s]=q.useState(!1),l=q.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={top:0,left:0},e[0]=u):u=e[0];const[c,f]=q.useState(u);let d;e[1]!==a?(d=()=>{if(!a&&l.current){const N=l.current.getBoundingClientRect(),D=Math.min(N.left,window.innerWidth-220);f({top:N.bottom+4,left:Math.max(8,D)})}s(!a)},e[1]=a,e[2]=d):d=e[2];const h=d,m=$ct,v=`w-full flex items-center gap-2 px-3 py-2 text-left text-xs font-medium text-slate-500 hover:bg-slate-100 transition-colors group ${o?"sticky left-0 bg-slate-50 z-20":""}`;let b;e[3]!==n.type?(b=m(n.type),e[3]=n.type,e[4]=b):b=e[4];let x;e[5]!==b?(x=_.jsx("div",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:b}),e[5]=b,e[6]=x):x=e[6];let C;e[7]!==n.name?(C=_.jsx("span",{className:"truncate",children:n.name}),e[7]=n.name,e[8]=C):C=e[8];let w;e[9]!==x||e[10]!==C?(w=_.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[x,C]}),e[9]=x,e[10]=C,e[11]=w):w=e[11];let A;e[12]!==v||e[13]!==w||e[14]!==h?(A=_.jsx("button",{ref:l,onClick:h,className:v,children:w}),e[12]=v,e[13]=w,e[14]=h,e[15]=A):A=e[15];let E;e[16]!==n.formula||e[17]!==n.name||e[18]!==n.options||e[19]!==n.type||e[20]!==c||e[21]!==a||e[22]!==i||e[23]!==r?(E=a&&Vs.createPortal(_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-[60] bg-transparent",onClick:()=>s(!1)}),_.jsxs("div",{style:{top:c.top,left:c.left},className:"fixed z-[70] bg-white border border-slate-200 shadow-xl rounded-lg w-56 flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-100 p-1",onClick:Pct,children:[_.jsx("input",{className:"w-full px-3 py-2 text-sm border-b border-slate-100 outline-none",value:n.name,onChange:N=>r({name:N.target.value}),placeholder:"Column Name",autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&s(!1)}}),_.jsxs("div",{className:"p-1",children:[_.jsx("div",{className:"text-[10px] font-bold text-slate-400 px-2 py-1 uppercase tracking-wider",children:"Type"}),["text","number","select","multi-select","date","formula"].map(N=>_.jsxs("button",{onClick:()=>{r({type:N}),N!=="formula"&&s(!1)},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-sm text-left ${n.type===N?"bg-slate-100 text-slate-900":"text-slate-600 hover:bg-slate-50"}`,children:[_.jsx("div",{className:"w-5 flex justify-center",children:m(N)}),_.jsx("span",{className:"capitalize",children:N})]},N))]}),n.type==="formula"&&_.jsxs("div",{className:"p-2 border-t border-slate-100 bg-slate-50",children:[_.jsx("div",{className:"text-[10px] font-bold text-slate-500 mb-1",children:"Formula Expression"}),_.jsx("input",{className:"w-full px-2 py-1 text-xs border border-slate-200 rounded bg-white font-mono",value:n.formula||"",onChange:N=>r({formula:N.target.value}),placeholder:"e.g. prop('Price') * 2"}),_.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:"Variables corresponds to column names (case-insensitive)."})]}),(n.type==="select"||n.type==="multi-select")&&_.jsxs("div",{className:"p-2 border-t border-slate-100 bg-slate-50",children:[_.jsx("div",{className:"text-[10px] font-bold text-slate-500 mb-1",children:"Options"}),_.jsx("div",{className:"space-y-1 mb-2 max-h-32 overflow-y-auto",children:(n.options||[]).map((N,D)=>_.jsxs("div",{className:"flex items-center gap-1 group/opt",children:[_.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:N.color}}),_.jsx("input",{className:"flex-1 px-1.5 py-0.5 text-xs border border-slate-200 rounded bg-white shadow-sm",value:N.label,onChange:M=>{const k=[...n.options||[]];k[D]={...k[D],label:M.target.value},r({options:k})}}),_.jsx("button",{onClick:()=>{const M=(n.options||[]).filter((k,B)=>B!==D);r({options:M})},className:"p-0.5 text-slate-400 hover:text-red-500 opacity-0 group-hover/opt:opacity-100",children:_.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},N.id||D))}),_.jsxs("button",{onClick:()=>{const N=["#fca5a5","#fdba74","#fcd34d","#bef264","#86efac","#6ee7b7","#67e8f9","#93c5fd","#a5b4fc","#c4b5fd","#d8b4fe","#f0abfc","#fda4af"],D={id:crypto.randomUUID(),label:"New Option",color:N[Math.floor(Math.random()*N.length)]},M=[...n.options||[],D];r({options:M})},className:"w-full px-2 py-1 text-xs text-sky-600 bg-white border border-dashed border-sky-300 rounded hover:bg-sky-50 flex items-center justify-center gap-1",children:[_.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Option"]})]}),_.jsx("div",{className:"border-t border-slate-100 p-1 mt-1",children:_.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-2 py-1.5 rounded text-sm text-left text-red-600 hover:bg-red-50",children:[_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Column"]})})]})]}),document.body),e[16]=n.formula,e[17]=n.name,e[18]=n.options,e[19]=n.type,e[20]=c,e[21]=a,e[22]=i,e[23]=r,e[24]=E):E=e[24];let T;return e[25]!==A||e[26]!==E?(T=_.jsxs(_.Fragment,{children:[A,E]}),e[25]=A,e[26]=E,e[27]=T):T=e[27],T}function Pct(t){return t.stopPropagation()}function $ct(t){switch(t){case"text":return _.jsx("span",{className:"font-serif text-slate-400 font-medium text-[10px]",children:"Aa"});case"number":return _.jsx("span",{className:"text-slate-400 font-medium text-[10px]",children:"#"});case"select":return _.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});case"multi-select":return _.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})});case"date":return _.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})});case"formula":return _.jsx("span",{className:"text-slate-400 font-medium text-[10px] italic",children:""});default:return null}}function zct(t){const e=_r.c(91),{fileId:n,doc:r}=t;let i;e[0]!==r||e[1]!==n?(i=r.getArray(`schema-${n}`),e[0]=r,e[1]=n,e[2]=i):i=e[2];const o=i;let a;e[3]!==r||e[4]!==n?(a=r.getArray(`rows-${n}`),e[3]=r,e[4]=n,e[5]=a):a=e[5];const s=a;let l;e[6]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[6]=l):l=e[6];const[u,c]=q.useState(l);let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[7]=f):f=e[7];const[d,h]=q.useState(f),[m,v]=q.useState(null),[b,x]=q.useState(null);let C,w;e[8]!==r||e[9]!==o?(C=()=>{const te=()=>{c(o.toArray())};return o.observe(te),te(),o.length===0&&r.transact(()=>{o.push([{id:vo(),name:"Name",type:"text"},{id:vo(),name:"Tags",type:"multi-select",options:[{id:vo(),label:"Work",color:"#fb7185"},{id:vo(),label:"Personal",color:"#60a5fa"}]}])}),()=>o.unobserve(te)},w=[o,r],e[8]=r,e[9]=o,e[10]=C,e[11]=w):(C=e[10],w=e[11]),q.useEffect(C,w);let A,E;e[12]!==s?(A=()=>{const te=()=>{h(s.toArray().map(Uct))};return s.observeDeep(te),te(),()=>s.unobserve(te)},E=[s],e[12]=s,e[13]=A,e[14]=E):(A=e[13],E=e[14]),q.useEffect(A,E);let T;e[15]!==r||e[16]!==o?(T=()=>{r.transact(()=>{o.push([{id:vo(),name:"New Column",type:"text"}])})},e[15]=r,e[16]=o,e[17]=T):T=e[17];const N=T;let D;e[18]!==r||e[19]!==o?(D=(te,me)=>{r.transact(()=>{const J=o.get(te);o.delete(te,1),o.insert(te,[{...J,...me}])})},e[18]=r,e[19]=o,e[20]=D):D=e[20];const M=D;let k;e[21]!==r||e[22]!==o?(k=te=>{r.transact(()=>{o.delete(te,1)})},e[21]=r,e[22]=o,e[23]=k):k=e[23];const B=k;let P;e[24]!==r||e[25]!==s?(P=()=>{r.transact(()=>{const te=new jd;te.set("id",vo()),s.push([te])})},e[24]=r,e[25]=s,e[26]=P):P=e[26];const $=P;let z;e[27]!==r||e[28]!==s?(z=(te,me,J)=>{r.transact(()=>{s.get(te).set(me,J)})},e[27]=r,e[28]=s,e[29]=z):z=e[29];const j=z;let L;e[30]!==r||e[31]!==s?(L=te=>{r.transact(()=>{s.delete(te,1)})},e[30]=r,e[31]=s,e[32]=L):L=e[32];const U=L;let G;e[33]!==r||e[34]!==o?(G=(te,me)=>{te!==me&&r.transact(()=>{const J=o.get(te);o.delete(te,1),o.insert(me,[J])})},e[33]=r,e[34]=o,e[35]=G):G=e[35];const Z=G;let H;e[36]===Symbol.for("react.memo_cache_sentinel")?(H=te=>{v(te)},e[36]=H):H=e[36];const W=H;let K;e[37]!==m?(K=(te,me)=>{te.preventDefault(),m!==null&&m!==me&&x(me)},e[37]=m,e[38]=K):K=e[38];const I=K;let ee;e[39]!==m||e[40]!==Z?(ee=te=>{m!==null&&m!==te&&Z(m,te),v(null),x(null)},e[39]=m,e[40]=Z,e[41]=ee):ee=e[41];const Q=ee;let ce;e[42]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>{v(null),x(null)},e[42]=ce):ce=e[42];const ve=ce;let ie;e[43]!==u?(ie=(te,me)=>me.type==="formula"?Lct.evaluate(me.formula||"",te,u):te[me.id],e[43]=u,e[44]=ie):ie=e[44];const X=ie;let le;if(e[45]!==u||e[46]!==B||e[47]!==b||e[48]!==m||e[49]!==I||e[50]!==Q||e[51]!==M){let te;e[53]!==B||e[54]!==b||e[55]!==m||e[56]!==I||e[57]!==Q||e[58]!==M?(te=(me,J)=>_.jsx("th",{draggable:!0,onDragStart:()=>W(J),onDragOver:ae=>I(ae,J),onDrop:()=>Q(J),onDragEnd:ve,className:`text-left bg-white group border-r border-slate-100 last:border-r-0 cursor-grab active:cursor-grabbing transition-all duration-200 select-none ${J===0?"sticky left-0 z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]":""} ${b===J?"bg-slate-50 !border-l-sky-500 !border-l-2":""} ${m===J?"opacity-30 bg-slate-50 scale-95":""}`,style:{minWidth:150,width:me.width},children:_.jsx(Fct,{column:me,onUpdate:ae=>M(J,ae),onDelete:()=>B(J),isFirst:J===0})},me.id),e[53]=B,e[54]=b,e[55]=m,e[56]=I,e[57]=Q,e[58]=M,e[59]=te):te=e[59],le=u.map(te),e[45]=u,e[46]=B,e[47]=b,e[48]=m,e[49]=I,e[50]=Q,e[51]=M,e[52]=le}else le=e[52];let Ce;e[60]===Symbol.for("react.memo_cache_sentinel")?(Ce=_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e[60]=Ce):Ce=e[60];let he;e[61]!==N?(he=_.jsx("th",{className:"w-10 px-1 py-1 border-b border-slate-200",children:_.jsx("button",{onClick:N,className:"p-1 hover:bg-slate-100 rounded text-slate-400",title:"Add Column",children:Ce})}),e[61]=N,e[62]=he):he=e[62];let Te;e[63]!==le||e[64]!==he?(Te=_.jsx("thead",{children:_.jsxs("tr",{className:"border-b border-slate-200",children:[le,he]})}),e[63]=le,e[64]=he,e[65]=Te):Te=e[65];let Ae;if(e[66]!==u||e[67]!==U||e[68]!==X||e[69]!==d||e[70]!==j||e[71]!==M){let te;e[73]!==u||e[74]!==U||e[75]!==X||e[76]!==j||e[77]!==M?(te=(me,J)=>_.jsxs("tr",{className:"group/row hover:bg-slate-50",children:[u.map((ae,ge)=>_.jsx("td",{className:`border-b border-r border-slate-100 last:border-r-0 p-0 relative ${ge===0?"sticky left-0 bg-white group-hover/row:bg-slate-50 z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]":""}`,children:_.jsx("div",{className:"h-full w-full min-h-[34px] flex items-center",children:ae.type==="formula"?_.jsx("div",{className:"px-3 py-1.5 text-sm text-slate-600 w-full truncate cursor-default",children:String(X(me,ae)??"")}):_.jsx(qct,{value:me[ae.id],type:ae.type,options:ae.options,onChange:se=>j(J,ae.id,se),onAddOption:se=>{const fe=ae.options||[];fe.some(we=>we.label.toLowerCase()===se.label.toLowerCase())||M(ge,{options:[...fe,se]})}})})},ae.id)),_.jsx("td",{className:"border-b border-slate-100 px-1 text-center",children:_.jsx("button",{onClick:()=>U(J),className:"opacity-0 group-hover/row:opacity-100 text-slate-300 hover:text-red-500 transition-all p-1",title:"Delete Row",children:_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},me.id),e[73]=u,e[74]=U,e[75]=X,e[76]=j,e[77]=M,e[78]=te):te=e[78],Ae=d.map(te),e[66]=u,e[67]=U,e[68]=X,e[69]=d,e[70]=j,e[71]=M,e[72]=Ae}else Ae=e[72];const qe=u.length+1;let rt;e[79]===Symbol.for("react.memo_cache_sentinel")?(rt=_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e[79]=rt):rt=e[79];let lt;e[80]!==$?(lt=_.jsxs("button",{onClick:$,className:"flex items-center gap-2 text-sm text-slate-400 hover:text-slate-600 transition-colors",children:[rt,"New"]}),e[80]=$,e[81]=lt):lt=e[81];let Qe;e[82]!==qe||e[83]!==lt?(Qe=_.jsx("tr",{children:_.jsx("td",{colSpan:qe,className:"px-3 py-2 border-t border-slate-100",children:lt})}),e[82]=qe,e[83]=lt,e[84]=Qe):Qe=e[84];let st;e[85]!==Ae||e[86]!==Qe?(st=_.jsxs("tbody",{children:[Ae,Qe]}),e[85]=Ae,e[86]=Qe,e[87]=st):st=e[87];let dt;return e[88]!==Te||e[89]!==st?(dt=_.jsx("div",{className:"flex flex-col h-full bg-white overflow-hidden",children:_.jsx("div",{className:"flex-1 overflow-auto pb-20",children:_.jsx("div",{className:"inline-block min-w-full align-middle",children:_.jsxs("table",{className:"min-w-full border-collapse",children:[Te,st]})})})}),e[88]=Te,e[89]=st,e[90]=dt):dt=e[90],dt}function Uct(t){const e=t.toJSON();return e.id||(e.id=vo()),e}const Hct=t=>{const e=_r.c(14),{value:n,options:r,onChange:i}=t,o=String(n??"");let a;e[0]!==i?(a=h=>i(h.target.value),e[0]=i,e[1]=a):a=e[1];let s;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=_.jsx("option",{value:"",disabled:!0,className:"text-slate-300",children:"Select option..."}),e[2]=s):s=e[2];let l;e[3]!==r?(l=r||[],e[3]=r,e[4]=l):l=e[4];let u;e[5]!==l?(u=l.map(jct),e[5]=l,e[6]=u):u=e[6];let c;e[7]!==o||e[8]!==a||e[9]!==u?(c=_.jsxs("select",{className:"w-full h-full px-3 py-1.5 bg-transparent outline-none text-sm text-slate-700 appearance-none cursor-pointer",value:o,onChange:a,children:[s,u]}),e[7]=o,e[8]=a,e[9]=u,e[10]=c):c=e[10];let f;e[11]===Symbol.for("react.memo_cache_sentinel")?(f=_.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover/select:text-slate-600",children:_.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),e[11]=f):f=e[11];let d;return e[12]!==c?(d=_.jsxs("div",{className:"relative w-full h-full group/select",children:[c,f]}),e[12]=c,e[13]=d):d=e[13],d},Vct=({value:t,options:e,onChange:n,onAddOption:r})=>{const i=Array.isArray(t)?t:[],[o,a]=q.useState(!1),[s,l]=q.useState(""),u=q.useRef(null),c=(e||[]).filter(h=>h.label.toLowerCase().includes(s.toLowerCase())),f=h=>{i.includes(h)?n(i.filter(m=>m!==h)):n([...i,h])},d=()=>{if(!r||!s.trim())return;const h=["#f87171","#fb923c","#fbbf24","#a3e635","#4ade80","#34d399","#22d3ee","#60a5fa","#818cf8","#a78bfa","#c084fc","#e879f9","#fb7185"];r({id:vo(),label:s.trim(),color:h[Math.floor(Math.random()*h.length)]}),f(s.trim()),l("")};return _.jsxs(_.Fragment,{children:[_.jsxs("button",{ref:u,onClick:()=>a(!o),className:"w-full h-full text-left px-2 flex items-center gap-1.5 overflow-hidden hover:bg-slate-50",children:[i.length===0&&_.jsx("span",{className:"text-slate-300 text-sm pl-1",children:"Empty"}),i.map(h=>{const m=(e||[]).find(v=>v.label===h);return _.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium leading-4 shadow-sm",style:{backgroundColor:m?.color||"#e2e8f0",color:"#fff",textShadow:"0px 1px 1px rgba(0,0,0,0.2)"},children:h},h)})]}),o&&Vs.createPortal(_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-[60] bg-transparent",onClick:()=>a(!1)}),_.jsxs("div",{style:{top:(u.current?.getBoundingClientRect().bottom||0)+4,left:u.current?.getBoundingClientRect().left||0},className:"fixed z-[70] w-64 bg-white border border-slate-200 shadow-xl rounded-lg flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-100 p-1",onClick:h=>h.stopPropagation(),children:[_.jsx("input",{autoFocus:!0,className:"w-full px-2 py-1.5 text-xs bg-slate-50 border border-slate-200 rounded mb-1 outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Search or create...",value:s,onChange:h=>l(h.target.value),onKeyDown:h=>{if(h.key==="Enter"&&s.trim()){const m=(e||[]).find(v=>v.label.toLowerCase()===s.trim().toLowerCase());m?(f(m.label),l("")):d()}}}),_.jsx("div",{className:"text-[10px] font-bold text-slate-400 px-2 py-1 uppercase tracking-wider",children:"Select an option or create one"}),_.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-0.5",children:[c.map(h=>{const m=i.includes(h.label);return _.jsxs("button",{onClick:()=>f(h.label),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs rounded hover:bg-slate-100 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:h.color}}),_.jsx("span",{className:m?"opacity-100 font-medium":"opacity-80",children:h.label})]}),m&&_.jsx("svg",{className:"w-3.5 h-3.5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},h.id)}),s.trim()&&!c.some(h=>h.label.toLowerCase()===s.trim().toLowerCase())&&_.jsxs("button",{onClick:d,className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs text-slate-600 hover:bg-slate-100 rounded",children:[_.jsx("span",{className:"text-slate-400",children:"Create"}),_.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] text-white",style:{backgroundColor:"#fb7185"},children:s})]})]})]})]}),document.body)]})};function qct(t){const e=_r.c(19),{value:n,type:r,onChange:i,options:o,onAddOption:a}=t;if(r==="number"){const c=n?String(n):"";let f;e[0]!==i?(f=h=>i(Number(h.target.value)),e[0]=i,e[1]=f):f=e[1];let d;return e[2]!==c||e[3]!==f?(d=_.jsx("input",{type:"number",className:"w-full h-full px-3 py-1.5 bg-transparent outline-none text-sm text-slate-700 placeholder:text-slate-300",value:c,onChange:f,placeholder:"Empty"}),e[2]=c,e[3]=f,e[4]=d):d=e[4],d}if(r==="select"){let c;return e[5]!==i||e[6]!==o||e[7]!==n?(c=_.jsx(Hct,{value:n,options:o,onChange:i}),e[5]=i,e[6]=o,e[7]=n,e[8]=c):c=e[8],c}if(r==="multi-select"){let c;return e[9]!==a||e[10]!==i||e[11]!==o||e[12]!==n?(c=_.jsx(Vct,{value:n,options:o,onChange:i,onAddOption:a}),e[9]=a,e[10]=i,e[11]=o,e[12]=n,e[13]=c):c=e[13],c}const s=n?String(n):"";let l;e[14]!==i?(l=c=>i(c.target.value),e[14]=i,e[15]=l):l=e[15];let u;return e[16]!==s||e[17]!==l?(u=_.jsx("input",{type:"text",className:"w-full h-full px-3 py-1.5 bg-transparent outline-none text-sm text-slate-700 placeholder:text-slate-300",value:s,onChange:l,placeholder:"Empty"}),e[16]=s,e[17]=l,e[18]=u):u=e[18],u}function jct(t){return _.jsx("option",{value:t.label,children:t.label},t.id)}const Gct=()=>{const t=_r.c(8),{doc:e,provider:n}=Df(),{activeFileId:r,fileMap:i}=hh();let o;e:{if(!r){o=null;break e}o=i.get(r)}const a=o;if(!r||!a){let l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=_.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:_.jsx("p",{children:"Select a file to edit"})}),t[0]=l):l=t[0],l}if(a.type==="table"){let l;return t[1]!==r||t[2]!==e?(l=_.jsx(zct,{fileId:r,doc:e},r),t[1]=r,t[2]=e,t[3]=l):l=t[3],l}let s;return t[4]!==r||t[5]!==e||t[6]!==n?(s=_.jsx(Yct,{fileId:r,doc:e,provider:n},r),t[4]=r,t[5]=e,t[6]=n,t[7]=s):s=t[7],s};function Yct(t){const e=_r.c(14),{fileId:n,doc:r,provider:i}=t,{setEditor:o}=Df();let a;e[0]!==r||e[1]!==n?(a=r.getXmlFragment(`content-${n}`),e[0]=r,e[1]=n,e[2]=a):a=e[2];let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s={name:"User",color:"#"+Math.floor(Math.random()*16777215).toString(16)},e[3]=s):s=e[3];const l=i??void 0;let u;e[4]!==a||e[5]!==l?(u={collaboration:{fragment:a,user:s,provider:l}},e[4]=a,e[5]=l,e[6]=u):u=e[6];const c=gC(u);let f,d;if(e[7]!==c||e[8]!==o?(f=()=>{if(c)return o(c),()=>o(null)},d=[c,o],e[7]=c,e[8]=o,e[9]=f,e[10]=d):(f=e[9],d=e[10]),q.useEffect(f,d),!c){let m;return e[11]===Symbol.for("react.memo_cache_sentinel")?(m=_.jsx("div",{children:"Loading..."}),e[11]=m):m=e[11],m}let h;return e[12]!==c?(h=_.jsx("div",{className:"w-full h-full min-h-[500px] bg-white sm:rounded-lg sm:shadow-sm p-0 sm:p-4",children:_.jsx(RQ,{editor:c,theme:"light"})}),e[12]=c,e[13]=h):h=e[13],h}function Wct(){const t=_r.c(10),[e,n]=q.useState(navigator.onLine),[r,i]=q.useState(!1);let o,a;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const d=()=>{n(!0),i(!0),setTimeout(()=>i(!1),3e3)},h=()=>{n(!1),i(!0)};return window.addEventListener("online",d),window.addEventListener("offline",h),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",h)}},a=[],t[0]=o,t[1]=a):(o=t[0],a=t[1]),q.useEffect(o,a),!r&&e)return null;const s=`fixed bottom-4 left-1/2 -translate-x-1/2 z-[100] transition-all duration-300 ease-out transform ${r?"translate-y-0 opacity-100 scale-100":"translate-y-10 opacity-0 scale-95"}`,l=`px-4 py-3 rounded-xl shadow-lg border backdrop-blur-md flex items-center gap-3 min-w-[300px] justify-center ${e?"bg-emerald-500/90 border-emerald-400 text-white":"bg-slate-900/90 border-slate-700 text-white"}`;let u;t[2]!==e?(u=e?_.jsxs(_.Fragment,{children:[_.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),_.jsx("span",{className:"font-medium text-sm",children:"Back online"})]}):_.jsxs(_.Fragment,{children:[_.jsx("svg",{className:"w-5 h-5 text-rose-400 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"font-medium text-sm",children:"You are offline"}),_.jsx("span",{className:"text-xs text-slate-300",children:"Changes will sync when you reconnect"})]})]}),t[2]=e,t[3]=u):u=t[3];let c;t[4]!==l||t[5]!==u?(c=_.jsx("div",{className:l,children:u}),t[4]=l,t[5]=u,t[6]=c):c=t[6];let f;return t[7]!==s||t[8]!==c?(f=_.jsx("div",{className:s,children:c}),t[7]=s,t[8]=c,t[9]=f):f=t[9],f}const Kct="ENTRIES",vne="KEYS",bne="VALUES",Fi="";class V3{constructor(e,n){const r=e._tree,i=Array.from(r.keys());this.set=e,this._type=n,this._path=i.length>0?[{node:r,keys:i}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:n}=Np(this._path);if(Np(n)===Fi)return{done:!1,value:this.result()};const r=e.get(Np(n));return this._path.push({node:r,keys:Array.from(r.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=Np(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>Np(e)).filter(e=>e!==Fi).join("")}value(){return Np(this._path).node.get(Fi)}result(){switch(this._type){case bne:return this.value();case vne:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Np=t=>t[t.length-1],Xct=(t,e,n)=>{const r=new Map;if(e===void 0)return r;const i=e.length+1,o=i+n,a=new Uint8Array(o*i).fill(n+1);for(let s=0;s<i;++s)a[s]=s;for(let s=1;s<o;++s)a[s*i]=s;return yne(t,e,n,r,a,1,i,""),r},yne=(t,e,n,r,i,o,a,s)=>{const l=o*a;e:for(const u of t.keys())if(u===Fi){const c=i[l-1];c<=n&&r.set(s,[t.get(u),c])}else{let c=o;for(let f=0;f<u.length;++f,++c){const d=u[f],h=a*c,m=h-a;let v=i[h];const b=Math.max(0,c-n-1),x=Math.min(a-1,c+n);for(let C=b;C<x;++C){const w=d!==e[C],A=i[m+C]+ +w,E=i[m+C+1]+1,T=i[h+C]+1,N=i[h+C+1]=Math.min(A,E,T);N<v&&(v=N)}if(v>n)continue e}yne(t.get(u),e,n,r,i,c,a,s+u)}};class nf{constructor(e=new Map,n=""){this._size=void 0,this._tree=e,this._prefix=n}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[n,r]=hE(this._tree,e.slice(this._prefix.length));if(n===void 0){const[i,o]=C6(r);for(const a of i.keys())if(a!==Fi&&a.startsWith(o)){const s=new Map;return s.set(a.slice(o.length),i.get(a)),new nf(s,e)}}return new nf(n,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Zct(this._tree,e)}entries(){return new V3(this,Kct)}forEach(e){for(const[n,r]of this)e(n,r,this)}fuzzyGet(e,n){return Xct(this._tree,e,n)}get(e){const n=iM(this._tree,e);return n!==void 0?n.get(Fi):void 0}has(e){const n=iM(this._tree,e);return n!==void 0&&n.has(Fi)}keys(){return new V3(this,vne)}set(e,n){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,q3(this._tree,e).set(Fi,n),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const r=q3(this._tree,e);return r.set(Fi,n(r.get(Fi))),this}fetch(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const r=q3(this._tree,e);let i=r.get(Fi);return i===void 0&&r.set(Fi,i=n()),i}values(){return new V3(this,bne)}[Symbol.iterator](){return this.entries()}static from(e){const n=new nf;for(const[r,i]of e)n.set(r,i);return n}static fromObject(e){return nf.from(Object.entries(e))}}const hE=(t,e,n=[])=>{if(e.length===0||t==null)return[t,n];for(const r of t.keys())if(r!==Fi&&e.startsWith(r))return n.push([t,r]),hE(t.get(r),e.slice(r.length),n);return n.push([t,e]),hE(void 0,"",n)},iM=(t,e)=>{if(e.length===0||t==null)return t;for(const n of t.keys())if(n!==Fi&&e.startsWith(n))return iM(t.get(n),e.slice(n.length))},q3=(t,e)=>{const n=e.length;e:for(let r=0;t&&r<n;){for(const o of t.keys())if(o!==Fi&&e[r]===o[0]){const a=Math.min(n-r,o.length);let s=1;for(;s<a&&e[r+s]===o[s];)++s;const l=t.get(o);if(s===o.length)t=l;else{const u=new Map;u.set(o.slice(s),l),t.set(e.slice(r,r+s),u),t.delete(o),t=u}r+=s;continue e}const i=new Map;return t.set(e.slice(r),i),i}return t},Zct=(t,e)=>{const[n,r]=hE(t,e);if(n!==void 0){if(n.delete(Fi),n.size===0)xne(r);else if(n.size===1){const[i,o]=n.entries().next().value;wne(r,i,o)}}},xne=t=>{if(t.length===0)return;const[e,n]=C6(t);if(e.delete(n),e.size===0)xne(t.slice(0,-1));else if(e.size===1){const[r,i]=e.entries().next().value;r!==Fi&&wne(t.slice(0,-1),r,i)}},wne=(t,e,n)=>{if(t.length===0)return;const[r,i]=C6(t);r.set(i+e,n),r.delete(i)},C6=t=>t[t.length-1],S6="or",Ene="and",Qct="and_not";class om{constructor(e){if(e?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const n=e.autoVacuum==null||e.autoVacuum===!0?Y3:e.autoVacuum;this._options={...G3,...e,autoVacuum:n,searchOptions:{...VH,...e.searchOptions||{}},autoSuggestOptions:{...rft,...e.autoSuggestOptions||{}}},this._index=new nf,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=aM,this.addFields(this._options.fields)}add(e){const{extractField:n,stringifyField:r,tokenize:i,processTerm:o,fields:a,idField:s}=this._options,l=n(e,s);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);if(this._idToShortId.has(l))throw new Error(`MiniSearch: duplicate ID ${l}`);const u=this.addDocumentId(l);this.saveStoredFields(u,e);for(const c of a){const f=n(e,c);if(f==null)continue;const d=i(r(f,c),c),h=this._fieldIds[c],m=new Set(d).size;this.addFieldLength(u,h,this._documentCount-1,m);for(const v of d){const b=o(v,c);if(Array.isArray(b))for(const x of b)this.addTerm(h,u,x);else b&&this.addTerm(h,u,b)}}}addAll(e){for(const n of e)this.add(n)}addAllAsync(e,n={}){const{chunkSize:r=10}=n,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:a}=e.reduce(({chunk:s,promise:l},u,c)=>(s.push(u),(c+1)%r===0?{chunk:[],promise:l.then(()=>new Promise(f=>setTimeout(f,0))).then(()=>this.addAll(s))}:{chunk:s,promise:l}),i);return a.then(()=>this.addAll(o))}remove(e){const{tokenize:n,processTerm:r,extractField:i,stringifyField:o,fields:a,idField:s}=this._options,l=i(e,s);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);const u=this._idToShortId.get(l);if(u==null)throw new Error(`MiniSearch: cannot remove document with ID ${l}: it is not in the index`);for(const c of a){const f=i(e,c);if(f==null)continue;const d=n(o(f,c),c),h=this._fieldIds[c],m=new Set(d).size;this.removeFieldLength(u,h,this._documentCount,m);for(const v of d){const b=r(v,c);if(Array.isArray(b))for(const x of b)this.removeTerm(h,u,x);else b&&this.removeTerm(h,u,b)}}this._storedFields.delete(u),this._documentIds.delete(u),this._idToShortId.delete(l),this._fieldLength.delete(u),this._documentCount-=1}removeAll(e){if(e)for(const n of e)this.remove(n);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new nf,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const n=this._idToShortId.get(e);if(n==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(n),this._storedFields.delete(n),(this._fieldLength.get(n)||[]).forEach((r,i)=>{this.removeFieldLength(n,i,this._documentCount,r)}),this._fieldLength.delete(n),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:n,batchSize:r,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:r,batchWait:i},{minDirtCount:n,minDirtFactor:e})}discardAll(e){const n=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const r of e)this.discard(r)}finally{this._options.autoVacuum=n}this.maybeAutoVacuum()}replace(e){const{idField:n,extractField:r}=this._options,i=r(e,n);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,n){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&n,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const r=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=aM,this.performVacuuming(e,r)}),this._enqueuedVacuum)):this.vacuumConditionsMet(n)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,n){const r=this._dirtCount;if(this.vacuumConditionsMet(n)){const i=e.batchSize||oM.batchSize,o=e.batchWait||oM.batchWait;let a=1;for(const[s,l]of this._index){for(const[u,c]of l)for(const[f]of c)this._documentIds.has(f)||(c.size<=1?l.delete(u):c.delete(f));this._index.get(s).size===0&&this._index.delete(s),a%i===0&&await new Promise(u=>setTimeout(u,o)),a+=1}this._dirtCount-=r}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:n,minDirtFactor:r}=e;return n=n||Y3.minDirtCount,r=r||Y3.minDirtFactor,this.dirtCount>=n&&this.dirtFactor>=r}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const n=this._idToShortId.get(e);if(n!=null)return this._storedFields.get(n)}search(e,n={}){const{searchOptions:r}=this._options,i={...r,...n},o=this.executeQuery(e,n),a=[];for(const[s,{score:l,terms:u,match:c}]of o){const f=u.length||1,d={id:this._documentIds.get(s),score:l*f,terms:Object.keys(c),queryTerms:u,match:c};Object.assign(d,this._storedFields.get(s)),(i.filter==null||i.filter(d))&&a.push(d)}return e===om.wildcard&&i.boostDocument==null||a.sort(jH),a}autoSuggest(e,n={}){n={...this._options.autoSuggestOptions,...n};const r=new Map;for(const{score:o,terms:a}of this.search(e,n)){const s=a.join(" "),l=r.get(s);l!=null?(l.score+=o,l.count+=1):r.set(s,{score:o,terms:a,count:1})}const i=[];for(const[o,{score:a,terms:s,count:l}]of r)i.push({suggestion:o,terms:s,score:a/l});return i.sort(jH),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),n)}static async loadJSONAsync(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),n)}static getDefault(e){if(G3.hasOwnProperty(e))return j3(G3,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,n){const{index:r,documentIds:i,fieldLength:o,storedFields:a,serializationVersion:s}=e,l=this.instantiateMiniSearch(e,n);l._documentIds=b2(i),l._fieldLength=b2(o),l._storedFields=b2(a);for(const[u,c]of l._documentIds)l._idToShortId.set(c,u);for(const[u,c]of r){const f=new Map;for(const d of Object.keys(c)){let h=c[d];s===1&&(h=h.ds),f.set(parseInt(d,10),b2(h))}l._index.set(u,f)}return l}static async loadJSAsync(e,n){const{index:r,documentIds:i,fieldLength:o,storedFields:a,serializationVersion:s}=e,l=this.instantiateMiniSearch(e,n);l._documentIds=await y2(i),l._fieldLength=await y2(o),l._storedFields=await y2(a);for(const[c,f]of l._documentIds)l._idToShortId.set(f,c);let u=0;for(const[c,f]of r){const d=new Map;for(const h of Object.keys(f)){let m=f[h];s===1&&(m=m.ds),d.set(parseInt(h,10),await y2(m))}++u%1e3===0&&await Cne(0),l._index.set(c,d)}return l}static instantiateMiniSearch(e,n){const{documentCount:r,nextId:i,fieldIds:o,averageFieldLength:a,dirtCount:s,serializationVersion:l}=e;if(l!==1&&l!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new om(n);return u._documentCount=r,u._nextId=i,u._idToShortId=new Map,u._fieldIds=o,u._avgFieldLength=a,u._dirtCount=s||0,u._index=new nf,u}executeQuery(e,n={}){if(e===om.wildcard)return this.executeWildcardQuery(n);if(typeof e!="string"){const d={...n,...e,queries:void 0},h=e.queries.map(m=>this.executeQuery(m,d));return this.combineResults(h,d.combineWith)}const{tokenize:r,processTerm:i,searchOptions:o}=this._options,a={tokenize:r,processTerm:i,...o,...n},{tokenize:s,processTerm:l}=a,f=s(e).flatMap(d=>l(d)).filter(d=>!!d).map(nft(a)).map(d=>this.executeQuerySpec(d,a));return this.combineResults(f,a.combineWith)}executeQuerySpec(e,n){const r={...this._options.searchOptions,...n},i=(r.fields||this._options.fields).reduce((v,b)=>({...v,[b]:j3(r.boost,b)||1}),{}),{boostDocument:o,weights:a,maxFuzzy:s,bm25:l}=r,{fuzzy:u,prefix:c}={...VH.weights,...a},f=this._index.get(e.term),d=this.termResults(e.term,e.term,1,e.termBoost,f,i,o,l);let h,m;if(e.prefix&&(h=this._index.atPrefix(e.term)),e.fuzzy){const v=e.fuzzy===!0?.2:e.fuzzy,b=v<1?Math.min(s,Math.round(e.term.length*v)):v;b&&(m=this._index.fuzzyGet(e.term,b))}if(h)for(const[v,b]of h){const x=v.length-e.term.length;if(!x)continue;m?.delete(v);const C=c*v.length/(v.length+.3*x);this.termResults(e.term,v,C,e.termBoost,b,i,o,l,d)}if(m)for(const v of m.keys()){const[b,x]=m.get(v);if(!x)continue;const C=u*v.length/(v.length+x);this.termResults(e.term,v,C,e.termBoost,b,i,o,l,d)}return d}executeWildcardQuery(e){const n=new Map,r={...this._options.searchOptions,...e};for(const[i,o]of this._documentIds){const a=r.boostDocument?r.boostDocument(o,"",this._storedFields.get(i)):1;n.set(i,{score:a,terms:[],match:{}})}return n}combineResults(e,n=S6){if(e.length===0)return new Map;const r=n.toLowerCase(),i=Jct[r];if(!i)throw new Error(`Invalid combination operator: ${n}`);return e.reduce(i)||new Map}toJSON(){const e=[];for(const[n,r]of this._index){const i={};for(const[o,a]of r)i[o]=Object.fromEntries(a);e.push([n,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,n,r,i,o,a,s,l,u=new Map){if(o==null)return u;for(const c of Object.keys(a)){const f=a[c],d=this._fieldIds[c],h=o.get(d);if(h==null)continue;let m=h.size;const v=this._avgFieldLength[d];for(const b of h.keys()){if(!this._documentIds.has(b)){this.removeTerm(d,b,n),m-=1;continue}const x=s?s(this._documentIds.get(b),n,this._storedFields.get(b)):1;if(!x)continue;const C=h.get(b),w=this._fieldLength.get(b)[d],A=tft(C,m,this._documentCount,w,v,l),E=r*i*f*x*A,T=u.get(b);if(T){T.score+=E,ift(T.terms,e);const N=j3(T.match,n);N?N.push(c):T.match[n]=[c]}else u.set(b,{score:E,terms:[e],match:{[n]:[c]}})}}return u}addTerm(e,n,r){const i=this._index.fetch(r,GH);let o=i.get(e);if(o==null)o=new Map,o.set(n,1),i.set(e,o);else{const a=o.get(n);o.set(n,(a||0)+1)}}removeTerm(e,n,r){if(!this._index.has(r)){this.warnDocumentChanged(n,e,r);return}const i=this._index.fetch(r,GH),o=i.get(e);o==null||o.get(n)==null?this.warnDocumentChanged(n,e,r):o.get(n)<=1?o.size<=1?i.delete(e):o.delete(n):o.set(n,o.get(n)-1),this._index.get(r).size===0&&this._index.delete(r)}warnDocumentChanged(e,n,r){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===n){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${r}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const n=this._nextId;return this._idToShortId.set(e,n),this._documentIds.set(n,e),this._documentCount+=1,this._nextId+=1,n}addFields(e){for(let n=0;n<e.length;n++)this._fieldIds[e[n]]=n}addFieldLength(e,n,r,i){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[n]=i;const s=(this._avgFieldLength[n]||0)*r+i;this._avgFieldLength[n]=s/(r+1)}removeFieldLength(e,n,r,i){if(r===1){this._avgFieldLength[n]=0;return}const o=this._avgFieldLength[n]*r-i;this._avgFieldLength[n]=o/(r-1)}saveStoredFields(e,n){const{storeFields:r,extractField:i}=this._options;if(r==null||r.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const a of r){const s=i(n,a);s!==void 0&&(o[a]=s)}}}om.wildcard=Symbol("*");const j3=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,Jct={[S6]:(t,e)=>{for(const n of e.keys()){const r=t.get(n);if(r==null)t.set(n,e.get(n));else{const{score:i,terms:o,match:a}=e.get(n);r.score=r.score+i,r.match=Object.assign(r.match,a),qH(r.terms,o)}}return t},[Ene]:(t,e)=>{const n=new Map;for(const r of e.keys()){const i=t.get(r);if(i==null)continue;const{score:o,terms:a,match:s}=e.get(r);qH(i.terms,a),n.set(r,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,s)})}return n},[Qct]:(t,e)=>{for(const n of e.keys())t.delete(n);return t}},eft={k:1.2,b:.7,d:.5},tft=(t,e,n,r,i,o)=>{const{k:a,b:s,d:l}=o;return Math.log(1+(n-e+.5)/(e+.5))*(l+t*(a+1)/(t+a*(1-s+s*r/i)))},nft=t=>(e,n,r)=>{const i=typeof t.fuzzy=="function"?t.fuzzy(e,n,r):t.fuzzy||!1,o=typeof t.prefix=="function"?t.prefix(e,n,r):t.prefix===!0,a=typeof t.boostTerm=="function"?t.boostTerm(e,n,r):1;return{term:e,fuzzy:i,prefix:o,termBoost:a}},G3={idField:"id",extractField:(t,e)=>t[e],stringifyField:(t,e)=>t.toString(),tokenize:t=>t.split(oft),processTerm:t=>t.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(t,e)=>{typeof console?.[t]=="function"&&console[t](e)},autoVacuum:!0},VH={combineWith:S6,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:eft},rft={combineWith:Ene,prefix:(t,e,n)=>e===n.length-1},oM={batchSize:1e3,batchWait:10},aM={minDirtFactor:.1,minDirtCount:20},Y3={...oM,...aM},ift=(t,e)=>{t.includes(e)||t.push(e)},qH=(t,e)=>{for(const n of e)t.includes(n)||t.push(n)},jH=({score:t},{score:e})=>e-t,GH=()=>new Map,b2=t=>{const e=new Map;for(const n of Object.keys(t))e.set(parseInt(n,10),t[n]);return e},y2=async t=>{const e=new Map;let n=0;for(const r of Object.keys(t))e.set(parseInt(r,10),t[r]),++n%1e3===0&&await Cne(0);return e},Cne=t=>new Promise(e=>setTimeout(e,t)),oft=/[\n\r\p{Z}\p{P}]+/u;function aft(t){const e=_r.c(56),{isOpen:n,onClose:r}=t,{fileTree:i,setActiveFileId:o}=hh(),{doc:a}=Df(),[s,l]=q.useState("");let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[c,f]=q.useState(u),[d,h]=q.useState(0),m=q.useRef(null);let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=new Map,e[1]=v):v=e[1];const b=q.useRef(v);let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=new om({fields:["name","content"],storeFields:["name","type","content"],searchOptions:{boost:{name:2},fuzzy:.2,prefix:!0}}),e[2]=x):x=e[2];const C=x;let w,A;e[3]!==a||e[4]!==i?(w=()=>{const X=hft,le=i.filter(dft).map(Ce=>{let he="";if(Ce.type==="text"){const Te=a.getXmlFragment(`content-${Ce.id}`);he=X(Te.toString())}else Ce.type==="table"&&(he=a.getArray(`rows-${Ce.id}`).toArray().map(uft).join(" "));return{id:Ce.id,name:Ce.name,type:Ce.type,content:he}});C.removeAll(),C.addAll(le)},A=[C,i,a],e[3]=a,e[4]=i,e[5]=w,e[6]=A):(w=e[5],A=e[6]),q.useEffect(w,A);let E,T;e[7]!==n?(E=()=>{if(!n){l(""),f([]),h(0);return}setTimeout(()=>m.current?.focus(),0)},T=[n],e[7]=n,e[8]=E,e[9]=T):(E=e[8],T=e[9]),q.useEffect(E,T);let N,D;e[10]!==s?(N=()=>{if(!s.trim()){f([]),h(0);return}const X=C.search(s).map(le=>{const Ce=Object.prototype.hasOwnProperty.call(le.match,"name")?"name":"content";let he="";if(le.content){const Te=le.content,Ae=Te.toLowerCase().indexOf(s.toLowerCase());if(Ae!==-1){const qe=Math.max(0,Ae-30),rt=Math.min(Te.length,Ae+s.length+50);he=(qe>0?"...":"")+Te.slice(qe,rt)+(rt<Te.length?"...":"")}else he=Te.slice(0,80)+(Te.length>80?"...":"")}return{id:le.id,name:le.name,score:le.score,type:le.type,matchType:Ce,snippet:he}});f(X),h(0)},D=[s,C],e[10]=s,e[11]=N,e[12]=D):(N=e[11],D=e[12]),q.useEffect(N,D);let M,k;e[13]!==d?(M=()=>{b.current.get(d)?.scrollIntoView({block:"nearest"})},k=[d],e[13]=d,e[14]=M,e[15]=k):(M=e[14],k=e[15]),q.useEffect(M,k);let B;e[16]!==r||e[17]!==o?(B=X=>{o(X),r()},e[16]=r,e[17]=o,e[18]=B):B=e[18];const P=B;let $;e[19]!==P||e[20]!==c||e[21]!==d?($=X=>{X.key==="ArrowDown"?(X.preventDefault(),h(le=>Math.min(le+1,c.length-1))):X.key==="ArrowUp"?(X.preventDefault(),h(lft)):X.key==="Enter"&&c.length>0&&(X.preventDefault(),P(c[d].id))},e[19]=P,e[20]=c,e[21]=d,e[22]=$):$=e[22];const z=$;let j;e[23]!==n||e[24]!==r?(j=()=>{n&&r()},e[23]=n,e[24]=r,e[25]=j):j=e[25];let L;e[26]!==n?(L={enabled:n,enableOnFormTags:!0},e[26]=n,e[27]=L):L=e[27];let U;if(e[28]!==n||e[29]!==r?(U=[n,r],e[28]=n,e[29]=r,e[30]=U):U=e[30],lV("escape",j,L,U),!n)return null;let G;e[31]===Symbol.for("react.memo_cache_sentinel")?(G=_.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e[31]=G):G=e[31];let Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(Z=X=>l(X.target.value),e[32]=Z):Z=e[32];let H;e[33]!==s?(H=_.jsx("input",{ref:m,autoFocus:!0,placeholder:"Search files and content...",className:"flex-1 text-lg outline-none text-slate-700 placeholder-slate-400",value:s,onChange:Z}),e[33]=s,e[34]=H):H=e[34];let W;e[35]===Symbol.for("react.memo_cache_sentinel")?(W=_.jsx("div",{className:"text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-500",children:"ESC"}),e[35]=W):W=e[35];let K;e[36]!==H?(K=_.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center gap-3",children:[G,H,W]}),e[36]=H,e[37]=K):K=e[37];let I;e[38]!==P||e[39]!==s||e[40]!==c||e[41]!==d?(I=_.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:c.length===0&&s?_.jsx("div",{className:"p-8 text-center text-slate-400",children:"No results found"}):c.length===0&&!s?_.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"Type to search..."}):_.jsx("div",{className:"py-2",children:c.map((X,le)=>_.jsxs("button",{ref:Ce=>{Ce&&b.current.set(le,Ce)},className:`w-full text-left px-4 py-3 border-l-4 flex flex-col gap-1 transition-colors ${le===d?"bg-sky-50 border-sky-500":"border-transparent hover:bg-slate-50 hover:border-sky-500"}`,onClick:()=>P(X.id),onMouseEnter:()=>h(le),children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:X.type==="table"?"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z":"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),_.jsx("span",{className:"font-medium text-slate-700",children:X.name}),X.matchType==="content"&&_.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-1.5 rounded",children:"Content"}),_.jsx("span",{className:"ml-auto text-xs text-slate-400",children:X.score.toFixed(1)})]}),X.snippet&&_.jsx("p",{className:"text-xs text-slate-500 pl-6 font-sans truncate",children:X.snippet})]},X.id))})}),e[38]=P,e[39]=s,e[40]=c,e[41]=d,e[42]=I):I=e[42];let ee;e[43]!==c.length?(ee=_.jsxs("span",{children:[c.length," results"]}),e[43]=c.length,e[44]=ee):ee=e[44];let Q;e[45]===Symbol.for("react.memo_cache_sentinel")?(Q=_.jsxs("span",{className:"flex gap-2",children:[_.jsx("kbd",{className:"bg-slate-200 px-1.5 rounded",children:""}),_.jsx("kbd",{className:"bg-slate-200 px-1.5 rounded",children:""}),_.jsx("span",{children:"to navigate"}),_.jsx("kbd",{className:"bg-slate-200 px-1.5 rounded",children:""}),_.jsx("span",{children:"to select"})]}),e[45]=Q):Q=e[45];let ce;e[46]!==ee?(ce=_.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-t border-slate-100 text-xs text-slate-400 flex justify-between",children:[ee,Q]}),e[46]=ee,e[47]=ce):ce=e[47];let ve;e[48]!==z||e[49]!==K||e[50]!==I||e[51]!==ce?(ve=_.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl shadow-2xl overflow-hidden border border-slate-200",onClick:sft,onKeyDown:z,children:[K,I,ce]}),e[48]=z,e[49]=K,e[50]=I,e[51]=ce,e[52]=ve):ve=e[52];let ie;return e[53]!==r||e[54]!==ve?(ie=_.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/20 backdrop-blur-sm flex items-start justify-center pt-[20vh]",onClick:r,children:ve}),e[53]=r,e[54]=ve,e[55]=ie):ie=e[55],ie}function sft(t){return t.stopPropagation()}function lft(t){return Math.max(t-1,0)}function uft(t){const e=t,n=typeof e.toJSON=="function"?e.toJSON():t;return Object.entries(n).filter(fft).map(cft).join(" ")}function cft(t){const[,e]=t;return e}function fft(t){const[e,n]=t;return e!=="id"&&n!=null}function dft(t){return t.type==="text"||t.type==="table"}function hft(t){return t.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()}async function pft(t,e,n,r){console.log(`Executing tool: ${t}`,e);try{switch(t){case"insert_note_content":{if(!n)return"Error: No active editor to insert content into.";const i=e.content,o=await n.tryParseMarkdownToBlocks(i),a=n.document.length===1&&n.document[0].content===void 0&&n.document[0].content?.length===0||n.document[0].content===""||JSON.stringify(n.document[0].content)==="[]",s=n.getTextCursorPosition().block,l=n.document.indexOf(s);if(a)n.replaceBlocks(n.document,o);else if(l!==-1)n.insertBlocks(o,s,"after");else{const u=n.document[n.document.length-1];u?n.insertBlocks(o,u,"after"):n.replaceBlocks(n.document,o)}return"Content inserted successfully."}case"read_document":return n?await n.blocksToMarkdownLossy(n.document)||"(Empty Document)":"Error: No active editor to read.";case"clear_document":{if(!n)return"Error: No active editor to clear.";const i={type:"paragraph",content:""};return n.replaceBlocks(n.document,[i]),"Document cleared."}case"create_document":{if(!r)return"Error: File system not available for this tool.";const{title:i,parentId:o}=e,a=r.createFile(i,o||null);return a&&r.setActiveFileId&&r.setActiveFileId(a),`Document created with ID: ${a}. The document is now open. You can now use 'insert_note_content' to add content to it.`}case"create_folder":{if(!r)return"Error: File system not available for this tool.";const{name:i,parentId:o}=e;return`Folder created with ID: ${r.createFolder(i,o||null)}`}case"rename_item":{if(!r)return"Error: File system not available for this tool.";const{id:i,newName:o}=e;return r.renameItem(i,o),`Item renamed to: ${o}`}case"move_item":{if(!r)return"Error: File system not available for this tool.";const{id:i,newParentId:o}=e;return r.moveItem(i,o),`Item moved to parent: ${o}`}case"delete_item":{if(!r)return"Error: File system not available for this tool.";const{id:i}=e;return r.deleteItem(i),`Item deleted: ${i}`}case"list_files":{if(!r)return"Error: File system not available for this tool.";const i=[];return r.fileMap.forEach(o=>{i.push(`- [${o.type}] ${o.name} (ID: ${o.id}, Parent: ${o.parentId||"root"})`)}),i.length===0?"No files or folders in the system. The file system is empty.":`Files in system:
${i.join(`
`)}`}case"get_active_document":{if(!r)return"Error: File system not available for this tool.";if(!r.activeFileId)return"No document is currently open.";const i=r.fileMap.get(r.activeFileId);return i?`Active Document: ${i.name} (ID: ${i.id})`:"Error: Active document found in state but not in the file system."}default:return`Error: Unknown tool ${t}`}}catch(i){return console.error("Tool execution error:",i),`Error executing ${t}: ${i.message}`}}const mft=[{type:"function",function:{name:"insert_note_content",description:"Appends new content to the end of the document. Use this to take notes, write summaries, or add information.",parameters:{type:"object",properties:{content:{type:"string",description:"The content to insert. Supports markdown."}},required:["content"]}}},{type:"function",function:{name:"read_document",description:"Reads the current content of the document to understand context.",parameters:{type:"object",properties:{},required:[]}}},{type:"function",function:{name:"clear_document",description:"Clears all content from the document. Use with caution.",parameters:{type:"object",properties:{},required:[]}}},{type:"function",function:{name:"create_document",description:"Creates a new document (note) in the file system.",parameters:{type:"object",properties:{title:{type:"string",description:"The title of the document to create."},parentId:{type:"string",description:"Optional ID of the parent folder. If not provided, creates in root."}},required:["title"]}}},{type:"function",function:{name:"create_folder",description:"Creates a new folder in the file system.",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the folder to create."},parentId:{type:"string",description:"Optional ID of the parent folder. If not provided, creates in root."}},required:["name"]}}},{type:"function",function:{name:"rename_item",description:"Renames an existing file or folder.",parameters:{type:"object",properties:{id:{type:"string",description:"The ID of the file or folder to rename."},newName:{type:"string",description:"The new name for the item."}},required:["id","newName"]}}},{type:"function",function:{name:"delete_item",description:"Deletes a file or folder. Warning: This action is irreversible.",parameters:{type:"object",properties:{id:{type:"string",description:"The ID of the file or folder to delete."}},required:["id"]}}},{type:"function",function:{name:"move_item",description:"Moves a file or folder to a new parent folder.",parameters:{type:"object",properties:{id:{type:"string",description:"The ID of the file or folder to move."},newParentId:{type:"string",description:"The ID of the new parent folder. Use null to move to root."}},required:["id","newParentId"]}}},{type:"function",function:{name:"list_files",description:"Lists all files and folders in the file system.",parameters:{type:"object",properties:{},required:[]}}},{type:"function",function:{name:"get_active_document",description:"Returns the name and ID of the document currently open in the editor.",parameters:{type:"object",properties:{},required:[]}}}],W3=pft,gft="google/gemini-2.5-flash-lite",vft=`You are Diegesis AI.
You help users manage notes and files.
You MUST use the tools provided for any action.
- To create a note: create_document(title: string)
- To add text to the open note: insert_note_content(content: string)
- To create a note with content, call create_document THEN insert_note_content.
- To list files: list_files()

Thinking process:
- Use <thinking>...</thinking> for reasoning.
- After thinking, emit tool calls OR a final response.`;function bft(t){const[e,n]=q.useState([]),[r,i]=q.useState(!1),[o,a]=q.useState(null),{doc:s}=Df(),[l,u]=q.useState(""),c=hh(),f=q.useRef(t||null);q.useEffect(()=>{f.current=t||null},[t]),q.useEffect(()=>{if(!s)return;const v=s.getMap("settings");u(v.get("openrouter_api_key")||"");const b=()=>{u(v.get("openrouter_api_key")||"")};return v.observe(b),()=>{v.unobserve(b)}},[s]);const d=q.useCallback(v=>{if(!s)return;const b=s.getMap("settings");u(v),v?b.set("openrouter_api_key",v):b.delete("openrouter_api_key")},[s]),h=q.useCallback(async v=>{if(!l){a("Please add your OpenRouter API key.");return}const b={id:vo(),role:"user",text:v,timestamp:new Date};n(A=>[...A,b]),i(!0),a(null);const C=e.filter(A=>!A.text.startsWith("Error:")).slice(-20),w=[{role:"system",content:vft},...C.map(A=>({role:A.role==="user"?"user":"assistant",content:A.text})),{role:"user",content:v}];try{let A=!1;for(;!A;){const E={model:gft,messages:w,stream:!0};E.tools=mft;const T=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`,"HTTP-Referer":window.location.origin,"X-Title":"Diegesis Notes"},body:JSON.stringify(E)});if(!T.ok){const W=await T.json();throw new Error(W.error?.message||`API Error: ${T.statusText}`)}const N=T.body?.getReader();if(!N)throw new Error("No response body");const D=new TextDecoder;let M="";const k=[],B=vo();let P=!1,$=!1;for(;!$;){const{done:W,value:K}=await N.read();if(W){$=!0;break}const ee=D.decode(K,{stream:!0}).split(`
`);for(const Q of ee)if(Q.startsWith("data: ")){const ce=Q.slice(6);if(ce==="[DONE]")continue;try{const ie=JSON.parse(ce).choices?.[0]?.delta;if(ie?.content&&(M+=ie.content,P?n(X=>X.map(le=>le.id===B?{...le,text:M}:le)):(n(X=>[...X,{id:B,role:"assistant",text:M,timestamp:new Date}]),P=!0)),ie?.tool_calls)for(const X of ie.tool_calls){const le=X.index??0;k[le]||(k[le]={id:X.id||"",type:"function",function:{name:"",arguments:""}}),X.id&&(k[le].id=X.id),X.function?.name&&(k[le].function.name+=X.function.name),X.function?.arguments&&(k[le].function.arguments+=X.function.arguments)}}catch{}}}if(k.length>0&&k[0]?.function?.name){w.push({role:"assistant",content:M,tool_calls:k}),P&&n(W=>W.filter(K=>K.id!==B));for(const W of k){const K=W.function.name;let I={};try{I=JSON.parse(W.function.arguments)}catch{I={}}let ee=f.current;if(!ee&&(K==="insert_note_content"||K==="read_document"||K==="clear_document")){console.log(`useOpenRouter: Editor missing for ${K}, waiting...`);for(let ce=0;ce<15;ce++)if(await new Promise(ve=>setTimeout(ve,200)),f.current){console.log(`useOpenRouter: Editor connected after ${ce+1} retries`),ee=f.current;break}}!ee&&(K==="insert_note_content"||K==="read_document")&&console.warn(`useOpenRouter: Proceeding with ${K} despite null editor (might fail)`);const Q=await W3(K,I,ee,c);(K==="create_document"||K==="move_item"||K==="delete_item")&&await new Promise(ce=>setTimeout(ce,500)),w.push({role:"tool",content:Q,tool_call_id:W.id,name:K})}continue}const z=M,j=/<tool>\s*(\w+)\s*(\{[\s\S]*?\})\s*<\/tool>/g,L=[...z.matchAll(j)];if(L.length>0){P&&n(K=>K.filter(I=>I.id!==B));const W=[];for(const K of L){const I=K[1],ee=K[2];let Q={};try{Q=JSON.parse(ee)}catch{Q={}}let ce=f.current;if(!ce&&["insert_note_content","read_document","clear_document"].includes(I)){console.log(`useOpenRouter: Editor missing for ${I} (XML), waiting...`);for(let X=0;X<15;X++)if(await new Promise(le=>setTimeout(le,200)),f.current){console.log(`useOpenRouter: Editor connected after ${X+1} retries`),ce=f.current;break}}!ce&&(I==="insert_note_content"||I==="read_document")&&console.warn(`useOpenRouter: Proceeding with ${I} despite null editor (might fail)`);const ie=await W3(I,Q,ce,c);(I==="create_document"||I==="move_item"||I==="delete_item")&&await new Promise(X=>setTimeout(X,500)),W.push(`[${I}]: ${ie}`)}w.push({role:"assistant",content:z}),w.push({role:"user",content:`Tool execution results:
${W.join(`
`)}

Please provide a final response to the user.`});continue}const U=/<(\w+)(?:\s+([^>]*))?>(?:([\s\S]*?)<\/\1>)?/g,G=[...z.matchAll(U)],Z=["insert_note_content","read_document","clear_document","create_document","create_folder","rename_item","delete_item","move_item","list_files","get_active_document"],H=G.filter(W=>Z.includes(W[1]));if(H.length>0){P&&n(K=>K.filter(I=>I.id!==B));const W=[];for(const K of H){const I=K[1],ee=K[3]||"";let Q={};if(ee.trim())try{Q=JSON.parse(ee)}catch{Q={content:ee.trim()}}let ce=f.current;if(!ce&&["insert_note_content","read_document","clear_document"].includes(I)){console.log(`useOpenRouter: Editor missing for ${I} (Tag), waiting...`);for(let X=0;X<15;X++)if(await new Promise(le=>setTimeout(le,200)),f.current){console.log(`useOpenRouter: Editor connected after ${X+1} retries`),ce=f.current;break}}!ce&&(I==="insert_note_content"||I==="read_document")&&console.warn(`useOpenRouter: Proceeding with ${I} despite null editor (might fail)`);const ie=await W3(I,Q,ce,c);(I==="create_document"||I==="move_item"||I==="delete_item")&&await new Promise(X=>setTimeout(X,500)),W.push(`[${I}]: ${ie}`)}w.push({role:"assistant",content:z}),w.push({role:"user",content:`Tool execution results:
${W.join(`
`)}

Please provide a final response to the user.`});continue}else A=!0}}catch(A){console.error("Error sending message to OpenRouter:",A);const E=A.message||"Failed to get response from OpenRouter.";a(E);const T={id:vo(),role:"assistant",text:`Error: ${E}`,timestamp:new Date};n(N=>[...N,T])}finally{i(!1)}},[e,l,c]),m=q.useCallback(()=>{n([]),a(null)},[]);return{messages:e,isLoading:r,error:o,sendMessage:h,clearMessages:m,apiKey:l,setApiKey:d,hasApiKey:!!l}}const yft=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xft=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wft={};function YH(t,e){return(wft.jsx?xft:yft).test(t)}var Dp={},K3,WH;function Eft(){if(WH)return K3;WH=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,u="/",c="*",f="",d="comment",h="declaration";function m(b,x){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];x=x||{};var C=1,w=1;function A(z){var j=z.match(e);j&&(C+=j.length);var L=z.lastIndexOf(l);w=~L?z.length-L:w+z.length}function E(){var z={line:C,column:w};return function(j){return j.position=new T(z),M(),j}}function T(z){this.start=z,this.end={line:C,column:w},this.source=x.source}T.prototype.content=b;function N(z){var j=new Error(x.source+":"+C+":"+w+": "+z);if(j.reason=z,j.filename=x.source,j.line=C,j.column=w,j.source=b,!x.silent)throw j}function D(z){var j=z.exec(b);if(j){var L=j[0];return A(L),b=b.slice(L.length),j}}function M(){D(n)}function k(z){var j;for(z=z||[];j=B();)j!==!1&&z.push(j);return z}function B(){var z=E();if(!(u!=b.charAt(0)||c!=b.charAt(1))){for(var j=2;f!=b.charAt(j)&&(c!=b.charAt(j)||u!=b.charAt(j+1));)++j;if(j+=2,f===b.charAt(j-1))return N("End of comment missing");var L=b.slice(2,j-2);return w+=2,A(L),b=b.slice(j),w+=2,z({type:d,comment:L})}}function P(){var z=E(),j=D(r);if(j){if(B(),!D(i))return N("property missing ':'");var L=D(o),U=z({type:h,property:v(j[0].replace(t,f)),value:L?v(L[0].replace(t,f)):f});return D(a),U}}function $(){var z=[];k(z);for(var j;j=P();)j!==!1&&(z.push(j),k(z));return z}return M(),$()}function v(b){return b?b.replace(s,f):f}return K3=m,K3}var KH;function Cft(){if(KH)return Dp;KH=1;var t=Dp&&Dp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.default=n;const e=t(Eft());function n(r,i){let o=null;if(!r||typeof r!="string")return o;const a=(0,e.default)(r),s=typeof i=="function";return a.forEach(l=>{if(l.type!=="declaration")return;const{property:u,value:c}=l;s?i(u,c,l):c&&(o=o||{},o[u]=c)}),o}return Dp}var kg={},XH;function Sft(){if(XH)return kg;XH=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(u){return!u||n.test(u)||t.test(u)},a=function(u,c){return c.toUpperCase()},s=function(u,c){return"".concat(c,"-")},l=function(u,c){return c===void 0&&(c={}),o(u)?u:(u=u.toLowerCase(),c.reactCompat?u=u.replace(i,s):u=u.replace(r,s),u.replace(e,a))};return kg.camelCase=l,kg}var _g,ZH;function Tft(){if(ZH)return _g;ZH=1;var t=_g&&_g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(Cft()),n=Sft();function r(i,o){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(a[(0,n.camelCase)(s,o)]=l)}),a}return r.default=r,_g=r,_g}var Aft=Tft();const Nft=Qs(Aft),T6={}.hasOwnProperty,Dft=new Map,Mft=/[A-Z]/g,kft=new Set(["table","tbody","thead","tfoot","tr"]),_ft=new Set(["td","th"]),Sne="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Oft(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zft(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=$ft(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Of:dv,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Tne(i,t,void 0);return o&&typeof o!="string"?o:i.create(t,i.Fragment,{children:o||void 0},void 0)}function Tne(t,e,n){if(e.type==="element")return Ift(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Rft(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Lft(t,e,n);if(e.type==="mdxjsEsm")return Bft(t,e);if(e.type==="root")return Fft(t,e,n);if(e.type==="text")return Pft(t,e)}function Ift(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Of,t.schema=i),t.ancestors.push(e);const o=Nne(t,e.tagName,!1),a=Uft(t,e);let s=N6(t,e);return kft.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!Ym(l):!0})),Ane(t,a,o,e),A6(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function Rft(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Q1(t,e.position)}function Bft(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Q1(t,e.position)}function Lft(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Of,t.schema=i),t.ancestors.push(e);const o=e.name===null?t.Fragment:Nne(t,e.name,!0),a=Hft(t,e),s=N6(t,e);return Ane(t,a,o,e),A6(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function Fft(t,e,n){const r={};return A6(r,N6(t,e)),t.create(e,t.Fragment,r,n)}function Pft(t,e){return e.value}function Ane(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function A6(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function $ft(t,e,n){return r;function r(i,o,a,s){const u=Array.isArray(a.children)?n:e;return s?u(o,a,s):u(o,a)}}function zft(t,e){return n;function n(r,i,o,a){const s=Array.isArray(o.children),l=jk(r);return e(i,o,a,s,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Uft(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&T6.call(e.properties,i)){const o=Vft(t,i,e.properties[i]);if(o){const[a,s]=o;t.tableCellAlignToStyle&&a==="align"&&typeof s=="string"&&_ft.has(e.tagName)?r=s:n[a]=s}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Hft(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const s=a.properties[0];s.type,Object.assign(n,t.evaluater.evaluateExpression(s.argument))}else Q1(t,e.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const s=r.value.data.estree.body[0];s.type,o=t.evaluater.evaluateExpression(s.expression)}else Q1(t,e.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function N6(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Dft;for(;++r<e.children.length;){const o=e.children[r];let a;if(t.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const u=i.get(l)||0;a=l+"-"+u,i.set(l,u+1)}}const s=Tne(t,o,a);s!==void 0&&n.push(s)}return n}function Vft(t,e,n){const r=KE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?zY(n):UY(n)),r.property==="style"){let i=typeof n=="object"?n:qft(t,String(n));return t.stylePropertyNameCase==="css"&&(i=jft(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?R1e[r.property]||r.property:r.attribute,n]}}function qft(t,e){try{return Nft(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new ji("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Sne+"#cannot-parse-style-attribute",i}}function Nne(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let o=-1,a;for(;++o<i.length;){const s=YH(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:s,computed:!!(o&&s.type==="Literal"),optional:!1}:s}r=a}else r=YH(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return T6.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Q1(t)}function Q1(t,e){const n=new ji("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Sne+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jft(t){const e={};let n;for(n in t)T6.call(t,n)&&(e[Gft(n)]=t[n]);return e}function Gft(t){let e=t.replace(Mft,Yft);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Yft(t){return"-"+t.toLowerCase()}const X3={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Wft="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",QH=[],JH={allowDangerousHtml:!0},Kft=/^(https?|ircs?|mailto|xmpp)$/i,Xft=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Zft(t){const e=Qft(t),n=Jft(t);return edt(e.runSync(e.parse(n),n),t)}function Qft(t){const e=t.rehypePlugins||QH,n=t.remarkPlugins||QH,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...JH}:JH;return t_().use(uX).use(n).use(dX,r).use(e)}function Jft(t){const e=t.children||"",n=new Bx;return typeof e=="string"&&(n.value=e),n}function edt(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,o=e.disallowedElements,a=e.skipHtml,s=e.unwrapDisallowed,l=e.urlTransform||tdt;for(const c of Xft)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+Wft+c.id,void 0);return bf(t,u),Oft(t,{Fragment:_.Fragment,components:i,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function u(c,f,d){if(c.type==="raw"&&d&&typeof f=="number")return a?d.children.splice(f,1):d.children[f]={type:"text",value:c.value},f;if(c.type==="element"){let h;for(h in X3)if(Object.hasOwn(X3,h)&&Object.hasOwn(c.properties,h)){const m=c.properties[h],v=X3[h];(v===null||v.includes(c.tagName))&&(c.properties[h]=l(String(m||""),h,c))}}if(c.type==="element"){let h=n?!n.includes(c.tagName):o?o.includes(c.tagName):!1;if(!h&&r&&typeof f=="number"&&(h=!r(c,f,d)),h&&d&&typeof f=="number")return s&&c.children?d.children.splice(f,1,...c.children):d.children.splice(f,1),f}}}function tdt(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Kft.test(t.slice(0,e))?t:""}function ndt(t){const e=_r.c(4),{text:n}=t;let r;e[0]!==n?(r=n.split(/(<thinking>[\s\S]*?(?:<\/thinking>|$))/g).map(rdt),e[0]=n,e[1]=r):r=e[1];let i;return e[2]!==r?(i=_.jsx(_.Fragment,{children:r}),e[2]=r,e[3]=i):i=e[3],i}function rdt(t,e){if(t.startsWith("<thinking>")){const n=t.endsWith("</thinking>"),r=t.replace(/<\/?thinking>/g,"").trim();return _.jsxs("details",{className:"mb-2 group",open:!0,children:[_.jsxs("summary",{className:"text-xs font-medium text-slate-500 cursor-pointer select-none list-none flex items-center gap-1 hover:text-slate-700",children:[_.jsx("svg",{className:`w-3 h-3 transition-transform group-open:rotate-90 ${n?"":"animate-pulse"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n?"Thinking Process":"Thinking..."]}),_.jsxs("div",{className:"mt-1 pl-4 border-l-2 border-slate-200 text-xs text-slate-500 font-mono whitespace-pre-wrap",children:[r,!n&&_.jsx("span",{className:"animate-pulse",children:""})]})]},e)}return t.includes("<tool>")&&!t.includes("</tool>")?_.jsxs("div",{className:"bg-slate-100 rounded p-2 text-xs font-mono text-slate-600",children:[_.jsx("span",{className:"text-slate-400",children:"Executing tool..."}),_.jsx("span",{className:"animate-pulse ml-1",children:""})]},e):t.trim()?_.jsx("div",{className:"prose prose-sm prose-slate max-w-none",children:_.jsx(Zft,{children:t})},e):null}function idt(t){const e=_r.c(7),{initialSeconds:n}=t,[r,i]=q.useState(n);let o,a;e[0]!==r?(o=()=>{if(r<=0)return;const c=setInterval(()=>{i(odt)},1e3);return()=>clearInterval(c)},a=[r],e[0]=r,e[1]=o,e[2]=a):(o=e[1],a=e[2]),q.useEffect(o,a);let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=_.jsx("svg",{className:"w-5 h-5 text-amber-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e[3]=s):s=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=_.jsxs("div",{className:"flex items-center gap-2 text-amber-900",children:[s,_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[_.jsx("span",{className:"font-bold",children:"Rate Limit Reached"}),_.jsx("span",{className:"hidden sm:inline text-amber-300",children:"|"}),_.jsx("span",{className:"text-amber-800",children:"Please wait before sending more messages."})]})]}),e[4]=l):l=e[4];let u;return e[5]!==r?(u=_.jsx("div",{className:"bg-amber-50 border-t border-amber-200 p-3 shadow-inner",children:_.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[l,_.jsx("div",{className:"font-mono bg-white px-3 py-1 rounded text-amber-700 font-bold border border-amber-200 text-xs shrink-0",children:r>0?_.jsxs(_.Fragment,{children:["Retry in ",Math.ceil(r),"s"]}):_.jsx(_.Fragment,{children:"Ready!"})})]})}),e[5]=r,e[6]=u):u=e[6],u}function odt(t){return Math.max(0,t-1)}function adt(t){const e=_r.c(40),{messages:n,isLoading:r,onSendMessage:i}=t,[o,a]=q.useState(""),s=q.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{s.current&&typeof s.current.scrollIntoView=="function"&&s.current.scrollIntoView({behavior:"smooth"})},e[0]=l):l=e[0];const u=l;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{u()},e[1]=c):c=e[1];let f;e[2]!==r||e[3]!==n?(f=[n,r],e[2]=r,e[3]=n,e[4]=f):f=e[4],q.useEffect(c,f);let d;e[5]!==o||e[6]!==r||e[7]!==i?(d=P=>{P.preventDefault(),!(!o.trim()||r)&&(i(o),a(""))},e[5]=o,e[6]=r,e[7]=i,e[8]=d):d=e[8];const h=d;let m=null;for(let P=n.length-1;P>=0;P--){const $=n[P];if(($.text.includes("Quota exceeded")||$.text.includes("rate limit")||$.text.includes("Rate limit")||$.text.includes("429")||$.text.includes("Too Many Requests")||$.text.includes("Provider returned error"))&&$.role==="assistant"){const j=$.text.match(/retry in (\d+(\.\d+)?)s/i);m=j?parseFloat(j[1]):30;break}}let v;e[9]!==n.length?(v=n.length===0&&_.jsxs("div",{className:"text-center text-slate-400 mt-8 text-sm",children:[_.jsx("p",{children:" Hi! I'm your Gemini assistant."}),_.jsx("p",{children:"Ask me anything about your notes or general questions."})]}),e[9]=n.length,e[10]=v):v=e[10];let b;e[11]!==n?(b=n.map(sdt),e[11]=n,e[12]=b):b=e[12];let x;e[13]!==r?(x=r&&_.jsx("div",{className:"flex justify-start",children:_.jsx("div",{className:"bg-slate-100 rounded-2xl rounded-bl-none px-4 py-3 border border-slate-200",children:_.jsxs("div",{className:"flex gap-1",children:[_.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),_.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce [animation-delay:0.2s]"}),_.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})})}),e[13]=r,e[14]=x):x=e[14];let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=_.jsx("div",{ref:s}),e[15]=C):C=e[15];let w;e[16]!==v||e[17]!==b||e[18]!==x?(w=_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[v,b,x,C]}),e[16]=v,e[17]=b,e[18]=x,e[19]=w):w=e[19];let A;e[20]!==m?(A=m!==null&&_.jsx(idt,{initialSeconds:m},m),e[20]=m,e[21]=A):A=e[21];let E;e[22]===Symbol.for("react.memo_cache_sentinel")?(E=P=>a(P.target.value),e[22]=E):E=e[22];let T;e[23]!==o||e[24]!==r?(T=_.jsx("input",{type:"text",value:o,onChange:E,placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:border-sky-500 bg-white text-sm",disabled:r}),e[23]=o,e[24]=r,e[25]=T):T=e[25];let N;e[26]!==o||e[27]!==r?(N=r||!o.trim(),e[26]=o,e[27]=r,e[28]=N):N=e[28];let D;e[29]===Symbol.for("react.memo_cache_sentinel")?(D=_.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),e[29]=D):D=e[29];let M;e[30]!==N?(M=_.jsx("button",{type:"submit",disabled:N,className:"p-2 bg-sky-500 text-white rounded-xl hover:bg-sky-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:D}),e[30]=N,e[31]=M):M=e[31];let k;e[32]!==h||e[33]!==T||e[34]!==M?(k=_.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:_.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[T,M]})}),e[32]=h,e[33]=T,e[34]=M,e[35]=k):k=e[35];let B;return e[36]!==A||e[37]!==k||e[38]!==w?(B=_.jsxs("div",{className:"flex flex-col h-full bg-white",children:[w,A,k]}),e[36]=A,e[37]=k,e[38]=w,e[39]=B):B=e[39],B}function sdt(t){return t.text.includes("Quota exceeded")?null:_.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap shadow-sm ${t.text.startsWith("Error:")?"bg-rose-50 text-rose-800 border border-rose-200 rounded-bl-none":t.role==="user"?"bg-sky-500 text-white rounded-br-none":"bg-slate-100 text-slate-800 rounded-bl-none border border-slate-200"}`,children:t.text.startsWith("Error:")?t.text.replace("Error: ",""):t.role==="user"?t.text:_.jsx(ndt,{text:t.text})})},t.id)}function ldt(t){const e=_r.c(45),{isOpen:n,onClose:r}=t,{editor:i}=Df(),{messages:o,isLoading:a,sendMessage:s,clearMessages:l,apiKey:u,setApiKey:c,hasApiKey:f}=bft(i),[d,h]=q.useState(!f),[m,v]=q.useState(u);let b;e[0]!==c||e[1]!==m?(b=()=>{c(m),m&&h(!1)},e[0]=c,e[1]=m,e[2]=b):b=e[2];const x=b,C=`fixed inset-0 bg-black/20 backdrop-blur-sm z-40 transition-opacity duration-300 md:hidden ${n?"opacity-100":"opacity-0 pointer-events-none"}`;let w;e[3]!==r||e[4]!==C?(w=_.jsx("div",{className:C,onClick:r}),e[3]=r,e[4]=C,e[5]=w):w=e[5];const A=`fixed top-0 right-0 h-full w-full md:w-[350px] bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-out border-l border-slate-200 flex flex-col ${n?"translate-x-0":"translate-x-full"}`;let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:_.jsx("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813a3.75 3.75 0 002.576-2.576l.813-2.846A.75.75 0 019 4.5zM6.97 6.97a.75.75 0 011.06 0l.44.44a.75.75 0 11-1.06 1.06l-.44-.44a.75.75 0 010-1.06zm9.54 0a.75.75 0 011.06 0l.44.44a.75.75 0 11-1.06 1.06l-.44-.44a.75.75 0 010-1.06z",clipRule:"evenodd"})})}),_.jsx("span",{className:"font-bold text-slate-700",children:"OpenRouter"})]}),e[6]=E):E=e[6];let T;e[7]!==d?(T=()=>h(!d),e[7]=d,e[8]=T):T=e[8];const N=`p-2 hover:bg-slate-100 rounded-lg transition-colors ${f?"text-emerald-500":"text-amber-500"}`,D=f?"API Key configured":"Configure API Key";let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),e[9]=M):M=e[9];let k;e[10]!==T||e[11]!==N||e[12]!==D?(k=_.jsx("button",{onClick:T,className:N,title:D,children:M}),e[10]=T,e[11]=N,e[12]=D,e[13]=k):k=e[13];let B;e[14]===Symbol.for("react.memo_cache_sentinel")?(B=_.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e[14]=B):B=e[14];let P;e[15]!==l?(P=_.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 transition-colors",title:"Clear chat",children:B}),e[15]=l,e[16]=P):P=e[16];let $;e[17]===Symbol.for("react.memo_cache_sentinel")?($=_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e[17]=$):$=e[17];let z;e[18]!==r?(z=_.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 transition-colors",children:$}),e[18]=r,e[19]=z):z=e[19];let j;e[20]!==k||e[21]!==P||e[22]!==z?(j=_.jsxs("div",{className:"h-14 border-b border-slate-200 flex items-center justify-between px-4 bg-slate-50/50",children:[E,_.jsxs("div",{className:"flex items-center gap-1",children:[k,P,z]})]}),e[20]=k,e[21]=P,e[22]=z,e[23]=j):j=e[23];let L;e[24]!==x||e[25]!==f||e[26]!==c||e[27]!==d||e[28]!==m?(L=d&&_.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 bg-emerald-50/50",children:[_.jsxs("div",{className:"text-xs font-medium text-slate-600 mb-2",children:["OpenRouter API Key",_.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-500 hover:underline ml-2",children:"Get one "})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"password",value:m,onChange:W=>v(W.target.value),placeholder:"sk-or-v1-...",className:"flex-1 px-3 py-1.5 text-xs bg-white border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),_.jsx("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Save"})]}),f&&_.jsx("button",{onClick:()=>{c(""),v("")},className:"text-xs text-rose-500 hover:underline mt-2",children:"Remove key"})]}),e[24]=x,e[25]=f,e[26]=c,e[27]=d,e[28]=m,e[29]=L):L=e[29];let U;e[30]!==f?(U=f&&_.jsx("div",{className:"px-4 py-2 border-b border-slate-100 bg-slate-50/30",children:_.jsx("div",{className:"text-[10px] text-slate-400 text-center",children:"Using Gemini 2.0 Flash (Free)"})}),e[30]=f,e[31]=U):U=e[31];let G;e[32]!==a||e[33]!==o||e[34]!==s?(G=_.jsx("div",{className:"flex-1 min-h-0 relative",children:_.jsx(adt,{messages:o,isLoading:a,onSendMessage:s})}),e[32]=a,e[33]=o,e[34]=s,e[35]=G):G=e[35];let Z;e[36]!==j||e[37]!==L||e[38]!==U||e[39]!==G||e[40]!==A?(Z=_.jsxs("div",{className:A,children:[j,L,U,G]}),e[36]=j,e[37]=L,e[38]=U,e[39]=G,e[40]=A,e[41]=Z):Z=e[41];let H;return e[42]!==Z||e[43]!==w?(H=_.jsxs(_.Fragment,{children:[w,Z]}),e[42]=Z,e[43]=w,e[44]=H):H=e[44],H}const udt=t=>{const[e,n]=q.useState(!1),[r,i]=q.useState(null),[o,a]=q.useState(null),[s,l]=q.useState(null),[u,c]=q.useState(null),[f,d]=q.useState("idle"),[h,m]=q.useState(!1),v=q.useRef(null),b=q.useRef(null),x=q.useRef(null),C=q.useRef(null);q.useEffect(()=>{const M=localStorage.getItem("google_access_token");M&&(a(M),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${M}`}}).then(k=>{if(!k.ok)throw new Error("Token invalid");return k.json()}).then(k=>{i({name:k.name,email:k.email,imageUrl:k.picture}),n(!0)}).catch(()=>{localStorage.removeItem("google_access_token"),a(null),n(!1)}))},[]);const w=typeof window<"u"?`${window.location.origin}${window.location.pathname}`:"";q.useEffect(()=>{const M=window.location.hash;if(M&&M.includes("access_token")){const B=new URLSearchParams(M.substring(1)).get("access_token");B&&(a(B),localStorage.setItem("google_access_token",B),n(!0),window.history.replaceState(null,"",window.location.pathname+window.location.search),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${B}`}}).then(P=>P.json()).then(P=>{i({name:P.name,email:P.email,imageUrl:P.picture}),console.log("User info fetched from redirect:",P)}).catch(P=>console.error("Failed to fetch user info after redirect:",P)))}},[]);const A=()=>{const B=`https://accounts.google.com/o/oauth2/v2/auth?client_id=412667087204-k411ff8ostpiulf1ttadl95ef7fq1dvj.apps.googleusercontent.com
&redirect_uri=${encodeURIComponent(w)}&response_type=token&scope=${encodeURIComponent("openid profile email https://www.googleapis.com/auth/drive.file")}&state=main`;window.location.assign(B)},E=()=>{localStorage.removeItem("google_access_token"),n(!1),a(null),i(null),l(null)},T=q.useCallback(async(M,k,B)=>{console.log("Saving to Drive..."),d("syncing");try{const P=hm(B),$=new Blob([P.buffer],{type:"application/octet-stream"}),z={name:"diegesis-notes.yjs",mimeType:"application/octet-stream"},j=new FormData;if(j.append("metadata",new Blob([JSON.stringify(z)],{type:"application/json"})),j.append("file",$),!(await fetch(`https://www.googleapis.com/upload/drive/v3/files/${k}?uploadType=multipart`,{method:"PATCH",headers:{Authorization:`Bearer ${M}`},body:j})).ok)throw new Error("Failed to save to Drive");c(new Date),m(!1),d("synced"),setTimeout(()=>d("idle"),2e3)}catch(P){console.error("Error saving to Drive:",P),d("error")}},[]);q.useEffect(()=>{if(!t||!s||!o||!e)return;const M=()=>{v.current&&window.clearTimeout(v.current),m(!0),d("pending"),b.current=t,x.current=o,C.current=s,v.current=window.setTimeout(()=>{T(o,s,t)},2e3)};return t.on("update",M),()=>{t.off("update",M),v.current&&window.clearTimeout(v.current)}},[t,s,o,e,T]);const N=q.useCallback(async()=>{if(!(!e||!o)){if(!t){console.warn("No doc available to sync");return}d("syncing");try{const M=await fetch("https://www.googleapis.com/drive/v3/files?pageSize=1&fields=files(id,name)&q=name='diegesis-notes.yjs' and trashed=false",{headers:{Authorization:`Bearer ${o}`}});if(M.status===401)throw{status:401};const B=(await M.json()).files;if(B&&B.length>0){const P=B[0].id;l(P);const $=await fetch(`https://www.googleapis.com/drive/v3/files/${P}?alt=media`,{headers:{Authorization:`Bearer ${o}`}});if($.status===401)throw{status:401};const z=await $.arrayBuffer();z.byteLength>0?(ax(t,new Uint8Array(z)),console.log("Document updated from Drive content")):console.log("Drive file empty, skipping applyUpdate")}else{console.log("Creating new file on Drive...");const P={name:"diegesis-notes.yjs",mimeType:"application/octet-stream"},$=hm(t),z=new Blob([$.buffer],{type:"application/octet-stream"}),j=new FormData;j.append("metadata",new Blob([JSON.stringify(P)],{type:"application/json"})),j.append("file",z);const L=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:j});if(L.ok){const U=await L.json();l(U.id),console.log("Created file with ID:",U.id)}else throw new Error("Failed to create file")}c(new Date),d("synced"),setTimeout(()=>d("idle"),3e3)}catch(M){console.error("Error syncing with Drive",M),M&&typeof M=="object"&&"status"in M&&M.status===401?(d("expired"),localStorage.removeItem("google_access_token"),n(!1),a(null)):d("error")}}},[e,o,t]);q.useEffect(()=>{e&&o&&!s&&t&&N()},[e,o,s,t,N]);const D=q.useCallback(async()=>{h&&b.current&&x.current&&C.current&&(v.current&&(window.clearTimeout(v.current),v.current=null),await T(x.current,C.current,b.current))},[h,T]);return q.useEffect(()=>{const M=k=>{h&&(k.preventDefault(),k.returnValue="",D())};return window.addEventListener("beforeunload",M),()=>window.removeEventListener("beforeunload",M)},[h,D]),{isSignedIn:e,isInitialized:!0,user:r,handleAuthClick:A,handleSignOutClick:E,syncWithDrive:N,lastSyncTime:u,syncStatus:f,accessToken:o,hasPendingChanges:h,flushPendingChanges:D}},Dne=q.createContext(null),cdt=()=>{const t=q.useContext(Dne);if(!t)throw new Error("useSync must be used within a SyncProvider");return t},fdt=t=>{const e=_r.c(3),{children:n}=t,{doc:r}=Df(),i=udt(r);let o;return e[0]!==n||e[1]!==i?(o=_.jsx(Dne.Provider,{value:i,children:n}),e[0]=n,e[1]=i,e[2]=o):o=e[2],o},ddt=`412667087204-k411ff8ostpiulf1ttadl95ef7fq1dvj.apps.googleusercontent.com
`;function hdt(){const t=_r.c(52),{activeFileId:e}=hh(),[n,r]=q.useState(!1),[i,o]=q.useState(!1),[a,s]=q.useState(!1),{isSignedIn:l,handleAuthClick:u,handleSignOutClick:c,syncWithDrive:f,user:d,syncStatus:h}=cdt();let m,v,b;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=["mod+k","mod+f"],v=Q=>{Q.preventDefault(),s(!0)},b={enableOnFormTags:!0,enableOnContentEditable:!0},t[0]=m,t[1]=v,t[2]=b):(m=t[0],v=t[1],b=t[2]),lV(m,v,b);let x;t[3]!==h?(x=()=>{switch(h){case"syncing":return _.jsxs("svg",{className:"animate-spin h-4 w-4 text-sky-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"synced":return _.jsx("svg",{className:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return _.jsx("svg",{className:"h-4 w-4 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"expired":return _.jsx("svg",{className:"h-4 w-4 text-amber-500 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"pending":return _.jsx("svg",{className:"h-4 w-4 text-amber-500 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return _.jsx("svg",{className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}},t[3]=h,t[4]=x):x=t[4];const C=x,w=`fixed inset-0 z-50 md:hidden transition-opacity duration-300 ${i?"opacity-100":"opacity-0 pointer-events-none"}`;let A;t[5]===Symbol.for("react.memo_cache_sentinel")?(A=_.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>o(!1)}),t[5]=A):A=t[5];const E=`relative w-72 h-full bg-white shadow-xl transform transition-transform duration-300 ${i?"translate-x-0":"-translate-x-full"}`;let T;t[6]===Symbol.for("react.memo_cache_sentinel")?(T=()=>o(!1),t[6]=T):T=t[6];let N;t[7]!==u||t[8]!==c||t[9]!==l||t[10]!==d?(N=_.jsx(r9,{isSignedIn:l,user:d,onSignIn:u,onSignOut:c,onClose:T}),t[7]=u,t[8]=c,t[9]=l,t[10]=d,t[11]=N):N=t[11];let D;t[12]!==E||t[13]!==N?(D=_.jsx("div",{className:E,children:N}),t[12]=E,t[13]=N,t[14]=D):D=t[14];let M;t[15]!==w||t[16]!==D?(M=_.jsxs("div",{className:w,children:[A,D]}),t[15]=w,t[16]=D,t[17]=M):M=t[17];let k;t[18]!==u||t[19]!==c||t[20]!==l||t[21]!==d?(k=_.jsx("div",{className:"hidden md:flex w-64 h-full shrink-0",children:_.jsx(r9,{className:"w-full",isSignedIn:l,user:d,onSignIn:u,onSignOut:c})}),t[18]=u,t[19]=c,t[20]=l,t[21]=d,t[22]=k):k=t[22];let B;t[23]===Symbol.for("react.memo_cache_sentinel")?(B=()=>o(!0),t[23]=B):B=t[23];let P;t[24]===Symbol.for("react.memo_cache_sentinel")?(P=_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"md:hidden",children:_.jsx("button",{className:"p-1 text-slate-500 hover:bg-slate-100 rounded",onClick:B,children:_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),_.jsx("span",{className:"text-sm font-medium text-slate-600 truncate"})]}),t[24]=P):P=t[24];let $;t[25]!==C||t[26]!==l||t[27]!==h||t[28]!==f?($=l&&_.jsx("button",{onClick:()=>f(),disabled:h==="syncing",className:"p-1.5 text-slate-400 hover:bg-slate-100 rounded-lg transition-colors",title:"Sync",children:C()}),t[25]=C,t[26]=l,t[27]=h,t[28]=f,t[29]=$):$=t[29];let z;t[30]===Symbol.for("react.memo_cache_sentinel")?(z=()=>r(!0),t[30]=z):z=t[30];let j;t[31]===Symbol.for("react.memo_cache_sentinel")?(j=_.jsx("button",{onClick:z,className:"p-1.5 text-slate-400 hover:text-sky-500 hover:bg-sky-50 rounded-lg transition-colors",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),t[31]=j):j=t[31];let L;t[32]!==$?(L=_.jsxs("header",{className:"h-12 border-b border-slate-200 bg-white flex items-center justify-between px-4 shrink-0",children:[P,_.jsxs("div",{className:"flex items-center gap-3",children:[$,j]})]}),t[32]=$,t[33]=L):L=t[33];let U;t[34]!==e?(U=_.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 relative",children:_.jsx("div",{className:"max-w-4xl mx-auto h-full px-2 py-4 sm:px-8 sm:py-8",children:e?_.jsx(Gct,{}):_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[_.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-300",children:_.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})})}),_.jsx("p",{className:"text-sm font-medium",children:"Select a file from the sidebar"})]})})}),t[34]=e,t[35]=U):U=t[35];let G;t[36]!==L||t[37]!==U?(G=_.jsxs("div",{className:"flex-1 flex flex-col h-full min-w-0",children:[L,U]}),t[36]=L,t[37]=U,t[38]=G):G=t[38];let Z;t[39]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>r(!1),t[39]=Z):Z=t[39];let H;t[40]!==n?(H=_.jsx(ldt,{isOpen:n,onClose:Z}),t[40]=n,t[41]=H):H=t[41];let W;t[42]===Symbol.for("react.memo_cache_sentinel")?(W=()=>s(!1),t[42]=W):W=t[42];let K;t[43]!==a?(K=_.jsx(aft,{isOpen:a,onClose:W}),t[43]=a,t[44]=K):K=t[44];let I;t[45]===Symbol.for("react.memo_cache_sentinel")?(I=_.jsx(Wct,{}),t[45]=I):I=t[45];let ee;return t[46]!==M||t[47]!==k||t[48]!==G||t[49]!==H||t[50]!==K?(ee=_.jsxs("div",{className:"flex h-screen bg-slate-50 text-slate-900 font-sans overflow-hidden",children:[M,k,G,H,K,I]}),t[46]=M,t[47]=k,t[48]=G,t[49]=H,t[50]=K,t[51]=ee):ee=t[51],ee}function pdt(){const t=_r.c(2);let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=_.jsx(eoe,{clientId:ddt,children:_.jsx(uue,{children:_.jsx(cue,{children:_.jsx(fdt,{children:_.jsx(hdt,{})})})})}),t[1]=e):e=t[1],e}Kie.createRoot(document.getElementById("root")).render(_.jsx(xr.StrictMode,{children:_.jsx(pdt,{})}));
//# sourceMappingURL=index-Bq5pYl1t.js.map
