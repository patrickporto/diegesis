function _mergeNamespaces(e,n){for(var l=0;l<n.length;l++){const d=n[l];if(typeof d!="string"&&!Array.isArray(d)){for(const g in d)if(g!=="default"&&!(g in e)){const jn=Object.getOwnPropertyDescriptor(d,g);jn&&Object.defineProperty(e,g,jn.get?jn:{enumerable:!0,get:()=>d[g]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const jn of g)if(jn.type==="childList")for(const Un of jn.addedNodes)Un.tagName==="LINK"&&Un.rel==="modulepreload"&&d(Un)}).observe(document,{childList:!0,subtree:!0});function l(g){const jn={};return g.integrity&&(jn.integrity=g.integrity),g.referrerPolicy&&(jn.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?jn.credentials="include":g.crossOrigin==="anonymous"?jn.credentials="omit":jn.credentials="same-origin",jn}function d(g){if(g.ep)return;g.ep=!0;const jn=l(g);fetch(g.href,jn)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function l(d,g,jn){var Un=null;if(jn!==void 0&&(Un=""+jn),g.key!==void 0&&(Un=""+g.key),"key"in g){jn={};for(var zn in g)zn!=="key"&&(jn[zn]=g[zn])}else jn=g;return g=jn.ref,{$$typeof:e,type:d,key:Un,ref:g!==void 0?g:null,props:jn}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=l,reactJsxRuntime_production.jsxs=l,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),jn=Symbol.for("react.consumer"),Un=Symbol.for("react.context"),zn=Symbol.for("react.forward_ref"),qn=Symbol.for("react.suspense"),Kn=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),Qn=Symbol.for("react.activity"),Jn=Symbol.iterator;function Ai(es){return es===null||typeof es!="object"?null:(es=Jn&&es[Jn]||es["@@iterator"],typeof es=="function"?es:null)}var Ri={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ni=Object.assign,$i={};function Li(es,fs,Ki){this.props=es,this.context=fs,this.refs=$i,this.updater=Ki||Ri}Li.prototype.isReactComponent={},Li.prototype.setState=function(es,fs){if(typeof es!="object"&&typeof es!="function"&&es!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,es,fs,"setState")},Li.prototype.forceUpdate=function(es){this.updater.enqueueForceUpdate(this,es,"forceUpdate")};function ji(){}ji.prototype=Li.prototype;function Fi(es,fs,Ki){this.props=es,this.context=fs,this.refs=$i,this.updater=Ki||Ri}var qi=Fi.prototype=new ji;qi.constructor=Fi,Ni(qi,Li.prototype),qi.isPureReactComponent=!0;var zi=Array.isArray;function Gi(){}var Xi={H:null,A:null,T:null,S:null},as=Object.prototype.hasOwnProperty;function ls(es,fs,Ki){var ws=Ki.ref;return{$$typeof:e,type:es,key:fs,ref:ws!==void 0?ws:null,props:Ki}}function Zi(es,fs){return ls(es.type,fs,es.props)}function gs(es){return typeof es=="object"&&es!==null&&es.$$typeof===e}function bs(es){var fs={"=":"=0",":":"=2"};return"$"+es.replace(/[=:]/g,function(Ki){return fs[Ki]})}var Ss=/\/+/g;function ss(es,fs){return typeof es=="object"&&es!==null&&es.key!=null?bs(""+es.key):fs.toString(36)}function Es(es){switch(es.status){case"fulfilled":return es.value;case"rejected":throw es.reason;default:switch(typeof es.status=="string"?es.then(Gi,Gi):(es.status="pending",es.then(function(fs){es.status==="pending"&&(es.status="fulfilled",es.value=fs)},function(fs){es.status==="pending"&&(es.status="rejected",es.reason=fs)})),es.status){case"fulfilled":return es.value;case"rejected":throw es.reason}}throw es}function rs(es,fs,Ki,ws,_s){var Is=typeof es;(Is==="undefined"||Is==="boolean")&&(es=null);var Ms=!1;if(es===null)Ms=!0;else switch(Is){case"bigint":case"string":case"number":Ms=!0;break;case"object":switch(es.$$typeof){case e:case n:Ms=!0;break;case Xn:return Ms=es._init,rs(Ms(es._payload),fs,Ki,ws,_s)}}if(Ms)return _s=_s(es),Ms=ws===""?"."+ss(es,0):ws,zi(_s)?(Ki="",Ms!=null&&(Ki=Ms.replace(Ss,"$&/")+"/"),rs(_s,fs,Ki,"",function(Xs){return Xs})):_s!=null&&(gs(_s)&&(_s=Zi(_s,Ki+(_s.key==null||es&&es.key===_s.key?"":(""+_s.key).replace(Ss,"$&/")+"/")+Ms)),fs.push(_s)),1;Ms=0;var Os=ws===""?".":ws+":";if(zi(es))for(var Rs=0;Rs<es.length;Rs++)ws=es[Rs],Is=Os+ss(ws,Rs),Ms+=rs(ws,fs,Ki,Is,_s);else if(Rs=Ai(es),typeof Rs=="function")for(es=Rs.call(es),Rs=0;!(ws=es.next()).done;)ws=ws.value,Is=Os+ss(ws,Rs++),Ms+=rs(ws,fs,Ki,Is,_s);else if(Is==="object"){if(typeof es.then=="function")return rs(Es(es),fs,Ki,ws,_s);throw fs=String(es),Error("Objects are not valid as a React child (found: "+(fs==="[object Object]"?"object with keys {"+Object.keys(es).join(", ")+"}":fs)+"). If you meant to render a collection of children, use an array instead.")}return Ms}function cs(es,fs,Ki){if(es==null)return es;var ws=[],_s=0;return rs(es,ws,"","",function(Is){return fs.call(Ki,Is,_s++)}),ws}function ds(es){if(es._status===-1){var fs=es._result;fs=fs(),fs.then(function(Ki){(es._status===0||es._status===-1)&&(es._status=1,es._result=Ki)},function(Ki){(es._status===0||es._status===-1)&&(es._status=2,es._result=Ki)}),es._status===-1&&(es._status=0,es._result=fs)}if(es._status===1)return es._result.default;throw es._result}var Cs=typeof reportError=="function"?reportError:function(es){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fs=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof es=="object"&&es!==null&&typeof es.message=="string"?String(es.message):String(es),error:es});if(!window.dispatchEvent(fs))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",es);return}console.error(es)},Wi={map:cs,forEach:function(es,fs,Ki){cs(es,function(){fs.apply(this,arguments)},Ki)},count:function(es){var fs=0;return cs(es,function(){fs++}),fs},toArray:function(es){return cs(es,function(fs){return fs})||[]},only:function(es){if(!gs(es))throw Error("React.Children.only expected to receive a single React element child.");return es}};return react_production.Activity=Qn,react_production.Children=Wi,react_production.Component=Li,react_production.Fragment=l,react_production.Profiler=g,react_production.PureComponent=Fi,react_production.StrictMode=d,react_production.Suspense=qn,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xi,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(es){return Xi.H.useMemoCache(es)}},react_production.cache=function(es){return function(){return es.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(es,fs,Ki){if(es==null)throw Error("The argument must be a React element, but you passed "+es+".");var ws=Ni({},es.props),_s=es.key;if(fs!=null)for(Is in fs.key!==void 0&&(_s=""+fs.key),fs)!as.call(fs,Is)||Is==="key"||Is==="__self"||Is==="__source"||Is==="ref"&&fs.ref===void 0||(ws[Is]=fs[Is]);var Is=arguments.length-2;if(Is===1)ws.children=Ki;else if(1<Is){for(var Ms=Array(Is),Os=0;Os<Is;Os++)Ms[Os]=arguments[Os+2];ws.children=Ms}return ls(es.type,_s,ws)},react_production.createContext=function(es){return es={$$typeof:Un,_currentValue:es,_currentValue2:es,_threadCount:0,Provider:null,Consumer:null},es.Provider=es,es.Consumer={$$typeof:jn,_context:es},es},react_production.createElement=function(es,fs,Ki){var ws,_s={},Is=null;if(fs!=null)for(ws in fs.key!==void 0&&(Is=""+fs.key),fs)as.call(fs,ws)&&ws!=="key"&&ws!=="__self"&&ws!=="__source"&&(_s[ws]=fs[ws]);var Ms=arguments.length-2;if(Ms===1)_s.children=Ki;else if(1<Ms){for(var Os=Array(Ms),Rs=0;Rs<Ms;Rs++)Os[Rs]=arguments[Rs+2];_s.children=Os}if(es&&es.defaultProps)for(ws in Ms=es.defaultProps,Ms)_s[ws]===void 0&&(_s[ws]=Ms[ws]);return ls(es,Is,_s)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(es){return{$$typeof:zn,render:es}},react_production.isValidElement=gs,react_production.lazy=function(es){return{$$typeof:Xn,_payload:{_status:-1,_result:es},_init:ds}},react_production.memo=function(es,fs){return{$$typeof:Kn,type:es,compare:fs===void 0?null:fs}},react_production.startTransition=function(es){var fs=Xi.T,Ki={};Xi.T=Ki;try{var ws=es(),_s=Xi.S;_s!==null&&_s(Ki,ws),typeof ws=="object"&&ws!==null&&typeof ws.then=="function"&&ws.then(Gi,Cs)}catch(Is){Cs(Is)}finally{fs!==null&&Ki.types!==null&&(fs.types=Ki.types),Xi.T=fs}},react_production.unstable_useCacheRefresh=function(){return Xi.H.useCacheRefresh()},react_production.use=function(es){return Xi.H.use(es)},react_production.useActionState=function(es,fs,Ki){return Xi.H.useActionState(es,fs,Ki)},react_production.useCallback=function(es,fs){return Xi.H.useCallback(es,fs)},react_production.useContext=function(es){return Xi.H.useContext(es)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(es,fs){return Xi.H.useDeferredValue(es,fs)},react_production.useEffect=function(es,fs){return Xi.H.useEffect(es,fs)},react_production.useEffectEvent=function(es){return Xi.H.useEffectEvent(es)},react_production.useId=function(){return Xi.H.useId()},react_production.useImperativeHandle=function(es,fs,Ki){return Xi.H.useImperativeHandle(es,fs,Ki)},react_production.useInsertionEffect=function(es,fs){return Xi.H.useInsertionEffect(es,fs)},react_production.useLayoutEffect=function(es,fs){return Xi.H.useLayoutEffect(es,fs)},react_production.useMemo=function(es,fs){return Xi.H.useMemo(es,fs)},react_production.useOptimistic=function(es,fs){return Xi.H.useOptimistic(es,fs)},react_production.useReducer=function(es,fs,Ki){return Xi.H.useReducer(es,fs,Ki)},react_production.useRef=function(es){return Xi.H.useRef(es)},react_production.useState=function(es){return Xi.H.useState(es)},react_production.useSyncExternalStore=function(es,fs,Ki){return Xi.H.useSyncExternalStore(es,fs,Ki)},react_production.useTransition=function(){return Xi.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(e){function n(rs,cs){var ds=rs.length;rs.push(cs);e:for(;0<ds;){var Cs=ds-1>>>1,Wi=rs[Cs];if(0<g(Wi,cs))rs[Cs]=cs,rs[ds]=Wi,ds=Cs;else break e}}function l(rs){return rs.length===0?null:rs[0]}function d(rs){if(rs.length===0)return null;var cs=rs[0],ds=rs.pop();if(ds!==cs){rs[0]=ds;e:for(var Cs=0,Wi=rs.length,es=Wi>>>1;Cs<es;){var fs=2*(Cs+1)-1,Ki=rs[fs],ws=fs+1,_s=rs[ws];if(0>g(Ki,ds))ws<Wi&&0>g(_s,Ki)?(rs[Cs]=_s,rs[ws]=ds,Cs=ws):(rs[Cs]=Ki,rs[fs]=ds,Cs=fs);else if(ws<Wi&&0>g(_s,ds))rs[Cs]=_s,rs[ws]=ds,Cs=ws;else break e}}return cs}function g(rs,cs){var ds=rs.sortIndex-cs.sortIndex;return ds!==0?ds:rs.id-cs.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var jn=performance;e.unstable_now=function(){return jn.now()}}else{var Un=Date,zn=Un.now();e.unstable_now=function(){return Un.now()-zn}}var qn=[],Kn=[],Xn=1,Qn=null,Jn=3,Ai=!1,Ri=!1,Ni=!1,$i=!1,Li=typeof setTimeout=="function"?setTimeout:null,ji=typeof clearTimeout=="function"?clearTimeout:null,Fi=typeof setImmediate<"u"?setImmediate:null;function qi(rs){for(var cs=l(Kn);cs!==null;){if(cs.callback===null)d(Kn);else if(cs.startTime<=rs)d(Kn),cs.sortIndex=cs.expirationTime,n(qn,cs);else break;cs=l(Kn)}}function zi(rs){if(Ni=!1,qi(rs),!Ri)if(l(qn)!==null)Ri=!0,Gi||(Gi=!0,bs());else{var cs=l(Kn);cs!==null&&Es(zi,cs.startTime-rs)}}var Gi=!1,Xi=-1,as=5,ls=-1;function Zi(){return $i?!0:!(e.unstable_now()-ls<as)}function gs(){if($i=!1,Gi){var rs=e.unstable_now();ls=rs;var cs=!0;try{e:{Ri=!1,Ni&&(Ni=!1,ji(Xi),Xi=-1),Ai=!0;var ds=Jn;try{t:{for(qi(rs),Qn=l(qn);Qn!==null&&!(Qn.expirationTime>rs&&Zi());){var Cs=Qn.callback;if(typeof Cs=="function"){Qn.callback=null,Jn=Qn.priorityLevel;var Wi=Cs(Qn.expirationTime<=rs);if(rs=e.unstable_now(),typeof Wi=="function"){Qn.callback=Wi,qi(rs),cs=!0;break t}Qn===l(qn)&&d(qn),qi(rs)}else d(qn);Qn=l(qn)}if(Qn!==null)cs=!0;else{var es=l(Kn);es!==null&&Es(zi,es.startTime-rs),cs=!1}}break e}finally{Qn=null,Jn=ds,Ai=!1}cs=void 0}}finally{cs?bs():Gi=!1}}}var bs;if(typeof Fi=="function")bs=function(){Fi(gs)};else if(typeof MessageChannel<"u"){var Ss=new MessageChannel,ss=Ss.port2;Ss.port1.onmessage=gs,bs=function(){ss.postMessage(null)}}else bs=function(){Li(gs,0)};function Es(rs,cs){Xi=Li(function(){rs(e.unstable_now())},cs)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(rs){rs.callback=null},e.unstable_forceFrameRate=function(rs){0>rs||125<rs?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):as=0<rs?Math.floor(1e3/rs):5},e.unstable_getCurrentPriorityLevel=function(){return Jn},e.unstable_next=function(rs){switch(Jn){case 1:case 2:case 3:var cs=3;break;default:cs=Jn}var ds=Jn;Jn=cs;try{return rs()}finally{Jn=ds}},e.unstable_requestPaint=function(){$i=!0},e.unstable_runWithPriority=function(rs,cs){switch(rs){case 1:case 2:case 3:case 4:case 5:break;default:rs=3}var ds=Jn;Jn=rs;try{return cs()}finally{Jn=ds}},e.unstable_scheduleCallback=function(rs,cs,ds){var Cs=e.unstable_now();switch(typeof ds=="object"&&ds!==null?(ds=ds.delay,ds=typeof ds=="number"&&0<ds?Cs+ds:Cs):ds=Cs,rs){case 1:var Wi=-1;break;case 2:Wi=250;break;case 5:Wi=1073741823;break;case 4:Wi=1e4;break;default:Wi=5e3}return Wi=ds+Wi,rs={id:Xn++,callback:cs,priorityLevel:rs,startTime:ds,expirationTime:Wi,sortIndex:-1},ds>Cs?(rs.sortIndex=ds,n(Kn,rs),l(qn)===null&&rs===l(Kn)&&(Ni?(ji(Xi),Xi=-1):Ni=!0,Es(zi,ds-Cs))):(rs.sortIndex=Wi,n(qn,rs),Ri||Ai||(Ri=!0,Gi||(Gi=!0,bs()))),rs},e.unstable_shouldYield=Zi,e.unstable_wrapCallback=function(rs){var cs=Jn;return function(){var ds=Jn;Jn=cs;try{return rs.apply(this,arguments)}finally{Jn=ds}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var e=requireReact();function n(qn){var Kn="https://react.dev/errors/"+qn;if(1<arguments.length){Kn+="?args[]="+encodeURIComponent(arguments[1]);for(var Xn=2;Xn<arguments.length;Xn++)Kn+="&args[]="+encodeURIComponent(arguments[Xn])}return"Minified React error #"+qn+"; visit "+Kn+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var d={d:{f:l,r:function(){throw Error(n(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},g=Symbol.for("react.portal");function jn(qn,Kn,Xn){var Qn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:Qn==null?null:""+Qn,children:qn,containerInfo:Kn,implementation:Xn}}var Un=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function zn(qn,Kn){if(qn==="font")return"";if(typeof Kn=="string")return Kn==="use-credentials"?Kn:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,reactDom_production.createPortal=function(qn,Kn){var Xn=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kn||Kn.nodeType!==1&&Kn.nodeType!==9&&Kn.nodeType!==11)throw Error(n(299));return jn(qn,Kn,null,Xn)},reactDom_production.flushSync=function(qn){var Kn=Un.T,Xn=d.p;try{if(Un.T=null,d.p=2,qn)return qn()}finally{Un.T=Kn,d.p=Xn,d.d.f()}},reactDom_production.preconnect=function(qn,Kn){typeof qn=="string"&&(Kn?(Kn=Kn.crossOrigin,Kn=typeof Kn=="string"?Kn==="use-credentials"?Kn:"":void 0):Kn=null,d.d.C(qn,Kn))},reactDom_production.prefetchDNS=function(qn){typeof qn=="string"&&d.d.D(qn)},reactDom_production.preinit=function(qn,Kn){if(typeof qn=="string"&&Kn&&typeof Kn.as=="string"){var Xn=Kn.as,Qn=zn(Xn,Kn.crossOrigin),Jn=typeof Kn.integrity=="string"?Kn.integrity:void 0,Ai=typeof Kn.fetchPriority=="string"?Kn.fetchPriority:void 0;Xn==="style"?d.d.S(qn,typeof Kn.precedence=="string"?Kn.precedence:void 0,{crossOrigin:Qn,integrity:Jn,fetchPriority:Ai}):Xn==="script"&&d.d.X(qn,{crossOrigin:Qn,integrity:Jn,fetchPriority:Ai,nonce:typeof Kn.nonce=="string"?Kn.nonce:void 0})}},reactDom_production.preinitModule=function(qn,Kn){if(typeof qn=="string")if(typeof Kn=="object"&&Kn!==null){if(Kn.as==null||Kn.as==="script"){var Xn=zn(Kn.as,Kn.crossOrigin);d.d.M(qn,{crossOrigin:Xn,integrity:typeof Kn.integrity=="string"?Kn.integrity:void 0,nonce:typeof Kn.nonce=="string"?Kn.nonce:void 0})}}else Kn==null&&d.d.M(qn)},reactDom_production.preload=function(qn,Kn){if(typeof qn=="string"&&typeof Kn=="object"&&Kn!==null&&typeof Kn.as=="string"){var Xn=Kn.as,Qn=zn(Xn,Kn.crossOrigin);d.d.L(qn,Xn,{crossOrigin:Qn,integrity:typeof Kn.integrity=="string"?Kn.integrity:void 0,nonce:typeof Kn.nonce=="string"?Kn.nonce:void 0,type:typeof Kn.type=="string"?Kn.type:void 0,fetchPriority:typeof Kn.fetchPriority=="string"?Kn.fetchPriority:void 0,referrerPolicy:typeof Kn.referrerPolicy=="string"?Kn.referrerPolicy:void 0,imageSrcSet:typeof Kn.imageSrcSet=="string"?Kn.imageSrcSet:void 0,imageSizes:typeof Kn.imageSizes=="string"?Kn.imageSizes:void 0,media:typeof Kn.media=="string"?Kn.media:void 0})}},reactDom_production.preloadModule=function(qn,Kn){if(typeof qn=="string")if(Kn){var Xn=zn(Kn.as,Kn.crossOrigin);d.d.m(qn,{as:typeof Kn.as=="string"&&Kn.as!=="script"?Kn.as:void 0,crossOrigin:Xn,integrity:typeof Kn.integrity=="string"?Kn.integrity:void 0})}else d.d.m(qn)},reactDom_production.requestFormReset=function(qn){d.d.r(qn)},reactDom_production.unstable_batchedUpdates=function(qn,Kn){return qn(Kn)},reactDom_production.useFormState=function(qn,Kn,Xn){return Un.H.useFormState(qn,Kn,Xn)},reactDom_production.useFormStatus=function(){return Un.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var e=requireScheduler(),n=requireReact(),l=requireReactDom();function d(Gn){var Yn="https://react.dev/errors/"+Gn;if(1<arguments.length){Yn+="?args[]="+encodeURIComponent(arguments[1]);for(var Zn=2;Zn<arguments.length;Zn++)Yn+="&args[]="+encodeURIComponent(arguments[Zn])}return"Minified React error #"+Gn+"; visit "+Yn+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(Gn){return!(!Gn||Gn.nodeType!==1&&Gn.nodeType!==9&&Gn.nodeType!==11)}function jn(Gn){var Yn=Gn,Zn=Gn;if(Gn.alternate)for(;Yn.return;)Yn=Yn.return;else{Gn=Yn;do Yn=Gn,(Yn.flags&4098)!==0&&(Zn=Yn.return),Gn=Yn.return;while(Gn)}return Yn.tag===3?Zn:null}function Un(Gn){if(Gn.tag===13){var Yn=Gn.memoizedState;if(Yn===null&&(Gn=Gn.alternate,Gn!==null&&(Yn=Gn.memoizedState)),Yn!==null)return Yn.dehydrated}return null}function zn(Gn){if(Gn.tag===31){var Yn=Gn.memoizedState;if(Yn===null&&(Gn=Gn.alternate,Gn!==null&&(Yn=Gn.memoizedState)),Yn!==null)return Yn.dehydrated}return null}function qn(Gn){if(jn(Gn)!==Gn)throw Error(d(188))}function Kn(Gn){var Yn=Gn.alternate;if(!Yn){if(Yn=jn(Gn),Yn===null)throw Error(d(188));return Yn!==Gn?null:Gn}for(var Zn=Gn,Ii=Yn;;){var Di=Zn.return;if(Di===null)break;var Oi=Di.alternate;if(Oi===null){if(Ii=Di.return,Ii!==null){Zn=Ii;continue}break}if(Di.child===Oi.child){for(Oi=Di.child;Oi;){if(Oi===Zn)return qn(Di),Gn;if(Oi===Ii)return qn(Di),Yn;Oi=Oi.sibling}throw Error(d(188))}if(Zn.return!==Ii.return)Zn=Di,Ii=Oi;else{for(var Pi=!1,Ui=Di.child;Ui;){if(Ui===Zn){Pi=!0,Zn=Di,Ii=Oi;break}if(Ui===Ii){Pi=!0,Ii=Di,Zn=Oi;break}Ui=Ui.sibling}if(!Pi){for(Ui=Oi.child;Ui;){if(Ui===Zn){Pi=!0,Zn=Oi,Ii=Di;break}if(Ui===Ii){Pi=!0,Ii=Oi,Zn=Di;break}Ui=Ui.sibling}if(!Pi)throw Error(d(189))}}if(Zn.alternate!==Ii)throw Error(d(190))}if(Zn.tag!==3)throw Error(d(188));return Zn.stateNode.current===Zn?Gn:Yn}function Xn(Gn){var Yn=Gn.tag;if(Yn===5||Yn===26||Yn===27||Yn===6)return Gn;for(Gn=Gn.child;Gn!==null;){if(Yn=Xn(Gn),Yn!==null)return Yn;Gn=Gn.sibling}return null}var Qn=Object.assign,Jn=Symbol.for("react.element"),Ai=Symbol.for("react.transitional.element"),Ri=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),$i=Symbol.for("react.strict_mode"),Li=Symbol.for("react.profiler"),ji=Symbol.for("react.consumer"),Fi=Symbol.for("react.context"),qi=Symbol.for("react.forward_ref"),zi=Symbol.for("react.suspense"),Gi=Symbol.for("react.suspense_list"),Xi=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),ls=Symbol.for("react.activity"),Zi=Symbol.for("react.memo_cache_sentinel"),gs=Symbol.iterator;function bs(Gn){return Gn===null||typeof Gn!="object"?null:(Gn=gs&&Gn[gs]||Gn["@@iterator"],typeof Gn=="function"?Gn:null)}var Ss=Symbol.for("react.client.reference");function ss(Gn){if(Gn==null)return null;if(typeof Gn=="function")return Gn.$$typeof===Ss?null:Gn.displayName||Gn.name||null;if(typeof Gn=="string")return Gn;switch(Gn){case Ni:return"Fragment";case Li:return"Profiler";case $i:return"StrictMode";case zi:return"Suspense";case Gi:return"SuspenseList";case ls:return"Activity"}if(typeof Gn=="object")switch(Gn.$$typeof){case Ri:return"Portal";case Fi:return Gn.displayName||"Context";case ji:return(Gn._context.displayName||"Context")+".Consumer";case qi:var Yn=Gn.render;return Gn=Gn.displayName,Gn||(Gn=Yn.displayName||Yn.name||"",Gn=Gn!==""?"ForwardRef("+Gn+")":"ForwardRef"),Gn;case Xi:return Yn=Gn.displayName||null,Yn!==null?Yn:ss(Gn.type)||"Memo";case as:Yn=Gn._payload,Gn=Gn._init;try{return ss(Gn(Yn))}catch{}}return null}var Es=Array.isArray,rs=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,cs=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ds={pending:!1,data:null,method:null,action:null},Cs=[],Wi=-1;function es(Gn){return{current:Gn}}function fs(Gn){0>Wi||(Gn.current=Cs[Wi],Cs[Wi]=null,Wi--)}function Ki(Gn,Yn){Wi++,Cs[Wi]=Gn.current,Gn.current=Yn}var ws=es(null),_s=es(null),Is=es(null),Ms=es(null);function Os(Gn,Yn){switch(Ki(Is,Yn),Ki(_s,Gn),Ki(ws,null),Yn.nodeType){case 9:case 11:Gn=(Gn=Yn.documentElement)&&(Gn=Gn.namespaceURI)?pT(Gn):0;break;default:if(Gn=Yn.tagName,Yn=Yn.namespaceURI)Yn=pT(Yn),Gn=hT(Yn,Gn);else switch(Gn){case"svg":Gn=1;break;case"math":Gn=2;break;default:Gn=0}}fs(ws),Ki(ws,Gn)}function Rs(){fs(ws),fs(_s),fs(Is)}function Xs(Gn){Gn.memoizedState!==null&&Ki(Ms,Gn);var Yn=ws.current,Zn=hT(Yn,Gn.type);Yn!==Zn&&(Ki(_s,Gn),Ki(ws,Zn))}function _a(Gn){_s.current===Gn&&(fs(ws),fs(_s)),Ms.current===Gn&&(fs(Ms),uh._currentValue=ds)}var fl,qs;function hl(Gn){if(fl===void 0)try{throw Error()}catch(Zn){var Yn=Zn.stack.trim().match(/\n( *(at )?)/);fl=Yn&&Yn[1]||"",qs=-1<Zn.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Zn.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fl+Gn+qs}var Hl=!1;function Jl(Gn,Yn){if(!Gn||Hl)return"";Hl=!0;var Zn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ii={DetermineComponentFrameRoot:function(){try{if(Yn){var As=function(){throw Error()};if(Object.defineProperty(As.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(As,[])}catch(ys){var ms=ys}Reflect.construct(Gn,[],As)}else{try{As.call()}catch(ys){ms=ys}Gn.call(As.prototype)}}else{try{throw Error()}catch(ys){ms=ys}(As=Gn())&&typeof As.catch=="function"&&As.catch(function(){})}}catch(ys){if(ys&&ms&&typeof ys.stack=="string")return[ys.stack,ms.stack]}return[null,null]}};Ii.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Di=Object.getOwnPropertyDescriptor(Ii.DetermineComponentFrameRoot,"name");Di&&Di.configurable&&Object.defineProperty(Ii.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Oi=Ii.DetermineComponentFrameRoot(),Pi=Oi[0],Ui=Oi[1];if(Pi&&Ui){var ns=Pi.split(`
`),hs=Ui.split(`
`);for(Di=Ii=0;Ii<ns.length&&!ns[Ii].includes("DetermineComponentFrameRoot");)Ii++;for(;Di<hs.length&&!hs[Di].includes("DetermineComponentFrameRoot");)Di++;if(Ii===ns.length||Di===hs.length)for(Ii=ns.length-1,Di=hs.length-1;1<=Ii&&0<=Di&&ns[Ii]!==hs[Di];)Di--;for(;1<=Ii&&0<=Di;Ii--,Di--)if(ns[Ii]!==hs[Di]){if(Ii!==1||Di!==1)do if(Ii--,Di--,0>Di||ns[Ii]!==hs[Di]){var Ts=`
`+ns[Ii].replace(" at new "," at ");return Gn.displayName&&Ts.includes("<anonymous>")&&(Ts=Ts.replace("<anonymous>",Gn.displayName)),Ts}while(1<=Ii&&0<=Di);break}}}finally{Hl=!1,Error.prepareStackTrace=Zn}return(Zn=Gn?Gn.displayName||Gn.name:"")?hl(Zn):""}function bu(Gn,Yn){switch(Gn.tag){case 26:case 27:case 5:return hl(Gn.type);case 16:return hl("Lazy");case 13:return Gn.child!==Yn&&Yn!==null?hl("Suspense Fallback"):hl("Suspense");case 19:return hl("SuspenseList");case 0:case 15:return Jl(Gn.type,!1);case 11:return Jl(Gn.type.render,!1);case 1:return Jl(Gn.type,!0);case 31:return hl("Activity");default:return""}}function iu(Gn){try{var Yn="",Zn=null;do Yn+=bu(Gn,Zn),Zn=Gn,Gn=Gn.return;while(Gn);return Yn}catch(Ii){return`
Error generating stack: `+Ii.message+`
`+Ii.stack}}var vl=Object.prototype.hasOwnProperty,su=e.unstable_scheduleCallback,Gu=e.unstable_cancelCallback,Tp=e.unstable_shouldYield,Sp=e.unstable_requestPaint,Rl=e.unstable_now,xp=e.unstable_getCurrentPriorityLevel,xs=e.unstable_ImmediatePriority,ks=e.unstable_UserBlockingPriority,Ps=e.unstable_NormalPriority,js=e.unstable_LowPriority,Ys=e.unstable_IdlePriority,Fl=e.log,Dl=e.unstable_setDisableYieldValue,zl=null,Al=null;function Gl(Gn){if(typeof Fl=="function"&&Dl(Gn),Al&&typeof Al.setStrictMode=="function")try{Al.setStrictMode(zl,Gn)}catch{}}var Ta=Math.clz32?Math.clz32:eS,qu=Math.log,yu=Math.LN2;function eS(Gn){return Gn>>>=0,Gn===0?32:31-(qu(Gn)/yu|0)|0}var hh=256,mh=262144,gh=4194304;function bf(Gn){var Yn=Gn&42;if(Yn!==0)return Yn;switch(Gn&-Gn){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return Gn&261888;case 262144:case 524288:case 1048576:case 2097152:return Gn&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return Gn&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return Gn}}function bh(Gn,Yn,Zn){var Ii=Gn.pendingLanes;if(Ii===0)return 0;var Di=0,Oi=Gn.suspendedLanes,Pi=Gn.pingedLanes;Gn=Gn.warmLanes;var Ui=Ii&134217727;return Ui!==0?(Ii=Ui&~Oi,Ii!==0?Di=bf(Ii):(Pi&=Ui,Pi!==0?Di=bf(Pi):Zn||(Zn=Ui&~Gn,Zn!==0&&(Di=bf(Zn))))):(Ui=Ii&~Oi,Ui!==0?Di=bf(Ui):Pi!==0?Di=bf(Pi):Zn||(Zn=Ii&~Gn,Zn!==0&&(Di=bf(Zn)))),Di===0?0:Yn!==0&&Yn!==Di&&(Yn&Oi)===0&&(Oi=Di&-Di,Zn=Yn&-Yn,Oi>=Zn||Oi===32&&(Zn&4194048)!==0)?Yn:Di}function Cp(Gn,Yn){return(Gn.pendingLanes&~(Gn.suspendedLanes&~Gn.pingedLanes)&Yn)===0}function tS(Gn,Yn){switch(Gn){case 1:case 2:case 4:case 8:case 64:return Yn+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Yn+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W0(){var Gn=gh;return gh<<=1,(gh&62914560)===0&&(gh=4194304),Gn}function Mm(Gn){for(var Yn=[],Zn=0;31>Zn;Zn++)Yn.push(Gn);return Yn}function vp(Gn,Yn){Gn.pendingLanes|=Yn,Yn!==268435456&&(Gn.suspendedLanes=0,Gn.pingedLanes=0,Gn.warmLanes=0)}function nS(Gn,Yn,Zn,Ii,Di,Oi){var Pi=Gn.pendingLanes;Gn.pendingLanes=Zn,Gn.suspendedLanes=0,Gn.pingedLanes=0,Gn.warmLanes=0,Gn.expiredLanes&=Zn,Gn.entangledLanes&=Zn,Gn.errorRecoveryDisabledLanes&=Zn,Gn.shellSuspendCounter=0;var Ui=Gn.entanglements,ns=Gn.expirationTimes,hs=Gn.hiddenUpdates;for(Zn=Pi&~Zn;0<Zn;){var Ts=31-Ta(Zn),As=1<<Ts;Ui[Ts]=0,ns[Ts]=-1;var ms=hs[Ts];if(ms!==null)for(hs[Ts]=null,Ts=0;Ts<ms.length;Ts++){var ys=ms[Ts];ys!==null&&(ys.lane&=-536870913)}Zn&=~As}Ii!==0&&X0(Gn,Ii,0),Oi!==0&&Di===0&&Gn.tag!==0&&(Gn.suspendedLanes|=Oi&~(Pi&~Yn))}function X0(Gn,Yn,Zn){Gn.pendingLanes|=Yn,Gn.suspendedLanes&=~Yn;var Ii=31-Ta(Yn);Gn.entangledLanes|=Yn,Gn.entanglements[Ii]=Gn.entanglements[Ii]|1073741824|Zn&261930}function Q0(Gn,Yn){var Zn=Gn.entangledLanes|=Yn;for(Gn=Gn.entanglements;Zn;){var Ii=31-Ta(Zn),Di=1<<Ii;Di&Yn|Gn[Ii]&Yn&&(Gn[Ii]|=Yn),Zn&=~Di}}function Z0(Gn,Yn){var Zn=Yn&-Yn;return Zn=(Zn&42)!==0?1:Om(Zn),(Zn&(Gn.suspendedLanes|Yn))!==0?0:Zn}function Om(Gn){switch(Gn){case 2:Gn=1;break;case 8:Gn=4;break;case 32:Gn=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Gn=128;break;case 268435456:Gn=134217728;break;default:Gn=0}return Gn}function $m(Gn){return Gn&=-Gn,2<Gn?8<Gn?(Gn&134217727)!==0?32:268435456:8:2}function J0(){var Gn=cs.p;return Gn!==0?Gn:(Gn=window.event,Gn===void 0?32:BT(Gn.type))}function e1(Gn,Yn){var Zn=cs.p;try{return cs.p=Gn,Yn()}finally{cs.p=Zn}}var Yu=Math.random().toString(36).slice(2),Ml="__reactFiber$"+Yu,ql="__reactProps$"+Yu,$f="__reactContainer$"+Yu,Lm="__reactEvents$"+Yu,rS="__reactListeners$"+Yu,oS="__reactHandles$"+Yu,t1="__reactResources$"+Yu,Ap="__reactMarker$"+Yu;function Pm(Gn){delete Gn[Ml],delete Gn[ql],delete Gn[Lm],delete Gn[rS],delete Gn[oS]}function Lf(Gn){var Yn=Gn[Ml];if(Yn)return Yn;for(var Zn=Gn.parentNode;Zn;){if(Yn=Zn[$f]||Zn[Ml]){if(Zn=Yn.alternate,Yn.child!==null||Zn!==null&&Zn.child!==null)for(Gn=ST(Gn);Gn!==null;){if(Zn=Gn[Ml])return Zn;Gn=ST(Gn)}return Yn}Gn=Zn,Zn=Gn.parentNode}return null}function Pf(Gn){if(Gn=Gn[Ml]||Gn[$f]){var Yn=Gn.tag;if(Yn===5||Yn===6||Yn===13||Yn===31||Yn===26||Yn===27||Yn===3)return Gn}return null}function kp(Gn){var Yn=Gn.tag;if(Yn===5||Yn===26||Yn===27||Yn===6)return Gn.stateNode;throw Error(d(33))}function Bf(Gn){var Yn=Gn[t1];return Yn||(Yn=Gn[t1]={hoistableStyles:new Map,hoistableScripts:new Map}),Yn}function wl(Gn){Gn[Ap]=!0}var n1=new Set,r1={};function yf(Gn,Yn){Hf(Gn,Yn),Hf(Gn+"Capture",Yn)}function Hf(Gn,Yn){for(r1[Gn]=Yn,Gn=0;Gn<Yn.length;Gn++)n1.add(Yn[Gn])}var iS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),o1={},i1={};function sS(Gn){return vl.call(i1,Gn)?!0:vl.call(o1,Gn)?!1:iS.test(Gn)?i1[Gn]=!0:(o1[Gn]=!0,!1)}function yh(Gn,Yn,Zn){if(sS(Yn))if(Zn===null)Gn.removeAttribute(Yn);else{switch(typeof Zn){case"undefined":case"function":case"symbol":Gn.removeAttribute(Yn);return;case"boolean":var Ii=Yn.toLowerCase().slice(0,5);if(Ii!=="data-"&&Ii!=="aria-"){Gn.removeAttribute(Yn);return}}Gn.setAttribute(Yn,""+Zn)}}function Eh(Gn,Yn,Zn){if(Zn===null)Gn.removeAttribute(Yn);else{switch(typeof Zn){case"undefined":case"function":case"symbol":case"boolean":Gn.removeAttribute(Yn);return}Gn.setAttribute(Yn,""+Zn)}}function ku(Gn,Yn,Zn,Ii){if(Ii===null)Gn.removeAttribute(Zn);else{switch(typeof Ii){case"undefined":case"function":case"symbol":case"boolean":Gn.removeAttribute(Zn);return}Gn.setAttributeNS(Yn,Zn,""+Ii)}}function au(Gn){switch(typeof Gn){case"bigint":case"boolean":case"number":case"string":case"undefined":return Gn;case"object":return Gn;default:return""}}function s1(Gn){var Yn=Gn.type;return(Gn=Gn.nodeName)&&Gn.toLowerCase()==="input"&&(Yn==="checkbox"||Yn==="radio")}function aS(Gn,Yn,Zn){var Ii=Object.getOwnPropertyDescriptor(Gn.constructor.prototype,Yn);if(!Gn.hasOwnProperty(Yn)&&typeof Ii<"u"&&typeof Ii.get=="function"&&typeof Ii.set=="function"){var Di=Ii.get,Oi=Ii.set;return Object.defineProperty(Gn,Yn,{configurable:!0,get:function(){return Di.call(this)},set:function(Pi){Zn=""+Pi,Oi.call(this,Pi)}}),Object.defineProperty(Gn,Yn,{enumerable:Ii.enumerable}),{getValue:function(){return Zn},setValue:function(Pi){Zn=""+Pi},stopTracking:function(){Gn._valueTracker=null,delete Gn[Yn]}}}}function Bm(Gn){if(!Gn._valueTracker){var Yn=s1(Gn)?"checked":"value";Gn._valueTracker=aS(Gn,Yn,""+Gn[Yn])}}function a1(Gn){if(!Gn)return!1;var Yn=Gn._valueTracker;if(!Yn)return!0;var Zn=Yn.getValue(),Ii="";return Gn&&(Ii=s1(Gn)?Gn.checked?"true":"false":Gn.value),Gn=Ii,Gn!==Zn?(Yn.setValue(Gn),!0):!1}function Th(Gn){if(Gn=Gn||(typeof document<"u"?document:void 0),typeof Gn>"u")return null;try{return Gn.activeElement||Gn.body}catch{return Gn.body}}var lS=/[\n"\\]/g;function lu(Gn){return Gn.replace(lS,function(Yn){return"\\"+Yn.charCodeAt(0).toString(16)+" "})}function Hm(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui){Gn.name="",Pi!=null&&typeof Pi!="function"&&typeof Pi!="symbol"&&typeof Pi!="boolean"?Gn.type=Pi:Gn.removeAttribute("type"),Yn!=null?Pi==="number"?(Yn===0&&Gn.value===""||Gn.value!=Yn)&&(Gn.value=""+au(Yn)):Gn.value!==""+au(Yn)&&(Gn.value=""+au(Yn)):Pi!=="submit"&&Pi!=="reset"||Gn.removeAttribute("value"),Yn!=null?jm(Gn,Pi,au(Yn)):Zn!=null?jm(Gn,Pi,au(Zn)):Ii!=null&&Gn.removeAttribute("value"),Di==null&&Oi!=null&&(Gn.defaultChecked=!!Oi),Di!=null&&(Gn.checked=Di&&typeof Di!="function"&&typeof Di!="symbol"),Ui!=null&&typeof Ui!="function"&&typeof Ui!="symbol"&&typeof Ui!="boolean"?Gn.name=""+au(Ui):Gn.removeAttribute("name")}function l1(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui){if(Oi!=null&&typeof Oi!="function"&&typeof Oi!="symbol"&&typeof Oi!="boolean"&&(Gn.type=Oi),Yn!=null||Zn!=null){if(!(Oi!=="submit"&&Oi!=="reset"||Yn!=null)){Bm(Gn);return}Zn=Zn!=null?""+au(Zn):"",Yn=Yn!=null?""+au(Yn):Zn,Ui||Yn===Gn.value||(Gn.value=Yn),Gn.defaultValue=Yn}Ii=Ii??Di,Ii=typeof Ii!="function"&&typeof Ii!="symbol"&&!!Ii,Gn.checked=Ui?Gn.checked:!!Ii,Gn.defaultChecked=!!Ii,Pi!=null&&typeof Pi!="function"&&typeof Pi!="symbol"&&typeof Pi!="boolean"&&(Gn.name=Pi),Bm(Gn)}function jm(Gn,Yn,Zn){Yn==="number"&&Th(Gn.ownerDocument)===Gn||Gn.defaultValue===""+Zn||(Gn.defaultValue=""+Zn)}function jf(Gn,Yn,Zn,Ii){if(Gn=Gn.options,Yn){Yn={};for(var Di=0;Di<Zn.length;Di++)Yn["$"+Zn[Di]]=!0;for(Zn=0;Zn<Gn.length;Zn++)Di=Yn.hasOwnProperty("$"+Gn[Zn].value),Gn[Zn].selected!==Di&&(Gn[Zn].selected=Di),Di&&Ii&&(Gn[Zn].defaultSelected=!0)}else{for(Zn=""+au(Zn),Yn=null,Di=0;Di<Gn.length;Di++){if(Gn[Di].value===Zn){Gn[Di].selected=!0,Ii&&(Gn[Di].defaultSelected=!0);return}Yn!==null||Gn[Di].disabled||(Yn=Gn[Di])}Yn!==null&&(Yn.selected=!0)}}function c1(Gn,Yn,Zn){if(Yn!=null&&(Yn=""+au(Yn),Yn!==Gn.value&&(Gn.value=Yn),Zn==null)){Gn.defaultValue!==Yn&&(Gn.defaultValue=Yn);return}Gn.defaultValue=Zn!=null?""+au(Zn):""}function u1(Gn,Yn,Zn,Ii){if(Yn==null){if(Ii!=null){if(Zn!=null)throw Error(d(92));if(Es(Ii)){if(1<Ii.length)throw Error(d(93));Ii=Ii[0]}Zn=Ii}Zn==null&&(Zn=""),Yn=Zn}Zn=au(Yn),Gn.defaultValue=Zn,Ii=Gn.textContent,Ii===Zn&&Ii!==""&&Ii!==null&&(Gn.value=Ii),Bm(Gn)}function Ff(Gn,Yn){if(Yn){var Zn=Gn.firstChild;if(Zn&&Zn===Gn.lastChild&&Zn.nodeType===3){Zn.nodeValue=Yn;return}}Gn.textContent=Yn}var cS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function d1(Gn,Yn,Zn){var Ii=Yn.indexOf("--")===0;Zn==null||typeof Zn=="boolean"||Zn===""?Ii?Gn.setProperty(Yn,""):Yn==="float"?Gn.cssFloat="":Gn[Yn]="":Ii?Gn.setProperty(Yn,Zn):typeof Zn!="number"||Zn===0||cS.has(Yn)?Yn==="float"?Gn.cssFloat=Zn:Gn[Yn]=(""+Zn).trim():Gn[Yn]=Zn+"px"}function f1(Gn,Yn,Zn){if(Yn!=null&&typeof Yn!="object")throw Error(d(62));if(Gn=Gn.style,Zn!=null){for(var Ii in Zn)!Zn.hasOwnProperty(Ii)||Yn!=null&&Yn.hasOwnProperty(Ii)||(Ii.indexOf("--")===0?Gn.setProperty(Ii,""):Ii==="float"?Gn.cssFloat="":Gn[Ii]="");for(var Di in Yn)Ii=Yn[Di],Yn.hasOwnProperty(Di)&&Zn[Di]!==Ii&&d1(Gn,Di,Ii)}else for(var Oi in Yn)Yn.hasOwnProperty(Oi)&&d1(Gn,Oi,Yn[Oi])}function Fm(Gn){if(Gn.indexOf("-")===-1)return!1;switch(Gn){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sh(Gn){return dS.test(""+Gn)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":Gn}function wu(){}var Um=null;function zm(Gn){return Gn=Gn.target||Gn.srcElement||window,Gn.correspondingUseElement&&(Gn=Gn.correspondingUseElement),Gn.nodeType===3?Gn.parentNode:Gn}var Uf=null,zf=null;function p1(Gn){var Yn=Pf(Gn);if(Yn&&(Gn=Yn.stateNode)){var Zn=Gn[ql]||null;e:switch(Gn=Yn.stateNode,Yn.type){case"input":if(Hm(Gn,Zn.value,Zn.defaultValue,Zn.defaultValue,Zn.checked,Zn.defaultChecked,Zn.type,Zn.name),Yn=Zn.name,Zn.type==="radio"&&Yn!=null){for(Zn=Gn;Zn.parentNode;)Zn=Zn.parentNode;for(Zn=Zn.querySelectorAll('input[name="'+lu(""+Yn)+'"][type="radio"]'),Yn=0;Yn<Zn.length;Yn++){var Ii=Zn[Yn];if(Ii!==Gn&&Ii.form===Gn.form){var Di=Ii[ql]||null;if(!Di)throw Error(d(90));Hm(Ii,Di.value,Di.defaultValue,Di.defaultValue,Di.checked,Di.defaultChecked,Di.type,Di.name)}}for(Yn=0;Yn<Zn.length;Yn++)Ii=Zn[Yn],Ii.form===Gn.form&&a1(Ii)}break e;case"textarea":c1(Gn,Zn.value,Zn.defaultValue);break e;case"select":Yn=Zn.value,Yn!=null&&jf(Gn,!!Zn.multiple,Yn,!1)}}}var Vm=!1;function h1(Gn,Yn,Zn){if(Vm)return Gn(Yn,Zn);Vm=!0;try{var Ii=Gn(Yn);return Ii}finally{if(Vm=!1,(Uf!==null||zf!==null)&&(um(),Uf&&(Yn=Uf,Gn=zf,zf=Uf=null,p1(Yn),Gn)))for(Yn=0;Yn<Gn.length;Yn++)p1(Gn[Yn])}}function wp(Gn,Yn){var Zn=Gn.stateNode;if(Zn===null)return null;var Ii=Zn[ql]||null;if(Ii===null)return null;Zn=Ii[Yn];e:switch(Yn){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ii=!Ii.disabled)||(Gn=Gn.type,Ii=!(Gn==="button"||Gn==="input"||Gn==="select"||Gn==="textarea")),Gn=!Ii;break e;default:Gn=!1}if(Gn)return null;if(Zn&&typeof Zn!="function")throw Error(d(231,Yn,typeof Zn));return Zn}var _u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gm=!1;if(_u)try{var _p={};Object.defineProperty(_p,"passive",{get:function(){Gm=!0}}),window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,_p)}catch{Gm=!1}var Ku=null,qm=null,xh=null;function m1(){if(xh)return xh;var Gn,Yn=qm,Zn=Yn.length,Ii,Di="value"in Ku?Ku.value:Ku.textContent,Oi=Di.length;for(Gn=0;Gn<Zn&&Yn[Gn]===Di[Gn];Gn++);var Pi=Zn-Gn;for(Ii=1;Ii<=Pi&&Yn[Zn-Ii]===Di[Oi-Ii];Ii++);return xh=Di.slice(Gn,1<Ii?1-Ii:void 0)}function Ch(Gn){var Yn=Gn.keyCode;return"charCode"in Gn?(Gn=Gn.charCode,Gn===0&&Yn===13&&(Gn=13)):Gn=Yn,Gn===10&&(Gn=13),32<=Gn||Gn===13?Gn:0}function vh(){return!0}function g1(){return!1}function Yl(Gn){function Yn(Zn,Ii,Di,Oi,Pi){this._reactName=Zn,this._targetInst=Di,this.type=Ii,this.nativeEvent=Oi,this.target=Pi,this.currentTarget=null;for(var Ui in Gn)Gn.hasOwnProperty(Ui)&&(Zn=Gn[Ui],this[Ui]=Zn?Zn(Oi):Oi[Ui]);return this.isDefaultPrevented=(Oi.defaultPrevented!=null?Oi.defaultPrevented:Oi.returnValue===!1)?vh:g1,this.isPropagationStopped=g1,this}return Qn(Yn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Zn=this.nativeEvent;Zn&&(Zn.preventDefault?Zn.preventDefault():typeof Zn.returnValue!="unknown"&&(Zn.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var Zn=this.nativeEvent;Zn&&(Zn.stopPropagation?Zn.stopPropagation():typeof Zn.cancelBubble!="unknown"&&(Zn.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),Yn}var Ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Gn){return Gn.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ah=Yl(Ef),Ip=Qn({},Ef,{view:0,detail:0}),fS=Yl(Ip),Ym,Km,Rp,kh=Qn({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(Gn){return Gn.relatedTarget===void 0?Gn.fromElement===Gn.srcElement?Gn.toElement:Gn.fromElement:Gn.relatedTarget},movementX:function(Gn){return"movementX"in Gn?Gn.movementX:(Gn!==Rp&&(Rp&&Gn.type==="mousemove"?(Ym=Gn.screenX-Rp.screenX,Km=Gn.screenY-Rp.screenY):Km=Ym=0,Rp=Gn),Ym)},movementY:function(Gn){return"movementY"in Gn?Gn.movementY:Km}}),b1=Yl(kh),pS=Qn({},kh,{dataTransfer:0}),hS=Yl(pS),mS=Qn({},Ip,{relatedTarget:0}),Wm=Yl(mS),gS=Qn({},Ef,{animationName:0,elapsedTime:0,pseudoElement:0}),bS=Yl(gS),yS=Qn({},Ef,{clipboardData:function(Gn){return"clipboardData"in Gn?Gn.clipboardData:window.clipboardData}}),ES=Yl(yS),TS=Qn({},Ef,{data:0}),y1=Yl(TS),SS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vS(Gn){var Yn=this.nativeEvent;return Yn.getModifierState?Yn.getModifierState(Gn):(Gn=CS[Gn])?!!Yn[Gn]:!1}function Xm(){return vS}var AS=Qn({},Ip,{key:function(Gn){if(Gn.key){var Yn=SS[Gn.key]||Gn.key;if(Yn!=="Unidentified")return Yn}return Gn.type==="keypress"?(Gn=Ch(Gn),Gn===13?"Enter":String.fromCharCode(Gn)):Gn.type==="keydown"||Gn.type==="keyup"?xS[Gn.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(Gn){return Gn.type==="keypress"?Ch(Gn):0},keyCode:function(Gn){return Gn.type==="keydown"||Gn.type==="keyup"?Gn.keyCode:0},which:function(Gn){return Gn.type==="keypress"?Ch(Gn):Gn.type==="keydown"||Gn.type==="keyup"?Gn.keyCode:0}}),kS=Yl(AS),wS=Qn({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E1=Yl(wS),_S=Qn({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),IS=Yl(_S),RS=Qn({},Ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),DS=Yl(RS),MS=Qn({},kh,{deltaX:function(Gn){return"deltaX"in Gn?Gn.deltaX:"wheelDeltaX"in Gn?-Gn.wheelDeltaX:0},deltaY:function(Gn){return"deltaY"in Gn?Gn.deltaY:"wheelDeltaY"in Gn?-Gn.wheelDeltaY:"wheelDelta"in Gn?-Gn.wheelDelta:0},deltaZ:0,deltaMode:0}),OS=Yl(MS),$S=Qn({},Ef,{newState:0,oldState:0}),LS=Yl($S),PS=[9,13,27,32],Qm=_u&&"CompositionEvent"in window,Dp=null;_u&&"documentMode"in document&&(Dp=document.documentMode);var BS=_u&&"TextEvent"in window&&!Dp,T1=_u&&(!Qm||Dp&&8<Dp&&11>=Dp),S1=" ",x1=!1;function C1(Gn,Yn){switch(Gn){case"keyup":return PS.indexOf(Yn.keyCode)!==-1;case"keydown":return Yn.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v1(Gn){return Gn=Gn.detail,typeof Gn=="object"&&"data"in Gn?Gn.data:null}var Vf=!1;function HS(Gn,Yn){switch(Gn){case"compositionend":return v1(Yn);case"keypress":return Yn.which!==32?null:(x1=!0,S1);case"textInput":return Gn=Yn.data,Gn===S1&&x1?null:Gn;default:return null}}function jS(Gn,Yn){if(Vf)return Gn==="compositionend"||!Qm&&C1(Gn,Yn)?(Gn=m1(),xh=qm=Ku=null,Vf=!1,Gn):null;switch(Gn){case"paste":return null;case"keypress":if(!(Yn.ctrlKey||Yn.altKey||Yn.metaKey)||Yn.ctrlKey&&Yn.altKey){if(Yn.char&&1<Yn.char.length)return Yn.char;if(Yn.which)return String.fromCharCode(Yn.which)}return null;case"compositionend":return T1&&Yn.locale!=="ko"?null:Yn.data;default:return null}}var FS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(Gn){var Yn=Gn&&Gn.nodeName&&Gn.nodeName.toLowerCase();return Yn==="input"?!!FS[Gn.type]:Yn==="textarea"}function k1(Gn,Yn,Zn,Ii){Uf?zf?zf.push(Ii):zf=[Ii]:Uf=Ii,Yn=bm(Yn,"onChange"),0<Yn.length&&(Zn=new Ah("onChange","change",null,Zn,Ii),Gn.push({event:Zn,listeners:Yn}))}var Np=null,Mp=null;function US(Gn){aT(Gn,0)}function wh(Gn){var Yn=kp(Gn);if(a1(Yn))return Gn}function w1(Gn,Yn){if(Gn==="change")return Yn}var _1=!1;if(_u){var Zm;if(_u){var Jm="oninput"in document;if(!Jm){var I1=document.createElement("div");I1.setAttribute("oninput","return;"),Jm=typeof I1.oninput=="function"}Zm=Jm}else Zm=!1;_1=Zm&&(!document.documentMode||9<document.documentMode)}function R1(){Np&&(Np.detachEvent("onpropertychange",D1),Mp=Np=null)}function D1(Gn){if(Gn.propertyName==="value"&&wh(Mp)){var Yn=[];k1(Yn,Mp,Gn,zm(Gn)),h1(US,Yn)}}function zS(Gn,Yn,Zn){Gn==="focusin"?(R1(),Np=Yn,Mp=Zn,Np.attachEvent("onpropertychange",D1)):Gn==="focusout"&&R1()}function VS(Gn){if(Gn==="selectionchange"||Gn==="keyup"||Gn==="keydown")return wh(Mp)}function GS(Gn,Yn){if(Gn==="click")return wh(Yn)}function qS(Gn,Yn){if(Gn==="input"||Gn==="change")return wh(Yn)}function YS(Gn,Yn){return Gn===Yn&&(Gn!==0||1/Gn===1/Yn)||Gn!==Gn&&Yn!==Yn}var uc=typeof Object.is=="function"?Object.is:YS;function Op(Gn,Yn){if(uc(Gn,Yn))return!0;if(typeof Gn!="object"||Gn===null||typeof Yn!="object"||Yn===null)return!1;var Zn=Object.keys(Gn),Ii=Object.keys(Yn);if(Zn.length!==Ii.length)return!1;for(Ii=0;Ii<Zn.length;Ii++){var Di=Zn[Ii];if(!vl.call(Yn,Di)||!uc(Gn[Di],Yn[Di]))return!1}return!0}function N1(Gn){for(;Gn&&Gn.firstChild;)Gn=Gn.firstChild;return Gn}function M1(Gn,Yn){var Zn=N1(Gn);Gn=0;for(var Ii;Zn;){if(Zn.nodeType===3){if(Ii=Gn+Zn.textContent.length,Gn<=Yn&&Ii>=Yn)return{node:Zn,offset:Yn-Gn};Gn=Ii}e:{for(;Zn;){if(Zn.nextSibling){Zn=Zn.nextSibling;break e}Zn=Zn.parentNode}Zn=void 0}Zn=N1(Zn)}}function O1(Gn,Yn){return Gn&&Yn?Gn===Yn?!0:Gn&&Gn.nodeType===3?!1:Yn&&Yn.nodeType===3?O1(Gn,Yn.parentNode):"contains"in Gn?Gn.contains(Yn):Gn.compareDocumentPosition?!!(Gn.compareDocumentPosition(Yn)&16):!1:!1}function $1(Gn){Gn=Gn!=null&&Gn.ownerDocument!=null&&Gn.ownerDocument.defaultView!=null?Gn.ownerDocument.defaultView:window;for(var Yn=Th(Gn.document);Yn instanceof Gn.HTMLIFrameElement;){try{var Zn=typeof Yn.contentWindow.location.href=="string"}catch{Zn=!1}if(Zn)Gn=Yn.contentWindow;else break;Yn=Th(Gn.document)}return Yn}function eg(Gn){var Yn=Gn&&Gn.nodeName&&Gn.nodeName.toLowerCase();return Yn&&(Yn==="input"&&(Gn.type==="text"||Gn.type==="search"||Gn.type==="tel"||Gn.type==="url"||Gn.type==="password")||Yn==="textarea"||Gn.contentEditable==="true")}var KS=_u&&"documentMode"in document&&11>=document.documentMode,Gf=null,tg=null,$p=null,ng=!1;function L1(Gn,Yn,Zn){var Ii=Zn.window===Zn?Zn.document:Zn.nodeType===9?Zn:Zn.ownerDocument;ng||Gf==null||Gf!==Th(Ii)||(Ii=Gf,"selectionStart"in Ii&&eg(Ii)?Ii={start:Ii.selectionStart,end:Ii.selectionEnd}:(Ii=(Ii.ownerDocument&&Ii.ownerDocument.defaultView||window).getSelection(),Ii={anchorNode:Ii.anchorNode,anchorOffset:Ii.anchorOffset,focusNode:Ii.focusNode,focusOffset:Ii.focusOffset}),$p&&Op($p,Ii)||($p=Ii,Ii=bm(tg,"onSelect"),0<Ii.length&&(Yn=new Ah("onSelect","select",null,Yn,Zn),Gn.push({event:Yn,listeners:Ii}),Yn.target=Gf)))}function Tf(Gn,Yn){var Zn={};return Zn[Gn.toLowerCase()]=Yn.toLowerCase(),Zn["Webkit"+Gn]="webkit"+Yn,Zn["Moz"+Gn]="moz"+Yn,Zn}var qf={animationend:Tf("Animation","AnimationEnd"),animationiteration:Tf("Animation","AnimationIteration"),animationstart:Tf("Animation","AnimationStart"),transitionrun:Tf("Transition","TransitionRun"),transitionstart:Tf("Transition","TransitionStart"),transitioncancel:Tf("Transition","TransitionCancel"),transitionend:Tf("Transition","TransitionEnd")},rg={},P1={};_u&&(P1=document.createElement("div").style,"AnimationEvent"in window||(delete qf.animationend.animation,delete qf.animationiteration.animation,delete qf.animationstart.animation),"TransitionEvent"in window||delete qf.transitionend.transition);function Sf(Gn){if(rg[Gn])return rg[Gn];if(!qf[Gn])return Gn;var Yn=qf[Gn],Zn;for(Zn in Yn)if(Yn.hasOwnProperty(Zn)&&Zn in P1)return rg[Gn]=Yn[Zn];return Gn}var B1=Sf("animationend"),H1=Sf("animationiteration"),j1=Sf("animationstart"),XS=Sf("transitionrun"),QS=Sf("transitionstart"),ZS=Sf("transitioncancel"),F1=Sf("transitionend"),U1=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Eu(Gn,Yn){U1.set(Gn,Yn),yf(Yn,[Gn])}var _h=typeof reportError=="function"?reportError:function(Gn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Yn=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Gn=="object"&&Gn!==null&&typeof Gn.message=="string"?String(Gn.message):String(Gn),error:Gn});if(!window.dispatchEvent(Yn))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Gn);return}console.error(Gn)},cu=[],Yf=0,ig=0;function Ih(){for(var Gn=Yf,Yn=ig=Yf=0;Yn<Gn;){var Zn=cu[Yn];cu[Yn++]=null;var Ii=cu[Yn];cu[Yn++]=null;var Di=cu[Yn];cu[Yn++]=null;var Oi=cu[Yn];if(cu[Yn++]=null,Ii!==null&&Di!==null){var Pi=Ii.pending;Pi===null?Di.next=Di:(Di.next=Pi.next,Pi.next=Di),Ii.pending=Di}Oi!==0&&z1(Zn,Di,Oi)}}function Rh(Gn,Yn,Zn,Ii){cu[Yf++]=Gn,cu[Yf++]=Yn,cu[Yf++]=Zn,cu[Yf++]=Ii,ig|=Ii,Gn.lanes|=Ii,Gn=Gn.alternate,Gn!==null&&(Gn.lanes|=Ii)}function sg(Gn,Yn,Zn,Ii){return Rh(Gn,Yn,Zn,Ii),Dh(Gn)}function xf(Gn,Yn){return Rh(Gn,null,null,Yn),Dh(Gn)}function z1(Gn,Yn,Zn){Gn.lanes|=Zn;var Ii=Gn.alternate;Ii!==null&&(Ii.lanes|=Zn);for(var Di=!1,Oi=Gn.return;Oi!==null;)Oi.childLanes|=Zn,Ii=Oi.alternate,Ii!==null&&(Ii.childLanes|=Zn),Oi.tag===22&&(Gn=Oi.stateNode,Gn===null||Gn._visibility&1||(Di=!0)),Gn=Oi,Oi=Oi.return;return Gn.tag===3?(Oi=Gn.stateNode,Di&&Yn!==null&&(Di=31-Ta(Zn),Gn=Oi.hiddenUpdates,Ii=Gn[Di],Ii===null?Gn[Di]=[Yn]:Ii.push(Yn),Yn.lane=Zn|536870912),Oi):null}function Dh(Gn){if(50<rh)throw rh=0,m0=null,Error(d(185));for(var Yn=Gn.return;Yn!==null;)Gn=Yn,Yn=Gn.return;return Gn.tag===3?Gn.stateNode:null}var Kf={};function JS(Gn,Yn,Zn,Ii){this.tag=Gn,this.key=Zn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=Yn,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ii,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(Gn,Yn,Zn,Ii){return new JS(Gn,Yn,Zn,Ii)}function ag(Gn){return Gn=Gn.prototype,!(!Gn||!Gn.isReactComponent)}function Iu(Gn,Yn){var Zn=Gn.alternate;return Zn===null?(Zn=_c(Gn.tag,Yn,Gn.key,Gn.mode),Zn.elementType=Gn.elementType,Zn.type=Gn.type,Zn.stateNode=Gn.stateNode,Zn.alternate=Gn,Gn.alternate=Zn):(Zn.pendingProps=Yn,Zn.type=Gn.type,Zn.flags=0,Zn.subtreeFlags=0,Zn.deletions=null),Zn.flags=Gn.flags&65011712,Zn.childLanes=Gn.childLanes,Zn.lanes=Gn.lanes,Zn.child=Gn.child,Zn.memoizedProps=Gn.memoizedProps,Zn.memoizedState=Gn.memoizedState,Zn.updateQueue=Gn.updateQueue,Yn=Gn.dependencies,Zn.dependencies=Yn===null?null:{lanes:Yn.lanes,firstContext:Yn.firstContext},Zn.sibling=Gn.sibling,Zn.index=Gn.index,Zn.ref=Gn.ref,Zn.refCleanup=Gn.refCleanup,Zn}function V1(Gn,Yn){Gn.flags&=65011714;var Zn=Gn.alternate;return Zn===null?(Gn.childLanes=0,Gn.lanes=Yn,Gn.child=null,Gn.subtreeFlags=0,Gn.memoizedProps=null,Gn.memoizedState=null,Gn.updateQueue=null,Gn.dependencies=null,Gn.stateNode=null):(Gn.childLanes=Zn.childLanes,Gn.lanes=Zn.lanes,Gn.child=Zn.child,Gn.subtreeFlags=0,Gn.deletions=null,Gn.memoizedProps=Zn.memoizedProps,Gn.memoizedState=Zn.memoizedState,Gn.updateQueue=Zn.updateQueue,Gn.type=Zn.type,Yn=Zn.dependencies,Gn.dependencies=Yn===null?null:{lanes:Yn.lanes,firstContext:Yn.firstContext}),Gn}function Nh(Gn,Yn,Zn,Ii,Di,Oi){var Pi=0;if(Ii=Gn,typeof Gn=="function")ag(Gn)&&(Pi=1);else if(typeof Gn=="string")Pi=iC(Gn,Zn,ws.current)?26:Gn==="html"||Gn==="head"||Gn==="body"?27:5;else e:switch(Gn){case ls:return Gn=_c(31,Zn,Yn,Di),Gn.elementType=ls,Gn.lanes=Oi,Gn;case Ni:return Cf(Zn.children,Di,Oi,Yn);case $i:Pi=8,Di|=24;break;case Li:return Gn=_c(12,Zn,Yn,Di|2),Gn.elementType=Li,Gn.lanes=Oi,Gn;case zi:return Gn=_c(13,Zn,Yn,Di),Gn.elementType=zi,Gn.lanes=Oi,Gn;case Gi:return Gn=_c(19,Zn,Yn,Di),Gn.elementType=Gi,Gn.lanes=Oi,Gn;default:if(typeof Gn=="object"&&Gn!==null)switch(Gn.$$typeof){case Fi:Pi=10;break e;case ji:Pi=9;break e;case qi:Pi=11;break e;case Xi:Pi=14;break e;case as:Pi=16,Ii=null;break e}Pi=29,Zn=Error(d(130,Gn===null?"null":typeof Gn,"")),Ii=null}return Yn=_c(Pi,Zn,Yn,Di),Yn.elementType=Gn,Yn.type=Ii,Yn.lanes=Oi,Yn}function Cf(Gn,Yn,Zn,Ii){return Gn=_c(7,Gn,Ii,Yn),Gn.lanes=Zn,Gn}function lg(Gn,Yn,Zn){return Gn=_c(6,Gn,null,Yn),Gn.lanes=Zn,Gn}function G1(Gn){var Yn=_c(18,null,null,0);return Yn.stateNode=Gn,Yn}function cg(Gn,Yn,Zn){return Yn=_c(4,Gn.children!==null?Gn.children:[],Gn.key,Yn),Yn.lanes=Zn,Yn.stateNode={containerInfo:Gn.containerInfo,pendingChildren:null,implementation:Gn.implementation},Yn}var q1=new WeakMap;function uu(Gn,Yn){if(typeof Gn=="object"&&Gn!==null){var Zn=q1.get(Gn);return Zn!==void 0?Zn:(Yn={value:Gn,source:Yn,stack:iu(Yn)},q1.set(Gn,Yn),Yn)}return{value:Gn,source:Yn,stack:iu(Yn)}}var Wf=[],Xf=0,Mh=null,Lp=0,du=[],fu=0,Wu=null,xu=1,Cu="";function Ru(Gn,Yn){Wf[Xf++]=Lp,Wf[Xf++]=Mh,Mh=Gn,Lp=Yn}function Y1(Gn,Yn,Zn){du[fu++]=xu,du[fu++]=Cu,du[fu++]=Wu,Wu=Gn;var Ii=xu;Gn=Cu;var Di=32-Ta(Ii)-1;Ii&=~(1<<Di),Zn+=1;var Oi=32-Ta(Yn)+Di;if(30<Oi){var Pi=Di-Di%5;Oi=(Ii&(1<<Pi)-1).toString(32),Ii>>=Pi,Di-=Pi,xu=1<<32-Ta(Yn)+Di|Zn<<Di|Ii,Cu=Oi+Gn}else xu=1<<Oi|Zn<<Di|Ii,Cu=Gn}function ug(Gn){Gn.return!==null&&(Ru(Gn,1),Y1(Gn,1,0))}function dg(Gn){for(;Gn===Mh;)Mh=Wf[--Xf],Wf[Xf]=null,Lp=Wf[--Xf],Wf[Xf]=null;for(;Gn===Wu;)Wu=du[--fu],du[fu]=null,Cu=du[--fu],du[fu]=null,xu=du[--fu],du[fu]=null}function K1(Gn,Yn){du[fu++]=xu,du[fu++]=Cu,du[fu++]=Wu,xu=Yn.id,Cu=Yn.overflow,Wu=Gn}var Ol=null,sl=null,Gs=!1,Xu=null,pu=!1,fg=Error(d(519));function Qu(Gn){var Yn=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pp(uu(Yn,Gn)),fg}function W1(Gn){var Yn=Gn.stateNode,Zn=Gn.type,Ii=Gn.memoizedProps;switch(Yn[Ml]=Gn,Yn[ql]=Ii,Zn){case"dialog":Us("cancel",Yn),Us("close",Yn);break;case"iframe":case"object":case"embed":Us("load",Yn);break;case"video":case"audio":for(Zn=0;Zn<ih.length;Zn++)Us(ih[Zn],Yn);break;case"source":Us("error",Yn);break;case"img":case"image":case"link":Us("error",Yn),Us("load",Yn);break;case"details":Us("toggle",Yn);break;case"input":Us("invalid",Yn),l1(Yn,Ii.value,Ii.defaultValue,Ii.checked,Ii.defaultChecked,Ii.type,Ii.name,!0);break;case"select":Us("invalid",Yn);break;case"textarea":Us("invalid",Yn),u1(Yn,Ii.value,Ii.defaultValue,Ii.children)}Zn=Ii.children,typeof Zn!="string"&&typeof Zn!="number"&&typeof Zn!="bigint"||Yn.textContent===""+Zn||Ii.suppressHydrationWarning===!0||dT(Yn.textContent,Zn)?(Ii.popover!=null&&(Us("beforetoggle",Yn),Us("toggle",Yn)),Ii.onScroll!=null&&Us("scroll",Yn),Ii.onScrollEnd!=null&&Us("scrollend",Yn),Ii.onClick!=null&&(Yn.onclick=wu),Yn=!0):Yn=!1,Yn||Qu(Gn,!0)}function X1(Gn){for(Ol=Gn.return;Ol;)switch(Ol.tag){case 5:case 31:case 13:pu=!1;return;case 27:case 3:pu=!0;return;default:Ol=Ol.return}}function Qf(Gn){if(Gn!==Ol)return!1;if(!Gs)return X1(Gn),Gs=!0,!1;var Yn=Gn.tag,Zn;if((Zn=Yn!==3&&Yn!==27)&&((Zn=Yn===5)&&(Zn=Gn.type,Zn=!(Zn!=="form"&&Zn!=="button")||R0(Gn.type,Gn.memoizedProps)),Zn=!Zn),Zn&&sl&&Qu(Gn),X1(Gn),Yn===13){if(Gn=Gn.memoizedState,Gn=Gn!==null?Gn.dehydrated:null,!Gn)throw Error(d(317));sl=TT(Gn)}else if(Yn===31){if(Gn=Gn.memoizedState,Gn=Gn!==null?Gn.dehydrated:null,!Gn)throw Error(d(317));sl=TT(Gn)}else Yn===27?(Yn=sl,df(Gn.type)?(Gn=$0,$0=null,sl=Gn):sl=Yn):sl=Ol?mu(Gn.stateNode.nextSibling):null;return!0}function vf(){sl=Ol=null,Gs=!1}function pg(){var Gn=Xu;return Gn!==null&&(Ql===null?Ql=Gn:Ql.push.apply(Ql,Gn),Xu=null),Gn}function Pp(Gn){Xu===null?Xu=[Gn]:Xu.push(Gn)}var hg=es(null),Af=null,Du=null;function Zu(Gn,Yn,Zn){Ki(hg,Yn._currentValue),Yn._currentValue=Zn}function Nu(Gn){Gn._currentValue=hg.current,fs(hg)}function mg(Gn,Yn,Zn){for(;Gn!==null;){var Ii=Gn.alternate;if((Gn.childLanes&Yn)!==Yn?(Gn.childLanes|=Yn,Ii!==null&&(Ii.childLanes|=Yn)):Ii!==null&&(Ii.childLanes&Yn)!==Yn&&(Ii.childLanes|=Yn),Gn===Zn)break;Gn=Gn.return}}function gg(Gn,Yn,Zn,Ii){var Di=Gn.child;for(Di!==null&&(Di.return=Gn);Di!==null;){var Oi=Di.dependencies;if(Oi!==null){var Pi=Di.child;Oi=Oi.firstContext;e:for(;Oi!==null;){var Ui=Oi;Oi=Di;for(var ns=0;ns<Yn.length;ns++)if(Ui.context===Yn[ns]){Oi.lanes|=Zn,Ui=Oi.alternate,Ui!==null&&(Ui.lanes|=Zn),mg(Oi.return,Zn,Gn),Ii||(Pi=null);break e}Oi=Ui.next}}else if(Di.tag===18){if(Pi=Di.return,Pi===null)throw Error(d(341));Pi.lanes|=Zn,Oi=Pi.alternate,Oi!==null&&(Oi.lanes|=Zn),mg(Pi,Zn,Gn),Pi=null}else Pi=Di.child;if(Pi!==null)Pi.return=Di;else for(Pi=Di;Pi!==null;){if(Pi===Gn){Pi=null;break}if(Di=Pi.sibling,Di!==null){Di.return=Pi.return,Pi=Di;break}Pi=Pi.return}Di=Pi}}function Zf(Gn,Yn,Zn,Ii){Gn=null;for(var Di=Yn,Oi=!1;Di!==null;){if(!Oi){if((Di.flags&524288)!==0)Oi=!0;else if((Di.flags&262144)!==0)break}if(Di.tag===10){var Pi=Di.alternate;if(Pi===null)throw Error(d(387));if(Pi=Pi.memoizedProps,Pi!==null){var Ui=Di.type;uc(Di.pendingProps.value,Pi.value)||(Gn!==null?Gn.push(Ui):Gn=[Ui])}}else if(Di===Ms.current){if(Pi=Di.alternate,Pi===null)throw Error(d(387));Pi.memoizedState.memoizedState!==Di.memoizedState.memoizedState&&(Gn!==null?Gn.push(uh):Gn=[uh])}Di=Di.return}Gn!==null&&gg(Yn,Gn,Zn,Ii),Yn.flags|=262144}function Oh(Gn){for(Gn=Gn.firstContext;Gn!==null;){if(!uc(Gn.context._currentValue,Gn.memoizedValue))return!0;Gn=Gn.next}return!1}function kf(Gn){Af=Gn,Du=null,Gn=Gn.dependencies,Gn!==null&&(Gn.firstContext=null)}function $l(Gn){return Q1(Af,Gn)}function $h(Gn,Yn){return Af===null&&kf(Gn),Q1(Gn,Yn)}function Q1(Gn,Yn){var Zn=Yn._currentValue;if(Yn={context:Yn,memoizedValue:Zn,next:null},Du===null){if(Gn===null)throw Error(d(308));Du=Yn,Gn.dependencies={lanes:0,firstContext:Yn},Gn.flags|=524288}else Du=Du.next=Yn;return Zn}var ex=typeof AbortController<"u"?AbortController:function(){var Gn=[],Yn=this.signal={aborted:!1,addEventListener:function(Zn,Ii){Gn.push(Ii)}};this.abort=function(){Yn.aborted=!0,Gn.forEach(function(Zn){return Zn()})}},tx=e.unstable_scheduleCallback,nx=e.unstable_NormalPriority,Tl={$$typeof:Fi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new ex,data:new Map,refCount:0}}function Bp(Gn){Gn.refCount--,Gn.refCount===0&&tx(nx,function(){Gn.controller.abort()})}var Hp=null,yg=0,Jf=0,ep=null;function rx(Gn,Yn){if(Hp===null){var Zn=Hp=[];yg=0,Jf=S0(),ep={status:"pending",value:void 0,then:function(Ii){Zn.push(Ii)}}}return yg++,Yn.then(Z1,Z1),Yn}function Z1(){if(--yg===0&&Hp!==null){ep!==null&&(ep.status="fulfilled");var Gn=Hp;Hp=null,Jf=0,ep=null;for(var Yn=0;Yn<Gn.length;Yn++)(0,Gn[Yn])()}}function ox(Gn,Yn){var Zn=[],Ii={status:"pending",value:null,reason:null,then:function(Di){Zn.push(Di)}};return Gn.then(function(){Ii.status="fulfilled",Ii.value=Yn;for(var Di=0;Di<Zn.length;Di++)(0,Zn[Di])(Yn)},function(Di){for(Ii.status="rejected",Ii.reason=Di,Di=0;Di<Zn.length;Di++)(0,Zn[Di])(void 0)}),Ii}var J1=rs.S;rs.S=function(Gn,Yn){$E=Rl(),typeof Yn=="object"&&Yn!==null&&typeof Yn.then=="function"&&rx(Gn,Yn),J1!==null&&J1(Gn,Yn)};var wf=es(null);function Eg(){var Gn=wf.current;return Gn!==null?Gn:wa.pooledCache}function Lh(Gn,Yn){Yn===null?Ki(wf,wf.current):Ki(wf,Yn.pool)}function _b(){var Gn=Eg();return Gn===null?null:{parent:Tl._currentValue,pool:Gn}}var tp=Error(d(460)),Tg=Error(d(474)),Ph=Error(d(542)),Bh={then:function(){}};function ey(Gn){return Gn=Gn.status,Gn==="fulfilled"||Gn==="rejected"}function ty(Gn,Yn,Zn){switch(Zn=Gn[Zn],Zn===void 0?Gn.push(Yn):Zn!==Yn&&(Yn.then(wu,wu),Yn=Zn),Yn.status){case"fulfilled":return Yn.value;case"rejected":throw Gn=Yn.reason,ry(Gn),Gn;default:if(typeof Yn.status=="string")Yn.then(wu,wu);else{if(Gn=wa,Gn!==null&&100<Gn.shellSuspendCounter)throw Error(d(482));Gn=Yn,Gn.status="pending",Gn.then(function(Ii){if(Yn.status==="pending"){var Di=Yn;Di.status="fulfilled",Di.value=Ii}},function(Ii){if(Yn.status==="pending"){var Di=Yn;Di.status="rejected",Di.reason=Ii}})}switch(Yn.status){case"fulfilled":return Yn.value;case"rejected":throw Gn=Yn.reason,ry(Gn),Gn}throw If=Yn,tp}}function _f(Gn){try{var Yn=Gn._init;return Yn(Gn._payload)}catch(Zn){throw Zn!==null&&typeof Zn=="object"&&typeof Zn.then=="function"?(If=Zn,tp):Zn}}var If=null;function ny(){if(If===null)throw Error(d(459));var Gn=If;return If=null,Gn}function ry(Gn){if(Gn===tp||Gn===Ph)throw Error(d(483))}var np=null,jp=0;function Hh(Gn){var Yn=jp;return jp+=1,np===null&&(np=[]),ty(np,Gn,Yn)}function Fp(Gn,Yn){Yn=Yn.props.ref,Gn.ref=Yn!==void 0?Yn:null}function jh(Gn,Yn){throw Yn.$$typeof===Jn?Error(d(525)):(Gn=Object.prototype.toString.call(Yn),Error(d(31,Gn==="[object Object]"?"object with keys {"+Object.keys(Yn).join(", ")+"}":Gn)))}function oy(Gn){function Yn(us,is){if(Gn){var ps=us.deletions;ps===null?(us.deletions=[is],us.flags|=16):ps.push(is)}}function Zn(us,is){if(!Gn)return null;for(;is!==null;)Yn(us,is),is=is.sibling;return null}function Ii(us){for(var is=new Map;us!==null;)us.key!==null?is.set(us.key,us):is.set(us.index,us),us=us.sibling;return is}function Di(us,is){return us=Iu(us,is),us.index=0,us.sibling=null,us}function Oi(us,is,ps){return us.index=ps,Gn?(ps=us.alternate,ps!==null?(ps=ps.index,ps<is?(us.flags|=67108866,is):ps):(us.flags|=67108866,is)):(us.flags|=1048576,is)}function Pi(us){return Gn&&us.alternate===null&&(us.flags|=67108866),us}function Ui(us,is,ps,vs){return is===null||is.tag!==6?(is=lg(ps,us.mode,vs),is.return=us,is):(is=Di(is,ps),is.return=us,is)}function ns(us,is,ps,vs){var $s=ps.type;return $s===Ni?Ts(us,is,ps.props.children,vs,ps.key):is!==null&&(is.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===as&&_f($s)===is.type)?(is=Di(is,ps.props),Fp(is,ps),is.return=us,is):(is=Nh(ps.type,ps.key,ps.props,null,us.mode,vs),Fp(is,ps),is.return=us,is)}function hs(us,is,ps,vs){return is===null||is.tag!==4||is.stateNode.containerInfo!==ps.containerInfo||is.stateNode.implementation!==ps.implementation?(is=cg(ps,us.mode,vs),is.return=us,is):(is=Di(is,ps.children||[]),is.return=us,is)}function Ts(us,is,ps,vs,$s){return is===null||is.tag!==7?(is=Cf(ps,us.mode,vs,$s),is.return=us,is):(is=Di(is,ps),is.return=us,is)}function As(us,is,ps){if(typeof is=="string"&&is!==""||typeof is=="number"||typeof is=="bigint")return is=lg(""+is,us.mode,ps),is.return=us,is;if(typeof is=="object"&&is!==null){switch(is.$$typeof){case Ai:return ps=Nh(is.type,is.key,is.props,null,us.mode,ps),Fp(ps,is),ps.return=us,ps;case Ri:return is=cg(is,us.mode,ps),is.return=us,is;case as:return is=_f(is),As(us,is,ps)}if(Es(is)||bs(is))return is=Cf(is,us.mode,ps,null),is.return=us,is;if(typeof is.then=="function")return As(us,Hh(is),ps);if(is.$$typeof===Fi)return As(us,$h(us,is),ps);jh(us,is)}return null}function ms(us,is,ps,vs){var $s=is!==null?is.key:null;if(typeof ps=="string"&&ps!==""||typeof ps=="number"||typeof ps=="bigint")return $s!==null?null:Ui(us,is,""+ps,vs);if(typeof ps=="object"&&ps!==null){switch(ps.$$typeof){case Ai:return ps.key===$s?ns(us,is,ps,vs):null;case Ri:return ps.key===$s?hs(us,is,ps,vs):null;case as:return ps=_f(ps),ms(us,is,ps,vs)}if(Es(ps)||bs(ps))return $s!==null?null:Ts(us,is,ps,vs,null);if(typeof ps.then=="function")return ms(us,is,Hh(ps),vs);if(ps.$$typeof===Fi)return ms(us,is,$h(us,ps),vs);jh(us,ps)}return null}function ys(us,is,ps,vs,$s){if(typeof vs=="string"&&vs!==""||typeof vs=="number"||typeof vs=="bigint")return us=us.get(ps)||null,Ui(is,us,""+vs,$s);if(typeof vs=="object"&&vs!==null){switch(vs.$$typeof){case Ai:return us=us.get(vs.key===null?ps:vs.key)||null,ns(is,us,vs,$s);case Ri:return us=us.get(vs.key===null?ps:vs.key)||null,hs(is,us,vs,$s);case as:return vs=_f(vs),ys(us,is,ps,vs,$s)}if(Es(vs)||bs(vs))return us=us.get(ps)||null,Ts(is,us,vs,$s,null);if(typeof vs.then=="function")return ys(us,is,ps,Hh(vs),$s);if(vs.$$typeof===Fi)return ys(us,is,ps,$h(is,vs),$s);jh(is,vs)}return null}function Ds(us,is,ps,vs){for(var $s=null,Ks=null,Ns=is,Hs=is=0,Vs=null;Ns!==null&&Hs<ps.length;Hs++){Ns.index>Hs?(Vs=Ns,Ns=null):Vs=Ns.sibling;var Ws=ms(us,Ns,ps[Hs],vs);if(Ws===null){Ns===null&&(Ns=Vs);break}Gn&&Ns&&Ws.alternate===null&&Yn(us,Ns),is=Oi(Ws,is,Hs),Ks===null?$s=Ws:Ks.sibling=Ws,Ks=Ws,Ns=Vs}if(Hs===ps.length)return Zn(us,Ns),Gs&&Ru(us,Hs),$s;if(Ns===null){for(;Hs<ps.length;Hs++)Ns=As(us,ps[Hs],vs),Ns!==null&&(is=Oi(Ns,is,Hs),Ks===null?$s=Ns:Ks.sibling=Ns,Ks=Ns);return Gs&&Ru(us,Hs),$s}for(Ns=Ii(Ns);Hs<ps.length;Hs++)Vs=ys(Ns,us,Hs,ps[Hs],vs),Vs!==null&&(Gn&&Vs.alternate!==null&&Ns.delete(Vs.key===null?Hs:Vs.key),is=Oi(Vs,is,Hs),Ks===null?$s=Vs:Ks.sibling=Vs,Ks=Vs);return Gn&&Ns.forEach(function(gf){return Yn(us,gf)}),Gs&&Ru(us,Hs),$s}function Ls(us,is,ps,vs){if(ps==null)throw Error(d(151));for(var $s=null,Ks=null,Ns=is,Hs=is=0,Vs=null,Ws=ps.next();Ns!==null&&!Ws.done;Hs++,Ws=ps.next()){Ns.index>Hs?(Vs=Ns,Ns=null):Vs=Ns.sibling;var gf=ms(us,Ns,Ws.value,vs);if(gf===null){Ns===null&&(Ns=Vs);break}Gn&&Ns&&gf.alternate===null&&Yn(us,Ns),is=Oi(gf,is,Hs),Ks===null?$s=gf:Ks.sibling=gf,Ks=gf,Ns=Vs}if(Ws.done)return Zn(us,Ns),Gs&&Ru(us,Hs),$s;if(Ns===null){for(;!Ws.done;Hs++,Ws=ps.next())Ws=As(us,Ws.value,vs),Ws!==null&&(is=Oi(Ws,is,Hs),Ks===null?$s=Ws:Ks.sibling=Ws,Ks=Ws);return Gs&&Ru(us,Hs),$s}for(Ns=Ii(Ns);!Ws.done;Hs++,Ws=ps.next())Ws=ys(Ns,us,Hs,Ws.value,vs),Ws!==null&&(Gn&&Ws.alternate!==null&&Ns.delete(Ws.key===null?Hs:Ws.key),is=Oi(Ws,is,Hs),Ks===null?$s=Ws:Ks.sibling=Ws,Ks=Ws);return Gn&&Ns.forEach(function(gC){return Yn(us,gC)}),Gs&&Ru(us,Hs),$s}function ba(us,is,ps,vs){if(typeof ps=="object"&&ps!==null&&ps.type===Ni&&ps.key===null&&(ps=ps.props.children),typeof ps=="object"&&ps!==null){switch(ps.$$typeof){case Ai:e:{for(var $s=ps.key;is!==null;){if(is.key===$s){if($s=ps.type,$s===Ni){if(is.tag===7){Zn(us,is.sibling),vs=Di(is,ps.props.children),vs.return=us,us=vs;break e}}else if(is.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===as&&_f($s)===is.type){Zn(us,is.sibling),vs=Di(is,ps.props),Fp(vs,ps),vs.return=us,us=vs;break e}Zn(us,is);break}else Yn(us,is);is=is.sibling}ps.type===Ni?(vs=Cf(ps.props.children,us.mode,vs,ps.key),vs.return=us,us=vs):(vs=Nh(ps.type,ps.key,ps.props,null,us.mode,vs),Fp(vs,ps),vs.return=us,us=vs)}return Pi(us);case Ri:e:{for($s=ps.key;is!==null;){if(is.key===$s)if(is.tag===4&&is.stateNode.containerInfo===ps.containerInfo&&is.stateNode.implementation===ps.implementation){Zn(us,is.sibling),vs=Di(is,ps.children||[]),vs.return=us,us=vs;break e}else{Zn(us,is);break}else Yn(us,is);is=is.sibling}vs=cg(ps,us.mode,vs),vs.return=us,us=vs}return Pi(us);case as:return ps=_f(ps),ba(us,is,ps,vs)}if(Es(ps))return Ds(us,is,ps,vs);if(bs(ps)){if($s=bs(ps),typeof $s!="function")throw Error(d(150));return ps=$s.call(ps),Ls(us,is,ps,vs)}if(typeof ps.then=="function")return ba(us,is,Hh(ps),vs);if(ps.$$typeof===Fi)return ba(us,is,$h(us,ps),vs);jh(us,ps)}return typeof ps=="string"&&ps!==""||typeof ps=="number"||typeof ps=="bigint"?(ps=""+ps,is!==null&&is.tag===6?(Zn(us,is.sibling),vs=Di(is,ps),vs.return=us,us=vs):(Zn(us,is),vs=lg(ps,us.mode,vs),vs.return=us,us=vs),Pi(us)):Zn(us,is)}return function(us,is,ps,vs){try{jp=0;var $s=ba(us,is,ps,vs);return np=null,$s}catch(Ns){if(Ns===tp||Ns===Ph)throw Ns;var Ks=_c(29,Ns,null,us.mode);return Ks.lanes=vs,Ks.return=us,Ks}}}var Rf=oy(!0),iy=oy(!1),Ju=!1;function Sg(Gn){Gn.updateQueue={baseState:Gn.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xg(Gn,Yn){Gn=Gn.updateQueue,Yn.updateQueue===Gn&&(Yn.updateQueue={baseState:Gn.baseState,firstBaseUpdate:Gn.firstBaseUpdate,lastBaseUpdate:Gn.lastBaseUpdate,shared:Gn.shared,callbacks:null})}function _d(Gn){return{lane:Gn,tag:0,payload:null,callback:null,next:null}}function ef(Gn,Yn,Zn){var Ii=Gn.updateQueue;if(Ii===null)return null;if(Ii=Ii.shared,(Qs&2)!==0){var Di=Ii.pending;return Di===null?Yn.next=Yn:(Yn.next=Di.next,Di.next=Yn),Ii.pending=Yn,Yn=Dh(Gn),z1(Gn,null,Zn),Yn}return Rh(Gn,Ii,Yn,Zn),Dh(Gn)}function Up(Gn,Yn,Zn){if(Yn=Yn.updateQueue,Yn!==null&&(Yn=Yn.shared,(Zn&4194048)!==0)){var Ii=Yn.lanes;Ii&=Gn.pendingLanes,Zn|=Ii,Yn.lanes=Zn,Q0(Gn,Zn)}}function Cg(Gn,Yn){var Zn=Gn.updateQueue,Ii=Gn.alternate;if(Ii!==null&&(Ii=Ii.updateQueue,Zn===Ii)){var Di=null,Oi=null;if(Zn=Zn.firstBaseUpdate,Zn!==null){do{var Pi={lane:Zn.lane,tag:Zn.tag,payload:Zn.payload,callback:null,next:null};Oi===null?Di=Oi=Pi:Oi=Oi.next=Pi,Zn=Zn.next}while(Zn!==null);Oi===null?Di=Oi=Yn:Oi=Oi.next=Yn}else Di=Oi=Yn;Zn={baseState:Ii.baseState,firstBaseUpdate:Di,lastBaseUpdate:Oi,shared:Ii.shared,callbacks:Ii.callbacks},Gn.updateQueue=Zn;return}Gn=Zn.lastBaseUpdate,Gn===null?Zn.firstBaseUpdate=Yn:Gn.next=Yn,Zn.lastBaseUpdate=Yn}var vg=!1;function zp(){if(vg){var Gn=ep;if(Gn!==null)throw Gn}}function Vp(Gn,Yn,Zn,Ii){vg=!1;var Di=Gn.updateQueue;Ju=!1;var Oi=Di.firstBaseUpdate,Pi=Di.lastBaseUpdate,Ui=Di.shared.pending;if(Ui!==null){Di.shared.pending=null;var ns=Ui,hs=ns.next;ns.next=null,Pi===null?Oi=hs:Pi.next=hs,Pi=ns;var Ts=Gn.alternate;Ts!==null&&(Ts=Ts.updateQueue,Ui=Ts.lastBaseUpdate,Ui!==Pi&&(Ui===null?Ts.firstBaseUpdate=hs:Ui.next=hs,Ts.lastBaseUpdate=ns))}if(Oi!==null){var As=Di.baseState;Pi=0,Ts=hs=ns=null,Ui=Oi;do{var ms=Ui.lane&-536870913,ys=ms!==Ui.lane;if(ys?(zs&ms)===ms:(Ii&ms)===ms){ms!==0&&ms===Jf&&(vg=!0),Ts!==null&&(Ts=Ts.next={lane:0,tag:Ui.tag,payload:Ui.payload,callback:null,next:null});e:{var Ds=Gn,Ls=Ui;ms=Yn;var ba=Zn;switch(Ls.tag){case 1:if(Ds=Ls.payload,typeof Ds=="function"){As=Ds.call(ba,As,ms);break e}As=Ds;break e;case 3:Ds.flags=Ds.flags&-65537|128;case 0:if(Ds=Ls.payload,ms=typeof Ds=="function"?Ds.call(ba,As,ms):Ds,ms==null)break e;As=Qn({},As,ms);break e;case 2:Ju=!0}}ms=Ui.callback,ms!==null&&(Gn.flags|=64,ys&&(Gn.flags|=8192),ys=Di.callbacks,ys===null?Di.callbacks=[ms]:ys.push(ms))}else ys={lane:ms,tag:Ui.tag,payload:Ui.payload,callback:Ui.callback,next:null},Ts===null?(hs=Ts=ys,ns=As):Ts=Ts.next=ys,Pi|=ms;if(Ui=Ui.next,Ui===null){if(Ui=Di.shared.pending,Ui===null)break;ys=Ui,Ui=ys.next,ys.next=null,Di.lastBaseUpdate=ys,Di.shared.pending=null}}while(!0);Ts===null&&(ns=As),Di.baseState=ns,Di.firstBaseUpdate=hs,Di.lastBaseUpdate=Ts,Oi===null&&(Di.shared.lanes=0),sf|=Pi,Gn.lanes=Pi,Gn.memoizedState=As}}function sy(Gn,Yn){if(typeof Gn!="function")throw Error(d(191,Gn));Gn.call(Yn)}function ay(Gn,Yn){var Zn=Gn.callbacks;if(Zn!==null)for(Gn.callbacks=null,Gn=0;Gn<Zn.length;Gn++)sy(Zn[Gn],Yn)}var rp=es(null),Fh=es(0);function ly(Gn,Yn){Gn=Fu,Ki(Fh,Gn),Ki(rp,Yn),Fu=Gn|Yn.baseLanes}function Ag(){Ki(Fh,Fu),Ki(rp,rp.current)}function kg(){Fu=Fh.current,fs(rp),fs(Fh)}var eu=es(null),hu=null;function tf(Gn){var Yn=Gn.alternate;Ki(bl,bl.current&1),Ki(eu,Gn),hu===null&&(Yn===null||rp.current!==null||Yn.memoizedState!==null)&&(hu=Gn)}function wg(Gn){Ki(bl,bl.current),Ki(eu,Gn),hu===null&&(hu=Gn)}function cy(Gn){Gn.tag===22?(Ki(bl,bl.current),Ki(eu,Gn),hu===null&&(hu=Gn)):nf()}function nf(){Ki(bl,bl.current),Ki(eu,eu.current)}function tu(Gn){fs(eu),hu===Gn&&(hu=null),fs(bl)}var bl=es(0);function Uh(Gn){for(var Yn=Gn;Yn!==null;){if(Yn.tag===13){var Zn=Yn.memoizedState;if(Zn!==null&&(Zn=Zn.dehydrated,Zn===null||M0(Zn)||O0(Zn)))return Yn}else if(Yn.tag===19&&(Yn.memoizedProps.revealOrder==="forwards"||Yn.memoizedProps.revealOrder==="backwards"||Yn.memoizedProps.revealOrder==="unstable_legacy-backwards"||Yn.memoizedProps.revealOrder==="together")){if((Yn.flags&128)!==0)return Yn}else if(Yn.child!==null){Yn.child.return=Yn,Yn=Yn.child;continue}if(Yn===Gn)break;for(;Yn.sibling===null;){if(Yn.return===null||Yn.return===Gn)return null;Yn=Yn.return}Yn.sibling.return=Yn.return,Yn=Yn.sibling}return null}var Mu=0,Bs=null,ca=null,Sl=null,zh=!1,op=!1,Df=!1,Vh=0,Gp=0,ip=null,ix=0;function ml(){throw Error(d(321))}function _g(Gn,Yn){if(Yn===null)return!1;for(var Zn=0;Zn<Yn.length&&Zn<Gn.length;Zn++)if(!uc(Gn[Zn],Yn[Zn]))return!1;return!0}function Ig(Gn,Yn,Zn,Ii,Di,Oi){return Mu=Oi,Bs=Yn,Yn.memoizedState=null,Yn.updateQueue=null,Yn.lanes=0,rs.H=Gn===null||Gn.memoizedState===null?qy:Vg,Df=!1,Oi=Zn(Ii,Di),Df=!1,op&&(Oi=dy(Yn,Zn,Ii,Di)),uy(Gn),Oi}function uy(Gn){rs.H=Kp;var Yn=ca!==null&&ca.next!==null;if(Mu=0,Sl=ca=Bs=null,zh=!1,Gp=0,ip=null,Yn)throw Error(d(300));Gn===null||xl||(Gn=Gn.dependencies,Gn!==null&&Oh(Gn)&&(xl=!0))}function dy(Gn,Yn,Zn,Ii){Bs=Gn;var Di=0;do{if(op&&(ip=null),Gp=0,op=!1,25<=Di)throw Error(d(301));if(Di+=1,Sl=ca=null,Gn.updateQueue!=null){var Oi=Gn.updateQueue;Oi.lastEffect=null,Oi.events=null,Oi.stores=null,Oi.memoCache!=null&&(Oi.memoCache.index=0)}rs.H=Yy,Oi=Yn(Zn,Ii)}while(op);return Oi}function sx(){var Gn=rs.H,Yn=Gn.useState()[0];return Yn=typeof Yn.then=="function"?qp(Yn):Yn,Gn=Gn.useState()[0],(ca!==null?ca.memoizedState:null)!==Gn&&(Bs.flags|=1024),Yn}function Rg(){var Gn=Vh!==0;return Vh=0,Gn}function Dg(Gn,Yn,Zn){Yn.updateQueue=Gn.updateQueue,Yn.flags&=-2053,Gn.lanes&=~Zn}function Ng(Gn){if(zh){for(Gn=Gn.memoizedState;Gn!==null;){var Yn=Gn.queue;Yn!==null&&(Yn.pending=null),Gn=Gn.next}zh=!1}Mu=0,Sl=ca=Bs=null,op=!1,Gp=Vh=0,ip=null}function Vl(){var Gn={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sl===null?Bs.memoizedState=Sl=Gn:Sl=Sl.next=Gn,Sl}function El(){if(ca===null){var Gn=Bs.alternate;Gn=Gn!==null?Gn.memoizedState:null}else Gn=ca.next;var Yn=Sl===null?Bs.memoizedState:Sl.next;if(Yn!==null)Sl=Yn,ca=Gn;else{if(Gn===null)throw Bs.alternate===null?Error(d(467)):Error(d(310));ca=Gn,Gn={memoizedState:ca.memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},Sl===null?Bs.memoizedState=Sl=Gn:Sl=Sl.next=Gn}return Sl}function Gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qp(Gn){var Yn=Gp;return Gp+=1,ip===null&&(ip=[]),Gn=ty(ip,Gn,Yn),Yn=Bs,(Sl===null?Yn.memoizedState:Sl.next)===null&&(Yn=Yn.alternate,rs.H=Yn===null||Yn.memoizedState===null?qy:Vg),Gn}function qh(Gn){if(Gn!==null&&typeof Gn=="object"){if(typeof Gn.then=="function")return qp(Gn);if(Gn.$$typeof===Fi)return $l(Gn)}throw Error(d(438,String(Gn)))}function Mg(Gn){var Yn=null,Zn=Bs.updateQueue;if(Zn!==null&&(Yn=Zn.memoCache),Yn==null){var Ii=Bs.alternate;Ii!==null&&(Ii=Ii.updateQueue,Ii!==null&&(Ii=Ii.memoCache,Ii!=null&&(Yn={data:Ii.data.map(function(Di){return Di.slice()}),index:0})))}if(Yn==null&&(Yn={data:[],index:0}),Zn===null&&(Zn=Gh(),Bs.updateQueue=Zn),Zn.memoCache=Yn,Zn=Yn.data[Yn.index],Zn===void 0)for(Zn=Yn.data[Yn.index]=Array(Gn),Ii=0;Ii<Gn;Ii++)Zn[Ii]=Zi;return Yn.index++,Zn}function Ou(Gn,Yn){return typeof Yn=="function"?Yn(Gn):Yn}function Yh(Gn){var Yn=El();return Og(Yn,ca,Gn)}function Og(Gn,Yn,Zn){var Ii=Gn.queue;if(Ii===null)throw Error(d(311));Ii.lastRenderedReducer=Zn;var Di=Gn.baseQueue,Oi=Ii.pending;if(Oi!==null){if(Di!==null){var Pi=Di.next;Di.next=Oi.next,Oi.next=Pi}Yn.baseQueue=Di=Oi,Ii.pending=null}if(Oi=Gn.baseState,Di===null)Gn.memoizedState=Oi;else{Yn=Di.next;var Ui=Pi=null,ns=null,hs=Yn,Ts=!1;do{var As=hs.lane&-536870913;if(As!==hs.lane?(zs&As)===As:(Mu&As)===As){var ms=hs.revertLane;if(ms===0)ns!==null&&(ns=ns.next={lane:0,revertLane:0,gesture:null,action:hs.action,hasEagerState:hs.hasEagerState,eagerState:hs.eagerState,next:null}),As===Jf&&(Ts=!0);else if((Mu&ms)===ms){hs=hs.next,ms===Jf&&(Ts=!0);continue}else As={lane:0,revertLane:hs.revertLane,gesture:null,action:hs.action,hasEagerState:hs.hasEagerState,eagerState:hs.eagerState,next:null},ns===null?(Ui=ns=As,Pi=Oi):ns=ns.next=As,Bs.lanes|=ms,sf|=ms;As=hs.action,Df&&Zn(Oi,As),Oi=hs.hasEagerState?hs.eagerState:Zn(Oi,As)}else ms={lane:As,revertLane:hs.revertLane,gesture:hs.gesture,action:hs.action,hasEagerState:hs.hasEagerState,eagerState:hs.eagerState,next:null},ns===null?(Ui=ns=ms,Pi=Oi):ns=ns.next=ms,Bs.lanes|=As,sf|=As;hs=hs.next}while(hs!==null&&hs!==Yn);if(ns===null?Pi=Oi:ns.next=Ui,!uc(Oi,Gn.memoizedState)&&(xl=!0,Ts&&(Zn=ep,Zn!==null)))throw Zn;Gn.memoizedState=Oi,Gn.baseState=Pi,Gn.baseQueue=ns,Ii.lastRenderedState=Oi}return Di===null&&(Ii.lanes=0),[Gn.memoizedState,Ii.dispatch]}function $g(Gn){var Yn=El(),Zn=Yn.queue;if(Zn===null)throw Error(d(311));Zn.lastRenderedReducer=Gn;var Ii=Zn.dispatch,Di=Zn.pending,Oi=Yn.memoizedState;if(Di!==null){Zn.pending=null;var Pi=Di=Di.next;do Oi=Gn(Oi,Pi.action),Pi=Pi.next;while(Pi!==Di);uc(Oi,Yn.memoizedState)||(xl=!0),Yn.memoizedState=Oi,Yn.baseQueue===null&&(Yn.baseState=Oi),Zn.lastRenderedState=Oi}return[Oi,Ii]}function fy(Gn,Yn,Zn){var Ii=Bs,Di=El(),Oi=Gs;if(Oi){if(Zn===void 0)throw Error(d(407));Zn=Zn()}else Zn=Yn();var Pi=!uc((ca||Di).memoizedState,Zn);if(Pi&&(Di.memoizedState=Zn,xl=!0),Di=Di.queue,Bg(my.bind(null,Ii,Di,Gn),[Gn]),Di.getSnapshot!==Yn||Pi||Sl!==null&&Sl.memoizedState.tag&1){if(Ii.flags|=2048,sp(9,{destroy:void 0},hy.bind(null,Ii,Di,Zn,Yn),null),wa===null)throw Error(d(349));Oi||(Mu&127)!==0||py(Ii,Yn,Zn)}return Zn}function py(Gn,Yn,Zn){Gn.flags|=16384,Gn={getSnapshot:Yn,value:Zn},Yn=Bs.updateQueue,Yn===null?(Yn=Gh(),Bs.updateQueue=Yn,Yn.stores=[Gn]):(Zn=Yn.stores,Zn===null?Yn.stores=[Gn]:Zn.push(Gn))}function hy(Gn,Yn,Zn,Ii){Yn.value=Zn,Yn.getSnapshot=Ii,gy(Yn)&&by(Gn)}function my(Gn,Yn,Zn){return Zn(function(){gy(Yn)&&by(Gn)})}function gy(Gn){var Yn=Gn.getSnapshot;Gn=Gn.value;try{var Zn=Yn();return!uc(Gn,Zn)}catch{return!0}}function by(Gn){var Yn=xf(Gn,2);Yn!==null&&Zl(Yn,Gn,2)}function Lg(Gn){var Yn=Vl();if(typeof Gn=="function"){var Zn=Gn;if(Gn=Zn(),Df){Gl(!0);try{Zn()}finally{Gl(!1)}}}return Yn.memoizedState=Yn.baseState=Gn,Yn.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:Gn},Yn}function yy(Gn,Yn,Zn,Ii){return Gn.baseState=Zn,Og(Gn,ca,typeof Ii=="function"?Ii:Ou)}function ax(Gn,Yn,Zn,Ii,Di){if(Xh(Gn))throw Error(d(485));if(Gn=Yn.action,Gn!==null){var Oi={payload:Di,action:Gn,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Pi){Oi.listeners.push(Pi)}};rs.T!==null?Zn(!0):Oi.isTransition=!1,Ii(Oi),Zn=Yn.pending,Zn===null?(Oi.next=Yn.pending=Oi,Ey(Yn,Oi)):(Oi.next=Zn.next,Yn.pending=Zn.next=Oi)}}function Ey(Gn,Yn){var Zn=Yn.action,Ii=Yn.payload,Di=Gn.state;if(Yn.isTransition){var Oi=rs.T,Pi={};rs.T=Pi;try{var Ui=Zn(Di,Ii),ns=rs.S;ns!==null&&ns(Pi,Ui),Ty(Gn,Yn,Ui)}catch(hs){Pg(Gn,Yn,hs)}finally{Oi!==null&&Pi.types!==null&&(Oi.types=Pi.types),rs.T=Oi}}else try{Oi=Zn(Di,Ii),Ty(Gn,Yn,Oi)}catch(hs){Pg(Gn,Yn,hs)}}function Ty(Gn,Yn,Zn){Zn!==null&&typeof Zn=="object"&&typeof Zn.then=="function"?Zn.then(function(Ii){Sy(Gn,Yn,Ii)},function(Ii){return Pg(Gn,Yn,Ii)}):Sy(Gn,Yn,Zn)}function Sy(Gn,Yn,Zn){Yn.status="fulfilled",Yn.value=Zn,xy(Yn),Gn.state=Zn,Yn=Gn.pending,Yn!==null&&(Zn=Yn.next,Zn===Yn?Gn.pending=null:(Zn=Zn.next,Yn.next=Zn,Ey(Gn,Zn)))}function Pg(Gn,Yn,Zn){var Ii=Gn.pending;if(Gn.pending=null,Ii!==null){Ii=Ii.next;do Yn.status="rejected",Yn.reason=Zn,xy(Yn),Yn=Yn.next;while(Yn!==Ii)}Gn.action=null}function xy(Gn){Gn=Gn.listeners;for(var Yn=0;Yn<Gn.length;Yn++)(0,Gn[Yn])()}function Cy(Gn,Yn){return Yn}function vy(Gn,Yn){if(Gs){var Zn=wa.formState;if(Zn!==null){e:{var Ii=Bs;if(Gs){if(sl){t:{for(var Di=sl,Oi=pu;Di.nodeType!==8;){if(!Oi){Di=null;break t}if(Di=mu(Di.nextSibling),Di===null){Di=null;break t}}Oi=Di.data,Di=Oi==="F!"||Oi==="F"?Di:null}if(Di){sl=mu(Di.nextSibling),Ii=Di.data==="F!";break e}}Qu(Ii)}Ii=!1}Ii&&(Yn=Zn[0])}}return Zn=Vl(),Zn.memoizedState=Zn.baseState=Yn,Ii={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:Yn},Zn.queue=Ii,Zn=zy.bind(null,Bs,Ii),Ii.dispatch=Zn,Ii=Lg(!1),Oi=zg.bind(null,Bs,!1,Ii.queue),Ii=Vl(),Di={state:Yn,dispatch:null,action:Gn,pending:null},Ii.queue=Di,Zn=ax.bind(null,Bs,Di,Oi,Zn),Di.dispatch=Zn,Ii.memoizedState=Gn,[Yn,Zn,!1]}function Ay(Gn){var Yn=El();return ky(Yn,ca,Gn)}function ky(Gn,Yn,Zn){if(Yn=Og(Gn,Yn,Cy)[0],Gn=Yh(Ou)[0],typeof Yn=="object"&&Yn!==null&&typeof Yn.then=="function")try{var Ii=qp(Yn)}catch(Pi){throw Pi===tp?Ph:Pi}else Ii=Yn;Yn=El();var Di=Yn.queue,Oi=Di.dispatch;return Zn!==Yn.memoizedState&&(Bs.flags|=2048,sp(9,{destroy:void 0},lx.bind(null,Di,Zn),null)),[Ii,Oi,Gn]}function lx(Gn,Yn){Gn.action=Yn}function wy(Gn){var Yn=El(),Zn=ca;if(Zn!==null)return ky(Yn,Zn,Gn);El(),Yn=Yn.memoizedState,Zn=El();var Ii=Zn.queue.dispatch;return Zn.memoizedState=Gn,[Yn,Ii,!1]}function sp(Gn,Yn,Zn,Ii){return Gn={tag:Gn,create:Zn,deps:Ii,inst:Yn,next:null},Yn=Bs.updateQueue,Yn===null&&(Yn=Gh(),Bs.updateQueue=Yn),Zn=Yn.lastEffect,Zn===null?Yn.lastEffect=Gn.next=Gn:(Ii=Zn.next,Zn.next=Gn,Gn.next=Ii,Yn.lastEffect=Gn),Gn}function _y(){return El().memoizedState}function Kh(Gn,Yn,Zn,Ii){var Di=Vl();Bs.flags|=Gn,Di.memoizedState=sp(1|Yn,{destroy:void 0},Zn,Ii===void 0?null:Ii)}function Wh(Gn,Yn,Zn,Ii){var Di=El();Ii=Ii===void 0?null:Ii;var Oi=Di.memoizedState.inst;ca!==null&&Ii!==null&&_g(Ii,ca.memoizedState.deps)?Di.memoizedState=sp(Yn,Oi,Zn,Ii):(Bs.flags|=Gn,Di.memoizedState=sp(1|Yn,Oi,Zn,Ii))}function Iy(Gn,Yn){Kh(8390656,8,Gn,Yn)}function Bg(Gn,Yn){Wh(2048,8,Gn,Yn)}function cx(Gn){Bs.flags|=4;var Yn=Bs.updateQueue;if(Yn===null)Yn=Gh(),Bs.updateQueue=Yn,Yn.events=[Gn];else{var Zn=Yn.events;Zn===null?Yn.events=[Gn]:Zn.push(Gn)}}function Ry(Gn){var Yn=El().memoizedState;return cx({ref:Yn,nextImpl:Gn}),function(){if((Qs&2)!==0)throw Error(d(440));return Yn.impl.apply(void 0,arguments)}}function Dy(Gn,Yn){return Wh(4,2,Gn,Yn)}function Ny(Gn,Yn){return Wh(4,4,Gn,Yn)}function My(Gn,Yn){if(typeof Yn=="function"){Gn=Gn();var Zn=Yn(Gn);return function(){typeof Zn=="function"?Zn():Yn(null)}}if(Yn!=null)return Gn=Gn(),Yn.current=Gn,function(){Yn.current=null}}function Oy(Gn,Yn,Zn){Zn=Zn!=null?Zn.concat([Gn]):null,Wh(4,4,My.bind(null,Yn,Gn),Zn)}function Hg(){}function $y(Gn,Yn){var Zn=El();Yn=Yn===void 0?null:Yn;var Ii=Zn.memoizedState;return Yn!==null&&_g(Yn,Ii[1])?Ii[0]:(Zn.memoizedState=[Gn,Yn],Gn)}function Ly(Gn,Yn){var Zn=El();Yn=Yn===void 0?null:Yn;var Ii=Zn.memoizedState;if(Yn!==null&&_g(Yn,Ii[1]))return Ii[0];if(Ii=Gn(),Df){Gl(!0);try{Gn()}finally{Gl(!1)}}return Zn.memoizedState=[Ii,Yn],Ii}function jg(Gn,Yn,Zn){return Zn===void 0||(Mu&1073741824)!==0&&(zs&261930)===0?Gn.memoizedState=Yn:(Gn.memoizedState=Zn,Gn=PE(),Bs.lanes|=Gn,sf|=Gn,Zn)}function Py(Gn,Yn,Zn,Ii){return uc(Zn,Yn)?Zn:rp.current!==null?(Gn=jg(Gn,Zn,Ii),uc(Gn,Yn)||(xl=!0),Gn):(Mu&42)===0||(Mu&1073741824)!==0&&(zs&261930)===0?(xl=!0,Gn.memoizedState=Zn):(Gn=PE(),Bs.lanes|=Gn,sf|=Gn,Yn)}function By(Gn,Yn,Zn,Ii,Di){var Oi=cs.p;cs.p=Oi!==0&&8>Oi?Oi:8;var Pi=rs.T,Ui={};rs.T=Ui,zg(Gn,!1,Yn,Zn);try{var ns=Di(),hs=rs.S;if(hs!==null&&hs(Ui,ns),ns!==null&&typeof ns=="object"&&typeof ns.then=="function"){var Ts=ox(ns,Ii);Yp(Gn,Yn,Ts,ou(Gn))}else Yp(Gn,Yn,Ii,ou(Gn))}catch(As){Yp(Gn,Yn,{then:function(){},status:"rejected",reason:As},ou())}finally{cs.p=Oi,Pi!==null&&Ui.types!==null&&(Pi.types=Ui.types),rs.T=Pi}}function ux(){}function Fg(Gn,Yn,Zn,Ii){if(Gn.tag!==5)throw Error(d(476));var Di=Hy(Gn).queue;By(Gn,Di,Yn,ds,Zn===null?ux:function(){return jy(Gn),Zn(Ii)})}function Hy(Gn){var Yn=Gn.memoizedState;if(Yn!==null)return Yn;Yn={memoizedState:ds,baseState:ds,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:ds},next:null};var Zn={};return Yn.next={memoizedState:Zn,baseState:Zn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:Zn},next:null},Gn.memoizedState=Yn,Gn=Gn.alternate,Gn!==null&&(Gn.memoizedState=Yn),Yn}function jy(Gn){var Yn=Hy(Gn);Yn.next===null&&(Yn=Gn.alternate.memoizedState),Yp(Gn,Yn.next.queue,{},ou())}function Ug(){return $l(uh)}function Fy(){return El().memoizedState}function Uy(){return El().memoizedState}function dx(Gn){for(var Yn=Gn.return;Yn!==null;){switch(Yn.tag){case 24:case 3:var Zn=ou();Gn=_d(Zn);var Ii=ef(Yn,Gn,Zn);Ii!==null&&(Zl(Ii,Yn,Zn),Up(Ii,Yn,Zn)),Yn={cache:bg()},Gn.payload=Yn;return}Yn=Yn.return}}function fx(Gn,Yn,Zn){var Ii=ou();Zn={lane:Ii,revertLane:0,gesture:null,action:Zn,hasEagerState:!1,eagerState:null,next:null},Xh(Gn)?Vy(Yn,Zn):(Zn=sg(Gn,Yn,Zn,Ii),Zn!==null&&(Zl(Zn,Gn,Ii),Gy(Zn,Yn,Ii)))}function zy(Gn,Yn,Zn){var Ii=ou();Yp(Gn,Yn,Zn,Ii)}function Yp(Gn,Yn,Zn,Ii){var Di={lane:Ii,revertLane:0,gesture:null,action:Zn,hasEagerState:!1,eagerState:null,next:null};if(Xh(Gn))Vy(Yn,Di);else{var Oi=Gn.alternate;if(Gn.lanes===0&&(Oi===null||Oi.lanes===0)&&(Oi=Yn.lastRenderedReducer,Oi!==null))try{var Pi=Yn.lastRenderedState,Ui=Oi(Pi,Zn);if(Di.hasEagerState=!0,Di.eagerState=Ui,uc(Ui,Pi))return Rh(Gn,Yn,Di,0),wa===null&&Ih(),!1}catch{}if(Zn=sg(Gn,Yn,Di,Ii),Zn!==null)return Zl(Zn,Gn,Ii),Gy(Zn,Yn,Ii),!0}return!1}function zg(Gn,Yn,Zn,Ii){if(Ii={lane:2,revertLane:S0(),gesture:null,action:Ii,hasEagerState:!1,eagerState:null,next:null},Xh(Gn)){if(Yn)throw Error(d(479))}else Yn=sg(Gn,Zn,Ii,2),Yn!==null&&Zl(Yn,Gn,2)}function Xh(Gn){var Yn=Gn.alternate;return Gn===Bs||Yn!==null&&Yn===Bs}function Vy(Gn,Yn){op=zh=!0;var Zn=Gn.pending;Zn===null?Yn.next=Yn:(Yn.next=Zn.next,Zn.next=Yn),Gn.pending=Yn}function Gy(Gn,Yn,Zn){if((Zn&4194048)!==0){var Ii=Yn.lanes;Ii&=Gn.pendingLanes,Zn|=Ii,Yn.lanes=Zn,Q0(Gn,Zn)}}var Kp={readContext:$l,use:qh,useCallback:ml,useContext:ml,useEffect:ml,useImperativeHandle:ml,useLayoutEffect:ml,useInsertionEffect:ml,useMemo:ml,useReducer:ml,useRef:ml,useState:ml,useDebugValue:ml,useDeferredValue:ml,useTransition:ml,useSyncExternalStore:ml,useId:ml,useHostTransitionStatus:ml,useFormState:ml,useActionState:ml,useOptimistic:ml,useMemoCache:ml,useCacheRefresh:ml};Kp.useEffectEvent=ml;var qy={readContext:$l,use:qh,useCallback:function(Gn,Yn){return Vl().memoizedState=[Gn,Yn===void 0?null:Yn],Gn},useContext:$l,useEffect:Iy,useImperativeHandle:function(Gn,Yn,Zn){Zn=Zn!=null?Zn.concat([Gn]):null,Kh(4194308,4,My.bind(null,Yn,Gn),Zn)},useLayoutEffect:function(Gn,Yn){return Kh(4194308,4,Gn,Yn)},useInsertionEffect:function(Gn,Yn){Kh(4,2,Gn,Yn)},useMemo:function(Gn,Yn){var Zn=Vl();Yn=Yn===void 0?null:Yn;var Ii=Gn();if(Df){Gl(!0);try{Gn()}finally{Gl(!1)}}return Zn.memoizedState=[Ii,Yn],Ii},useReducer:function(Gn,Yn,Zn){var Ii=Vl();if(Zn!==void 0){var Di=Zn(Yn);if(Df){Gl(!0);try{Zn(Yn)}finally{Gl(!1)}}}else Di=Yn;return Ii.memoizedState=Ii.baseState=Di,Gn={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:Di},Ii.queue=Gn,Gn=Gn.dispatch=fx.bind(null,Bs,Gn),[Ii.memoizedState,Gn]},useRef:function(Gn){var Yn=Vl();return Gn={current:Gn},Yn.memoizedState=Gn},useState:function(Gn){Gn=Lg(Gn);var Yn=Gn.queue,Zn=zy.bind(null,Bs,Yn);return Yn.dispatch=Zn,[Gn.memoizedState,Zn]},useDebugValue:Hg,useDeferredValue:function(Gn,Yn){var Zn=Vl();return jg(Zn,Gn,Yn)},useTransition:function(){var Gn=Lg(!1);return Gn=By.bind(null,Bs,Gn.queue,!0,!1),Vl().memoizedState=Gn,[!1,Gn]},useSyncExternalStore:function(Gn,Yn,Zn){var Ii=Bs,Di=Vl();if(Gs){if(Zn===void 0)throw Error(d(407));Zn=Zn()}else{if(Zn=Yn(),wa===null)throw Error(d(349));(zs&127)!==0||py(Ii,Yn,Zn)}Di.memoizedState=Zn;var Oi={value:Zn,getSnapshot:Yn};return Di.queue=Oi,Iy(my.bind(null,Ii,Oi,Gn),[Gn]),Ii.flags|=2048,sp(9,{destroy:void 0},hy.bind(null,Ii,Oi,Zn,Yn),null),Zn},useId:function(){var Gn=Vl(),Yn=wa.identifierPrefix;if(Gs){var Zn=Cu,Ii=xu;Zn=(Ii&~(1<<32-Ta(Ii)-1)).toString(32)+Zn,Yn="_"+Yn+"R_"+Zn,Zn=Vh++,0<Zn&&(Yn+="H"+Zn.toString(32)),Yn+="_"}else Zn=ix++,Yn="_"+Yn+"r_"+Zn.toString(32)+"_";return Gn.memoizedState=Yn},useHostTransitionStatus:Ug,useFormState:vy,useActionState:vy,useOptimistic:function(Gn){var Yn=Vl();Yn.memoizedState=Yn.baseState=Gn;var Zn={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return Yn.queue=Zn,Yn=zg.bind(null,Bs,!0,Zn),Zn.dispatch=Yn,[Gn,Yn]},useMemoCache:Mg,useCacheRefresh:function(){return Vl().memoizedState=dx.bind(null,Bs)},useEffectEvent:function(Gn){var Yn=Vl(),Zn={impl:Gn};return Yn.memoizedState=Zn,function(){if((Qs&2)!==0)throw Error(d(440));return Zn.impl.apply(void 0,arguments)}}},Vg={readContext:$l,use:qh,useCallback:$y,useContext:$l,useEffect:Bg,useImperativeHandle:Oy,useInsertionEffect:Dy,useLayoutEffect:Ny,useMemo:Ly,useReducer:Yh,useRef:_y,useState:function(){return Yh(Ou)},useDebugValue:Hg,useDeferredValue:function(Gn,Yn){var Zn=El();return Py(Zn,ca.memoizedState,Gn,Yn)},useTransition:function(){var Gn=Yh(Ou)[0],Yn=El().memoizedState;return[typeof Gn=="boolean"?Gn:qp(Gn),Yn]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:Ug,useFormState:Ay,useActionState:Ay,useOptimistic:function(Gn,Yn){var Zn=El();return yy(Zn,ca,Gn,Yn)},useMemoCache:Mg,useCacheRefresh:Uy};Vg.useEffectEvent=Ry;var Yy={readContext:$l,use:qh,useCallback:$y,useContext:$l,useEffect:Bg,useImperativeHandle:Oy,useInsertionEffect:Dy,useLayoutEffect:Ny,useMemo:Ly,useReducer:$g,useRef:_y,useState:function(){return $g(Ou)},useDebugValue:Hg,useDeferredValue:function(Gn,Yn){var Zn=El();return ca===null?jg(Zn,Gn,Yn):Py(Zn,ca.memoizedState,Gn,Yn)},useTransition:function(){var Gn=$g(Ou)[0],Yn=El().memoizedState;return[typeof Gn=="boolean"?Gn:qp(Gn),Yn]},useSyncExternalStore:fy,useId:Fy,useHostTransitionStatus:Ug,useFormState:wy,useActionState:wy,useOptimistic:function(Gn,Yn){var Zn=El();return ca!==null?yy(Zn,ca,Gn,Yn):(Zn.baseState=Gn,[Gn,Zn.queue.dispatch])},useMemoCache:Mg,useCacheRefresh:Uy};Yy.useEffectEvent=Ry;function Gg(Gn,Yn,Zn,Ii){Yn=Gn.memoizedState,Zn=Zn(Ii,Yn),Zn=Zn==null?Yn:Qn({},Yn,Zn),Gn.memoizedState=Zn,Gn.lanes===0&&(Gn.updateQueue.baseState=Zn)}var qg={enqueueSetState:function(Gn,Yn,Zn){Gn=Gn._reactInternals;var Ii=ou(),Di=_d(Ii);Di.payload=Yn,Zn!=null&&(Di.callback=Zn),Yn=ef(Gn,Di,Ii),Yn!==null&&(Zl(Yn,Gn,Ii),Up(Yn,Gn,Ii))},enqueueReplaceState:function(Gn,Yn,Zn){Gn=Gn._reactInternals;var Ii=ou(),Di=_d(Ii);Di.tag=1,Di.payload=Yn,Zn!=null&&(Di.callback=Zn),Yn=ef(Gn,Di,Ii),Yn!==null&&(Zl(Yn,Gn,Ii),Up(Yn,Gn,Ii))},enqueueForceUpdate:function(Gn,Yn){Gn=Gn._reactInternals;var Zn=ou(),Ii=_d(Zn);Ii.tag=2,Yn!=null&&(Ii.callback=Yn),Yn=ef(Gn,Ii,Zn),Yn!==null&&(Zl(Yn,Gn,Zn),Up(Yn,Gn,Zn))}};function Ky(Gn,Yn,Zn,Ii,Di,Oi,Pi){return Gn=Gn.stateNode,typeof Gn.shouldComponentUpdate=="function"?Gn.shouldComponentUpdate(Ii,Oi,Pi):Yn.prototype&&Yn.prototype.isPureReactComponent?!Op(Zn,Ii)||!Op(Di,Oi):!0}function Wy(Gn,Yn,Zn,Ii){Gn=Yn.state,typeof Yn.componentWillReceiveProps=="function"&&Yn.componentWillReceiveProps(Zn,Ii),typeof Yn.UNSAFE_componentWillReceiveProps=="function"&&Yn.UNSAFE_componentWillReceiveProps(Zn,Ii),Yn.state!==Gn&&qg.enqueueReplaceState(Yn,Yn.state,null)}function Nf(Gn,Yn){var Zn=Yn;if("ref"in Yn){Zn={};for(var Ii in Yn)Ii!=="ref"&&(Zn[Ii]=Yn[Ii])}if(Gn=Gn.defaultProps){Zn===Yn&&(Zn=Qn({},Zn));for(var Di in Gn)Zn[Di]===void 0&&(Zn[Di]=Gn[Di])}return Zn}function Xy(Gn){_h(Gn)}function Qy(Gn){console.error(Gn)}function Zy(Gn){_h(Gn)}function Qh(Gn,Yn){try{var Zn=Gn.onUncaughtError;Zn(Yn.value,{componentStack:Yn.stack})}catch(Ii){setTimeout(function(){throw Ii})}}function Jy(Gn,Yn,Zn){try{var Ii=Gn.onCaughtError;Ii(Zn.value,{componentStack:Zn.stack,errorBoundary:Yn.tag===1?Yn.stateNode:null})}catch(Di){setTimeout(function(){throw Di})}}function Yg(Gn,Yn,Zn){return Zn=_d(Zn),Zn.tag=3,Zn.payload={element:null},Zn.callback=function(){Qh(Gn,Yn)},Zn}function eE(Gn){return Gn=_d(Gn),Gn.tag=3,Gn}function tE(Gn,Yn,Zn,Ii){var Di=Zn.type.getDerivedStateFromError;if(typeof Di=="function"){var Oi=Ii.value;Gn.payload=function(){return Di(Oi)},Gn.callback=function(){Jy(Yn,Zn,Ii)}}var Pi=Zn.stateNode;Pi!==null&&typeof Pi.componentDidCatch=="function"&&(Gn.callback=function(){Jy(Yn,Zn,Ii),typeof Di!="function"&&(af===null?af=new Set([this]):af.add(this));var Ui=Ii.stack;this.componentDidCatch(Ii.value,{componentStack:Ui!==null?Ui:""})})}function hx(Gn,Yn,Zn,Ii,Di){if(Zn.flags|=32768,Ii!==null&&typeof Ii=="object"&&typeof Ii.then=="function"){if(Yn=Zn.alternate,Yn!==null&&Zf(Yn,Zn,Di,!0),Zn=eu.current,Zn!==null){switch(Zn.tag){case 31:case 13:return hu===null?dm():Zn.alternate===null&&gl===0&&(gl=3),Zn.flags&=-257,Zn.flags|=65536,Zn.lanes=Di,Ii===Bh?Zn.flags|=16384:(Yn=Zn.updateQueue,Yn===null?Zn.updateQueue=new Set([Ii]):Yn.add(Ii),y0(Gn,Ii,Di)),!1;case 22:return Zn.flags|=65536,Ii===Bh?Zn.flags|=16384:(Yn=Zn.updateQueue,Yn===null?(Yn={transitions:null,markerInstances:null,retryQueue:new Set([Ii])},Zn.updateQueue=Yn):(Zn=Yn.retryQueue,Zn===null?Yn.retryQueue=new Set([Ii]):Zn.add(Ii)),y0(Gn,Ii,Di)),!1}throw Error(d(435,Zn.tag))}return y0(Gn,Ii,Di),dm(),!1}if(Gs)return Yn=eu.current,Yn!==null?((Yn.flags&65536)===0&&(Yn.flags|=256),Yn.flags|=65536,Yn.lanes=Di,Ii!==fg&&(Gn=Error(d(422),{cause:Ii}),Pp(uu(Gn,Zn)))):(Ii!==fg&&(Yn=Error(d(423),{cause:Ii}),Pp(uu(Yn,Zn))),Gn=Gn.current.alternate,Gn.flags|=65536,Di&=-Di,Gn.lanes|=Di,Ii=uu(Ii,Zn),Di=Yg(Gn.stateNode,Ii,Di),Cg(Gn,Di),gl!==4&&(gl=2)),!1;var Oi=Error(d(520),{cause:Ii});if(Oi=uu(Oi,Zn),nh===null?nh=[Oi]:nh.push(Oi),gl!==4&&(gl=2),Yn===null)return!0;Ii=uu(Ii,Zn),Zn=Yn;do{switch(Zn.tag){case 3:return Zn.flags|=65536,Gn=Di&-Di,Zn.lanes|=Gn,Gn=Yg(Zn.stateNode,Ii,Gn),Cg(Zn,Gn),!1;case 1:if(Yn=Zn.type,Oi=Zn.stateNode,(Zn.flags&128)===0&&(typeof Yn.getDerivedStateFromError=="function"||Oi!==null&&typeof Oi.componentDidCatch=="function"&&(af===null||!af.has(Oi))))return Zn.flags|=65536,Di&=-Di,Zn.lanes|=Di,Di=eE(Di),tE(Di,Gn,Zn,Ii),Cg(Zn,Di),!1}Zn=Zn.return}while(Zn!==null);return!1}var Kg=Error(d(461)),xl=!1;function Ll(Gn,Yn,Zn,Ii){Yn.child=Gn===null?iy(Yn,null,Zn,Ii):Rf(Yn,Gn.child,Zn,Ii)}function nE(Gn,Yn,Zn,Ii,Di){Zn=Zn.render;var Oi=Yn.ref;if("ref"in Ii){var Pi={};for(var Ui in Ii)Ui!=="ref"&&(Pi[Ui]=Ii[Ui])}else Pi=Ii;return kf(Yn),Ii=Ig(Gn,Yn,Zn,Pi,Oi,Di),Ui=Rg(),Gn!==null&&!xl?(Dg(Gn,Yn,Di),$u(Gn,Yn,Di)):(Gs&&Ui&&ug(Yn),Yn.flags|=1,Ll(Gn,Yn,Ii,Di),Yn.child)}function rE(Gn,Yn,Zn,Ii,Di){if(Gn===null){var Oi=Zn.type;return typeof Oi=="function"&&!ag(Oi)&&Oi.defaultProps===void 0&&Zn.compare===null?(Yn.tag=15,Yn.type=Oi,oE(Gn,Yn,Oi,Ii,Di)):(Gn=Nh(Zn.type,null,Ii,Yn,Yn.mode,Di),Gn.ref=Yn.ref,Gn.return=Yn,Yn.child=Gn)}if(Oi=Gn.child,!n0(Gn,Di)){var Pi=Oi.memoizedProps;if(Zn=Zn.compare,Zn=Zn!==null?Zn:Op,Zn(Pi,Ii)&&Gn.ref===Yn.ref)return $u(Gn,Yn,Di)}return Yn.flags|=1,Gn=Iu(Oi,Ii),Gn.ref=Yn.ref,Gn.return=Yn,Yn.child=Gn}function oE(Gn,Yn,Zn,Ii,Di){if(Gn!==null){var Oi=Gn.memoizedProps;if(Op(Oi,Ii)&&Gn.ref===Yn.ref)if(xl=!1,Yn.pendingProps=Ii=Oi,n0(Gn,Di))(Gn.flags&131072)!==0&&(xl=!0);else return Yn.lanes=Gn.lanes,$u(Gn,Yn,Di)}return Wg(Gn,Yn,Zn,Ii,Di)}function iE(Gn,Yn,Zn,Ii){var Di=Ii.children,Oi=Gn!==null?Gn.memoizedState:null;if(Gn===null&&Yn.stateNode===null&&(Yn.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Ii.mode==="hidden"){if((Yn.flags&128)!==0){if(Oi=Oi!==null?Oi.baseLanes|Zn:Zn,Gn!==null){for(Ii=Yn.child=Gn.child,Di=0;Ii!==null;)Di=Di|Ii.lanes|Ii.childLanes,Ii=Ii.sibling;Ii=Di&~Oi}else Ii=0,Yn.child=null;return sE(Gn,Yn,Oi,Zn,Ii)}if((Zn&536870912)!==0)Yn.memoizedState={baseLanes:0,cachePool:null},Gn!==null&&Lh(Yn,Oi!==null?Oi.cachePool:null),Oi!==null?ly(Yn,Oi):Ag(),cy(Yn);else return Ii=Yn.lanes=536870912,sE(Gn,Yn,Oi!==null?Oi.baseLanes|Zn:Zn,Zn,Ii)}else Oi!==null?(Lh(Yn,Oi.cachePool),ly(Yn,Oi),nf(),Yn.memoizedState=null):(Gn!==null&&Lh(Yn,null),Ag(),nf());return Ll(Gn,Yn,Di,Zn),Yn.child}function Wp(Gn,Yn){return Gn!==null&&Gn.tag===22||Yn.stateNode!==null||(Yn.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Yn.sibling}function sE(Gn,Yn,Zn,Ii,Di){var Oi=Eg();return Oi=Oi===null?null:{parent:Tl._currentValue,pool:Oi},Yn.memoizedState={baseLanes:Zn,cachePool:Oi},Gn!==null&&Lh(Yn,null),Ag(),cy(Yn),Gn!==null&&Zf(Gn,Yn,Ii,!0),Yn.childLanes=Di,null}function Zh(Gn,Yn){return Yn=tm({mode:Yn.mode,children:Yn.children},Gn.mode),Yn.ref=Gn.ref,Gn.child=Yn,Yn.return=Gn,Yn}function aE(Gn,Yn,Zn){return Rf(Yn,Gn.child,null,Zn),Gn=Zh(Yn,Yn.pendingProps),Gn.flags|=2,tu(Yn),Yn.memoizedState=null,Gn}function mx(Gn,Yn,Zn){var Ii=Yn.pendingProps,Di=(Yn.flags&128)!==0;if(Yn.flags&=-129,Gn===null){if(Gs){if(Ii.mode==="hidden")return Gn=Zh(Yn,Ii),Yn.lanes=536870912,Wp(null,Gn);if(wg(Yn),(Gn=sl)?(Gn=ET(Gn,pu),Gn=Gn!==null&&Gn.data==="&"?Gn:null,Gn!==null&&(Yn.memoizedState={dehydrated:Gn,treeContext:Wu!==null?{id:xu,overflow:Cu}:null,retryLane:536870912,hydrationErrors:null},Zn=G1(Gn),Zn.return=Yn,Yn.child=Zn,Ol=Yn,sl=null)):Gn=null,Gn===null)throw Qu(Yn);return Yn.lanes=536870912,null}return Zh(Yn,Ii)}var Oi=Gn.memoizedState;if(Oi!==null){var Pi=Oi.dehydrated;if(wg(Yn),Di)if(Yn.flags&256)Yn.flags&=-257,Yn=aE(Gn,Yn,Zn);else if(Yn.memoizedState!==null)Yn.child=Gn.child,Yn.flags|=128,Yn=null;else throw Error(d(558));else if(xl||Zf(Gn,Yn,Zn,!1),Di=(Zn&Gn.childLanes)!==0,xl||Di){if(Ii=wa,Ii!==null&&(Pi=Z0(Ii,Zn),Pi!==0&&Pi!==Oi.retryLane))throw Oi.retryLane=Pi,xf(Gn,Pi),Zl(Ii,Gn,Pi),Kg;dm(),Yn=aE(Gn,Yn,Zn)}else Gn=Oi.treeContext,sl=mu(Pi.nextSibling),Ol=Yn,Gs=!0,Xu=null,pu=!1,Gn!==null&&K1(Yn,Gn),Yn=Zh(Yn,Ii),Yn.flags|=4096;return Yn}return Gn=Iu(Gn.child,{mode:Ii.mode,children:Ii.children}),Gn.ref=Yn.ref,Yn.child=Gn,Gn.return=Yn,Gn}function Jh(Gn,Yn){var Zn=Yn.ref;if(Zn===null)Gn!==null&&Gn.ref!==null&&(Yn.flags|=4194816);else{if(typeof Zn!="function"&&typeof Zn!="object")throw Error(d(284));(Gn===null||Gn.ref!==Zn)&&(Yn.flags|=4194816)}}function Wg(Gn,Yn,Zn,Ii,Di){return kf(Yn),Zn=Ig(Gn,Yn,Zn,Ii,void 0,Di),Ii=Rg(),Gn!==null&&!xl?(Dg(Gn,Yn,Di),$u(Gn,Yn,Di)):(Gs&&Ii&&ug(Yn),Yn.flags|=1,Ll(Gn,Yn,Zn,Di),Yn.child)}function lE(Gn,Yn,Zn,Ii,Di,Oi){return kf(Yn),Yn.updateQueue=null,Zn=dy(Yn,Ii,Zn,Di),uy(Gn),Ii=Rg(),Gn!==null&&!xl?(Dg(Gn,Yn,Oi),$u(Gn,Yn,Oi)):(Gs&&Ii&&ug(Yn),Yn.flags|=1,Ll(Gn,Yn,Zn,Oi),Yn.child)}function cE(Gn,Yn,Zn,Ii,Di){if(kf(Yn),Yn.stateNode===null){var Oi=Kf,Pi=Zn.contextType;typeof Pi=="object"&&Pi!==null&&(Oi=$l(Pi)),Oi=new Zn(Ii,Oi),Yn.memoizedState=Oi.state!==null&&Oi.state!==void 0?Oi.state:null,Oi.updater=qg,Yn.stateNode=Oi,Oi._reactInternals=Yn,Oi=Yn.stateNode,Oi.props=Ii,Oi.state=Yn.memoizedState,Oi.refs={},Sg(Yn),Pi=Zn.contextType,Oi.context=typeof Pi=="object"&&Pi!==null?$l(Pi):Kf,Oi.state=Yn.memoizedState,Pi=Zn.getDerivedStateFromProps,typeof Pi=="function"&&(Gg(Yn,Zn,Pi,Ii),Oi.state=Yn.memoizedState),typeof Zn.getDerivedStateFromProps=="function"||typeof Oi.getSnapshotBeforeUpdate=="function"||typeof Oi.UNSAFE_componentWillMount!="function"&&typeof Oi.componentWillMount!="function"||(Pi=Oi.state,typeof Oi.componentWillMount=="function"&&Oi.componentWillMount(),typeof Oi.UNSAFE_componentWillMount=="function"&&Oi.UNSAFE_componentWillMount(),Pi!==Oi.state&&qg.enqueueReplaceState(Oi,Oi.state,null),Vp(Yn,Ii,Oi,Di),zp(),Oi.state=Yn.memoizedState),typeof Oi.componentDidMount=="function"&&(Yn.flags|=4194308),Ii=!0}else if(Gn===null){Oi=Yn.stateNode;var Ui=Yn.memoizedProps,ns=Nf(Zn,Ui);Oi.props=ns;var hs=Oi.context,Ts=Zn.contextType;Pi=Kf,typeof Ts=="object"&&Ts!==null&&(Pi=$l(Ts));var As=Zn.getDerivedStateFromProps;Ts=typeof As=="function"||typeof Oi.getSnapshotBeforeUpdate=="function",Ui=Yn.pendingProps!==Ui,Ts||typeof Oi.UNSAFE_componentWillReceiveProps!="function"&&typeof Oi.componentWillReceiveProps!="function"||(Ui||hs!==Pi)&&Wy(Yn,Oi,Ii,Pi),Ju=!1;var ms=Yn.memoizedState;Oi.state=ms,Vp(Yn,Ii,Oi,Di),zp(),hs=Yn.memoizedState,Ui||ms!==hs||Ju?(typeof As=="function"&&(Gg(Yn,Zn,As,Ii),hs=Yn.memoizedState),(ns=Ju||Ky(Yn,Zn,ns,Ii,ms,hs,Pi))?(Ts||typeof Oi.UNSAFE_componentWillMount!="function"&&typeof Oi.componentWillMount!="function"||(typeof Oi.componentWillMount=="function"&&Oi.componentWillMount(),typeof Oi.UNSAFE_componentWillMount=="function"&&Oi.UNSAFE_componentWillMount()),typeof Oi.componentDidMount=="function"&&(Yn.flags|=4194308)):(typeof Oi.componentDidMount=="function"&&(Yn.flags|=4194308),Yn.memoizedProps=Ii,Yn.memoizedState=hs),Oi.props=Ii,Oi.state=hs,Oi.context=Pi,Ii=ns):(typeof Oi.componentDidMount=="function"&&(Yn.flags|=4194308),Ii=!1)}else{Oi=Yn.stateNode,xg(Gn,Yn),Pi=Yn.memoizedProps,Ts=Nf(Zn,Pi),Oi.props=Ts,As=Yn.pendingProps,ms=Oi.context,hs=Zn.contextType,ns=Kf,typeof hs=="object"&&hs!==null&&(ns=$l(hs)),Ui=Zn.getDerivedStateFromProps,(hs=typeof Ui=="function"||typeof Oi.getSnapshotBeforeUpdate=="function")||typeof Oi.UNSAFE_componentWillReceiveProps!="function"&&typeof Oi.componentWillReceiveProps!="function"||(Pi!==As||ms!==ns)&&Wy(Yn,Oi,Ii,ns),Ju=!1,ms=Yn.memoizedState,Oi.state=ms,Vp(Yn,Ii,Oi,Di),zp();var ys=Yn.memoizedState;Pi!==As||ms!==ys||Ju||Gn!==null&&Gn.dependencies!==null&&Oh(Gn.dependencies)?(typeof Ui=="function"&&(Gg(Yn,Zn,Ui,Ii),ys=Yn.memoizedState),(Ts=Ju||Ky(Yn,Zn,Ts,Ii,ms,ys,ns)||Gn!==null&&Gn.dependencies!==null&&Oh(Gn.dependencies))?(hs||typeof Oi.UNSAFE_componentWillUpdate!="function"&&typeof Oi.componentWillUpdate!="function"||(typeof Oi.componentWillUpdate=="function"&&Oi.componentWillUpdate(Ii,ys,ns),typeof Oi.UNSAFE_componentWillUpdate=="function"&&Oi.UNSAFE_componentWillUpdate(Ii,ys,ns)),typeof Oi.componentDidUpdate=="function"&&(Yn.flags|=4),typeof Oi.getSnapshotBeforeUpdate=="function"&&(Yn.flags|=1024)):(typeof Oi.componentDidUpdate!="function"||Pi===Gn.memoizedProps&&ms===Gn.memoizedState||(Yn.flags|=4),typeof Oi.getSnapshotBeforeUpdate!="function"||Pi===Gn.memoizedProps&&ms===Gn.memoizedState||(Yn.flags|=1024),Yn.memoizedProps=Ii,Yn.memoizedState=ys),Oi.props=Ii,Oi.state=ys,Oi.context=ns,Ii=Ts):(typeof Oi.componentDidUpdate!="function"||Pi===Gn.memoizedProps&&ms===Gn.memoizedState||(Yn.flags|=4),typeof Oi.getSnapshotBeforeUpdate!="function"||Pi===Gn.memoizedProps&&ms===Gn.memoizedState||(Yn.flags|=1024),Ii=!1)}return Oi=Ii,Jh(Gn,Yn),Ii=(Yn.flags&128)!==0,Oi||Ii?(Oi=Yn.stateNode,Zn=Ii&&typeof Zn.getDerivedStateFromError!="function"?null:Oi.render(),Yn.flags|=1,Gn!==null&&Ii?(Yn.child=Rf(Yn,Gn.child,null,Di),Yn.child=Rf(Yn,null,Zn,Di)):Ll(Gn,Yn,Zn,Di),Yn.memoizedState=Oi.state,Gn=Yn.child):Gn=$u(Gn,Yn,Di),Gn}function uE(Gn,Yn,Zn,Ii){return vf(),Yn.flags|=256,Ll(Gn,Yn,Zn,Ii),Yn.child}var Xg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(Gn){return{baseLanes:Gn,cachePool:_b()}}function Zg(Gn,Yn,Zn){return Gn=Gn!==null?Gn.childLanes&~Zn:0,Yn&&(Gn|=ru),Gn}function dE(Gn,Yn,Zn){var Ii=Yn.pendingProps,Di=!1,Oi=(Yn.flags&128)!==0,Pi;if((Pi=Oi)||(Pi=Gn!==null&&Gn.memoizedState===null?!1:(bl.current&2)!==0),Pi&&(Di=!0,Yn.flags&=-129),Pi=(Yn.flags&32)!==0,Yn.flags&=-33,Gn===null){if(Gs){if(Di?tf(Yn):nf(),(Gn=sl)?(Gn=ET(Gn,pu),Gn=Gn!==null&&Gn.data!=="&"?Gn:null,Gn!==null&&(Yn.memoizedState={dehydrated:Gn,treeContext:Wu!==null?{id:xu,overflow:Cu}:null,retryLane:536870912,hydrationErrors:null},Zn=G1(Gn),Zn.return=Yn,Yn.child=Zn,Ol=Yn,sl=null)):Gn=null,Gn===null)throw Qu(Yn);return O0(Gn)?Yn.lanes=32:Yn.lanes=536870912,null}var Ui=Ii.children;return Ii=Ii.fallback,Di?(nf(),Di=Yn.mode,Ui=tm({mode:"hidden",children:Ui},Di),Ii=Cf(Ii,Di,Zn,null),Ui.return=Yn,Ii.return=Yn,Ui.sibling=Ii,Yn.child=Ui,Ii=Yn.child,Ii.memoizedState=Qg(Zn),Ii.childLanes=Zg(Gn,Pi,Zn),Yn.memoizedState=Xg,Wp(null,Ii)):(tf(Yn),Jg(Yn,Ui))}var ns=Gn.memoizedState;if(ns!==null&&(Ui=ns.dehydrated,Ui!==null)){if(Oi)Yn.flags&256?(tf(Yn),Yn.flags&=-257,Yn=e0(Gn,Yn,Zn)):Yn.memoizedState!==null?(nf(),Yn.child=Gn.child,Yn.flags|=128,Yn=null):(nf(),Ui=Ii.fallback,Di=Yn.mode,Ii=tm({mode:"visible",children:Ii.children},Di),Ui=Cf(Ui,Di,Zn,null),Ui.flags|=2,Ii.return=Yn,Ui.return=Yn,Ii.sibling=Ui,Yn.child=Ii,Rf(Yn,Gn.child,null,Zn),Ii=Yn.child,Ii.memoizedState=Qg(Zn),Ii.childLanes=Zg(Gn,Pi,Zn),Yn.memoizedState=Xg,Yn=Wp(null,Ii));else if(tf(Yn),O0(Ui)){if(Pi=Ui.nextSibling&&Ui.nextSibling.dataset,Pi)var hs=Pi.dgst;Pi=hs,Ii=Error(d(419)),Ii.stack="",Ii.digest=Pi,Pp({value:Ii,source:null,stack:null}),Yn=e0(Gn,Yn,Zn)}else if(xl||Zf(Gn,Yn,Zn,!1),Pi=(Zn&Gn.childLanes)!==0,xl||Pi){if(Pi=wa,Pi!==null&&(Ii=Z0(Pi,Zn),Ii!==0&&Ii!==ns.retryLane))throw ns.retryLane=Ii,xf(Gn,Ii),Zl(Pi,Gn,Ii),Kg;M0(Ui)||dm(),Yn=e0(Gn,Yn,Zn)}else M0(Ui)?(Yn.flags|=192,Yn.child=Gn.child,Yn=null):(Gn=ns.treeContext,sl=mu(Ui.nextSibling),Ol=Yn,Gs=!0,Xu=null,pu=!1,Gn!==null&&K1(Yn,Gn),Yn=Jg(Yn,Ii.children),Yn.flags|=4096);return Yn}return Di?(nf(),Ui=Ii.fallback,Di=Yn.mode,ns=Gn.child,hs=ns.sibling,Ii=Iu(ns,{mode:"hidden",children:Ii.children}),Ii.subtreeFlags=ns.subtreeFlags&65011712,hs!==null?Ui=Iu(hs,Ui):(Ui=Cf(Ui,Di,Zn,null),Ui.flags|=2),Ui.return=Yn,Ii.return=Yn,Ii.sibling=Ui,Yn.child=Ii,Wp(null,Ii),Ii=Yn.child,Ui=Gn.child.memoizedState,Ui===null?Ui=Qg(Zn):(Di=Ui.cachePool,Di!==null?(ns=Tl._currentValue,Di=Di.parent!==ns?{parent:ns,pool:ns}:Di):Di=_b(),Ui={baseLanes:Ui.baseLanes|Zn,cachePool:Di}),Ii.memoizedState=Ui,Ii.childLanes=Zg(Gn,Pi,Zn),Yn.memoizedState=Xg,Wp(Gn.child,Ii)):(tf(Yn),Zn=Gn.child,Gn=Zn.sibling,Zn=Iu(Zn,{mode:"visible",children:Ii.children}),Zn.return=Yn,Zn.sibling=null,Gn!==null&&(Pi=Yn.deletions,Pi===null?(Yn.deletions=[Gn],Yn.flags|=16):Pi.push(Gn)),Yn.child=Zn,Yn.memoizedState=null,Zn)}function Jg(Gn,Yn){return Yn=tm({mode:"visible",children:Yn},Gn.mode),Yn.return=Gn,Gn.child=Yn}function tm(Gn,Yn){return Gn=_c(22,Gn,null,Yn),Gn.lanes=0,Gn}function e0(Gn,Yn,Zn){return Rf(Yn,Gn.child,null,Zn),Gn=Jg(Yn,Yn.pendingProps.children),Gn.flags|=2,Yn.memoizedState=null,Gn}function fE(Gn,Yn,Zn){Gn.lanes|=Yn;var Ii=Gn.alternate;Ii!==null&&(Ii.lanes|=Yn),mg(Gn.return,Yn,Zn)}function t0(Gn,Yn,Zn,Ii,Di,Oi){var Pi=Gn.memoizedState;Pi===null?Gn.memoizedState={isBackwards:Yn,rendering:null,renderingStartTime:0,last:Ii,tail:Zn,tailMode:Di,treeForkCount:Oi}:(Pi.isBackwards=Yn,Pi.rendering=null,Pi.renderingStartTime=0,Pi.last=Ii,Pi.tail=Zn,Pi.tailMode=Di,Pi.treeForkCount=Oi)}function pE(Gn,Yn,Zn){var Ii=Yn.pendingProps,Di=Ii.revealOrder,Oi=Ii.tail;Ii=Ii.children;var Pi=bl.current,Ui=(Pi&2)!==0;if(Ui?(Pi=Pi&1|2,Yn.flags|=128):Pi&=1,Ki(bl,Pi),Ll(Gn,Yn,Ii,Zn),Ii=Gs?Lp:0,!Ui&&Gn!==null&&(Gn.flags&128)!==0)e:for(Gn=Yn.child;Gn!==null;){if(Gn.tag===13)Gn.memoizedState!==null&&fE(Gn,Zn,Yn);else if(Gn.tag===19)fE(Gn,Zn,Yn);else if(Gn.child!==null){Gn.child.return=Gn,Gn=Gn.child;continue}if(Gn===Yn)break e;for(;Gn.sibling===null;){if(Gn.return===null||Gn.return===Yn)break e;Gn=Gn.return}Gn.sibling.return=Gn.return,Gn=Gn.sibling}switch(Di){case"forwards":for(Zn=Yn.child,Di=null;Zn!==null;)Gn=Zn.alternate,Gn!==null&&Uh(Gn)===null&&(Di=Zn),Zn=Zn.sibling;Zn=Di,Zn===null?(Di=Yn.child,Yn.child=null):(Di=Zn.sibling,Zn.sibling=null),t0(Yn,!1,Di,Zn,Oi,Ii);break;case"backwards":case"unstable_legacy-backwards":for(Zn=null,Di=Yn.child,Yn.child=null;Di!==null;){if(Gn=Di.alternate,Gn!==null&&Uh(Gn)===null){Yn.child=Di;break}Gn=Di.sibling,Di.sibling=Zn,Zn=Di,Di=Gn}t0(Yn,!0,Zn,null,Oi,Ii);break;case"together":t0(Yn,!1,null,null,void 0,Ii);break;default:Yn.memoizedState=null}return Yn.child}function $u(Gn,Yn,Zn){if(Gn!==null&&(Yn.dependencies=Gn.dependencies),sf|=Yn.lanes,(Zn&Yn.childLanes)===0)if(Gn!==null){if(Zf(Gn,Yn,Zn,!1),(Zn&Yn.childLanes)===0)return null}else return null;if(Gn!==null&&Yn.child!==Gn.child)throw Error(d(153));if(Yn.child!==null){for(Gn=Yn.child,Zn=Iu(Gn,Gn.pendingProps),Yn.child=Zn,Zn.return=Yn;Gn.sibling!==null;)Gn=Gn.sibling,Zn=Zn.sibling=Iu(Gn,Gn.pendingProps),Zn.return=Yn;Zn.sibling=null}return Yn.child}function n0(Gn,Yn){return(Gn.lanes&Yn)!==0?!0:(Gn=Gn.dependencies,!!(Gn!==null&&Oh(Gn)))}function gx(Gn,Yn,Zn){switch(Yn.tag){case 3:Os(Yn,Yn.stateNode.containerInfo),Zu(Yn,Tl,Gn.memoizedState.cache),vf();break;case 27:case 5:Xs(Yn);break;case 4:Os(Yn,Yn.stateNode.containerInfo);break;case 10:Zu(Yn,Yn.type,Yn.memoizedProps.value);break;case 31:if(Yn.memoizedState!==null)return Yn.flags|=128,wg(Yn),null;break;case 13:var Ii=Yn.memoizedState;if(Ii!==null)return Ii.dehydrated!==null?(tf(Yn),Yn.flags|=128,null):(Zn&Yn.child.childLanes)!==0?dE(Gn,Yn,Zn):(tf(Yn),Gn=$u(Gn,Yn,Zn),Gn!==null?Gn.sibling:null);tf(Yn);break;case 19:var Di=(Gn.flags&128)!==0;if(Ii=(Zn&Yn.childLanes)!==0,Ii||(Zf(Gn,Yn,Zn,!1),Ii=(Zn&Yn.childLanes)!==0),Di){if(Ii)return pE(Gn,Yn,Zn);Yn.flags|=128}if(Di=Yn.memoizedState,Di!==null&&(Di.rendering=null,Di.tail=null,Di.lastEffect=null),Ki(bl,bl.current),Ii)break;return null;case 22:return Yn.lanes=0,iE(Gn,Yn,Zn,Yn.pendingProps);case 24:Zu(Yn,Tl,Gn.memoizedState.cache)}return $u(Gn,Yn,Zn)}function hE(Gn,Yn,Zn){if(Gn!==null)if(Gn.memoizedProps!==Yn.pendingProps)xl=!0;else{if(!n0(Gn,Zn)&&(Yn.flags&128)===0)return xl=!1,gx(Gn,Yn,Zn);xl=(Gn.flags&131072)!==0}else xl=!1,Gs&&(Yn.flags&1048576)!==0&&Y1(Yn,Lp,Yn.index);switch(Yn.lanes=0,Yn.tag){case 16:e:{var Ii=Yn.pendingProps;if(Gn=_f(Yn.elementType),Yn.type=Gn,typeof Gn=="function")ag(Gn)?(Ii=Nf(Gn,Ii),Yn.tag=1,Yn=cE(null,Yn,Gn,Ii,Zn)):(Yn.tag=0,Yn=Wg(null,Yn,Gn,Ii,Zn));else{if(Gn!=null){var Di=Gn.$$typeof;if(Di===qi){Yn.tag=11,Yn=nE(null,Yn,Gn,Ii,Zn);break e}else if(Di===Xi){Yn.tag=14,Yn=rE(null,Yn,Gn,Ii,Zn);break e}}throw Yn=ss(Gn)||Gn,Error(d(306,Yn,""))}}return Yn;case 0:return Wg(Gn,Yn,Yn.type,Yn.pendingProps,Zn);case 1:return Ii=Yn.type,Di=Nf(Ii,Yn.pendingProps),cE(Gn,Yn,Ii,Di,Zn);case 3:e:{if(Os(Yn,Yn.stateNode.containerInfo),Gn===null)throw Error(d(387));Ii=Yn.pendingProps;var Oi=Yn.memoizedState;Di=Oi.element,xg(Gn,Yn),Vp(Yn,Ii,null,Zn);var Pi=Yn.memoizedState;if(Ii=Pi.cache,Zu(Yn,Tl,Ii),Ii!==Oi.cache&&gg(Yn,[Tl],Zn,!0),zp(),Ii=Pi.element,Oi.isDehydrated)if(Oi={element:Ii,isDehydrated:!1,cache:Pi.cache},Yn.updateQueue.baseState=Oi,Yn.memoizedState=Oi,Yn.flags&256){Yn=uE(Gn,Yn,Ii,Zn);break e}else if(Ii!==Di){Di=uu(Error(d(424)),Yn),Pp(Di),Yn=uE(Gn,Yn,Ii,Zn);break e}else for(Gn=Yn.stateNode.containerInfo,Gn.nodeType===9?Gn=Gn.body:Gn=Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn,sl=mu(Gn.firstChild),Ol=Yn,Gs=!0,Xu=null,pu=!0,Zn=iy(Yn,null,Ii,Zn),Yn.child=Zn;Zn;)Zn.flags=Zn.flags&-3|4096,Zn=Zn.sibling;else{if(vf(),Ii===Di){Yn=$u(Gn,Yn,Zn);break e}Ll(Gn,Yn,Ii,Zn)}Yn=Yn.child}return Yn;case 26:return Jh(Gn,Yn),Gn===null?(Zn=kT(Yn.type,null,Yn.pendingProps,null))?Yn.memoizedState=Zn:Gs||(Zn=Yn.type,Gn=Yn.pendingProps,Ii=ym(Is.current).createElement(Zn),Ii[Ml]=Yn,Ii[ql]=Gn,Bl(Ii,Zn,Gn),wl(Ii),Yn.stateNode=Ii):Yn.memoizedState=kT(Yn.type,Gn.memoizedProps,Yn.pendingProps,Gn.memoizedState),null;case 27:return Xs(Yn),Gn===null&&Gs&&(Ii=Yn.stateNode=xT(Yn.type,Yn.pendingProps,Is.current),Ol=Yn,pu=!0,Di=sl,df(Yn.type)?($0=Di,sl=mu(Ii.firstChild)):sl=Di),Ll(Gn,Yn,Yn.pendingProps.children,Zn),Jh(Gn,Yn),Gn===null&&(Yn.flags|=4194304),Yn.child;case 5:return Gn===null&&Gs&&((Di=Ii=sl)&&(Ii=qx(Ii,Yn.type,Yn.pendingProps,pu),Ii!==null?(Yn.stateNode=Ii,Ol=Yn,sl=mu(Ii.firstChild),pu=!1,Di=!0):Di=!1),Di||Qu(Yn)),Xs(Yn),Di=Yn.type,Oi=Yn.pendingProps,Pi=Gn!==null?Gn.memoizedProps:null,Ii=Oi.children,R0(Di,Oi)?Ii=null:Pi!==null&&R0(Di,Pi)&&(Yn.flags|=32),Yn.memoizedState!==null&&(Di=Ig(Gn,Yn,sx,null,null,Zn),uh._currentValue=Di),Jh(Gn,Yn),Ll(Gn,Yn,Ii,Zn),Yn.child;case 6:return Gn===null&&Gs&&((Gn=Zn=sl)&&(Zn=Yx(Zn,Yn.pendingProps,pu),Zn!==null?(Yn.stateNode=Zn,Ol=Yn,sl=null,Gn=!0):Gn=!1),Gn||Qu(Yn)),null;case 13:return dE(Gn,Yn,Zn);case 4:return Os(Yn,Yn.stateNode.containerInfo),Ii=Yn.pendingProps,Gn===null?Yn.child=Rf(Yn,null,Ii,Zn):Ll(Gn,Yn,Ii,Zn),Yn.child;case 11:return nE(Gn,Yn,Yn.type,Yn.pendingProps,Zn);case 7:return Ll(Gn,Yn,Yn.pendingProps,Zn),Yn.child;case 8:return Ll(Gn,Yn,Yn.pendingProps.children,Zn),Yn.child;case 12:return Ll(Gn,Yn,Yn.pendingProps.children,Zn),Yn.child;case 10:return Ii=Yn.pendingProps,Zu(Yn,Yn.type,Ii.value),Ll(Gn,Yn,Ii.children,Zn),Yn.child;case 9:return Di=Yn.type._context,Ii=Yn.pendingProps.children,kf(Yn),Di=$l(Di),Ii=Ii(Di),Yn.flags|=1,Ll(Gn,Yn,Ii,Zn),Yn.child;case 14:return rE(Gn,Yn,Yn.type,Yn.pendingProps,Zn);case 15:return oE(Gn,Yn,Yn.type,Yn.pendingProps,Zn);case 19:return pE(Gn,Yn,Zn);case 31:return mx(Gn,Yn,Zn);case 22:return iE(Gn,Yn,Zn,Yn.pendingProps);case 24:return kf(Yn),Ii=$l(Tl),Gn===null?(Di=Eg(),Di===null&&(Di=wa,Oi=bg(),Di.pooledCache=Oi,Oi.refCount++,Oi!==null&&(Di.pooledCacheLanes|=Zn),Di=Oi),Yn.memoizedState={parent:Ii,cache:Di},Sg(Yn),Zu(Yn,Tl,Di)):((Gn.lanes&Zn)!==0&&(xg(Gn,Yn),Vp(Yn,null,null,Zn),zp()),Di=Gn.memoizedState,Oi=Yn.memoizedState,Di.parent!==Ii?(Di={parent:Ii,cache:Ii},Yn.memoizedState=Di,Yn.lanes===0&&(Yn.memoizedState=Yn.updateQueue.baseState=Di),Zu(Yn,Tl,Ii)):(Ii=Oi.cache,Zu(Yn,Tl,Ii),Ii!==Di.cache&&gg(Yn,[Tl],Zn,!0))),Ll(Gn,Yn,Yn.pendingProps.children,Zn),Yn.child;case 29:throw Yn.pendingProps}throw Error(d(156,Yn.tag))}function Lu(Gn){Gn.flags|=4}function r0(Gn,Yn,Zn,Ii,Di){if((Yn=(Gn.mode&32)!==0)&&(Yn=!1),Yn){if(Gn.flags|=16777216,(Di&335544128)===Di)if(Gn.stateNode.complete)Gn.flags|=8192;else if(FE())Gn.flags|=8192;else throw If=Bh,Tg}else Gn.flags&=-16777217}function mE(Gn,Yn){if(Yn.type!=="stylesheet"||(Yn.state.loading&4)!==0)Gn.flags&=-16777217;else if(Gn.flags|=16777216,!DT(Yn))if(FE())Gn.flags|=8192;else throw If=Bh,Tg}function nm(Gn,Yn){Yn!==null&&(Gn.flags|=4),Gn.flags&16384&&(Yn=Gn.tag!==22?W0():536870912,Gn.lanes|=Yn,up|=Yn)}function Xp(Gn,Yn){if(!Gs)switch(Gn.tailMode){case"hidden":Yn=Gn.tail;for(var Zn=null;Yn!==null;)Yn.alternate!==null&&(Zn=Yn),Yn=Yn.sibling;Zn===null?Gn.tail=null:Zn.sibling=null;break;case"collapsed":Zn=Gn.tail;for(var Ii=null;Zn!==null;)Zn.alternate!==null&&(Ii=Zn),Zn=Zn.sibling;Ii===null?Yn||Gn.tail===null?Gn.tail=null:Gn.tail.sibling=null:Ii.sibling=null}}function ul(Gn){var Yn=Gn.alternate!==null&&Gn.alternate.child===Gn.child,Zn=0,Ii=0;if(Yn)for(var Di=Gn.child;Di!==null;)Zn|=Di.lanes|Di.childLanes,Ii|=Di.subtreeFlags&65011712,Ii|=Di.flags&65011712,Di.return=Gn,Di=Di.sibling;else for(Di=Gn.child;Di!==null;)Zn|=Di.lanes|Di.childLanes,Ii|=Di.subtreeFlags,Ii|=Di.flags,Di.return=Gn,Di=Di.sibling;return Gn.subtreeFlags|=Ii,Gn.childLanes=Zn,Yn}function bx(Gn,Yn,Zn){var Ii=Yn.pendingProps;switch(dg(Yn),Yn.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ul(Yn),null;case 1:return ul(Yn),null;case 3:return Zn=Yn.stateNode,Ii=null,Gn!==null&&(Ii=Gn.memoizedState.cache),Yn.memoizedState.cache!==Ii&&(Yn.flags|=2048),Nu(Tl),Rs(),Zn.pendingContext&&(Zn.context=Zn.pendingContext,Zn.pendingContext=null),(Gn===null||Gn.child===null)&&(Qf(Yn)?Lu(Yn):Gn===null||Gn.memoizedState.isDehydrated&&(Yn.flags&256)===0||(Yn.flags|=1024,pg())),ul(Yn),null;case 26:var Di=Yn.type,Oi=Yn.memoizedState;return Gn===null?(Lu(Yn),Oi!==null?(ul(Yn),mE(Yn,Oi)):(ul(Yn),r0(Yn,Di,null,Ii,Zn))):Oi?Oi!==Gn.memoizedState?(Lu(Yn),ul(Yn),mE(Yn,Oi)):(ul(Yn),Yn.flags&=-16777217):(Gn=Gn.memoizedProps,Gn!==Ii&&Lu(Yn),ul(Yn),r0(Yn,Di,Gn,Ii,Zn)),null;case 27:if(_a(Yn),Zn=Is.current,Di=Yn.type,Gn!==null&&Yn.stateNode!=null)Gn.memoizedProps!==Ii&&Lu(Yn);else{if(!Ii){if(Yn.stateNode===null)throw Error(d(166));return ul(Yn),null}Gn=ws.current,Qf(Yn)?W1(Yn):(Gn=xT(Di,Ii,Zn),Yn.stateNode=Gn,Lu(Yn))}return ul(Yn),null;case 5:if(_a(Yn),Di=Yn.type,Gn!==null&&Yn.stateNode!=null)Gn.memoizedProps!==Ii&&Lu(Yn);else{if(!Ii){if(Yn.stateNode===null)throw Error(d(166));return ul(Yn),null}if(Oi=ws.current,Qf(Yn))W1(Yn);else{var Pi=ym(Is.current);switch(Oi){case 1:Oi=Pi.createElementNS("http://www.w3.org/2000/svg",Di);break;case 2:Oi=Pi.createElementNS("http://www.w3.org/1998/Math/MathML",Di);break;default:switch(Di){case"svg":Oi=Pi.createElementNS("http://www.w3.org/2000/svg",Di);break;case"math":Oi=Pi.createElementNS("http://www.w3.org/1998/Math/MathML",Di);break;case"script":Oi=Pi.createElement("div"),Oi.innerHTML="<script><\/script>",Oi=Oi.removeChild(Oi.firstChild);break;case"select":Oi=typeof Ii.is=="string"?Pi.createElement("select",{is:Ii.is}):Pi.createElement("select"),Ii.multiple?Oi.multiple=!0:Ii.size&&(Oi.size=Ii.size);break;default:Oi=typeof Ii.is=="string"?Pi.createElement(Di,{is:Ii.is}):Pi.createElement(Di)}}Oi[Ml]=Yn,Oi[ql]=Ii;e:for(Pi=Yn.child;Pi!==null;){if(Pi.tag===5||Pi.tag===6)Oi.appendChild(Pi.stateNode);else if(Pi.tag!==4&&Pi.tag!==27&&Pi.child!==null){Pi.child.return=Pi,Pi=Pi.child;continue}if(Pi===Yn)break e;for(;Pi.sibling===null;){if(Pi.return===null||Pi.return===Yn)break e;Pi=Pi.return}Pi.sibling.return=Pi.return,Pi=Pi.sibling}Yn.stateNode=Oi;e:switch(Bl(Oi,Di,Ii),Di){case"button":case"input":case"select":case"textarea":Ii=!!Ii.autoFocus;break e;case"img":Ii=!0;break e;default:Ii=!1}Ii&&Lu(Yn)}}return ul(Yn),r0(Yn,Yn.type,Gn===null?null:Gn.memoizedProps,Yn.pendingProps,Zn),null;case 6:if(Gn&&Yn.stateNode!=null)Gn.memoizedProps!==Ii&&Lu(Yn);else{if(typeof Ii!="string"&&Yn.stateNode===null)throw Error(d(166));if(Gn=Is.current,Qf(Yn)){if(Gn=Yn.stateNode,Zn=Yn.memoizedProps,Ii=null,Di=Ol,Di!==null)switch(Di.tag){case 27:case 5:Ii=Di.memoizedProps}Gn[Ml]=Yn,Gn=!!(Gn.nodeValue===Zn||Ii!==null&&Ii.suppressHydrationWarning===!0||dT(Gn.nodeValue,Zn)),Gn||Qu(Yn,!0)}else Gn=ym(Gn).createTextNode(Ii),Gn[Ml]=Yn,Yn.stateNode=Gn}return ul(Yn),null;case 31:if(Zn=Yn.memoizedState,Gn===null||Gn.memoizedState!==null){if(Ii=Qf(Yn),Zn!==null){if(Gn===null){if(!Ii)throw Error(d(318));if(Gn=Yn.memoizedState,Gn=Gn!==null?Gn.dehydrated:null,!Gn)throw Error(d(557));Gn[Ml]=Yn}else vf(),(Yn.flags&128)===0&&(Yn.memoizedState=null),Yn.flags|=4;ul(Yn),Gn=!1}else Zn=pg(),Gn!==null&&Gn.memoizedState!==null&&(Gn.memoizedState.hydrationErrors=Zn),Gn=!0;if(!Gn)return Yn.flags&256?(tu(Yn),Yn):(tu(Yn),null);if((Yn.flags&128)!==0)throw Error(d(558))}return ul(Yn),null;case 13:if(Ii=Yn.memoizedState,Gn===null||Gn.memoizedState!==null&&Gn.memoizedState.dehydrated!==null){if(Di=Qf(Yn),Ii!==null&&Ii.dehydrated!==null){if(Gn===null){if(!Di)throw Error(d(318));if(Di=Yn.memoizedState,Di=Di!==null?Di.dehydrated:null,!Di)throw Error(d(317));Di[Ml]=Yn}else vf(),(Yn.flags&128)===0&&(Yn.memoizedState=null),Yn.flags|=4;ul(Yn),Di=!1}else Di=pg(),Gn!==null&&Gn.memoizedState!==null&&(Gn.memoizedState.hydrationErrors=Di),Di=!0;if(!Di)return Yn.flags&256?(tu(Yn),Yn):(tu(Yn),null)}return tu(Yn),(Yn.flags&128)!==0?(Yn.lanes=Zn,Yn):(Zn=Ii!==null,Gn=Gn!==null&&Gn.memoizedState!==null,Zn&&(Ii=Yn.child,Di=null,Ii.alternate!==null&&Ii.alternate.memoizedState!==null&&Ii.alternate.memoizedState.cachePool!==null&&(Di=Ii.alternate.memoizedState.cachePool.pool),Oi=null,Ii.memoizedState!==null&&Ii.memoizedState.cachePool!==null&&(Oi=Ii.memoizedState.cachePool.pool),Oi!==Di&&(Ii.flags|=2048)),Zn!==Gn&&Zn&&(Yn.child.flags|=8192),nm(Yn,Yn.updateQueue),ul(Yn),null);case 4:return Rs(),Gn===null&&A0(Yn.stateNode.containerInfo),ul(Yn),null;case 10:return Nu(Yn.type),ul(Yn),null;case 19:if(fs(bl),Ii=Yn.memoizedState,Ii===null)return ul(Yn),null;if(Di=(Yn.flags&128)!==0,Oi=Ii.rendering,Oi===null)if(Di)Xp(Ii,!1);else{if(gl!==0||Gn!==null&&(Gn.flags&128)!==0)for(Gn=Yn.child;Gn!==null;){if(Oi=Uh(Gn),Oi!==null){for(Yn.flags|=128,Xp(Ii,!1),Gn=Oi.updateQueue,Yn.updateQueue=Gn,nm(Yn,Gn),Yn.subtreeFlags=0,Gn=Zn,Zn=Yn.child;Zn!==null;)V1(Zn,Gn),Zn=Zn.sibling;return Ki(bl,bl.current&1|2),Gs&&Ru(Yn,Ii.treeForkCount),Yn.child}Gn=Gn.sibling}Ii.tail!==null&&Rl()>lm&&(Yn.flags|=128,Di=!0,Xp(Ii,!1),Yn.lanes=4194304)}else{if(!Di)if(Gn=Uh(Oi),Gn!==null){if(Yn.flags|=128,Di=!0,Gn=Gn.updateQueue,Yn.updateQueue=Gn,nm(Yn,Gn),Xp(Ii,!0),Ii.tail===null&&Ii.tailMode==="hidden"&&!Oi.alternate&&!Gs)return ul(Yn),null}else 2*Rl()-Ii.renderingStartTime>lm&&Zn!==536870912&&(Yn.flags|=128,Di=!0,Xp(Ii,!1),Yn.lanes=4194304);Ii.isBackwards?(Oi.sibling=Yn.child,Yn.child=Oi):(Gn=Ii.last,Gn!==null?Gn.sibling=Oi:Yn.child=Oi,Ii.last=Oi)}return Ii.tail!==null?(Gn=Ii.tail,Ii.rendering=Gn,Ii.tail=Gn.sibling,Ii.renderingStartTime=Rl(),Gn.sibling=null,Zn=bl.current,Ki(bl,Di?Zn&1|2:Zn&1),Gs&&Ru(Yn,Ii.treeForkCount),Gn):(ul(Yn),null);case 22:case 23:return tu(Yn),kg(),Ii=Yn.memoizedState!==null,Gn!==null?Gn.memoizedState!==null!==Ii&&(Yn.flags|=8192):Ii&&(Yn.flags|=8192),Ii?(Zn&536870912)!==0&&(Yn.flags&128)===0&&(ul(Yn),Yn.subtreeFlags&6&&(Yn.flags|=8192)):ul(Yn),Zn=Yn.updateQueue,Zn!==null&&nm(Yn,Zn.retryQueue),Zn=null,Gn!==null&&Gn.memoizedState!==null&&Gn.memoizedState.cachePool!==null&&(Zn=Gn.memoizedState.cachePool.pool),Ii=null,Yn.memoizedState!==null&&Yn.memoizedState.cachePool!==null&&(Ii=Yn.memoizedState.cachePool.pool),Ii!==Zn&&(Yn.flags|=2048),Gn!==null&&fs(wf),null;case 24:return Zn=null,Gn!==null&&(Zn=Gn.memoizedState.cache),Yn.memoizedState.cache!==Zn&&(Yn.flags|=2048),Nu(Tl),ul(Yn),null;case 25:return null;case 30:return null}throw Error(d(156,Yn.tag))}function yx(Gn,Yn){switch(dg(Yn),Yn.tag){case 1:return Gn=Yn.flags,Gn&65536?(Yn.flags=Gn&-65537|128,Yn):null;case 3:return Nu(Tl),Rs(),Gn=Yn.flags,(Gn&65536)!==0&&(Gn&128)===0?(Yn.flags=Gn&-65537|128,Yn):null;case 26:case 27:case 5:return _a(Yn),null;case 31:if(Yn.memoizedState!==null){if(tu(Yn),Yn.alternate===null)throw Error(d(340));vf()}return Gn=Yn.flags,Gn&65536?(Yn.flags=Gn&-65537|128,Yn):null;case 13:if(tu(Yn),Gn=Yn.memoizedState,Gn!==null&&Gn.dehydrated!==null){if(Yn.alternate===null)throw Error(d(340));vf()}return Gn=Yn.flags,Gn&65536?(Yn.flags=Gn&-65537|128,Yn):null;case 19:return fs(bl),null;case 4:return Rs(),null;case 10:return Nu(Yn.type),null;case 22:case 23:return tu(Yn),kg(),Gn!==null&&fs(wf),Gn=Yn.flags,Gn&65536?(Yn.flags=Gn&-65537|128,Yn):null;case 24:return Nu(Tl),null;case 25:return null;default:return null}}function gE(Gn,Yn){switch(dg(Yn),Yn.tag){case 3:Nu(Tl),Rs();break;case 26:case 27:case 5:_a(Yn);break;case 4:Rs();break;case 31:Yn.memoizedState!==null&&tu(Yn);break;case 13:tu(Yn);break;case 19:fs(bl);break;case 10:Nu(Yn.type);break;case 22:case 23:tu(Yn),kg(),Gn!==null&&fs(wf);break;case 24:Nu(Tl)}}function Qp(Gn,Yn){try{var Zn=Yn.updateQueue,Ii=Zn!==null?Zn.lastEffect:null;if(Ii!==null){var Di=Ii.next;Zn=Di;do{if((Zn.tag&Gn)===Gn){Ii=void 0;var Oi=Zn.create,Pi=Zn.inst;Ii=Oi(),Pi.destroy=Ii}Zn=Zn.next}while(Zn!==Di)}}catch(Ui){Js(Yn,Yn.return,Ui)}}function rf(Gn,Yn,Zn){try{var Ii=Yn.updateQueue,Di=Ii!==null?Ii.lastEffect:null;if(Di!==null){var Oi=Di.next;Ii=Oi;do{if((Ii.tag&Gn)===Gn){var Pi=Ii.inst,Ui=Pi.destroy;if(Ui!==void 0){Pi.destroy=void 0,Di=Yn;var ns=Zn,hs=Ui;try{hs()}catch(Ts){Js(Di,ns,Ts)}}}Ii=Ii.next}while(Ii!==Oi)}}catch(Ts){Js(Yn,Yn.return,Ts)}}function bE(Gn){var Yn=Gn.updateQueue;if(Yn!==null){var Zn=Gn.stateNode;try{ay(Yn,Zn)}catch(Ii){Js(Gn,Gn.return,Ii)}}}function yE(Gn,Yn,Zn){Zn.props=Nf(Gn.type,Gn.memoizedProps),Zn.state=Gn.memoizedState;try{Zn.componentWillUnmount()}catch(Ii){Js(Gn,Yn,Ii)}}function Zp(Gn,Yn){try{var Zn=Gn.ref;if(Zn!==null){switch(Gn.tag){case 26:case 27:case 5:var Ii=Gn.stateNode;break;case 30:Ii=Gn.stateNode;break;default:Ii=Gn.stateNode}typeof Zn=="function"?Gn.refCleanup=Zn(Ii):Zn.current=Ii}}catch(Di){Js(Gn,Yn,Di)}}function vu(Gn,Yn){var Zn=Gn.ref,Ii=Gn.refCleanup;if(Zn!==null)if(typeof Ii=="function")try{Ii()}catch(Di){Js(Gn,Yn,Di)}finally{Gn.refCleanup=null,Gn=Gn.alternate,Gn!=null&&(Gn.refCleanup=null)}else if(typeof Zn=="function")try{Zn(null)}catch(Di){Js(Gn,Yn,Di)}else Zn.current=null}function EE(Gn){var Yn=Gn.type,Zn=Gn.memoizedProps,Ii=Gn.stateNode;try{e:switch(Yn){case"button":case"input":case"select":case"textarea":Zn.autoFocus&&Ii.focus();break e;case"img":Zn.src?Ii.src=Zn.src:Zn.srcSet&&(Ii.srcset=Zn.srcSet)}}catch(Di){Js(Gn,Gn.return,Di)}}function o0(Gn,Yn,Zn){try{var Ii=Gn.stateNode;jx(Ii,Gn.type,Zn,Yn),Ii[ql]=Yn}catch(Di){Js(Gn,Gn.return,Di)}}function TE(Gn){return Gn.tag===5||Gn.tag===3||Gn.tag===26||Gn.tag===27&&df(Gn.type)||Gn.tag===4}function i0(Gn){e:for(;;){for(;Gn.sibling===null;){if(Gn.return===null||TE(Gn.return))return null;Gn=Gn.return}for(Gn.sibling.return=Gn.return,Gn=Gn.sibling;Gn.tag!==5&&Gn.tag!==6&&Gn.tag!==18;){if(Gn.tag===27&&df(Gn.type)||Gn.flags&2||Gn.child===null||Gn.tag===4)continue e;Gn.child.return=Gn,Gn=Gn.child}if(!(Gn.flags&2))return Gn.stateNode}}function s0(Gn,Yn,Zn){var Ii=Gn.tag;if(Ii===5||Ii===6)Gn=Gn.stateNode,Yn?(Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn).insertBefore(Gn,Yn):(Yn=Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn,Yn.appendChild(Gn),Zn=Zn._reactRootContainer,Zn!=null||Yn.onclick!==null||(Yn.onclick=wu));else if(Ii!==4&&(Ii===27&&df(Gn.type)&&(Zn=Gn.stateNode,Yn=null),Gn=Gn.child,Gn!==null))for(s0(Gn,Yn,Zn),Gn=Gn.sibling;Gn!==null;)s0(Gn,Yn,Zn),Gn=Gn.sibling}function om(Gn,Yn,Zn){var Ii=Gn.tag;if(Ii===5||Ii===6)Gn=Gn.stateNode,Yn?Zn.insertBefore(Gn,Yn):Zn.appendChild(Gn);else if(Ii!==4&&(Ii===27&&df(Gn.type)&&(Zn=Gn.stateNode),Gn=Gn.child,Gn!==null))for(om(Gn,Yn,Zn),Gn=Gn.sibling;Gn!==null;)om(Gn,Yn,Zn),Gn=Gn.sibling}function SE(Gn){var Yn=Gn.stateNode,Zn=Gn.memoizedProps;try{for(var Ii=Gn.type,Di=Yn.attributes;Di.length;)Yn.removeAttributeNode(Di[0]);Bl(Yn,Ii,Zn),Yn[Ml]=Gn,Yn[ql]=Zn}catch(Oi){Js(Gn,Gn.return,Oi)}}var Pu=!1,Cl=!1,a0=!1,xE=typeof WeakSet=="function"?WeakSet:Set,_l=null;function Ex(Gn,Yn){if(Gn=Gn.containerInfo,_0=Am,Gn=$1(Gn),eg(Gn)){if("selectionStart"in Gn)var Zn={start:Gn.selectionStart,end:Gn.selectionEnd};else e:{Zn=(Zn=Gn.ownerDocument)&&Zn.defaultView||window;var Ii=Zn.getSelection&&Zn.getSelection();if(Ii&&Ii.rangeCount!==0){Zn=Ii.anchorNode;var Di=Ii.anchorOffset,Oi=Ii.focusNode;Ii=Ii.focusOffset;try{Zn.nodeType,Oi.nodeType}catch{Zn=null;break e}var Pi=0,Ui=-1,ns=-1,hs=0,Ts=0,As=Gn,ms=null;t:for(;;){for(var ys;As!==Zn||Di!==0&&As.nodeType!==3||(Ui=Pi+Di),As!==Oi||Ii!==0&&As.nodeType!==3||(ns=Pi+Ii),As.nodeType===3&&(Pi+=As.nodeValue.length),(ys=As.firstChild)!==null;)ms=As,As=ys;for(;;){if(As===Gn)break t;if(ms===Zn&&++hs===Di&&(Ui=Pi),ms===Oi&&++Ts===Ii&&(ns=Pi),(ys=As.nextSibling)!==null)break;As=ms,ms=As.parentNode}As=ys}Zn=Ui===-1||ns===-1?null:{start:Ui,end:ns}}else Zn=null}Zn=Zn||{start:0,end:0}}else Zn=null;for(I0={focusedElem:Gn,selectionRange:Zn},Am=!1,_l=Yn;_l!==null;)if(Yn=_l,Gn=Yn.child,(Yn.subtreeFlags&1028)!==0&&Gn!==null)Gn.return=Yn,_l=Gn;else for(;_l!==null;){switch(Yn=_l,Oi=Yn.alternate,Gn=Yn.flags,Yn.tag){case 0:if((Gn&4)!==0&&(Gn=Yn.updateQueue,Gn=Gn!==null?Gn.events:null,Gn!==null))for(Zn=0;Zn<Gn.length;Zn++)Di=Gn[Zn],Di.ref.impl=Di.nextImpl;break;case 11:case 15:break;case 1:if((Gn&1024)!==0&&Oi!==null){Gn=void 0,Zn=Yn,Di=Oi.memoizedProps,Oi=Oi.memoizedState,Ii=Zn.stateNode;try{var Ds=Nf(Zn.type,Di);Gn=Ii.getSnapshotBeforeUpdate(Ds,Oi),Ii.__reactInternalSnapshotBeforeUpdate=Gn}catch(Ls){Js(Zn,Zn.return,Ls)}}break;case 3:if((Gn&1024)!==0){if(Gn=Yn.stateNode.containerInfo,Zn=Gn.nodeType,Zn===9)N0(Gn);else if(Zn===1)switch(Gn.nodeName){case"HEAD":case"HTML":case"BODY":N0(Gn);break;default:Gn.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((Gn&1024)!==0)throw Error(d(163))}if(Gn=Yn.sibling,Gn!==null){Gn.return=Yn.return,_l=Gn;break}_l=Yn.return}}function CE(Gn,Yn,Zn){var Ii=Zn.flags;switch(Zn.tag){case 0:case 11:case 15:Hu(Gn,Zn),Ii&4&&Qp(5,Zn);break;case 1:if(Hu(Gn,Zn),Ii&4)if(Gn=Zn.stateNode,Yn===null)try{Gn.componentDidMount()}catch(Pi){Js(Zn,Zn.return,Pi)}else{var Di=Nf(Zn.type,Yn.memoizedProps);Yn=Yn.memoizedState;try{Gn.componentDidUpdate(Di,Yn,Gn.__reactInternalSnapshotBeforeUpdate)}catch(Pi){Js(Zn,Zn.return,Pi)}}Ii&64&&bE(Zn),Ii&512&&Zp(Zn,Zn.return);break;case 3:if(Hu(Gn,Zn),Ii&64&&(Gn=Zn.updateQueue,Gn!==null)){if(Yn=null,Zn.child!==null)switch(Zn.child.tag){case 27:case 5:Yn=Zn.child.stateNode;break;case 1:Yn=Zn.child.stateNode}try{ay(Gn,Yn)}catch(Pi){Js(Zn,Zn.return,Pi)}}break;case 27:Yn===null&&Ii&4&&SE(Zn);case 26:case 5:Hu(Gn,Zn),Yn===null&&Ii&4&&EE(Zn),Ii&512&&Zp(Zn,Zn.return);break;case 12:Hu(Gn,Zn);break;case 31:Hu(Gn,Zn),Ii&4&&kE(Gn,Zn);break;case 13:Hu(Gn,Zn),Ii&4&&wE(Gn,Zn),Ii&64&&(Gn=Zn.memoizedState,Gn!==null&&(Gn=Gn.dehydrated,Gn!==null&&(Zn=_x.bind(null,Zn),Kx(Gn,Zn))));break;case 22:if(Ii=Zn.memoizedState!==null||Pu,!Ii){Yn=Yn!==null&&Yn.memoizedState!==null||Cl,Di=Pu;var Oi=Cl;Pu=Ii,(Cl=Yn)&&!Oi?ju(Gn,Zn,(Zn.subtreeFlags&8772)!==0):Hu(Gn,Zn),Pu=Di,Cl=Oi}break;case 30:break;default:Hu(Gn,Zn)}}function vE(Gn){var Yn=Gn.alternate;Yn!==null&&(Gn.alternate=null,vE(Yn)),Gn.child=null,Gn.deletions=null,Gn.sibling=null,Gn.tag===5&&(Yn=Gn.stateNode,Yn!==null&&Pm(Yn)),Gn.stateNode=null,Gn.return=null,Gn.dependencies=null,Gn.memoizedProps=null,Gn.memoizedState=null,Gn.pendingProps=null,Gn.stateNode=null,Gn.updateQueue=null}var pl=null,Kl=!1;function Bu(Gn,Yn,Zn){for(Zn=Zn.child;Zn!==null;)AE(Gn,Yn,Zn),Zn=Zn.sibling}function AE(Gn,Yn,Zn){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(zl,Zn)}catch{}switch(Zn.tag){case 26:Cl||vu(Zn,Yn),Bu(Gn,Yn,Zn),Zn.memoizedState?Zn.memoizedState.count--:Zn.stateNode&&(Zn=Zn.stateNode,Zn.parentNode.removeChild(Zn));break;case 27:Cl||vu(Zn,Yn);var Ii=pl,Di=Kl;df(Zn.type)&&(pl=Zn.stateNode,Kl=!1),Bu(Gn,Yn,Zn),ah(Zn.stateNode),pl=Ii,Kl=Di;break;case 5:Cl||vu(Zn,Yn);case 6:if(Ii=pl,Di=Kl,pl=null,Bu(Gn,Yn,Zn),pl=Ii,Kl=Di,pl!==null)if(Kl)try{(pl.nodeType===9?pl.body:pl.nodeName==="HTML"?pl.ownerDocument.body:pl).removeChild(Zn.stateNode)}catch(Oi){Js(Zn,Yn,Oi)}else try{pl.removeChild(Zn.stateNode)}catch(Oi){Js(Zn,Yn,Oi)}break;case 18:pl!==null&&(Kl?(Gn=pl,bT(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn,Zn.stateNode),yp(Gn)):bT(pl,Zn.stateNode));break;case 4:Ii=pl,Di=Kl,pl=Zn.stateNode.containerInfo,Kl=!0,Bu(Gn,Yn,Zn),pl=Ii,Kl=Di;break;case 0:case 11:case 14:case 15:rf(2,Zn,Yn),Cl||rf(4,Zn,Yn),Bu(Gn,Yn,Zn);break;case 1:Cl||(vu(Zn,Yn),Ii=Zn.stateNode,typeof Ii.componentWillUnmount=="function"&&yE(Zn,Yn,Ii)),Bu(Gn,Yn,Zn);break;case 21:Bu(Gn,Yn,Zn);break;case 22:Cl=(Ii=Cl)||Zn.memoizedState!==null,Bu(Gn,Yn,Zn),Cl=Ii;break;default:Bu(Gn,Yn,Zn)}}function kE(Gn,Yn){if(Yn.memoizedState===null&&(Gn=Yn.alternate,Gn!==null&&(Gn=Gn.memoizedState,Gn!==null))){Gn=Gn.dehydrated;try{yp(Gn)}catch(Zn){Js(Yn,Yn.return,Zn)}}}function wE(Gn,Yn){if(Yn.memoizedState===null&&(Gn=Yn.alternate,Gn!==null&&(Gn=Gn.memoizedState,Gn!==null&&(Gn=Gn.dehydrated,Gn!==null))))try{yp(Gn)}catch(Zn){Js(Yn,Yn.return,Zn)}}function Tx(Gn){switch(Gn.tag){case 31:case 13:case 19:var Yn=Gn.stateNode;return Yn===null&&(Yn=Gn.stateNode=new xE),Yn;case 22:return Gn=Gn.stateNode,Yn=Gn._retryCache,Yn===null&&(Yn=Gn._retryCache=new xE),Yn;default:throw Error(d(435,Gn.tag))}}function im(Gn,Yn){var Zn=Tx(Gn);Yn.forEach(function(Ii){if(!Zn.has(Ii)){Zn.add(Ii);var Di=Ix.bind(null,Gn,Ii);Ii.then(Di,Di)}})}function Wl(Gn,Yn){var Zn=Yn.deletions;if(Zn!==null)for(var Ii=0;Ii<Zn.length;Ii++){var Di=Zn[Ii],Oi=Gn,Pi=Yn,Ui=Pi;e:for(;Ui!==null;){switch(Ui.tag){case 27:if(df(Ui.type)){pl=Ui.stateNode,Kl=!1;break e}break;case 5:pl=Ui.stateNode,Kl=!1;break e;case 3:case 4:pl=Ui.stateNode.containerInfo,Kl=!0;break e}Ui=Ui.return}if(pl===null)throw Error(d(160));AE(Oi,Pi,Di),pl=null,Kl=!1,Oi=Di.alternate,Oi!==null&&(Oi.return=null),Di.return=null}if(Yn.subtreeFlags&13886)for(Yn=Yn.child;Yn!==null;)_E(Yn,Gn),Yn=Yn.sibling}var Tu=null;function _E(Gn,Yn){var Zn=Gn.alternate,Ii=Gn.flags;switch(Gn.tag){case 0:case 11:case 14:case 15:Wl(Yn,Gn),Xl(Gn),Ii&4&&(rf(3,Gn,Gn.return),Qp(3,Gn),rf(5,Gn,Gn.return));break;case 1:Wl(Yn,Gn),Xl(Gn),Ii&512&&(Cl||Zn===null||vu(Zn,Zn.return)),Ii&64&&Pu&&(Gn=Gn.updateQueue,Gn!==null&&(Ii=Gn.callbacks,Ii!==null&&(Zn=Gn.shared.hiddenCallbacks,Gn.shared.hiddenCallbacks=Zn===null?Ii:Zn.concat(Ii))));break;case 26:var Di=Tu;if(Wl(Yn,Gn),Xl(Gn),Ii&512&&(Cl||Zn===null||vu(Zn,Zn.return)),Ii&4){var Oi=Zn!==null?Zn.memoizedState:null;if(Ii=Gn.memoizedState,Zn===null)if(Ii===null)if(Gn.stateNode===null){e:{Ii=Gn.type,Zn=Gn.memoizedProps,Di=Di.ownerDocument||Di;t:switch(Ii){case"title":Oi=Di.getElementsByTagName("title")[0],(!Oi||Oi[Ap]||Oi[Ml]||Oi.namespaceURI==="http://www.w3.org/2000/svg"||Oi.hasAttribute("itemprop"))&&(Oi=Di.createElement(Ii),Di.head.insertBefore(Oi,Di.querySelector("head > title"))),Bl(Oi,Ii,Zn),Oi[Ml]=Gn,wl(Oi),Ii=Oi;break e;case"link":var Pi=IT("link","href",Di).get(Ii+(Zn.href||""));if(Pi){for(var Ui=0;Ui<Pi.length;Ui++)if(Oi=Pi[Ui],Oi.getAttribute("href")===(Zn.href==null||Zn.href===""?null:Zn.href)&&Oi.getAttribute("rel")===(Zn.rel==null?null:Zn.rel)&&Oi.getAttribute("title")===(Zn.title==null?null:Zn.title)&&Oi.getAttribute("crossorigin")===(Zn.crossOrigin==null?null:Zn.crossOrigin)){Pi.splice(Ui,1);break t}}Oi=Di.createElement(Ii),Bl(Oi,Ii,Zn),Di.head.appendChild(Oi);break;case"meta":if(Pi=IT("meta","content",Di).get(Ii+(Zn.content||""))){for(Ui=0;Ui<Pi.length;Ui++)if(Oi=Pi[Ui],Oi.getAttribute("content")===(Zn.content==null?null:""+Zn.content)&&Oi.getAttribute("name")===(Zn.name==null?null:Zn.name)&&Oi.getAttribute("property")===(Zn.property==null?null:Zn.property)&&Oi.getAttribute("http-equiv")===(Zn.httpEquiv==null?null:Zn.httpEquiv)&&Oi.getAttribute("charset")===(Zn.charSet==null?null:Zn.charSet)){Pi.splice(Ui,1);break t}}Oi=Di.createElement(Ii),Bl(Oi,Ii,Zn),Di.head.appendChild(Oi);break;default:throw Error(d(468,Ii))}Oi[Ml]=Gn,wl(Oi),Ii=Oi}Gn.stateNode=Ii}else RT(Di,Gn.type,Gn.stateNode);else Gn.stateNode=_T(Di,Ii,Gn.memoizedProps);else Oi!==Ii?(Oi===null?Zn.stateNode!==null&&(Zn=Zn.stateNode,Zn.parentNode.removeChild(Zn)):Oi.count--,Ii===null?RT(Di,Gn.type,Gn.stateNode):_T(Di,Ii,Gn.memoizedProps)):Ii===null&&Gn.stateNode!==null&&o0(Gn,Gn.memoizedProps,Zn.memoizedProps)}break;case 27:Wl(Yn,Gn),Xl(Gn),Ii&512&&(Cl||Zn===null||vu(Zn,Zn.return)),Zn!==null&&Ii&4&&o0(Gn,Gn.memoizedProps,Zn.memoizedProps);break;case 5:if(Wl(Yn,Gn),Xl(Gn),Ii&512&&(Cl||Zn===null||vu(Zn,Zn.return)),Gn.flags&32){Di=Gn.stateNode;try{Ff(Di,"")}catch(Ds){Js(Gn,Gn.return,Ds)}}Ii&4&&Gn.stateNode!=null&&(Di=Gn.memoizedProps,o0(Gn,Di,Zn!==null?Zn.memoizedProps:Di)),Ii&1024&&(a0=!0);break;case 6:if(Wl(Yn,Gn),Xl(Gn),Ii&4){if(Gn.stateNode===null)throw Error(d(162));Ii=Gn.memoizedProps,Zn=Gn.stateNode;try{Zn.nodeValue=Ii}catch(Ds){Js(Gn,Gn.return,Ds)}}break;case 3:if(Sm=null,Di=Tu,Tu=Em(Yn.containerInfo),Wl(Yn,Gn),Tu=Di,Xl(Gn),Ii&4&&Zn!==null&&Zn.memoizedState.isDehydrated)try{yp(Yn.containerInfo)}catch(Ds){Js(Gn,Gn.return,Ds)}a0&&(a0=!1,IE(Gn));break;case 4:Ii=Tu,Tu=Em(Gn.stateNode.containerInfo),Wl(Yn,Gn),Xl(Gn),Tu=Ii;break;case 12:Wl(Yn,Gn),Xl(Gn);break;case 31:Wl(Yn,Gn),Xl(Gn),Ii&4&&(Ii=Gn.updateQueue,Ii!==null&&(Gn.updateQueue=null,im(Gn,Ii)));break;case 13:Wl(Yn,Gn),Xl(Gn),Gn.child.flags&8192&&Gn.memoizedState!==null!=(Zn!==null&&Zn.memoizedState!==null)&&(am=Rl()),Ii&4&&(Ii=Gn.updateQueue,Ii!==null&&(Gn.updateQueue=null,im(Gn,Ii)));break;case 22:Di=Gn.memoizedState!==null;var ns=Zn!==null&&Zn.memoizedState!==null,hs=Pu,Ts=Cl;if(Pu=hs||Di,Cl=Ts||ns,Wl(Yn,Gn),Cl=Ts,Pu=hs,Xl(Gn),Ii&8192)e:for(Yn=Gn.stateNode,Yn._visibility=Di?Yn._visibility&-2:Yn._visibility|1,Di&&(Zn===null||ns||Pu||Cl||Mf(Gn)),Zn=null,Yn=Gn;;){if(Yn.tag===5||Yn.tag===26){if(Zn===null){ns=Zn=Yn;try{if(Oi=ns.stateNode,Di)Pi=Oi.style,typeof Pi.setProperty=="function"?Pi.setProperty("display","none","important"):Pi.display="none";else{Ui=ns.stateNode;var As=ns.memoizedProps.style,ms=As!=null&&As.hasOwnProperty("display")?As.display:null;Ui.style.display=ms==null||typeof ms=="boolean"?"":(""+ms).trim()}}catch(Ds){Js(ns,ns.return,Ds)}}}else if(Yn.tag===6){if(Zn===null){ns=Yn;try{ns.stateNode.nodeValue=Di?"":ns.memoizedProps}catch(Ds){Js(ns,ns.return,Ds)}}}else if(Yn.tag===18){if(Zn===null){ns=Yn;try{var ys=ns.stateNode;Di?yT(ys,!0):yT(ns.stateNode,!1)}catch(Ds){Js(ns,ns.return,Ds)}}}else if((Yn.tag!==22&&Yn.tag!==23||Yn.memoizedState===null||Yn===Gn)&&Yn.child!==null){Yn.child.return=Yn,Yn=Yn.child;continue}if(Yn===Gn)break e;for(;Yn.sibling===null;){if(Yn.return===null||Yn.return===Gn)break e;Zn===Yn&&(Zn=null),Yn=Yn.return}Zn===Yn&&(Zn=null),Yn.sibling.return=Yn.return,Yn=Yn.sibling}Ii&4&&(Ii=Gn.updateQueue,Ii!==null&&(Zn=Ii.retryQueue,Zn!==null&&(Ii.retryQueue=null,im(Gn,Zn))));break;case 19:Wl(Yn,Gn),Xl(Gn),Ii&4&&(Ii=Gn.updateQueue,Ii!==null&&(Gn.updateQueue=null,im(Gn,Ii)));break;case 30:break;case 21:break;default:Wl(Yn,Gn),Xl(Gn)}}function Xl(Gn){var Yn=Gn.flags;if(Yn&2){try{for(var Zn,Ii=Gn.return;Ii!==null;){if(TE(Ii)){Zn=Ii;break}Ii=Ii.return}if(Zn==null)throw Error(d(160));switch(Zn.tag){case 27:var Di=Zn.stateNode,Oi=i0(Gn);om(Gn,Oi,Di);break;case 5:var Pi=Zn.stateNode;Zn.flags&32&&(Ff(Pi,""),Zn.flags&=-33);var Ui=i0(Gn);om(Gn,Ui,Pi);break;case 3:case 4:var ns=Zn.stateNode.containerInfo,hs=i0(Gn);s0(Gn,hs,ns);break;default:throw Error(d(161))}}catch(Ts){Js(Gn,Gn.return,Ts)}Gn.flags&=-3}Yn&4096&&(Gn.flags&=-4097)}function IE(Gn){if(Gn.subtreeFlags&1024)for(Gn=Gn.child;Gn!==null;){var Yn=Gn;IE(Yn),Yn.tag===5&&Yn.flags&1024&&Yn.stateNode.reset(),Gn=Gn.sibling}}function Hu(Gn,Yn){if(Yn.subtreeFlags&8772)for(Yn=Yn.child;Yn!==null;)CE(Gn,Yn.alternate,Yn),Yn=Yn.sibling}function Mf(Gn){for(Gn=Gn.child;Gn!==null;){var Yn=Gn;switch(Yn.tag){case 0:case 11:case 14:case 15:rf(4,Yn,Yn.return),Mf(Yn);break;case 1:vu(Yn,Yn.return);var Zn=Yn.stateNode;typeof Zn.componentWillUnmount=="function"&&yE(Yn,Yn.return,Zn),Mf(Yn);break;case 27:ah(Yn.stateNode);case 26:case 5:vu(Yn,Yn.return),Mf(Yn);break;case 22:Yn.memoizedState===null&&Mf(Yn);break;case 30:Mf(Yn);break;default:Mf(Yn)}Gn=Gn.sibling}}function ju(Gn,Yn,Zn){for(Zn=Zn&&(Yn.subtreeFlags&8772)!==0,Yn=Yn.child;Yn!==null;){var Ii=Yn.alternate,Di=Gn,Oi=Yn,Pi=Oi.flags;switch(Oi.tag){case 0:case 11:case 15:ju(Di,Oi,Zn),Qp(4,Oi);break;case 1:if(ju(Di,Oi,Zn),Ii=Oi,Di=Ii.stateNode,typeof Di.componentDidMount=="function")try{Di.componentDidMount()}catch(hs){Js(Ii,Ii.return,hs)}if(Ii=Oi,Di=Ii.updateQueue,Di!==null){var Ui=Ii.stateNode;try{var ns=Di.shared.hiddenCallbacks;if(ns!==null)for(Di.shared.hiddenCallbacks=null,Di=0;Di<ns.length;Di++)sy(ns[Di],Ui)}catch(hs){Js(Ii,Ii.return,hs)}}Zn&&Pi&64&&bE(Oi),Zp(Oi,Oi.return);break;case 27:SE(Oi);case 26:case 5:ju(Di,Oi,Zn),Zn&&Ii===null&&Pi&4&&EE(Oi),Zp(Oi,Oi.return);break;case 12:ju(Di,Oi,Zn);break;case 31:ju(Di,Oi,Zn),Zn&&Pi&4&&kE(Di,Oi);break;case 13:ju(Di,Oi,Zn),Zn&&Pi&4&&wE(Di,Oi);break;case 22:Oi.memoizedState===null&&ju(Di,Oi,Zn),Zp(Oi,Oi.return);break;case 30:break;default:ju(Di,Oi,Zn)}Yn=Yn.sibling}}function l0(Gn,Yn){var Zn=null;Gn!==null&&Gn.memoizedState!==null&&Gn.memoizedState.cachePool!==null&&(Zn=Gn.memoizedState.cachePool.pool),Gn=null,Yn.memoizedState!==null&&Yn.memoizedState.cachePool!==null&&(Gn=Yn.memoizedState.cachePool.pool),Gn!==Zn&&(Gn!=null&&Gn.refCount++,Zn!=null&&Bp(Zn))}function c0(Gn,Yn){Gn=null,Yn.alternate!==null&&(Gn=Yn.alternate.memoizedState.cache),Yn=Yn.memoizedState.cache,Yn!==Gn&&(Yn.refCount++,Gn!=null&&Bp(Gn))}function Su(Gn,Yn,Zn,Ii){if(Yn.subtreeFlags&10256)for(Yn=Yn.child;Yn!==null;)RE(Gn,Yn,Zn,Ii),Yn=Yn.sibling}function RE(Gn,Yn,Zn,Ii){var Di=Yn.flags;switch(Yn.tag){case 0:case 11:case 15:Su(Gn,Yn,Zn,Ii),Di&2048&&Qp(9,Yn);break;case 1:Su(Gn,Yn,Zn,Ii);break;case 3:Su(Gn,Yn,Zn,Ii),Di&2048&&(Gn=null,Yn.alternate!==null&&(Gn=Yn.alternate.memoizedState.cache),Yn=Yn.memoizedState.cache,Yn!==Gn&&(Yn.refCount++,Gn!=null&&Bp(Gn)));break;case 12:if(Di&2048){Su(Gn,Yn,Zn,Ii),Gn=Yn.stateNode;try{var Oi=Yn.memoizedProps,Pi=Oi.id,Ui=Oi.onPostCommit;typeof Ui=="function"&&Ui(Pi,Yn.alternate===null?"mount":"update",Gn.passiveEffectDuration,-0)}catch(ns){Js(Yn,Yn.return,ns)}}else Su(Gn,Yn,Zn,Ii);break;case 31:Su(Gn,Yn,Zn,Ii);break;case 13:Su(Gn,Yn,Zn,Ii);break;case 23:break;case 22:Oi=Yn.stateNode,Pi=Yn.alternate,Yn.memoizedState!==null?Oi._visibility&2?Su(Gn,Yn,Zn,Ii):Jp(Gn,Yn):Oi._visibility&2?Su(Gn,Yn,Zn,Ii):(Oi._visibility|=2,ap(Gn,Yn,Zn,Ii,(Yn.subtreeFlags&10256)!==0||!1)),Di&2048&&l0(Pi,Yn);break;case 24:Su(Gn,Yn,Zn,Ii),Di&2048&&c0(Yn.alternate,Yn);break;default:Su(Gn,Yn,Zn,Ii)}}function ap(Gn,Yn,Zn,Ii,Di){for(Di=Di&&((Yn.subtreeFlags&10256)!==0||!1),Yn=Yn.child;Yn!==null;){var Oi=Gn,Pi=Yn,Ui=Zn,ns=Ii,hs=Pi.flags;switch(Pi.tag){case 0:case 11:case 15:ap(Oi,Pi,Ui,ns,Di),Qp(8,Pi);break;case 23:break;case 22:var Ts=Pi.stateNode;Pi.memoizedState!==null?Ts._visibility&2?ap(Oi,Pi,Ui,ns,Di):Jp(Oi,Pi):(Ts._visibility|=2,ap(Oi,Pi,Ui,ns,Di)),Di&&hs&2048&&l0(Pi.alternate,Pi);break;case 24:ap(Oi,Pi,Ui,ns,Di),Di&&hs&2048&&c0(Pi.alternate,Pi);break;default:ap(Oi,Pi,Ui,ns,Di)}Yn=Yn.sibling}}function Jp(Gn,Yn){if(Yn.subtreeFlags&10256)for(Yn=Yn.child;Yn!==null;){var Zn=Gn,Ii=Yn,Di=Ii.flags;switch(Ii.tag){case 22:Jp(Zn,Ii),Di&2048&&l0(Ii.alternate,Ii);break;case 24:Jp(Zn,Ii),Di&2048&&c0(Ii.alternate,Ii);break;default:Jp(Zn,Ii)}Yn=Yn.sibling}}var eh=8192;function lp(Gn,Yn,Zn){if(Gn.subtreeFlags&eh)for(Gn=Gn.child;Gn!==null;)DE(Gn,Yn,Zn),Gn=Gn.sibling}function DE(Gn,Yn,Zn){switch(Gn.tag){case 26:lp(Gn,Yn,Zn),Gn.flags&eh&&Gn.memoizedState!==null&&sC(Zn,Tu,Gn.memoizedState,Gn.memoizedProps);break;case 5:lp(Gn,Yn,Zn);break;case 3:case 4:var Ii=Tu;Tu=Em(Gn.stateNode.containerInfo),lp(Gn,Yn,Zn),Tu=Ii;break;case 22:Gn.memoizedState===null&&(Ii=Gn.alternate,Ii!==null&&Ii.memoizedState!==null?(Ii=eh,eh=16777216,lp(Gn,Yn,Zn),eh=Ii):lp(Gn,Yn,Zn));break;default:lp(Gn,Yn,Zn)}}function NE(Gn){var Yn=Gn.alternate;if(Yn!==null&&(Gn=Yn.child,Gn!==null)){Yn.child=null;do Yn=Gn.sibling,Gn.sibling=null,Gn=Yn;while(Gn!==null)}}function th(Gn){var Yn=Gn.deletions;if((Gn.flags&16)!==0){if(Yn!==null)for(var Zn=0;Zn<Yn.length;Zn++){var Ii=Yn[Zn];_l=Ii,OE(Ii,Gn)}NE(Gn)}if(Gn.subtreeFlags&10256)for(Gn=Gn.child;Gn!==null;)ME(Gn),Gn=Gn.sibling}function ME(Gn){switch(Gn.tag){case 0:case 11:case 15:th(Gn),Gn.flags&2048&&rf(9,Gn,Gn.return);break;case 3:th(Gn);break;case 12:th(Gn);break;case 22:var Yn=Gn.stateNode;Gn.memoizedState!==null&&Yn._visibility&2&&(Gn.return===null||Gn.return.tag!==13)?(Yn._visibility&=-3,sm(Gn)):th(Gn);break;default:th(Gn)}}function sm(Gn){var Yn=Gn.deletions;if((Gn.flags&16)!==0){if(Yn!==null)for(var Zn=0;Zn<Yn.length;Zn++){var Ii=Yn[Zn];_l=Ii,OE(Ii,Gn)}NE(Gn)}for(Gn=Gn.child;Gn!==null;){switch(Yn=Gn,Yn.tag){case 0:case 11:case 15:rf(8,Yn,Yn.return),sm(Yn);break;case 22:Zn=Yn.stateNode,Zn._visibility&2&&(Zn._visibility&=-3,sm(Yn));break;default:sm(Yn)}Gn=Gn.sibling}}function OE(Gn,Yn){for(;_l!==null;){var Zn=_l;switch(Zn.tag){case 0:case 11:case 15:rf(8,Zn,Yn);break;case 23:case 22:if(Zn.memoizedState!==null&&Zn.memoizedState.cachePool!==null){var Ii=Zn.memoizedState.cachePool.pool;Ii!=null&&Ii.refCount++}break;case 24:Bp(Zn.memoizedState.cache)}if(Ii=Zn.child,Ii!==null)Ii.return=Zn,_l=Ii;else e:for(Zn=Gn;_l!==null;){Ii=_l;var Di=Ii.sibling,Oi=Ii.return;if(vE(Ii),Ii===Zn){_l=null;break e}if(Di!==null){Di.return=Oi,_l=Di;break e}_l=Oi}}}var Sx={getCacheForType:function(Gn){var Yn=$l(Tl),Zn=Yn.data.get(Gn);return Zn===void 0&&(Zn=Gn(),Yn.data.set(Gn,Zn)),Zn},cacheSignal:function(){return $l(Tl).controller.signal}},xx=typeof WeakMap=="function"?WeakMap:Map,Qs=0,wa=null,Fs=null,zs=0,Zs=0,nu=null,of=!1,cp=!1,u0=!1,Fu=0,gl=0,sf=0,Of=0,d0=0,ru=0,up=0,nh=null,Ql=null,f0=!1,am=0,$E=0,lm=1/0,cm=null,af=null,kl=0,lf=null,dp=null,Uu=0,p0=0,h0=null,LE=null,rh=0,m0=null;function ou(){return(Qs&2)!==0&&zs!==0?zs&-zs:rs.T!==null?S0():J0()}function PE(){if(ru===0)if((zs&536870912)===0||Gs){var Gn=mh;mh<<=1,(mh&3932160)===0&&(mh=262144),ru=Gn}else ru=536870912;return Gn=eu.current,Gn!==null&&(Gn.flags|=32),ru}function Zl(Gn,Yn,Zn){(Gn===wa&&(Zs===2||Zs===9)||Gn.cancelPendingCommit!==null)&&(fp(Gn,0),cf(Gn,zs,ru,!1)),vp(Gn,Zn),((Qs&2)===0||Gn!==wa)&&(Gn===wa&&((Qs&2)===0&&(Of|=Zn),gl===4&&cf(Gn,zs,ru,!1)),Au(Gn))}function BE(Gn,Yn,Zn){if((Qs&6)!==0)throw Error(d(327));var Ii=!Zn&&(Yn&127)===0&&(Yn&Gn.expiredLanes)===0||Cp(Gn,Yn),Di=Ii?Ax(Gn,Yn):b0(Gn,Yn,!0),Oi=Ii;do{if(Di===0){cp&&!Ii&&cf(Gn,Yn,0,!1);break}else{if(Zn=Gn.current.alternate,Oi&&!Cx(Zn)){Di=b0(Gn,Yn,!1),Oi=!1;continue}if(Di===2){if(Oi=Yn,Gn.errorRecoveryDisabledLanes&Oi)var Pi=0;else Pi=Gn.pendingLanes&-536870913,Pi=Pi!==0?Pi:Pi&536870912?536870912:0;if(Pi!==0){Yn=Pi;e:{var Ui=Gn;Di=nh;var ns=Ui.current.memoizedState.isDehydrated;if(ns&&(fp(Ui,Pi).flags|=256),Pi=b0(Ui,Pi,!1),Pi!==2){if(u0&&!ns){Ui.errorRecoveryDisabledLanes|=Oi,Of|=Oi,Di=4;break e}Oi=Ql,Ql=Di,Oi!==null&&(Ql===null?Ql=Oi:Ql.push.apply(Ql,Oi))}Di=Pi}if(Oi=!1,Di!==2)continue}}if(Di===1){fp(Gn,0),cf(Gn,Yn,0,!0);break}e:{switch(Ii=Gn,Oi=Di,Oi){case 0:case 1:throw Error(d(345));case 4:if((Yn&4194048)!==Yn)break;case 6:cf(Ii,Yn,ru,!of);break e;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(d(329))}if((Yn&62914560)===Yn&&(Di=am+300-Rl(),10<Di)){if(cf(Ii,Yn,ru,!of),bh(Ii,0,!0)!==0)break e;Uu=Yn,Ii.timeoutHandle=mT(HE.bind(null,Ii,Zn,Ql,cm,f0,Yn,ru,Of,up,of,Oi,"Throttled",-0,0),Di);break e}HE(Ii,Zn,Ql,cm,f0,Yn,ru,Of,up,of,Oi,null,-0,0)}}break}while(!0);Au(Gn)}function HE(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui,ns,hs,Ts,As,ms,ys){if(Gn.timeoutHandle=-1,As=Yn.subtreeFlags,As&8192||(As&16785408)===16785408){As={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wu},DE(Yn,Oi,As);var Ds=(Oi&62914560)===Oi?am-Rl():(Oi&4194048)===Oi?$E-Rl():0;if(Ds=aC(As,Ds),Ds!==null){Uu=Oi,Gn.cancelPendingCommit=Ds(YE.bind(null,Gn,Yn,Oi,Zn,Ii,Di,Pi,Ui,ns,Ts,As,null,ms,ys)),cf(Gn,Oi,Pi,!hs);return}}YE(Gn,Yn,Oi,Zn,Ii,Di,Pi,Ui,ns)}function Cx(Gn){for(var Yn=Gn;;){var Zn=Yn.tag;if((Zn===0||Zn===11||Zn===15)&&Yn.flags&16384&&(Zn=Yn.updateQueue,Zn!==null&&(Zn=Zn.stores,Zn!==null)))for(var Ii=0;Ii<Zn.length;Ii++){var Di=Zn[Ii],Oi=Di.getSnapshot;Di=Di.value;try{if(!uc(Oi(),Di))return!1}catch{return!1}}if(Zn=Yn.child,Yn.subtreeFlags&16384&&Zn!==null)Zn.return=Yn,Yn=Zn;else{if(Yn===Gn)break;for(;Yn.sibling===null;){if(Yn.return===null||Yn.return===Gn)return!0;Yn=Yn.return}Yn.sibling.return=Yn.return,Yn=Yn.sibling}}return!0}function cf(Gn,Yn,Zn,Ii){Yn&=~d0,Yn&=~Of,Gn.suspendedLanes|=Yn,Gn.pingedLanes&=~Yn,Ii&&(Gn.warmLanes|=Yn),Ii=Gn.expirationTimes;for(var Di=Yn;0<Di;){var Oi=31-Ta(Di),Pi=1<<Oi;Ii[Oi]=-1,Di&=~Pi}Zn!==0&&X0(Gn,Zn,Yn)}function um(){return(Qs&6)===0?(oh(0),!1):!0}function g0(){if(Fs!==null){if(Zs===0)var Gn=Fs.return;else Gn=Fs,Du=Af=null,Ng(Gn),np=null,jp=0,Gn=Fs;for(;Gn!==null;)gE(Gn.alternate,Gn),Gn=Gn.return;Fs=null}}function fp(Gn,Yn){var Zn=Gn.timeoutHandle;Zn!==-1&&(Gn.timeoutHandle=-1,zx(Zn)),Zn=Gn.cancelPendingCommit,Zn!==null&&(Gn.cancelPendingCommit=null,Zn()),Uu=0,g0(),wa=Gn,Fs=Zn=Iu(Gn.current,null),zs=Yn,Zs=0,nu=null,of=!1,cp=Cp(Gn,Yn),u0=!1,up=ru=d0=Of=sf=gl=0,Ql=nh=null,f0=!1,(Yn&8)!==0&&(Yn|=Yn&32);var Ii=Gn.entangledLanes;if(Ii!==0)for(Gn=Gn.entanglements,Ii&=Yn;0<Ii;){var Di=31-Ta(Ii),Oi=1<<Di;Yn|=Gn[Di],Ii&=~Oi}return Fu=Yn,Ih(),Zn}function jE(Gn,Yn){Bs=null,rs.H=Kp,Yn===tp||Yn===Ph?(Yn=ny(),Zs=3):Yn===Tg?(Yn=ny(),Zs=4):Zs=Yn===Kg?8:Yn!==null&&typeof Yn=="object"&&typeof Yn.then=="function"?6:1,nu=Yn,Fs===null&&(gl=1,Qh(Gn,uu(Yn,Gn.current)))}function FE(){var Gn=eu.current;return Gn===null?!0:(zs&4194048)===zs?hu===null:(zs&62914560)===zs||(zs&536870912)!==0?Gn===hu:!1}function UE(){var Gn=rs.H;return rs.H=Kp,Gn===null?Kp:Gn}function zE(){var Gn=rs.A;return rs.A=Sx,Gn}function dm(){gl=4,of||(zs&4194048)!==zs&&eu.current!==null||(cp=!0),(sf&134217727)===0&&(Of&134217727)===0||wa===null||cf(wa,zs,ru,!1)}function b0(Gn,Yn,Zn){var Ii=Qs;Qs|=2;var Di=UE(),Oi=zE();(wa!==Gn||zs!==Yn)&&(cm=null,fp(Gn,Yn)),Yn=!1;var Pi=gl;e:do try{if(Zs!==0&&Fs!==null){var Ui=Fs,ns=nu;switch(Zs){case 8:g0(),Pi=6;break e;case 3:case 2:case 9:case 6:eu.current===null&&(Yn=!0);var hs=Zs;if(Zs=0,nu=null,pp(Gn,Ui,ns,hs),Zn&&cp){Pi=0;break e}break;default:hs=Zs,Zs=0,nu=null,pp(Gn,Ui,ns,hs)}}vx(),Pi=gl;break}catch(Ts){jE(Gn,Ts)}while(!0);return Yn&&Gn.shellSuspendCounter++,Du=Af=null,Qs=Ii,rs.H=Di,rs.A=Oi,Fs===null&&(wa=null,zs=0,Ih()),Pi}function vx(){for(;Fs!==null;)VE(Fs)}function Ax(Gn,Yn){var Zn=Qs;Qs|=2;var Ii=UE(),Di=zE();wa!==Gn||zs!==Yn?(cm=null,lm=Rl()+500,fp(Gn,Yn)):cp=Cp(Gn,Yn);e:do try{if(Zs!==0&&Fs!==null){Yn=Fs;var Oi=nu;t:switch(Zs){case 1:Zs=0,nu=null,pp(Gn,Yn,Oi,1);break;case 2:case 9:if(ey(Oi)){Zs=0,nu=null,GE(Yn);break}Yn=function(){Zs!==2&&Zs!==9||wa!==Gn||(Zs=7),Au(Gn)},Oi.then(Yn,Yn);break e;case 3:Zs=7;break e;case 4:Zs=5;break e;case 7:ey(Oi)?(Zs=0,nu=null,GE(Yn)):(Zs=0,nu=null,pp(Gn,Yn,Oi,7));break;case 5:var Pi=null;switch(Fs.tag){case 26:Pi=Fs.memoizedState;case 5:case 27:var Ui=Fs;if(Pi?DT(Pi):Ui.stateNode.complete){Zs=0,nu=null;var ns=Ui.sibling;if(ns!==null)Fs=ns;else{var hs=Ui.return;hs!==null?(Fs=hs,fm(hs)):Fs=null}break t}}Zs=0,nu=null,pp(Gn,Yn,Oi,5);break;case 6:Zs=0,nu=null,pp(Gn,Yn,Oi,6);break;case 8:g0(),gl=6;break e;default:throw Error(d(462))}}kx();break}catch(Ts){jE(Gn,Ts)}while(!0);return Du=Af=null,rs.H=Ii,rs.A=Di,Qs=Zn,Fs!==null?0:(wa=null,zs=0,Ih(),gl)}function kx(){for(;Fs!==null&&!Tp();)VE(Fs)}function VE(Gn){var Yn=hE(Gn.alternate,Gn,Fu);Gn.memoizedProps=Gn.pendingProps,Yn===null?fm(Gn):Fs=Yn}function GE(Gn){var Yn=Gn,Zn=Yn.alternate;switch(Yn.tag){case 15:case 0:Yn=lE(Zn,Yn,Yn.pendingProps,Yn.type,void 0,zs);break;case 11:Yn=lE(Zn,Yn,Yn.pendingProps,Yn.type.render,Yn.ref,zs);break;case 5:Ng(Yn);default:gE(Zn,Yn),Yn=Fs=V1(Yn,Fu),Yn=hE(Zn,Yn,Fu)}Gn.memoizedProps=Gn.pendingProps,Yn===null?fm(Gn):Fs=Yn}function pp(Gn,Yn,Zn,Ii){Du=Af=null,Ng(Yn),np=null,jp=0;var Di=Yn.return;try{if(hx(Gn,Di,Yn,Zn,zs)){gl=1,Qh(Gn,uu(Zn,Gn.current)),Fs=null;return}}catch(Oi){if(Di!==null)throw Fs=Di,Oi;gl=1,Qh(Gn,uu(Zn,Gn.current)),Fs=null;return}Yn.flags&32768?(Gs||Ii===1?Gn=!0:cp||(zs&536870912)!==0?Gn=!1:(of=Gn=!0,(Ii===2||Ii===9||Ii===3||Ii===6)&&(Ii=eu.current,Ii!==null&&Ii.tag===13&&(Ii.flags|=16384))),qE(Yn,Gn)):fm(Yn)}function fm(Gn){var Yn=Gn;do{if((Yn.flags&32768)!==0){qE(Yn,of);return}Gn=Yn.return;var Zn=bx(Yn.alternate,Yn,Fu);if(Zn!==null){Fs=Zn;return}if(Yn=Yn.sibling,Yn!==null){Fs=Yn;return}Fs=Yn=Gn}while(Yn!==null);gl===0&&(gl=5)}function qE(Gn,Yn){do{var Zn=yx(Gn.alternate,Gn);if(Zn!==null){Zn.flags&=32767,Fs=Zn;return}if(Zn=Gn.return,Zn!==null&&(Zn.flags|=32768,Zn.subtreeFlags=0,Zn.deletions=null),!Yn&&(Gn=Gn.sibling,Gn!==null)){Fs=Gn;return}Fs=Gn=Zn}while(Gn!==null);gl=6,Fs=null}function YE(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui,ns){Gn.cancelPendingCommit=null;do pm();while(kl!==0);if((Qs&6)!==0)throw Error(d(327));if(Yn!==null){if(Yn===Gn.current)throw Error(d(177));if(Oi=Yn.lanes|Yn.childLanes,Oi|=ig,nS(Gn,Zn,Oi,Pi,Ui,ns),Gn===wa&&(Fs=wa=null,zs=0),dp=Yn,lf=Gn,Uu=Zn,p0=Oi,h0=Di,LE=Ii,(Yn.subtreeFlags&10256)!==0||(Yn.flags&10256)!==0?(Gn.callbackNode=null,Gn.callbackPriority=0,Rx(Ps,function(){return ZE(),null})):(Gn.callbackNode=null,Gn.callbackPriority=0),Ii=(Yn.flags&13878)!==0,(Yn.subtreeFlags&13878)!==0||Ii){Ii=rs.T,rs.T=null,Di=cs.p,cs.p=2,Pi=Qs,Qs|=4;try{Ex(Gn,Yn,Zn)}finally{Qs=Pi,cs.p=Di,rs.T=Ii}}kl=1,KE(),WE(),XE()}}function KE(){if(kl===1){kl=0;var Gn=lf,Yn=dp,Zn=(Yn.flags&13878)!==0;if((Yn.subtreeFlags&13878)!==0||Zn){Zn=rs.T,rs.T=null;var Ii=cs.p;cs.p=2;var Di=Qs;Qs|=4;try{_E(Yn,Gn);var Oi=I0,Pi=$1(Gn.containerInfo),Ui=Oi.focusedElem,ns=Oi.selectionRange;if(Pi!==Ui&&Ui&&Ui.ownerDocument&&O1(Ui.ownerDocument.documentElement,Ui)){if(ns!==null&&eg(Ui)){var hs=ns.start,Ts=ns.end;if(Ts===void 0&&(Ts=hs),"selectionStart"in Ui)Ui.selectionStart=hs,Ui.selectionEnd=Math.min(Ts,Ui.value.length);else{var As=Ui.ownerDocument||document,ms=As&&As.defaultView||window;if(ms.getSelection){var ys=ms.getSelection(),Ds=Ui.textContent.length,Ls=Math.min(ns.start,Ds),ba=ns.end===void 0?Ls:Math.min(ns.end,Ds);!ys.extend&&Ls>ba&&(Pi=ba,ba=Ls,Ls=Pi);var us=M1(Ui,Ls),is=M1(Ui,ba);if(us&&is&&(ys.rangeCount!==1||ys.anchorNode!==us.node||ys.anchorOffset!==us.offset||ys.focusNode!==is.node||ys.focusOffset!==is.offset)){var ps=As.createRange();ps.setStart(us.node,us.offset),ys.removeAllRanges(),Ls>ba?(ys.addRange(ps),ys.extend(is.node,is.offset)):(ps.setEnd(is.node,is.offset),ys.addRange(ps))}}}}for(As=[],ys=Ui;ys=ys.parentNode;)ys.nodeType===1&&As.push({element:ys,left:ys.scrollLeft,top:ys.scrollTop});for(typeof Ui.focus=="function"&&Ui.focus(),Ui=0;Ui<As.length;Ui++){var vs=As[Ui];vs.element.scrollLeft=vs.left,vs.element.scrollTop=vs.top}}Am=!!_0,I0=_0=null}finally{Qs=Di,cs.p=Ii,rs.T=Zn}}Gn.current=Yn,kl=2}}function WE(){if(kl===2){kl=0;var Gn=lf,Yn=dp,Zn=(Yn.flags&8772)!==0;if((Yn.subtreeFlags&8772)!==0||Zn){Zn=rs.T,rs.T=null;var Ii=cs.p;cs.p=2;var Di=Qs;Qs|=4;try{CE(Gn,Yn.alternate,Yn)}finally{Qs=Di,cs.p=Ii,rs.T=Zn}}kl=3}}function XE(){if(kl===4||kl===3){kl=0,Sp();var Gn=lf,Yn=dp,Zn=Uu,Ii=LE;(Yn.subtreeFlags&10256)!==0||(Yn.flags&10256)!==0?kl=5:(kl=0,dp=lf=null,QE(Gn,Gn.pendingLanes));var Di=Gn.pendingLanes;if(Di===0&&(af=null),$m(Zn),Yn=Yn.stateNode,Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(zl,Yn,void 0,(Yn.current.flags&128)===128)}catch{}if(Ii!==null){Yn=rs.T,Di=cs.p,cs.p=2,rs.T=null;try{for(var Oi=Gn.onRecoverableError,Pi=0;Pi<Ii.length;Pi++){var Ui=Ii[Pi];Oi(Ui.value,{componentStack:Ui.stack})}}finally{rs.T=Yn,cs.p=Di}}(Uu&3)!==0&&pm(),Au(Gn),Di=Gn.pendingLanes,(Zn&261930)!==0&&(Di&42)!==0?Gn===m0?rh++:(rh=0,m0=Gn):rh=0,oh(0)}}function QE(Gn,Yn){(Gn.pooledCacheLanes&=Yn)===0&&(Yn=Gn.pooledCache,Yn!=null&&(Gn.pooledCache=null,Bp(Yn)))}function pm(){return KE(),WE(),XE(),ZE()}function ZE(){if(kl!==5)return!1;var Gn=lf,Yn=p0;p0=0;var Zn=$m(Uu),Ii=rs.T,Di=cs.p;try{cs.p=32>Zn?32:Zn,rs.T=null,Zn=h0,h0=null;var Oi=lf,Pi=Uu;if(kl=0,dp=lf=null,Uu=0,(Qs&6)!==0)throw Error(d(331));var Ui=Qs;if(Qs|=4,ME(Oi.current),RE(Oi,Oi.current,Pi,Zn),Qs=Ui,oh(0,!1),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(zl,Oi)}catch{}return!0}finally{cs.p=Di,rs.T=Ii,QE(Gn,Yn)}}function JE(Gn,Yn,Zn){Yn=uu(Zn,Yn),Yn=Yg(Gn.stateNode,Yn,2),Gn=ef(Gn,Yn,2),Gn!==null&&(vp(Gn,2),Au(Gn))}function Js(Gn,Yn,Zn){if(Gn.tag===3)JE(Gn,Gn,Zn);else for(;Yn!==null;){if(Yn.tag===3){JE(Yn,Gn,Zn);break}else if(Yn.tag===1){var Ii=Yn.stateNode;if(typeof Yn.type.getDerivedStateFromError=="function"||typeof Ii.componentDidCatch=="function"&&(af===null||!af.has(Ii))){Gn=uu(Zn,Gn),Zn=eE(2),Ii=ef(Yn,Zn,2),Ii!==null&&(tE(Zn,Ii,Yn,Gn),vp(Ii,2),Au(Ii));break}}Yn=Yn.return}}function y0(Gn,Yn,Zn){var Ii=Gn.pingCache;if(Ii===null){Ii=Gn.pingCache=new xx;var Di=new Set;Ii.set(Yn,Di)}else Di=Ii.get(Yn),Di===void 0&&(Di=new Set,Ii.set(Yn,Di));Di.has(Zn)||(u0=!0,Di.add(Zn),Gn=wx.bind(null,Gn,Yn,Zn),Yn.then(Gn,Gn))}function wx(Gn,Yn,Zn){var Ii=Gn.pingCache;Ii!==null&&Ii.delete(Yn),Gn.pingedLanes|=Gn.suspendedLanes&Zn,Gn.warmLanes&=~Zn,wa===Gn&&(zs&Zn)===Zn&&(gl===4||gl===3&&(zs&62914560)===zs&&300>Rl()-am?(Qs&2)===0&&fp(Gn,0):d0|=Zn,up===zs&&(up=0)),Au(Gn)}function eT(Gn,Yn){Yn===0&&(Yn=W0()),Gn=xf(Gn,Yn),Gn!==null&&(vp(Gn,Yn),Au(Gn))}function _x(Gn){var Yn=Gn.memoizedState,Zn=0;Yn!==null&&(Zn=Yn.retryLane),eT(Gn,Zn)}function Ix(Gn,Yn){var Zn=0;switch(Gn.tag){case 31:case 13:var Ii=Gn.stateNode,Di=Gn.memoizedState;Di!==null&&(Zn=Di.retryLane);break;case 19:Ii=Gn.stateNode;break;case 22:Ii=Gn.stateNode._retryCache;break;default:throw Error(d(314))}Ii!==null&&Ii.delete(Yn),eT(Gn,Zn)}function Rx(Gn,Yn){return su(Gn,Yn)}var hm=null,hp=null,E0=!1,mm=!1,T0=!1,uf=0;function Au(Gn){Gn!==hp&&Gn.next===null&&(hp===null?hm=hp=Gn:hp=hp.next=Gn),mm=!0,E0||(E0=!0,Nx())}function oh(Gn,Yn){if(!T0&&mm){T0=!0;do for(var Zn=!1,Ii=hm;Ii!==null;){if(Gn!==0){var Di=Ii.pendingLanes;if(Di===0)var Oi=0;else{var Pi=Ii.suspendedLanes,Ui=Ii.pingedLanes;Oi=(1<<31-Ta(42|Gn)+1)-1,Oi&=Di&~(Pi&~Ui),Oi=Oi&201326741?Oi&201326741|1:Oi?Oi|2:0}Oi!==0&&(Zn=!0,oT(Ii,Oi))}else Oi=zs,Oi=bh(Ii,Ii===wa?Oi:0,Ii.cancelPendingCommit!==null||Ii.timeoutHandle!==-1),(Oi&3)===0||Cp(Ii,Oi)||(Zn=!0,oT(Ii,Oi));Ii=Ii.next}while(Zn);T0=!1}}function Dx(){tT()}function tT(){mm=E0=!1;var Gn=0;uf!==0&&Ux()&&(Gn=uf);for(var Yn=Rl(),Zn=null,Ii=hm;Ii!==null;){var Di=Ii.next,Oi=nT(Ii,Yn);Oi===0?(Ii.next=null,Zn===null?hm=Di:Zn.next=Di,Di===null&&(hp=Zn)):(Zn=Ii,(Gn!==0||(Oi&3)!==0)&&(mm=!0)),Ii=Di}kl!==0&&kl!==5||oh(Gn),uf!==0&&(uf=0)}function nT(Gn,Yn){for(var Zn=Gn.suspendedLanes,Ii=Gn.pingedLanes,Di=Gn.expirationTimes,Oi=Gn.pendingLanes&-62914561;0<Oi;){var Pi=31-Ta(Oi),Ui=1<<Pi,ns=Di[Pi];ns===-1?((Ui&Zn)===0||(Ui&Ii)!==0)&&(Di[Pi]=tS(Ui,Yn)):ns<=Yn&&(Gn.expiredLanes|=Ui),Oi&=~Ui}if(Yn=wa,Zn=zs,Zn=bh(Gn,Gn===Yn?Zn:0,Gn.cancelPendingCommit!==null||Gn.timeoutHandle!==-1),Ii=Gn.callbackNode,Zn===0||Gn===Yn&&(Zs===2||Zs===9)||Gn.cancelPendingCommit!==null)return Ii!==null&&Ii!==null&&Gu(Ii),Gn.callbackNode=null,Gn.callbackPriority=0;if((Zn&3)===0||Cp(Gn,Zn)){if(Yn=Zn&-Zn,Yn===Gn.callbackPriority)return Yn;switch(Ii!==null&&Gu(Ii),$m(Zn)){case 2:case 8:Zn=ks;break;case 32:Zn=Ps;break;case 268435456:Zn=Ys;break;default:Zn=Ps}return Ii=rT.bind(null,Gn),Zn=su(Zn,Ii),Gn.callbackPriority=Yn,Gn.callbackNode=Zn,Yn}return Ii!==null&&Ii!==null&&Gu(Ii),Gn.callbackPriority=2,Gn.callbackNode=null,2}function rT(Gn,Yn){if(kl!==0&&kl!==5)return Gn.callbackNode=null,Gn.callbackPriority=0,null;var Zn=Gn.callbackNode;if(pm()&&Gn.callbackNode!==Zn)return null;var Ii=zs;return Ii=bh(Gn,Gn===wa?Ii:0,Gn.cancelPendingCommit!==null||Gn.timeoutHandle!==-1),Ii===0?null:(BE(Gn,Ii,Yn),nT(Gn,Rl()),Gn.callbackNode!=null&&Gn.callbackNode===Zn?rT.bind(null,Gn):null)}function oT(Gn,Yn){if(pm())return null;BE(Gn,Yn,!0)}function Nx(){Vx(function(){(Qs&6)!==0?su(xs,Dx):tT()})}function S0(){if(uf===0){var Gn=Jf;Gn===0&&(Gn=hh,hh<<=1,(hh&261888)===0&&(hh=256)),uf=Gn}return uf}function iT(Gn){return Gn==null||typeof Gn=="symbol"||typeof Gn=="boolean"?null:typeof Gn=="function"?Gn:Sh(""+Gn)}function sT(Gn,Yn){var Zn=Yn.ownerDocument.createElement("input");return Zn.name=Yn.name,Zn.value=Yn.value,Gn.id&&Zn.setAttribute("form",Gn.id),Yn.parentNode.insertBefore(Zn,Yn),Gn=new FormData(Gn),Zn.parentNode.removeChild(Zn),Gn}function Mx(Gn,Yn,Zn,Ii,Di){if(Yn==="submit"&&Zn&&Zn.stateNode===Di){var Oi=iT((Di[ql]||null).action),Pi=Ii.submitter;Pi&&(Yn=(Yn=Pi[ql]||null)?iT(Yn.formAction):Pi.getAttribute("formAction"),Yn!==null&&(Oi=Yn,Pi=null));var Ui=new Ah("action","action",null,Ii,Di);Gn.push({event:Ui,listeners:[{instance:null,listener:function(){if(Ii.defaultPrevented){if(uf!==0){var ns=Pi?sT(Di,Pi):new FormData(Di);Fg(Zn,{pending:!0,data:ns,method:Di.method,action:Oi},null,ns)}}else typeof Oi=="function"&&(Ui.preventDefault(),ns=Pi?sT(Di,Pi):new FormData(Di),Fg(Zn,{pending:!0,data:ns,method:Di.method,action:Oi},Oi,ns))},currentTarget:Di}]})}}for(var x0=0;x0<og.length;x0++){var C0=og[x0],Ox=C0.toLowerCase(),$x=C0[0].toUpperCase()+C0.slice(1);Eu(Ox,"on"+$x)}Eu(B1,"onAnimationEnd"),Eu(H1,"onAnimationIteration"),Eu(j1,"onAnimationStart"),Eu("dblclick","onDoubleClick"),Eu("focusin","onFocus"),Eu("focusout","onBlur"),Eu(XS,"onTransitionRun"),Eu(QS,"onTransitionStart"),Eu(ZS,"onTransitionCancel"),Eu(F1,"onTransitionEnd"),Hf("onMouseEnter",["mouseout","mouseover"]),Hf("onMouseLeave",["mouseout","mouseover"]),Hf("onPointerEnter",["pointerout","pointerover"]),Hf("onPointerLeave",["pointerout","pointerover"]),yf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yf("onBeforeInput",["compositionend","keypress","textInput","paste"]),yf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ih));function aT(Gn,Yn){Yn=(Yn&4)!==0;for(var Zn=0;Zn<Gn.length;Zn++){var Ii=Gn[Zn],Di=Ii.event;Ii=Ii.listeners;e:{var Oi=void 0;if(Yn)for(var Pi=Ii.length-1;0<=Pi;Pi--){var Ui=Ii[Pi],ns=Ui.instance,hs=Ui.currentTarget;if(Ui=Ui.listener,ns!==Oi&&Di.isPropagationStopped())break e;Oi=Ui,Di.currentTarget=hs;try{Oi(Di)}catch(Ts){_h(Ts)}Di.currentTarget=null,Oi=ns}else for(Pi=0;Pi<Ii.length;Pi++){if(Ui=Ii[Pi],ns=Ui.instance,hs=Ui.currentTarget,Ui=Ui.listener,ns!==Oi&&Di.isPropagationStopped())break e;Oi=Ui,Di.currentTarget=hs;try{Oi(Di)}catch(Ts){_h(Ts)}Di.currentTarget=null,Oi=ns}}}}function Us(Gn,Yn){var Zn=Yn[Lm];Zn===void 0&&(Zn=Yn[Lm]=new Set);var Ii=Gn+"__bubble";Zn.has(Ii)||(lT(Yn,Gn,2,!1),Zn.add(Ii))}function v0(Gn,Yn,Zn){var Ii=0;Yn&&(Ii|=4),lT(Zn,Gn,Ii,Yn)}var gm="_reactListening"+Math.random().toString(36).slice(2);function A0(Gn){if(!Gn[gm]){Gn[gm]=!0,n1.forEach(function(Zn){Zn!=="selectionchange"&&(Lx.has(Zn)||v0(Zn,!1,Gn),v0(Zn,!0,Gn))});var Yn=Gn.nodeType===9?Gn:Gn.ownerDocument;Yn===null||Yn[gm]||(Yn[gm]=!0,v0("selectionchange",!1,Yn))}}function lT(Gn,Yn,Zn,Ii){switch(BT(Yn)){case 2:var Di=uC;break;case 8:Di=dC;break;default:Di=j0}Zn=Di.bind(null,Yn,Zn,Gn),Di=void 0,!Gm||Yn!=="touchstart"&&Yn!=="touchmove"&&Yn!=="wheel"||(Di=!0),Ii?Di!==void 0?Gn.addEventListener(Yn,Zn,{capture:!0,passive:Di}):Gn.addEventListener(Yn,Zn,!0):Di!==void 0?Gn.addEventListener(Yn,Zn,{passive:Di}):Gn.addEventListener(Yn,Zn,!1)}function k0(Gn,Yn,Zn,Ii,Di){var Oi=Ii;if((Yn&1)===0&&(Yn&2)===0&&Ii!==null)e:for(;;){if(Ii===null)return;var Pi=Ii.tag;if(Pi===3||Pi===4){var Ui=Ii.stateNode.containerInfo;if(Ui===Di)break;if(Pi===4)for(Pi=Ii.return;Pi!==null;){var ns=Pi.tag;if((ns===3||ns===4)&&Pi.stateNode.containerInfo===Di)return;Pi=Pi.return}for(;Ui!==null;){if(Pi=Lf(Ui),Pi===null)return;if(ns=Pi.tag,ns===5||ns===6||ns===26||ns===27){Ii=Oi=Pi;continue e}Ui=Ui.parentNode}}Ii=Ii.return}h1(function(){var hs=Oi,Ts=zm(Zn),As=[];e:{var ms=U1.get(Gn);if(ms!==void 0){var ys=Ah,Ds=Gn;switch(Gn){case"keypress":if(Ch(Zn)===0)break e;case"keydown":case"keyup":ys=kS;break;case"focusin":Ds="focus",ys=Wm;break;case"focusout":Ds="blur",ys=Wm;break;case"beforeblur":case"afterblur":ys=Wm;break;case"click":if(Zn.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ys=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ys=hS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ys=IS;break;case B1:case H1:case j1:ys=bS;break;case F1:ys=DS;break;case"scroll":case"scrollend":ys=fS;break;case"wheel":ys=OS;break;case"copy":case"cut":case"paste":ys=ES;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ys=E1;break;case"toggle":case"beforetoggle":ys=LS}var Ls=(Yn&4)!==0,ba=!Ls&&(Gn==="scroll"||Gn==="scrollend"),us=Ls?ms!==null?ms+"Capture":null:ms;Ls=[];for(var is=hs,ps;is!==null;){var vs=is;if(ps=vs.stateNode,vs=vs.tag,vs!==5&&vs!==26&&vs!==27||ps===null||us===null||(vs=wp(is,us),vs!=null&&Ls.push(sh(is,vs,ps))),ba)break;is=is.return}0<Ls.length&&(ms=new ys(ms,Ds,null,Zn,Ts),As.push({event:ms,listeners:Ls}))}}if((Yn&7)===0){e:{if(ms=Gn==="mouseover"||Gn==="pointerover",ys=Gn==="mouseout"||Gn==="pointerout",ms&&Zn!==Um&&(Ds=Zn.relatedTarget||Zn.fromElement)&&(Lf(Ds)||Ds[$f]))break e;if((ys||ms)&&(ms=Ts.window===Ts?Ts:(ms=Ts.ownerDocument)?ms.defaultView||ms.parentWindow:window,ys?(Ds=Zn.relatedTarget||Zn.toElement,ys=hs,Ds=Ds?Lf(Ds):null,Ds!==null&&(ba=jn(Ds),Ls=Ds.tag,Ds!==ba||Ls!==5&&Ls!==27&&Ls!==6)&&(Ds=null)):(ys=null,Ds=hs),ys!==Ds)){if(Ls=b1,vs="onMouseLeave",us="onMouseEnter",is="mouse",(Gn==="pointerout"||Gn==="pointerover")&&(Ls=E1,vs="onPointerLeave",us="onPointerEnter",is="pointer"),ba=ys==null?ms:kp(ys),ps=Ds==null?ms:kp(Ds),ms=new Ls(vs,is+"leave",ys,Zn,Ts),ms.target=ba,ms.relatedTarget=ps,vs=null,Lf(Ts)===hs&&(Ls=new Ls(us,is+"enter",Ds,Zn,Ts),Ls.target=ps,Ls.relatedTarget=ba,vs=Ls),ba=vs,ys&&Ds)t:{for(Ls=Px,us=ys,is=Ds,ps=0,vs=us;vs;vs=Ls(vs))ps++;vs=0;for(var $s=is;$s;$s=Ls($s))vs++;for(;0<ps-vs;)us=Ls(us),ps--;for(;0<vs-ps;)is=Ls(is),vs--;for(;ps--;){if(us===is||is!==null&&us===is.alternate){Ls=us;break t}us=Ls(us),is=Ls(is)}Ls=null}else Ls=null;ys!==null&&cT(As,ms,ys,Ls,!1),Ds!==null&&ba!==null&&cT(As,ba,Ds,Ls,!0)}}e:{if(ms=hs?kp(hs):window,ys=ms.nodeName&&ms.nodeName.toLowerCase(),ys==="select"||ys==="input"&&ms.type==="file")var Ks=w1;else if(A1(ms))if(_1)Ks=qS;else{Ks=VS;var Ns=zS}else ys=ms.nodeName,!ys||ys.toLowerCase()!=="input"||ms.type!=="checkbox"&&ms.type!=="radio"?hs&&Fm(hs.elementType)&&(Ks=w1):Ks=GS;if(Ks&&(Ks=Ks(Gn,hs))){k1(As,Ks,Zn,Ts);break e}Ns&&Ns(Gn,ms,hs),Gn==="focusout"&&hs&&ms.type==="number"&&hs.memoizedProps.value!=null&&jm(ms,"number",ms.value)}switch(Ns=hs?kp(hs):window,Gn){case"focusin":(A1(Ns)||Ns.contentEditable==="true")&&(Gf=Ns,tg=hs,$p=null);break;case"focusout":$p=tg=Gf=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,L1(As,Zn,Ts);break;case"selectionchange":if(KS)break;case"keydown":case"keyup":L1(As,Zn,Ts)}var Hs;if(Qm)e:{switch(Gn){case"compositionstart":var Vs="onCompositionStart";break e;case"compositionend":Vs="onCompositionEnd";break e;case"compositionupdate":Vs="onCompositionUpdate";break e}Vs=void 0}else Vf?C1(Gn,Zn)&&(Vs="onCompositionEnd"):Gn==="keydown"&&Zn.keyCode===229&&(Vs="onCompositionStart");Vs&&(T1&&Zn.locale!=="ko"&&(Vf||Vs!=="onCompositionStart"?Vs==="onCompositionEnd"&&Vf&&(Hs=m1()):(Ku=Ts,qm="value"in Ku?Ku.value:Ku.textContent,Vf=!0)),Ns=bm(hs,Vs),0<Ns.length&&(Vs=new y1(Vs,Gn,null,Zn,Ts),As.push({event:Vs,listeners:Ns}),Hs?Vs.data=Hs:(Hs=v1(Zn),Hs!==null&&(Vs.data=Hs)))),(Hs=BS?HS(Gn,Zn):jS(Gn,Zn))&&(Vs=bm(hs,"onBeforeInput"),0<Vs.length&&(Ns=new y1("onBeforeInput","beforeinput",null,Zn,Ts),As.push({event:Ns,listeners:Vs}),Ns.data=Hs)),Mx(As,Gn,hs,Zn,Ts)}aT(As,Yn)})}function sh(Gn,Yn,Zn){return{instance:Gn,listener:Yn,currentTarget:Zn}}function bm(Gn,Yn){for(var Zn=Yn+"Capture",Ii=[];Gn!==null;){var Di=Gn,Oi=Di.stateNode;if(Di=Di.tag,Di!==5&&Di!==26&&Di!==27||Oi===null||(Di=wp(Gn,Zn),Di!=null&&Ii.unshift(sh(Gn,Di,Oi)),Di=wp(Gn,Yn),Di!=null&&Ii.push(sh(Gn,Di,Oi))),Gn.tag===3)return Ii;Gn=Gn.return}return[]}function Px(Gn){if(Gn===null)return null;do Gn=Gn.return;while(Gn&&Gn.tag!==5&&Gn.tag!==27);return Gn||null}function cT(Gn,Yn,Zn,Ii,Di){for(var Oi=Yn._reactName,Pi=[];Zn!==null&&Zn!==Ii;){var Ui=Zn,ns=Ui.alternate,hs=Ui.stateNode;if(Ui=Ui.tag,ns!==null&&ns===Ii)break;Ui!==5&&Ui!==26&&Ui!==27||hs===null||(ns=hs,Di?(hs=wp(Zn,Oi),hs!=null&&Pi.unshift(sh(Zn,hs,ns))):Di||(hs=wp(Zn,Oi),hs!=null&&Pi.push(sh(Zn,hs,ns)))),Zn=Zn.return}Pi.length!==0&&Gn.push({event:Yn,listeners:Pi})}var Bx=/\r\n?/g,Hx=/\u0000|\uFFFD/g;function uT(Gn){return(typeof Gn=="string"?Gn:""+Gn).replace(Bx,`
`).replace(Hx,"")}function dT(Gn,Yn){return Yn=uT(Yn),uT(Gn)===Yn}function ga(Gn,Yn,Zn,Ii,Di,Oi){switch(Zn){case"children":typeof Ii=="string"?Yn==="body"||Yn==="textarea"&&Ii===""||Ff(Gn,Ii):(typeof Ii=="number"||typeof Ii=="bigint")&&Yn!=="body"&&Ff(Gn,""+Ii);break;case"className":Eh(Gn,"class",Ii);break;case"tabIndex":Eh(Gn,"tabindex",Ii);break;case"dir":case"role":case"viewBox":case"width":case"height":Eh(Gn,Zn,Ii);break;case"style":f1(Gn,Ii,Oi);break;case"data":if(Yn!=="object"){Eh(Gn,"data",Ii);break}case"src":case"href":if(Ii===""&&(Yn!=="a"||Zn!=="href")){Gn.removeAttribute(Zn);break}if(Ii==null||typeof Ii=="function"||typeof Ii=="symbol"||typeof Ii=="boolean"){Gn.removeAttribute(Zn);break}Ii=Sh(""+Ii),Gn.setAttribute(Zn,Ii);break;case"action":case"formAction":if(typeof Ii=="function"){Gn.setAttribute(Zn,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Oi=="function"&&(Zn==="formAction"?(Yn!=="input"&&ga(Gn,Yn,"name",Di.name,Di,null),ga(Gn,Yn,"formEncType",Di.formEncType,Di,null),ga(Gn,Yn,"formMethod",Di.formMethod,Di,null),ga(Gn,Yn,"formTarget",Di.formTarget,Di,null)):(ga(Gn,Yn,"encType",Di.encType,Di,null),ga(Gn,Yn,"method",Di.method,Di,null),ga(Gn,Yn,"target",Di.target,Di,null)));if(Ii==null||typeof Ii=="symbol"||typeof Ii=="boolean"){Gn.removeAttribute(Zn);break}Ii=Sh(""+Ii),Gn.setAttribute(Zn,Ii);break;case"onClick":Ii!=null&&(Gn.onclick=wu);break;case"onScroll":Ii!=null&&Us("scroll",Gn);break;case"onScrollEnd":Ii!=null&&Us("scrollend",Gn);break;case"dangerouslySetInnerHTML":if(Ii!=null){if(typeof Ii!="object"||!("__html"in Ii))throw Error(d(61));if(Zn=Ii.__html,Zn!=null){if(Di.children!=null)throw Error(d(60));Gn.innerHTML=Zn}}break;case"multiple":Gn.multiple=Ii&&typeof Ii!="function"&&typeof Ii!="symbol";break;case"muted":Gn.muted=Ii&&typeof Ii!="function"&&typeof Ii!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Ii==null||typeof Ii=="function"||typeof Ii=="boolean"||typeof Ii=="symbol"){Gn.removeAttribute("xlink:href");break}Zn=Sh(""+Ii),Gn.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Zn);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Ii!=null&&typeof Ii!="function"&&typeof Ii!="symbol"?Gn.setAttribute(Zn,""+Ii):Gn.removeAttribute(Zn);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Ii&&typeof Ii!="function"&&typeof Ii!="symbol"?Gn.setAttribute(Zn,""):Gn.removeAttribute(Zn);break;case"capture":case"download":Ii===!0?Gn.setAttribute(Zn,""):Ii!==!1&&Ii!=null&&typeof Ii!="function"&&typeof Ii!="symbol"?Gn.setAttribute(Zn,Ii):Gn.removeAttribute(Zn);break;case"cols":case"rows":case"size":case"span":Ii!=null&&typeof Ii!="function"&&typeof Ii!="symbol"&&!isNaN(Ii)&&1<=Ii?Gn.setAttribute(Zn,Ii):Gn.removeAttribute(Zn);break;case"rowSpan":case"start":Ii==null||typeof Ii=="function"||typeof Ii=="symbol"||isNaN(Ii)?Gn.removeAttribute(Zn):Gn.setAttribute(Zn,Ii);break;case"popover":Us("beforetoggle",Gn),Us("toggle",Gn),yh(Gn,"popover",Ii);break;case"xlinkActuate":ku(Gn,"http://www.w3.org/1999/xlink","xlink:actuate",Ii);break;case"xlinkArcrole":ku(Gn,"http://www.w3.org/1999/xlink","xlink:arcrole",Ii);break;case"xlinkRole":ku(Gn,"http://www.w3.org/1999/xlink","xlink:role",Ii);break;case"xlinkShow":ku(Gn,"http://www.w3.org/1999/xlink","xlink:show",Ii);break;case"xlinkTitle":ku(Gn,"http://www.w3.org/1999/xlink","xlink:title",Ii);break;case"xlinkType":ku(Gn,"http://www.w3.org/1999/xlink","xlink:type",Ii);break;case"xmlBase":ku(Gn,"http://www.w3.org/XML/1998/namespace","xml:base",Ii);break;case"xmlLang":ku(Gn,"http://www.w3.org/XML/1998/namespace","xml:lang",Ii);break;case"xmlSpace":ku(Gn,"http://www.w3.org/XML/1998/namespace","xml:space",Ii);break;case"is":yh(Gn,"is",Ii);break;case"innerText":case"textContent":break;default:(!(2<Zn.length)||Zn[0]!=="o"&&Zn[0]!=="O"||Zn[1]!=="n"&&Zn[1]!=="N")&&(Zn=uS.get(Zn)||Zn,yh(Gn,Zn,Ii))}}function w0(Gn,Yn,Zn,Ii,Di,Oi){switch(Zn){case"style":f1(Gn,Ii,Oi);break;case"dangerouslySetInnerHTML":if(Ii!=null){if(typeof Ii!="object"||!("__html"in Ii))throw Error(d(61));if(Zn=Ii.__html,Zn!=null){if(Di.children!=null)throw Error(d(60));Gn.innerHTML=Zn}}break;case"children":typeof Ii=="string"?Ff(Gn,Ii):(typeof Ii=="number"||typeof Ii=="bigint")&&Ff(Gn,""+Ii);break;case"onScroll":Ii!=null&&Us("scroll",Gn);break;case"onScrollEnd":Ii!=null&&Us("scrollend",Gn);break;case"onClick":Ii!=null&&(Gn.onclick=wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!r1.hasOwnProperty(Zn))e:{if(Zn[0]==="o"&&Zn[1]==="n"&&(Di=Zn.endsWith("Capture"),Yn=Zn.slice(2,Di?Zn.length-7:void 0),Oi=Gn[ql]||null,Oi=Oi!=null?Oi[Zn]:null,typeof Oi=="function"&&Gn.removeEventListener(Yn,Oi,Di),typeof Ii=="function")){typeof Oi!="function"&&Oi!==null&&(Zn in Gn?Gn[Zn]=null:Gn.hasAttribute(Zn)&&Gn.removeAttribute(Zn)),Gn.addEventListener(Yn,Ii,Di);break e}Zn in Gn?Gn[Zn]=Ii:Ii===!0?Gn.setAttribute(Zn,""):yh(Gn,Zn,Ii)}}}function Bl(Gn,Yn,Zn){switch(Yn){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Us("error",Gn),Us("load",Gn);var Ii=!1,Di=!1,Oi;for(Oi in Zn)if(Zn.hasOwnProperty(Oi)){var Pi=Zn[Oi];if(Pi!=null)switch(Oi){case"src":Ii=!0;break;case"srcSet":Di=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,Yn));default:ga(Gn,Yn,Oi,Pi,Zn,null)}}Di&&ga(Gn,Yn,"srcSet",Zn.srcSet,Zn,null),Ii&&ga(Gn,Yn,"src",Zn.src,Zn,null);return;case"input":Us("invalid",Gn);var Ui=Oi=Pi=Di=null,ns=null,hs=null;for(Ii in Zn)if(Zn.hasOwnProperty(Ii)){var Ts=Zn[Ii];if(Ts!=null)switch(Ii){case"name":Di=Ts;break;case"type":Pi=Ts;break;case"checked":ns=Ts;break;case"defaultChecked":hs=Ts;break;case"value":Oi=Ts;break;case"defaultValue":Ui=Ts;break;case"children":case"dangerouslySetInnerHTML":if(Ts!=null)throw Error(d(137,Yn));break;default:ga(Gn,Yn,Ii,Ts,Zn,null)}}l1(Gn,Oi,Ui,ns,hs,Pi,Di,!1);return;case"select":Us("invalid",Gn),Ii=Pi=Oi=null;for(Di in Zn)if(Zn.hasOwnProperty(Di)&&(Ui=Zn[Di],Ui!=null))switch(Di){case"value":Oi=Ui;break;case"defaultValue":Pi=Ui;break;case"multiple":Ii=Ui;default:ga(Gn,Yn,Di,Ui,Zn,null)}Yn=Oi,Zn=Pi,Gn.multiple=!!Ii,Yn!=null?jf(Gn,!!Ii,Yn,!1):Zn!=null&&jf(Gn,!!Ii,Zn,!0);return;case"textarea":Us("invalid",Gn),Oi=Di=Ii=null;for(Pi in Zn)if(Zn.hasOwnProperty(Pi)&&(Ui=Zn[Pi],Ui!=null))switch(Pi){case"value":Ii=Ui;break;case"defaultValue":Di=Ui;break;case"children":Oi=Ui;break;case"dangerouslySetInnerHTML":if(Ui!=null)throw Error(d(91));break;default:ga(Gn,Yn,Pi,Ui,Zn,null)}u1(Gn,Ii,Di,Oi);return;case"option":for(ns in Zn)Zn.hasOwnProperty(ns)&&(Ii=Zn[ns],Ii!=null)&&(ns==="selected"?Gn.selected=Ii&&typeof Ii!="function"&&typeof Ii!="symbol":ga(Gn,Yn,ns,Ii,Zn,null));return;case"dialog":Us("beforetoggle",Gn),Us("toggle",Gn),Us("cancel",Gn),Us("close",Gn);break;case"iframe":case"object":Us("load",Gn);break;case"video":case"audio":for(Ii=0;Ii<ih.length;Ii++)Us(ih[Ii],Gn);break;case"image":Us("error",Gn),Us("load",Gn);break;case"details":Us("toggle",Gn);break;case"embed":case"source":case"link":Us("error",Gn),Us("load",Gn);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(hs in Zn)if(Zn.hasOwnProperty(hs)&&(Ii=Zn[hs],Ii!=null))switch(hs){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,Yn));default:ga(Gn,Yn,hs,Ii,Zn,null)}return;default:if(Fm(Yn)){for(Ts in Zn)Zn.hasOwnProperty(Ts)&&(Ii=Zn[Ts],Ii!==void 0&&w0(Gn,Yn,Ts,Ii,Zn,void 0));return}}for(Ui in Zn)Zn.hasOwnProperty(Ui)&&(Ii=Zn[Ui],Ii!=null&&ga(Gn,Yn,Ui,Ii,Zn,null))}function jx(Gn,Yn,Zn,Ii){switch(Yn){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Di=null,Oi=null,Pi=null,Ui=null,ns=null,hs=null,Ts=null;for(ys in Zn){var As=Zn[ys];if(Zn.hasOwnProperty(ys)&&As!=null)switch(ys){case"checked":break;case"value":break;case"defaultValue":ns=As;default:Ii.hasOwnProperty(ys)||ga(Gn,Yn,ys,null,Ii,As)}}for(var ms in Ii){var ys=Ii[ms];if(As=Zn[ms],Ii.hasOwnProperty(ms)&&(ys!=null||As!=null))switch(ms){case"type":Oi=ys;break;case"name":Di=ys;break;case"checked":hs=ys;break;case"defaultChecked":Ts=ys;break;case"value":Pi=ys;break;case"defaultValue":Ui=ys;break;case"children":case"dangerouslySetInnerHTML":if(ys!=null)throw Error(d(137,Yn));break;default:ys!==As&&ga(Gn,Yn,ms,ys,Ii,As)}}Hm(Gn,Pi,Ui,ns,hs,Ts,Oi,Di);return;case"select":ys=Pi=Ui=ms=null;for(Oi in Zn)if(ns=Zn[Oi],Zn.hasOwnProperty(Oi)&&ns!=null)switch(Oi){case"value":break;case"multiple":ys=ns;default:Ii.hasOwnProperty(Oi)||ga(Gn,Yn,Oi,null,Ii,ns)}for(Di in Ii)if(Oi=Ii[Di],ns=Zn[Di],Ii.hasOwnProperty(Di)&&(Oi!=null||ns!=null))switch(Di){case"value":ms=Oi;break;case"defaultValue":Ui=Oi;break;case"multiple":Pi=Oi;default:Oi!==ns&&ga(Gn,Yn,Di,Oi,Ii,ns)}Yn=Ui,Zn=Pi,Ii=ys,ms!=null?jf(Gn,!!Zn,ms,!1):!!Ii!=!!Zn&&(Yn!=null?jf(Gn,!!Zn,Yn,!0):jf(Gn,!!Zn,Zn?[]:"",!1));return;case"textarea":ys=ms=null;for(Ui in Zn)if(Di=Zn[Ui],Zn.hasOwnProperty(Ui)&&Di!=null&&!Ii.hasOwnProperty(Ui))switch(Ui){case"value":break;case"children":break;default:ga(Gn,Yn,Ui,null,Ii,Di)}for(Pi in Ii)if(Di=Ii[Pi],Oi=Zn[Pi],Ii.hasOwnProperty(Pi)&&(Di!=null||Oi!=null))switch(Pi){case"value":ms=Di;break;case"defaultValue":ys=Di;break;case"children":break;case"dangerouslySetInnerHTML":if(Di!=null)throw Error(d(91));break;default:Di!==Oi&&ga(Gn,Yn,Pi,Di,Ii,Oi)}c1(Gn,ms,ys);return;case"option":for(var Ds in Zn)ms=Zn[Ds],Zn.hasOwnProperty(Ds)&&ms!=null&&!Ii.hasOwnProperty(Ds)&&(Ds==="selected"?Gn.selected=!1:ga(Gn,Yn,Ds,null,Ii,ms));for(ns in Ii)ms=Ii[ns],ys=Zn[ns],Ii.hasOwnProperty(ns)&&ms!==ys&&(ms!=null||ys!=null)&&(ns==="selected"?Gn.selected=ms&&typeof ms!="function"&&typeof ms!="symbol":ga(Gn,Yn,ns,ms,Ii,ys));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ls in Zn)ms=Zn[Ls],Zn.hasOwnProperty(Ls)&&ms!=null&&!Ii.hasOwnProperty(Ls)&&ga(Gn,Yn,Ls,null,Ii,ms);for(hs in Ii)if(ms=Ii[hs],ys=Zn[hs],Ii.hasOwnProperty(hs)&&ms!==ys&&(ms!=null||ys!=null))switch(hs){case"children":case"dangerouslySetInnerHTML":if(ms!=null)throw Error(d(137,Yn));break;default:ga(Gn,Yn,hs,ms,Ii,ys)}return;default:if(Fm(Yn)){for(var ba in Zn)ms=Zn[ba],Zn.hasOwnProperty(ba)&&ms!==void 0&&!Ii.hasOwnProperty(ba)&&w0(Gn,Yn,ba,void 0,Ii,ms);for(Ts in Ii)ms=Ii[Ts],ys=Zn[Ts],!Ii.hasOwnProperty(Ts)||ms===ys||ms===void 0&&ys===void 0||w0(Gn,Yn,Ts,ms,Ii,ys);return}}for(var us in Zn)ms=Zn[us],Zn.hasOwnProperty(us)&&ms!=null&&!Ii.hasOwnProperty(us)&&ga(Gn,Yn,us,null,Ii,ms);for(As in Ii)ms=Ii[As],ys=Zn[As],!Ii.hasOwnProperty(As)||ms===ys||ms==null&&ys==null||ga(Gn,Yn,As,ms,Ii,ys)}function fT(Gn){switch(Gn){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fx(){if(typeof performance.getEntriesByType=="function"){for(var Gn=0,Yn=0,Zn=performance.getEntriesByType("resource"),Ii=0;Ii<Zn.length;Ii++){var Di=Zn[Ii],Oi=Di.transferSize,Pi=Di.initiatorType,Ui=Di.duration;if(Oi&&Ui&&fT(Pi)){for(Pi=0,Ui=Di.responseEnd,Ii+=1;Ii<Zn.length;Ii++){var ns=Zn[Ii],hs=ns.startTime;if(hs>Ui)break;var Ts=ns.transferSize,As=ns.initiatorType;Ts&&fT(As)&&(ns=ns.responseEnd,Pi+=Ts*(ns<Ui?1:(Ui-hs)/(ns-hs)))}if(--Ii,Yn+=8*(Oi+Pi)/(Di.duration/1e3),Gn++,10<Gn)break}}if(0<Gn)return Yn/Gn/1e6}return navigator.connection&&(Gn=navigator.connection.downlink,typeof Gn=="number")?Gn:5}var _0=null,I0=null;function ym(Gn){return Gn.nodeType===9?Gn:Gn.ownerDocument}function pT(Gn){switch(Gn){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hT(Gn,Yn){if(Gn===0)switch(Yn){case"svg":return 1;case"math":return 2;default:return 0}return Gn===1&&Yn==="foreignObject"?0:Gn}function R0(Gn,Yn){return Gn==="textarea"||Gn==="noscript"||typeof Yn.children=="string"||typeof Yn.children=="number"||typeof Yn.children=="bigint"||typeof Yn.dangerouslySetInnerHTML=="object"&&Yn.dangerouslySetInnerHTML!==null&&Yn.dangerouslySetInnerHTML.__html!=null}var D0=null;function Ux(){var Gn=window.event;return Gn&&Gn.type==="popstate"?Gn===D0?!1:(D0=Gn,!0):(D0=null,!1)}var mT=typeof setTimeout=="function"?setTimeout:void 0,zx=typeof clearTimeout=="function"?clearTimeout:void 0,gT=typeof Promise=="function"?Promise:void 0,Vx=typeof queueMicrotask=="function"?queueMicrotask:typeof gT<"u"?function(Gn){return gT.resolve(null).then(Gn).catch(Gx)}:mT;function Gx(Gn){setTimeout(function(){throw Gn})}function df(Gn){return Gn==="head"}function bT(Gn,Yn){var Zn=Yn,Ii=0;do{var Di=Zn.nextSibling;if(Gn.removeChild(Zn),Di&&Di.nodeType===8)if(Zn=Di.data,Zn==="/$"||Zn==="/&"){if(Ii===0){Gn.removeChild(Di),yp(Yn);return}Ii--}else if(Zn==="$"||Zn==="$?"||Zn==="$~"||Zn==="$!"||Zn==="&")Ii++;else if(Zn==="html")ah(Gn.ownerDocument.documentElement);else if(Zn==="head"){Zn=Gn.ownerDocument.head,ah(Zn);for(var Oi=Zn.firstChild;Oi;){var Pi=Oi.nextSibling,Ui=Oi.nodeName;Oi[Ap]||Ui==="SCRIPT"||Ui==="STYLE"||Ui==="LINK"&&Oi.rel.toLowerCase()==="stylesheet"||Zn.removeChild(Oi),Oi=Pi}}else Zn==="body"&&ah(Gn.ownerDocument.body);Zn=Di}while(Zn);yp(Yn)}function yT(Gn,Yn){var Zn=Gn;Gn=0;do{var Ii=Zn.nextSibling;if(Zn.nodeType===1?Yn?(Zn._stashedDisplay=Zn.style.display,Zn.style.display="none"):(Zn.style.display=Zn._stashedDisplay||"",Zn.getAttribute("style")===""&&Zn.removeAttribute("style")):Zn.nodeType===3&&(Yn?(Zn._stashedText=Zn.nodeValue,Zn.nodeValue=""):Zn.nodeValue=Zn._stashedText||""),Ii&&Ii.nodeType===8)if(Zn=Ii.data,Zn==="/$"){if(Gn===0)break;Gn--}else Zn!=="$"&&Zn!=="$?"&&Zn!=="$~"&&Zn!=="$!"||Gn++;Zn=Ii}while(Zn)}function N0(Gn){var Yn=Gn.firstChild;for(Yn&&Yn.nodeType===10&&(Yn=Yn.nextSibling);Yn;){var Zn=Yn;switch(Yn=Yn.nextSibling,Zn.nodeName){case"HTML":case"HEAD":case"BODY":N0(Zn),Pm(Zn);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(Zn.rel.toLowerCase()==="stylesheet")continue}Gn.removeChild(Zn)}}function qx(Gn,Yn,Zn,Ii){for(;Gn.nodeType===1;){var Di=Zn;if(Gn.nodeName.toLowerCase()!==Yn.toLowerCase()){if(!Ii&&(Gn.nodeName!=="INPUT"||Gn.type!=="hidden"))break}else if(Ii){if(!Gn[Ap])switch(Yn){case"meta":if(!Gn.hasAttribute("itemprop"))break;return Gn;case"link":if(Oi=Gn.getAttribute("rel"),Oi==="stylesheet"&&Gn.hasAttribute("data-precedence"))break;if(Oi!==Di.rel||Gn.getAttribute("href")!==(Di.href==null||Di.href===""?null:Di.href)||Gn.getAttribute("crossorigin")!==(Di.crossOrigin==null?null:Di.crossOrigin)||Gn.getAttribute("title")!==(Di.title==null?null:Di.title))break;return Gn;case"style":if(Gn.hasAttribute("data-precedence"))break;return Gn;case"script":if(Oi=Gn.getAttribute("src"),(Oi!==(Di.src==null?null:Di.src)||Gn.getAttribute("type")!==(Di.type==null?null:Di.type)||Gn.getAttribute("crossorigin")!==(Di.crossOrigin==null?null:Di.crossOrigin))&&Oi&&Gn.hasAttribute("async")&&!Gn.hasAttribute("itemprop"))break;return Gn;default:return Gn}}else if(Yn==="input"&&Gn.type==="hidden"){var Oi=Di.name==null?null:""+Di.name;if(Di.type==="hidden"&&Gn.getAttribute("name")===Oi)return Gn}else return Gn;if(Gn=mu(Gn.nextSibling),Gn===null)break}return null}function Yx(Gn,Yn,Zn){if(Yn==="")return null;for(;Gn.nodeType!==3;)if((Gn.nodeType!==1||Gn.nodeName!=="INPUT"||Gn.type!=="hidden")&&!Zn||(Gn=mu(Gn.nextSibling),Gn===null))return null;return Gn}function ET(Gn,Yn){for(;Gn.nodeType!==8;)if((Gn.nodeType!==1||Gn.nodeName!=="INPUT"||Gn.type!=="hidden")&&!Yn||(Gn=mu(Gn.nextSibling),Gn===null))return null;return Gn}function M0(Gn){return Gn.data==="$?"||Gn.data==="$~"}function O0(Gn){return Gn.data==="$!"||Gn.data==="$?"&&Gn.ownerDocument.readyState!=="loading"}function Kx(Gn,Yn){var Zn=Gn.ownerDocument;if(Gn.data==="$~")Gn._reactRetry=Yn;else if(Gn.data!=="$?"||Zn.readyState!=="loading")Yn();else{var Ii=function(){Yn(),Zn.removeEventListener("DOMContentLoaded",Ii)};Zn.addEventListener("DOMContentLoaded",Ii),Gn._reactRetry=Ii}}function mu(Gn){for(;Gn!=null;Gn=Gn.nextSibling){var Yn=Gn.nodeType;if(Yn===1||Yn===3)break;if(Yn===8){if(Yn=Gn.data,Yn==="$"||Yn==="$!"||Yn==="$?"||Yn==="$~"||Yn==="&"||Yn==="F!"||Yn==="F")break;if(Yn==="/$"||Yn==="/&")return null}}return Gn}var $0=null;function TT(Gn){Gn=Gn.nextSibling;for(var Yn=0;Gn;){if(Gn.nodeType===8){var Zn=Gn.data;if(Zn==="/$"||Zn==="/&"){if(Yn===0)return mu(Gn.nextSibling);Yn--}else Zn!=="$"&&Zn!=="$!"&&Zn!=="$?"&&Zn!=="$~"&&Zn!=="&"||Yn++}Gn=Gn.nextSibling}return null}function ST(Gn){Gn=Gn.previousSibling;for(var Yn=0;Gn;){if(Gn.nodeType===8){var Zn=Gn.data;if(Zn==="$"||Zn==="$!"||Zn==="$?"||Zn==="$~"||Zn==="&"){if(Yn===0)return Gn;Yn--}else Zn!=="/$"&&Zn!=="/&"||Yn++}Gn=Gn.previousSibling}return null}function xT(Gn,Yn,Zn){switch(Yn=ym(Zn),Gn){case"html":if(Gn=Yn.documentElement,!Gn)throw Error(d(452));return Gn;case"head":if(Gn=Yn.head,!Gn)throw Error(d(453));return Gn;case"body":if(Gn=Yn.body,!Gn)throw Error(d(454));return Gn;default:throw Error(d(451))}}function ah(Gn){for(var Yn=Gn.attributes;Yn.length;)Gn.removeAttributeNode(Yn[0]);Pm(Gn)}var gu=new Map,CT=new Set;function Em(Gn){return typeof Gn.getRootNode=="function"?Gn.getRootNode():Gn.nodeType===9?Gn:Gn.ownerDocument}var zu=cs.d;cs.d={f:Wx,r:Xx,D:Qx,C:Zx,L:Jx,m:eC,X:nC,S:tC,M:rC};function Wx(){var Gn=zu.f(),Yn=um();return Gn||Yn}function Xx(Gn){var Yn=Pf(Gn);Yn!==null&&Yn.tag===5&&Yn.type==="form"?jy(Yn):zu.r(Gn)}var mp=typeof document>"u"?null:document;function vT(Gn,Yn,Zn){var Ii=mp;if(Ii&&typeof Yn=="string"&&Yn){var Di=lu(Yn);Di='link[rel="'+Gn+'"][href="'+Di+'"]',typeof Zn=="string"&&(Di+='[crossorigin="'+Zn+'"]'),CT.has(Di)||(CT.add(Di),Gn={rel:Gn,crossOrigin:Zn,href:Yn},Ii.querySelector(Di)===null&&(Yn=Ii.createElement("link"),Bl(Yn,"link",Gn),wl(Yn),Ii.head.appendChild(Yn)))}}function Qx(Gn){zu.D(Gn),vT("dns-prefetch",Gn,null)}function Zx(Gn,Yn){zu.C(Gn,Yn),vT("preconnect",Gn,Yn)}function Jx(Gn,Yn,Zn){zu.L(Gn,Yn,Zn);var Ii=mp;if(Ii&&Gn&&Yn){var Di='link[rel="preload"][as="'+lu(Yn)+'"]';Yn==="image"&&Zn&&Zn.imageSrcSet?(Di+='[imagesrcset="'+lu(Zn.imageSrcSet)+'"]',typeof Zn.imageSizes=="string"&&(Di+='[imagesizes="'+lu(Zn.imageSizes)+'"]')):Di+='[href="'+lu(Gn)+'"]';var Oi=Di;switch(Yn){case"style":Oi=gp(Gn);break;case"script":Oi=bp(Gn)}gu.has(Oi)||(Gn=Qn({rel:"preload",href:Yn==="image"&&Zn&&Zn.imageSrcSet?void 0:Gn,as:Yn},Zn),gu.set(Oi,Gn),Ii.querySelector(Di)!==null||Yn==="style"&&Ii.querySelector(lh(Oi))||Yn==="script"&&Ii.querySelector(ch(Oi))||(Yn=Ii.createElement("link"),Bl(Yn,"link",Gn),wl(Yn),Ii.head.appendChild(Yn)))}}function eC(Gn,Yn){zu.m(Gn,Yn);var Zn=mp;if(Zn&&Gn){var Ii=Yn&&typeof Yn.as=="string"?Yn.as:"script",Di='link[rel="modulepreload"][as="'+lu(Ii)+'"][href="'+lu(Gn)+'"]',Oi=Di;switch(Ii){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Oi=bp(Gn)}if(!gu.has(Oi)&&(Gn=Qn({rel:"modulepreload",href:Gn},Yn),gu.set(Oi,Gn),Zn.querySelector(Di)===null)){switch(Ii){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(Zn.querySelector(ch(Oi)))return}Ii=Zn.createElement("link"),Bl(Ii,"link",Gn),wl(Ii),Zn.head.appendChild(Ii)}}}function tC(Gn,Yn,Zn){zu.S(Gn,Yn,Zn);var Ii=mp;if(Ii&&Gn){var Di=Bf(Ii).hoistableStyles,Oi=gp(Gn);Yn=Yn||"default";var Pi=Di.get(Oi);if(!Pi){var Ui={loading:0,preload:null};if(Pi=Ii.querySelector(lh(Oi)))Ui.loading=5;else{Gn=Qn({rel:"stylesheet",href:Gn,"data-precedence":Yn},Zn),(Zn=gu.get(Oi))&&L0(Gn,Zn);var ns=Pi=Ii.createElement("link");wl(ns),Bl(ns,"link",Gn),ns._p=new Promise(function(hs,Ts){ns.onload=hs,ns.onerror=Ts}),ns.addEventListener("load",function(){Ui.loading|=1}),ns.addEventListener("error",function(){Ui.loading|=2}),Ui.loading|=4,Tm(Pi,Yn,Ii)}Pi={type:"stylesheet",instance:Pi,count:1,state:Ui},Di.set(Oi,Pi)}}}function nC(Gn,Yn){zu.X(Gn,Yn);var Zn=mp;if(Zn&&Gn){var Ii=Bf(Zn).hoistableScripts,Di=bp(Gn),Oi=Ii.get(Di);Oi||(Oi=Zn.querySelector(ch(Di)),Oi||(Gn=Qn({src:Gn,async:!0},Yn),(Yn=gu.get(Di))&&P0(Gn,Yn),Oi=Zn.createElement("script"),wl(Oi),Bl(Oi,"link",Gn),Zn.head.appendChild(Oi)),Oi={type:"script",instance:Oi,count:1,state:null},Ii.set(Di,Oi))}}function rC(Gn,Yn){zu.M(Gn,Yn);var Zn=mp;if(Zn&&Gn){var Ii=Bf(Zn).hoistableScripts,Di=bp(Gn),Oi=Ii.get(Di);Oi||(Oi=Zn.querySelector(ch(Di)),Oi||(Gn=Qn({src:Gn,async:!0,type:"module"},Yn),(Yn=gu.get(Di))&&P0(Gn,Yn),Oi=Zn.createElement("script"),wl(Oi),Bl(Oi,"link",Gn),Zn.head.appendChild(Oi)),Oi={type:"script",instance:Oi,count:1,state:null},Ii.set(Di,Oi))}}function kT(Gn,Yn,Zn,Ii){var Di=(Di=Is.current)?Em(Di):null;if(!Di)throw Error(d(446));switch(Gn){case"meta":case"title":return null;case"style":return typeof Zn.precedence=="string"&&typeof Zn.href=="string"?(Yn=gp(Zn.href),Zn=Bf(Di).hoistableStyles,Ii=Zn.get(Yn),Ii||(Ii={type:"style",instance:null,count:0,state:null},Zn.set(Yn,Ii)),Ii):{type:"void",instance:null,count:0,state:null};case"link":if(Zn.rel==="stylesheet"&&typeof Zn.href=="string"&&typeof Zn.precedence=="string"){Gn=gp(Zn.href);var Oi=Bf(Di).hoistableStyles,Pi=Oi.get(Gn);if(Pi||(Di=Di.ownerDocument||Di,Pi={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Oi.set(Gn,Pi),(Oi=Di.querySelector(lh(Gn)))&&!Oi._p&&(Pi.instance=Oi,Pi.state.loading=5),gu.has(Gn)||(Zn={rel:"preload",as:"style",href:Zn.href,crossOrigin:Zn.crossOrigin,integrity:Zn.integrity,media:Zn.media,hrefLang:Zn.hrefLang,referrerPolicy:Zn.referrerPolicy},gu.set(Gn,Zn),Oi||oC(Di,Gn,Zn,Pi.state))),Yn&&Ii===null)throw Error(d(528,""));return Pi}if(Yn&&Ii!==null)throw Error(d(529,""));return null;case"script":return Yn=Zn.async,Zn=Zn.src,typeof Zn=="string"&&Yn&&typeof Yn!="function"&&typeof Yn!="symbol"?(Yn=bp(Zn),Zn=Bf(Di).hoistableScripts,Ii=Zn.get(Yn),Ii||(Ii={type:"script",instance:null,count:0,state:null},Zn.set(Yn,Ii)),Ii):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,Gn))}}function gp(Gn){return'href="'+lu(Gn)+'"'}function lh(Gn){return'link[rel="stylesheet"]['+Gn+"]"}function wT(Gn){return Qn({},Gn,{"data-precedence":Gn.precedence,precedence:null})}function oC(Gn,Yn,Zn,Ii){Gn.querySelector('link[rel="preload"][as="style"]['+Yn+"]")?Ii.loading=1:(Yn=Gn.createElement("link"),Ii.preload=Yn,Yn.addEventListener("load",function(){return Ii.loading|=1}),Yn.addEventListener("error",function(){return Ii.loading|=2}),Bl(Yn,"link",Zn),wl(Yn),Gn.head.appendChild(Yn))}function bp(Gn){return'[src="'+lu(Gn)+'"]'}function ch(Gn){return"script[async]"+Gn}function _T(Gn,Yn,Zn){if(Yn.count++,Yn.instance===null)switch(Yn.type){case"style":var Ii=Gn.querySelector('style[data-href~="'+lu(Zn.href)+'"]');if(Ii)return Yn.instance=Ii,wl(Ii),Ii;var Di=Qn({},Zn,{"data-href":Zn.href,"data-precedence":Zn.precedence,href:null,precedence:null});return Ii=(Gn.ownerDocument||Gn).createElement("style"),wl(Ii),Bl(Ii,"style",Di),Tm(Ii,Zn.precedence,Gn),Yn.instance=Ii;case"stylesheet":Di=gp(Zn.href);var Oi=Gn.querySelector(lh(Di));if(Oi)return Yn.state.loading|=4,Yn.instance=Oi,wl(Oi),Oi;Ii=wT(Zn),(Di=gu.get(Di))&&L0(Ii,Di),Oi=(Gn.ownerDocument||Gn).createElement("link"),wl(Oi);var Pi=Oi;return Pi._p=new Promise(function(Ui,ns){Pi.onload=Ui,Pi.onerror=ns}),Bl(Oi,"link",Ii),Yn.state.loading|=4,Tm(Oi,Zn.precedence,Gn),Yn.instance=Oi;case"script":return Oi=bp(Zn.src),(Di=Gn.querySelector(ch(Oi)))?(Yn.instance=Di,wl(Di),Di):(Ii=Zn,(Di=gu.get(Oi))&&(Ii=Qn({},Zn),P0(Ii,Di)),Gn=Gn.ownerDocument||Gn,Di=Gn.createElement("script"),wl(Di),Bl(Di,"link",Ii),Gn.head.appendChild(Di),Yn.instance=Di);case"void":return null;default:throw Error(d(443,Yn.type))}else Yn.type==="stylesheet"&&(Yn.state.loading&4)===0&&(Ii=Yn.instance,Yn.state.loading|=4,Tm(Ii,Zn.precedence,Gn));return Yn.instance}function Tm(Gn,Yn,Zn){for(var Ii=Zn.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Di=Ii.length?Ii[Ii.length-1]:null,Oi=Di,Pi=0;Pi<Ii.length;Pi++){var Ui=Ii[Pi];if(Ui.dataset.precedence===Yn)Oi=Ui;else if(Oi!==Di)break}Oi?Oi.parentNode.insertBefore(Gn,Oi.nextSibling):(Yn=Zn.nodeType===9?Zn.head:Zn,Yn.insertBefore(Gn,Yn.firstChild))}function L0(Gn,Yn){Gn.crossOrigin==null&&(Gn.crossOrigin=Yn.crossOrigin),Gn.referrerPolicy==null&&(Gn.referrerPolicy=Yn.referrerPolicy),Gn.title==null&&(Gn.title=Yn.title)}function P0(Gn,Yn){Gn.crossOrigin==null&&(Gn.crossOrigin=Yn.crossOrigin),Gn.referrerPolicy==null&&(Gn.referrerPolicy=Yn.referrerPolicy),Gn.integrity==null&&(Gn.integrity=Yn.integrity)}var Sm=null;function IT(Gn,Yn,Zn){if(Sm===null){var Ii=new Map,Di=Sm=new Map;Di.set(Zn,Ii)}else Di=Sm,Ii=Di.get(Zn),Ii||(Ii=new Map,Di.set(Zn,Ii));if(Ii.has(Gn))return Ii;for(Ii.set(Gn,null),Zn=Zn.getElementsByTagName(Gn),Di=0;Di<Zn.length;Di++){var Oi=Zn[Di];if(!(Oi[Ap]||Oi[Ml]||Gn==="link"&&Oi.getAttribute("rel")==="stylesheet")&&Oi.namespaceURI!=="http://www.w3.org/2000/svg"){var Pi=Oi.getAttribute(Yn)||"";Pi=Gn+Pi;var Ui=Ii.get(Pi);Ui?Ui.push(Oi):Ii.set(Pi,[Oi])}}return Ii}function RT(Gn,Yn,Zn){Gn=Gn.ownerDocument||Gn,Gn.head.insertBefore(Zn,Yn==="title"?Gn.querySelector("head > title"):null)}function iC(Gn,Yn,Zn){if(Zn===1||Yn.itemProp!=null)return!1;switch(Gn){case"meta":case"title":return!0;case"style":if(typeof Yn.precedence!="string"||typeof Yn.href!="string"||Yn.href==="")break;return!0;case"link":if(typeof Yn.rel!="string"||typeof Yn.href!="string"||Yn.href===""||Yn.onLoad||Yn.onError)break;return Yn.rel==="stylesheet"?(Gn=Yn.disabled,typeof Yn.precedence=="string"&&Gn==null):!0;case"script":if(Yn.async&&typeof Yn.async!="function"&&typeof Yn.async!="symbol"&&!Yn.onLoad&&!Yn.onError&&Yn.src&&typeof Yn.src=="string")return!0}return!1}function DT(Gn){return!(Gn.type==="stylesheet"&&(Gn.state.loading&3)===0)}function sC(Gn,Yn,Zn,Ii){if(Zn.type==="stylesheet"&&(typeof Ii.media!="string"||matchMedia(Ii.media).matches!==!1)&&(Zn.state.loading&4)===0){if(Zn.instance===null){var Di=gp(Ii.href),Oi=Yn.querySelector(lh(Di));if(Oi){Yn=Oi._p,Yn!==null&&typeof Yn=="object"&&typeof Yn.then=="function"&&(Gn.count++,Gn=xm.bind(Gn),Yn.then(Gn,Gn)),Zn.state.loading|=4,Zn.instance=Oi,wl(Oi);return}Oi=Yn.ownerDocument||Yn,Ii=wT(Ii),(Di=gu.get(Di))&&L0(Ii,Di),Oi=Oi.createElement("link"),wl(Oi);var Pi=Oi;Pi._p=new Promise(function(Ui,ns){Pi.onload=Ui,Pi.onerror=ns}),Bl(Oi,"link",Ii),Zn.instance=Oi}Gn.stylesheets===null&&(Gn.stylesheets=new Map),Gn.stylesheets.set(Zn,Yn),(Yn=Zn.state.preload)&&(Zn.state.loading&3)===0&&(Gn.count++,Zn=xm.bind(Gn),Yn.addEventListener("load",Zn),Yn.addEventListener("error",Zn))}}var B0=0;function aC(Gn,Yn){return Gn.stylesheets&&Gn.count===0&&vm(Gn,Gn.stylesheets),0<Gn.count||0<Gn.imgCount?function(Zn){var Ii=setTimeout(function(){if(Gn.stylesheets&&vm(Gn,Gn.stylesheets),Gn.unsuspend){var Oi=Gn.unsuspend;Gn.unsuspend=null,Oi()}},6e4+Yn);0<Gn.imgBytes&&B0===0&&(B0=62500*Fx());var Di=setTimeout(function(){if(Gn.waitingForImages=!1,Gn.count===0&&(Gn.stylesheets&&vm(Gn,Gn.stylesheets),Gn.unsuspend)){var Oi=Gn.unsuspend;Gn.unsuspend=null,Oi()}},(Gn.imgBytes>B0?50:800)+Yn);return Gn.unsuspend=Zn,function(){Gn.unsuspend=null,clearTimeout(Ii),clearTimeout(Di)}}:null}function xm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vm(this,this.stylesheets);else if(this.unsuspend){var Gn=this.unsuspend;this.unsuspend=null,Gn()}}}var Cm=null;function vm(Gn,Yn){Gn.stylesheets=null,Gn.unsuspend!==null&&(Gn.count++,Cm=new Map,Yn.forEach(lC,Gn),Cm=null,xm.call(Gn))}function lC(Gn,Yn){if(!(Yn.state.loading&4)){var Zn=Cm.get(Gn);if(Zn)var Ii=Zn.get(null);else{Zn=new Map,Cm.set(Gn,Zn);for(var Di=Gn.querySelectorAll("link[data-precedence],style[data-precedence]"),Oi=0;Oi<Di.length;Oi++){var Pi=Di[Oi];(Pi.nodeName==="LINK"||Pi.getAttribute("media")!=="not all")&&(Zn.set(Pi.dataset.precedence,Pi),Ii=Pi)}Ii&&Zn.set(null,Ii)}Di=Yn.instance,Pi=Di.getAttribute("data-precedence"),Oi=Zn.get(Pi)||Ii,Oi===Ii&&Zn.set(null,Di),Zn.set(Pi,Di),this.count++,Ii=xm.bind(this),Di.addEventListener("load",Ii),Di.addEventListener("error",Ii),Oi?Oi.parentNode.insertBefore(Di,Oi.nextSibling):(Gn=Gn.nodeType===9?Gn.head:Gn,Gn.insertBefore(Di,Gn.firstChild)),Yn.state.loading|=4}}var uh={$$typeof:Fi,Provider:null,Consumer:null,_currentValue:ds,_currentValue2:ds,_threadCount:0};function cC(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui,ns){this.tag=1,this.containerInfo=Gn,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mm(0),this.hiddenUpdates=Mm(null),this.identifierPrefix=Ii,this.onUncaughtError=Di,this.onCaughtError=Oi,this.onRecoverableError=Pi,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ns,this.incompleteTransitions=new Map}function NT(Gn,Yn,Zn,Ii,Di,Oi,Pi,Ui,ns,hs,Ts,As){return Gn=new cC(Gn,Yn,Zn,Pi,ns,hs,Ts,As,Ui),Yn=1,Oi===!0&&(Yn|=24),Oi=_c(3,null,null,Yn),Gn.current=Oi,Oi.stateNode=Gn,Yn=bg(),Yn.refCount++,Gn.pooledCache=Yn,Yn.refCount++,Oi.memoizedState={element:Ii,isDehydrated:Zn,cache:Yn},Sg(Oi),Gn}function MT(Gn){return Gn?(Gn=Kf,Gn):Kf}function OT(Gn,Yn,Zn,Ii,Di,Oi){Di=MT(Di),Ii.context===null?Ii.context=Di:Ii.pendingContext=Di,Ii=_d(Yn),Ii.payload={element:Zn},Oi=Oi===void 0?null:Oi,Oi!==null&&(Ii.callback=Oi),Zn=ef(Gn,Ii,Yn),Zn!==null&&(Zl(Zn,Gn,Yn),Up(Zn,Gn,Yn))}function $T(Gn,Yn){if(Gn=Gn.memoizedState,Gn!==null&&Gn.dehydrated!==null){var Zn=Gn.retryLane;Gn.retryLane=Zn!==0&&Zn<Yn?Zn:Yn}}function H0(Gn,Yn){$T(Gn,Yn),(Gn=Gn.alternate)&&$T(Gn,Yn)}function LT(Gn){if(Gn.tag===13||Gn.tag===31){var Yn=xf(Gn,67108864);Yn!==null&&Zl(Yn,Gn,67108864),H0(Gn,67108864)}}function PT(Gn){if(Gn.tag===13||Gn.tag===31){var Yn=ou();Yn=Om(Yn);var Zn=xf(Gn,Yn);Zn!==null&&Zl(Zn,Gn,Yn),H0(Gn,Yn)}}var Am=!0;function uC(Gn,Yn,Zn,Ii){var Di=rs.T;rs.T=null;var Oi=cs.p;try{cs.p=2,j0(Gn,Yn,Zn,Ii)}finally{cs.p=Oi,rs.T=Di}}function dC(Gn,Yn,Zn,Ii){var Di=rs.T;rs.T=null;var Oi=cs.p;try{cs.p=8,j0(Gn,Yn,Zn,Ii)}finally{cs.p=Oi,rs.T=Di}}function j0(Gn,Yn,Zn,Ii){if(Am){var Di=F0(Ii);if(Di===null)k0(Gn,Yn,Ii,km,Zn),HT(Gn,Ii);else if(pC(Di,Gn,Yn,Zn,Ii))Ii.stopPropagation();else if(HT(Gn,Ii),Yn&4&&-1<fC.indexOf(Gn)){for(;Di!==null;){var Oi=Pf(Di);if(Oi!==null)switch(Oi.tag){case 3:if(Oi=Oi.stateNode,Oi.current.memoizedState.isDehydrated){var Pi=bf(Oi.pendingLanes);if(Pi!==0){var Ui=Oi;for(Ui.pendingLanes|=2,Ui.entangledLanes|=2;Pi;){var ns=1<<31-Ta(Pi);Ui.entanglements[1]|=ns,Pi&=~ns}Au(Oi),(Qs&6)===0&&(lm=Rl()+500,oh(0))}}break;case 31:case 13:Ui=xf(Oi,2),Ui!==null&&Zl(Ui,Oi,2),um(),H0(Oi,2)}if(Oi=F0(Ii),Oi===null&&k0(Gn,Yn,Ii,km,Zn),Oi===Di)break;Di=Oi}Di!==null&&Ii.stopPropagation()}else k0(Gn,Yn,Ii,null,Zn)}}function F0(Gn){return Gn=zm(Gn),U0(Gn)}var km=null;function U0(Gn){if(km=null,Gn=Lf(Gn),Gn!==null){var Yn=jn(Gn);if(Yn===null)Gn=null;else{var Zn=Yn.tag;if(Zn===13){if(Gn=Un(Yn),Gn!==null)return Gn;Gn=null}else if(Zn===31){if(Gn=zn(Yn),Gn!==null)return Gn;Gn=null}else if(Zn===3){if(Yn.stateNode.current.memoizedState.isDehydrated)return Yn.tag===3?Yn.stateNode.containerInfo:null;Gn=null}else Yn!==Gn&&(Gn=null)}}return km=Gn,null}function BT(Gn){switch(Gn){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xp()){case xs:return 2;case ks:return 8;case Ps:case js:return 32;case Ys:return 268435456;default:return 32}default:return 32}}var z0=!1,ff=null,pf=null,hf=null,dh=new Map,fh=new Map,mf=[],fC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HT(Gn,Yn){switch(Gn){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":pf=null;break;case"mouseover":case"mouseout":hf=null;break;case"pointerover":case"pointerout":dh.delete(Yn.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(Yn.pointerId)}}function ph(Gn,Yn,Zn,Ii,Di,Oi){return Gn===null||Gn.nativeEvent!==Oi?(Gn={blockedOn:Yn,domEventName:Zn,eventSystemFlags:Ii,nativeEvent:Oi,targetContainers:[Di]},Yn!==null&&(Yn=Pf(Yn),Yn!==null&&LT(Yn)),Gn):(Gn.eventSystemFlags|=Ii,Yn=Gn.targetContainers,Di!==null&&Yn.indexOf(Di)===-1&&Yn.push(Di),Gn)}function pC(Gn,Yn,Zn,Ii,Di){switch(Yn){case"focusin":return ff=ph(ff,Gn,Yn,Zn,Ii,Di),!0;case"dragenter":return pf=ph(pf,Gn,Yn,Zn,Ii,Di),!0;case"mouseover":return hf=ph(hf,Gn,Yn,Zn,Ii,Di),!0;case"pointerover":var Oi=Di.pointerId;return dh.set(Oi,ph(dh.get(Oi)||null,Gn,Yn,Zn,Ii,Di)),!0;case"gotpointercapture":return Oi=Di.pointerId,fh.set(Oi,ph(fh.get(Oi)||null,Gn,Yn,Zn,Ii,Di)),!0}return!1}function jT(Gn){var Yn=Lf(Gn.target);if(Yn!==null){var Zn=jn(Yn);if(Zn!==null){if(Yn=Zn.tag,Yn===13){if(Yn=Un(Zn),Yn!==null){Gn.blockedOn=Yn,e1(Gn.priority,function(){PT(Zn)});return}}else if(Yn===31){if(Yn=zn(Zn),Yn!==null){Gn.blockedOn=Yn,e1(Gn.priority,function(){PT(Zn)});return}}else if(Yn===3&&Zn.stateNode.current.memoizedState.isDehydrated){Gn.blockedOn=Zn.tag===3?Zn.stateNode.containerInfo:null;return}}}Gn.blockedOn=null}function wm(Gn){if(Gn.blockedOn!==null)return!1;for(var Yn=Gn.targetContainers;0<Yn.length;){var Zn=F0(Gn.nativeEvent);if(Zn===null){Zn=Gn.nativeEvent;var Ii=new Zn.constructor(Zn.type,Zn);Um=Ii,Zn.target.dispatchEvent(Ii),Um=null}else return Yn=Pf(Zn),Yn!==null&&LT(Yn),Gn.blockedOn=Zn,!1;Yn.shift()}return!0}function FT(Gn,Yn,Zn){wm(Gn)&&Zn.delete(Yn)}function hC(){z0=!1,ff!==null&&wm(ff)&&(ff=null),pf!==null&&wm(pf)&&(pf=null),hf!==null&&wm(hf)&&(hf=null),dh.forEach(FT),fh.forEach(FT)}function _m(Gn,Yn){Gn.blockedOn===Yn&&(Gn.blockedOn=null,z0||(z0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hC)))}var Im=null;function UT(Gn){Im!==Gn&&(Im=Gn,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Im===Gn&&(Im=null);for(var Yn=0;Yn<Gn.length;Yn+=3){var Zn=Gn[Yn],Ii=Gn[Yn+1],Di=Gn[Yn+2];if(typeof Ii!="function"){if(U0(Ii||Zn)===null)continue;break}var Oi=Pf(Zn);Oi!==null&&(Gn.splice(Yn,3),Yn-=3,Fg(Oi,{pending:!0,data:Di,method:Zn.method,action:Ii},Ii,Di))}}))}function yp(Gn){function Yn(ns){return _m(ns,Gn)}ff!==null&&_m(ff,Gn),pf!==null&&_m(pf,Gn),hf!==null&&_m(hf,Gn),dh.forEach(Yn),fh.forEach(Yn);for(var Zn=0;Zn<mf.length;Zn++){var Ii=mf[Zn];Ii.blockedOn===Gn&&(Ii.blockedOn=null)}for(;0<mf.length&&(Zn=mf[0],Zn.blockedOn===null);)jT(Zn),Zn.blockedOn===null&&mf.shift();if(Zn=(Gn.ownerDocument||Gn).$$reactFormReplay,Zn!=null)for(Ii=0;Ii<Zn.length;Ii+=3){var Di=Zn[Ii],Oi=Zn[Ii+1],Pi=Di[ql]||null;if(typeof Oi=="function")Pi||UT(Zn);else if(Pi){var Ui=null;if(Oi&&Oi.hasAttribute("formAction")){if(Di=Oi,Pi=Oi[ql]||null)Ui=Pi.formAction;else if(U0(Di)!==null)continue}else Ui=Pi.action;typeof Ui=="function"?Zn[Ii+1]=Ui:(Zn.splice(Ii,3),Ii-=3),UT(Zn)}}}function zT(){function Gn(Oi){Oi.canIntercept&&Oi.info==="react-transition"&&Oi.intercept({handler:function(){return new Promise(function(Pi){return Di=Pi})},focusReset:"manual",scroll:"manual"})}function Yn(){Di!==null&&(Di(),Di=null),Ii||setTimeout(Zn,20)}function Zn(){if(!Ii&&!navigation.transition){var Oi=navigation.currentEntry;Oi&&Oi.url!=null&&navigation.navigate(Oi.url,{state:Oi.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Ii=!1,Di=null;return navigation.addEventListener("navigate",Gn),navigation.addEventListener("navigatesuccess",Yn),navigation.addEventListener("navigateerror",Yn),setTimeout(Zn,100),function(){Ii=!0,navigation.removeEventListener("navigate",Gn),navigation.removeEventListener("navigatesuccess",Yn),navigation.removeEventListener("navigateerror",Yn),Di!==null&&(Di(),Di=null)}}}function V0(Gn){this._internalRoot=Gn}Rm.prototype.render=V0.prototype.render=function(Gn){var Yn=this._internalRoot;if(Yn===null)throw Error(d(409));var Zn=Yn.current,Ii=ou();OT(Zn,Ii,Gn,Yn,null,null)},Rm.prototype.unmount=V0.prototype.unmount=function(){var Gn=this._internalRoot;if(Gn!==null){this._internalRoot=null;var Yn=Gn.containerInfo;OT(Gn.current,2,null,Gn,null,null),um(),Yn[$f]=null}};function Rm(Gn){this._internalRoot=Gn}Rm.prototype.unstable_scheduleHydration=function(Gn){if(Gn){var Yn=J0();Gn={blockedOn:null,target:Gn,priority:Yn};for(var Zn=0;Zn<mf.length&&Yn!==0&&Yn<mf[Zn].priority;Zn++);mf.splice(Zn,0,Gn),Zn===0&&jT(Gn)}};var VT=n.version;if(VT!=="19.2.3")throw Error(d(527,VT,"19.2.3"));cs.findDOMNode=function(Gn){var Yn=Gn._reactInternals;if(Yn===void 0)throw typeof Gn.render=="function"?Error(d(188)):(Gn=Object.keys(Gn).join(","),Error(d(268,Gn)));return Gn=Kn(Yn),Gn=Gn!==null?Xn(Gn):null,Gn=Gn===null?null:Gn.stateNode,Gn};var mC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:rs,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dm.isDisabled&&Dm.supportsFiber)try{zl=Dm.inject(mC),Al=Dm}catch{}}return reactDomClient_production.createRoot=function(Gn,Yn){if(!g(Gn))throw Error(d(299));var Zn=!1,Ii="",Di=Xy,Oi=Qy,Pi=Zy;return Yn!=null&&(Yn.unstable_strictMode===!0&&(Zn=!0),Yn.identifierPrefix!==void 0&&(Ii=Yn.identifierPrefix),Yn.onUncaughtError!==void 0&&(Di=Yn.onUncaughtError),Yn.onCaughtError!==void 0&&(Oi=Yn.onCaughtError),Yn.onRecoverableError!==void 0&&(Pi=Yn.onRecoverableError)),Yn=NT(Gn,1,!1,null,null,Zn,Ii,null,Di,Oi,Pi,zT),Gn[$f]=Yn.current,A0(Gn),new V0(Yn)},reactDomClient_production.hydrateRoot=function(Gn,Yn,Zn){if(!g(Gn))throw Error(d(299));var Ii=!1,Di="",Oi=Xy,Pi=Qy,Ui=Zy,ns=null;return Zn!=null&&(Zn.unstable_strictMode===!0&&(Ii=!0),Zn.identifierPrefix!==void 0&&(Di=Zn.identifierPrefix),Zn.onUncaughtError!==void 0&&(Oi=Zn.onUncaughtError),Zn.onCaughtError!==void 0&&(Pi=Zn.onCaughtError),Zn.onRecoverableError!==void 0&&(Ui=Zn.onRecoverableError),Zn.formState!==void 0&&(ns=Zn.formState)),Yn=NT(Gn,1,!0,Yn,Zn??null,Ii,Di,ns,Oi,Pi,Ui,zT),Yn.context=MT(null),Zn=Yn.current,Ii=ou(),Ii=Om(Ii),Di=_d(Ii),Di.callback=null,ef(Zn,Di,Ii),Zn=Ii,Yn.current.lanes=Zn,vp(Yn,Zn),Au(Yn),Gn[$f]=Yn.current,A0(Gn),new Rm(Yn)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM$1=getDefaultExportFromCjs(clientExports);var compilerRuntime={exports:{}},reactCompilerRuntime_production={};var hasRequiredReactCompilerRuntime_production;function requireReactCompilerRuntime_production(){if(hasRequiredReactCompilerRuntime_production)return reactCompilerRuntime_production;hasRequiredReactCompilerRuntime_production=1;var e=requireReact().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return reactCompilerRuntime_production.c=function(n){return e.H.useMemoCache(n)},reactCompilerRuntime_production}var hasRequiredCompilerRuntime;function requireCompilerRuntime(){return hasRequiredCompilerRuntime||(hasRequiredCompilerRuntime=1,compilerRuntime.exports=requireReactCompilerRuntime_production()),compilerRuntime.exports}var compilerRuntimeExports=requireCompilerRuntime();function OrderedMap(e){this.content=e}OrderedMap.prototype={constructor:OrderedMap,find:function(e){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===e)return n;return-1},get:function(e){var n=this.find(e);return n==-1?void 0:this.content[n+1]},update:function(e,n,l){var d=l&&l!=e?this.remove(l):this,g=d.find(e),jn=d.content.slice();return g==-1?jn.push(l||e,n):(jn[g+1]=n,l&&(jn[g]=l)),new OrderedMap(jn)},remove:function(e){var n=this.find(e);if(n==-1)return this;var l=this.content.slice();return l.splice(n,2),new OrderedMap(l)},addToStart:function(e,n){return new OrderedMap([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var l=this.remove(e).content.slice();return l.push(e,n),new OrderedMap(l)},addBefore:function(e,n,l){var d=this.remove(n),g=d.content.slice(),jn=d.find(e);return g.splice(jn==-1?g.length:jn,0,n,l),new OrderedMap(g)},forEach:function(e){for(var n=0;n<this.content.length;n+=2)e(this.content[n],this.content[n+1])},prepend:function(e){return e=OrderedMap.from(e),e.size?new OrderedMap(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=OrderedMap.from(e),e.size?new OrderedMap(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=OrderedMap.from(e);for(var l=0;l<e.content.length;l+=2)n=n.remove(e.content[l]);return n},toObject:function(){var e={};return this.forEach(function(n,l){e[n]=l}),e},get size(){return this.content.length>>1}};OrderedMap.from=function(e){if(e instanceof OrderedMap)return e;var n=[];if(e)for(var l in e)n.push(l,e[l]);return new OrderedMap(n)};function findDiffStart(e,n,l){for(let d=0;;d++){if(d==e.childCount||d==n.childCount)return e.childCount==n.childCount?null:l;let g=e.child(d),jn=n.child(d);if(g==jn){l+=g.nodeSize;continue}if(!g.sameMarkup(jn))return l;if(g.isText&&g.text!=jn.text){for(let Un=0;g.text[Un]==jn.text[Un];Un++)l++;return l}if(g.content.size||jn.content.size){let Un=findDiffStart(g.content,jn.content,l+1);if(Un!=null)return Un}l+=g.nodeSize}}function findDiffEnd(e,n,l,d){for(let g=e.childCount,jn=n.childCount;;){if(g==0||jn==0)return g==jn?null:{a:l,b:d};let Un=e.child(--g),zn=n.child(--jn),qn=Un.nodeSize;if(Un==zn){l-=qn,d-=qn;continue}if(!Un.sameMarkup(zn))return{a:l,b:d};if(Un.isText&&Un.text!=zn.text){let Kn=0,Xn=Math.min(Un.text.length,zn.text.length);for(;Kn<Xn&&Un.text[Un.text.length-Kn-1]==zn.text[zn.text.length-Kn-1];)Kn++,l--,d--;return{a:l,b:d}}if(Un.content.size||zn.content.size){let Kn=findDiffEnd(Un.content,zn.content,l-1,d-1);if(Kn)return Kn}l-=qn,d-=qn}}class Fragment{constructor(n,l){if(this.content=n,this.size=l||0,l==null)for(let d=0;d<n.length;d++)this.size+=n[d].nodeSize}nodesBetween(n,l,d,g=0,jn){for(let Un=0,zn=0;zn<l;Un++){let qn=this.content[Un],Kn=zn+qn.nodeSize;if(Kn>n&&d(qn,g+zn,jn||null,Un)!==!1&&qn.content.size){let Xn=zn+1;qn.nodesBetween(Math.max(0,n-Xn),Math.min(qn.content.size,l-Xn),d,g+Xn)}zn=Kn}}descendants(n){this.nodesBetween(0,this.size,n)}textBetween(n,l,d,g){let jn="",Un=!0;return this.nodesBetween(n,l,(zn,qn)=>{let Kn=zn.isText?zn.text.slice(Math.max(n,qn)-qn,l-qn):zn.isLeaf?g?typeof g=="function"?g(zn):g:zn.type.spec.leafText?zn.type.spec.leafText(zn):"":"";zn.isBlock&&(zn.isLeaf&&Kn||zn.isTextblock)&&d&&(Un?Un=!1:jn+=d),jn+=Kn},0),jn}append(n){if(!n.size)return this;if(!this.size)return n;let l=this.lastChild,d=n.firstChild,g=this.content.slice(),jn=0;for(l.isText&&l.sameMarkup(d)&&(g[g.length-1]=l.withText(l.text+d.text),jn=1);jn<n.content.length;jn++)g.push(n.content[jn]);return new Fragment(g,this.size+n.size)}cut(n,l=this.size){if(n==0&&l==this.size)return this;let d=[],g=0;if(l>n)for(let jn=0,Un=0;Un<l;jn++){let zn=this.content[jn],qn=Un+zn.nodeSize;qn>n&&((Un<n||qn>l)&&(zn.isText?zn=zn.cut(Math.max(0,n-Un),Math.min(zn.text.length,l-Un)):zn=zn.cut(Math.max(0,n-Un-1),Math.min(zn.content.size,l-Un-1))),d.push(zn),g+=zn.nodeSize),Un=qn}return new Fragment(d,g)}cutByIndex(n,l){return n==l?Fragment.empty:n==0&&l==this.content.length?this:new Fragment(this.content.slice(n,l))}replaceChild(n,l){let d=this.content[n];if(d==l)return this;let g=this.content.slice(),jn=this.size+l.nodeSize-d.nodeSize;return g[n]=l,new Fragment(g,jn)}addToStart(n){return new Fragment([n].concat(this.content),this.size+n.nodeSize)}addToEnd(n){return new Fragment(this.content.concat(n),this.size+n.nodeSize)}eq(n){if(this.content.length!=n.content.length)return!1;for(let l=0;l<this.content.length;l++)if(!this.content[l].eq(n.content[l]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(n){let l=this.content[n];if(!l)throw new RangeError("Index "+n+" out of range for "+this);return l}maybeChild(n){return this.content[n]||null}forEach(n){for(let l=0,d=0;l<this.content.length;l++){let g=this.content[l];n(g,d,l),d+=g.nodeSize}}findDiffStart(n,l=0){return findDiffStart(this,n,l)}findDiffEnd(n,l=this.size,d=n.size){return findDiffEnd(this,n,l,d)}findIndex(n){if(n==0)return retIndex(0,n);if(n==this.size)return retIndex(this.content.length,n);if(n>this.size||n<0)throw new RangeError(`Position ${n} outside of fragment (${this})`);for(let l=0,d=0;;l++){let g=this.child(l),jn=d+g.nodeSize;if(jn>=n)return jn==n?retIndex(l+1,jn):retIndex(l,d);d=jn}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(n,l){if(!l)return Fragment.empty;if(!Array.isArray(l))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(l.map(n.nodeFromJSON))}static fromArray(n){if(!n.length)return Fragment.empty;let l,d=0;for(let g=0;g<n.length;g++){let jn=n[g];d+=jn.nodeSize,g&&jn.isText&&n[g-1].sameMarkup(jn)?(l||(l=n.slice(0,g)),l[l.length-1]=jn.withText(l[l.length-1].text+jn.text)):l&&l.push(jn)}return new Fragment(l||n,d)}static from(n){if(!n)return Fragment.empty;if(n instanceof Fragment)return n;if(Array.isArray(n))return this.fromArray(n);if(n.attrs)return new Fragment([n],n.nodeSize);throw new RangeError("Can not convert "+n+" to a Fragment"+(n.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(e,n){return found.index=e,found.offset=n,found}function compareDeep(e,n){if(e===n)return!0;if(!(e&&typeof e=="object")||!(n&&typeof n=="object"))return!1;let l=Array.isArray(e);if(Array.isArray(n)!=l)return!1;if(l){if(e.length!=n.length)return!1;for(let d=0;d<e.length;d++)if(!compareDeep(e[d],n[d]))return!1}else{for(let d in e)if(!(d in n)||!compareDeep(e[d],n[d]))return!1;for(let d in n)if(!(d in e))return!1}return!0}let Mark$1=class G0{constructor(n,l){this.type=n,this.attrs=l}addToSet(n){let l,d=!1;for(let g=0;g<n.length;g++){let jn=n[g];if(this.eq(jn))return n;if(this.type.excludes(jn.type))l||(l=n.slice(0,g));else{if(jn.type.excludes(this.type))return n;!d&&jn.type.rank>this.type.rank&&(l||(l=n.slice(0,g)),l.push(this),d=!0),l&&l.push(jn)}}return l||(l=n.slice()),d||l.push(this),l}removeFromSet(n){for(let l=0;l<n.length;l++)if(this.eq(n[l]))return n.slice(0,l).concat(n.slice(l+1));return n}isInSet(n){for(let l=0;l<n.length;l++)if(this.eq(n[l]))return!0;return!1}eq(n){return this==n||this.type==n.type&&compareDeep(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let l in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,l){if(!l)throw new RangeError("Invalid input for Mark.fromJSON");let d=n.marks[l.type];if(!d)throw new RangeError(`There is no mark type ${l.type} in this schema`);let g=d.create(l.attrs);return d.checkAttrs(g.attrs),g}static sameSet(n,l){if(n==l)return!0;if(n.length!=l.length)return!1;for(let d=0;d<n.length;d++)if(!n[d].eq(l[d]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return G0.none;if(n instanceof G0)return[n];let l=n.slice();return l.sort((d,g)=>d.type.rank-g.type.rank),l}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(n,l,d){this.content=n,this.openStart=l,this.openEnd=d}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(n,l){let d=insertInto(this.content,n+this.openStart,l);return d&&new Slice(d,this.openStart,this.openEnd)}removeBetween(n,l){return new Slice(removeRange(this.content,n+this.openStart,l+this.openStart),this.openStart,this.openEnd)}eq(n){return this.content.eq(n.content)&&this.openStart==n.openStart&&this.openEnd==n.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let n={content:this.content.toJSON()};return this.openStart>0&&(n.openStart=this.openStart),this.openEnd>0&&(n.openEnd=this.openEnd),n}static fromJSON(n,l){if(!l)return Slice.empty;let d=l.openStart||0,g=l.openEnd||0;if(typeof d!="number"||typeof g!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(n,l.content),d,g)}static maxOpen(n,l=!0){let d=0,g=0;for(let jn=n.firstChild;jn&&!jn.isLeaf&&(l||!jn.type.spec.isolating);jn=jn.firstChild)d++;for(let jn=n.lastChild;jn&&!jn.isLeaf&&(l||!jn.type.spec.isolating);jn=jn.lastChild)g++;return new Slice(n,d,g)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(e,n,l){let{index:d,offset:g}=e.findIndex(n),jn=e.maybeChild(d),{index:Un,offset:zn}=e.findIndex(l);if(g==n||jn.isText){if(zn!=l&&!e.child(Un).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(l))}if(d!=Un)throw new RangeError("Removing non-flat range");return e.replaceChild(d,jn.copy(removeRange(jn.content,n-g-1,l-g-1)))}function insertInto(e,n,l,d){let{index:g,offset:jn}=e.findIndex(n),Un=e.maybeChild(g);if(jn==n||Un.isText)return d&&!d.canReplace(g,g,l)?null:e.cut(0,n).append(l).append(e.cut(n));let zn=insertInto(Un.content,n-jn-1,l,Un);return zn&&e.replaceChild(g,Un.copy(zn))}function replace$1(e,n,l){if(l.openStart>e.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(e.depth-l.openStart!=n.depth-l.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(e,n,l,0)}function replaceOuter(e,n,l,d){let g=e.index(d),jn=e.node(d);if(g==n.index(d)&&d<e.depth-l.openStart){let Un=replaceOuter(e,n,l,d+1);return jn.copy(jn.content.replaceChild(g,Un))}else if(l.content.size)if(!l.openStart&&!l.openEnd&&e.depth==d&&n.depth==d){let Un=e.parent,zn=Un.content;return close(Un,zn.cut(0,e.parentOffset).append(l.content).append(zn.cut(n.parentOffset)))}else{let{start:Un,end:zn}=prepareSliceForReplace(l,e);return close(jn,replaceThreeWay(e,Un,zn,n,d))}else return close(jn,replaceTwoWay(e,n,d))}function checkJoin(e,n){if(!n.type.compatibleContent(e.type))throw new ReplaceError("Cannot join "+n.type.name+" onto "+e.type.name)}function joinable$1(e,n,l){let d=e.node(l);return checkJoin(d,n.node(l)),d}function addNode(e,n){let l=n.length-1;l>=0&&e.isText&&e.sameMarkup(n[l])?n[l]=e.withText(n[l].text+e.text):n.push(e)}function addRange(e,n,l,d){let g=(n||e).node(l),jn=0,Un=n?n.index(l):g.childCount;e&&(jn=e.index(l),e.depth>l?jn++:e.textOffset&&(addNode(e.nodeAfter,d),jn++));for(let zn=jn;zn<Un;zn++)addNode(g.child(zn),d);n&&n.depth==l&&n.textOffset&&addNode(n.nodeBefore,d)}function close(e,n){return e.type.checkContent(n),e.copy(n)}function replaceThreeWay(e,n,l,d,g){let jn=e.depth>g&&joinable$1(e,n,g+1),Un=d.depth>g&&joinable$1(l,d,g+1),zn=[];return addRange(null,e,g,zn),jn&&Un&&n.index(g)==l.index(g)?(checkJoin(jn,Un),addNode(close(jn,replaceThreeWay(e,n,l,d,g+1)),zn)):(jn&&addNode(close(jn,replaceTwoWay(e,n,g+1)),zn),addRange(n,l,g,zn),Un&&addNode(close(Un,replaceTwoWay(l,d,g+1)),zn)),addRange(d,null,g,zn),new Fragment(zn)}function replaceTwoWay(e,n,l){let d=[];if(addRange(null,e,l,d),e.depth>l){let g=joinable$1(e,n,l+1);addNode(close(g,replaceTwoWay(e,n,l+1)),d)}return addRange(n,null,l,d),new Fragment(d)}function prepareSliceForReplace(e,n){let l=n.depth-e.openStart,g=n.node(l).copy(e.content);for(let jn=l-1;jn>=0;jn--)g=n.node(jn).copy(Fragment.from(g));return{start:g.resolveNoCache(e.openStart+l),end:g.resolveNoCache(g.content.size-e.openEnd-l)}}class ResolvedPos{constructor(n,l,d){this.pos=n,this.path=l,this.parentOffset=d,this.depth=l.length/3-1}resolveDepth(n){return n==null?this.depth:n<0?this.depth+n:n}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(n){return this.path[this.resolveDepth(n)*3]}index(n){return this.path[this.resolveDepth(n)*3+1]}indexAfter(n){return n=this.resolveDepth(n),this.index(n)+(n==this.depth&&!this.textOffset?0:1)}start(n){return n=this.resolveDepth(n),n==0?0:this.path[n*3-1]+1}end(n){return n=this.resolveDepth(n),this.start(n)+this.node(n).content.size}before(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position before the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]}after(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position after the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]+this.path[n*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let n=this.parent,l=this.index(this.depth);if(l==n.childCount)return null;let d=this.pos-this.path[this.path.length-1],g=n.child(l);return d?n.child(l).cut(d):g}get nodeBefore(){let n=this.index(this.depth),l=this.pos-this.path[this.path.length-1];return l?this.parent.child(n).cut(0,l):n==0?null:this.parent.child(n-1)}posAtIndex(n,l){l=this.resolveDepth(l);let d=this.path[l*3],g=l==0?0:this.path[l*3-1]+1;for(let jn=0;jn<n;jn++)g+=d.child(jn).nodeSize;return g}marks(){let n=this.parent,l=this.index();if(n.content.size==0)return Mark$1.none;if(this.textOffset)return n.child(l).marks;let d=n.maybeChild(l-1),g=n.maybeChild(l);if(!d){let zn=d;d=g,g=zn}let jn=d.marks;for(var Un=0;Un<jn.length;Un++)jn[Un].type.spec.inclusive===!1&&(!g||!jn[Un].isInSet(g.marks))&&(jn=jn[Un--].removeFromSet(jn));return jn}marksAcross(n){let l=this.parent.maybeChild(this.index());if(!l||!l.isInline)return null;let d=l.marks,g=n.parent.maybeChild(n.index());for(var jn=0;jn<d.length;jn++)d[jn].type.spec.inclusive===!1&&(!g||!d[jn].isInSet(g.marks))&&(d=d[jn--].removeFromSet(d));return d}sharedDepth(n){for(let l=this.depth;l>0;l--)if(this.start(l)<=n&&this.end(l)>=n)return l;return 0}blockRange(n=this,l){if(n.pos<this.pos)return n.blockRange(this);for(let d=this.depth-(this.parent.inlineContent||this.pos==n.pos?1:0);d>=0;d--)if(n.pos<=this.end(d)&&(!l||l(this.node(d))))return new NodeRange(this,n,d);return null}sameParent(n){return this.pos-this.parentOffset==n.pos-n.parentOffset}max(n){return n.pos>this.pos?n:this}min(n){return n.pos<this.pos?n:this}toString(){let n="";for(let l=1;l<=this.depth;l++)n+=(n?"/":"")+this.node(l).type.name+"_"+this.index(l-1);return n+":"+this.parentOffset}static resolve(n,l){if(!(l>=0&&l<=n.content.size))throw new RangeError("Position "+l+" out of range");let d=[],g=0,jn=l;for(let Un=n;;){let{index:zn,offset:qn}=Un.content.findIndex(jn),Kn=jn-qn;if(d.push(Un,zn,g+qn),!Kn||(Un=Un.child(zn),Un.isText))break;jn=Kn-1,g+=qn+1}return new ResolvedPos(l,d,jn)}static resolveCached(n,l){let d=resolveCache.get(n);if(d)for(let jn=0;jn<d.elts.length;jn++){let Un=d.elts[jn];if(Un.pos==l)return Un}else resolveCache.set(n,d=new ResolveCache);let g=d.elts[d.i]=ResolvedPos.resolve(n,l);return d.i=(d.i+1)%resolveCacheSize,g}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(n,l,d){this.$from=n,this.$to=l,this.depth=d}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class q0{constructor(n,l,d,g=Mark$1.none){this.type=n,this.attrs=l,this.marks=g,this.content=d||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(n){return this.content.child(n)}maybeChild(n){return this.content.maybeChild(n)}forEach(n){this.content.forEach(n)}nodesBetween(n,l,d,g=0){this.content.nodesBetween(n,l,d,g,this)}descendants(n){this.nodesBetween(0,this.content.size,n)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(n,l,d,g){return this.content.textBetween(n,l,d,g)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(n){return this==n||this.sameMarkup(n)&&this.content.eq(n.content)}sameMarkup(n){return this.hasMarkup(n.type,n.attrs,n.marks)}hasMarkup(n,l,d){return this.type==n&&compareDeep(this.attrs,l||n.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,d||Mark$1.none)}copy(n=null){return n==this.content?this:new q0(this.type,this.attrs,n,this.marks)}mark(n){return n==this.marks?this:new q0(this.type,this.attrs,this.content,n)}cut(n,l=this.content.size){return n==0&&l==this.content.size?this:this.copy(this.content.cut(n,l))}slice(n,l=this.content.size,d=!1){if(n==l)return Slice.empty;let g=this.resolve(n),jn=this.resolve(l),Un=d?0:g.sharedDepth(l),zn=g.start(Un),Kn=g.node(Un).content.cut(g.pos-zn,jn.pos-zn);return new Slice(Kn,g.depth-Un,jn.depth-Un)}replace(n,l,d){return replace$1(this.resolve(n),this.resolve(l),d)}nodeAt(n){for(let l=this;;){let{index:d,offset:g}=l.content.findIndex(n);if(l=l.maybeChild(d),!l)return null;if(g==n||l.isText)return l;n-=g+1}}childAfter(n){let{index:l,offset:d}=this.content.findIndex(n);return{node:this.content.maybeChild(l),index:l,offset:d}}childBefore(n){if(n==0)return{node:null,index:0,offset:0};let{index:l,offset:d}=this.content.findIndex(n);if(d<n)return{node:this.content.child(l),index:l,offset:d};let g=this.content.child(l-1);return{node:g,index:l-1,offset:d-g.nodeSize}}resolve(n){return ResolvedPos.resolveCached(this,n)}resolveNoCache(n){return ResolvedPos.resolve(this,n)}rangeHasMark(n,l,d){let g=!1;return l>n&&this.nodesBetween(n,l,jn=>(d.isInSet(jn.marks)&&(g=!0),!g)),g}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let n=this.type.name;return this.content.size&&(n+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,n)}contentMatchAt(n){let l=this.type.contentMatch.matchFragment(this.content,0,n);if(!l)throw new Error("Called contentMatchAt on a node with invalid content");return l}canReplace(n,l,d=Fragment.empty,g=0,jn=d.childCount){let Un=this.contentMatchAt(n).matchFragment(d,g,jn),zn=Un&&Un.matchFragment(this.content,l);if(!zn||!zn.validEnd)return!1;for(let qn=g;qn<jn;qn++)if(!this.type.allowsMarks(d.child(qn).marks))return!1;return!0}canReplaceWith(n,l,d,g){if(g&&!this.type.allowsMarks(g))return!1;let jn=this.contentMatchAt(n).matchType(d),Un=jn&&jn.matchFragment(this.content,l);return Un?Un.validEnd:!1}canAppend(n){return n.content.size?this.canReplace(this.childCount,this.childCount,n.content):this.type.compatibleContent(n.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let n=Mark$1.none;for(let l=0;l<this.marks.length;l++){let d=this.marks[l];d.type.checkAttrs(d.attrs),n=d.addToSet(n)}if(!Mark$1.sameSet(n,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(l=>l.type.name)}`);this.content.forEach(l=>l.check())}toJSON(){let n={type:this.type.name};for(let l in this.attrs){n.attrs=this.attrs;break}return this.content.size&&(n.content=this.content.toJSON()),this.marks.length&&(n.marks=this.marks.map(l=>l.toJSON())),n}static fromJSON(n,l){if(!l)throw new RangeError("Invalid input for Node.fromJSON");let d;if(l.marks){if(!Array.isArray(l.marks))throw new RangeError("Invalid mark data for Node.fromJSON");d=l.marks.map(n.markFromJSON)}if(l.type=="text"){if(typeof l.text!="string")throw new RangeError("Invalid text node in JSON");return n.text(l.text,d)}let g=Fragment.fromJSON(n,l.content),jn=n.nodeType(l.type).create(l.attrs,g,d);return jn.type.checkAttrs(jn.attrs),jn}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(n,l,d,g){if(super(n,l,null,g),!d)throw new RangeError("Empty text nodes are not allowed");this.text=d}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(n,l){return this.text.slice(n,l)}get nodeSize(){return this.text.length}mark(n){return n==this.marks?this:new TextNode(this.type,this.attrs,this.text,n)}withText(n){return n==this.text?this:new TextNode(this.type,this.attrs,n,this.marks)}cut(n=0,l=this.text.length){return n==0&&l==this.text.length?this:this.withText(this.text.slice(n,l))}eq(n){return this.sameMarkup(n)&&this.text==n.text}toJSON(){let n=super.toJSON();return n.text=this.text,n}}function wrapMarks(e,n){for(let l=e.length-1;l>=0;l--)n=e[l].type.name+"("+n+")";return n}class ContentMatch{constructor(n){this.validEnd=n,this.next=[],this.wrapCache=[]}static parse(n,l){let d=new TokenStream(n,l);if(d.next==null)return ContentMatch.empty;let g=parseExpr(d);d.next&&d.err("Unexpected trailing text");let jn=dfa(nfa(g));return checkForDeadEnds(jn,d),jn}matchType(n){for(let l=0;l<this.next.length;l++)if(this.next[l].type==n)return this.next[l].next;return null}matchFragment(n,l=0,d=n.childCount){let g=this;for(let jn=l;g&&jn<d;jn++)g=g.matchType(n.child(jn).type);return g}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let n=0;n<this.next.length;n++){let{type:l}=this.next[n];if(!(l.isText||l.hasRequiredAttrs()))return l}return null}compatible(n){for(let l=0;l<this.next.length;l++)for(let d=0;d<n.next.length;d++)if(this.next[l].type==n.next[d].type)return!0;return!1}fillBefore(n,l=!1,d=0){let g=[this];function jn(Un,zn){let qn=Un.matchFragment(n,d);if(qn&&(!l||qn.validEnd))return Fragment.from(zn.map(Kn=>Kn.createAndFill()));for(let Kn=0;Kn<Un.next.length;Kn++){let{type:Xn,next:Qn}=Un.next[Kn];if(!(Xn.isText||Xn.hasRequiredAttrs())&&g.indexOf(Qn)==-1){g.push(Qn);let Jn=jn(Qn,zn.concat(Xn));if(Jn)return Jn}}return null}return jn(this,[])}findWrapping(n){for(let d=0;d<this.wrapCache.length;d+=2)if(this.wrapCache[d]==n)return this.wrapCache[d+1];let l=this.computeWrapping(n);return this.wrapCache.push(n,l),l}computeWrapping(n){let l=Object.create(null),d=[{match:this,type:null,via:null}];for(;d.length;){let g=d.shift(),jn=g.match;if(jn.matchType(n)){let Un=[];for(let zn=g;zn.type;zn=zn.via)Un.push(zn.type);return Un.reverse()}for(let Un=0;Un<jn.next.length;Un++){let{type:zn,next:qn}=jn.next[Un];!zn.isLeaf&&!zn.hasRequiredAttrs()&&!(zn.name in l)&&(!g.type||qn.validEnd)&&(d.push({match:zn.contentMatch,type:zn,via:g}),l[zn.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let n=[];function l(d){n.push(d);for(let g=0;g<d.next.length;g++)n.indexOf(d.next[g].next)==-1&&l(d.next[g].next)}return l(this),n.map((d,g)=>{let jn=g+(d.validEnd?"*":" ")+" ";for(let Un=0;Un<d.next.length;Un++)jn+=(Un?", ":"")+d.next[Un].type.name+"->"+n.indexOf(d.next[Un].next);return jn}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(n,l){this.string=n,this.nodeTypes=l,this.inline=null,this.pos=0,this.tokens=n.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(n){return this.next==n&&(this.pos++||!0)}err(n){throw new SyntaxError(n+" (in content expression '"+this.string+"')")}}function parseExpr(e){let n=[];do n.push(parseExprSeq(e));while(e.eat("|"));return n.length==1?n[0]:{type:"choice",exprs:n}}function parseExprSeq(e){let n=[];do n.push(parseExprSubscript(e));while(e.next&&e.next!=")"&&e.next!="|");return n.length==1?n[0]:{type:"seq",exprs:n}}function parseExprSubscript(e){let n=parseExprAtom(e);for(;;)if(e.eat("+"))n={type:"plus",expr:n};else if(e.eat("*"))n={type:"star",expr:n};else if(e.eat("?"))n={type:"opt",expr:n};else if(e.eat("{"))n=parseExprRange(e,n);else break;return n}function parseNum(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let n=Number(e.next);return e.pos++,n}function parseExprRange(e,n){let l=parseNum(e),d=l;return e.eat(",")&&(e.next!="}"?d=parseNum(e):d=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:l,max:d,expr:n}}function resolveName(e,n){let l=e.nodeTypes,d=l[n];if(d)return[d];let g=[];for(let jn in l){let Un=l[jn];Un.isInGroup(n)&&g.push(Un)}return g.length==0&&e.err("No node type or group '"+n+"' found"),g}function parseExprAtom(e){if(e.eat("(")){let n=parseExpr(e);return e.eat(")")||e.err("Missing closing paren"),n}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let n=resolveName(e,e.next).map(l=>(e.inline==null?e.inline=l.isInline:e.inline!=l.isInline&&e.err("Mixing inline and block content"),{type:"name",value:l}));return e.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function nfa(e){let n=[[]];return g(jn(e,0),l()),n;function l(){return n.push([])-1}function d(Un,zn,qn){let Kn={term:qn,to:zn};return n[Un].push(Kn),Kn}function g(Un,zn){Un.forEach(qn=>qn.to=zn)}function jn(Un,zn){if(Un.type=="choice")return Un.exprs.reduce((qn,Kn)=>qn.concat(jn(Kn,zn)),[]);if(Un.type=="seq")for(let qn=0;;qn++){let Kn=jn(Un.exprs[qn],zn);if(qn==Un.exprs.length-1)return Kn;g(Kn,zn=l())}else if(Un.type=="star"){let qn=l();return d(zn,qn),g(jn(Un.expr,qn),qn),[d(qn)]}else if(Un.type=="plus"){let qn=l();return g(jn(Un.expr,zn),qn),g(jn(Un.expr,qn),qn),[d(qn)]}else{if(Un.type=="opt")return[d(zn)].concat(jn(Un.expr,zn));if(Un.type=="range"){let qn=zn;for(let Kn=0;Kn<Un.min;Kn++){let Xn=l();g(jn(Un.expr,qn),Xn),qn=Xn}if(Un.max==-1)g(jn(Un.expr,qn),qn);else for(let Kn=Un.min;Kn<Un.max;Kn++){let Xn=l();d(qn,Xn),g(jn(Un.expr,qn),Xn),qn=Xn}return[d(qn)]}else{if(Un.type=="name")return[d(zn,void 0,Un.value)];throw new Error("Unknown expr type")}}}}function cmp(e,n){return n-e}function nullFrom(e,n){let l=[];return d(n),l.sort(cmp);function d(g){let jn=e[g];if(jn.length==1&&!jn[0].term)return d(jn[0].to);l.push(g);for(let Un=0;Un<jn.length;Un++){let{term:zn,to:qn}=jn[Un];!zn&&l.indexOf(qn)==-1&&d(qn)}}}function dfa(e){let n=Object.create(null);return l(nullFrom(e,0));function l(d){let g=[];d.forEach(Un=>{e[Un].forEach(({term:zn,to:qn})=>{if(!zn)return;let Kn;for(let Xn=0;Xn<g.length;Xn++)g[Xn][0]==zn&&(Kn=g[Xn][1]);nullFrom(e,qn).forEach(Xn=>{Kn||g.push([zn,Kn=[]]),Kn.indexOf(Xn)==-1&&Kn.push(Xn)})})});let jn=n[d.join(",")]=new ContentMatch(d.indexOf(e.length-1)>-1);for(let Un=0;Un<g.length;Un++){let zn=g[Un][1].sort(cmp);jn.next.push({type:g[Un][0],next:n[zn.join(",")]||l(zn)})}return jn}}function checkForDeadEnds(e,n){for(let l=0,d=[e];l<d.length;l++){let g=d[l],jn=!g.validEnd,Un=[];for(let zn=0;zn<g.next.length;zn++){let{type:qn,next:Kn}=g.next[zn];Un.push(qn.name),jn&&!(qn.isText||qn.hasRequiredAttrs())&&(jn=!1),d.indexOf(Kn)==-1&&d.push(Kn)}jn&&n.err("Only non-generatable nodes ("+Un.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(e){let n=Object.create(null);for(let l in e){let d=e[l];if(!d.hasDefault)return null;n[l]=d.default}return n}function computeAttrs(e,n){let l=Object.create(null);for(let d in e){let g=n&&n[d];if(g===void 0){let jn=e[d];if(jn.hasDefault)g=jn.default;else throw new RangeError("No value supplied for attribute "+d)}l[d]=g}return l}function checkAttrs(e,n,l,d){for(let g in n)if(!(g in e))throw new RangeError(`Unsupported attribute ${g} for ${l} of type ${g}`);for(let g in e){let jn=e[g];jn.validate&&jn.validate(n[g])}}function initAttrs(e,n){let l=Object.create(null);if(n)for(let d in n)l[d]=new Attribute(e,d,n[d]);return l}let NodeType$1=class GT{constructor(n,l,d){this.name=n,this.schema=l,this.spec=d,this.markSet=null,this.groups=d.group?d.group.split(" "):[],this.attrs=initAttrs(n,d.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(d.inline||n=="text"),this.isText=n=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(n){return this.groups.indexOf(n)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(n){return this==n||this.contentMatch.compatible(n.contentMatch)}computeAttrs(n){return!n&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,n)}create(n=null,l,d){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(n),Fragment.from(l),Mark$1.setFrom(d))}createChecked(n=null,l,d){return l=Fragment.from(l),this.checkContent(l),new Node$1(this,this.computeAttrs(n),l,Mark$1.setFrom(d))}createAndFill(n=null,l,d){if(n=this.computeAttrs(n),l=Fragment.from(l),l.size){let Un=this.contentMatch.fillBefore(l);if(!Un)return null;l=Un.append(l)}let g=this.contentMatch.matchFragment(l),jn=g&&g.fillBefore(Fragment.empty,!0);return jn?new Node$1(this,n,l.append(jn),Mark$1.setFrom(d)):null}validContent(n){let l=this.contentMatch.matchFragment(n);if(!l||!l.validEnd)return!1;for(let d=0;d<n.childCount;d++)if(!this.allowsMarks(n.child(d).marks))return!1;return!0}checkContent(n){if(!this.validContent(n))throw new RangeError(`Invalid content for node ${this.name}: ${n.toString().slice(0,50)}`)}checkAttrs(n){checkAttrs(this.attrs,n,"node",this.name)}allowsMarkType(n){return this.markSet==null||this.markSet.indexOf(n)>-1}allowsMarks(n){if(this.markSet==null)return!0;for(let l=0;l<n.length;l++)if(!this.allowsMarkType(n[l].type))return!1;return!0}allowedMarks(n){if(this.markSet==null)return n;let l;for(let d=0;d<n.length;d++)this.allowsMarkType(n[d].type)?l&&l.push(n[d]):l||(l=n.slice(0,d));return l?l.length?l:Mark$1.none:n}static compile(n,l){let d=Object.create(null);n.forEach((jn,Un)=>d[jn]=new GT(jn,l,Un));let g=l.spec.topNode||"doc";if(!d[g])throw new RangeError("Schema is missing its top node type ('"+g+"')");if(!d.text)throw new RangeError("Every schema needs a 'text' type");for(let jn in d.text.attrs)throw new RangeError("The text node type should not have attributes");return d}};function validateType(e,n,l){let d=l.split("|");return g=>{let jn=g===null?"null":typeof g;if(d.indexOf(jn)<0)throw new RangeError(`Expected value of type ${d} for attribute ${n} on type ${e}, got ${jn}`)}}class Attribute{constructor(n,l,d){this.hasDefault=Object.prototype.hasOwnProperty.call(d,"default"),this.default=d.default,this.validate=typeof d.validate=="string"?validateType(n,l,d.validate):d.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(n,l,d,g){this.name=n,this.rank=l,this.schema=d,this.spec=g,this.attrs=initAttrs(n,g.attrs),this.excluded=null;let jn=defaultAttrs(this.attrs);this.instance=jn?new Mark$1(this,jn):null}create(n=null){return!n&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,n))}static compile(n,l){let d=Object.create(null),g=0;return n.forEach((jn,Un)=>d[jn]=new MarkType(jn,g++,l,Un)),d}removeFromSet(n){for(var l=0;l<n.length;l++)n[l].type==this&&(n=n.slice(0,l).concat(n.slice(l+1)),l--);return n}isInSet(n){for(let l=0;l<n.length;l++)if(n[l].type==this)return n[l]}checkAttrs(n){checkAttrs(this.attrs,n,"mark",this.name)}excludes(n){return this.excluded.indexOf(n)>-1}}let Schema$2=class{constructor(n){this.linebreakReplacement=null,this.cached=Object.create(null);let l=this.spec={};for(let g in n)l[g]=n[g];l.nodes=OrderedMap.from(n.nodes),l.marks=OrderedMap.from(n.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let d=Object.create(null);for(let g in this.nodes){if(g in this.marks)throw new RangeError(g+" can not be both a node and a mark");let jn=this.nodes[g],Un=jn.spec.content||"",zn=jn.spec.marks;if(jn.contentMatch=d[Un]||(d[Un]=ContentMatch.parse(Un,this.nodes)),jn.inlineContent=jn.contentMatch.inlineContent,jn.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!jn.isInline||!jn.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=jn}jn.markSet=zn=="_"?null:zn?gatherMarks(this,zn.split(" ")):zn==""||!jn.inlineContent?[]:null}for(let g in this.marks){let jn=this.marks[g],Un=jn.spec.excludes;jn.excluded=Un==null?[jn]:Un==""?[]:gatherMarks(this,Un.split(" "))}this.nodeFromJSON=g=>Node$1.fromJSON(this,g),this.markFromJSON=g=>Mark$1.fromJSON(this,g),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(n,l=null,d,g){if(typeof n=="string")n=this.nodeType(n);else if(n instanceof NodeType$1){if(n.schema!=this)throw new RangeError("Node type from different schema used ("+n.name+")")}else throw new RangeError("Invalid node type: "+n);return n.createChecked(l,d,g)}text(n,l){let d=this.nodes.text;return new TextNode(d,d.defaultAttrs,n,Mark$1.setFrom(l))}mark(n,l){return typeof n=="string"&&(n=this.marks[n]),n.create(l)}nodeType(n){let l=this.nodes[n];if(!l)throw new RangeError("Unknown node type: "+n);return l}};function gatherMarks(e,n){let l=[];for(let d=0;d<n.length;d++){let g=n[d],jn=e.marks[g],Un=jn;if(jn)l.push(jn);else for(let zn in e.marks){let qn=e.marks[zn];(g=="_"||qn.spec.group&&qn.spec.group.split(" ").indexOf(g)>-1)&&l.push(Un=qn)}if(!Un)throw new SyntaxError("Unknown mark type: '"+n[d]+"'")}return l}function isTagRule(e){return e.tag!=null}function isStyleRule(e){return e.style!=null}let DOMParser$1=class Y0{constructor(n,l){this.schema=n,this.rules=l,this.tags=[],this.styles=[];let d=this.matchedStyles=[];l.forEach(g=>{if(isTagRule(g))this.tags.push(g);else if(isStyleRule(g)){let jn=/[^=]*/.exec(g.style)[0];d.indexOf(jn)<0&&d.push(jn),this.styles.push(g)}}),this.normalizeLists=!this.tags.some(g=>{if(!/^(ul|ol)\b/.test(g.tag)||!g.node)return!1;let jn=n.nodes[g.node];return jn.contentMatch.matchType(jn)})}parse(n,l={}){let d=new ParseContext(this,l,!1);return d.addAll(n,Mark$1.none,l.from,l.to),d.finish()}parseSlice(n,l={}){let d=new ParseContext(this,l,!0);return d.addAll(n,Mark$1.none,l.from,l.to),Slice.maxOpen(d.finish())}matchTag(n,l,d){for(let g=d?this.tags.indexOf(d)+1:0;g<this.tags.length;g++){let jn=this.tags[g];if(matches(n,jn.tag)&&(jn.namespace===void 0||n.namespaceURI==jn.namespace)&&(!jn.context||l.matchesContext(jn.context))){if(jn.getAttrs){let Un=jn.getAttrs(n);if(Un===!1)continue;jn.attrs=Un||void 0}return jn}}}matchStyle(n,l,d,g){for(let jn=g?this.styles.indexOf(g)+1:0;jn<this.styles.length;jn++){let Un=this.styles[jn],zn=Un.style;if(!(zn.indexOf(n)!=0||Un.context&&!d.matchesContext(Un.context)||zn.length>n.length&&(zn.charCodeAt(n.length)!=61||zn.slice(n.length+1)!=l))){if(Un.getAttrs){let qn=Un.getAttrs(l);if(qn===!1)continue;Un.attrs=qn||void 0}return Un}}}static schemaRules(n){let l=[];function d(g){let jn=g.priority==null?50:g.priority,Un=0;for(;Un<l.length;Un++){let zn=l[Un];if((zn.priority==null?50:zn.priority)<jn)break}l.splice(Un,0,g)}for(let g in n.marks){let jn=n.marks[g].spec.parseDOM;jn&&jn.forEach(Un=>{d(Un=copy$1(Un)),Un.mark||Un.ignore||Un.clearMark||(Un.mark=g)})}for(let g in n.nodes){let jn=n.nodes[g].spec.parseDOM;jn&&jn.forEach(Un=>{d(Un=copy$1(Un)),Un.node||Un.ignore||Un.mark||(Un.node=g)})}return l}static fromSchema(n){return n.cached.domParser||(n.cached.domParser=new Y0(n,Y0.schemaRules(n)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(e,n,l){return n!=null?(n?OPT_PRESERVE_WS:0)|(n==="full"?OPT_PRESERVE_WS_FULL:0):e&&e.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:l&~OPT_OPEN_LEFT}class NodeContext{constructor(n,l,d,g,jn,Un){this.type=n,this.attrs=l,this.marks=d,this.solid=g,this.options=Un,this.content=[],this.activeMarks=Mark$1.none,this.match=jn||(Un&OPT_OPEN_LEFT?null:n.contentMatch)}findWrapping(n){if(!this.match){if(!this.type)return[];let l=this.type.contentMatch.fillBefore(Fragment.from(n));if(l)this.match=this.type.contentMatch.matchFragment(l);else{let d=this.type.contentMatch,g;return(g=d.findWrapping(n.type))?(this.match=d,g):null}}return this.match.findWrapping(n.type)}finish(n){if(!(this.options&OPT_PRESERVE_WS)){let d=this.content[this.content.length-1],g;if(d&&d.isText&&(g=/[ \t\r\n\u000c]+$/.exec(d.text))){let jn=d;d.text.length==g[0].length?this.content.pop():this.content[this.content.length-1]=jn.withText(jn.text.slice(0,jn.text.length-g[0].length))}}let l=Fragment.from(this.content);return!n&&this.match&&(l=l.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,l,this.marks):l}inlineContext(n){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:n.parentNode&&!blockTags.hasOwnProperty(n.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(n,l,d){this.parser=n,this.options=l,this.isOpen=d,this.open=0,this.localPreserveWS=!1;let g=l.topNode,jn,Un=wsOptionsFor(null,l.preserveWhitespace,0)|(d?OPT_OPEN_LEFT:0);g?jn=new NodeContext(g.type,g.attrs,Mark$1.none,!0,l.topMatch||g.type.contentMatch,Un):d?jn=new NodeContext(null,null,Mark$1.none,!0,null,Un):jn=new NodeContext(n.schema.topNodeType,null,Mark$1.none,!0,null,Un),this.nodes=[jn],this.find=l.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,l){n.nodeType==3?this.addTextNode(n,l):n.nodeType==1&&this.addElement(n,l)}addTextNode(n,l){let d=n.nodeValue,g=this.top,jn=g.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(g.options&OPT_PRESERVE_WS)>0,{schema:Un}=this.parser;if(jn==="full"||g.inlineContext(n)||/[^ \t\r\n\u000c]/.test(d)){if(jn)if(jn==="full")d=d.replace(/\r\n?/g,`
`);else if(Un.linebreakReplacement&&/[\r\n]/.test(d)&&this.top.findWrapping(Un.linebreakReplacement.create())){let zn=d.split(/\r?\n|\r/);for(let qn=0;qn<zn.length;qn++)qn&&this.insertNode(Un.linebreakReplacement.create(),l,!0),zn[qn]&&this.insertNode(Un.text(zn[qn]),l,!/\S/.test(zn[qn]));d=""}else d=d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let zn=g.content[g.content.length-1],qn=n.previousSibling;(!zn||qn&&qn.nodeName=="BR"||zn.isText&&/[ \t\r\n\u000c]$/.test(zn.text))&&(d=d.slice(1))}d&&this.insertNode(Un.text(d),l,!/\S/.test(d)),this.findInText(n)}else this.findInside(n)}addElement(n,l,d){let g=this.localPreserveWS,jn=this.top;(n.tagName=="PRE"||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let Un=n.nodeName.toLowerCase(),zn;listTags.hasOwnProperty(Un)&&this.parser.normalizeLists&&normalizeList(n);let qn=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(zn=this.parser.matchTag(n,this,d));e:if(qn?qn.ignore:ignoreTags.hasOwnProperty(Un))this.findInside(n),this.ignoreFallback(n,l);else if(!qn||qn.skip||qn.closeParent){qn&&qn.closeParent?this.open=Math.max(0,this.open-1):qn&&qn.skip.nodeType&&(n=qn.skip);let Kn,Xn=this.needsBlock;if(blockTags.hasOwnProperty(Un))jn.content.length&&jn.content[0].isInline&&this.open&&(this.open--,jn=this.top),Kn=!0,jn.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,l);break e}let Qn=qn&&qn.skip?l:this.readStyles(n,l);Qn&&this.addAll(n,Qn),Kn&&this.sync(jn),this.needsBlock=Xn}else{let Kn=this.readStyles(n,l);Kn&&this.addElementByRule(n,qn,Kn,qn.consuming===!1?zn:void 0)}this.localPreserveWS=g}leafFallback(n,l){n.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode(`
`),l)}ignoreFallback(n,l){n.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),l,!0)}readStyles(n,l){let d=n.style;if(d&&d.length)for(let g=0;g<this.parser.matchedStyles.length;g++){let jn=this.parser.matchedStyles[g],Un=d.getPropertyValue(jn);if(Un)for(let zn=void 0;;){let qn=this.parser.matchStyle(jn,Un,this,zn);if(!qn)break;if(qn.ignore)return null;if(qn.clearMark?l=l.filter(Kn=>!qn.clearMark(Kn)):l=l.concat(this.parser.schema.marks[qn.mark].create(qn.attrs)),qn.consuming===!1)zn=qn;else break}}return l}addElementByRule(n,l,d,g){let jn,Un;if(l.node)if(Un=this.parser.schema.nodes[l.node],Un.isLeaf)this.insertNode(Un.create(l.attrs),d,n.nodeName=="BR")||this.leafFallback(n,d);else{let qn=this.enter(Un,l.attrs||null,d,l.preserveWhitespace);qn&&(jn=!0,d=qn)}else{let qn=this.parser.schema.marks[l.mark];d=d.concat(qn.create(l.attrs))}let zn=this.top;if(Un&&Un.isLeaf)this.findInside(n);else if(g)this.addElement(n,d,g);else if(l.getContent)this.findInside(n),l.getContent(n,this.parser.schema).forEach(qn=>this.insertNode(qn,d,!1));else{let qn=n;typeof l.contentElement=="string"?qn=n.querySelector(l.contentElement):typeof l.contentElement=="function"?qn=l.contentElement(n):l.contentElement&&(qn=l.contentElement),this.findAround(n,qn,!0),this.addAll(qn,d),this.findAround(n,qn,!1)}jn&&this.sync(zn)&&this.open--}addAll(n,l,d,g){let jn=d||0;for(let Un=d?n.childNodes[d]:n.firstChild,zn=g==null?null:n.childNodes[g];Un!=zn;Un=Un.nextSibling,++jn)this.findAtPoint(n,jn),this.addDOM(Un,l);this.findAtPoint(n,jn)}findPlace(n,l,d){let g,jn;for(let Un=this.open,zn=0;Un>=0;Un--){let qn=this.nodes[Un],Kn=qn.findWrapping(n);if(Kn&&(!g||g.length>Kn.length+zn)&&(g=Kn,jn=qn,!Kn.length))break;if(qn.solid){if(d)break;zn+=2}}if(!g)return null;this.sync(jn);for(let Un=0;Un<g.length;Un++)l=this.enterInner(g[Un],null,l,!1);return l}insertNode(n,l,d){if(n.isInline&&this.needsBlock&&!this.top.type){let jn=this.textblockFromContext();jn&&(l=this.enterInner(jn,null,l))}let g=this.findPlace(n,l,d);if(g){this.closeExtra();let jn=this.top;jn.match&&(jn.match=jn.match.matchType(n.type));let Un=Mark$1.none;for(let zn of g.concat(n.marks))(jn.type?jn.type.allowsMarkType(zn.type):markMayApply(zn.type,n.type))&&(Un=zn.addToSet(Un));return jn.content.push(n.mark(Un)),!0}return!1}enter(n,l,d,g){let jn=this.findPlace(n.create(l),d,!1);return jn&&(jn=this.enterInner(n,l,d,!0,g)),jn}enterInner(n,l,d,g=!1,jn){this.closeExtra();let Un=this.top;Un.match=Un.match&&Un.match.matchType(n);let zn=wsOptionsFor(n,jn,Un.options);Un.options&OPT_OPEN_LEFT&&Un.content.length==0&&(zn|=OPT_OPEN_LEFT);let qn=Mark$1.none;return d=d.filter(Kn=>(Un.type?Un.type.allowsMarkType(Kn.type):markMayApply(Kn.type,n))?(qn=Kn.addToSet(qn),!1):!0),this.nodes.push(new NodeContext(n,l,qn,g,null,zn)),this.open++,d}closeExtra(n=!1){let l=this.nodes.length-1;if(l>this.open){for(;l>this.open;l--)this.nodes[l-1].content.push(this.nodes[l].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let l=this.open;l>=0;l--){if(this.nodes[l]==n)return this.open=l,!0;this.localPreserveWS&&(this.nodes[l].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let n=0;for(let l=this.open;l>=0;l--){let d=this.nodes[l].content;for(let g=d.length-1;g>=0;g--)n+=d[g].nodeSize;l&&n++}return n}findAtPoint(n,l){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==n&&this.find[d].offset==l&&(this.find[d].pos=this.currentPos)}findInside(n){if(this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&n.nodeType==1&&n.contains(this.find[l].node)&&(this.find[l].pos=this.currentPos)}findAround(n,l,d){if(n!=l&&this.find)for(let g=0;g<this.find.length;g++)this.find[g].pos==null&&n.nodeType==1&&n.contains(this.find[g].node)&&l.compareDocumentPosition(this.find[g].node)&(d?2:4)&&(this.find[g].pos=this.currentPos)}findInText(n){if(this.find)for(let l=0;l<this.find.length;l++)this.find[l].node==n&&(this.find[l].pos=this.currentPos-(n.nodeValue.length-this.find[l].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let l=n.split("/"),d=this.options.context,g=!this.isOpen&&(!d||d.parent.type==this.nodes[0].type),jn=-(d?d.depth+1:0)+(g?0:1),Un=(zn,qn)=>{for(;zn>=0;zn--){let Kn=l[zn];if(Kn==""){if(zn==l.length-1||zn==0)continue;for(;qn>=jn;qn--)if(Un(zn-1,qn))return!0;return!1}else{let Xn=qn>0||qn==0&&g?this.nodes[qn].type:d&&qn>=jn?d.node(qn-jn).type:null;if(!Xn||Xn.name!=Kn&&!Xn.isInGroup(Kn))return!1;qn--}}return!0};return Un(l.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let l=n.depth;l>=0;l--){let d=n.node(l).contentMatchAt(n.indexAfter(l)).defaultType;if(d&&d.isTextblock&&d.defaultAttrs)return d}for(let l in this.parser.schema.nodes){let d=this.parser.schema.nodes[l];if(d.isTextblock&&d.defaultAttrs)return d}}}function normalizeList(e){for(let n=e.firstChild,l=null;n;n=n.nextSibling){let d=n.nodeType==1?n.nodeName.toLowerCase():null;d&&listTags.hasOwnProperty(d)&&l?(l.appendChild(n),n=l):d=="li"?l=n:d&&(l=null)}}function matches(e,n){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,n)}function copy$1(e){let n={};for(let l in e)n[l]=e[l];return n}function markMayApply(e,n){let l=n.schema.nodes;for(let d in l){let g=l[d];if(!g.allowsMarkType(e))continue;let jn=[],Un=zn=>{jn.push(zn);for(let qn=0;qn<zn.edgeCount;qn++){let{type:Kn,next:Xn}=zn.edge(qn);if(Kn==n||jn.indexOf(Xn)<0&&Un(Xn))return!0}};if(Un(g.contentMatch))return!0}}class DOMSerializer{constructor(n,l){this.nodes=n,this.marks=l}serializeFragment(n,l={},d){d||(d=doc$2(l).createDocumentFragment());let g=d,jn=[];return n.forEach(Un=>{if(jn.length||Un.marks.length){let zn=0,qn=0;for(;zn<jn.length&&qn<Un.marks.length;){let Kn=Un.marks[qn];if(!this.marks[Kn.type.name]){qn++;continue}if(!Kn.eq(jn[zn][0])||Kn.type.spec.spanning===!1)break;zn++,qn++}for(;zn<jn.length;)g=jn.pop()[1];for(;qn<Un.marks.length;){let Kn=Un.marks[qn++],Xn=this.serializeMark(Kn,Un.isInline,l);Xn&&(jn.push([Kn,g]),g.appendChild(Xn.dom),g=Xn.contentDOM||Xn.dom)}}g.appendChild(this.serializeNodeInner(Un,l))}),d}serializeNodeInner(n,l){let{dom:d,contentDOM:g}=renderSpec(doc$2(l),this.nodes[n.type.name](n),null,n.attrs);if(g){if(n.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(n.content,l,g)}return d}serializeNode(n,l={}){let d=this.serializeNodeInner(n,l);for(let g=n.marks.length-1;g>=0;g--){let jn=this.serializeMark(n.marks[g],n.isInline,l);jn&&((jn.contentDOM||jn.dom).appendChild(d),d=jn.dom)}return d}serializeMark(n,l,d={}){let g=this.marks[n.type.name];return g&&renderSpec(doc$2(d),g(n,l),null,n.attrs)}static renderSpec(n,l,d=null,g){return renderSpec(n,l,d,g)}static fromSchema(n){return n.cached.domSerializer||(n.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(n),this.marksFromSchema(n)))}static nodesFromSchema(n){let l=gatherToDOM(n.nodes);return l.text||(l.text=d=>d.text),l}static marksFromSchema(n){return gatherToDOM(n.marks)}}function gatherToDOM(e){let n={};for(let l in e){let d=e[l].spec.toDOM;d&&(n[l]=d)}return n}function doc$2(e){return e.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(e){let n=suspiciousAttributeCache.get(e);return n===void 0&&suspiciousAttributeCache.set(e,n=suspiciousAttributesInner(e)),n}function suspiciousAttributesInner(e){let n=null;function l(d){if(d&&typeof d=="object")if(Array.isArray(d))if(typeof d[0]=="string")n||(n=[]),n.push(d);else for(let g=0;g<d.length;g++)l(d[g]);else for(let g in d)l(d[g])}return l(e),n}function renderSpec(e,n,l,d){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let g=n[0],jn;if(typeof g!="string")throw new RangeError("Invalid array passed to renderSpec");if(d&&(jn=suspiciousAttributes(d))&&jn.indexOf(n)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Un=g.indexOf(" ");Un>0&&(l=g.slice(0,Un),g=g.slice(Un+1));let zn,qn=l?e.createElementNS(l,g):e.createElement(g),Kn=n[1],Xn=1;if(Kn&&typeof Kn=="object"&&Kn.nodeType==null&&!Array.isArray(Kn)){Xn=2;for(let Qn in Kn)if(Kn[Qn]!=null){let Jn=Qn.indexOf(" ");Jn>0?qn.setAttributeNS(Qn.slice(0,Jn),Qn.slice(Jn+1),Kn[Qn]):Qn=="style"&&qn.style?qn.style.cssText=Kn[Qn]:qn.setAttribute(Qn,Kn[Qn])}}for(let Qn=Xn;Qn<n.length;Qn++){let Jn=n[Qn];if(Jn===0){if(Qn<n.length-1||Qn>Xn)throw new RangeError("Content hole must be the only child of its parent node");return{dom:qn,contentDOM:qn}}else{let{dom:Ai,contentDOM:Ri}=renderSpec(e,Jn,l,d);if(qn.appendChild(Ai),Ri){if(zn)throw new RangeError("Multiple content holes");zn=Ri}}}return{dom:qn,contentDOM:zn}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(e,n){return e+n*factor16}function recoverIndex(e){return e&lower16}function recoverOffset(e){return(e-(e&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(n,l,d){this.pos=n,this.delInfo=l,this.recover=d}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(n,l=!1){if(this.ranges=n,this.inverted=l,!n.length&&StepMap.empty)return StepMap.empty}recover(n){let l=0,d=recoverIndex(n);if(!this.inverted)for(let g=0;g<d;g++)l+=this.ranges[g*3+2]-this.ranges[g*3+1];return this.ranges[d*3]+l+recoverOffset(n)}mapResult(n,l=1){return this._map(n,l,!1)}map(n,l=1){return this._map(n,l,!0)}_map(n,l,d){let g=0,jn=this.inverted?2:1,Un=this.inverted?1:2;for(let zn=0;zn<this.ranges.length;zn+=3){let qn=this.ranges[zn]-(this.inverted?g:0);if(qn>n)break;let Kn=this.ranges[zn+jn],Xn=this.ranges[zn+Un],Qn=qn+Kn;if(n<=Qn){let Jn=Kn?n==qn?-1:n==Qn?1:l:l,Ai=qn+g+(Jn<0?0:Xn);if(d)return Ai;let Ri=n==(l<0?qn:Qn)?null:makeRecover(zn/3,n-qn),Ni=n==qn?DEL_AFTER:n==Qn?DEL_BEFORE:DEL_ACROSS;return(l<0?n!=qn:n!=Qn)&&(Ni|=DEL_SIDE),new MapResult(Ai,Ni,Ri)}g+=Xn-Kn}return d?n+g:new MapResult(n+g,0,null)}touches(n,l){let d=0,g=recoverIndex(l),jn=this.inverted?2:1,Un=this.inverted?1:2;for(let zn=0;zn<this.ranges.length;zn+=3){let qn=this.ranges[zn]-(this.inverted?d:0);if(qn>n)break;let Kn=this.ranges[zn+jn],Xn=qn+Kn;if(n<=Xn&&zn==g*3)return!0;d+=this.ranges[zn+Un]-Kn}return!1}forEach(n){let l=this.inverted?2:1,d=this.inverted?1:2;for(let g=0,jn=0;g<this.ranges.length;g+=3){let Un=this.ranges[g],zn=Un-(this.inverted?jn:0),qn=Un+(this.inverted?0:jn),Kn=this.ranges[g+l],Xn=this.ranges[g+d];n(zn,zn+Kn,qn,qn+Xn),jn+=Xn-Kn}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return n==0?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])}}StepMap.empty=new StepMap([]);class Mapping{constructor(n,l,d=0,g=n?n.length:0){this.mirror=l,this.from=d,this.to=g,this._maps=n||[],this.ownData=!(n||l)}get maps(){return this._maps}slice(n=0,l=this.maps.length){return new Mapping(this._maps,this.mirror,n,l)}appendMap(n,l){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(n),l!=null&&this.setMirror(this._maps.length-1,l)}appendMapping(n){for(let l=0,d=this._maps.length;l<n._maps.length;l++){let g=n.getMirror(l);this.appendMap(n._maps[l],g!=null&&g<l?d+g:void 0)}}getMirror(n){if(this.mirror){for(let l=0;l<this.mirror.length;l++)if(this.mirror[l]==n)return this.mirror[l+(l%2?-1:1)]}}setMirror(n,l){this.mirror||(this.mirror=[]),this.mirror.push(n,l)}appendMappingInverted(n){for(let l=n.maps.length-1,d=this._maps.length+n._maps.length;l>=0;l--){let g=n.getMirror(l);this.appendMap(n._maps[l].invert(),g!=null&&g>l?d-g-1:void 0)}}invert(){let n=new Mapping;return n.appendMappingInverted(this),n}map(n,l=1){if(this.mirror)return this._map(n,l,!0);for(let d=this.from;d<this.to;d++)n=this._maps[d].map(n,l);return n}mapResult(n,l=1){return this._map(n,l,!1)}_map(n,l,d){let g=0;for(let jn=this.from;jn<this.to;jn++){let Un=this._maps[jn],zn=Un.mapResult(n,l);if(zn.recover!=null){let qn=this.getMirror(jn);if(qn!=null&&qn>jn&&qn<this.to){jn=qn,n=this._maps[qn].recover(zn.recover);continue}}g|=zn.delInfo,n=zn.pos}return d?n:new MapResult(n,g,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(n){return null}static fromJSON(n,l){if(!l||!l.stepType)throw new RangeError("Invalid input for Step.fromJSON");let d=stepsByID[l.stepType];if(!d)throw new RangeError(`No step type ${l.stepType} defined`);return d.fromJSON(n,l)}static jsonID(n,l){if(n in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+n);return stepsByID[n]=l,l.prototype.jsonID=n,l}}class StepResult{constructor(n,l){this.doc=n,this.failed=l}static ok(n){return new StepResult(n,null)}static fail(n){return new StepResult(null,n)}static fromReplace(n,l,d,g){try{return StepResult.ok(n.replace(l,d,g))}catch(jn){if(jn instanceof ReplaceError)return StepResult.fail(jn.message);throw jn}}}function mapFragment(e,n,l){let d=[];for(let g=0;g<e.childCount;g++){let jn=e.child(g);jn.content.size&&(jn=jn.copy(mapFragment(jn.content,n,jn))),jn.isInline&&(jn=n(jn,l,g)),d.push(jn)}return Fragment.fromArray(d)}class AddMarkStep extends Step{constructor(n,l,d){super(),this.from=n,this.to=l,this.mark=d}apply(n){let l=n.slice(this.from,this.to),d=n.resolve(this.from),g=d.node(d.sharedDepth(this.to)),jn=new Slice(mapFragment(l.content,(Un,zn)=>!Un.isAtom||!zn.type.allowsMarkType(this.mark.type)?Un:Un.mark(this.mark.addToSet(Un.marks)),g),l.openStart,l.openEnd);return StepResult.fromReplace(n,this.from,this.to,jn)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(n){let l=n.mapResult(this.from,1),d=n.mapResult(this.to,-1);return l.deleted&&d.deleted||l.pos>=d.pos?null:new AddMarkStep(l.pos,d.pos,this.mark)}merge(n){return n instanceof AddMarkStep&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new AddMarkStep(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,l){if(typeof l.from!="number"||typeof l.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(l.from,l.to,n.markFromJSON(l.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(n,l,d){super(),this.from=n,this.to=l,this.mark=d}apply(n){let l=n.slice(this.from,this.to),d=new Slice(mapFragment(l.content,g=>g.mark(this.mark.removeFromSet(g.marks)),n),l.openStart,l.openEnd);return StepResult.fromReplace(n,this.from,this.to,d)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(n){let l=n.mapResult(this.from,1),d=n.mapResult(this.to,-1);return l.deleted&&d.deleted||l.pos>=d.pos?null:new RemoveMarkStep(l.pos,d.pos,this.mark)}merge(n){return n instanceof RemoveMarkStep&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new RemoveMarkStep(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,l){if(typeof l.from!="number"||typeof l.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(l.from,l.to,n.markFromJSON(l.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(n,l){super(),this.pos=n,this.mark=l}apply(n){let l=n.nodeAt(this.pos);if(!l)return StepResult.fail("No node at mark step's position");let d=l.type.create(l.attrs,null,this.mark.addToSet(l.marks));return StepResult.fromReplace(n,this.pos,this.pos+1,new Slice(Fragment.from(d),0,l.isLeaf?0:1))}invert(n){let l=n.nodeAt(this.pos);if(l){let d=this.mark.addToSet(l.marks);if(d.length==l.marks.length){for(let g=0;g<l.marks.length;g++)if(!l.marks[g].isInSet(d))return new AddNodeMarkStep(this.pos,l.marks[g]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(n){let l=n.mapResult(this.pos,1);return l.deletedAfter?null:new AddNodeMarkStep(l.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,l){if(typeof l.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(l.pos,n.markFromJSON(l.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(n,l){super(),this.pos=n,this.mark=l}apply(n){let l=n.nodeAt(this.pos);if(!l)return StepResult.fail("No node at mark step's position");let d=l.type.create(l.attrs,null,this.mark.removeFromSet(l.marks));return StepResult.fromReplace(n,this.pos,this.pos+1,new Slice(Fragment.from(d),0,l.isLeaf?0:1))}invert(n){let l=n.nodeAt(this.pos);return!l||!this.mark.isInSet(l.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(n){let l=n.mapResult(this.pos,1);return l.deletedAfter?null:new RemoveNodeMarkStep(l.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,l){if(typeof l.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(l.pos,n.markFromJSON(l.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(n,l,d,g=!1){super(),this.from=n,this.to=l,this.slice=d,this.structure=g}apply(n){return this.structure&&contentBetween(n,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(n,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(n){return new ReplaceStep(this.from,this.from+this.slice.size,n.slice(this.from,this.to))}map(n){let l=n.mapResult(this.from,1),d=n.mapResult(this.to,-1);return l.deletedAcross&&d.deletedAcross?null:new ReplaceStep(l.pos,Math.max(l.pos,d.pos),this.slice,this.structure)}merge(n){if(!(n instanceof ReplaceStep)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){let l=this.slice.size+n.slice.size==0?Slice.empty:new Slice(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new ReplaceStep(this.from,this.to+(n.to-n.from),l,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){let l=this.slice.size+n.slice.size==0?Slice.empty:new Slice(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new ReplaceStep(n.from,this.to,l,this.structure)}else return null}toJSON(){let n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,l){if(typeof l.from!="number"||typeof l.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(l.from,l.to,Slice.fromJSON(n,l.slice),!!l.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(n,l,d,g,jn,Un,zn=!1){super(),this.from=n,this.to=l,this.gapFrom=d,this.gapTo=g,this.slice=jn,this.insert=Un,this.structure=zn}apply(n){if(this.structure&&(contentBetween(n,this.from,this.gapFrom)||contentBetween(n,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let l=n.slice(this.gapFrom,this.gapTo);if(l.openStart||l.openEnd)return StepResult.fail("Gap is not a flat range");let d=this.slice.insertAt(this.insert,l.content);return d?StepResult.fromReplace(n,this.from,this.to,d):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(n){let l=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+l,this.from+this.insert,this.from+this.insert+l,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(n){let l=n.mapResult(this.from,1),d=n.mapResult(this.to,-1),g=this.from==this.gapFrom?l.pos:n.map(this.gapFrom,-1),jn=this.to==this.gapTo?d.pos:n.map(this.gapTo,1);return l.deletedAcross&&d.deletedAcross||g<l.pos||jn>d.pos?null:new ReplaceAroundStep(l.pos,d.pos,g,jn,this.slice,this.insert,this.structure)}toJSON(){let n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,l){if(typeof l.from!="number"||typeof l.to!="number"||typeof l.gapFrom!="number"||typeof l.gapTo!="number"||typeof l.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(l.from,l.to,l.gapFrom,l.gapTo,Slice.fromJSON(n,l.slice),l.insert,!!l.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(e,n,l){let d=e.resolve(n),g=l-n,jn=d.depth;for(;g>0&&jn>0&&d.indexAfter(jn)==d.node(jn).childCount;)jn--,g--;if(g>0){let Un=d.node(jn).maybeChild(d.indexAfter(jn));for(;g>0;){if(!Un||Un.isLeaf)return!0;Un=Un.firstChild,g--}}return!1}function addMark(e,n,l,d){let g=[],jn=[],Un,zn;e.doc.nodesBetween(n,l,(qn,Kn,Xn)=>{if(!qn.isInline)return;let Qn=qn.marks;if(!d.isInSet(Qn)&&Xn.type.allowsMarkType(d.type)){let Jn=Math.max(Kn,n),Ai=Math.min(Kn+qn.nodeSize,l),Ri=d.addToSet(Qn);for(let Ni=0;Ni<Qn.length;Ni++)Qn[Ni].isInSet(Ri)||(Un&&Un.to==Jn&&Un.mark.eq(Qn[Ni])?Un.to=Ai:g.push(Un=new RemoveMarkStep(Jn,Ai,Qn[Ni])));zn&&zn.to==Jn?zn.to=Ai:jn.push(zn=new AddMarkStep(Jn,Ai,d))}}),g.forEach(qn=>e.step(qn)),jn.forEach(qn=>e.step(qn))}function removeMark(e,n,l,d){let g=[],jn=0;e.doc.nodesBetween(n,l,(Un,zn)=>{if(!Un.isInline)return;jn++;let qn=null;if(d instanceof MarkType){let Kn=Un.marks,Xn;for(;Xn=d.isInSet(Kn);)(qn||(qn=[])).push(Xn),Kn=Xn.removeFromSet(Kn)}else d?d.isInSet(Un.marks)&&(qn=[d]):qn=Un.marks;if(qn&&qn.length){let Kn=Math.min(zn+Un.nodeSize,l);for(let Xn=0;Xn<qn.length;Xn++){let Qn=qn[Xn],Jn;for(let Ai=0;Ai<g.length;Ai++){let Ri=g[Ai];Ri.step==jn-1&&Qn.eq(g[Ai].style)&&(Jn=Ri)}Jn?(Jn.to=Kn,Jn.step=jn):g.push({style:Qn,from:Math.max(zn,n),to:Kn,step:jn})}}}),g.forEach(Un=>e.step(new RemoveMarkStep(Un.from,Un.to,Un.style)))}function clearIncompatible(e,n,l,d=l.contentMatch,g=!0){let jn=e.doc.nodeAt(n),Un=[],zn=n+1;for(let qn=0;qn<jn.childCount;qn++){let Kn=jn.child(qn),Xn=zn+Kn.nodeSize,Qn=d.matchType(Kn.type);if(!Qn)Un.push(new ReplaceStep(zn,Xn,Slice.empty));else{d=Qn;for(let Jn=0;Jn<Kn.marks.length;Jn++)l.allowsMarkType(Kn.marks[Jn].type)||e.step(new RemoveMarkStep(zn,Xn,Kn.marks[Jn]));if(g&&Kn.isText&&l.whitespace!="pre"){let Jn,Ai=/\r?\n|\r/g,Ri;for(;Jn=Ai.exec(Kn.text);)Ri||(Ri=new Slice(Fragment.from(l.schema.text(" ",l.allowedMarks(Kn.marks))),0,0)),Un.push(new ReplaceStep(zn+Jn.index,zn+Jn.index+Jn[0].length,Ri))}}zn=Xn}if(!d.validEnd){let qn=d.fillBefore(Fragment.empty,!0);e.replace(zn,zn,new Slice(qn,0,0))}for(let qn=Un.length-1;qn>=0;qn--)e.step(Un[qn])}function canCut(e,n,l){return(n==0||e.canReplace(n,e.childCount))&&(l==e.childCount||e.canReplace(0,l))}function liftTarget(e){let l=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let d=e.depth,g=0,jn=0;;--d){let Un=e.$from.node(d),zn=e.$from.index(d)+g,qn=e.$to.indexAfter(d)-jn;if(d<e.depth&&Un.canReplace(zn,qn,l))return d;if(d==0||Un.type.spec.isolating||!canCut(Un,zn,qn))break;zn&&(g=1),qn<Un.childCount&&(jn=1)}return null}function lift$2(e,n,l){let{$from:d,$to:g,depth:jn}=n,Un=d.before(jn+1),zn=g.after(jn+1),qn=Un,Kn=zn,Xn=Fragment.empty,Qn=0;for(let Ri=jn,Ni=!1;Ri>l;Ri--)Ni||d.index(Ri)>0?(Ni=!0,Xn=Fragment.from(d.node(Ri).copy(Xn)),Qn++):qn--;let Jn=Fragment.empty,Ai=0;for(let Ri=jn,Ni=!1;Ri>l;Ri--)Ni||g.after(Ri+1)<g.end(Ri)?(Ni=!0,Jn=Fragment.from(g.node(Ri).copy(Jn)),Ai++):Kn++;e.step(new ReplaceAroundStep(qn,Kn,Un,zn,new Slice(Xn.append(Jn),Qn,Ai),Xn.size-Qn,!0))}function findWrapping(e,n,l=null,d=e){let g=findWrappingOutside(e,n),jn=g&&findWrappingInside(d,n);return jn?g.map(withAttrs).concat({type:n,attrs:l}).concat(jn.map(withAttrs)):null}function withAttrs(e){return{type:e,attrs:null}}function findWrappingOutside(e,n){let{parent:l,startIndex:d,endIndex:g}=e,jn=l.contentMatchAt(d).findWrapping(n);if(!jn)return null;let Un=jn.length?jn[0]:n;return l.canReplaceWith(d,g,Un)?jn:null}function findWrappingInside(e,n){let{parent:l,startIndex:d,endIndex:g}=e,jn=l.child(d),Un=n.contentMatch.findWrapping(jn.type);if(!Un)return null;let qn=(Un.length?Un[Un.length-1]:n).contentMatch;for(let Kn=d;qn&&Kn<g;Kn++)qn=qn.matchType(l.child(Kn).type);return!qn||!qn.validEnd?null:Un}function wrap$3(e,n,l){let d=Fragment.empty;for(let Un=l.length-1;Un>=0;Un--){if(d.size){let zn=l[Un].type.contentMatch.matchFragment(d);if(!zn||!zn.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}d=Fragment.from(l[Un].type.create(l[Un].attrs,d))}let g=n.start,jn=n.end;e.step(new ReplaceAroundStep(g,jn,g,jn,new Slice(d,0,0),l.length,!0))}function setBlockType$1(e,n,l,d,g){if(!d.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let jn=e.steps.length;e.doc.nodesBetween(n,l,(Un,zn)=>{let qn=typeof g=="function"?g(Un):g;if(Un.isTextblock&&!Un.hasMarkup(d,qn)&&canChangeType(e.doc,e.mapping.slice(jn).map(zn),d)){let Kn=null;if(d.schema.linebreakReplacement){let Ai=d.whitespace=="pre",Ri=!!d.contentMatch.matchType(d.schema.linebreakReplacement);Ai&&!Ri?Kn=!1:!Ai&&Ri&&(Kn=!0)}Kn===!1&&replaceLinebreaks(e,Un,zn,jn),clearIncompatible(e,e.mapping.slice(jn).map(zn,1),d,void 0,Kn===null);let Xn=e.mapping.slice(jn),Qn=Xn.map(zn,1),Jn=Xn.map(zn+Un.nodeSize,1);return e.step(new ReplaceAroundStep(Qn,Jn,Qn+1,Jn-1,new Slice(Fragment.from(d.create(qn,null,Un.marks)),0,0),1,!0)),Kn===!0&&replaceNewlines$1(e,Un,zn,jn),!1}})}function replaceNewlines$1(e,n,l,d){n.forEach((g,jn)=>{if(g.isText){let Un,zn=/\r?\n|\r/g;for(;Un=zn.exec(g.text);){let qn=e.mapping.slice(d).map(l+1+jn+Un.index);e.replaceWith(qn,qn+1,n.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(e,n,l,d){n.forEach((g,jn)=>{if(g.type==g.type.schema.linebreakReplacement){let Un=e.mapping.slice(d).map(l+1+jn);e.replaceWith(Un,Un+1,n.type.schema.text(`
`))}})}function canChangeType(e,n,l){let d=e.resolve(n),g=d.index();return d.parent.canReplaceWith(g,g+1,l)}function setNodeMarkup(e,n,l,d,g){let jn=e.doc.nodeAt(n);if(!jn)throw new RangeError("No node at given position");l||(l=jn.type);let Un=l.create(d,null,g||jn.marks);if(jn.isLeaf)return e.replaceWith(n,n+jn.nodeSize,Un);if(!l.validContent(jn.content))throw new RangeError("Invalid content for node type "+l.name);e.step(new ReplaceAroundStep(n,n+jn.nodeSize,n+1,n+jn.nodeSize-1,new Slice(Fragment.from(Un),0,0),1,!0))}function canSplit(e,n,l=1,d){let g=e.resolve(n),jn=g.depth-l,Un=d&&d[d.length-1]||g.parent;if(jn<0||g.parent.type.spec.isolating||!g.parent.canReplace(g.index(),g.parent.childCount)||!Un.type.validContent(g.parent.content.cutByIndex(g.index(),g.parent.childCount)))return!1;for(let Kn=g.depth-1,Xn=l-2;Kn>jn;Kn--,Xn--){let Qn=g.node(Kn),Jn=g.index(Kn);if(Qn.type.spec.isolating)return!1;let Ai=Qn.content.cutByIndex(Jn,Qn.childCount),Ri=d&&d[Xn+1];Ri&&(Ai=Ai.replaceChild(0,Ri.type.create(Ri.attrs)));let Ni=d&&d[Xn]||Qn;if(!Qn.canReplace(Jn+1,Qn.childCount)||!Ni.type.validContent(Ai))return!1}let zn=g.indexAfter(jn),qn=d&&d[0];return g.node(jn).canReplaceWith(zn,zn,qn?qn.type:g.node(jn+1).type)}function split$1(e,n,l=1,d){let g=e.doc.resolve(n),jn=Fragment.empty,Un=Fragment.empty;for(let zn=g.depth,qn=g.depth-l,Kn=l-1;zn>qn;zn--,Kn--){jn=Fragment.from(g.node(zn).copy(jn));let Xn=d&&d[Kn];Un=Fragment.from(Xn?Xn.type.create(Xn.attrs,Un):g.node(zn).copy(Un))}e.step(new ReplaceStep(n,n,new Slice(jn.append(Un),l,l),!0))}function canJoin(e,n){let l=e.resolve(n),d=l.index();return joinable(l.nodeBefore,l.nodeAfter)&&l.parent.canReplace(d,d+1)}function canAppendWithSubstitutedLinebreaks(e,n){n.content.size||e.type.compatibleContent(n.type);let l=e.contentMatchAt(e.childCount),{linebreakReplacement:d}=e.type.schema;for(let g=0;g<n.childCount;g++){let jn=n.child(g),Un=jn.type==d?e.type.schema.nodes.text:jn.type;if(l=l.matchType(Un),!l||!e.type.allowsMarks(jn.marks))return!1}return l.validEnd}function joinable(e,n){return!!(e&&n&&!e.isLeaf&&canAppendWithSubstitutedLinebreaks(e,n))}function joinPoint(e,n,l=-1){let d=e.resolve(n);for(let g=d.depth;;g--){let jn,Un,zn=d.index(g);if(g==d.depth?(jn=d.nodeBefore,Un=d.nodeAfter):l>0?(jn=d.node(g+1),zn++,Un=d.node(g).maybeChild(zn)):(jn=d.node(g).maybeChild(zn-1),Un=d.node(g+1)),jn&&!jn.isTextblock&&joinable(jn,Un)&&d.node(g).canReplace(zn,zn+1))return n;if(g==0)break;n=l<0?d.before(g):d.after(g)}}function join$2(e,n,l){let d=null,{linebreakReplacement:g}=e.doc.type.schema,jn=e.doc.resolve(n-l),Un=jn.node().type;if(g&&Un.inlineContent){let Xn=Un.whitespace=="pre",Qn=!!Un.contentMatch.matchType(g);Xn&&!Qn?d=!1:!Xn&&Qn&&(d=!0)}let zn=e.steps.length;if(d===!1){let Xn=e.doc.resolve(n+l);replaceLinebreaks(e,Xn.node(),Xn.before(),zn)}Un.inlineContent&&clearIncompatible(e,n+l-1,Un,jn.node().contentMatchAt(jn.index()),d==null);let qn=e.mapping.slice(zn),Kn=qn.map(n-l);if(e.step(new ReplaceStep(Kn,qn.map(n+l,-1),Slice.empty,!0)),d===!0){let Xn=e.doc.resolve(Kn);replaceNewlines$1(e,Xn.node(),Xn.before(),e.steps.length)}return e}function insertPoint(e,n,l){let d=e.resolve(n);if(d.parent.canReplaceWith(d.index(),d.index(),l))return n;if(d.parentOffset==0)for(let g=d.depth-1;g>=0;g--){let jn=d.index(g);if(d.node(g).canReplaceWith(jn,jn,l))return d.before(g+1);if(jn>0)return null}if(d.parentOffset==d.parent.content.size)for(let g=d.depth-1;g>=0;g--){let jn=d.indexAfter(g);if(d.node(g).canReplaceWith(jn,jn,l))return d.after(g+1);if(jn<d.node(g).childCount)return null}return null}function dropPoint(e,n,l){let d=e.resolve(n);if(!l.content.size)return n;let g=l.content;for(let jn=0;jn<l.openStart;jn++)g=g.firstChild.content;for(let jn=1;jn<=(l.openStart==0&&l.size?2:1);jn++)for(let Un=d.depth;Un>=0;Un--){let zn=Un==d.depth?0:d.pos<=(d.start(Un+1)+d.end(Un+1))/2?-1:1,qn=d.index(Un)+(zn>0?1:0),Kn=d.node(Un),Xn=!1;if(jn==1)Xn=Kn.canReplace(qn,qn,g);else{let Qn=Kn.contentMatchAt(qn).findWrapping(g.firstChild.type);Xn=Qn&&Kn.canReplaceWith(qn,qn,Qn[0])}if(Xn)return zn==0?d.pos:zn<0?d.before(Un+1):d.after(Un+1)}return null}function replaceStep(e,n,l=n,d=Slice.empty){if(n==l&&!d.size)return null;let g=e.resolve(n),jn=e.resolve(l);return fitsTrivially(g,jn,d)?new ReplaceStep(n,l,d):new Fitter(g,jn,d).fit()}function fitsTrivially(e,n,l){return!l.openStart&&!l.openEnd&&e.start()==n.start()&&e.parent.canReplace(e.index(),n.index(),l.content)}class Fitter{constructor(n,l,d){this.$from=n,this.$to=l,this.unplaced=d,this.frontier=[],this.placed=Fragment.empty;for(let g=0;g<=n.depth;g++){let jn=n.node(g);this.frontier.push({type:jn.type,match:jn.contentMatchAt(n.indexAfter(g))})}for(let g=n.depth;g>0;g--)this.placed=Fragment.from(n.node(g).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Kn=this.findFittable();Kn?this.placeNodes(Kn):this.openMore()||this.dropNode()}let n=this.mustMoveInline(),l=this.placed.size-this.depth-this.$from.depth,d=this.$from,g=this.close(n<0?this.$to:d.doc.resolve(n));if(!g)return null;let jn=this.placed,Un=d.depth,zn=g.depth;for(;Un&&zn&&jn.childCount==1;)jn=jn.firstChild.content,Un--,zn--;let qn=new Slice(jn,Un,zn);return n>-1?new ReplaceAroundStep(d.pos,n,this.$to.pos,this.$to.end(),qn,l):qn.size||d.pos!=this.$to.pos?new ReplaceStep(d.pos,g.pos,qn):null}findFittable(){let n=this.unplaced.openStart;for(let l=this.unplaced.content,d=0,g=this.unplaced.openEnd;d<n;d++){let jn=l.firstChild;if(l.childCount>1&&(g=0),jn.type.spec.isolating&&g<=d){n=d;break}l=jn.content}for(let l=1;l<=2;l++)for(let d=l==1?n:this.unplaced.openStart;d>=0;d--){let g,jn=null;d?(jn=contentAt(this.unplaced.content,d-1).firstChild,g=jn.content):g=this.unplaced.content;let Un=g.firstChild;for(let zn=this.depth;zn>=0;zn--){let{type:qn,match:Kn}=this.frontier[zn],Xn,Qn=null;if(l==1&&(Un?Kn.matchType(Un.type)||(Qn=Kn.fillBefore(Fragment.from(Un),!1)):jn&&qn.compatibleContent(jn.type)))return{sliceDepth:d,frontierDepth:zn,parent:jn,inject:Qn};if(l==2&&Un&&(Xn=Kn.findWrapping(Un.type)))return{sliceDepth:d,frontierDepth:zn,parent:jn,wrap:Xn};if(jn&&Kn.matchType(jn.type))break}}}openMore(){let{content:n,openStart:l,openEnd:d}=this.unplaced,g=contentAt(n,l);return!g.childCount||g.firstChild.isLeaf?!1:(this.unplaced=new Slice(n,l+1,Math.max(d,g.size+l>=n.size-d?l+1:0)),!0)}dropNode(){let{content:n,openStart:l,openEnd:d}=this.unplaced,g=contentAt(n,l);if(g.childCount<=1&&l>0){let jn=n.size-l<=l+g.size;this.unplaced=new Slice(dropFromFragment(n,l-1,1),l-1,jn?l-1:d)}else this.unplaced=new Slice(dropFromFragment(n,l,1),l,d)}placeNodes({sliceDepth:n,frontierDepth:l,parent:d,inject:g,wrap:jn}){for(;this.depth>l;)this.closeFrontierNode();if(jn)for(let Ni=0;Ni<jn.length;Ni++)this.openFrontierNode(jn[Ni]);let Un=this.unplaced,zn=d?d.content:Un.content,qn=Un.openStart-n,Kn=0,Xn=[],{match:Qn,type:Jn}=this.frontier[l];if(g){for(let Ni=0;Ni<g.childCount;Ni++)Xn.push(g.child(Ni));Qn=Qn.matchFragment(g)}let Ai=zn.size+n-(Un.content.size-Un.openEnd);for(;Kn<zn.childCount;){let Ni=zn.child(Kn),$i=Qn.matchType(Ni.type);if(!$i)break;Kn++,(Kn>1||qn==0||Ni.content.size)&&(Qn=$i,Xn.push(closeNodeStart(Ni.mark(Jn.allowedMarks(Ni.marks)),Kn==1?qn:0,Kn==zn.childCount?Ai:-1)))}let Ri=Kn==zn.childCount;Ri||(Ai=-1),this.placed=addToFragment(this.placed,l,Fragment.from(Xn)),this.frontier[l].match=Qn,Ri&&Ai<0&&d&&d.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ni=0,$i=zn;Ni<Ai;Ni++){let Li=$i.lastChild;this.frontier.push({type:Li.type,match:Li.contentMatchAt(Li.childCount)}),$i=Li.content}this.unplaced=Ri?n==0?Slice.empty:new Slice(dropFromFragment(Un.content,n-1,1),n-1,Ai<0?Un.openEnd:n-1):new Slice(dropFromFragment(Un.content,n,Kn),Un.openStart,Un.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let n=this.frontier[this.depth],l;if(!n.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(l=this.findCloseLevel(this.$to))&&l.depth==this.depth)return-1;let{depth:d}=this.$to,g=this.$to.after(d);for(;d>1&&g==this.$to.end(--d);)++g;return g}findCloseLevel(n){e:for(let l=Math.min(this.depth,n.depth);l>=0;l--){let{match:d,type:g}=this.frontier[l],jn=l<n.depth&&n.end(l+1)==n.pos+(n.depth-(l+1)),Un=contentAfterFits(n,l,g,d,jn);if(Un){for(let zn=l-1;zn>=0;zn--){let{match:qn,type:Kn}=this.frontier[zn],Xn=contentAfterFits(n,zn,Kn,qn,!0);if(!Xn||Xn.childCount)continue e}return{depth:l,fit:Un,move:jn?n.doc.resolve(n.after(l+1)):n}}}}close(n){let l=this.findCloseLevel(n);if(!l)return null;for(;this.depth>l.depth;)this.closeFrontierNode();l.fit.childCount&&(this.placed=addToFragment(this.placed,l.depth,l.fit)),n=l.move;for(let d=l.depth+1;d<=n.depth;d++){let g=n.node(d),jn=g.type.contentMatch.fillBefore(g.content,!0,n.index(d));this.openFrontierNode(g.type,g.attrs,jn)}return n}openFrontierNode(n,l=null,d){let g=this.frontier[this.depth];g.match=g.match.matchType(n),this.placed=addToFragment(this.placed,this.depth,Fragment.from(n.create(l,d))),this.frontier.push({type:n,match:n.contentMatch})}closeFrontierNode(){let l=this.frontier.pop().match.fillBefore(Fragment.empty,!0);l.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,l))}}function dropFromFragment(e,n,l){return n==0?e.cutByIndex(l,e.childCount):e.replaceChild(0,e.firstChild.copy(dropFromFragment(e.firstChild.content,n-1,l)))}function addToFragment(e,n,l){return n==0?e.append(l):e.replaceChild(e.childCount-1,e.lastChild.copy(addToFragment(e.lastChild.content,n-1,l)))}function contentAt(e,n){for(let l=0;l<n;l++)e=e.firstChild.content;return e}function closeNodeStart(e,n,l){if(n<=0)return e;let d=e.content;return n>1&&(d=d.replaceChild(0,closeNodeStart(d.firstChild,n-1,d.childCount==1?l-1:0))),n>0&&(d=e.type.contentMatch.fillBefore(d).append(d),l<=0&&(d=d.append(e.type.contentMatch.matchFragment(d).fillBefore(Fragment.empty,!0)))),e.copy(d)}function contentAfterFits(e,n,l,d,g){let jn=e.node(n),Un=g?e.indexAfter(n):e.index(n);if(Un==jn.childCount&&!l.compatibleContent(jn.type))return null;let zn=d.fillBefore(jn.content,!0,Un);return zn&&!invalidMarks(l,jn.content,Un)?zn:null}function invalidMarks(e,n,l){for(let d=l;d<n.childCount;d++)if(!e.allowsMarks(n.child(d).marks))return!0;return!1}function definesContent(e){return e.spec.defining||e.spec.definingForContent}function replaceRange(e,n,l,d){if(!d.size)return e.deleteRange(n,l);let g=e.doc.resolve(n),jn=e.doc.resolve(l);if(fitsTrivially(g,jn,d))return e.step(new ReplaceStep(n,l,d));let Un=coveredDepths(g,jn);Un[Un.length-1]==0&&Un.pop();let zn=-(g.depth+1);Un.unshift(zn);for(let Jn=g.depth,Ai=g.pos-1;Jn>0;Jn--,Ai--){let Ri=g.node(Jn).type.spec;if(Ri.defining||Ri.definingAsContext||Ri.isolating)break;Un.indexOf(Jn)>-1?zn=Jn:g.before(Jn)==Ai&&Un.splice(1,0,-Jn)}let qn=Un.indexOf(zn),Kn=[],Xn=d.openStart;for(let Jn=d.content,Ai=0;;Ai++){let Ri=Jn.firstChild;if(Kn.push(Ri),Ai==d.openStart)break;Jn=Ri.content}for(let Jn=Xn-1;Jn>=0;Jn--){let Ai=Kn[Jn],Ri=definesContent(Ai.type);if(Ri&&!Ai.sameMarkup(g.node(Math.abs(zn)-1)))Xn=Jn;else if(Ri||!Ai.type.isTextblock)break}for(let Jn=d.openStart;Jn>=0;Jn--){let Ai=(Jn+Xn+1)%(d.openStart+1),Ri=Kn[Ai];if(Ri)for(let Ni=0;Ni<Un.length;Ni++){let $i=Un[(Ni+qn)%Un.length],Li=!0;$i<0&&(Li=!1,$i=-$i);let ji=g.node($i-1),Fi=g.index($i-1);if(ji.canReplaceWith(Fi,Fi,Ri.type,Ri.marks))return e.replace(g.before($i),Li?jn.after($i):l,new Slice(closeFragment(d.content,0,d.openStart,Ai),Ai,d.openEnd))}}let Qn=e.steps.length;for(let Jn=Un.length-1;Jn>=0&&(e.replace(n,l,d),!(e.steps.length>Qn));Jn--){let Ai=Un[Jn];Ai<0||(n=g.before(Ai),l=jn.after(Ai))}}function closeFragment(e,n,l,d,g){if(n<l){let jn=e.firstChild;e=e.replaceChild(0,jn.copy(closeFragment(jn.content,n+1,l,d,jn)))}if(n>d){let jn=g.contentMatchAt(0),Un=jn.fillBefore(e).append(e);e=Un.append(jn.matchFragment(Un).fillBefore(Fragment.empty,!0))}return e}function replaceRangeWith(e,n,l,d){if(!d.isInline&&n==l&&e.doc.resolve(n).parent.content.size){let g=insertPoint(e.doc,n,d.type);g!=null&&(n=l=g)}e.replaceRange(n,l,new Slice(Fragment.from(d),0,0))}function deleteRange$1(e,n,l){let d=e.doc.resolve(n),g=e.doc.resolve(l),jn=coveredDepths(d,g);for(let Un=0;Un<jn.length;Un++){let zn=jn[Un],qn=Un==jn.length-1;if(qn&&zn==0||d.node(zn).type.contentMatch.validEnd)return e.delete(d.start(zn),g.end(zn));if(zn>0&&(qn||d.node(zn-1).canReplace(d.index(zn-1),g.indexAfter(zn-1))))return e.delete(d.before(zn),g.after(zn))}for(let Un=1;Un<=d.depth&&Un<=g.depth;Un++)if(n-d.start(Un)==d.depth-Un&&l>d.end(Un)&&g.end(Un)-l!=g.depth-Un&&d.start(Un-1)==g.start(Un-1)&&d.node(Un-1).canReplace(d.index(Un-1),g.index(Un-1)))return e.delete(d.before(Un),l);e.delete(n,l)}function coveredDepths(e,n){let l=[],d=Math.min(e.depth,n.depth);for(let g=d;g>=0;g--){let jn=e.start(g);if(jn<e.pos-(e.depth-g)||n.end(g)>n.pos+(n.depth-g)||e.node(g).type.spec.isolating||n.node(g).type.spec.isolating)break;(jn==n.start(g)||g==e.depth&&g==n.depth&&e.parent.inlineContent&&n.parent.inlineContent&&g&&n.start(g-1)==jn-1)&&l.push(g)}return l}class AttrStep extends Step{constructor(n,l,d){super(),this.pos=n,this.attr=l,this.value=d}apply(n){let l=n.nodeAt(this.pos);if(!l)return StepResult.fail("No node at attribute step's position");let d=Object.create(null);for(let jn in l.attrs)d[jn]=l.attrs[jn];d[this.attr]=this.value;let g=l.type.create(d,null,l.marks);return StepResult.fromReplace(n,this.pos,this.pos+1,new Slice(Fragment.from(g),0,l.isLeaf?0:1))}getMap(){return StepMap.empty}invert(n){return new AttrStep(this.pos,this.attr,n.nodeAt(this.pos).attrs[this.attr])}map(n){let l=n.mapResult(this.pos,1);return l.deletedAfter?null:new AttrStep(l.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(n,l){if(typeof l.pos!="number"||typeof l.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(l.pos,l.attr,l.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(n,l){super(),this.attr=n,this.value=l}apply(n){let l=Object.create(null);for(let g in n.attrs)l[g]=n.attrs[g];l[this.attr]=this.value;let d=n.type.create(l,n.content,n.marks);return StepResult.ok(d)}getMap(){return StepMap.empty}invert(n){return new DocAttrStep(this.attr,n.attrs[this.attr])}map(n){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(n,l){if(typeof l.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(l.attr,l.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function e(n){let l=Error.call(this,n);return l.__proto__=e.prototype,l};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(n){this.doc=n,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(n){let l=this.maybeStep(n);if(l.failed)throw new TransformError(l.failed);return this}maybeStep(n){let l=n.apply(this.doc);return l.failed||this.addStep(n,l.doc),l}get docChanged(){return this.steps.length>0}addStep(n,l){this.docs.push(this.doc),this.steps.push(n),this.mapping.appendMap(n.getMap()),this.doc=l}replace(n,l=n,d=Slice.empty){let g=replaceStep(this.doc,n,l,d);return g&&this.step(g),this}replaceWith(n,l,d){return this.replace(n,l,new Slice(Fragment.from(d),0,0))}delete(n,l){return this.replace(n,l,Slice.empty)}insert(n,l){return this.replaceWith(n,n,l)}replaceRange(n,l,d){return replaceRange(this,n,l,d),this}replaceRangeWith(n,l,d){return replaceRangeWith(this,n,l,d),this}deleteRange(n,l){return deleteRange$1(this,n,l),this}lift(n,l){return lift$2(this,n,l),this}join(n,l=1){return join$2(this,n,l),this}wrap(n,l){return wrap$3(this,n,l),this}setBlockType(n,l=n,d,g=null){return setBlockType$1(this,n,l,d,g),this}setNodeMarkup(n,l,d=null,g){return setNodeMarkup(this,n,l,d,g),this}setNodeAttribute(n,l,d){return this.step(new AttrStep(n,l,d)),this}setDocAttribute(n,l){return this.step(new DocAttrStep(n,l)),this}addNodeMark(n,l){return this.step(new AddNodeMarkStep(n,l)),this}removeNodeMark(n,l){let d=this.doc.nodeAt(n);if(!d)throw new RangeError("No node at position "+n);if(l instanceof Mark$1)l.isInSet(d.marks)&&this.step(new RemoveNodeMarkStep(n,l));else{let g=d.marks,jn,Un=[];for(;jn=l.isInSet(g);)Un.push(new RemoveNodeMarkStep(n,jn)),g=jn.removeFromSet(g);for(let zn=Un.length-1;zn>=0;zn--)this.step(Un[zn])}return this}split(n,l=1,d){return split$1(this,n,l,d),this}addMark(n,l,d){return addMark(this,n,l,d),this}removeMark(n,l,d){return removeMark(this,n,l,d),this}clearIncompatible(n,l,d){return clearIncompatible(this,n,l,d),this}}const classesById=Object.create(null);class Selection{constructor(n,l,d){this.$anchor=n,this.$head=l,this.ranges=d||[new SelectionRange(n.min(l),n.max(l))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let n=this.ranges;for(let l=0;l<n.length;l++)if(n[l].$from.pos!=n[l].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(n,l=Slice.empty){let d=l.content.lastChild,g=null;for(let zn=0;zn<l.openEnd;zn++)g=d,d=d.lastChild;let jn=n.steps.length,Un=this.ranges;for(let zn=0;zn<Un.length;zn++){let{$from:qn,$to:Kn}=Un[zn],Xn=n.mapping.slice(jn);n.replaceRange(Xn.map(qn.pos),Xn.map(Kn.pos),zn?Slice.empty:l),zn==0&&selectionToInsertionEnd$1(n,jn,(d?d.isInline:g&&g.isTextblock)?-1:1)}}replaceWith(n,l){let d=n.steps.length,g=this.ranges;for(let jn=0;jn<g.length;jn++){let{$from:Un,$to:zn}=g[jn],qn=n.mapping.slice(d),Kn=qn.map(Un.pos),Xn=qn.map(zn.pos);jn?n.deleteRange(Kn,Xn):(n.replaceRangeWith(Kn,Xn,l),selectionToInsertionEnd$1(n,d,l.isInline?-1:1))}}static findFrom(n,l,d=!1){let g=n.parent.inlineContent?new TextSelection(n):findSelectionIn(n.node(0),n.parent,n.pos,n.index(),l,d);if(g)return g;for(let jn=n.depth-1;jn>=0;jn--){let Un=l<0?findSelectionIn(n.node(0),n.node(jn),n.before(jn+1),n.index(jn),l,d):findSelectionIn(n.node(0),n.node(jn),n.after(jn+1),n.index(jn)+1,l,d);if(Un)return Un}return null}static near(n,l=1){return this.findFrom(n,l)||this.findFrom(n,-l)||new AllSelection(n.node(0))}static atStart(n){return findSelectionIn(n,n,0,0,1)||new AllSelection(n)}static atEnd(n){return findSelectionIn(n,n,n.content.size,n.childCount,-1)||new AllSelection(n)}static fromJSON(n,l){if(!l||!l.type)throw new RangeError("Invalid input for Selection.fromJSON");let d=classesById[l.type];if(!d)throw new RangeError(`No selection type ${l.type} defined`);return d.fromJSON(n,l)}static jsonID(n,l){if(n in classesById)throw new RangeError("Duplicate use of selection JSON ID "+n);return classesById[n]=l,l.prototype.jsonID=n,l}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(n,l){this.$from=n,this.$to=l}}let warnedAboutTextSelection=!1;function checkTextSelection(e){!warnedAboutTextSelection&&!e.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class TextSelection extends Selection{constructor(n,l=n){checkTextSelection(n),checkTextSelection(l),super(n,l)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(n,l){let d=n.resolve(l.map(this.head));if(!d.parent.inlineContent)return Selection.near(d);let g=n.resolve(l.map(this.anchor));return new TextSelection(g.parent.inlineContent?g:d,d)}replace(n,l=Slice.empty){if(super.replace(n,l),l==Slice.empty){let d=this.$from.marksAcross(this.$to);d&&n.ensureMarks(d)}}eq(n){return n instanceof TextSelection&&n.anchor==this.anchor&&n.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(n,l){if(typeof l.anchor!="number"||typeof l.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(n.resolve(l.anchor),n.resolve(l.head))}static create(n,l,d=l){let g=n.resolve(l);return new this(g,d==l?g:n.resolve(d))}static between(n,l,d){let g=n.pos-l.pos;if((!d||g)&&(d=g>=0?1:-1),!l.parent.inlineContent){let jn=Selection.findFrom(l,d,!0)||Selection.findFrom(l,-d,!0);if(jn)l=jn.$head;else return Selection.near(l,d)}return n.parent.inlineContent||(g==0?n=l:(n=(Selection.findFrom(n,-d,!0)||Selection.findFrom(n,d,!0)).$anchor,n.pos<l.pos!=g<0&&(n=l))),new TextSelection(n,l)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(n,l){this.anchor=n,this.head=l}map(n){return new TextBookmark(n.map(this.anchor),n.map(this.head))}resolve(n){return TextSelection.between(n.resolve(this.anchor),n.resolve(this.head))}}class NodeSelection extends Selection{constructor(n){let l=n.nodeAfter,d=n.node(0).resolve(n.pos+l.nodeSize);super(n,d),this.node=l}map(n,l){let{deleted:d,pos:g}=l.mapResult(this.anchor),jn=n.resolve(g);return d?Selection.near(jn):new NodeSelection(jn)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(n){return n instanceof NodeSelection&&n.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(n,l){if(typeof l.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(n.resolve(l.anchor))}static create(n,l){return new NodeSelection(n.resolve(l))}static isSelectable(n){return!n.isText&&n.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(n){this.anchor=n}map(n){let{deleted:l,pos:d}=n.mapResult(this.anchor);return l?new TextBookmark(d,d):new NodeBookmark(d)}resolve(n){let l=n.resolve(this.anchor),d=l.nodeAfter;return d&&NodeSelection.isSelectable(d)?new NodeSelection(l):Selection.near(l)}}class AllSelection extends Selection{constructor(n){super(n.resolve(0),n.resolve(n.content.size))}replace(n,l=Slice.empty){if(l==Slice.empty){n.delete(0,n.doc.content.size);let d=Selection.atStart(n.doc);d.eq(n.selection)||n.setSelection(d)}else super.replace(n,l)}toJSON(){return{type:"all"}}static fromJSON(n){return new AllSelection(n)}map(n){return new AllSelection(n)}eq(n){return n instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(e){return new AllSelection(e)}};function findSelectionIn(e,n,l,d,g,jn=!1){if(n.inlineContent)return TextSelection.create(e,l);for(let Un=d-(g>0?0:1);g>0?Un<n.childCount:Un>=0;Un+=g){let zn=n.child(Un);if(zn.isAtom){if(!jn&&NodeSelection.isSelectable(zn))return NodeSelection.create(e,l-(g<0?zn.nodeSize:0))}else{let qn=findSelectionIn(e,zn,l+g,g<0?zn.childCount:0,g,jn);if(qn)return qn}l+=zn.nodeSize*g}return null}function selectionToInsertionEnd$1(e,n,l){let d=e.steps.length-1;if(d<n)return;let g=e.steps[d];if(!(g instanceof ReplaceStep||g instanceof ReplaceAroundStep))return;let jn=e.mapping.maps[d],Un;jn.forEach((zn,qn,Kn,Xn)=>{Un==null&&(Un=Xn)}),e.setSelection(Selection.near(e.doc.resolve(Un),l))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(n){super(n.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=n.selection,this.storedMarks=n.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(n){if(n.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=n,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(n){return this.storedMarks=n,this.updated|=UPDATED_MARKS,this}ensureMarks(n){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),n)||this.setStoredMarks(n),this}addStoredMark(n){return this.ensureMarks(n.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(n){return this.ensureMarks(n.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(n,l){super.addStep(n,l),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(n){return this.time=n,this}replaceSelection(n){return this.selection.replace(this,n),this}replaceSelectionWith(n,l=!0){let d=this.selection;return l&&(n=n.mark(this.storedMarks||(d.empty?d.$from.marks():d.$from.marksAcross(d.$to)||Mark$1.none))),d.replaceWith(this,n),this}deleteSelection(){return this.selection.replace(this),this}insertText(n,l,d){let g=this.doc.type.schema;if(l==null)return n?this.replaceSelectionWith(g.text(n),!0):this.deleteSelection();{if(d==null&&(d=l),!n)return this.deleteRange(l,d);let jn=this.storedMarks;if(!jn){let Un=this.doc.resolve(l);jn=d==l?Un.marks():Un.marksAcross(this.doc.resolve(d))}return this.replaceRangeWith(l,d,g.text(n,jn)),!this.selection.empty&&this.selection.to==l+n.length&&this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(n,l){return this.meta[typeof n=="string"?n:n.key]=l,this}getMeta(n){return this.meta[typeof n=="string"?n:n.key]}get isGeneric(){for(let n in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind(e,n){return!n||!e?e:e.bind(n)}class FieldDesc{constructor(n,l,d){this.name=n,this.init=bind(l.init,d),this.apply=bind(l.apply,d)}}const baseFields=[new FieldDesc("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new FieldDesc("selection",{init(e,n){return e.selection||Selection.atStart(n.doc)},apply(e){return e.selection}}),new FieldDesc("storedMarks",{init(e){return e.storedMarks||null},apply(e,n,l,d){return d.selection.$cursor?e.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(e,n){return e.scrolledIntoView?n+1:n}})];class Configuration{constructor(n,l){this.schema=n,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),l&&l.forEach(d=>{if(this.pluginsByKey[d.key])throw new RangeError("Adding different instances of a keyed plugin ("+d.key+")");this.plugins.push(d),this.pluginsByKey[d.key]=d,d.spec.state&&this.fields.push(new FieldDesc(d.key,d.spec.state,d))})}}class EditorState{constructor(n){this.config=n}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(n){return this.applyTransaction(n).state}filterTransaction(n,l=-1){for(let d=0;d<this.config.plugins.length;d++)if(d!=l){let g=this.config.plugins[d];if(g.spec.filterTransaction&&!g.spec.filterTransaction.call(g,n,this))return!1}return!0}applyTransaction(n){if(!this.filterTransaction(n))return{state:this,transactions:[]};let l=[n],d=this.applyInner(n),g=null;for(;;){let jn=!1;for(let Un=0;Un<this.config.plugins.length;Un++){let zn=this.config.plugins[Un];if(zn.spec.appendTransaction){let qn=g?g[Un].n:0,Kn=g?g[Un].state:this,Xn=qn<l.length&&zn.spec.appendTransaction.call(zn,qn?l.slice(qn):l,Kn,d);if(Xn&&d.filterTransaction(Xn,Un)){if(Xn.setMeta("appendedTransaction",n),!g){g=[];for(let Qn=0;Qn<this.config.plugins.length;Qn++)g.push(Qn<Un?{state:d,n:l.length}:{state:this,n:0})}l.push(Xn),d=d.applyInner(Xn),jn=!0}g&&(g[Un]={state:d,n:l.length})}}if(!jn)return{state:d,transactions:l}}}applyInner(n){if(!n.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let l=new EditorState(this.config),d=this.config.fields;for(let g=0;g<d.length;g++){let jn=d[g];l[jn.name]=jn.apply(n,this[jn.name],this,l)}return l}get tr(){return new Transaction$1(this)}static create(n){let l=new Configuration(n.doc?n.doc.type.schema:n.schema,n.plugins),d=new EditorState(l);for(let g=0;g<l.fields.length;g++)d[l.fields[g].name]=l.fields[g].init(n,d);return d}reconfigure(n){let l=new Configuration(this.schema,n.plugins),d=l.fields,g=new EditorState(l);for(let jn=0;jn<d.length;jn++){let Un=d[jn].name;g[Un]=this.hasOwnProperty(Un)?this[Un]:d[jn].init(n,g)}return g}toJSON(n){let l={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(l.storedMarks=this.storedMarks.map(d=>d.toJSON())),n&&typeof n=="object")for(let d in n){if(d=="doc"||d=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let g=n[d],jn=g.spec.state;jn&&jn.toJSON&&(l[d]=jn.toJSON.call(g,this[g.key]))}return l}static fromJSON(n,l,d){if(!l)throw new RangeError("Invalid input for EditorState.fromJSON");if(!n.schema)throw new RangeError("Required config field 'schema' missing");let g=new Configuration(n.schema,n.plugins),jn=new EditorState(g);return g.fields.forEach(Un=>{if(Un.name=="doc")jn.doc=Node$1.fromJSON(n.schema,l.doc);else if(Un.name=="selection")jn.selection=Selection.fromJSON(jn.doc,l.selection);else if(Un.name=="storedMarks")l.storedMarks&&(jn.storedMarks=l.storedMarks.map(n.schema.markFromJSON));else{if(d)for(let zn in d){let qn=d[zn],Kn=qn.spec.state;if(qn.key==Un.name&&Kn&&Kn.fromJSON&&Object.prototype.hasOwnProperty.call(l,zn)){jn[Un.name]=Kn.fromJSON.call(qn,n,l[zn],jn);return}}jn[Un.name]=Un.init(n,jn)}}),jn}}function bindProps(e,n,l){for(let d in e){let g=e[d];g instanceof Function?g=g.bind(n):d=="handleDOMEvents"&&(g=bindProps(g,n,{})),l[d]=g}return l}class Plugin{constructor(n){this.spec=n,this.props={},n.props&&bindProps(n.props,this,this.props),this.key=n.key?n.key.key:createKey("plugin")}getState(n){return n[this.key]}}const keys$3=Object.create(null);function createKey(e){return e in keys$3?e+"$"+ ++keys$3[e]:(keys$3[e]=0,e+"$")}class PluginKey{constructor(n="key"){this.key=createKey(n)}get(n){return n.config.pluginsByKey[this.key]}getState(n){return n[this.key]}}const deleteSelection$1=(e,n)=>e.selection.empty?!1:(n&&n(e.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(e,n){let{$cursor:l}=e.selection;return!l||(n?!n.endOfTextblock("backward",e):l.parentOffset>0)?null:l}const joinBackward$1=(e,n,l)=>{let d=atBlockStart(e,l);if(!d)return!1;let g=findCutBefore(d);if(!g){let Un=d.blockRange(),zn=Un&&liftTarget(Un);return zn==null?!1:(n&&n(e.tr.lift(Un,zn).scrollIntoView()),!0)}let jn=g.nodeBefore;if(deleteBarrier(e,g,n,-1))return!0;if(d.parent.content.size==0&&(textblockAt(jn,"end")||NodeSelection.isSelectable(jn)))for(let Un=d.depth;;Un--){let zn=replaceStep(e.doc,d.before(Un),d.after(Un),Slice.empty);if(zn&&zn.slice.size<zn.to-zn.from){if(n){let qn=e.tr.step(zn);qn.setSelection(textblockAt(jn,"end")?Selection.findFrom(qn.doc.resolve(qn.mapping.map(g.pos,-1)),-1):NodeSelection.create(qn.doc,g.pos-jn.nodeSize)),n(qn.scrollIntoView())}return!0}if(Un==1||d.node(Un-1).childCount>1)break}return jn.isAtom&&g.depth==d.depth-1?(n&&n(e.tr.delete(g.pos-jn.nodeSize,g.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(e,n,l)=>{let d=atBlockStart(e,l);if(!d)return!1;let g=findCutBefore(d);return g?joinTextblocksAround(e,g,n):!1},joinTextblockForward$1=(e,n,l)=>{let d=atBlockEnd(e,l);if(!d)return!1;let g=findCutAfter(d);return g?joinTextblocksAround(e,g,n):!1};function joinTextblocksAround(e,n,l){let d=n.nodeBefore,g=d,jn=n.pos-1;for(;!g.isTextblock;jn--){if(g.type.spec.isolating)return!1;let Xn=g.lastChild;if(!Xn)return!1;g=Xn}let Un=n.nodeAfter,zn=Un,qn=n.pos+1;for(;!zn.isTextblock;qn++){if(zn.type.spec.isolating)return!1;let Xn=zn.firstChild;if(!Xn)return!1;zn=Xn}let Kn=replaceStep(e.doc,jn,qn,Slice.empty);if(!Kn||Kn.from!=jn||Kn instanceof ReplaceStep&&Kn.slice.size>=qn-jn)return!1;if(l){let Xn=e.tr.step(Kn);Xn.setSelection(TextSelection.create(Xn.doc,jn)),l(Xn.scrollIntoView())}return!0}function textblockAt(e,n,l=!1){for(let d=e;d;d=n=="start"?d.firstChild:d.lastChild){if(d.isTextblock)return!0;if(l&&d.childCount!=1)return!1}return!1}const selectNodeBackward$1=(e,n,l)=>{let{$head:d,empty:g}=e.selection,jn=d;if(!g)return!1;if(d.parent.isTextblock){if(l?!l.endOfTextblock("backward",e):d.parentOffset>0)return!1;jn=findCutBefore(d)}let Un=jn&&jn.nodeBefore;return!Un||!NodeSelection.isSelectable(Un)?!1:(n&&n(e.tr.setSelection(NodeSelection.create(e.doc,jn.pos-Un.nodeSize)).scrollIntoView()),!0)};function findCutBefore(e){if(!e.parent.type.spec.isolating)for(let n=e.depth-1;n>=0;n--){if(e.index(n)>0)return e.doc.resolve(e.before(n+1));if(e.node(n).type.spec.isolating)break}return null}function atBlockEnd(e,n){let{$cursor:l}=e.selection;return!l||(n?!n.endOfTextblock("forward",e):l.parentOffset<l.parent.content.size)?null:l}const joinForward$1=(e,n,l)=>{let d=atBlockEnd(e,l);if(!d)return!1;let g=findCutAfter(d);if(!g)return!1;let jn=g.nodeAfter;if(deleteBarrier(e,g,n,1))return!0;if(d.parent.content.size==0&&(textblockAt(jn,"start")||NodeSelection.isSelectable(jn))){let Un=replaceStep(e.doc,d.before(),d.after(),Slice.empty);if(Un&&Un.slice.size<Un.to-Un.from){if(n){let zn=e.tr.step(Un);zn.setSelection(textblockAt(jn,"start")?Selection.findFrom(zn.doc.resolve(zn.mapping.map(g.pos)),1):NodeSelection.create(zn.doc,zn.mapping.map(g.pos))),n(zn.scrollIntoView())}return!0}}return jn.isAtom&&g.depth==d.depth-1?(n&&n(e.tr.delete(g.pos,g.pos+jn.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(e,n,l)=>{let{$head:d,empty:g}=e.selection,jn=d;if(!g)return!1;if(d.parent.isTextblock){if(l?!l.endOfTextblock("forward",e):d.parentOffset<d.parent.content.size)return!1;jn=findCutAfter(d)}let Un=jn&&jn.nodeAfter;return!Un||!NodeSelection.isSelectable(Un)?!1:(n&&n(e.tr.setSelection(NodeSelection.create(e.doc,jn.pos)).scrollIntoView()),!0)};function findCutAfter(e){if(!e.parent.type.spec.isolating)for(let n=e.depth-1;n>=0;n--){let l=e.node(n);if(e.index(n)+1<l.childCount)return e.doc.resolve(e.after(n+1));if(l.type.spec.isolating)break}return null}const joinUp$1=(e,n)=>{let l=e.selection,d=l instanceof NodeSelection,g;if(d){if(l.node.isTextblock||!canJoin(e.doc,l.from))return!1;g=l.from}else if(g=joinPoint(e.doc,l.from,-1),g==null)return!1;if(n){let jn=e.tr.join(g);d&&jn.setSelection(NodeSelection.create(jn.doc,g-e.doc.resolve(g).nodeBefore.nodeSize)),n(jn.scrollIntoView())}return!0},joinDown$1=(e,n)=>{let l=e.selection,d;if(l instanceof NodeSelection){if(l.node.isTextblock||!canJoin(e.doc,l.to))return!1;d=l.to}else if(d=joinPoint(e.doc,l.to,1),d==null)return!1;return n&&n(e.tr.join(d).scrollIntoView()),!0},lift$1=(e,n)=>{let{$from:l,$to:d}=e.selection,g=l.blockRange(d),jn=g&&liftTarget(g);return jn==null?!1:(n&&n(e.tr.lift(g,jn).scrollIntoView()),!0)},newlineInCode$1=(e,n)=>{let{$head:l,$anchor:d}=e.selection;return!l.parent.type.spec.code||!l.sameParent(d)?!1:(n&&n(e.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(e){for(let n=0;n<e.edgeCount;n++){let{type:l}=e.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}const exitCode$1=(e,n)=>{let{$head:l,$anchor:d}=e.selection;if(!l.parent.type.spec.code||!l.sameParent(d))return!1;let g=l.node(-1),jn=l.indexAfter(-1),Un=defaultBlockAt$1(g.contentMatchAt(jn));if(!Un||!g.canReplaceWith(jn,jn,Un))return!1;if(n){let zn=l.after(),qn=e.tr.replaceWith(zn,zn,Un.createAndFill());qn.setSelection(Selection.near(qn.doc.resolve(zn),1)),n(qn.scrollIntoView())}return!0},createParagraphNear$1=(e,n)=>{let l=e.selection,{$from:d,$to:g}=l;if(l instanceof AllSelection||d.parent.inlineContent||g.parent.inlineContent)return!1;let jn=defaultBlockAt$1(g.parent.contentMatchAt(g.indexAfter()));if(!jn||!jn.isTextblock)return!1;if(n){let Un=(!d.parentOffset&&g.index()<g.parent.childCount?d:g).pos,zn=e.tr.insert(Un,jn.createAndFill());zn.setSelection(TextSelection.create(zn.doc,Un+1)),n(zn.scrollIntoView())}return!0},liftEmptyBlock$1=(e,n)=>{let{$cursor:l}=e.selection;if(!l||l.parent.content.size)return!1;if(l.depth>1&&l.after()!=l.end(-1)){let jn=l.before();if(canSplit(e.doc,jn))return n&&n(e.tr.split(jn).scrollIntoView()),!0}let d=l.blockRange(),g=d&&liftTarget(d);return g==null?!1:(n&&n(e.tr.lift(d,g).scrollIntoView()),!0)};function splitBlockAs(e){return(n,l)=>{let{$from:d,$to:g}=n.selection;if(n.selection instanceof NodeSelection&&n.selection.node.isBlock)return!d.parentOffset||!canSplit(n.doc,d.pos)?!1:(l&&l(n.tr.split(d.pos).scrollIntoView()),!0);if(!d.depth)return!1;let jn=[],Un,zn,qn=!1,Kn=!1;for(let Ai=d.depth;;Ai--)if(d.node(Ai).isBlock){qn=d.end(Ai)==d.pos+(d.depth-Ai),Kn=d.start(Ai)==d.pos-(d.depth-Ai),zn=defaultBlockAt$1(d.node(Ai-1).contentMatchAt(d.indexAfter(Ai-1))),jn.unshift(qn&&zn?{type:zn}:null),Un=Ai;break}else{if(Ai==1)return!1;jn.unshift(null)}let Xn=n.tr;(n.selection instanceof TextSelection||n.selection instanceof AllSelection)&&Xn.deleteSelection();let Qn=Xn.mapping.map(d.pos),Jn=canSplit(Xn.doc,Qn,jn.length,jn);if(Jn||(jn[0]=zn?{type:zn}:null,Jn=canSplit(Xn.doc,Qn,jn.length,jn)),!Jn)return!1;if(Xn.split(Qn,jn.length,jn),!qn&&Kn&&d.node(Un).type!=zn){let Ai=Xn.mapping.map(d.before(Un)),Ri=Xn.doc.resolve(Ai);zn&&d.node(Un-1).canReplaceWith(Ri.index(),Ri.index()+1,zn)&&Xn.setNodeMarkup(Xn.mapping.map(d.before(Un)),zn)}return l&&l(Xn.scrollIntoView()),!0}}const splitBlock$1=splitBlockAs(),selectParentNode$1=(e,n)=>{let{$from:l,to:d}=e.selection,g,jn=l.sharedDepth(d);return jn==0?!1:(g=l.before(jn),n&&n(e.tr.setSelection(NodeSelection.create(e.doc,g))),!0)};function joinMaybeClear(e,n,l){let d=n.nodeBefore,g=n.nodeAfter,jn=n.index();return!d||!g||!d.type.compatibleContent(g.type)?!1:!d.content.size&&n.parent.canReplace(jn-1,jn)?(l&&l(e.tr.delete(n.pos-d.nodeSize,n.pos).scrollIntoView()),!0):!n.parent.canReplace(jn,jn+1)||!(g.isTextblock||canJoin(e.doc,n.pos))?!1:(l&&l(e.tr.join(n.pos).scrollIntoView()),!0)}function deleteBarrier(e,n,l,d){let g=n.nodeBefore,jn=n.nodeAfter,Un,zn,qn=g.type.spec.isolating||jn.type.spec.isolating;if(!qn&&joinMaybeClear(e,n,l))return!0;let Kn=!qn&&n.parent.canReplace(n.index(),n.index()+1);if(Kn&&(Un=(zn=g.contentMatchAt(g.childCount)).findWrapping(jn.type))&&zn.matchType(Un[0]||jn.type).validEnd){if(l){let Ai=n.pos+jn.nodeSize,Ri=Fragment.empty;for(let Li=Un.length-1;Li>=0;Li--)Ri=Fragment.from(Un[Li].create(null,Ri));Ri=Fragment.from(g.copy(Ri));let Ni=e.tr.step(new ReplaceAroundStep(n.pos-1,Ai,n.pos,Ai,new Slice(Ri,1,0),Un.length,!0)),$i=Ni.doc.resolve(Ai+2*Un.length);$i.nodeAfter&&$i.nodeAfter.type==g.type&&canJoin(Ni.doc,$i.pos)&&Ni.join($i.pos),l(Ni.scrollIntoView())}return!0}let Xn=jn.type.spec.isolating||d>0&&qn?null:Selection.findFrom(n,1),Qn=Xn&&Xn.$from.blockRange(Xn.$to),Jn=Qn&&liftTarget(Qn);if(Jn!=null&&Jn>=n.depth)return l&&l(e.tr.lift(Qn,Jn).scrollIntoView()),!0;if(Kn&&textblockAt(jn,"start",!0)&&textblockAt(g,"end")){let Ai=g,Ri=[];for(;Ri.push(Ai),!Ai.isTextblock;)Ai=Ai.lastChild;let Ni=jn,$i=1;for(;!Ni.isTextblock;Ni=Ni.firstChild)$i++;if(Ai.canReplace(Ai.childCount,Ai.childCount,Ni.content)){if(l){let Li=Fragment.empty;for(let Fi=Ri.length-1;Fi>=0;Fi--)Li=Fragment.from(Ri[Fi].copy(Li));let ji=e.tr.step(new ReplaceAroundStep(n.pos-Ri.length,n.pos+jn.nodeSize,n.pos+$i,n.pos+jn.nodeSize-$i,new Slice(Li,Ri.length,0),0,!0));l(ji.scrollIntoView())}return!0}}return!1}function selectTextblockSide(e){return function(n,l){let d=n.selection,g=e<0?d.$from:d.$to,jn=g.depth;for(;g.node(jn).isInline;){if(!jn)return!1;jn--}return g.node(jn).isTextblock?(l&&l(n.tr.setSelection(TextSelection.create(n.doc,e<0?g.start(jn):g.end(jn)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(e,n=null){return function(l,d){let{$from:g,$to:jn}=l.selection,Un=g.blockRange(jn),zn=Un&&findWrapping(Un,e,n);return zn?(d&&d(l.tr.wrap(Un,zn).scrollIntoView()),!0):!1}}function setBlockType(e,n=null){return function(l,d){let g=!1;for(let jn=0;jn<l.selection.ranges.length&&!g;jn++){let{$from:{pos:Un},$to:{pos:zn}}=l.selection.ranges[jn];l.doc.nodesBetween(Un,zn,(qn,Kn)=>{if(g)return!1;if(!(!qn.isTextblock||qn.hasMarkup(e,n)))if(qn.type==e)g=!0;else{let Xn=l.doc.resolve(Kn),Qn=Xn.index();g=Xn.parent.canReplaceWith(Qn,Qn+1,e)}})}if(!g)return!1;if(d){let jn=l.tr;for(let Un=0;Un<l.selection.ranges.length;Un++){let{$from:{pos:zn},$to:{pos:qn}}=l.selection.ranges[Un];jn.setBlockType(zn,qn,e,n)}d(jn.scrollIntoView())}return!0}}function chainCommands(...e){return function(n,l,d){for(let g=0;g<e.length;g++)if(e[g](n,l,d))return!0;return!1}}chainCommands(deleteSelection$1,joinBackward$1,selectNodeBackward$1);chainCommands(deleteSelection$1,joinForward$1,selectNodeForward$1);chainCommands(newlineInCode$1,createParagraphNear$1,liftEmptyBlock$1,splitBlock$1);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(e,n=null){return function(l,d){let{$from:g,$to:jn}=l.selection,Un=g.blockRange(jn);if(!Un)return!1;let zn=d?l.tr:null;return wrapRangeInList(zn,Un,e,n)?(d&&d(zn.scrollIntoView()),!0):!1}}function wrapRangeInList(e,n,l,d=null){let g=!1,jn=n,Un=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(l)&&n.startIndex==0){if(n.$from.index(n.depth-1)==0)return!1;let qn=Un.resolve(n.start-2);jn=new NodeRange(qn,qn,n.depth),n.endIndex<n.parent.childCount&&(n=new NodeRange(n.$from,Un.resolve(n.$to.end(n.depth)),n.depth)),g=!0}let zn=findWrapping(jn,l,d,n);return zn?(e&&doWrapInList(e,n,zn,g,l),!0):!1}function doWrapInList(e,n,l,d,g){let jn=Fragment.empty;for(let Xn=l.length-1;Xn>=0;Xn--)jn=Fragment.from(l[Xn].type.create(l[Xn].attrs,jn));e.step(new ReplaceAroundStep(n.start-(d?2:0),n.end,n.start,n.end,new Slice(jn,0,0),l.length,!0));let Un=0;for(let Xn=0;Xn<l.length;Xn++)l[Xn].type==g&&(Un=Xn+1);let zn=l.length-Un,qn=n.start+l.length-(d?2:0),Kn=n.parent;for(let Xn=n.startIndex,Qn=n.endIndex,Jn=!0;Xn<Qn;Xn++,Jn=!1)!Jn&&canSplit(e.doc,qn,zn)&&(e.split(qn,zn),qn+=2*zn),qn+=Kn.child(Xn).nodeSize;return e}function liftListItem$1(e){return function(n,l){let{$from:d,$to:g}=n.selection,jn=d.blockRange(g,Un=>Un.childCount>0&&Un.firstChild.type==e);return jn?l?d.node(jn.depth-1).type==e?liftToOuterList(n,l,e,jn):liftOutOfList(n,l,jn):!0:!1}}function liftToOuterList(e,n,l,d){let g=e.tr,jn=d.end,Un=d.$to.end(d.depth);jn<Un&&(g.step(new ReplaceAroundStep(jn-1,Un,jn,Un,new Slice(Fragment.from(l.create(null,d.parent.copy())),1,0),1,!0)),d=new NodeRange(g.doc.resolve(d.$from.pos),g.doc.resolve(Un),d.depth));const zn=liftTarget(d);if(zn==null)return!1;g.lift(d,zn);let qn=g.doc.resolve(g.mapping.map(jn,-1)-1);return canJoin(g.doc,qn.pos)&&qn.nodeBefore.type==qn.nodeAfter.type&&g.join(qn.pos),n(g.scrollIntoView()),!0}function liftOutOfList(e,n,l){let d=e.tr,g=l.parent;for(let Ai=l.end,Ri=l.endIndex-1,Ni=l.startIndex;Ri>Ni;Ri--)Ai-=g.child(Ri).nodeSize,d.delete(Ai-1,Ai+1);let jn=d.doc.resolve(l.start),Un=jn.nodeAfter;if(d.mapping.map(l.end)!=l.start+jn.nodeAfter.nodeSize)return!1;let zn=l.startIndex==0,qn=l.endIndex==g.childCount,Kn=jn.node(-1),Xn=jn.index(-1);if(!Kn.canReplace(Xn+(zn?0:1),Xn+1,Un.content.append(qn?Fragment.empty:Fragment.from(g))))return!1;let Qn=jn.pos,Jn=Qn+Un.nodeSize;return d.step(new ReplaceAroundStep(Qn-(zn?1:0),Jn+(qn?1:0),Qn+1,Jn-1,new Slice((zn?Fragment.empty:Fragment.from(g.copy(Fragment.empty))).append(qn?Fragment.empty:Fragment.from(g.copy(Fragment.empty))),zn?0:1,qn?0:1),zn?0:1)),n(d.scrollIntoView()),!0}function sinkListItem$1(e){return function(n,l){let{$from:d,$to:g}=n.selection,jn=d.blockRange(g,Kn=>Kn.childCount>0&&Kn.firstChild.type==e);if(!jn)return!1;let Un=jn.startIndex;if(Un==0)return!1;let zn=jn.parent,qn=zn.child(Un-1);if(qn.type!=e)return!1;if(l){let Kn=qn.lastChild&&qn.lastChild.type==zn.type,Xn=Fragment.from(Kn?e.create():null),Qn=new Slice(Fragment.from(e.create(null,Fragment.from(zn.type.create(null,Xn)))),Kn?3:1,0),Jn=jn.start,Ai=jn.end;l(n.tr.step(new ReplaceAroundStep(Jn-(Kn?3:1),Ai,Jn,Ai,Qn,1,!0)).scrollIntoView())}return!0}}const domIndex=function(e){for(var n=0;;n++)if(e=e.previousSibling,!e)return n},parentNode=function(e){let n=e.assignedSlot||e.parentNode;return n&&n.nodeType==11?n.host:n};let reusedRange=null;const textRange=function(e,n,l){let d=reusedRange||(reusedRange=document.createRange());return d.setEnd(e,l??e.nodeValue.length),d.setStart(e,n||0),d},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(e,n,l,d){return l&&(scanFor(e,n,l,d,-1)||scanFor(e,n,l,d,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(e,n,l,d,g){for(var jn;;){if(e==l&&n==d)return!0;if(n==(g<0?0:nodeSize(e))){let Un=e.parentNode;if(!Un||Un.nodeType!=1||hasBlockDesc(e)||atomElements.test(e.nodeName)||e.contentEditable=="false")return!1;n=domIndex(e)+(g<0?0:1),e=Un}else if(e.nodeType==1){let Un=e.childNodes[n+(g<0?-1:0)];if(Un.nodeType==1&&Un.contentEditable=="false")if(!((jn=Un.pmViewDesc)===null||jn===void 0)&&jn.ignoreForSelection)n+=g;else return!1;else e=Un,n=g<0?nodeSize(e):0}else return!1}}function nodeSize(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function textNodeBefore$1(e,n){for(;;){if(e.nodeType==3&&n)return e;if(e.nodeType==1&&n>0){if(e.contentEditable=="false")return null;e=e.childNodes[n-1],n=nodeSize(e)}else if(e.parentNode&&!hasBlockDesc(e))n=domIndex(e),e=e.parentNode;else return null}}function textNodeAfter$1(e,n){for(;;){if(e.nodeType==3&&n<e.nodeValue.length)return e;if(e.nodeType==1&&n<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[n],n=0}else if(e.parentNode&&!hasBlockDesc(e))n=domIndex(e)+1,e=e.parentNode;else return null}}function isOnEdge(e,n,l){for(let d=n==0,g=n==nodeSize(e);d||g;){if(e==l)return!0;let jn=domIndex(e);if(e=e.parentNode,!e)return!1;d=d&&jn==0,g=g&&jn==nodeSize(e)}}function hasBlockDesc(e){let n;for(let l=e;l&&!(n=l.pmViewDesc);l=l.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==e||n.contentDOM==e)}const selectionCollapsed=function(e){return e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function keyEvent(e,n){let l=document.createEvent("Event");return l.initEvent("keydown",!0,!0),l.keyCode=e,l.key=l.code=n,l}function deepActiveElement(e){let n=e.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function caretFromPoint(e,n,l){if(e.caretPositionFromPoint)try{let d=e.caretPositionFromPoint(n,l);if(d)return{node:d.offsetNode,offset:Math.min(nodeSize(d.offsetNode),d.offset)}}catch{}if(e.caretRangeFromPoint){let d=e.caretRangeFromPoint(n,l);if(d)return{node:d.startContainer,offset:Math.min(nodeSize(d.startContainer),d.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$3=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$3&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$3&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$3&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(e){let n=e.defaultView&&e.defaultView.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function getSide$1(e,n){return typeof e=="number"?e:e[n]}function clientRect(e){let n=e.getBoundingClientRect(),l=n.width/e.offsetWidth||1,d=n.height/e.offsetHeight||1;return{left:n.left,right:n.left+e.clientWidth*l,top:n.top,bottom:n.top+e.clientHeight*d}}function scrollRectIntoView(e,n,l){let d=e.someProp("scrollThreshold")||0,g=e.someProp("scrollMargin")||5,jn=e.dom.ownerDocument;for(let Un=l||e.dom;Un;){if(Un.nodeType!=1){Un=parentNode(Un);continue}let zn=Un,qn=zn==jn.body,Kn=qn?windowRect(jn):clientRect(zn),Xn=0,Qn=0;if(n.top<Kn.top+getSide$1(d,"top")?Qn=-(Kn.top-n.top+getSide$1(g,"top")):n.bottom>Kn.bottom-getSide$1(d,"bottom")&&(Qn=n.bottom-n.top>Kn.bottom-Kn.top?n.top+getSide$1(g,"top")-Kn.top:n.bottom-Kn.bottom+getSide$1(g,"bottom")),n.left<Kn.left+getSide$1(d,"left")?Xn=-(Kn.left-n.left+getSide$1(g,"left")):n.right>Kn.right-getSide$1(d,"right")&&(Xn=n.right-Kn.right+getSide$1(g,"right")),Xn||Qn)if(qn)jn.defaultView.scrollBy(Xn,Qn);else{let Ai=zn.scrollLeft,Ri=zn.scrollTop;Qn&&(zn.scrollTop+=Qn),Xn&&(zn.scrollLeft+=Xn);let Ni=zn.scrollLeft-Ai,$i=zn.scrollTop-Ri;n={left:n.left-Ni,top:n.top-$i,right:n.right-Ni,bottom:n.bottom-$i}}let Jn=qn?"fixed":getComputedStyle(Un).position;if(/^(fixed|sticky)$/.test(Jn))break;Un=Jn=="absolute"?Un.offsetParent:parentNode(Un)}}function storeScrollPos(e){let n=e.dom.getBoundingClientRect(),l=Math.max(0,n.top),d,g;for(let jn=(n.left+n.right)/2,Un=l+1;Un<Math.min(innerHeight,n.bottom);Un+=5){let zn=e.root.elementFromPoint(jn,Un);if(!zn||zn==e.dom||!e.dom.contains(zn))continue;let qn=zn.getBoundingClientRect();if(qn.top>=l-20){d=zn,g=qn.top;break}}return{refDOM:d,refTop:g,stack:scrollStack(e.dom)}}function scrollStack(e){let n=[],l=e.ownerDocument;for(let d=e;d&&(n.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),e!=l);d=parentNode(d));return n}function resetScrollPos({refDOM:e,refTop:n,stack:l}){let d=e?e.getBoundingClientRect().top:0;restoreScrollStack(l,d==0?0:d-n)}function restoreScrollStack(e,n){for(let l=0;l<e.length;l++){let{dom:d,top:g,left:jn}=e[l];d.scrollTop!=g+n&&(d.scrollTop=g+n),d.scrollLeft!=jn&&(d.scrollLeft=jn)}}let preventScrollSupported=null;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let n=scrollStack(e);e.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(n,0))}function findOffsetInNode(e,n){let l,d=2e8,g,jn=0,Un=n.top,zn=n.top,qn,Kn;for(let Xn=e.firstChild,Qn=0;Xn;Xn=Xn.nextSibling,Qn++){let Jn;if(Xn.nodeType==1)Jn=Xn.getClientRects();else if(Xn.nodeType==3)Jn=textRange(Xn).getClientRects();else continue;for(let Ai=0;Ai<Jn.length;Ai++){let Ri=Jn[Ai];if(Ri.top<=Un&&Ri.bottom>=zn){Un=Math.max(Ri.bottom,Un),zn=Math.min(Ri.top,zn);let Ni=Ri.left>n.left?Ri.left-n.left:Ri.right<n.left?n.left-Ri.right:0;if(Ni<d){l=Xn,d=Ni,g=Ni&&l.nodeType==3?{left:Ri.right<n.left?Ri.right:Ri.left,top:n.top}:n,Xn.nodeType==1&&Ni&&(jn=Qn+(n.left>=(Ri.left+Ri.right)/2?1:0));continue}}else Ri.top>n.top&&!qn&&Ri.left<=n.left&&Ri.right>=n.left&&(qn=Xn,Kn={left:Math.max(Ri.left,Math.min(Ri.right,n.left)),top:Ri.top});!l&&(n.left>=Ri.right&&n.top>=Ri.top||n.left>=Ri.left&&n.top>=Ri.bottom)&&(jn=Qn+1)}}return!l&&qn&&(l=qn,g=Kn,d=0),l&&l.nodeType==3?findOffsetInText(l,g):!l||d&&l.nodeType==1?{node:e,offset:jn}:findOffsetInNode(l,g)}function findOffsetInText(e,n){let l=e.nodeValue.length,d=document.createRange(),g;for(let jn=0;jn<l;jn++){d.setEnd(e,jn+1),d.setStart(e,jn);let Un=singleRect(d,1);if(Un.top!=Un.bottom&&inRect(n,Un)){g={node:e,offset:jn+(n.left>=(Un.left+Un.right)/2?1:0)};break}}return d.detach(),g||{node:e,offset:0}}function inRect(e,n){return e.left>=n.left-1&&e.left<=n.right+1&&e.top>=n.top-1&&e.top<=n.bottom+1}function targetKludge(e,n){let l=e.parentNode;return l&&/^li$/i.test(l.nodeName)&&n.left<e.getBoundingClientRect().left?l:e}function posFromElement(e,n,l){let{node:d,offset:g}=findOffsetInNode(n,l),jn=-1;if(d.nodeType==1&&!d.firstChild){let Un=d.getBoundingClientRect();jn=Un.left!=Un.right&&l.left>(Un.left+Un.right)/2?1:-1}return e.docView.posFromDOM(d,g,jn)}function posFromCaret(e,n,l,d){let g=-1;for(let jn=n,Un=!1;jn!=e.dom;){let zn=e.docView.nearestDesc(jn,!0),qn;if(!zn)return null;if(zn.dom.nodeType==1&&(zn.node.isBlock&&zn.parent||!zn.contentDOM)&&((qn=zn.dom.getBoundingClientRect()).width||qn.height)&&(zn.node.isBlock&&zn.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(zn.dom.nodeName)&&(!Un&&qn.left>d.left||qn.top>d.top?g=zn.posBefore:(!Un&&qn.right<d.left||qn.bottom<d.top)&&(g=zn.posAfter),Un=!0),!zn.contentDOM&&g<0&&!zn.node.isText))return(zn.node.isBlock?d.top<(qn.top+qn.bottom)/2:d.left<(qn.left+qn.right)/2)?zn.posBefore:zn.posAfter;jn=zn.dom.parentNode}return g>-1?g:e.docView.posFromDOM(n,l,-1)}function elementFromPoint(e,n,l){let d=e.childNodes.length;if(d&&l.top<l.bottom)for(let g=Math.max(0,Math.min(d-1,Math.floor(d*(n.top-l.top)/(l.bottom-l.top))-2)),jn=g;;){let Un=e.childNodes[jn];if(Un.nodeType==1){let zn=Un.getClientRects();for(let qn=0;qn<zn.length;qn++){let Kn=zn[qn];if(inRect(n,Kn))return elementFromPoint(Un,n,Kn)}}if((jn=(jn+1)%d)==g)break}return e}function posAtCoords(e,n){let l=e.dom.ownerDocument,d,g=0,jn=caretFromPoint(l,n.left,n.top);jn&&({node:d,offset:g}=jn);let Un=(e.root.elementFromPoint?e.root:l).elementFromPoint(n.left,n.top),zn;if(!Un||!e.dom.contains(Un.nodeType!=1?Un.parentNode:Un)){let Kn=e.dom.getBoundingClientRect();if(!inRect(n,Kn)||(Un=elementFromPoint(e.dom,n,Kn),!Un))return null}if(safari)for(let Kn=Un;d&&Kn;Kn=parentNode(Kn))Kn.draggable&&(d=void 0);if(Un=targetKludge(Un,n),d){if(gecko&&d.nodeType==1&&(g=Math.min(g,d.childNodes.length),g<d.childNodes.length)){let Xn=d.childNodes[g],Qn;Xn.nodeName=="IMG"&&(Qn=Xn.getBoundingClientRect()).right<=n.left&&Qn.bottom>n.top&&g++}let Kn;webkit&&g&&d.nodeType==1&&(Kn=d.childNodes[g-1]).nodeType==1&&Kn.contentEditable=="false"&&Kn.getBoundingClientRect().top>=n.top&&g--,d==e.dom&&g==d.childNodes.length-1&&d.lastChild.nodeType==1&&n.top>d.lastChild.getBoundingClientRect().bottom?zn=e.state.doc.content.size:(g==0||d.nodeType!=1||d.childNodes[g-1].nodeName!="BR")&&(zn=posFromCaret(e,d,g,n))}zn==null&&(zn=posFromElement(e,Un,n));let qn=e.docView.nearestDesc(Un,!0);return{pos:zn,inside:qn?qn.posAtStart-qn.border:-1}}function nonZero(e){return e.top<e.bottom||e.left<e.right}function singleRect(e,n){let l=e.getClientRects();if(l.length){let d=l[n<0?0:l.length-1];if(nonZero(d))return d}return Array.prototype.find.call(l,nonZero)||e.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(e,n,l){let{node:d,offset:g,atom:jn}=e.docView.domFromPos(n,l<0?-1:1),Un=webkit||gecko;if(d.nodeType==3)if(Un&&(BIDI.test(d.nodeValue)||(l<0?!g:g==d.nodeValue.length))){let qn=singleRect(textRange(d,g,g),l);if(gecko&&g&&/\s/.test(d.nodeValue[g-1])&&g<d.nodeValue.length){let Kn=singleRect(textRange(d,g-1,g-1),-1);if(Kn.top==qn.top){let Xn=singleRect(textRange(d,g,g+1),-1);if(Xn.top!=qn.top)return flattenV(Xn,Xn.left<Kn.left)}}return qn}else{let qn=g,Kn=g,Xn=l<0?1:-1;return l<0&&!g?(Kn++,Xn=-1):l>=0&&g==d.nodeValue.length?(qn--,Xn=1):l<0?qn--:Kn++,flattenV(singleRect(textRange(d,qn,Kn),Xn),Xn<0)}if(!e.state.doc.resolve(n-(jn||0)).parent.inlineContent){if(jn==null&&g&&(l<0||g==nodeSize(d))){let qn=d.childNodes[g-1];if(qn.nodeType==1)return flattenH(qn.getBoundingClientRect(),!1)}if(jn==null&&g<nodeSize(d)){let qn=d.childNodes[g];if(qn.nodeType==1)return flattenH(qn.getBoundingClientRect(),!0)}return flattenH(d.getBoundingClientRect(),l>=0)}if(jn==null&&g&&(l<0||g==nodeSize(d))){let qn=d.childNodes[g-1],Kn=qn.nodeType==3?textRange(qn,nodeSize(qn)-(Un?0:1)):qn.nodeType==1&&(qn.nodeName!="BR"||!qn.nextSibling)?qn:null;if(Kn)return flattenV(singleRect(Kn,1),!1)}if(jn==null&&g<nodeSize(d)){let qn=d.childNodes[g];for(;qn.pmViewDesc&&qn.pmViewDesc.ignoreForCoords;)qn=qn.nextSibling;let Kn=qn?qn.nodeType==3?textRange(qn,0,Un?0:1):qn.nodeType==1?qn:null:null;if(Kn)return flattenV(singleRect(Kn,-1),!0)}return flattenV(singleRect(d.nodeType==3?textRange(d):d,-l),l>=0)}function flattenV(e,n){if(e.width==0)return e;let l=n?e.left:e.right;return{top:e.top,bottom:e.bottom,left:l,right:l}}function flattenH(e,n){if(e.height==0)return e;let l=n?e.top:e.bottom;return{top:l,bottom:l,left:e.left,right:e.right}}function withFlushedState(e,n,l){let d=e.state,g=e.root.activeElement;d!=n&&e.updateState(n),g!=e.dom&&e.focus();try{return l()}finally{d!=n&&e.updateState(d),g!=e.dom&&g&&g.focus()}}function endOfTextblockVertical(e,n,l){let d=n.selection,g=l=="up"?d.$from:d.$to;return withFlushedState(e,n,()=>{let{node:jn}=e.docView.domFromPos(g.pos,l=="up"?-1:1);for(;;){let zn=e.docView.nearestDesc(jn,!0);if(!zn)break;if(zn.node.isBlock){jn=zn.contentDOM||zn.dom;break}jn=zn.dom.parentNode}let Un=coordsAtPos(e,g.pos,1);for(let zn=jn.firstChild;zn;zn=zn.nextSibling){let qn;if(zn.nodeType==1)qn=zn.getClientRects();else if(zn.nodeType==3)qn=textRange(zn,0,zn.nodeValue.length).getClientRects();else continue;for(let Kn=0;Kn<qn.length;Kn++){let Xn=qn[Kn];if(Xn.bottom>Xn.top+1&&(l=="up"?Un.top-Xn.top>(Xn.bottom-Un.top)*2:Xn.bottom-Un.bottom>(Un.bottom-Xn.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(e,n,l){let{$head:d}=n.selection;if(!d.parent.isTextblock)return!1;let g=d.parentOffset,jn=!g,Un=g==d.parent.content.size,zn=e.domSelection();return zn?!maybeRTL.test(d.parent.textContent)||!zn.modify?l=="left"||l=="backward"?jn:Un:withFlushedState(e,n,()=>{let{focusNode:qn,focusOffset:Kn,anchorNode:Xn,anchorOffset:Qn}=e.domSelectionRange(),Jn=zn.caretBidiLevel;zn.modify("move",l,"character");let Ai=d.depth?e.docView.domAfterPos(d.before()):e.dom,{focusNode:Ri,focusOffset:Ni}=e.domSelectionRange(),$i=Ri&&!Ai.contains(Ri.nodeType==1?Ri:Ri.parentNode)||qn==Ri&&Kn==Ni;try{zn.collapse(Xn,Qn),qn&&(qn!=Xn||Kn!=Qn)&&zn.extend&&zn.extend(qn,Kn)}catch{}return Jn!=null&&(zn.caretBidiLevel=Jn),$i}):d.pos==d.start()||d.pos==d.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(e,n,l){return cachedState==n&&cachedDir==l?cachedResult:(cachedState=n,cachedDir=l,cachedResult=l=="up"||l=="down"?endOfTextblockVertical(e,n,l):endOfTextblockHorizontal(e,n,l))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(n,l,d,g){this.parent=n,this.children=l,this.dom=d,this.contentDOM=g,this.dirty=NOT_DIRTY,d.pmViewDesc=this}matchesWidget(n){return!1}matchesMark(n){return!1}matchesNode(n,l,d){return!1}matchesHack(n){return!1}parseRule(){return null}stopEvent(n){return!1}get size(){let n=0;for(let l=0;l<this.children.length;l++)n+=this.children[l].size;return n}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let n=0;n<this.children.length;n++)this.children[n].destroy()}posBeforeChild(n){for(let l=0,d=this.posAtStart;;l++){let g=this.children[l];if(g==n)return d;d+=g.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(n,l,d){if(this.contentDOM&&this.contentDOM.contains(n.nodeType==1?n:n.parentNode))if(d<0){let jn,Un;if(n==this.contentDOM)jn=n.childNodes[l-1];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;jn=n.previousSibling}for(;jn&&!((Un=jn.pmViewDesc)&&Un.parent==this);)jn=jn.previousSibling;return jn?this.posBeforeChild(Un)+Un.size:this.posAtStart}else{let jn,Un;if(n==this.contentDOM)jn=n.childNodes[l];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;jn=n.nextSibling}for(;jn&&!((Un=jn.pmViewDesc)&&Un.parent==this);)jn=jn.nextSibling;return jn?this.posBeforeChild(Un):this.posAtEnd}let g;if(n==this.dom&&this.contentDOM)g=l>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))g=n.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(l==0)for(let jn=n;;jn=jn.parentNode){if(jn==this.dom){g=!1;break}if(jn.previousSibling)break}if(g==null&&l==n.childNodes.length)for(let jn=n;;jn=jn.parentNode){if(jn==this.dom){g=!0;break}if(jn.nextSibling)break}}return g??d>0?this.posAtEnd:this.posAtStart}nearestDesc(n,l=!1){for(let d=!0,g=n;g;g=g.parentNode){let jn=this.getDesc(g),Un;if(jn&&(!l||jn.node))if(d&&(Un=jn.nodeDOM)&&!(Un.nodeType==1?Un.contains(n.nodeType==1?n:n.parentNode):Un==n))d=!1;else return jn}}getDesc(n){let l=n.pmViewDesc;for(let d=l;d;d=d.parent)if(d==this)return l}posFromDOM(n,l,d){for(let g=n;g;g=g.parentNode){let jn=this.getDesc(g);if(jn)return jn.localPosFromDOM(n,l,d)}return-1}descAt(n){for(let l=0,d=0;l<this.children.length;l++){let g=this.children[l],jn=d+g.size;if(d==n&&jn!=d){for(;!g.border&&g.children.length;)for(let Un=0;Un<g.children.length;Un++){let zn=g.children[Un];if(zn.size){g=zn;break}}return g}if(n<jn)return g.descAt(n-d-g.border);d=jn}}domFromPos(n,l){if(!this.contentDOM)return{node:this.dom,offset:0,atom:n+1};let d=0,g=0;for(let jn=0;d<this.children.length;d++){let Un=this.children[d],zn=jn+Un.size;if(zn>n||Un instanceof TrailingHackViewDesc){g=n-jn;break}jn=zn}if(g)return this.children[d].domFromPos(g-this.children[d].border,l);for(let jn;d&&!(jn=this.children[d-1]).size&&jn instanceof WidgetViewDesc&&jn.side>=0;d--);if(l<=0){let jn,Un=!0;for(;jn=d?this.children[d-1]:null,!(!jn||jn.dom.parentNode==this.contentDOM);d--,Un=!1);return jn&&l&&Un&&!jn.border&&!jn.domAtom?jn.domFromPos(jn.size,l):{node:this.contentDOM,offset:jn?domIndex(jn.dom)+1:0}}else{let jn,Un=!0;for(;jn=d<this.children.length?this.children[d]:null,!(!jn||jn.dom.parentNode==this.contentDOM);d++,Un=!1);return jn&&Un&&!jn.border&&!jn.domAtom?jn.domFromPos(0,l):{node:this.contentDOM,offset:jn?domIndex(jn.dom):this.contentDOM.childNodes.length}}}parseRange(n,l,d=0){if(this.children.length==0)return{node:this.contentDOM,from:n,to:l,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let g=-1,jn=-1;for(let Un=d,zn=0;;zn++){let qn=this.children[zn],Kn=Un+qn.size;if(g==-1&&n<=Kn){let Xn=Un+qn.border;if(n>=Xn&&l<=Kn-qn.border&&qn.node&&qn.contentDOM&&this.contentDOM.contains(qn.contentDOM))return qn.parseRange(n,l,Xn);n=Un;for(let Qn=zn;Qn>0;Qn--){let Jn=this.children[Qn-1];if(Jn.size&&Jn.dom.parentNode==this.contentDOM&&!Jn.emptyChildAt(1)){g=domIndex(Jn.dom)+1;break}n-=Jn.size}g==-1&&(g=0)}if(g>-1&&(Kn>l||zn==this.children.length-1)){l=Kn;for(let Xn=zn+1;Xn<this.children.length;Xn++){let Qn=this.children[Xn];if(Qn.size&&Qn.dom.parentNode==this.contentDOM&&!Qn.emptyChildAt(-1)){jn=domIndex(Qn.dom);break}l+=Qn.size}jn==-1&&(jn=this.contentDOM.childNodes.length);break}Un=Kn}return{node:this.contentDOM,from:n,to:l,fromOffset:g,toOffset:jn}}emptyChildAt(n){if(this.border||!this.contentDOM||!this.children.length)return!1;let l=this.children[n<0?0:this.children.length-1];return l.size==0||l.emptyChildAt(n)}domAfterPos(n){let{node:l,offset:d}=this.domFromPos(n,0);if(l.nodeType!=1||d==l.childNodes.length)throw new RangeError("No node after pos "+n);return l.childNodes[d]}setSelection(n,l,d,g=!1){let jn=Math.min(n,l),Un=Math.max(n,l);for(let Ai=0,Ri=0;Ai<this.children.length;Ai++){let Ni=this.children[Ai],$i=Ri+Ni.size;if(jn>Ri&&Un<$i)return Ni.setSelection(n-Ri-Ni.border,l-Ri-Ni.border,d,g);Ri=$i}let zn=this.domFromPos(n,n?-1:1),qn=l==n?zn:this.domFromPos(l,l?-1:1),Kn=d.root.getSelection(),Xn=d.domSelectionRange(),Qn=!1;if((gecko||safari)&&n==l){let{node:Ai,offset:Ri}=zn;if(Ai.nodeType==3){if(Qn=!!(Ri&&Ai.nodeValue[Ri-1]==`
`),Qn&&Ri==Ai.nodeValue.length)for(let Ni=Ai,$i;Ni;Ni=Ni.parentNode){if($i=Ni.nextSibling){$i.nodeName=="BR"&&(zn=qn={node:$i.parentNode,offset:domIndex($i)+1});break}let Li=Ni.pmViewDesc;if(Li&&Li.node&&Li.node.isBlock)break}}else{let Ni=Ai.childNodes[Ri-1];Qn=Ni&&(Ni.nodeName=="BR"||Ni.contentEditable=="false")}}if(gecko&&Xn.focusNode&&Xn.focusNode!=qn.node&&Xn.focusNode.nodeType==1){let Ai=Xn.focusNode.childNodes[Xn.focusOffset];Ai&&Ai.contentEditable=="false"&&(g=!0)}if(!(g||Qn&&safari)&&isEquivalentPosition(zn.node,zn.offset,Xn.anchorNode,Xn.anchorOffset)&&isEquivalentPosition(qn.node,qn.offset,Xn.focusNode,Xn.focusOffset))return;let Jn=!1;if((Kn.extend||n==l)&&!(Qn&&gecko)){Kn.collapse(zn.node,zn.offset);try{n!=l&&Kn.extend(qn.node,qn.offset),Jn=!0}catch{}}if(!Jn){if(n>l){let Ri=zn;zn=qn,qn=Ri}let Ai=document.createRange();Ai.setEnd(qn.node,qn.offset),Ai.setStart(zn.node,zn.offset),Kn.removeAllRanges(),Kn.addRange(Ai)}}ignoreMutation(n){return!this.contentDOM&&n.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(n,l){for(let d=0,g=0;g<this.children.length;g++){let jn=this.children[g],Un=d+jn.size;if(d==Un?n<=Un&&l>=d:n<Un&&l>d){let zn=d+jn.border,qn=Un-jn.border;if(n>=zn&&l<=qn){this.dirty=n==d||l==Un?CONTENT_DIRTY:CHILD_DIRTY,n==zn&&l==qn&&(jn.contentLost||jn.dom.parentNode!=this.contentDOM)?jn.dirty=NODE_DIRTY:jn.markDirty(n-zn,l-zn);return}else jn.dirty=jn.dom==jn.contentDOM&&jn.dom.parentNode==this.contentDOM&&!jn.children.length?CONTENT_DIRTY:NODE_DIRTY}d=Un}this.dirty=CONTENT_DIRTY}markParentsDirty(){let n=1;for(let l=this.parent;l;l=l.parent,n++){let d=n==1?CONTENT_DIRTY:CHILD_DIRTY;l.dirty<d&&(l.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(n){return!1}}class WidgetViewDesc extends ViewDesc{constructor(n,l,d,g){let jn,Un=l.type.toDOM;if(typeof Un=="function"&&(Un=Un(d,()=>{if(!jn)return g;if(jn.parent)return jn.parent.posBeforeChild(jn)})),!l.type.spec.raw){if(Un.nodeType!=1){let zn=document.createElement("span");zn.appendChild(Un),Un=zn}Un.contentEditable="false",Un.classList.add("ProseMirror-widget")}super(n,[],Un,null),this.widget=l,this.widget=l,jn=this}matchesWidget(n){return this.dirty==NOT_DIRTY&&n.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(n){let l=this.widget.spec.stopEvent;return l?l(n):!1}ignoreMutation(n){return n.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(n,l,d,g){super(n,[],l,null),this.textDOM=d,this.text=g}get size(){return this.text.length}localPosFromDOM(n,l){return n!=this.textDOM?this.posAtStart+(l?this.size:0):this.posAtStart+l}domFromPos(n){return{node:this.textDOM,offset:n}}ignoreMutation(n){return n.type==="characterData"&&n.target.nodeValue==n.oldValue}}class MarkViewDesc extends ViewDesc{constructor(n,l,d,g,jn){super(n,[],d,g),this.mark=l,this.spec=jn}static create(n,l,d,g){let jn=g.nodeViews[l.type.name],Un=jn&&jn(l,g,d);return(!Un||!Un.dom)&&(Un=DOMSerializer.renderSpec(document,l.type.spec.toDOM(l,d),null,l.attrs)),new MarkViewDesc(n,l,Un.dom,Un.contentDOM||Un.dom,Un)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(n){return this.dirty!=NODE_DIRTY&&this.mark.eq(n)}markDirty(n,l){if(super.markDirty(n,l),this.dirty!=NOT_DIRTY){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(n,l,d){let g=MarkViewDesc.create(this.parent,this.mark,!0,d),jn=this.children,Un=this.size;l<Un&&(jn=replaceNodes(jn,l,Un,d)),n>0&&(jn=replaceNodes(jn,0,n,d));for(let zn=0;zn<jn.length;zn++)jn[zn].parent=g;return g.children=jn,g}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(n,l,d,g,jn,Un,zn,qn,Kn){super(n,[],jn,Un),this.node=l,this.outerDeco=d,this.innerDeco=g,this.nodeDOM=zn}static create(n,l,d,g,jn,Un){let zn=jn.nodeViews[l.type.name],qn,Kn=zn&&zn(l,jn,()=>{if(!qn)return Un;if(qn.parent)return qn.parent.posBeforeChild(qn)},d,g),Xn=Kn&&Kn.dom,Qn=Kn&&Kn.contentDOM;if(l.isText){if(!Xn)Xn=document.createTextNode(l.text);else if(Xn.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Xn||({dom:Xn,contentDOM:Qn}=DOMSerializer.renderSpec(document,l.type.spec.toDOM(l),null,l.attrs));!Qn&&!l.isText&&Xn.nodeName!="BR"&&(Xn.hasAttribute("contenteditable")||(Xn.contentEditable="false"),l.type.spec.draggable&&(Xn.draggable=!0));let Jn=Xn;return Xn=applyOuterDeco(Xn,d,l),Kn?qn=new CustomNodeViewDesc(n,l,d,g,Xn,Qn||null,Jn,Kn,jn,Un+1):l.isText?new TextViewDesc(n,l,d,g,Xn,Jn,jn):new NodeViewDesc(n,l,d,g,Xn,Qn||null,Jn,jn,Un+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let n={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(n.preserveWhitespace="full"),!this.contentDOM)n.getContent=()=>this.node.content;else if(!this.contentLost)n.contentElement=this.contentDOM;else{for(let l=this.children.length-1;l>=0;l--){let d=this.children[l];if(this.dom.contains(d.dom.parentNode)){n.contentElement=d.dom.parentNode;break}}n.contentElement||(n.getContent=()=>Fragment.empty)}return n}matchesNode(n,l,d){return this.dirty==NOT_DIRTY&&n.eq(this.node)&&sameOuterDeco(l,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(n,l){let d=this.node.inlineContent,g=l,jn=n.composing?this.localCompositionInfo(n,l):null,Un=jn&&jn.pos>-1?jn:null,zn=jn&&jn.pos<0,qn=new ViewTreeUpdater(this,Un&&Un.node,n);iterDeco(this.node,this.innerDeco,(Kn,Xn,Qn)=>{Kn.spec.marks?qn.syncToMarks(Kn.spec.marks,d,n):Kn.type.side>=0&&!Qn&&qn.syncToMarks(Xn==this.node.childCount?Mark$1.none:this.node.child(Xn).marks,d,n),qn.placeWidget(Kn,n,g)},(Kn,Xn,Qn,Jn)=>{qn.syncToMarks(Kn.marks,d,n);let Ai;qn.findNodeMatch(Kn,Xn,Qn,Jn)||zn&&n.state.selection.from>g&&n.state.selection.to<g+Kn.nodeSize&&(Ai=qn.findIndexWithChild(jn.node))>-1&&qn.updateNodeAt(Kn,Xn,Qn,Ai,n)||qn.updateNextNode(Kn,Xn,Qn,n,Jn,g)||qn.addNode(Kn,Xn,Qn,n,g),g+=Kn.nodeSize}),qn.syncToMarks([],d,n),this.node.isTextblock&&qn.addTextblockHacks(),qn.destroyRest(),(qn.changed||this.dirty==CONTENT_DIRTY)&&(Un&&this.protectLocalComposition(n,Un),renderDescs(this.contentDOM,this.children,n),ios&&iosHacks(this.dom))}localCompositionInfo(n,l){let{from:d,to:g}=n.state.selection;if(!(n.state.selection instanceof TextSelection)||d<l||g>l+this.node.content.size)return null;let jn=n.input.compositionNode;if(!jn||!this.dom.contains(jn.parentNode))return null;if(this.node.inlineContent){let Un=jn.nodeValue,zn=findTextInFragment(this.node.content,Un,d-l,g-l);return zn<0?null:{node:jn,pos:zn,text:Un}}else return{node:jn,pos:-1,text:""}}protectLocalComposition(n,{node:l,pos:d,text:g}){if(this.getDesc(l))return;let jn=l;for(;jn.parentNode!=this.contentDOM;jn=jn.parentNode){for(;jn.previousSibling;)jn.parentNode.removeChild(jn.previousSibling);for(;jn.nextSibling;)jn.parentNode.removeChild(jn.nextSibling);jn.pmViewDesc&&(jn.pmViewDesc=void 0)}let Un=new CompositionViewDesc(this,jn,l,g);n.input.compositionNodes.push(Un),this.children=replaceNodes(this.children,d,d+g.length,n,Un)}update(n,l,d,g){return this.dirty==NODE_DIRTY||!n.sameMarkup(this.node)?!1:(this.updateInner(n,l,d,g),!0)}updateInner(n,l,d,g){this.updateOuterDeco(l),this.node=n,this.innerDeco=d,this.contentDOM&&this.updateChildren(g,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(n){if(sameOuterDeco(n,this.outerDeco))return;let l=this.nodeDOM.nodeType!=1,d=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,l),computeOuterDeco(n,this.node,l)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=n}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(e,n,l,d,g){applyOuterDeco(d,n,e);let jn=new NodeViewDesc(void 0,e,n,l,d,d,d,g,0);return jn.contentDOM&&jn.updateChildren(g,0),jn}class TextViewDesc extends NodeViewDesc{constructor(n,l,d,g,jn,Un,zn){super(n,l,d,g,jn,null,Un,zn,0)}parseRule(){let n=this.nodeDOM.parentNode;for(;n&&n!=this.dom&&!n.pmIsDeco;)n=n.parentNode;return{skip:n||!0}}update(n,l,d,g){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!n.sameMarkup(this.node)?!1:(this.updateOuterDeco(l),(this.dirty!=NOT_DIRTY||n.text!=this.node.text)&&n.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=n.text,g.trackWrites==this.nodeDOM&&(g.trackWrites=null)),this.node=n,this.dirty=NOT_DIRTY,!0)}inParent(){let n=this.parent.contentDOM;for(let l=this.nodeDOM;l;l=l.parentNode)if(l==n)return!0;return!1}domFromPos(n){return{node:this.nodeDOM,offset:n}}localPosFromDOM(n,l,d){return n==this.nodeDOM?this.posAtStart+Math.min(l,this.node.text.length):super.localPosFromDOM(n,l,d)}ignoreMutation(n){return n.type!="characterData"&&n.type!="selection"}slice(n,l,d){let g=this.node.cut(n,l),jn=document.createTextNode(g.text);return new TextViewDesc(this.parent,g,this.outerDeco,this.innerDeco,jn,jn,d)}markDirty(n,l){super.markDirty(n,l),this.dom!=this.nodeDOM&&(n==0||l==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(n){return this.node.text==n}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(n){return this.dirty==NOT_DIRTY&&this.dom.nodeName==n}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(n,l,d,g,jn,Un,zn,qn,Kn,Xn){super(n,l,d,g,jn,Un,zn,Kn,Xn),this.spec=qn}update(n,l,d,g){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==n.type||this.spec.multiType)){let jn=this.spec.update(n,l,d);return jn&&this.updateInner(n,l,d,g),jn}else return!this.contentDOM&&!n.isLeaf?!1:super.update(n,l,d,g)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(n,l,d,g){this.spec.setSelection?this.spec.setSelection(n,l,d.root):super.setSelection(n,l,d,g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(n){return this.spec.stopEvent?this.spec.stopEvent(n):!1}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}}function renderDescs(e,n,l){let d=e.firstChild,g=!1;for(let jn=0;jn<n.length;jn++){let Un=n[jn],zn=Un.dom;if(zn.parentNode==e){for(;zn!=d;)d=rm(d),g=!0;d=d.nextSibling}else g=!0,e.insertBefore(zn,d);if(Un instanceof MarkViewDesc){let qn=d?d.previousSibling:e.lastChild;renderDescs(Un.contentDOM,Un.children,l),d=qn?qn.nextSibling:e.firstChild}}for(;d;)d=rm(d),g=!0;g&&l.trackWrites==e&&(l.trackWrites=null)}const OuterDecoLevel=function(e){e&&(this.nodeName=e)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(e,n,l){if(e.length==0)return noDeco;let d=l?noDeco[0]:new OuterDecoLevel,g=[d];for(let jn=0;jn<e.length;jn++){let Un=e[jn].type.attrs;if(Un){Un.nodeName&&g.push(d=new OuterDecoLevel(Un.nodeName));for(let zn in Un){let qn=Un[zn];qn!=null&&(l&&g.length==1&&g.push(d=new OuterDecoLevel(n.isInline?"span":"div")),zn=="class"?d.class=(d.class?d.class+" ":"")+qn:zn=="style"?d.style=(d.style?d.style+";":"")+qn:zn!="nodeName"&&(d[zn]=qn))}}}return g}function patchOuterDeco(e,n,l,d){if(l==noDeco&&d==noDeco)return n;let g=n;for(let jn=0;jn<d.length;jn++){let Un=d[jn],zn=l[jn];if(jn){let qn;zn&&zn.nodeName==Un.nodeName&&g!=e&&(qn=g.parentNode)&&qn.nodeName.toLowerCase()==Un.nodeName||(qn=document.createElement(Un.nodeName),qn.pmIsDeco=!0,qn.appendChild(g),zn=noDeco[0]),g=qn}patchAttributes(g,zn||noDeco[0],Un)}return g}function patchAttributes(e,n,l){for(let d in n)d!="class"&&d!="style"&&d!="nodeName"&&!(d in l)&&e.removeAttribute(d);for(let d in l)d!="class"&&d!="style"&&d!="nodeName"&&l[d]!=n[d]&&e.setAttribute(d,l[d]);if(n.class!=l.class){let d=n.class?n.class.split(" ").filter(Boolean):[],g=l.class?l.class.split(" ").filter(Boolean):[];for(let jn=0;jn<d.length;jn++)g.indexOf(d[jn])==-1&&e.classList.remove(d[jn]);for(let jn=0;jn<g.length;jn++)d.indexOf(g[jn])==-1&&e.classList.add(g[jn]);e.classList.length==0&&e.removeAttribute("class")}if(n.style!=l.style){if(n.style){let d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,g;for(;g=d.exec(n.style);)e.style.removeProperty(g[1])}l.style&&(e.style.cssText+=l.style)}}function applyOuterDeco(e,n,l){return patchOuterDeco(e,e,noDeco,computeOuterDeco(n,l,e.nodeType!=1))}function sameOuterDeco(e,n){if(e.length!=n.length)return!1;for(let l=0;l<e.length;l++)if(!e[l].type.eq(n[l].type))return!1;return!0}function rm(e){let n=e.nextSibling;return e.parentNode.removeChild(e),n}class ViewTreeUpdater{constructor(n,l,d){this.lock=l,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=n,this.preMatch=preMatch(n.node.content,n)}destroyBetween(n,l){if(n!=l){for(let d=n;d<l;d++)this.top.children[d].destroy();this.top.children.splice(n,l-n),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(n,l,d){let g=0,jn=this.stack.length>>1,Un=Math.min(jn,n.length);for(;g<Un&&(g==jn-1?this.top:this.stack[g+1<<1]).matchesMark(n[g])&&n[g].type.spec.spanning!==!1;)g++;for(;g<jn;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),jn--;for(;jn<n.length;){this.stack.push(this.top,this.index+1);let zn=-1;for(let qn=this.index;qn<Math.min(this.index+3,this.top.children.length);qn++){let Kn=this.top.children[qn];if(Kn.matchesMark(n[jn])&&!this.isLocked(Kn.dom)){zn=qn;break}}if(zn>-1)zn>this.index&&(this.changed=!0,this.destroyBetween(this.index,zn)),this.top=this.top.children[this.index];else{let qn=MarkViewDesc.create(this.top,n[jn],l,d);this.top.children.splice(this.index,0,qn),this.top=qn,this.changed=!0}this.index=0,jn++}}findNodeMatch(n,l,d,g){let jn=-1,Un;if(g>=this.preMatch.index&&(Un=this.preMatch.matches[g-this.preMatch.index]).parent==this.top&&Un.matchesNode(n,l,d))jn=this.top.children.indexOf(Un,this.index);else for(let zn=this.index,qn=Math.min(this.top.children.length,zn+5);zn<qn;zn++){let Kn=this.top.children[zn];if(Kn.matchesNode(n,l,d)&&!this.preMatch.matched.has(Kn)){jn=zn;break}}return jn<0?!1:(this.destroyBetween(this.index,jn),this.index++,!0)}updateNodeAt(n,l,d,g,jn){let Un=this.top.children[g];return Un.dirty==NODE_DIRTY&&Un.dom==Un.contentDOM&&(Un.dirty=CONTENT_DIRTY),Un.update(n,l,d,jn)?(this.destroyBetween(this.index,g),this.index++,!0):!1}findIndexWithChild(n){for(;;){let l=n.parentNode;if(!l)return-1;if(l==this.top.contentDOM){let d=n.pmViewDesc;if(d){for(let g=this.index;g<this.top.children.length;g++)if(this.top.children[g]==d)return g}return-1}n=l}}updateNextNode(n,l,d,g,jn,Un){for(let zn=this.index;zn<this.top.children.length;zn++){let qn=this.top.children[zn];if(qn instanceof NodeViewDesc){let Kn=this.preMatch.matched.get(qn);if(Kn!=null&&Kn!=jn)return!1;let Xn=qn.dom,Qn,Jn=this.isLocked(Xn)&&!(n.isText&&qn.node&&qn.node.isText&&qn.nodeDOM.nodeValue==n.text&&qn.dirty!=NODE_DIRTY&&sameOuterDeco(l,qn.outerDeco));if(!Jn&&qn.update(n,l,d,g))return this.destroyBetween(this.index,zn),qn.dom!=Xn&&(this.changed=!0),this.index++,!0;if(!Jn&&(Qn=this.recreateWrapper(qn,n,l,d,g,Un)))return this.destroyBetween(this.index,zn),this.top.children[this.index]=Qn,Qn.contentDOM&&(Qn.dirty=CONTENT_DIRTY,Qn.updateChildren(g,Un+1),Qn.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(n,l,d,g,jn,Un){if(n.dirty||l.isAtom||!n.children.length||!n.node.content.eq(l.content)||!sameOuterDeco(d,n.outerDeco)||!g.eq(n.innerDeco))return null;let zn=NodeViewDesc.create(this.top,l,d,g,jn,Un);if(zn.contentDOM){zn.children=n.children,n.children=[];for(let qn of zn.children)qn.parent=zn}return n.destroy(),zn}addNode(n,l,d,g,jn){let Un=NodeViewDesc.create(this.top,n,l,d,g,jn);Un.contentDOM&&Un.updateChildren(g,jn+1),this.top.children.splice(this.index++,0,Un),this.changed=!0}placeWidget(n,l,d){let g=this.index<this.top.children.length?this.top.children[this.index]:null;if(g&&g.matchesWidget(n)&&(n==g.widget||!g.widget.type.toDOM.parentNode))this.index++;else{let jn=new WidgetViewDesc(this.top,n,l,d);this.top.children.splice(this.index++,0,jn),this.changed=!0}}addTextblockHacks(){let n=this.top.children[this.index-1],l=this.top;for(;n instanceof MarkViewDesc;)l=n,n=l.children[l.children.length-1];(!n||!(n instanceof TextViewDesc)||/\n$/.test(n.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(n.node.text))&&((safari||chrome)&&n&&n.dom.contentEditable=="false"&&this.addHackNode("IMG",l),this.addHackNode("BR",this.top))}addHackNode(n,l){if(l==this.top&&this.index<l.children.length&&l.children[this.index].matchesHack(n))this.index++;else{let d=document.createElement(n);n=="IMG"&&(d.className="ProseMirror-separator",d.alt=""),n=="BR"&&(d.className="ProseMirror-trailingBreak");let g=new TrailingHackViewDesc(this.top,[],d,null);l!=this.top?l.children.push(g):l.children.splice(this.index++,0,g),this.changed=!0}}isLocked(n){return this.lock&&(n==this.lock||n.nodeType==1&&n.contains(this.lock.parentNode))}}function preMatch(e,n){let l=n,d=l.children.length,g=e.childCount,jn=new Map,Un=[];e:for(;g>0;){let zn;for(;;)if(d){let Kn=l.children[d-1];if(Kn instanceof MarkViewDesc)l=Kn,d=Kn.children.length;else{zn=Kn,d--;break}}else{if(l==n)break e;d=l.parent.children.indexOf(l),l=l.parent}let qn=zn.node;if(qn){if(qn!=e.child(g-1))break;--g,jn.set(zn,g),Un.push(zn)}}return{index:g,matched:jn,matches:Un.reverse()}}function compareSide(e,n){return e.type.side-n.type.side}function iterDeco(e,n,l,d){let g=n.locals(e),jn=0;if(g.length==0){for(let Kn=0;Kn<e.childCount;Kn++){let Xn=e.child(Kn);d(Xn,g,n.forChild(jn,Xn),Kn),jn+=Xn.nodeSize}return}let Un=0,zn=[],qn=null;for(let Kn=0;;){let Xn,Qn;for(;Un<g.length&&g[Un].to==jn;){let $i=g[Un++];$i.widget&&(Xn?(Qn||(Qn=[Xn])).push($i):Xn=$i)}if(Xn)if(Qn){Qn.sort(compareSide);for(let $i=0;$i<Qn.length;$i++)l(Qn[$i],Kn,!!qn)}else l(Xn,Kn,!!qn);let Jn,Ai;if(qn)Ai=-1,Jn=qn,qn=null;else if(Kn<e.childCount)Ai=Kn,Jn=e.child(Kn++);else break;for(let $i=0;$i<zn.length;$i++)zn[$i].to<=jn&&zn.splice($i--,1);for(;Un<g.length&&g[Un].from<=jn&&g[Un].to>jn;)zn.push(g[Un++]);let Ri=jn+Jn.nodeSize;if(Jn.isText){let $i=Ri;Un<g.length&&g[Un].from<$i&&($i=g[Un].from);for(let Li=0;Li<zn.length;Li++)zn[Li].to<$i&&($i=zn[Li].to);$i<Ri&&(qn=Jn.cut($i-jn),Jn=Jn.cut(0,$i-jn),Ri=$i,Ai=-1)}else for(;Un<g.length&&g[Un].to<Ri;)Un++;let Ni=Jn.isInline&&!Jn.isLeaf?zn.filter($i=>!$i.inline):zn.slice();d(Jn,Ni,n.forChild(jn,Jn),Ai),jn=Ri}}function iosHacks(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let n=e.style.cssText;e.style.cssText=n+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=n}}function findTextInFragment(e,n,l,d){for(let g=0,jn=0;g<e.childCount&&jn<=d;){let Un=e.child(g++),zn=jn;if(jn+=Un.nodeSize,!Un.isText)continue;let qn=Un.text;for(;g<e.childCount;){let Kn=e.child(g++);if(jn+=Kn.nodeSize,!Kn.isText)break;qn+=Kn.text}if(jn>=l){if(jn>=d&&qn.slice(d-n.length-zn,d-zn)==n)return d-n.length;let Kn=zn<d?qn.lastIndexOf(n,d-zn-1):-1;if(Kn>=0&&Kn+n.length+zn>=l)return zn+Kn;if(l==d&&qn.length>=d+n.length-zn&&qn.slice(d-zn,d-zn+n.length)==n)return d}}return-1}function replaceNodes(e,n,l,d,g){let jn=[];for(let Un=0,zn=0;Un<e.length;Un++){let qn=e[Un],Kn=zn,Xn=zn+=qn.size;Kn>=l||Xn<=n?jn.push(qn):(Kn<n&&jn.push(qn.slice(0,n-Kn,d)),g&&(jn.push(g),g=void 0),Xn>l&&jn.push(qn.slice(l-Kn,qn.size,d)))}return jn}function selectionFromDOM(e,n=null){let l=e.domSelectionRange(),d=e.state.doc;if(!l.focusNode)return null;let g=e.docView.nearestDesc(l.focusNode),jn=g&&g.size==0,Un=e.docView.posFromDOM(l.focusNode,l.focusOffset,1);if(Un<0)return null;let zn=d.resolve(Un),qn,Kn;if(selectionCollapsed(l)){for(qn=Un;g&&!g.node;)g=g.parent;let Qn=g.node;if(g&&Qn.isAtom&&NodeSelection.isSelectable(Qn)&&g.parent&&!(Qn.isInline&&isOnEdge(l.focusNode,l.focusOffset,g.dom))){let Jn=g.posBefore;Kn=new NodeSelection(Un==Jn?zn:d.resolve(Jn))}}else{if(l instanceof e.dom.ownerDocument.defaultView.Selection&&l.rangeCount>1){let Qn=Un,Jn=Un;for(let Ai=0;Ai<l.rangeCount;Ai++){let Ri=l.getRangeAt(Ai);Qn=Math.min(Qn,e.docView.posFromDOM(Ri.startContainer,Ri.startOffset,1)),Jn=Math.max(Jn,e.docView.posFromDOM(Ri.endContainer,Ri.endOffset,-1))}if(Qn<0)return null;[qn,Un]=Jn==e.state.selection.anchor?[Jn,Qn]:[Qn,Jn],zn=d.resolve(Un)}else qn=e.docView.posFromDOM(l.anchorNode,l.anchorOffset,1);if(qn<0)return null}let Xn=d.resolve(qn);if(!Kn){let Qn=n=="pointer"||e.state.selection.head<zn.pos&&!jn?1:-1;Kn=selectionBetween(e,Xn,zn,Qn)}return Kn}function editorOwnsSelection(e){return e.editable?e.hasFocus():hasSelection(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function selectionToDOM(e,n=!1){let l=e.state.selection;if(syncNodeSelection(e,l),!!editorOwnsSelection(e)){if(!n&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&chrome){let d=e.domSelectionRange(),g=e.domObserver.currentSelection;if(d.anchorNode&&g.anchorNode&&isEquivalentPosition(d.anchorNode,d.anchorOffset,g.anchorNode,g.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)selectCursorWrapper(e);else{let{anchor:d,head:g}=l,jn,Un;brokenSelectBetweenUneditable&&!(l instanceof TextSelection)&&(l.$from.parent.inlineContent||(jn=temporarilyEditableNear(e,l.from)),!l.empty&&!l.$from.parent.inlineContent&&(Un=temporarilyEditableNear(e,l.to))),e.docView.setSelection(d,g,e,n),brokenSelectBetweenUneditable&&(jn&&resetEditable(jn),Un&&resetEditable(Un)),l.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(e,n){let{node:l,offset:d}=e.docView.domFromPos(n,0),g=d<l.childNodes.length?l.childNodes[d]:null,jn=d?l.childNodes[d-1]:null;if(safari&&g&&g.contentEditable=="false")return setEditable(g);if((!g||g.contentEditable=="false")&&(!jn||jn.contentEditable=="false")){if(g)return setEditable(g);if(jn)return setEditable(jn)}}function setEditable(e){return e.contentEditable="true",safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function resetEditable(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function removeClassOnSelectionChange(e){let n=e.dom.ownerDocument;n.removeEventListener("selectionchange",e.input.hideSelectionGuard);let l=e.domSelectionRange(),d=l.anchorNode,g=l.anchorOffset;n.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(l.anchorNode!=d||l.anchorOffset!=g)&&(n.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(e){let n=e.domSelection();if(!n)return;let l=e.cursorWrapper.dom,d=l.nodeName=="IMG";d?n.collapse(l.parentNode,domIndex(l)+1):n.collapse(l,0),!d&&!e.state.selection.visible&&ie$3&&ie_version<=11&&(l.disabled=!0,l.disabled=!1)}function syncNodeSelection(e,n){if(n instanceof NodeSelection){let l=e.docView.descAt(n.from);l!=e.lastSelectedViewDesc&&(clearNodeSelection(e),l&&l.selectNode(),e.lastSelectedViewDesc=l)}else clearNodeSelection(e)}function clearNodeSelection(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function selectionBetween(e,n,l,d){return e.someProp("createSelectionBetween",g=>g(e,n,l))||TextSelection.between(n,l,d)}function hasFocusAndSelection(e){return e.editable&&!e.hasFocus()?!1:hasSelection(e)}function hasSelection(e){let n=e.domSelectionRange();if(!n.anchorNode)return!1;try{return e.dom.contains(n.anchorNode.nodeType==3?n.anchorNode.parentNode:n.anchorNode)&&(e.editable||e.dom.contains(n.focusNode.nodeType==3?n.focusNode.parentNode:n.focusNode))}catch{return!1}}function anchorInRightPlace(e){let n=e.docView.domFromPos(e.state.selection.anchor,0),l=e.domSelectionRange();return isEquivalentPosition(n.node,n.offset,l.anchorNode,l.anchorOffset)}function moveSelectionBlock(e,n){let{$anchor:l,$head:d}=e.selection,g=n>0?l.max(d):l.min(d),jn=g.parent.inlineContent?g.depth?e.doc.resolve(n>0?g.after():g.before()):null:g;return jn&&Selection.findFrom(jn,n)}function apply(e,n){return e.dispatch(e.state.tr.setSelection(n).scrollIntoView()),!0}function selectHorizontally(e,n,l){let d=e.state.selection;if(d instanceof TextSelection)if(l.indexOf("s")>-1){let{$head:g}=d,jn=g.textOffset?null:n<0?g.nodeBefore:g.nodeAfter;if(!jn||jn.isText||!jn.isLeaf)return!1;let Un=e.state.doc.resolve(g.pos+jn.nodeSize*(n<0?-1:1));return apply(e,new TextSelection(d.$anchor,Un))}else if(d.empty){if(e.endOfTextblock(n>0?"forward":"backward")){let g=moveSelectionBlock(e.state,n);return g&&g instanceof NodeSelection?apply(e,g):!1}else if(!(mac$2&&l.indexOf("m")>-1)){let g=d.$head,jn=g.textOffset?null:n<0?g.nodeBefore:g.nodeAfter,Un;if(!jn||jn.isText)return!1;let zn=n<0?g.pos-jn.nodeSize:g.pos;return jn.isAtom||(Un=e.docView.descAt(zn))&&!Un.contentDOM?NodeSelection.isSelectable(jn)?apply(e,new NodeSelection(n<0?e.state.doc.resolve(g.pos-jn.nodeSize):g)):webkit?apply(e,new TextSelection(e.state.doc.resolve(n<0?zn:zn+jn.nodeSize))):!1:!1}}else return!1;else{if(d instanceof NodeSelection&&d.node.isInline)return apply(e,new TextSelection(n>0?d.$to:d.$from));{let g=moveSelectionBlock(e.state,n);return g?apply(e,g):!1}}}function nodeLen(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function isIgnorable(e,n){let l=e.pmViewDesc;return l&&l.size==0&&(n<0||e.nextSibling||e.nodeName!="BR")}function skipIgnoredNodes(e,n){return n<0?skipIgnoredNodesBefore(e):skipIgnoredNodesAfter(e)}function skipIgnoredNodesBefore(e){let n=e.domSelectionRange(),l=n.focusNode,d=n.focusOffset;if(!l)return;let g,jn,Un=!1;for(gecko&&l.nodeType==1&&d<nodeLen(l)&&isIgnorable(l.childNodes[d],-1)&&(Un=!0);;)if(d>0){if(l.nodeType!=1)break;{let zn=l.childNodes[d-1];if(isIgnorable(zn,-1))g=l,jn=--d;else if(zn.nodeType==3)l=zn,d=l.nodeValue.length;else break}}else{if(isBlockNode(l))break;{let zn=l.previousSibling;for(;zn&&isIgnorable(zn,-1);)g=l.parentNode,jn=domIndex(zn),zn=zn.previousSibling;if(zn)l=zn,d=nodeLen(l);else{if(l=l.parentNode,l==e.dom)break;d=0}}}Un?setSelFocus(e,l,d):g&&setSelFocus(e,g,jn)}function skipIgnoredNodesAfter(e){let n=e.domSelectionRange(),l=n.focusNode,d=n.focusOffset;if(!l)return;let g=nodeLen(l),jn,Un;for(;;)if(d<g){if(l.nodeType!=1)break;let zn=l.childNodes[d];if(isIgnorable(zn,1))jn=l,Un=++d;else break}else{if(isBlockNode(l))break;{let zn=l.nextSibling;for(;zn&&isIgnorable(zn,1);)jn=zn.parentNode,Un=domIndex(zn)+1,zn=zn.nextSibling;if(zn)l=zn,d=0,g=nodeLen(l);else{if(l=l.parentNode,l==e.dom)break;d=g=0}}}jn&&setSelFocus(e,jn,Un)}function isBlockNode(e){let n=e.pmViewDesc;return n&&n.node&&n.node.isBlock}function textNodeAfter(e,n){for(;e&&n==e.childNodes.length&&!hasBlockDesc(e);)n=domIndex(e)+1,e=e.parentNode;for(;e&&n<e.childNodes.length;){let l=e.childNodes[n];if(l.nodeType==3)return l;if(l.nodeType==1&&l.contentEditable=="false")break;e=l,n=0}}function textNodeBefore(e,n){for(;e&&!n&&!hasBlockDesc(e);)n=domIndex(e),e=e.parentNode;for(;e&&n;){let l=e.childNodes[n-1];if(l.nodeType==3)return l;if(l.nodeType==1&&l.contentEditable=="false")break;e=l,n=e.childNodes.length}}function setSelFocus(e,n,l){if(n.nodeType!=3){let jn,Un;(Un=textNodeAfter(n,l))?(n=Un,l=0):(jn=textNodeBefore(n,l))&&(n=jn,l=jn.nodeValue.length)}let d=e.domSelection();if(!d)return;if(selectionCollapsed(d)){let jn=document.createRange();jn.setEnd(n,l),jn.setStart(n,l),d.removeAllRanges(),d.addRange(jn)}else d.extend&&d.extend(n,l);e.domObserver.setCurSelection();let{state:g}=e;setTimeout(()=>{e.state==g&&selectionToDOM(e)},50)}function findDirection(e,n){let l=e.state.doc.resolve(n);if(!(chrome||windows$1)&&l.parent.inlineContent){let g=e.coordsAtPos(n);if(n>l.start()){let jn=e.coordsAtPos(n-1),Un=(jn.top+jn.bottom)/2;if(Un>g.top&&Un<g.bottom&&Math.abs(jn.left-g.left)>1)return jn.left<g.left?"ltr":"rtl"}if(n<l.end()){let jn=e.coordsAtPos(n+1),Un=(jn.top+jn.bottom)/2;if(Un>g.top&&Un<g.bottom&&Math.abs(jn.left-g.left)>1)return jn.left>g.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(e,n,l){let d=e.state.selection;if(d instanceof TextSelection&&!d.empty||l.indexOf("s")>-1||mac$2&&l.indexOf("m")>-1)return!1;let{$from:g,$to:jn}=d;if(!g.parent.inlineContent||e.endOfTextblock(n<0?"up":"down")){let Un=moveSelectionBlock(e.state,n);if(Un&&Un instanceof NodeSelection)return apply(e,Un)}if(!g.parent.inlineContent){let Un=n<0?g:jn,zn=d instanceof AllSelection?Selection.near(Un,n):Selection.findFrom(Un,n);return zn?apply(e,zn):!1}return!1}function stopNativeHorizontalDelete(e,n){if(!(e.state.selection instanceof TextSelection))return!0;let{$head:l,$anchor:d,empty:g}=e.state.selection;if(!l.sameParent(d))return!0;if(!g)return!1;if(e.endOfTextblock(n>0?"forward":"backward"))return!0;let jn=!l.textOffset&&(n<0?l.nodeBefore:l.nodeAfter);if(jn&&!jn.isText){let Un=e.state.tr;return n<0?Un.delete(l.pos-jn.nodeSize,l.pos):Un.delete(l.pos,l.pos+jn.nodeSize),e.dispatch(Un),!0}return!1}function switchEditable(e,n,l){e.domObserver.stop(),n.contentEditable=l,e.domObserver.start()}function safariDownArrowBug(e){if(!safari||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:l}=e.domSelectionRange();if(n&&n.nodeType==1&&l==0&&n.firstChild&&n.firstChild.contentEditable=="false"){let d=n.firstChild;switchEditable(e,d,"true"),setTimeout(()=>switchEditable(e,d,"false"),20)}return!1}function getMods(e){let n="";return e.ctrlKey&&(n+="c"),e.metaKey&&(n+="m"),e.altKey&&(n+="a"),e.shiftKey&&(n+="s"),n}function captureKeyDown(e,n){let l=n.keyCode,d=getMods(n);if(l==8||mac$2&&l==72&&d=="c")return stopNativeHorizontalDelete(e,-1)||skipIgnoredNodes(e,-1);if(l==46&&!n.shiftKey||mac$2&&l==68&&d=="c")return stopNativeHorizontalDelete(e,1)||skipIgnoredNodes(e,1);if(l==13||l==27)return!0;if(l==37||mac$2&&l==66&&d=="c"){let g=l==37?findDirection(e,e.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(e,g,d)||skipIgnoredNodes(e,g)}else if(l==39||mac$2&&l==70&&d=="c"){let g=l==39?findDirection(e,e.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(e,g,d)||skipIgnoredNodes(e,g)}else{if(l==38||mac$2&&l==80&&d=="c")return selectVertically(e,-1,d)||skipIgnoredNodes(e,-1);if(l==40||mac$2&&l==78&&d=="c")return safariDownArrowBug(e)||selectVertically(e,1,d)||skipIgnoredNodes(e,1);if(d==(mac$2?"m":"c")&&(l==66||l==73||l==89||l==90))return!0}return!1}function serializeForClipboard(e,n){e.someProp("transformCopied",Ai=>{n=Ai(n,e)});let l=[],{content:d,openStart:g,openEnd:jn}=n;for(;g>1&&jn>1&&d.childCount==1&&d.firstChild.childCount==1;){g--,jn--;let Ai=d.firstChild;l.push(Ai.type.name,Ai.attrs!=Ai.type.defaultAttrs?Ai.attrs:null),d=Ai.content}let Un=e.someProp("clipboardSerializer")||DOMSerializer.fromSchema(e.state.schema),zn=detachedDoc(),qn=zn.createElement("div");qn.appendChild(Un.serializeFragment(d,{document:zn}));let Kn=qn.firstChild,Xn,Qn=0;for(;Kn&&Kn.nodeType==1&&(Xn=wrapMap[Kn.nodeName.toLowerCase()]);){for(let Ai=Xn.length-1;Ai>=0;Ai--){let Ri=zn.createElement(Xn[Ai]);for(;qn.firstChild;)Ri.appendChild(qn.firstChild);qn.appendChild(Ri),Qn++}Kn=qn.firstChild}Kn&&Kn.nodeType==1&&Kn.setAttribute("data-pm-slice",`${g} ${jn}${Qn?` -${Qn}`:""} ${JSON.stringify(l)}`);let Jn=e.someProp("clipboardTextSerializer",Ai=>Ai(n,e))||n.content.textBetween(0,n.content.size,`

`);return{dom:qn,text:Jn,slice:n}}function parseFromClipboard(e,n,l,d,g){let jn=g.parent.type.spec.code,Un,zn;if(!l&&!n)return null;let qn=!!n&&(d||jn||!l);if(qn){if(e.someProp("transformPastedText",Jn=>{n=Jn(n,jn||d,e)}),jn)return zn=new Slice(Fragment.from(e.state.schema.text(n.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",Jn=>{zn=Jn(zn,e,!0)}),zn;let Qn=e.someProp("clipboardTextParser",Jn=>Jn(n,g,d,e));if(Qn)zn=Qn;else{let Jn=g.marks(),{schema:Ai}=e.state,Ri=DOMSerializer.fromSchema(Ai);Un=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(Ni=>{let $i=Un.appendChild(document.createElement("p"));Ni&&$i.appendChild(Ri.serializeNode(Ai.text(Ni,Jn)))})}}else e.someProp("transformPastedHTML",Qn=>{l=Qn(l,e)}),Un=readHTML(l),webkit&&restoreReplacedSpaces(Un);let Kn=Un&&Un.querySelector("[data-pm-slice]"),Xn=Kn&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(Kn.getAttribute("data-pm-slice")||"");if(Xn&&Xn[3])for(let Qn=+Xn[3];Qn>0;Qn--){let Jn=Un.firstChild;for(;Jn&&Jn.nodeType!=1;)Jn=Jn.nextSibling;if(!Jn)break;Un=Jn}if(zn||(zn=(e.someProp("clipboardParser")||e.someProp("domParser")||DOMParser$1.fromSchema(e.state.schema)).parseSlice(Un,{preserveWhitespace:!!(qn||Xn),context:g,ruleFromNode(Jn){return Jn.nodeName=="BR"&&!Jn.nextSibling&&Jn.parentNode&&!inlineParents.test(Jn.parentNode.nodeName)?{ignore:!0}:null}})),Xn)zn=addContext(closeSlice(zn,+Xn[1],+Xn[2]),Xn[4]);else if(zn=Slice.maxOpen(normalizeSiblings(zn.content,g),!0),zn.openStart||zn.openEnd){let Qn=0,Jn=0;for(let Ai=zn.content.firstChild;Qn<zn.openStart&&!Ai.type.spec.isolating;Qn++,Ai=Ai.firstChild);for(let Ai=zn.content.lastChild;Jn<zn.openEnd&&!Ai.type.spec.isolating;Jn++,Ai=Ai.lastChild);zn=closeSlice(zn,Qn,Jn)}return e.someProp("transformPasted",Qn=>{zn=Qn(zn,e,qn)}),zn}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(e,n){if(e.childCount<2)return e;for(let l=n.depth;l>=0;l--){let g=n.node(l).contentMatchAt(n.index(l)),jn,Un=[];if(e.forEach(zn=>{if(!Un)return;let qn=g.findWrapping(zn.type),Kn;if(!qn)return Un=null;if(Kn=Un.length&&jn.length&&addToSibling(qn,jn,zn,Un[Un.length-1],0))Un[Un.length-1]=Kn;else{Un.length&&(Un[Un.length-1]=closeRight(Un[Un.length-1],jn.length));let Xn=withWrappers(zn,qn);Un.push(Xn),g=g.matchType(Xn.type),jn=qn}}),Un)return Fragment.from(Un)}return e}function withWrappers(e,n,l=0){for(let d=n.length-1;d>=l;d--)e=n[d].create(null,Fragment.from(e));return e}function addToSibling(e,n,l,d,g){if(g<e.length&&g<n.length&&e[g]==n[g]){let jn=addToSibling(e,n,l,d.lastChild,g+1);if(jn)return d.copy(d.content.replaceChild(d.childCount-1,jn));if(d.contentMatchAt(d.childCount).matchType(g==e.length-1?l.type:e[g+1]))return d.copy(d.content.append(Fragment.from(withWrappers(l,e,g+1))))}}function closeRight(e,n){if(n==0)return e;let l=e.content.replaceChild(e.childCount-1,closeRight(e.lastChild,n-1)),d=e.contentMatchAt(e.childCount).fillBefore(Fragment.empty,!0);return e.copy(l.append(d))}function closeRange(e,n,l,d,g,jn){let Un=n<0?e.firstChild:e.lastChild,zn=Un.content;return e.childCount>1&&(jn=0),g<d-1&&(zn=closeRange(zn,n,l,d,g+1,jn)),g>=l&&(zn=n<0?Un.contentMatchAt(0).fillBefore(zn,jn<=g).append(zn):zn.append(Un.contentMatchAt(Un.childCount).fillBefore(Fragment.empty,!0))),e.replaceChild(n<0?0:e.childCount-1,Un.copy(zn))}function closeSlice(e,n,l){return n<e.openStart&&(e=new Slice(closeRange(e.content,-1,n,e.openStart,0,e.openEnd),n,e.openEnd)),l<e.openEnd&&(e=new Slice(closeRange(e.content,1,l,e.openEnd,0,0),e.openStart,l)),e}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(e){let n=window.trustedTypes;return n?(_policy||(_policy=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:l=>l})),_policy.createHTML(e)):e}function readHTML(e){let n=/^(\s*<meta [^>]*>)*/.exec(e);n&&(e=e.slice(n[0].length));let l=detachedDoc().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(e),g;if((g=d&&wrapMap[d[1].toLowerCase()])&&(e=g.map(jn=>"<"+jn+">").join("")+e+g.map(jn=>"</"+jn+">").reverse().join("")),l.innerHTML=maybeWrapTrusted(e),g)for(let jn=0;jn<g.length;jn++)l=l.querySelector(g[jn])||l;return l}function restoreReplacedSpaces(e){let n=e.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let l=0;l<n.length;l++){let d=n[l];d.childNodes.length==1&&d.textContent==""&&d.parentNode&&d.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),d)}}function addContext(e,n){if(!e.size)return e;let l=e.content.firstChild.type.schema,d;try{d=JSON.parse(n)}catch{return e}let{content:g,openStart:jn,openEnd:Un}=e;for(let zn=d.length-2;zn>=0;zn-=2){let qn=l.nodes[d[zn]];if(!qn||qn.hasRequiredAttrs())break;g=Fragment.from(qn.create(d[zn+1],g)),jn++,Un++}return new Slice(g,jn,Un)}const handlers$2={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(e){for(let n in handlers$2){let l=handlers$2[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=d=>{eventBelongsToView(e,d)&&!runCustomHandler(e,d)&&(e.editable||!(d.type in editHandlers))&&l(e,d)},passiveHandlers[n]?{passive:!0}:void 0)}safari&&e.dom.addEventListener("input",()=>null),ensureListeners(e)}function setSelectionOrigin(e,n){e.input.lastSelectionOrigin=n,e.input.lastSelectionTime=Date.now()}function destroyInput(e){e.domObserver.stop();for(let n in e.input.eventHandlers)e.dom.removeEventListener(n,e.input.eventHandlers[n]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ensureListeners(e){e.someProp("handleDOMEvents",n=>{for(let l in n)e.input.eventHandlers[l]||e.dom.addEventListener(l,e.input.eventHandlers[l]=d=>runCustomHandler(e,d))})}function runCustomHandler(e,n){return e.someProp("handleDOMEvents",l=>{let d=l[n.type];return d?d(e,n)||n.defaultPrevented:!1})}function eventBelongsToView(e,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let l=n.target;l!=e.dom;l=l.parentNode)if(!l||l.nodeType==11||l.pmViewDesc&&l.pmViewDesc.stopEvent(n))return!1;return!0}function dispatchEvent(e,n){!runCustomHandler(e,n)&&handlers$2[n.type]&&(e.editable||!(n.type in editHandlers))&&handlers$2[n.type](e,n)}editHandlers.keydown=(e,n)=>{let l=n;if(e.input.shiftKey=l.keyCode==16||l.shiftKey,!inOrNearComposition(e,l)&&(e.input.lastKeyCode=l.keyCode,e.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&l.keyCode==13)))if(l.keyCode!=229&&e.domObserver.forceFlush(),ios&&l.keyCode==13&&!l.ctrlKey&&!l.altKey&&!l.metaKey){let d=Date.now();e.input.lastIOSEnter=d,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==d&&(e.someProp("handleKeyDown",g=>g(e,keyEvent(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",d=>d(e,l))||captureKeyDown(e,l)?l.preventDefault():setSelectionOrigin(e,"key")};editHandlers.keyup=(e,n)=>{n.keyCode==16&&(e.input.shiftKey=!1)};editHandlers.keypress=(e,n)=>{let l=n;if(inOrNearComposition(e,l)||!l.charCode||l.ctrlKey&&!l.altKey||mac$2&&l.metaKey)return;if(e.someProp("handleKeyPress",g=>g(e,l))){l.preventDefault();return}let d=e.state.selection;if(!(d instanceof TextSelection)||!d.$from.sameParent(d.$to)){let g=String.fromCharCode(l.charCode),jn=()=>e.state.tr.insertText(g).scrollIntoView();!/[\r\n]/.test(g)&&!e.someProp("handleTextInput",Un=>Un(e,d.$from.pos,d.$to.pos,g,jn))&&e.dispatch(jn()),l.preventDefault()}};function eventCoords(e){return{left:e.clientX,top:e.clientY}}function isNear(e,n){let l=n.x-e.clientX,d=n.y-e.clientY;return l*l+d*d<100}function runHandlerOnContext(e,n,l,d,g){if(d==-1)return!1;let jn=e.state.doc.resolve(d);for(let Un=jn.depth+1;Un>0;Un--)if(e.someProp(n,zn=>Un>jn.depth?zn(e,l,jn.nodeAfter,jn.before(Un),g,!0):zn(e,l,jn.node(Un),jn.before(Un),g,!1)))return!0;return!1}function updateSelection(e,n,l){if(e.focused||e.focus(),e.state.selection.eq(n))return;let d=e.state.tr.setSelection(n);d.setMeta("pointer",!0),e.dispatch(d)}function selectClickedLeaf(e,n){if(n==-1)return!1;let l=e.state.doc.resolve(n),d=l.nodeAfter;return d&&d.isAtom&&NodeSelection.isSelectable(d)?(updateSelection(e,new NodeSelection(l)),!0):!1}function selectClickedNode(e,n){if(n==-1)return!1;let l=e.state.selection,d,g;l instanceof NodeSelection&&(d=l.node);let jn=e.state.doc.resolve(n);for(let Un=jn.depth+1;Un>0;Un--){let zn=Un>jn.depth?jn.nodeAfter:jn.node(Un);if(NodeSelection.isSelectable(zn)){d&&l.$from.depth>0&&Un>=l.$from.depth&&jn.before(l.$from.depth+1)==l.$from.pos?g=jn.before(l.$from.depth):g=jn.before(Un);break}}return g!=null?(updateSelection(e,NodeSelection.create(e.state.doc,g)),!0):!1}function handleSingleClick(e,n,l,d,g){return runHandlerOnContext(e,"handleClickOn",n,l,d)||e.someProp("handleClick",jn=>jn(e,n,d))||(g?selectClickedNode(e,l):selectClickedLeaf(e,l))}function handleDoubleClick(e,n,l,d){return runHandlerOnContext(e,"handleDoubleClickOn",n,l,d)||e.someProp("handleDoubleClick",g=>g(e,n,d))}function handleTripleClick$1(e,n,l,d){return runHandlerOnContext(e,"handleTripleClickOn",n,l,d)||e.someProp("handleTripleClick",g=>g(e,n,d))||defaultTripleClick(e,l,d)}function defaultTripleClick(e,n,l){if(l.button!=0)return!1;let d=e.state.doc;if(n==-1)return d.inlineContent?(updateSelection(e,TextSelection.create(d,0,d.content.size)),!0):!1;let g=d.resolve(n);for(let jn=g.depth+1;jn>0;jn--){let Un=jn>g.depth?g.nodeAfter:g.node(jn),zn=g.before(jn);if(Un.inlineContent)updateSelection(e,TextSelection.create(d,zn+1,zn+1+Un.content.size));else if(NodeSelection.isSelectable(Un))updateSelection(e,NodeSelection.create(d,zn));else continue;return!0}}function forceDOMFlush(e){return endComposition(e)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers$2.mousedown=(e,n)=>{let l=n;e.input.shiftKey=l.shiftKey;let d=forceDOMFlush(e),g=Date.now(),jn="singleClick";g-e.input.lastClick.time<500&&isNear(l,e.input.lastClick)&&!l[selectNodeModifier]&&e.input.lastClick.button==l.button&&(e.input.lastClick.type=="singleClick"?jn="doubleClick":e.input.lastClick.type=="doubleClick"&&(jn="tripleClick")),e.input.lastClick={time:g,x:l.clientX,y:l.clientY,type:jn,button:l.button};let Un=e.posAtCoords(eventCoords(l));Un&&(jn=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new MouseDown(e,Un,l,!!d)):(jn=="doubleClick"?handleDoubleClick:handleTripleClick$1)(e,Un.pos,Un.inside,l)?l.preventDefault():setSelectionOrigin(e,"pointer"))};class MouseDown{constructor(n,l,d,g){this.view=n,this.pos=l,this.event=d,this.flushed=g,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!d[selectNodeModifier],this.allowDefault=d.shiftKey;let jn,Un;if(l.inside>-1)jn=n.state.doc.nodeAt(l.inside),Un=l.inside;else{let Xn=n.state.doc.resolve(l.pos);jn=Xn.parent,Un=Xn.depth?Xn.before():0}const zn=g?null:d.target,qn=zn?n.docView.nearestDesc(zn,!0):null;this.target=qn&&qn.nodeDOM.nodeType==1?qn.nodeDOM:null;let{selection:Kn}=n.state;(d.button==0&&jn.type.spec.draggable&&jn.type.spec.selectable!==!1||Kn instanceof NodeSelection&&Kn.from<=Un&&Kn.to>Un)&&(this.mightDrag={node:jn,pos:Un,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let l=this.pos;this.view.state.doc!=this.startDoc&&(l=this.view.posAtCoords(eventCoords(n))),this.updateAllowDefault(n),this.allowDefault||!l?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,l.pos,l.inside,n,this.selectNode)?n.preventDefault():n.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(l.pos-this.view.state.selection.from),Math.abs(l.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(l.pos))),n.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(n){this.updateAllowDefault(n),setSelectionOrigin(this.view,"pointer"),n.buttons==0&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}handlers$2.touchstart=e=>{e.input.lastTouch=Date.now(),forceDOMFlush(e),setSelectionOrigin(e,"pointer")};handlers$2.touchmove=e=>{e.input.lastTouch=Date.now(),setSelectionOrigin(e,"pointer")};handlers$2.contextmenu=e=>forceDOMFlush(e);function inOrNearComposition(e,n){return e.composing?!0:safari&&Math.abs(n.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:n}=e,l=n.selection.$to;if(n.selection instanceof TextSelection&&(n.storedMarks||!l.textOffset&&l.parentOffset&&l.nodeBefore.marks.some(d=>d.type.spec.inclusive===!1)||chrome&&windows$1&&selectionBeforeUneditable(e)))e.markCursor=e.state.storedMarks||l.marks(),endComposition(e,!0),e.markCursor=null;else if(endComposition(e,!n.selection.empty),gecko&&n.selection.empty&&l.parentOffset&&!l.textOffset&&l.nodeBefore.marks.length){let d=e.domSelectionRange();for(let g=d.focusNode,jn=d.focusOffset;g&&g.nodeType==1&&jn!=0;){let Un=jn<0?g.lastChild:g.childNodes[jn-1];if(!Un)break;if(Un.nodeType==3){let zn=e.domSelection();zn&&zn.collapse(Un,Un.nodeValue.length);break}else g=Un,jn=-1}}e.input.composing=!0}scheduleComposeEnd(e,timeoutComposition)};function selectionBeforeUneditable(e){let{focusNode:n,focusOffset:l}=e.domSelectionRange();if(!n||n.nodeType!=1||l>=n.childNodes.length)return!1;let d=n.childNodes[l];return d.nodeType==1&&d.contentEditable=="false"}editHandlers.compositionend=(e,n)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=n.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,scheduleComposeEnd(e,20))};function scheduleComposeEnd(e,n){clearTimeout(e.input.composingTimeout),n>-1&&(e.input.composingTimeout=setTimeout(()=>endComposition(e),n))}function clearComposition(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=timestampFromCustomEvent());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(e){let n=e.domSelectionRange();if(!n.focusNode)return null;let l=textNodeBefore$1(n.focusNode,n.focusOffset),d=textNodeAfter$1(n.focusNode,n.focusOffset);if(l&&d&&l!=d){let g=d.pmViewDesc,jn=e.domObserver.lastChangedTextNode;if(l==jn||d==jn)return jn;if(!g||!g.isText(d.nodeValue))return d;if(e.input.compositionNode==d){let Un=l.pmViewDesc;if(!(!Un||!Un.isText(l.nodeValue)))return d}}return l||d}function timestampFromCustomEvent(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function endComposition(e,n=!1){if(!(android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),clearComposition(e),n||e.docView&&e.docView.dirty){let l=selectionFromDOM(e),d=e.state.selection;return l&&!l.eq(d)?e.dispatch(e.state.tr.setSelection(l)):(e.markCursor||n)&&!d.$from.node(d.$from.sharedDepth(d.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function captureCopy(e,n){if(!e.dom.parentNode)return;let l=e.dom.parentNode.appendChild(document.createElement("div"));l.appendChild(n),l.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),g=document.createRange();g.selectNodeContents(n),e.dom.blur(),d.removeAllRanges(),d.addRange(g),setTimeout(()=>{l.parentNode&&l.parentNode.removeChild(l),e.focus()},50)}const brokenClipboardAPI=ie$3&&ie_version<15||ios&&webkit_version<604;handlers$2.copy=editHandlers.cut=(e,n)=>{let l=n,d=e.state.selection,g=l.type=="cut";if(d.empty)return;let jn=brokenClipboardAPI?null:l.clipboardData,Un=d.content(),{dom:zn,text:qn}=serializeForClipboard(e,Un);jn?(l.preventDefault(),jn.clearData(),jn.setData("text/html",zn.innerHTML),jn.setData("text/plain",qn)):captureCopy(e,zn),g&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function capturePaste(e,n){if(!e.dom.parentNode)return;let l=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,d=e.dom.parentNode.appendChild(document.createElement(l?"textarea":"div"));l||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus();let g=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),d.parentNode&&d.parentNode.removeChild(d),l?doPaste(e,d.value,null,g,n):doPaste(e,d.textContent,d.innerHTML,g,n)},50)}function doPaste(e,n,l,d,g){let jn=parseFromClipboard(e,n,l,d,e.state.selection.$from);if(e.someProp("handlePaste",qn=>qn(e,g,jn||Slice.empty)))return!0;if(!jn)return!1;let Un=sliceSingleNode(jn),zn=Un?e.state.tr.replaceSelectionWith(Un,d):e.state.tr.replaceSelection(jn);return e.dispatch(zn.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(e){let n=e.getData("text/plain")||e.getData("Text");if(n)return n;let l=e.getData("text/uri-list");return l?l.replace(/\r?\n/g," "):""}editHandlers.paste=(e,n)=>{let l=n;if(e.composing&&!android)return;let d=brokenClipboardAPI?null:l.clipboardData,g=e.input.shiftKey&&e.input.lastKeyCode!=45;d&&doPaste(e,getText$1(d),d.getData("text/html"),g,l)?l.preventDefault():capturePaste(e,l)};class Dragging{constructor(n,l,d){this.slice=n,this.move=l,this.node=d}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(e,n){let l=e.someProp("dragCopies",d=>!d(n));return l??!n[dragCopyModifier]}handlers$2.dragstart=(e,n)=>{let l=n,d=e.input.mouseDown;if(d&&d.done(),!l.dataTransfer)return;let g=e.state.selection,jn=g.empty?null:e.posAtCoords(eventCoords(l)),Un;if(!(jn&&jn.pos>=g.from&&jn.pos<=(g instanceof NodeSelection?g.to-1:g.to))){if(d&&d.mightDrag)Un=NodeSelection.create(e.state.doc,d.mightDrag.pos);else if(l.target&&l.target.nodeType==1){let Qn=e.docView.nearestDesc(l.target,!0);Qn&&Qn.node.type.spec.draggable&&Qn!=e.docView&&(Un=NodeSelection.create(e.state.doc,Qn.posBefore))}}let zn=(Un||e.state.selection).content(),{dom:qn,text:Kn,slice:Xn}=serializeForClipboard(e,zn);(!l.dataTransfer.files.length||!chrome||chrome_version>120)&&l.dataTransfer.clearData(),l.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",qn.innerHTML),l.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||l.dataTransfer.setData("text/plain",Kn),e.dragging=new Dragging(Xn,dragMoves(e,l),Un)};handlers$2.dragend=e=>{let n=e.dragging;window.setTimeout(()=>{e.dragging==n&&(e.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(e,n)=>n.preventDefault();editHandlers.drop=(e,n)=>{try{handleDrop(e,n,e.dragging)}finally{e.dragging=null}};function handleDrop(e,n,l){if(!n.dataTransfer)return;let d=e.posAtCoords(eventCoords(n));if(!d)return;let g=e.state.doc.resolve(d.pos),jn=l&&l.slice;jn?e.someProp("transformPasted",Ai=>{jn=Ai(jn,e,!1)}):jn=parseFromClipboard(e,getText$1(n.dataTransfer),brokenClipboardAPI?null:n.dataTransfer.getData("text/html"),!1,g);let Un=!!(l&&dragMoves(e,n));if(e.someProp("handleDrop",Ai=>Ai(e,n,jn||Slice.empty,Un))){n.preventDefault();return}if(!jn)return;n.preventDefault();let zn=jn?dropPoint(e.state.doc,g.pos,jn):g.pos;zn==null&&(zn=g.pos);let qn=e.state.tr;if(Un){let{node:Ai}=l;Ai?Ai.replace(qn):qn.deleteSelection()}let Kn=qn.mapping.map(zn),Xn=jn.openStart==0&&jn.openEnd==0&&jn.content.childCount==1,Qn=qn.doc;if(Xn?qn.replaceRangeWith(Kn,Kn,jn.content.firstChild):qn.replaceRange(Kn,Kn,jn),qn.doc.eq(Qn))return;let Jn=qn.doc.resolve(Kn);if(Xn&&NodeSelection.isSelectable(jn.content.firstChild)&&Jn.nodeAfter&&Jn.nodeAfter.sameMarkup(jn.content.firstChild))qn.setSelection(new NodeSelection(Jn));else{let Ai=qn.mapping.map(zn);qn.mapping.maps[qn.mapping.maps.length-1].forEach((Ri,Ni,$i,Li)=>Ai=Li),qn.setSelection(selectionBetween(e,Jn,qn.doc.resolve(Ai)))}e.focus(),e.dispatch(qn.setMeta("uiEvent","drop"))}handlers$2.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&selectionToDOM(e)},20))};handlers$2.blur=(e,n)=>{let l=n;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),l.relatedTarget&&e.dom.contains(l.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};handlers$2.beforeinput=(e,n)=>{if(chrome&&android&&n.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:d}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=d||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",jn=>jn(e,keyEvent(8,"Backspace")))))return;let{$cursor:g}=e.state.selection;g&&g.pos>0&&e.dispatch(e.state.tr.delete(g.pos-1,g.pos).scrollIntoView())},50)}};for(let e in editHandlers)handlers$2[e]=editHandlers[e];function compareObjs(e,n){if(e==n)return!0;for(let l in e)if(e[l]!==n[l])return!1;for(let l in n)if(!(l in e))return!1;return!0}class WidgetType{constructor(n,l){this.toDOM=n,this.spec=l||noSpec,this.side=this.spec.side||0}map(n,l,d,g){let{pos:jn,deleted:Un}=n.mapResult(l.from+g,this.side<0?-1:1);return Un?null:new Decoration(jn-d,jn-d,this)}valid(){return!0}eq(n){return this==n||n instanceof WidgetType&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&compareObjs(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class InlineType{constructor(n,l){this.attrs=n,this.spec=l||noSpec}map(n,l,d,g){let jn=n.map(l.from+g,this.spec.inclusiveStart?-1:1)-d,Un=n.map(l.to+g,this.spec.inclusiveEnd?1:-1)-d;return jn>=Un?null:new Decoration(jn,Un,this)}valid(n,l){return l.from<l.to}eq(n){return this==n||n instanceof InlineType&&compareObjs(this.attrs,n.attrs)&&compareObjs(this.spec,n.spec)}static is(n){return n.type instanceof InlineType}destroy(){}}class NodeType{constructor(n,l){this.attrs=n,this.spec=l||noSpec}map(n,l,d,g){let jn=n.mapResult(l.from+g,1);if(jn.deleted)return null;let Un=n.mapResult(l.to+g,-1);return Un.deleted||Un.pos<=jn.pos?null:new Decoration(jn.pos-d,Un.pos-d,this)}valid(n,l){let{index:d,offset:g}=n.content.findIndex(l.from),jn;return g==l.from&&!(jn=n.child(d)).isText&&g+jn.nodeSize==l.to}eq(n){return this==n||n instanceof NodeType&&compareObjs(this.attrs,n.attrs)&&compareObjs(this.spec,n.spec)}destroy(){}}class Decoration{constructor(n,l,d){this.from=n,this.to=l,this.type=d}copy(n,l){return new Decoration(n,l,this.type)}eq(n,l=0){return this.type.eq(n.type)&&this.from+l==n.from&&this.to+l==n.to}map(n,l,d){return this.type.map(n,this,l,d)}static widget(n,l,d){return new Decoration(n,n,new WidgetType(l,d))}static inline(n,l,d,g){return new Decoration(n,l,new InlineType(d,g))}static node(n,l,d,g){return new Decoration(n,l,new NodeType(d,g))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(n,l){this.local=n.length?n:none,this.children=l.length?l:none}static create(n,l){return l.length?buildTree(l,n,0,noSpec):empty$2}find(n,l,d){let g=[];return this.findInner(n??0,l??1e9,g,0,d),g}findInner(n,l,d,g,jn){for(let Un=0;Un<this.local.length;Un++){let zn=this.local[Un];zn.from<=l&&zn.to>=n&&(!jn||jn(zn.spec))&&d.push(zn.copy(zn.from+g,zn.to+g))}for(let Un=0;Un<this.children.length;Un+=3)if(this.children[Un]<l&&this.children[Un+1]>n){let zn=this.children[Un]+1;this.children[Un+2].findInner(n-zn,l-zn,d,g+zn,jn)}}map(n,l,d){return this==empty$2||n.maps.length==0?this:this.mapInner(n,l,0,0,d||noSpec)}mapInner(n,l,d,g,jn){let Un;for(let zn=0;zn<this.local.length;zn++){let qn=this.local[zn].map(n,d,g);qn&&qn.type.valid(l,qn)?(Un||(Un=[])).push(qn):jn.onRemove&&jn.onRemove(this.local[zn].spec)}return this.children.length?mapChildren(this.children,Un||[],n,l,d,g,jn):Un?new DecorationSet(Un.sort(byPos),none):empty$2}add(n,l){return l.length?this==empty$2?DecorationSet.create(n,l):this.addInner(n,l,0):this}addInner(n,l,d){let g,jn=0;n.forEach((zn,qn)=>{let Kn=qn+d,Xn;if(Xn=takeSpansForNode(l,zn,Kn)){for(g||(g=this.children.slice());jn<g.length&&g[jn]<qn;)jn+=3;g[jn]==qn?g[jn+2]=g[jn+2].addInner(zn,Xn,Kn+1):g.splice(jn,0,qn,qn+zn.nodeSize,buildTree(Xn,zn,Kn+1,noSpec)),jn+=3}});let Un=moveSpans(jn?withoutNulls(l):l,-d);for(let zn=0;zn<Un.length;zn++)Un[zn].type.valid(n,Un[zn])||Un.splice(zn--,1);return new DecorationSet(Un.length?this.local.concat(Un).sort(byPos):this.local,g||this.children)}remove(n){return n.length==0||this==empty$2?this:this.removeInner(n,0)}removeInner(n,l){let d=this.children,g=this.local;for(let jn=0;jn<d.length;jn+=3){let Un,zn=d[jn]+l,qn=d[jn+1]+l;for(let Xn=0,Qn;Xn<n.length;Xn++)(Qn=n[Xn])&&Qn.from>zn&&Qn.to<qn&&(n[Xn]=null,(Un||(Un=[])).push(Qn));if(!Un)continue;d==this.children&&(d=this.children.slice());let Kn=d[jn+2].removeInner(Un,zn+1);Kn!=empty$2?d[jn+2]=Kn:(d.splice(jn,3),jn-=3)}if(g.length){for(let jn=0,Un;jn<n.length;jn++)if(Un=n[jn])for(let zn=0;zn<g.length;zn++)g[zn].eq(Un,l)&&(g==this.local&&(g=this.local.slice()),g.splice(zn--,1))}return d==this.children&&g==this.local?this:g.length||d.length?new DecorationSet(g,d):empty$2}forChild(n,l){if(this==empty$2)return this;if(l.isLeaf)return DecorationSet.empty;let d,g;for(let zn=0;zn<this.children.length;zn+=3)if(this.children[zn]>=n){this.children[zn]==n&&(d=this.children[zn+2]);break}let jn=n+1,Un=jn+l.content.size;for(let zn=0;zn<this.local.length;zn++){let qn=this.local[zn];if(qn.from<Un&&qn.to>jn&&qn.type instanceof InlineType){let Kn=Math.max(jn,qn.from)-jn,Xn=Math.min(Un,qn.to)-jn;Kn<Xn&&(g||(g=[])).push(qn.copy(Kn,Xn))}}if(g){let zn=new DecorationSet(g.sort(byPos),none);return d?new DecorationGroup([zn,d]):zn}return d||empty$2}eq(n){if(this==n)return!0;if(!(n instanceof DecorationSet)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let l=0;l<this.local.length;l++)if(!this.local[l].eq(n.local[l]))return!1;for(let l=0;l<this.children.length;l+=3)if(this.children[l]!=n.children[l]||this.children[l+1]!=n.children[l+1]||!this.children[l+2].eq(n.children[l+2]))return!1;return!0}locals(n){return removeOverlap(this.localsInner(n))}localsInner(n){if(this==empty$2)return none;if(n.inlineContent||!this.local.some(InlineType.is))return this.local;let l=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof InlineType||l.push(this.local[d]);return l}forEachSet(n){n(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty$2=DecorationSet.empty;class DecorationGroup{constructor(n){this.members=n}map(n,l){const d=this.members.map(g=>g.map(n,l,noSpec));return DecorationGroup.from(d)}forChild(n,l){if(l.isLeaf)return DecorationSet.empty;let d=[];for(let g=0;g<this.members.length;g++){let jn=this.members[g].forChild(n,l);jn!=empty$2&&(jn instanceof DecorationGroup?d=d.concat(jn.members):d.push(jn))}return DecorationGroup.from(d)}eq(n){if(!(n instanceof DecorationGroup)||n.members.length!=this.members.length)return!1;for(let l=0;l<this.members.length;l++)if(!this.members[l].eq(n.members[l]))return!1;return!0}locals(n){let l,d=!0;for(let g=0;g<this.members.length;g++){let jn=this.members[g].localsInner(n);if(jn.length)if(!l)l=jn;else{d&&(l=l.slice(),d=!1);for(let Un=0;Un<jn.length;Un++)l.push(jn[Un])}}return l?removeOverlap(d?l:l.sort(byPos)):none}static from(n){switch(n.length){case 0:return empty$2;case 1:return n[0];default:return new DecorationGroup(n.every(l=>l instanceof DecorationSet)?n:n.reduce((l,d)=>l.concat(d instanceof DecorationSet?d:d.members),[]))}}forEachSet(n){for(let l=0;l<this.members.length;l++)this.members[l].forEachSet(n)}}function mapChildren(e,n,l,d,g,jn,Un){let zn=e.slice();for(let Kn=0,Xn=jn;Kn<l.maps.length;Kn++){let Qn=0;l.maps[Kn].forEach((Jn,Ai,Ri,Ni)=>{let $i=Ni-Ri-(Ai-Jn);for(let Li=0;Li<zn.length;Li+=3){let ji=zn[Li+1];if(ji<0||Jn>ji+Xn-Qn)continue;let Fi=zn[Li]+Xn-Qn;Ai>=Fi?zn[Li+1]=Jn<=Fi?-2:-1:Jn>=Xn&&$i&&(zn[Li]+=$i,zn[Li+1]+=$i)}Qn+=$i}),Xn=l.maps[Kn].map(Xn,-1)}let qn=!1;for(let Kn=0;Kn<zn.length;Kn+=3)if(zn[Kn+1]<0){if(zn[Kn+1]==-2){qn=!0,zn[Kn+1]=-1;continue}let Xn=l.map(e[Kn]+jn),Qn=Xn-g;if(Qn<0||Qn>=d.content.size){qn=!0;continue}let Jn=l.map(e[Kn+1]+jn,-1),Ai=Jn-g,{index:Ri,offset:Ni}=d.content.findIndex(Qn),$i=d.maybeChild(Ri);if($i&&Ni==Qn&&Ni+$i.nodeSize==Ai){let Li=zn[Kn+2].mapInner(l,$i,Xn+1,e[Kn]+jn+1,Un);Li!=empty$2?(zn[Kn]=Qn,zn[Kn+1]=Ai,zn[Kn+2]=Li):(zn[Kn+1]=-2,qn=!0)}else qn=!0}if(qn){let Kn=mapAndGatherRemainingDecorations(zn,e,n,l,g,jn,Un),Xn=buildTree(Kn,d,0,Un);n=Xn.local;for(let Qn=0;Qn<zn.length;Qn+=3)zn[Qn+1]<0&&(zn.splice(Qn,3),Qn-=3);for(let Qn=0,Jn=0;Qn<Xn.children.length;Qn+=3){let Ai=Xn.children[Qn];for(;Jn<zn.length&&zn[Jn]<Ai;)Jn+=3;zn.splice(Jn,0,Xn.children[Qn],Xn.children[Qn+1],Xn.children[Qn+2])}}return new DecorationSet(n.sort(byPos),zn)}function moveSpans(e,n){if(!n||!e.length)return e;let l=[];for(let d=0;d<e.length;d++){let g=e[d];l.push(new Decoration(g.from+n,g.to+n,g.type))}return l}function mapAndGatherRemainingDecorations(e,n,l,d,g,jn,Un){function zn(qn,Kn){for(let Xn=0;Xn<qn.local.length;Xn++){let Qn=qn.local[Xn].map(d,g,Kn);Qn?l.push(Qn):Un.onRemove&&Un.onRemove(qn.local[Xn].spec)}for(let Xn=0;Xn<qn.children.length;Xn+=3)zn(qn.children[Xn+2],qn.children[Xn]+Kn+1)}for(let qn=0;qn<e.length;qn+=3)e[qn+1]==-1&&zn(e[qn+2],n[qn]+jn+1);return l}function takeSpansForNode(e,n,l){if(n.isLeaf)return null;let d=l+n.nodeSize,g=null;for(let jn=0,Un;jn<e.length;jn++)(Un=e[jn])&&Un.from>l&&Un.to<d&&((g||(g=[])).push(Un),e[jn]=null);return g}function withoutNulls(e){let n=[];for(let l=0;l<e.length;l++)e[l]!=null&&n.push(e[l]);return n}function buildTree(e,n,l,d){let g=[],jn=!1;n.forEach((zn,qn)=>{let Kn=takeSpansForNode(e,zn,qn+l);if(Kn){jn=!0;let Xn=buildTree(Kn,zn,l+qn+1,d);Xn!=empty$2&&g.push(qn,qn+zn.nodeSize,Xn)}});let Un=moveSpans(jn?withoutNulls(e):e,-l).sort(byPos);for(let zn=0;zn<Un.length;zn++)Un[zn].type.valid(n,Un[zn])||(d.onRemove&&d.onRemove(Un[zn].spec),Un.splice(zn--,1));return Un.length||g.length?new DecorationSet(Un,g):empty$2}function byPos(e,n){return e.from-n.from||e.to-n.to}function removeOverlap(e){let n=e;for(let l=0;l<n.length-1;l++){let d=n[l];if(d.from!=d.to)for(let g=l+1;g<n.length;g++){let jn=n[g];if(jn.from==d.from){jn.to!=d.to&&(n==e&&(n=e.slice()),n[g]=jn.copy(jn.from,d.to),insertAhead(n,g+1,jn.copy(d.to,jn.to)));continue}else{jn.from<d.to&&(n==e&&(n=e.slice()),n[l]=d.copy(d.from,jn.from),insertAhead(n,g,d.copy(jn.from,d.to)));break}}}return n}function insertAhead(e,n,l){for(;n<e.length&&byPos(l,e[n])>0;)n++;e.splice(n,0,l)}function viewDecorations(e){let n=[];return e.someProp("decorations",l=>{let d=l(e.state);d&&d!=empty$2&&n.push(d)}),e.cursorWrapper&&n.push(DecorationSet.create(e.state.doc,[e.cursorWrapper.deco])),DecorationGroup.from(n)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$3&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(n){this.anchorNode=n.anchorNode,this.anchorOffset=n.anchorOffset,this.focusNode=n.focusNode,this.focusOffset=n.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(n){return n.anchorNode==this.anchorNode&&n.anchorOffset==this.anchorOffset&&n.focusNode==this.focusNode&&n.focusOffset==this.focusOffset}}class DOMObserver{constructor(n,l){this.view=n,this.handleDOMChange=l,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let g=0;g<d.length;g++)this.queue.push(d[g]);ie$3&&ie_version<=11&&d.some(g=>g.type=="childList"&&g.removedNodes.length||g.type=="characterData"&&g.oldValue.length>g.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let n=this.observer.takeRecords();if(n.length){for(let l=0;l<n.length;l++)this.queue.push(n[l]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$3&&ie_version<=11&&!this.view.state.selection.empty){let n=this.view.domSelectionRange();if(n.focusNode&&isEquivalentPosition(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(n){if(!n.focusNode)return!0;let l=new Set,d;for(let jn=n.focusNode;jn;jn=parentNode(jn))l.add(jn);for(let jn=n.anchorNode;jn;jn=parentNode(jn))if(l.has(jn)){d=jn;break}let g=d&&this.view.docView.nearestDesc(d);if(g&&g.ignoreMutation({type:"selection",target:d.nodeType==3?d.parentNode:d}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let n of this.observer.takeRecords())this.queue.push(n);return this.queue}flush(){let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let l=this.pendingRecords();l.length&&(this.queue=[]);let d=n.domSelectionRange(),g=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&hasFocusAndSelection(n)&&!this.ignoreSelectionChange(d),jn=-1,Un=-1,zn=!1,qn=[];if(n.editable)for(let Xn=0;Xn<l.length;Xn++){let Qn=this.registerMutation(l[Xn],qn);Qn&&(jn=jn<0?Qn.from:Math.min(Qn.from,jn),Un=Un<0?Qn.to:Math.max(Qn.to,Un),Qn.typeOver&&(zn=!0))}if(gecko&&qn.length){let Xn=qn.filter(Qn=>Qn.nodeName=="BR");if(Xn.length==2){let[Qn,Jn]=Xn;Qn.parentNode&&Qn.parentNode.parentNode==Jn.parentNode?Jn.remove():Qn.remove()}else{let{focusNode:Qn}=this.currentSelection;for(let Jn of Xn){let Ai=Jn.parentNode;Ai&&Ai.nodeName=="LI"&&(!Qn||blockParent(n,Qn)!=Ai)&&Jn.remove()}}}else if((chrome||safari)&&qn.some(Xn=>Xn.nodeName=="BR")&&(n.input.lastKeyCode==8||n.input.lastKeyCode==46)){for(let Xn of qn)if(Xn.nodeName=="BR"&&Xn.parentNode){let Qn=Xn.nextSibling;Qn&&Qn.nodeType==1&&Qn.contentEditable=="false"&&Xn.parentNode.removeChild(Xn)}}let Kn=null;jn<0&&g&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&selectionCollapsed(d)&&(Kn=selectionFromDOM(n))&&Kn.eq(Selection.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,selectionToDOM(n),this.currentSelection.set(d),n.scrollToSelection()):(jn>-1||g)&&(jn>-1&&(n.docView.markDirty(jn,Un),checkCSS(n)),this.handleDOMChange(jn,Un,zn,qn),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(d)||selectionToDOM(n),this.currentSelection.set(d))}registerMutation(n,l){if(l.indexOf(n.target)>-1)return null;let d=this.view.docView.nearestDesc(n.target);if(n.type=="attributes"&&(d==this.view.docView||n.attributeName=="contenteditable"||n.attributeName=="style"&&!n.oldValue&&!n.target.getAttribute("style"))||!d||d.ignoreMutation(n))return null;if(n.type=="childList"){for(let Xn=0;Xn<n.addedNodes.length;Xn++){let Qn=n.addedNodes[Xn];l.push(Qn),Qn.nodeType==3&&(this.lastChangedTextNode=Qn)}if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(n.target))return{from:d.posBefore,to:d.posAfter};let g=n.previousSibling,jn=n.nextSibling;if(ie$3&&ie_version<=11&&n.addedNodes.length)for(let Xn=0;Xn<n.addedNodes.length;Xn++){let{previousSibling:Qn,nextSibling:Jn}=n.addedNodes[Xn];(!Qn||Array.prototype.indexOf.call(n.addedNodes,Qn)<0)&&(g=Qn),(!Jn||Array.prototype.indexOf.call(n.addedNodes,Jn)<0)&&(jn=Jn)}let Un=g&&g.parentNode==n.target?domIndex(g)+1:0,zn=d.localPosFromDOM(n.target,Un,-1),qn=jn&&jn.parentNode==n.target?domIndex(jn):n.target.childNodes.length,Kn=d.localPosFromDOM(n.target,qn,1);return{from:zn,to:Kn}}else return n.type=="attributes"?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:(this.lastChangedTextNode=n.target,{from:d.posAtStart,to:d.posAtEnd,typeOver:n.target.nodeValue==n.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(e){if(!cssChecked.has(e)&&(cssChecked.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(e,n){let l=n.startContainer,d=n.startOffset,g=n.endContainer,jn=n.endOffset,Un=e.domAtPos(e.state.selection.anchor);return isEquivalentPosition(Un.node,Un.offset,g,jn)&&([l,d,g,jn]=[g,jn,l,d]),{anchorNode:l,anchorOffset:d,focusNode:g,focusOffset:jn}}function safariShadowSelectionRange(e,n){if(n.getComposedRanges){let g=n.getComposedRanges(e.root)[0];if(g)return rangeToSelectionRange(e,g)}let l;function d(g){g.preventDefault(),g.stopImmediatePropagation(),l=g.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",d,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",d,!0),l?rangeToSelectionRange(e,l):null}function blockParent(e,n){for(let l=n.parentNode;l&&l!=e.dom;l=l.parentNode){let d=e.docView.nearestDesc(l,!0);if(d&&d.node.isBlock)return l}return null}function parseBetween(e,n,l){let{node:d,fromOffset:g,toOffset:jn,from:Un,to:zn}=e.docView.parseRange(n,l),qn=e.domSelectionRange(),Kn,Xn=qn.anchorNode;if(Xn&&e.dom.contains(Xn.nodeType==1?Xn:Xn.parentNode)&&(Kn=[{node:Xn,offset:qn.anchorOffset}],selectionCollapsed(qn)||Kn.push({node:qn.focusNode,offset:qn.focusOffset})),chrome&&e.input.lastKeyCode===8)for(let $i=jn;$i>g;$i--){let Li=d.childNodes[$i-1],ji=Li.pmViewDesc;if(Li.nodeName=="BR"&&!ji){jn=$i;break}if(!ji||ji.size)break}let Qn=e.state.doc,Jn=e.someProp("domParser")||DOMParser$1.fromSchema(e.state.schema),Ai=Qn.resolve(Un),Ri=null,Ni=Jn.parse(d,{topNode:Ai.parent,topMatch:Ai.parent.contentMatchAt(Ai.index()),topOpen:!0,from:g,to:jn,preserveWhitespace:Ai.parent.type.whitespace=="pre"?"full":!0,findPositions:Kn,ruleFromNode,context:Ai});if(Kn&&Kn[0].pos!=null){let $i=Kn[0].pos,Li=Kn[1]&&Kn[1].pos;Li==null&&(Li=$i),Ri={anchor:$i+Un,head:Li+Un}}return{doc:Ni,sel:Ri,from:Un,to:zn}}function ruleFromNode(e){let n=e.pmViewDesc;if(n)return n.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let l=document.createElement("div");return l.appendChild(document.createElement("li")),{skip:l}}else if(e.parentNode.lastChild==e||safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(e,n,l,d,g){let jn=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,n<0){let Xi=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,as=selectionFromDOM(e,Xi);if(as&&!e.state.selection.eq(as)){if(chrome&&android&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",Zi=>Zi(e,keyEvent(13,"Enter"))))return;let ls=e.state.tr.setSelection(as);Xi=="pointer"?ls.setMeta("pointer",!0):Xi=="key"&&ls.scrollIntoView(),jn&&ls.setMeta("composition",jn),e.dispatch(ls)}return}let Un=e.state.doc.resolve(n),zn=Un.sharedDepth(l);n=Un.before(zn+1),l=e.state.doc.resolve(l).after(zn+1);let qn=e.state.selection,Kn=parseBetween(e,n,l),Xn=e.state.doc,Qn=Xn.slice(Kn.from,Kn.to),Jn,Ai;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(Jn=e.state.selection.to,Ai="end"):(Jn=e.state.selection.from,Ai="start"),e.input.lastKeyCode=null;let Ri=findDiff(Qn.content,Kn.doc.content,Kn.from,Jn,Ai);if(Ri&&e.input.domChangeCount++,(ios&&e.input.lastIOSEnter>Date.now()-225||android)&&g.some(Xi=>Xi.nodeType==1&&!isInline.test(Xi.nodeName))&&(!Ri||Ri.endA>=Ri.endB)&&e.someProp("handleKeyDown",Xi=>Xi(e,keyEvent(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!Ri)if(d&&qn instanceof TextSelection&&!qn.empty&&qn.$head.sameParent(qn.$anchor)&&!e.composing&&!(Kn.sel&&Kn.sel.anchor!=Kn.sel.head))Ri={start:qn.from,endA:qn.to,endB:qn.to};else{if(Kn.sel){let Xi=resolveSelection(e,e.state.doc,Kn.sel);if(Xi&&!Xi.eq(e.state.selection)){let as=e.state.tr.setSelection(Xi);jn&&as.setMeta("composition",jn),e.dispatch(as)}}return}e.state.selection.from<e.state.selection.to&&Ri.start==Ri.endB&&e.state.selection instanceof TextSelection&&(Ri.start>e.state.selection.from&&Ri.start<=e.state.selection.from+2&&e.state.selection.from>=Kn.from?Ri.start=e.state.selection.from:Ri.endA<e.state.selection.to&&Ri.endA>=e.state.selection.to-2&&e.state.selection.to<=Kn.to&&(Ri.endB+=e.state.selection.to-Ri.endA,Ri.endA=e.state.selection.to)),ie$3&&ie_version<=11&&Ri.endB==Ri.start+1&&Ri.endA==Ri.start&&Ri.start>Kn.from&&Kn.doc.textBetween(Ri.start-Kn.from-1,Ri.start-Kn.from+1)==" "&&(Ri.start--,Ri.endA--,Ri.endB--);let Ni=Kn.doc.resolveNoCache(Ri.start-Kn.from),$i=Kn.doc.resolveNoCache(Ri.endB-Kn.from),Li=Xn.resolve(Ri.start),ji=Ni.sameParent($i)&&Ni.parent.inlineContent&&Li.end()>=Ri.endA;if((ios&&e.input.lastIOSEnter>Date.now()-225&&(!ji||g.some(Xi=>Xi.nodeName=="DIV"||Xi.nodeName=="P"))||!ji&&Ni.pos<Kn.doc.content.size&&(!Ni.sameParent($i)||!Ni.parent.inlineContent)&&Ni.pos<$i.pos&&!/\S/.test(Kn.doc.textBetween(Ni.pos,$i.pos,"","")))&&e.someProp("handleKeyDown",Xi=>Xi(e,keyEvent(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>Ri.start&&looksLikeBackspace(Xn,Ri.start,Ri.endA,Ni,$i)&&e.someProp("handleKeyDown",Xi=>Xi(e,keyEvent(8,"Backspace")))){android&&chrome&&e.domObserver.suppressSelectionUpdates();return}chrome&&Ri.endB==Ri.start&&(e.input.lastChromeDelete=Date.now()),android&&!ji&&Ni.start()!=$i.start()&&$i.parentOffset==0&&Ni.depth==$i.depth&&Kn.sel&&Kn.sel.anchor==Kn.sel.head&&Kn.sel.head==Ri.endA&&(Ri.endB-=2,$i=Kn.doc.resolveNoCache(Ri.endB-Kn.from),setTimeout(()=>{e.someProp("handleKeyDown",function(Xi){return Xi(e,keyEvent(13,"Enter"))})},20));let Fi=Ri.start,qi=Ri.endA,zi=Xi=>{let as=Xi||e.state.tr.replace(Fi,qi,Kn.doc.slice(Ri.start-Kn.from,Ri.endB-Kn.from));if(Kn.sel){let ls=resolveSelection(e,as.doc,Kn.sel);ls&&!(chrome&&e.composing&&ls.empty&&(Ri.start!=Ri.endB||e.input.lastChromeDelete<Date.now()-100)&&(ls.head==Fi||ls.head==as.mapping.map(qi)-1)||ie$3&&ls.empty&&ls.head==Fi)&&as.setSelection(ls)}return jn&&as.setMeta("composition",jn),as.scrollIntoView()},Gi;if(ji)if(Ni.pos==$i.pos){ie$3&&ie_version<=11&&Ni.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(e),20));let Xi=zi(e.state.tr.delete(Fi,qi)),as=Xn.resolve(Ri.start).marksAcross(Xn.resolve(Ri.endA));as&&Xi.ensureMarks(as),e.dispatch(Xi)}else if(Ri.endA==Ri.endB&&(Gi=isMarkChange(Ni.parent.content.cut(Ni.parentOffset,$i.parentOffset),Li.parent.content.cut(Li.parentOffset,Ri.endA-Li.start())))){let Xi=zi(e.state.tr);Gi.type=="add"?Xi.addMark(Fi,qi,Gi.mark):Xi.removeMark(Fi,qi,Gi.mark),e.dispatch(Xi)}else if(Ni.parent.child(Ni.index()).isText&&Ni.index()==$i.index()-($i.textOffset?0:1)){let Xi=Ni.parent.textBetween(Ni.parentOffset,$i.parentOffset),as=()=>zi(e.state.tr.insertText(Xi,Fi,qi));e.someProp("handleTextInput",ls=>ls(e,Fi,qi,Xi,as))||e.dispatch(as())}else e.dispatch(zi());else e.dispatch(zi())}function resolveSelection(e,n,l){return Math.max(l.anchor,l.head)>n.content.size?null:selectionBetween(e,n.resolve(l.anchor),n.resolve(l.head))}function isMarkChange(e,n){let l=e.firstChild.marks,d=n.firstChild.marks,g=l,jn=d,Un,zn,qn;for(let Xn=0;Xn<d.length;Xn++)g=d[Xn].removeFromSet(g);for(let Xn=0;Xn<l.length;Xn++)jn=l[Xn].removeFromSet(jn);if(g.length==1&&jn.length==0)zn=g[0],Un="add",qn=Xn=>Xn.mark(zn.addToSet(Xn.marks));else if(g.length==0&&jn.length==1)zn=jn[0],Un="remove",qn=Xn=>Xn.mark(zn.removeFromSet(Xn.marks));else return null;let Kn=[];for(let Xn=0;Xn<n.childCount;Xn++)Kn.push(qn(n.child(Xn)));if(Fragment.from(Kn).eq(e))return{mark:zn,type:Un}}function looksLikeBackspace(e,n,l,d,g){if(l-n<=g.pos-d.pos||skipClosingAndOpening(d,!0,!1)<g.pos)return!1;let jn=e.resolve(n);if(!d.parent.isTextblock){let zn=jn.nodeAfter;return zn!=null&&l==n+zn.nodeSize}if(jn.parentOffset<jn.parent.content.size||!jn.parent.isTextblock)return!1;let Un=e.resolve(skipClosingAndOpening(jn,!0,!0));return!Un.parent.isTextblock||Un.pos>l||skipClosingAndOpening(Un,!0,!1)<l?!1:d.parent.content.cut(d.parentOffset).eq(Un.parent.content)}function skipClosingAndOpening(e,n,l){let d=e.depth,g=n?e.end():e.pos;for(;d>0&&(n||e.indexAfter(d)==e.node(d).childCount);)d--,g++,n=!1;if(l){let jn=e.node(d).maybeChild(e.indexAfter(d));for(;jn&&!jn.isLeaf;)jn=jn.firstChild,g++}return g}function findDiff(e,n,l,d,g){let jn=e.findDiffStart(n,l);if(jn==null)return null;let{a:Un,b:zn}=e.findDiffEnd(n,l+e.size,l+n.size);if(g=="end"){let qn=Math.max(0,jn-Math.min(Un,zn));d-=Un+qn-jn}if(Un<jn&&e.size<n.size){let qn=d<=jn&&d>=Un?jn-d:0;jn-=qn,jn&&jn<n.size&&isSurrogatePair$1(n.textBetween(jn-1,jn+1))&&(jn+=qn?1:-1),zn=jn+(zn-Un),Un=jn}else if(zn<jn){let qn=d<=jn&&d>=zn?jn-d:0;jn-=qn,jn&&jn<e.size&&isSurrogatePair$1(e.textBetween(jn-1,jn+1))&&(jn+=qn?1:-1),Un=jn+(Un-zn),zn=jn}return{start:jn,endA:Un,endB:zn}}function isSurrogatePair$1(e){if(e.length!=2)return!1;let n=e.charCodeAt(0),l=e.charCodeAt(1);return n>=56320&&n<=57343&&l>=55296&&l<=56319}class EditorView{constructor(n,l){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=l,this.state=l.state,this.directPlugins=l.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=n&&n.mount||document.createElement("div"),n&&(n.appendChild?n.appendChild(this.dom):typeof n=="function"?n(this.dom):n.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(d,g,jn,Un)=>readDOMChange(this,d,g,jn,Un)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let n=this._props;this._props={};for(let l in n)this._props[l]=n[l];this._props.state=this.state}return this._props}update(n){n.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let l=this._props;this._props=n,n.plugins&&(n.plugins.forEach(checkStateComponent),this.directPlugins=n.plugins),this.updateStateInner(n.state,l)}setProps(n){let l={};for(let d in this._props)l[d]=this._props[d];l.state=this.state;for(let d in n)l[d]=n[d];this.update(l)}updateState(n){this.updateStateInner(n,this._props)}updateStateInner(n,l){var d;let g=this.state,jn=!1,Un=!1;n.storedMarks&&this.composing&&(clearComposition(this),Un=!0),this.state=n;let zn=g.plugins!=n.plugins||this._props.plugins!=l.plugins;if(zn||this._props.plugins!=l.plugins||this._props.nodeViews!=l.nodeViews){let Ai=buildNodeViews(this);changedNodeViews(Ai,this.nodeViews)&&(this.nodeViews=Ai,jn=!0)}(zn||l.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let qn=viewDecorations(this),Kn=computeDocDeco(this),Xn=g.plugins!=n.plugins&&!g.doc.eq(n.doc)?"reset":n.scrollToSelection>g.scrollToSelection?"to selection":"preserve",Qn=jn||!this.docView.matchesNode(n.doc,Kn,qn);(Qn||!n.selection.eq(g.selection))&&(Un=!0);let Jn=Xn=="preserve"&&Un&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(Un){this.domObserver.stop();let Ai=Qn&&(ie$3||chrome)&&!this.composing&&!g.selection.empty&&!n.selection.empty&&selectionContextChanged(g.selection,n.selection);if(Qn){let Ri=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(jn||!this.docView.update(n.doc,Kn,qn,this))&&(this.docView.updateOuterDeco(Kn),this.docView.destroy(),this.docView=docViewDesc(n.doc,Kn,qn,this.dom,this)),Ri&&!this.trackWrites&&(Ai=!0)}Ai||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,Ai):(syncNodeSelection(this,n.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(g),!((d=this.dragging)===null||d===void 0)&&d.node&&!g.doc.eq(n.doc)&&this.updateDraggedNode(this.dragging,g),Xn=="reset"?this.dom.scrollTop=0:Xn=="to selection"?this.scrollToSelection():Jn&&resetScrollPos(Jn)}scrollToSelection(){let n=this.domSelectionRange().focusNode;if(!(!n||!this.dom.contains(n.nodeType==1?n:n.parentNode))){if(!this.someProp("handleScrollToSelection",l=>l(this)))if(this.state.selection instanceof NodeSelection){let l=this.docView.domAfterPos(this.state.selection.from);l.nodeType==1&&scrollRectIntoView(this,l.getBoundingClientRect(),n)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),n)}}destroyPluginViews(){let n;for(;n=this.pluginViews.pop();)n.destroy&&n.destroy()}updatePluginViews(n){if(!n||n.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let l=0;l<this.directPlugins.length;l++){let d=this.directPlugins[l];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let l=0;l<this.state.plugins.length;l++){let d=this.state.plugins[l];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}else for(let l=0;l<this.pluginViews.length;l++){let d=this.pluginViews[l];d.update&&d.update(this,n)}}updateDraggedNode(n,l){let d=n.node,g=-1;if(this.state.doc.nodeAt(d.from)==d.node)g=d.from;else{let jn=d.from+(this.state.doc.content.size-l.doc.content.size);(jn>0&&this.state.doc.nodeAt(jn))==d.node&&(g=jn)}this.dragging=new Dragging(n.slice,n.move,g<0?void 0:NodeSelection.create(this.state.doc,g))}someProp(n,l){let d=this._props&&this._props[n],g;if(d!=null&&(g=l?l(d):d))return g;for(let Un=0;Un<this.directPlugins.length;Un++){let zn=this.directPlugins[Un].props[n];if(zn!=null&&(g=l?l(zn):zn))return g}let jn=this.state.plugins;if(jn)for(let Un=0;Un<jn.length;Un++){let zn=jn[Un].props[n];if(zn!=null&&(g=l?l(zn):zn))return g}}hasFocus(){if(ie$3){let n=this.root.activeElement;if(n==this.dom)return!0;if(!n||!this.dom.contains(n))return!1;for(;n&&this.dom!=n&&this.dom.contains(n);){if(n.contentEditable=="false")return!1;n=n.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let n=this._root;if(n==null){for(let l=this.dom.parentNode;l;l=l.parentNode)if(l.nodeType==9||l.nodeType==11&&l.host)return l.getSelection||(Object.getPrototypeOf(l).getSelection=()=>l.ownerDocument.getSelection()),this._root=l}return n||document}updateRoot(){this._root=null}posAtCoords(n){return posAtCoords(this,n)}coordsAtPos(n,l=1){return coordsAtPos(this,n,l)}domAtPos(n,l=0){return this.docView.domFromPos(n,l)}nodeDOM(n){let l=this.docView.descAt(n);return l?l.nodeDOM:null}posAtDOM(n,l,d=-1){let g=this.docView.posFromDOM(n,l,d);if(g==null)throw new RangeError("DOM position not inside the editor");return g}endOfTextblock(n,l){return endOfTextblock(this,l||this.state,n)}pasteHTML(n,l){return doPaste(this,"",n,!1,l||new ClipboardEvent("paste"))}pasteText(n,l){return doPaste(this,n,null,!0,l||new ClipboardEvent("paste"))}serializeForClipboard(n){return serializeForClipboard(this,n)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(n){return dispatchEvent(this,n)}domSelectionRange(){let n=this.domSelection();return n?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,n)||n:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))};function computeDocDeco(e){let n=Object.create(null);return n.class="ProseMirror",n.contenteditable=String(e.editable),e.someProp("attributes",l=>{if(typeof l=="function"&&(l=l(e.state)),l)for(let d in l)d=="class"?n.class+=" "+l[d]:d=="style"?n.style=(n.style?n.style+";":"")+l[d]:!n[d]&&d!="contenteditable"&&d!="nodeName"&&(n[d]=String(l[d]))}),n.translate||(n.translate="no"),[Decoration.node(0,e.state.doc.content.size,n)]}function updateCursorWrapper(e){if(e.markCursor){let n=document.createElement("img");n.className="ProseMirror-separator",n.setAttribute("mark-placeholder","true"),n.setAttribute("alt",""),e.cursorWrapper={dom:n,deco:Decoration.widget(e.state.selection.from,n,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function getEditable(e){return!e.someProp("editable",n=>n(e.state)===!1)}function selectionContextChanged(e,n){let l=Math.min(e.$anchor.sharedDepth(e.head),n.$anchor.sharedDepth(n.head));return e.$anchor.start(l)!=n.$anchor.start(l)}function buildNodeViews(e){let n=Object.create(null);function l(d){for(let g in d)Object.prototype.hasOwnProperty.call(n,g)||(n[g]=d[g])}return e.someProp("nodeViews",l),e.someProp("markViews",l),n}function changedNodeViews(e,n){let l=0,d=0;for(let g in e){if(e[g]!=n[g])return!0;l++}for(let g in n)d++;return l!=d}function checkStateComponent(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base$2={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift$3={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$3=0;i$3<10;i$3++)base$2[48+i$3]=base$2[96+i$3]=String(i$3);for(var i$3=1;i$3<=24;i$3++)base$2[i$3+111]="F"+i$3;for(var i$3=65;i$3<=90;i$3++)base$2[i$3]=String.fromCharCode(i$3+32),shift$3[i$3]=String.fromCharCode(i$3);for(var code$4 in base$2)shift$3.hasOwnProperty(code$4)||(shift$3[code$4]=base$2[code$4]);function keyName(e){var n=mac$1&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ie$2&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",l=!n&&e.key||(e.shiftKey?shift$3:base$2)[e.keyCode]||e.key||"Unidentified";return l=="Esc"&&(l="Escape"),l=="Del"&&(l="Delete"),l=="Left"&&(l="ArrowLeft"),l=="Up"&&(l="ArrowUp"),l=="Right"&&(l="ArrowRight"),l=="Down"&&(l="ArrowDown"),l}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(e){let n=e.split(/-(?!$)/),l=n[n.length-1];l=="Space"&&(l=" ");let d,g,jn,Un;for(let zn=0;zn<n.length-1;zn++){let qn=n[zn];if(/^(cmd|meta|m)$/i.test(qn))Un=!0;else if(/^a(lt)?$/i.test(qn))d=!0;else if(/^(c|ctrl|control)$/i.test(qn))g=!0;else if(/^s(hift)?$/i.test(qn))jn=!0;else if(/^mod$/i.test(qn))mac?Un=!0:g=!0;else throw new Error("Unrecognized modifier name: "+qn)}return d&&(l="Alt-"+l),g&&(l="Ctrl-"+l),Un&&(l="Meta-"+l),jn&&(l="Shift-"+l),l}function normalize$2(e){let n=Object.create(null);for(let l in e)n[normalizeKeyName$1(l)]=e[l];return n}function modifiers(e,n,l=!0){return n.altKey&&(e="Alt-"+e),n.ctrlKey&&(e="Ctrl-"+e),n.metaKey&&(e="Meta-"+e),l&&n.shiftKey&&(e="Shift-"+e),e}function keymap(e){return new Plugin({props:{handleKeyDown:keydownHandler(e)}})}function keydownHandler(e){let n=normalize$2(e);return function(l,d){let g=keyName(d),jn,Un=n[modifiers(g,d)];if(Un&&Un(l.state,l.dispatch,l))return!0;if(g.length==1&&g!=" "){if(d.shiftKey){let zn=n[modifiers(g,d,!1)];if(zn&&zn(l.state,l.dispatch,l))return!0}if((d.altKey||d.metaKey||d.ctrlKey)&&!(windows&&d.ctrlKey&&d.altKey)&&(jn=base$2[d.keyCode])&&jn!=g){let zn=n[modifiers(jn,d)];if(zn&&zn(l.state,l.dispatch,l))return!0}}return!1}}var __defProp=Object.defineProperty,__export=(e,n)=>{for(var l in n)__defProp(e,l,{get:n[l],enumerable:!0})};function createChainableState(e){const{state:n,transaction:l}=e;let{selection:d}=l,{doc:g}=l,{storedMarks:jn}=l;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return jn},get selection(){return d},get doc(){return g},get tr(){return d=l.selection,g=l.doc,jn=l.storedMarks,l}}}var CommandManager=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:l}=this,{view:d}=n,{tr:g}=l,jn=this.buildProps(g);return Object.fromEntries(Object.entries(e).map(([Un,zn])=>[Un,(...Kn)=>{const Xn=zn(...Kn)(jn);return!g.getMeta("preventDispatch")&&!this.hasCustomState&&d.dispatch(g),Xn}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:l,editor:d,state:g}=this,{view:jn}=d,Un=[],zn=!!e,qn=e||g.tr,Kn=()=>(!zn&&n&&!qn.getMeta("preventDispatch")&&!this.hasCustomState&&jn.dispatch(qn),Un.every(Qn=>Qn===!0)),Xn={...Object.fromEntries(Object.entries(l).map(([Qn,Jn])=>[Qn,(...Ri)=>{const Ni=this.buildProps(qn,n),$i=Jn(...Ri)(Ni);return Un.push($i),Xn}])),run:Kn};return Xn}createCan(e){const{rawCommands:n,state:l}=this,d=!1,g=e||l.tr,jn=this.buildProps(g,d);return{...Object.fromEntries(Object.entries(n).map(([zn,qn])=>[zn,(...Kn)=>qn(...Kn)({...jn,dispatch:void 0})])),chain:()=>this.createChain(g,d)}}buildProps(e,n=!0){const{rawCommands:l,editor:d,state:g}=this,{view:jn}=d,Un={tr:e,editor:d,view:jn,state:createChainableState({state:g,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(l).map(([zn,qn])=>[zn,(...Kn)=>qn(...Kn)(Un)]))}};return Un}},commands_exports={};__export(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach$1,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta$1,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextDirection:()=>setTextDirection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,unsetTextDirection:()=>unsetTextDirection,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:e,view:n})=>(requestAnimationFrame(()=>{var l;e.isDestroyed||(n.dom.blur(),(l=window?.getSelection())==null||l.removeAllRanges())}),!0),clearContent=(e=!0)=>({commands:n})=>n.setContent("",{emitUpdate:e}),clearNodes=()=>({state:e,tr:n,dispatch:l})=>{const{selection:d}=n,{ranges:g}=d;return l&&g.forEach(({$from:jn,$to:Un})=>{e.doc.nodesBetween(jn.pos,Un.pos,(zn,qn)=>{if(zn.type.isText)return;const{doc:Kn,mapping:Xn}=n,Qn=Kn.resolve(Xn.map(qn)),Jn=Kn.resolve(Xn.map(qn+zn.nodeSize)),Ai=Qn.blockRange(Jn);if(!Ai)return;const Ri=liftTarget(Ai);if(zn.type.isTextblock){const{defaultType:Ni}=Qn.parent.contentMatchAt(Qn.index());n.setNodeMarkup(Ai.start,Ni)}(Ri||Ri===0)&&n.lift(Ai,Ri)})}),!0},command=e=>n=>e(n),createParagraphNear=()=>({state:e,dispatch:n})=>createParagraphNear$1(e,n),cut=(e,n)=>({editor:l,tr:d})=>{const{state:g}=l,jn=g.doc.slice(e.from,e.to);d.deleteRange(e.from,e.to);const Un=d.mapping.map(n);return d.insert(Un,jn.content),d.setSelection(new TextSelection(d.doc.resolve(Math.max(Un-1,0)))),!0},deleteCurrentNode=()=>({tr:e,dispatch:n})=>{const{selection:l}=e,d=l.$anchor.node();if(d.content.size>0)return!1;const g=e.selection.$anchor;for(let jn=g.depth;jn>0;jn-=1)if(g.node(jn).type===d.type){if(n){const zn=g.before(jn),qn=g.after(jn);e.delete(zn,qn).scrollIntoView()}return!0}return!1};function getNodeType(e,n){if(typeof e=="string"){if(!n.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return n.nodes[e]}return e}var deleteNode=e=>({tr:n,state:l,dispatch:d})=>{const g=getNodeType(e,l.schema),jn=n.selection.$anchor;for(let Un=jn.depth;Un>0;Un-=1)if(jn.node(Un).type===g){if(d){const qn=jn.before(Un),Kn=jn.after(Un);n.delete(qn,Kn).scrollIntoView()}return!0}return!1},deleteRange=e=>({tr:n,dispatch:l})=>{const{from:d,to:g}=e;return l&&n.delete(d,g),!0},deleteSelection=()=>({state:e,dispatch:n})=>deleteSelection$1(e,n),enter=()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode=()=>({state:e,dispatch:n})=>exitCode$1(e,n);function isRegExp(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function objectIncludes(e,n,l={strict:!0}){const d=Object.keys(n);return d.length?d.every(g=>l.strict?n[g]===e[g]:isRegExp(n[g])?n[g].test(e[g]):n[g]===e[g]):!0}function findMarkInSet(e,n,l={}){return e.find(d=>d.type===n&&objectIncludes(Object.fromEntries(Object.keys(l).map(g=>[g,d.attrs[g]])),l))}function isMarkInSet(e,n,l={}){return!!findMarkInSet(e,n,l)}function getMarkRange(e,n,l){var d;if(!e||!n)return;let g=e.parent.childAfter(e.parentOffset);if((!g.node||!g.node.marks.some(Xn=>Xn.type===n))&&(g=e.parent.childBefore(e.parentOffset)),!g.node||!g.node.marks.some(Xn=>Xn.type===n)||(l=l||((d=g.node.marks[0])==null?void 0:d.attrs),!findMarkInSet([...g.node.marks],n,l)))return;let Un=g.index,zn=e.start()+g.offset,qn=Un+1,Kn=zn+g.node.nodeSize;for(;Un>0&&isMarkInSet([...e.parent.child(Un-1).marks],n,l);)Un-=1,zn-=e.parent.child(Un).nodeSize;for(;qn<e.parent.childCount&&isMarkInSet([...e.parent.child(qn).marks],n,l);)Kn+=e.parent.child(qn).nodeSize,qn+=1;return{from:zn,to:Kn}}function getMarkType(e,n){if(typeof e=="string"){if(!n.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return n.marks[e]}return e}var extendMarkRange=(e,n={})=>({tr:l,state:d,dispatch:g})=>{const jn=getMarkType(e,d.schema),{doc:Un,selection:zn}=l,{$from:qn,from:Kn,to:Xn}=zn;if(g){const Qn=getMarkRange(qn,jn,n);if(Qn&&Qn.from<=Kn&&Qn.to>=Xn){const Jn=TextSelection.create(Un,Qn.from,Qn.to);l.setSelection(Jn)}}return!0},first=e=>n=>{const l=typeof e=="function"?e(n):e;for(let d=0;d<l.length;d+=1)if(l[d](n))return!0;return!1};function isTextSelection(e){return e instanceof TextSelection}function minMax(e=0,n=0,l=0){return Math.min(Math.max(e,n),l)}function resolveFocusPosition(e,n=null){if(!n)return null;const l=Selection.atStart(e),d=Selection.atEnd(e);if(n==="start"||n===!0)return l;if(n==="end")return d;const g=l.from,jn=d.to;return n==="all"?TextSelection.create(e,minMax(0,g,jn),minMax(e.content.size,g,jn)):TextSelection.create(e,minMax(n,g,jn),minMax(n,g,jn))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(e=null,n={})=>({editor:l,view:d,tr:g,dispatch:jn})=>{n={scrollIntoView:!0,...n};const Un=()=>{(isiOS()||isAndroid())&&d.dom.focus(),requestAnimationFrame(()=>{l.isDestroyed||(d.focus(),n?.scrollIntoView&&l.commands.scrollIntoView())})};if(d.hasFocus()&&e===null||e===!1)return!0;if(jn&&e===null&&!isTextSelection(l.state.selection))return Un(),!0;const zn=resolveFocusPosition(g.doc,e)||l.state.selection,qn=l.state.selection.eq(zn);return jn&&(qn||g.setSelection(zn),qn&&g.storedMarks&&g.setStoredMarks(g.storedMarks),Un()),!0},forEach$1=(e,n)=>l=>e.every((d,g)=>n(d,{...l,index:g})),insertContent=(e,n)=>({tr:l,commands:d})=>d.insertContentAt({from:l.selection.from,to:l.selection.to},e,n),removeWhitespaces=e=>{const n=e.childNodes;for(let l=n.length-1;l>=0;l-=1){const d=n[l];d.nodeType===3&&d.nodeValue&&/^(\n\s\s|\n)$/.test(d.nodeValue)?e.removeChild(d):d.nodeType===1&&removeWhitespaces(d)}return e};function elementFromString(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const n=`<body>${e}</body>`,l=new window.DOMParser().parseFromString(n,"text/html").body;return removeWhitespaces(l)}function createNodeFromContent(e,n,l){if(e instanceof Node$1||e instanceof Fragment)return e;l={slice:!0,parseOptions:{},...l};const d=typeof e=="object"&&e!==null,g=typeof e=="string";if(d)try{if(Array.isArray(e)&&e.length>0)return Fragment.fromArray(e.map(zn=>n.nodeFromJSON(zn)));const Un=n.nodeFromJSON(e);return l.errorOnInvalidContent&&Un.check(),Un}catch(jn){if(l.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:jn});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",jn),createNodeFromContent("",n,l)}if(g){if(l.errorOnInvalidContent){let Un=!1,zn="";const qn=new Schema$2({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:Kn=>(Un=!0,zn=typeof Kn=="string"?Kn:Kn.outerHTML,null)}]}})});if(l.slice?DOMParser$1.fromSchema(qn).parseSlice(elementFromString(e),l.parseOptions):DOMParser$1.fromSchema(qn).parse(elementFromString(e),l.parseOptions),l.errorOnInvalidContent&&Un)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${zn}`)})}const jn=DOMParser$1.fromSchema(n);return l.slice?jn.parseSlice(elementFromString(e),l.parseOptions).content:jn.parse(elementFromString(e),l.parseOptions)}return createNodeFromContent("",n,l)}function selectionToInsertionEnd(e,n,l){const d=e.steps.length-1;if(d<n)return;const g=e.steps[d];if(!(g instanceof ReplaceStep||g instanceof ReplaceAroundStep))return;const jn=e.mapping.maps[d];let Un=0;jn.forEach((zn,qn,Kn,Xn)=>{Un===0&&(Un=Xn)}),e.setSelection(Selection.near(e.doc.resolve(Un),l))}var isFragment=e=>!("type"in e),insertContentAt=(e,n,l)=>({tr:d,dispatch:g,editor:jn})=>{var Un;if(g){l={parseOptions:jn.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...l};let zn;const qn=$i=>{jn.emit("contentError",{editor:jn,error:$i,disableCollaboration:()=>{"collaboration"in jn.storage&&typeof jn.storage.collaboration=="object"&&jn.storage.collaboration&&(jn.storage.collaboration.isDisabled=!0)}})},Kn={preserveWhitespace:"full",...l.parseOptions};if(!l.errorOnInvalidContent&&!jn.options.enableContentCheck&&jn.options.emitContentError)try{createNodeFromContent(n,jn.schema,{parseOptions:Kn,errorOnInvalidContent:!0})}catch($i){qn($i)}try{zn=createNodeFromContent(n,jn.schema,{parseOptions:Kn,errorOnInvalidContent:(Un=l.errorOnInvalidContent)!=null?Un:jn.options.enableContentCheck})}catch($i){return qn($i),!1}let{from:Xn,to:Qn}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},Jn=!0,Ai=!0;if((isFragment(zn)?zn:[zn]).forEach($i=>{$i.check(),Jn=Jn?$i.isText&&$i.marks.length===0:!1,Ai=Ai?$i.isBlock:!1}),Xn===Qn&&Ai){const{parent:$i}=d.doc.resolve(Xn);$i.isTextblock&&!$i.type.spec.code&&!$i.childCount&&(Xn-=1,Qn+=1)}let Ni;if(Jn){if(Array.isArray(n))Ni=n.map($i=>$i.text||"").join("");else if(n instanceof Fragment){let $i="";n.forEach(Li=>{Li.text&&($i+=Li.text)}),Ni=$i}else typeof n=="object"&&n&&n.text?Ni=n.text:Ni=n;d.insertText(Ni,Xn,Qn)}else{Ni=zn;const $i=d.doc.resolve(Xn),Li=$i.node(),ji=$i.parentOffset===0,Fi=Li.isText||Li.isTextblock,qi=Li.content.size>0;ji&&Fi&&qi&&(Xn=Math.max(0,Xn-1)),d.replaceWith(Xn,Qn,Ni)}l.updateSelection&&selectionToInsertionEnd(d,d.steps.length-1,-1),l.applyInputRules&&d.setMeta("applyInputRules",{from:Xn,text:Ni}),l.applyPasteRules&&d.setMeta("applyPasteRules",{from:Xn,text:Ni})}return!0},joinUp=()=>({state:e,dispatch:n})=>joinUp$1(e,n),joinDown=()=>({state:e,dispatch:n})=>joinDown$1(e,n),joinBackward=()=>({state:e,dispatch:n})=>joinBackward$1(e,n),joinForward=()=>({state:e,dispatch:n})=>joinForward$1(e,n),joinItemBackward=()=>({state:e,dispatch:n,tr:l})=>{try{const d=joinPoint(e.doc,e.selection.$from.pos,-1);return d==null?!1:(l.join(d,2),n&&n(l),!0)}catch{return!1}},joinItemForward=()=>({state:e,dispatch:n,tr:l})=>{try{const d=joinPoint(e.doc,e.selection.$from.pos,1);return d==null?!1:(l.join(d,2),n&&n(l),!0)}catch{return!1}},joinTextblockBackward=()=>({state:e,dispatch:n})=>joinTextblockBackward$1(e,n),joinTextblockForward=()=>({state:e,dispatch:n})=>joinTextblockForward$1(e,n);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(e){const n=e.split(/-(?!$)/);let l=n[n.length-1];l==="Space"&&(l=" ");let d,g,jn,Un;for(let zn=0;zn<n.length-1;zn+=1){const qn=n[zn];if(/^(cmd|meta|m)$/i.test(qn))Un=!0;else if(/^a(lt)?$/i.test(qn))d=!0;else if(/^(c|ctrl|control)$/i.test(qn))g=!0;else if(/^s(hift)?$/i.test(qn))jn=!0;else if(/^mod$/i.test(qn))isiOS()||isMacOS()?Un=!0:g=!0;else throw new Error(`Unrecognized modifier name: ${qn}`)}return d&&(l=`Alt-${l}`),g&&(l=`Ctrl-${l}`),Un&&(l=`Meta-${l}`),jn&&(l=`Shift-${l}`),l}var keyboardShortcut=e=>({editor:n,view:l,tr:d,dispatch:g})=>{const jn=normalizeKeyName(e).split(/-(?!$)/),Un=jn.find(Kn=>!["Alt","Ctrl","Meta","Shift"].includes(Kn)),zn=new KeyboardEvent("keydown",{key:Un==="Space"?" ":Un,altKey:jn.includes("Alt"),ctrlKey:jn.includes("Ctrl"),metaKey:jn.includes("Meta"),shiftKey:jn.includes("Shift"),bubbles:!0,cancelable:!0}),qn=n.captureTransaction(()=>{l.someProp("handleKeyDown",Kn=>Kn(l,zn))});return qn?.steps.forEach(Kn=>{const Xn=Kn.map(d.mapping);Xn&&g&&d.maybeStep(Xn)}),!0};function isNodeActive(e,n,l={}){const{from:d,to:g,empty:jn}=e.selection,Un=n?getNodeType(n,e.schema):null,zn=[];e.doc.nodesBetween(d,g,(Qn,Jn)=>{if(Qn.isText)return;const Ai=Math.max(d,Jn),Ri=Math.min(g,Jn+Qn.nodeSize);zn.push({node:Qn,from:Ai,to:Ri})});const qn=g-d,Kn=zn.filter(Qn=>Un?Un.name===Qn.node.type.name:!0).filter(Qn=>objectIncludes(Qn.node.attrs,l,{strict:!1}));return jn?!!Kn.length:Kn.reduce((Qn,Jn)=>Qn+Jn.to-Jn.from,0)>=qn}var lift=(e,n={})=>({state:l,dispatch:d})=>{const g=getNodeType(e,l.schema);return isNodeActive(l,g,n)?lift$1(l,d):!1},liftEmptyBlock=()=>({state:e,dispatch:n})=>liftEmptyBlock$1(e,n),liftListItem=e=>({state:n,dispatch:l})=>{const d=getNodeType(e,n.schema);return liftListItem$1(d)(n,l)},newlineInCode=()=>({state:e,dispatch:n})=>newlineInCode$1(e,n);function getSchemaTypeNameByName(e,n){return n.nodes[e]?"node":n.marks[e]?"mark":null}function deleteProps(e,n){const l=typeof n=="string"?[n]:n;return Object.keys(e).reduce((d,g)=>(l.includes(g)||(d[g]=e[g]),d),{})}var resetAttributes=(e,n)=>({tr:l,state:d,dispatch:g})=>{let jn=null,Un=null;const zn=getSchemaTypeNameByName(typeof e=="string"?e:e.name,d.schema);if(!zn)return!1;zn==="node"&&(jn=getNodeType(e,d.schema)),zn==="mark"&&(Un=getMarkType(e,d.schema));let qn=!1;return l.selection.ranges.forEach(Kn=>{d.doc.nodesBetween(Kn.$from.pos,Kn.$to.pos,(Xn,Qn)=>{jn&&jn===Xn.type&&(qn=!0,g&&l.setNodeMarkup(Qn,void 0,deleteProps(Xn.attrs,n))),Un&&Xn.marks.length&&Xn.marks.forEach(Jn=>{Un===Jn.type&&(qn=!0,g&&l.addMark(Qn,Qn+Xn.nodeSize,Un.create(deleteProps(Jn.attrs,n))))})})}),qn},scrollIntoView=()=>({tr:e,dispatch:n})=>(n&&e.scrollIntoView(),!0),selectAll=()=>({tr:e,dispatch:n})=>{if(n){const l=new AllSelection(e.doc);e.setSelection(l)}return!0},selectNodeBackward=()=>({state:e,dispatch:n})=>selectNodeBackward$1(e,n),selectNodeForward=()=>({state:e,dispatch:n})=>selectNodeForward$1(e,n),selectParentNode=()=>({state:e,dispatch:n})=>selectParentNode$1(e,n),selectTextblockEnd=()=>({state:e,dispatch:n})=>selectTextblockEnd$1(e,n),selectTextblockStart=()=>({state:e,dispatch:n})=>selectTextblockStart$1(e,n);function createDocument(e,n,l={},d={}){return createNodeFromContent(e,n,{slice:!1,parseOptions:l,errorOnInvalidContent:d.errorOnInvalidContent})}var setContent=(e,{errorOnInvalidContent:n,emitUpdate:l=!0,parseOptions:d={}}={})=>({editor:g,tr:jn,dispatch:Un,commands:zn})=>{const{doc:qn}=jn;if(d.preserveWhitespace!=="full"){const Kn=createDocument(e,g.schema,d,{errorOnInvalidContent:n??g.options.enableContentCheck});return Un&&jn.replaceWith(0,qn.content.size,Kn).setMeta("preventUpdate",!l),!0}return Un&&jn.setMeta("preventUpdate",!l),zn.insertContentAt({from:0,to:qn.content.size},e,{parseOptions:d,errorOnInvalidContent:n??g.options.enableContentCheck})};function getMarkAttributes(e,n){const l=getMarkType(n,e.schema),{from:d,to:g,empty:jn}=e.selection,Un=[];jn?(e.storedMarks&&Un.push(...e.storedMarks),Un.push(...e.selection.$head.marks())):e.doc.nodesBetween(d,g,qn=>{Un.push(...qn.marks)});const zn=Un.find(qn=>qn.type.name===l.name);return zn?{...zn.attrs}:{}}function combineTransactionSteps(e,n){const l=new Transform(e);return n.forEach(d=>{d.steps.forEach(g=>{l.step(g)})}),l}function defaultBlockAt(e){for(let n=0;n<e.edgeCount;n+=1){const{type:l}=e.edge(n);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}function findChildren(e,n){const l=[];return e.descendants((d,g)=>{n(d)&&l.push({node:d,pos:g})}),l}function findChildrenInRange(e,n,l){const d=[];return e.nodesBetween(n.from,n.to,(g,jn)=>{l(g)&&d.push({node:g,pos:jn})}),d}function findParentNodeClosestToPos(e,n){for(let l=e.depth;l>0;l-=1){const d=e.node(l);if(n(d))return{pos:l>0?e.before(l):0,start:e.start(l),depth:l,node:d}}}function findParentNode(e){return n=>findParentNodeClosestToPos(n.$from,e)}function getExtensionField(e,n,l){return e.config[n]===void 0&&e.parent?getExtensionField(e.parent,n,l):typeof e.config[n]=="function"?e.config[n].bind({...l,parent:e.parent?getExtensionField(e.parent,n,l):null}):e.config[n]}function flattenExtensions(e){return e.map(n=>{const l={name:n.name,options:n.options,storage:n.storage},d=getExtensionField(n,"addExtensions",l);return d?[n,...flattenExtensions(d())]:n}).flat(10)}function getHTMLFromFragment(e,n){const l=DOMSerializer.fromSchema(n).serializeFragment(e),g=document.implementation.createHTMLDocument().createElement("div");return g.appendChild(l),g.innerHTML}function isFunction(e){return typeof e=="function"}function callOrReturn(e,n=void 0,...l){return isFunction(e)?n?e.bind(n)(...l):e(...l):e}function isEmptyObject(e={}){return Object.keys(e).length===0&&e.constructor===Object}function splitExtensions(e){const n=e.filter(g=>g.type==="extension"),l=e.filter(g=>g.type==="node"),d=e.filter(g=>g.type==="mark");return{baseExtensions:n,nodeExtensions:l,markExtensions:d}}function getAttributesFromExtensions(e){const n=[],{nodeExtensions:l,markExtensions:d}=splitExtensions(e),g=[...l,...d],jn={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(Un=>{const zn={name:Un.name,options:Un.options,storage:Un.storage,extensions:g},qn=getExtensionField(Un,"addGlobalAttributes",zn);if(!qn)return;qn().forEach(Xn=>{Xn.types.forEach(Qn=>{Object.entries(Xn.attributes).forEach(([Jn,Ai])=>{n.push({type:Qn,name:Jn,attribute:{...jn,...Ai}})})})})}),g.forEach(Un=>{const zn={name:Un.name,options:Un.options,storage:Un.storage},qn=getExtensionField(Un,"addAttributes",zn);if(!qn)return;const Kn=qn();Object.entries(Kn).forEach(([Xn,Qn])=>{const Jn={...jn,...Qn};typeof Jn?.default=="function"&&(Jn.default=Jn.default()),Jn?.isRequired&&Jn?.default===void 0&&delete Jn.default,n.push({type:Un.name,name:Xn,attribute:Jn})})}),n}function mergeAttributes(...e){return e.filter(n=>!!n).reduce((n,l)=>{const d={...n};return Object.entries(l).forEach(([g,jn])=>{if(!d[g]){d[g]=jn;return}if(g==="class"){const zn=jn?String(jn).split(" "):[],qn=d[g]?d[g].split(" "):[],Kn=zn.filter(Xn=>!qn.includes(Xn));d[g]=[...qn,...Kn].join(" ")}else if(g==="style"){const zn=jn?jn.split(";").map(Xn=>Xn.trim()).filter(Boolean):[],qn=d[g]?d[g].split(";").map(Xn=>Xn.trim()).filter(Boolean):[],Kn=new Map;qn.forEach(Xn=>{const[Qn,Jn]=Xn.split(":").map(Ai=>Ai.trim());Kn.set(Qn,Jn)}),zn.forEach(Xn=>{const[Qn,Jn]=Xn.split(":").map(Ai=>Ai.trim());Kn.set(Qn,Jn)}),d[g]=Array.from(Kn.entries()).map(([Xn,Qn])=>`${Xn}: ${Qn}`).join("; ")}else d[g]=jn}),d},{})}function getRenderedAttributes(e,n){return n.filter(l=>l.type===e.type.name).filter(l=>l.attribute.rendered).map(l=>l.attribute.renderHTML?l.attribute.renderHTML(e.attrs)||{}:{[l.name]:e.attrs[l.name]}).reduce((l,d)=>mergeAttributes(l,d),{})}function fromString(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function injectExtensionAttributesToParseRule(e,n){return"style"in e?e:{...e,getAttrs:l=>{const d=e.getAttrs?e.getAttrs(l):e.attrs;if(d===!1)return!1;const g=n.reduce((jn,Un)=>{const zn=Un.attribute.parseHTML?Un.attribute.parseHTML(l):fromString(l.getAttribute(Un.name));return zn==null?jn:{...jn,[Un.name]:zn}},{});return{...d,...g}}}}function cleanUpSchemaItem(e){return Object.fromEntries(Object.entries(e).filter(([n,l])=>n==="attrs"&&isEmptyObject(l)?!1:l!=null))}function buildAttributeSpec(e){var n,l;const d={};return!((n=e?.attribute)!=null&&n.isRequired)&&"default"in(e?.attribute||{})&&(d.default=e.attribute.default),((l=e?.attribute)==null?void 0:l.validate)!==void 0&&(d.validate=e.attribute.validate),[e.name,d]}function getSchemaByResolvedExtensions(e,n){var l;const d=getAttributesFromExtensions(e),{nodeExtensions:g,markExtensions:jn}=splitExtensions(e),Un=(l=g.find(Kn=>getExtensionField(Kn,"topNode")))==null?void 0:l.name,zn=Object.fromEntries(g.map(Kn=>{const Xn=d.filter(Li=>Li.type===Kn.name),Qn={name:Kn.name,options:Kn.options,storage:Kn.storage,editor:n},Jn=e.reduce((Li,ji)=>{const Fi=getExtensionField(ji,"extendNodeSchema",Qn);return{...Li,...Fi?Fi(Kn):{}}},{}),Ai=cleanUpSchemaItem({...Jn,content:callOrReturn(getExtensionField(Kn,"content",Qn)),marks:callOrReturn(getExtensionField(Kn,"marks",Qn)),group:callOrReturn(getExtensionField(Kn,"group",Qn)),inline:callOrReturn(getExtensionField(Kn,"inline",Qn)),atom:callOrReturn(getExtensionField(Kn,"atom",Qn)),selectable:callOrReturn(getExtensionField(Kn,"selectable",Qn)),draggable:callOrReturn(getExtensionField(Kn,"draggable",Qn)),code:callOrReturn(getExtensionField(Kn,"code",Qn)),whitespace:callOrReturn(getExtensionField(Kn,"whitespace",Qn)),linebreakReplacement:callOrReturn(getExtensionField(Kn,"linebreakReplacement",Qn)),defining:callOrReturn(getExtensionField(Kn,"defining",Qn)),isolating:callOrReturn(getExtensionField(Kn,"isolating",Qn)),attrs:Object.fromEntries(Xn.map(buildAttributeSpec))}),Ri=callOrReturn(getExtensionField(Kn,"parseHTML",Qn));Ri&&(Ai.parseDOM=Ri.map(Li=>injectExtensionAttributesToParseRule(Li,Xn)));const Ni=getExtensionField(Kn,"renderHTML",Qn);Ni&&(Ai.toDOM=Li=>Ni({node:Li,HTMLAttributes:getRenderedAttributes(Li,Xn)}));const $i=getExtensionField(Kn,"renderText",Qn);return $i&&(Ai.toText=$i),[Kn.name,Ai]})),qn=Object.fromEntries(jn.map(Kn=>{const Xn=d.filter($i=>$i.type===Kn.name),Qn={name:Kn.name,options:Kn.options,storage:Kn.storage,editor:n},Jn=e.reduce(($i,Li)=>{const ji=getExtensionField(Li,"extendMarkSchema",Qn);return{...$i,...ji?ji(Kn):{}}},{}),Ai=cleanUpSchemaItem({...Jn,inclusive:callOrReturn(getExtensionField(Kn,"inclusive",Qn)),excludes:callOrReturn(getExtensionField(Kn,"excludes",Qn)),group:callOrReturn(getExtensionField(Kn,"group",Qn)),spanning:callOrReturn(getExtensionField(Kn,"spanning",Qn)),code:callOrReturn(getExtensionField(Kn,"code",Qn)),attrs:Object.fromEntries(Xn.map(buildAttributeSpec))}),Ri=callOrReturn(getExtensionField(Kn,"parseHTML",Qn));Ri&&(Ai.parseDOM=Ri.map($i=>injectExtensionAttributesToParseRule($i,Xn)));const Ni=getExtensionField(Kn,"renderHTML",Qn);return Ni&&(Ai.toDOM=$i=>Ni({mark:$i,HTMLAttributes:getRenderedAttributes($i,Xn)})),[Kn.name,Ai]}));return new Schema$2({topNode:Un,nodes:zn,marks:qn})}function findDuplicates(e){const n=e.filter((l,d)=>e.indexOf(l)!==d);return Array.from(new Set(n))}function sortExtensions(e){return e.sort((l,d)=>{const g=getExtensionField(l,"priority")||100,jn=getExtensionField(d,"priority")||100;return g>jn?-1:g<jn?1:0})}function resolveExtensions(e){const n=sortExtensions(flattenExtensions(e)),l=findDuplicates(n.map(d=>d.name));return l.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${l.map(d=>`'${d}'`).join(", ")}]. This can lead to issues.`),n}function getSchema(e,n){const l=resolveExtensions(e);return getSchemaByResolvedExtensions(l,n)}function getTextBetween(e,n,l){const{from:d,to:g}=n,{blockSeparator:jn=`

`,textSerializers:Un={}}=l||{};let zn="";return e.nodesBetween(d,g,(qn,Kn,Xn,Qn)=>{var Jn;qn.isBlock&&Kn>d&&(zn+=jn);const Ai=Un?.[qn.type.name];if(Ai)return Xn&&(zn+=Ai({node:qn,pos:Kn,parent:Xn,index:Qn,range:n})),!1;qn.isText&&(zn+=(Jn=qn?.text)==null?void 0:Jn.slice(Math.max(d,Kn)-Kn,g-Kn))}),zn}function getText(e,n){const l={from:0,to:e.content.size};return getTextBetween(e,l,n)}function getTextSerializersFromSchema(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,n])=>n.spec.toText).map(([n,l])=>[n,l.spec.toText]))}function getNodeAttributes(e,n){const l=getNodeType(n,e.schema),{from:d,to:g}=e.selection,jn=[];e.doc.nodesBetween(d,g,zn=>{jn.push(zn)});const Un=jn.reverse().find(zn=>zn.type.name===l.name);return Un?{...Un.attrs}:{}}function getAttributes(e,n){const l=getSchemaTypeNameByName(typeof n=="string"?n:n.name,e.schema);return l==="node"?getNodeAttributes(e,n):l==="mark"?getMarkAttributes(e,n):{}}function removeDuplicates(e,n=JSON.stringify){const l={};return e.filter(d=>{const g=n(d);return Object.prototype.hasOwnProperty.call(l,g)?!1:l[g]=!0})}function simplifyChangedRanges(e){const n=removeDuplicates(e);return n.length===1?n:n.filter((l,d)=>!n.filter((jn,Un)=>Un!==d).some(jn=>l.oldRange.from>=jn.oldRange.from&&l.oldRange.to<=jn.oldRange.to&&l.newRange.from>=jn.newRange.from&&l.newRange.to<=jn.newRange.to))}function getChangedRanges(e){const{mapping:n,steps:l}=e,d=[];return n.maps.forEach((g,jn)=>{const Un=[];if(g.ranges.length)g.forEach((zn,qn)=>{Un.push({from:zn,to:qn})});else{const{from:zn,to:qn}=l[jn];if(zn===void 0||qn===void 0)return;Un.push({from:zn,to:qn})}Un.forEach(({from:zn,to:qn})=>{const Kn=n.slice(jn).map(zn,-1),Xn=n.slice(jn).map(qn),Qn=n.invert().map(Kn,-1),Jn=n.invert().map(Xn);d.push({oldRange:{from:Qn,to:Jn},newRange:{from:Kn,to:Xn}})})}),simplifyChangedRanges(d)}function getMarksBetween(e,n,l){const d=[];return e===n?l.resolve(e).marks().forEach(g=>{const jn=l.resolve(e),Un=getMarkRange(jn,g.type);Un&&d.push({mark:g,...Un})}):l.nodesBetween(e,n,(g,jn)=>{!g||g?.nodeSize===void 0||d.push(...g.marks.map(Un=>({from:jn,to:jn+g.nodeSize,mark:Un})))}),d}function getSchemaTypeByName(e,n){return n.nodes[e]||n.marks[e]||null}function getSplittedAttributes(e,n,l){return Object.fromEntries(Object.entries(l).filter(([d])=>{const g=e.find(jn=>jn.type===n&&jn.name===d);return g?g.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(e,n=500)=>{let l="";const d=e.parentOffset;return e.parent.nodesBetween(Math.max(0,d-n),d,(g,jn,Un,zn)=>{var qn,Kn;const Xn=((Kn=(qn=g.type.spec).toText)==null?void 0:Kn.call(qn,{node:g,pos:jn,parent:Un,index:zn}))||g.textContent||"%leaf%";l+=g.isAtom&&!g.isText?Xn:Xn.slice(0,Math.max(0,d-jn))}),l};function isMarkActive(e,n,l={}){const{empty:d,ranges:g}=e.selection,jn=n?getMarkType(n,e.schema):null;if(d)return!!(e.storedMarks||e.selection.$from.marks()).filter(Qn=>jn?jn.name===Qn.type.name:!0).find(Qn=>objectIncludes(Qn.attrs,l,{strict:!1}));let Un=0;const zn=[];if(g.forEach(({$from:Qn,$to:Jn})=>{const Ai=Qn.pos,Ri=Jn.pos;e.doc.nodesBetween(Ai,Ri,(Ni,$i)=>{if(!Ni.isText&&!Ni.marks.length)return;const Li=Math.max(Ai,$i),ji=Math.min(Ri,$i+Ni.nodeSize),Fi=ji-Li;Un+=Fi,zn.push(...Ni.marks.map(qi=>({mark:qi,from:Li,to:ji})))})}),Un===0)return!1;const qn=zn.filter(Qn=>jn?jn.name===Qn.mark.type.name:!0).filter(Qn=>objectIncludes(Qn.mark.attrs,l,{strict:!1})).reduce((Qn,Jn)=>Qn+Jn.to-Jn.from,0),Kn=zn.filter(Qn=>jn?Qn.mark.type!==jn&&Qn.mark.type.excludes(jn):!0).reduce((Qn,Jn)=>Qn+Jn.to-Jn.from,0);return(qn>0?qn+Kn:qn)>=Un}function isActive(e,n,l={}){if(!n)return isNodeActive(e,null,l)||isMarkActive(e,null,l);const d=getSchemaTypeNameByName(n,e.schema);return d==="node"?isNodeActive(e,n,l):d==="mark"?isMarkActive(e,n,l):!1}function isExtensionRulesEnabled(e,n){return Array.isArray(n)?n.some(l=>(typeof l=="string"?l:l.name)===e.name):n}function isList(e,n){const{nodeExtensions:l}=splitExtensions(n),d=l.find(Un=>Un.name===e);if(!d)return!1;const g={name:d.name,options:d.options,storage:d.storage},jn=callOrReturn(getExtensionField(d,"group",g));return typeof jn!="string"?!1:jn.split(" ").includes("list")}function isNodeEmpty(e,{checkChildren:n=!0,ignoreWhitespace:l=!1}={}){var d;if(l){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((d=e.text)!=null?d:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(n){let g=!0;return e.content.forEach(jn=>{g!==!1&&(isNodeEmpty(jn,{ignoreWhitespace:l,checkChildren:n})||(g=!1))}),g}return!1}function isNodeSelection(e){return e instanceof NodeSelection}var MappablePosition=class qT{constructor(n){this.position=n}static fromJSON(n){return new qT(n.position)}toJSON(){return{position:this.position}}};function getUpdatedPosition(e,n){const l=n.mapping.mapResult(e.position);return{position:new MappablePosition(l.pos),mapResult:l}}function createMappablePosition(e){return new MappablePosition(e)}function posToDOMRect(e,n,l){const g=e.state.doc.content.size,jn=minMax(n,0,g),Un=minMax(l,0,g),zn=e.coordsAtPos(jn),qn=e.coordsAtPos(Un,-1),Kn=Math.min(zn.top,qn.top),Xn=Math.max(zn.bottom,qn.bottom),Qn=Math.min(zn.left,qn.left),Jn=Math.max(zn.right,qn.right),Ai=Jn-Qn,Ri=Xn-Kn,Li={top:Kn,bottom:Xn,left:Qn,right:Jn,width:Ai,height:Ri,x:Qn,y:Kn};return{...Li,toJSON:()=>Li}}function canSetMark(e,n,l){var d;const{selection:g}=n;let jn=null;if(isTextSelection(g)&&(jn=g.$cursor),jn){const zn=(d=e.storedMarks)!=null?d:jn.marks();return jn.parent.type.allowsMarkType(l)&&(!!l.isInSet(zn)||!zn.some(Kn=>Kn.type.excludes(l)))}const{ranges:Un}=g;return Un.some(({$from:zn,$to:qn})=>{let Kn=zn.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(l):!1;return e.doc.nodesBetween(zn.pos,qn.pos,(Xn,Qn,Jn)=>{if(Kn)return!1;if(Xn.isInline){const Ai=!Jn||Jn.type.allowsMarkType(l),Ri=!!l.isInSet(Xn.marks)||!Xn.marks.some(Ni=>Ni.type.excludes(l));Kn=Ai&&Ri}return!Kn}),Kn})}var setMark=(e,n={})=>({tr:l,state:d,dispatch:g})=>{const{selection:jn}=l,{empty:Un,ranges:zn}=jn,qn=getMarkType(e,d.schema);if(g)if(Un){const Kn=getMarkAttributes(d,qn);l.addStoredMark(qn.create({...Kn,...n}))}else zn.forEach(Kn=>{const Xn=Kn.$from.pos,Qn=Kn.$to.pos;d.doc.nodesBetween(Xn,Qn,(Jn,Ai)=>{const Ri=Math.max(Ai,Xn),Ni=Math.min(Ai+Jn.nodeSize,Qn);Jn.marks.find(Li=>Li.type===qn)?Jn.marks.forEach(Li=>{qn===Li.type&&l.addMark(Ri,Ni,qn.create({...Li.attrs,...n}))}):l.addMark(Ri,Ni,qn.create(n))})});return canSetMark(d,l,qn)},setMeta$1=(e,n)=>({tr:l})=>(l.setMeta(e,n),!0),setNode=(e,n={})=>({state:l,dispatch:d,chain:g})=>{const jn=getNodeType(e,l.schema);let Un;return l.selection.$anchor.sameParent(l.selection.$head)&&(Un=l.selection.$anchor.parent.attrs),jn.isTextblock?g().command(({commands:zn})=>setBlockType(jn,{...Un,...n})(l)?!0:zn.clearNodes()).command(({state:zn})=>setBlockType(jn,{...Un,...n})(zn,d)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=e=>({tr:n,dispatch:l})=>{if(l){const{doc:d}=n,g=minMax(e,0,d.content.size),jn=NodeSelection.create(d,g);n.setSelection(jn)}return!0},setTextDirection=(e,n)=>({tr:l,state:d,dispatch:g})=>{const{selection:jn}=d;let Un,zn;return typeof n=="number"?(Un=n,zn=n):n&&"from"in n&&"to"in n?(Un=n.from,zn=n.to):(Un=jn.from,zn=jn.to),g&&l.doc.nodesBetween(Un,zn,(qn,Kn)=>{qn.isText||l.setNodeMarkup(Kn,void 0,{...qn.attrs,dir:e})}),!0},setTextSelection=e=>({tr:n,dispatch:l})=>{if(l){const{doc:d}=n,{from:g,to:jn}=typeof e=="number"?{from:e,to:e}:e,Un=TextSelection.atStart(d).from,zn=TextSelection.atEnd(d).to,qn=minMax(g,Un,zn),Kn=minMax(jn,Un,zn),Xn=TextSelection.create(d,qn,Kn);n.setSelection(Xn)}return!0},sinkListItem=e=>({state:n,dispatch:l})=>{const d=getNodeType(e,n.schema);return sinkListItem$1(d)(n,l)};function ensureMarks(e,n){const l=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(l){const d=l.filter(g=>n?.includes(g.type.name));e.tr.ensureMarks(d)}}var splitBlock=({keepMarks:e=!0}={})=>({tr:n,state:l,dispatch:d,editor:g})=>{const{selection:jn,doc:Un}=n,{$from:zn,$to:qn}=jn,Kn=g.extensionManager.attributes,Xn=getSplittedAttributes(Kn,zn.node().type.name,zn.node().attrs);if(jn instanceof NodeSelection&&jn.node.isBlock)return!zn.parentOffset||!canSplit(Un,zn.pos)?!1:(d&&(e&&ensureMarks(l,g.extensionManager.splittableMarks),n.split(zn.pos).scrollIntoView()),!0);if(!zn.parent.isBlock)return!1;const Qn=qn.parentOffset===qn.parent.content.size,Jn=zn.depth===0?void 0:defaultBlockAt(zn.node(-1).contentMatchAt(zn.indexAfter(-1)));let Ai=Qn&&Jn?[{type:Jn,attrs:Xn}]:void 0,Ri=canSplit(n.doc,n.mapping.map(zn.pos),1,Ai);if(!Ai&&!Ri&&canSplit(n.doc,n.mapping.map(zn.pos),1,Jn?[{type:Jn}]:void 0)&&(Ri=!0,Ai=Jn?[{type:Jn,attrs:Xn}]:void 0),d){if(Ri&&(jn instanceof TextSelection&&n.deleteSelection(),n.split(n.mapping.map(zn.pos),1,Ai),Jn&&!Qn&&!zn.parentOffset&&zn.parent.type!==Jn)){const Ni=n.mapping.map(zn.before()),$i=n.doc.resolve(Ni);zn.node(-1).canReplaceWith($i.index(),$i.index()+1,Jn)&&n.setNodeMarkup(n.mapping.map(zn.before()),Jn)}e&&ensureMarks(l,g.extensionManager.splittableMarks),n.scrollIntoView()}return Ri},splitListItem=(e,n={})=>({tr:l,state:d,dispatch:g,editor:jn})=>{var Un;const zn=getNodeType(e,d.schema),{$from:qn,$to:Kn}=d.selection,Xn=d.selection.node;if(Xn&&Xn.isBlock||qn.depth<2||!qn.sameParent(Kn))return!1;const Qn=qn.node(-1);if(Qn.type!==zn)return!1;const Jn=jn.extensionManager.attributes;if(qn.parent.content.size===0&&qn.node(-1).childCount===qn.indexAfter(-1)){if(qn.depth===2||qn.node(-3).type!==zn||qn.index(-2)!==qn.node(-2).childCount-1)return!1;if(g){let Li=Fragment.empty;const ji=qn.index(-1)?1:qn.index(-2)?2:3;for(let as=qn.depth-ji;as>=qn.depth-3;as-=1)Li=Fragment.from(qn.node(as).copy(Li));const Fi=qn.indexAfter(-1)<qn.node(-2).childCount?1:qn.indexAfter(-2)<qn.node(-3).childCount?2:3,qi={...getSplittedAttributes(Jn,qn.node().type.name,qn.node().attrs),...n},zi=((Un=zn.contentMatch.defaultType)==null?void 0:Un.createAndFill(qi))||void 0;Li=Li.append(Fragment.from(zn.createAndFill(null,zi)||void 0));const Gi=qn.before(qn.depth-(ji-1));l.replace(Gi,qn.after(-Fi),new Slice(Li,4-ji,0));let Xi=-1;l.doc.nodesBetween(Gi,l.doc.content.size,(as,ls)=>{if(Xi>-1)return!1;as.isTextblock&&as.content.size===0&&(Xi=ls+1)}),Xi>-1&&l.setSelection(TextSelection.near(l.doc.resolve(Xi))),l.scrollIntoView()}return!0}const Ai=Kn.pos===qn.end()?Qn.contentMatchAt(0).defaultType:null,Ri={...getSplittedAttributes(Jn,Qn.type.name,Qn.attrs),...n},Ni={...getSplittedAttributes(Jn,qn.node().type.name,qn.node().attrs),...n};l.delete(qn.pos,Kn.pos);const $i=Ai?[{type:zn,attrs:Ri},{type:Ai,attrs:Ni}]:[{type:zn,attrs:Ri}];if(!canSplit(l.doc,qn.pos,2))return!1;if(g){const{selection:Li,storedMarks:ji}=d,{splittableMarks:Fi}=jn.extensionManager,qi=ji||Li.$to.parentOffset&&Li.$from.marks();if(l.split(qn.pos,2,$i).scrollIntoView(),!qi||!g)return!0;const zi=qi.filter(Gi=>Fi.includes(Gi.type.name));l.ensureMarks(zi)}return!0},joinListBackwards=(e,n)=>{const l=findParentNode(Un=>Un.type===n)(e.selection);if(!l)return!0;const d=e.doc.resolve(Math.max(0,l.pos-1)).before(l.depth);if(d===void 0)return!0;const g=e.doc.nodeAt(d);return l.node.type===g?.type&&canJoin(e.doc,l.pos)&&e.join(l.pos),!0},joinListForwards=(e,n)=>{const l=findParentNode(Un=>Un.type===n)(e.selection);if(!l)return!0;const d=e.doc.resolve(l.start).after(l.depth);if(d===void 0)return!0;const g=e.doc.nodeAt(d);return l.node.type===g?.type&&canJoin(e.doc,d)&&e.join(d),!0},toggleList=(e,n,l,d={})=>({editor:g,tr:jn,state:Un,dispatch:zn,chain:qn,commands:Kn,can:Xn})=>{const{extensions:Qn,splittableMarks:Jn}=g.extensionManager,Ai=getNodeType(e,Un.schema),Ri=getNodeType(n,Un.schema),{selection:Ni,storedMarks:$i}=Un,{$from:Li,$to:ji}=Ni,Fi=Li.blockRange(ji),qi=$i||Ni.$to.parentOffset&&Ni.$from.marks();if(!Fi)return!1;const zi=findParentNode(Gi=>isList(Gi.type.name,Qn))(Ni);if(Fi.depth>=1&&zi&&Fi.depth-zi.depth<=1){if(zi.node.type===Ai)return Kn.liftListItem(Ri);if(isList(zi.node.type.name,Qn)&&Ai.validContent(zi.node.content)&&zn)return qn().command(()=>(jn.setNodeMarkup(zi.pos,Ai),!0)).command(()=>joinListBackwards(jn,Ai)).command(()=>joinListForwards(jn,Ai)).run()}return!l||!qi||!zn?qn().command(()=>Xn().wrapInList(Ai,d)?!0:Kn.clearNodes()).wrapInList(Ai,d).command(()=>joinListBackwards(jn,Ai)).command(()=>joinListForwards(jn,Ai)).run():qn().command(()=>{const Gi=Xn().wrapInList(Ai,d),Xi=qi.filter(as=>Jn.includes(as.type.name));return jn.ensureMarks(Xi),Gi?!0:Kn.clearNodes()}).wrapInList(Ai,d).command(()=>joinListBackwards(jn,Ai)).command(()=>joinListForwards(jn,Ai)).run()},toggleMark=(e,n={},l={})=>({state:d,commands:g})=>{const{extendEmptyMarkRange:jn=!1}=l,Un=getMarkType(e,d.schema);return isMarkActive(d,Un,n)?g.unsetMark(Un,{extendEmptyMarkRange:jn}):g.setMark(Un,n)},toggleNode=(e,n,l={})=>({state:d,commands:g})=>{const jn=getNodeType(e,d.schema),Un=getNodeType(n,d.schema),zn=isNodeActive(d,jn,l);let qn;return d.selection.$anchor.sameParent(d.selection.$head)&&(qn=d.selection.$anchor.parent.attrs),zn?g.setNode(Un,qn):g.setNode(jn,{...qn,...l})},toggleWrap=(e,n={})=>({state:l,commands:d})=>{const g=getNodeType(e,l.schema);return isNodeActive(l,g,n)?d.lift(g):d.wrapIn(g,n)},undoInputRule=()=>({state:e,dispatch:n})=>{const l=e.plugins;for(let d=0;d<l.length;d+=1){const g=l[d];let jn;if(g.spec.isInputRules&&(jn=g.getState(e))){if(n){const Un=e.tr,zn=jn.transform;for(let qn=zn.steps.length-1;qn>=0;qn-=1)Un.step(zn.steps[qn].invert(zn.docs[qn]));if(jn.text){const qn=Un.doc.resolve(jn.from).marks();Un.replaceWith(jn.from,jn.to,e.schema.text(jn.text,qn))}else Un.delete(jn.from,jn.to)}return!0}}return!1},unsetAllMarks=()=>({tr:e,dispatch:n})=>{const{selection:l}=e,{empty:d,ranges:g}=l;return d||n&&g.forEach(jn=>{e.removeMark(jn.$from.pos,jn.$to.pos)}),!0},unsetMark=(e,n={})=>({tr:l,state:d,dispatch:g})=>{var jn;const{extendEmptyMarkRange:Un=!1}=n,{selection:zn}=l,qn=getMarkType(e,d.schema),{$from:Kn,empty:Xn,ranges:Qn}=zn;if(!g)return!0;if(Xn&&Un){let{from:Jn,to:Ai}=zn;const Ri=(jn=Kn.marks().find($i=>$i.type===qn))==null?void 0:jn.attrs,Ni=getMarkRange(Kn,qn,Ri);Ni&&(Jn=Ni.from,Ai=Ni.to),l.removeMark(Jn,Ai,qn)}else Qn.forEach(Jn=>{l.removeMark(Jn.$from.pos,Jn.$to.pos,qn)});return l.removeStoredMark(qn),!0},unsetTextDirection=e=>({tr:n,state:l,dispatch:d})=>{const{selection:g}=l;let jn,Un;return typeof e=="number"?(jn=e,Un=e):e&&"from"in e&&"to"in e?(jn=e.from,Un=e.to):(jn=g.from,Un=g.to),d&&n.doc.nodesBetween(jn,Un,(zn,qn)=>{if(zn.isText)return;const Kn={...zn.attrs};delete Kn.dir,n.setNodeMarkup(qn,void 0,Kn)}),!0},updateAttributes=(e,n={})=>({tr:l,state:d,dispatch:g})=>{let jn=null,Un=null;const zn=getSchemaTypeNameByName(typeof e=="string"?e:e.name,d.schema);if(!zn)return!1;zn==="node"&&(jn=getNodeType(e,d.schema)),zn==="mark"&&(Un=getMarkType(e,d.schema));let qn=!1;return l.selection.ranges.forEach(Kn=>{const Xn=Kn.$from.pos,Qn=Kn.$to.pos;let Jn,Ai,Ri,Ni;l.selection.empty?d.doc.nodesBetween(Xn,Qn,($i,Li)=>{jn&&jn===$i.type&&(qn=!0,Ri=Math.max(Li,Xn),Ni=Math.min(Li+$i.nodeSize,Qn),Jn=Li,Ai=$i)}):d.doc.nodesBetween(Xn,Qn,($i,Li)=>{Li<Xn&&jn&&jn===$i.type&&(qn=!0,Ri=Math.max(Li,Xn),Ni=Math.min(Li+$i.nodeSize,Qn),Jn=Li,Ai=$i),Li>=Xn&&Li<=Qn&&(jn&&jn===$i.type&&(qn=!0,g&&l.setNodeMarkup(Li,void 0,{...$i.attrs,...n})),Un&&$i.marks.length&&$i.marks.forEach(ji=>{if(Un===ji.type&&(qn=!0,g)){const Fi=Math.max(Li,Xn),qi=Math.min(Li+$i.nodeSize,Qn);l.addMark(Fi,qi,Un.create({...ji.attrs,...n}))}}))}),Ai&&(Jn!==void 0&&g&&l.setNodeMarkup(Jn,void 0,{...Ai.attrs,...n}),Un&&Ai.marks.length&&Ai.marks.forEach($i=>{Un===$i.type&&g&&l.addMark(Ri,Ni,Un.create({...$i.attrs,...n}))}))}),qn},wrapIn=(e,n={})=>({state:l,dispatch:d})=>{const g=getNodeType(e,l.schema);return wrapIn$1(g,n)(l,d)},wrapInList=(e,n={})=>({state:l,dispatch:d})=>{const g=getNodeType(e,l.schema);return wrapInList$1(g,n)(l,d)},EventEmitter=class{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const l=this.callbacks[e];return l&&l.forEach(d=>d.apply(this,n)),this}off(e,n){const l=this.callbacks[e];return l&&(n?this.callbacks[e]=l.filter(d=>d!==n):delete this.callbacks[e]),this}once(e,n){const l=(...d)=>{this.off(e,l),n.apply(this,d)};return this.on(e,l)}removeAllListeners(){this.callbacks={}}},InputRule$1=class{constructor(n){var l;this.find=n.find,this.handler=n.handler,this.undoable=(l=n.undoable)!=null?l:!0}},inputRuleMatcherHandler=(e,n)=>{if(isRegExp(n))return n.exec(e);const l=n(e);if(!l)return null;const d=[l.text];return d.index=l.index,d.input=e,d.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),d.push(l.replaceWith)),d};function run$3(e){var n;const{editor:l,from:d,to:g,text:jn,rules:Un,plugin:zn}=e,{view:qn}=l;if(qn.composing)return!1;const Kn=qn.state.doc.resolve(d);if(Kn.parent.type.spec.code||(n=Kn.nodeBefore||Kn.nodeAfter)!=null&&n.marks.find(Jn=>Jn.type.spec.code))return!1;let Xn=!1;const Qn=getTextContentFromNodes(Kn)+jn;return Un.forEach(Jn=>{if(Xn)return;const Ai=inputRuleMatcherHandler(Qn,Jn.find);if(!Ai)return;const Ri=qn.state.tr,Ni=createChainableState({state:qn.state,transaction:Ri}),$i={from:d-(Ai[0].length-jn.length),to:g},{commands:Li,chain:ji,can:Fi}=new CommandManager({editor:l,state:Ni});Jn.handler({state:Ni,range:$i,match:Ai,commands:Li,chain:ji,can:Fi})===null||!Ri.steps.length||(Jn.undoable&&Ri.setMeta(zn,{transform:Ri,from:d,to:g,text:jn}),qn.dispatch(Ri),Xn=!0)}),Xn}function inputRulesPlugin(e){const{editor:n,rules:l}=e,d=new Plugin({state:{init(){return null},apply(g,jn,Un){const zn=g.getMeta(d);if(zn)return zn;const qn=g.getMeta("applyInputRules");return qn&&setTimeout(()=>{let{text:Xn}=qn;typeof Xn=="string"?Xn=Xn:Xn=getHTMLFromFragment(Fragment.from(Xn),Un.schema);const{from:Qn}=qn,Jn=Qn+Xn.length;run$3({editor:n,from:Qn,to:Jn,text:Xn,rules:l,plugin:d})}),g.selectionSet||g.docChanged?null:jn}},props:{handleTextInput(g,jn,Un,zn){return run$3({editor:n,from:jn,to:Un,text:zn,rules:l,plugin:d})},handleDOMEvents:{compositionend:g=>(setTimeout(()=>{const{$cursor:jn}=g.state.selection;jn&&run$3({editor:n,from:jn.pos,to:jn.pos,text:"",rules:l,plugin:d})}),!1)},handleKeyDown(g,jn){if(jn.key!=="Enter")return!1;const{$cursor:Un}=g.state.selection;return Un?run$3({editor:n,from:Un.pos,to:Un.pos,text:`
`,rules:l,plugin:d}):!1}},isInputRules:!0});return d}function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function isPlainObject$1(e){return getType(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function mergeDeep(e,n){const l={...e};return isPlainObject$1(e)&&isPlainObject$1(n)&&Object.keys(n).forEach(d=>{isPlainObject$1(n[d])&&isPlainObject$1(e[d])?l[d]=mergeDeep(e[d],n[d]):l[d]=n[d]}),l}var Extendable=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const n=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new this.constructor({...this.config,...e});return n.parent=this,this.child=n,n.name="name"in e?e.name:n.parent.name,n}},Mark=class YT extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(n={}){const l=typeof n=="function"?n():n;return new YT(l)}static handleExit({editor:n,mark:l}){const{tr:d}=n.state,g=n.state.selection.$from;if(g.pos===g.end()){const Un=g.marks();if(!!!Un.find(Kn=>Kn?.type.name===l.name))return!1;const qn=Un.find(Kn=>Kn?.type.name===l.name);return qn&&d.removeStoredMark(qn),d.insertText(" ",g.pos),n.view.dispatch(d),!0}return!1}configure(n){return super.configure(n)}extend(n){const l=typeof n=="function"?n():n;return super.extend(l)}};function isNumber$1(e){return typeof e=="number"}var PasteRule=class{constructor(e){this.find=e.find,this.handler=e.handler}},pasteRuleMatcherHandler=(e,n,l)=>{if(isRegExp(n))return[...e.matchAll(n)];const d=n(e,l);return d?d.map(g=>{const jn=[g.text];return jn.index=g.index,jn.input=e,jn.data=g.data,g.replaceWith&&(g.text.includes(g.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),jn.push(g.replaceWith)),jn}):[]};function run2(e){const{editor:n,state:l,from:d,to:g,rule:jn,pasteEvent:Un,dropEvent:zn}=e,{commands:qn,chain:Kn,can:Xn}=new CommandManager({editor:n,state:l}),Qn=[];return l.doc.nodesBetween(d,g,(Ai,Ri)=>{var Ni,$i,Li,ji,Fi;if(($i=(Ni=Ai.type)==null?void 0:Ni.spec)!=null&&$i.code||!(Ai.isText||Ai.isTextblock||Ai.isInline))return;const qi=(Fi=(ji=(Li=Ai.content)==null?void 0:Li.size)!=null?ji:Ai.nodeSize)!=null?Fi:0,zi=Math.max(d,Ri),Gi=Math.min(g,Ri+qi);if(zi>=Gi)return;const Xi=Ai.isText?Ai.text||"":Ai.textBetween(zi-Ri,Gi-Ri,void 0,"");pasteRuleMatcherHandler(Xi,jn.find,Un).forEach(ls=>{if(ls.index===void 0)return;const Zi=zi+ls.index+1,gs=Zi+ls[0].length,bs={from:l.tr.mapping.map(Zi),to:l.tr.mapping.map(gs)},Ss=jn.handler({state:l,range:bs,match:ls,commands:qn,chain:Kn,can:Xn,pasteEvent:Un,dropEvent:zn});Qn.push(Ss)})}),Qn.every(Ai=>Ai!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=e=>{var n;const l=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(n=l.clipboardData)==null||n.setData("text/html",e),l};function pasteRulesPlugin(e){const{editor:n,rules:l}=e;let d=null,g=!1,jn=!1,Un=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,zn;try{zn=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{zn=null}const qn=({state:Xn,from:Qn,to:Jn,rule:Ai,pasteEvt:Ri})=>{const Ni=Xn.tr,$i=createChainableState({state:Xn,transaction:Ni});if(!(!run2({editor:n,state:$i,from:Math.max(Qn-1,0),to:Jn.b-1,rule:Ai,pasteEvent:Ri,dropEvent:zn})||!Ni.steps.length)){try{zn=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{zn=null}return Un=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ni}};return l.map(Xn=>new Plugin({view(Qn){const Jn=Ri=>{var Ni;d=(Ni=Qn.dom.parentElement)!=null&&Ni.contains(Ri.target)?Qn.dom.parentElement:null,d&&(tiptapDragFromOtherEditor=n)},Ai=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",Jn),window.addEventListener("dragend",Ai),{destroy(){window.removeEventListener("dragstart",Jn),window.removeEventListener("dragend",Ai)}}},props:{handleDOMEvents:{drop:(Qn,Jn)=>{if(jn=d===Qn.dom.parentElement,zn=Jn,!jn){const Ai=tiptapDragFromOtherEditor;Ai?.isEditable&&setTimeout(()=>{const Ri=Ai.state.selection;Ri&&Ai.commands.deleteRange({from:Ri.from,to:Ri.to})},10)}return!1},paste:(Qn,Jn)=>{var Ai;const Ri=(Ai=Jn.clipboardData)==null?void 0:Ai.getData("text/html");return Un=Jn,g=!!Ri?.includes("data-pm-slice"),!1}}},appendTransaction:(Qn,Jn,Ai)=>{const Ri=Qn[0],Ni=Ri.getMeta("uiEvent")==="paste"&&!g,$i=Ri.getMeta("uiEvent")==="drop"&&!jn,Li=Ri.getMeta("applyPasteRules"),ji=!!Li;if(!Ni&&!$i&&!ji)return;if(ji){let{text:zi}=Li;typeof zi=="string"?zi=zi:zi=getHTMLFromFragment(Fragment.from(zi),Ai.schema);const{from:Gi}=Li,Xi=Gi+zi.length,as=createClipboardPasteEvent(zi);return qn({rule:Xn,state:Ai,from:Gi,to:{b:Xi},pasteEvt:as})}const Fi=Jn.doc.content.findDiffStart(Ai.doc.content),qi=Jn.doc.content.findDiffEnd(Ai.doc.content);if(!(!isNumber$1(Fi)||!qi||Fi===qi.b))return qn({rule:Xn,state:Ai,from:Fi,to:qi,pasteEvt:Un})}}))}var ExtensionManager=class{constructor(e,n){this.splittableMarks=[],this.editor=n,this.baseExtensions=e,this.extensions=resolveExtensions(e),this.schema=getSchemaByResolvedExtensions(this.extensions,n),this.setupExtensions()}get commands(){return this.extensions.reduce((e,n)=>{const l={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:this.editor,type:getSchemaTypeByName(n.name,this.schema)},d=getExtensionField(n,"addCommands",l);return d?{...e,...d()}:e},{})}get plugins(){const{editor:e}=this;return sortExtensions([...this.extensions].reverse()).flatMap(d=>{const g={name:d.name,options:d.options,storage:this.editor.extensionStorage[d.name],editor:e,type:getSchemaTypeByName(d.name,this.schema)},jn=[],Un=getExtensionField(d,"addKeyboardShortcuts",g);let zn={};if(d.type==="mark"&&getExtensionField(d,"exitable",g)&&(zn.ArrowRight=()=>Mark.handleExit({editor:e,mark:d})),Un){const Jn=Object.fromEntries(Object.entries(Un()).map(([Ai,Ri])=>[Ai,()=>Ri({editor:e})]));zn={...zn,...Jn}}const qn=keymap(zn);jn.push(qn);const Kn=getExtensionField(d,"addInputRules",g);if(isExtensionRulesEnabled(d,e.options.enableInputRules)&&Kn){const Jn=Kn();if(Jn&&Jn.length){const Ai=inputRulesPlugin({editor:e,rules:Jn}),Ri=Array.isArray(Ai)?Ai:[Ai];jn.push(...Ri)}}const Xn=getExtensionField(d,"addPasteRules",g);if(isExtensionRulesEnabled(d,e.options.enablePasteRules)&&Xn){const Jn=Xn();if(Jn&&Jn.length){const Ai=pasteRulesPlugin({editor:e,rules:Jn});jn.push(...Ai)}}const Qn=getExtensionField(d,"addProseMirrorPlugins",g);if(Qn){const Jn=Qn();jn.push(...Jn)}return jn})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=splitExtensions(this.extensions);return Object.fromEntries(n.filter(l=>!!getExtensionField(l,"addNodeView")).map(l=>{const d=this.attributes.filter(qn=>qn.type===l.name),g={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:getNodeType(l.name,this.schema)},jn=getExtensionField(l,"addNodeView",g);if(!jn)return[];const Un=jn();if(!Un)return[];const zn=(qn,Kn,Xn,Qn,Jn)=>{const Ai=getRenderedAttributes(qn,d);return Un({node:qn,view:Kn,getPos:Xn,decorations:Qn,innerDecorations:Jn,editor:e,extension:l,HTMLAttributes:Ai})};return[l.name,zn]}))}get markViews(){const{editor:e}=this,{markExtensions:n}=splitExtensions(this.extensions);return Object.fromEntries(n.filter(l=>!!getExtensionField(l,"addMarkView")).map(l=>{const d=this.attributes.filter(zn=>zn.type===l.name),g={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:getMarkType(l.name,this.schema)},jn=getExtensionField(l,"addMarkView",g);if(!jn)return[];const Un=(zn,qn,Kn)=>{const Xn=getRenderedAttributes(zn,d);return jn()({mark:zn,view:qn,inline:Kn,editor:e,extension:l,HTMLAttributes:Xn,updateAttributes:Qn=>{updateMarkViewAttributes(zn,e,Qn)}})};return[l.name,Un]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(n=>[n.name,n.storage])),e.forEach(n=>{var l;const d={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:this.editor,type:getSchemaTypeByName(n.name,this.schema)};n.type==="mark"&&((l=callOrReturn(getExtensionField(n,"keepOnSplit",d)))==null||l)&&this.splittableMarks.push(n.name);const g=getExtensionField(n,"onBeforeCreate",d),jn=getExtensionField(n,"onCreate",d),Un=getExtensionField(n,"onUpdate",d),zn=getExtensionField(n,"onSelectionUpdate",d),qn=getExtensionField(n,"onTransaction",d),Kn=getExtensionField(n,"onFocus",d),Xn=getExtensionField(n,"onBlur",d),Qn=getExtensionField(n,"onDestroy",d);g&&this.editor.on("beforeCreate",g),jn&&this.editor.on("create",jn),Un&&this.editor.on("update",Un),zn&&this.editor.on("selectionUpdate",zn),qn&&this.editor.on("transaction",qn),Kn&&this.editor.on("focus",Kn),Xn&&this.editor.on("blur",Xn),Qn&&this.editor.on("destroy",Qn)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,TextDirection:()=>TextDirection,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class KT extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(n={}){const l=typeof n=="function"?n():n;return new KT(l)}configure(n){return super.configure(n)}extend(n){const l=typeof n=="function"?n():n;return super.extend(l)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:n,schema:l}=e,{doc:d,selection:g}=n,{ranges:jn}=g,Un=Math.min(...jn.map(Xn=>Xn.$from.pos)),zn=Math.max(...jn.map(Xn=>Xn.$to.pos)),qn=getTextSerializersFromSchema(l);return getTextBetween(d,{from:Un,to:zn},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:qn})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:e,appendedTransactions:n}){var l,d,g;const jn=()=>{var Un,zn,qn,Kn;if((Kn=(qn=(zn=(Un=this.editor.options.coreExtensionOptions)==null?void 0:Un.delete)==null?void 0:zn.filterTransaction)==null?void 0:qn.call(zn,e))!=null?Kn:e.getMeta("y-sync$"))return;const Xn=combineTransactionSteps(e.before,[e,...n]);getChangedRanges(Xn).forEach(Ai=>{Xn.mapping.mapResult(Ai.oldRange.from).deletedAfter&&Xn.mapping.mapResult(Ai.oldRange.to).deletedBefore&&Xn.before.nodesBetween(Ai.oldRange.from,Ai.oldRange.to,(Ri,Ni)=>{const $i=Ni+Ri.nodeSize-2,Li=Ai.oldRange.from<=Ni&&$i<=Ai.oldRange.to;this.editor.emit("delete",{type:"node",node:Ri,from:Ni,to:$i,newFrom:Xn.mapping.map(Ni),newTo:Xn.mapping.map($i),deletedRange:Ai.oldRange,newRange:Ai.newRange,partial:!Li,editor:this.editor,transaction:e,combinedTransform:Xn})})});const Jn=Xn.mapping;Xn.steps.forEach((Ai,Ri)=>{var Ni,$i;if(Ai instanceof RemoveMarkStep){const Li=Jn.slice(Ri).map(Ai.from,-1),ji=Jn.slice(Ri).map(Ai.to),Fi=Jn.invert().map(Li,-1),qi=Jn.invert().map(ji),zi=(Ni=Xn.doc.nodeAt(Li-1))==null?void 0:Ni.marks.some(Xi=>Xi.eq(Ai.mark)),Gi=($i=Xn.doc.nodeAt(ji))==null?void 0:$i.marks.some(Xi=>Xi.eq(Ai.mark));this.editor.emit("delete",{type:"mark",mark:Ai.mark,from:Ai.from,to:Ai.to,deletedRange:{from:Fi,to:qi},newRange:{from:Li,to:ji},partial:!!(Gi||zi),editor:this.editor,transaction:e,combinedTransform:Xn})}})};(g=(d=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:d.async)==null||g?setTimeout(jn,0):jn()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(e,n,l,d)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:l,moved:d})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(n,l)=>{e.isFocused=!0;const d=e.state.tr.setMeta("focus",{event:l}).setMeta("addToHistory",!1);return n.dispatch(d),!1},blur:(n,l)=>{e.isFocused=!1;const d=e.state.tr.setMeta("blur",{event:l}).setMeta("addToHistory",!1);return n.dispatch(d),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:Un})=>[()=>Un.undoInputRule(),()=>Un.command(({tr:zn})=>{const{selection:qn,doc:Kn}=zn,{empty:Xn,$anchor:Qn}=qn,{pos:Jn,parent:Ai}=Qn,Ri=Qn.parent.isTextblock&&Jn>0?zn.doc.resolve(Jn-1):Qn,Ni=Ri.parent.type.spec.isolating,$i=Qn.pos-Qn.parentOffset,Li=Ni&&Ri.parent.childCount===1?$i===Qn.pos:Selection.atStart(Kn).from===Jn;return!Xn||!Ai.type.isTextblock||Ai.textContent.length||!Li||Li&&Qn.parent.type.name==="paragraph"?!1:Un.clearNodes()}),()=>Un.deleteSelection(),()=>Un.joinBackward(),()=>Un.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:Un})=>[()=>Un.deleteSelection(),()=>Un.deleteCurrentNode(),()=>Un.joinForward(),()=>Un.selectNodeForward()]),d={Enter:()=>this.editor.commands.first(({commands:Un})=>[()=>Un.newlineInCode(),()=>Un.createParagraphNear(),()=>Un.liftEmptyBlock(),()=>Un.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},g={...d},jn={...d,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?jn:g},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(e,n,l)=>{if(e.some(Ni=>Ni.getMeta("composition")))return;const d=e.some(Ni=>Ni.docChanged)&&!n.doc.eq(l.doc),g=e.some(Ni=>Ni.getMeta("preventClearDocument"));if(!d||g)return;const{empty:jn,from:Un,to:zn}=n.selection,qn=Selection.atStart(n.doc).from,Kn=Selection.atEnd(n.doc).to;if(jn||!(Un===qn&&zn===Kn)||!isNodeEmpty(l.doc))return;const Jn=l.tr,Ai=createChainableState({state:l,transaction:Jn}),{commands:Ri}=new CommandManager({editor:this.editor,state:Ai});if(Ri.clearNodes(),!!Jn.steps.length)return Jn}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(e,n,l)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:l})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TextDirection=Extension.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=splitExtensions(this.extensions);return[{types:e.filter(n=>n.name!=="text").map(n=>n.name),attributes:{dir:{default:this.options.direction,parseHTML:n=>{const l=n.getAttribute("dir");return l&&(l==="ltr"||l==="rtl"||l==="auto")?l:this.options.direction},renderHTML:n=>n.dir?{dir:n.dir}:{}}}}]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),NodePos=class Ep{constructor(n,l,d=!1,g=null){this.currentNode=null,this.actualDepth=null,this.isBlock=d,this.resolvedPos=n,this.editor=l,this.currentNode=g}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var n;return(n=this.actualDepth)!=null?n:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(n){let l=this.from,d=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}l=this.from+1,d=this.to-1}this.editor.commands.insertContentAt({from:l,to:d},n)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const n=this.resolvedPos.start(this.resolvedPos.depth-1),l=this.resolvedPos.doc.resolve(n);return new Ep(l,this.editor)}get before(){let n=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.from-3)),new Ep(n,this.editor)}get after(){let n=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.to+3)),new Ep(n,this.editor)}get children(){const n=[];return this.node.content.forEach((l,d)=>{const g=l.isBlock&&!l.isTextblock,jn=l.isAtom&&!l.isText,Un=this.pos+d+(jn?0:1);if(Un<0||Un>this.resolvedPos.doc.nodeSize-2)return;const zn=this.resolvedPos.doc.resolve(Un);if(!g&&zn.depth<=this.depth)return;const qn=new Ep(zn,this.editor,g,g?l:null);g&&(qn.actualDepth=this.depth+1),n.push(new Ep(zn,this.editor,g,g?l:null))}),n}get firstChild(){return this.children[0]||null}get lastChild(){const n=this.children;return n[n.length-1]||null}closest(n,l={}){let d=null,g=this.parent;for(;g&&!d;){if(g.node.type.name===n)if(Object.keys(l).length>0){const jn=g.node.attrs,Un=Object.keys(l);for(let zn=0;zn<Un.length;zn+=1){const qn=Un[zn];if(jn[qn]!==l[qn])break}}else d=g;g=g.parent}return d}querySelector(n,l={}){return this.querySelectorAll(n,l,!0)[0]||null}querySelectorAll(n,l={},d=!1){let g=[];if(!this.children||this.children.length===0)return g;const jn=Object.keys(l);return this.children.forEach(Un=>{d&&g.length>0||(Un.node.type.name===n&&jn.every(qn=>l[qn]===Un.node.attrs[qn])&&g.push(Un),!(d&&g.length>0)&&(g=g.concat(Un.querySelectorAll(n,l,d))))}),g}setAttribute(n){const{tr:l}=this.editor.state;l.setNodeMarkup(this.from,void 0,{...this.node.attrs,...n}),this.editor.view.dispatch(l)}},style$1=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(e,n,l){const d=document.querySelector("style[data-tiptap-style]");if(d!==null)return d;const g=document.createElement("style");return n&&g.setAttribute("nonce",n),g.setAttribute("data-tiptap-style",""),g.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(g),g}var Editor$1=class extends EventEmitter{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:g})=>{throw g},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition,createMappablePosition},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:g,slice:jn,moved:Un})=>this.options.onDrop(g,jn,Un)),this.on("paste",({event:g,slice:jn})=>this.options.onPaste(g,jn)),this.on("delete",this.options.onDelete);const l=this.createDoc(),d=resolveFocusPosition(l,this.options.autofocus);this.editorState=EditorState.create({doc:l,schema:this.schema,selection:d||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style$1,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,l=!0){this.setOptions({editable:n}),l&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,l)=>{if(this.editorView)return this.editorView[l];if(l==="state")return this.editorState;if(l in n)return Reflect.get(n,l);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${l}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,l){const d=isFunction(l)?l(n,[...this.state.plugins]):[...this.state.plugins,n],g=this.state.reconfigure({plugins:d});return this.view.updateState(g),g}unregisterPlugin(n){if(this.isDestroyed)return;const l=this.state.plugins;let d=l;if([].concat(n).forEach(jn=>{const Un=typeof jn=="string"?`${jn}$`:jn.key;d=d.filter(zn=>!zn.key.startsWith(Un))}),l.length===d.length)return;const g=this.state.reconfigure({plugins:d});return this.view.updateState(g),g}createExtensionManager(){var n,l;const g=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(l=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:l.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete,TextDirection.configure({direction:this.options.textDirection})].filter(jn=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[jn.name]!==!1:!0):[],...this.options.extensions].filter(jn=>["extension","node","mark"].includes(jn?.type));this.extensionManager=new ExtensionManager(g,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(d=>d.name!=="collaboration"),this.createExtensionManager()}}),n=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var l;this.editorView=new EditorView(n,{...this.options.editorProps,attributes:{role:"textbox",...(l=this.options.editorProps)==null?void 0:l.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const d=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(d),this.prependClass(),this.injectCSS();const g=this.view.dom;g.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const l=this.capturedTransaction;return this.capturedTransaction=null,l}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(Xn=>{var Qn;return(Qn=this.capturedTransaction)==null?void 0:Qn.step(Xn)});return}const{state:l,transactions:d}=this.state.applyTransaction(n),g=!this.state.selection.eq(l.selection),jn=d.includes(n),Un=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:l}),!jn)return;this.view.updateState(l),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:d.slice(1)}),g&&this.emit("selectionUpdate",{editor:this,transaction:n});const zn=d.findLast(Xn=>Xn.getMeta("focus")||Xn.getMeta("blur")),qn=zn?.getMeta("focus"),Kn=zn?.getMeta("blur");qn&&this.emit("focus",{editor:this,event:qn.event,transaction:zn}),Kn&&this.emit("blur",{editor:this,event:Kn.event,transaction:zn}),!(n.getMeta("preventUpdate")||!d.some(Xn=>Xn.docChanged)||Un.doc.eq(l.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:d.slice(1)})}getAttributes(n){return getAttributes(this.state,n)}isActive(n,l){const d=typeof n=="string"?n:null,g=typeof n=="string"?l:n;return isActive(this.state,d,g)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:l=`

`,textSerializers:d={}}=n||{};return getText(this.state.doc,{blockSeparator:l,textSerializers:{...getTextSerializersFromSchema(this.schema),...d}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,l;return(l=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?l:!0}$node(n,l){var d;return((d=this.$doc)==null?void 0:d.querySelector(n,l))||null}$nodes(n,l){var d;return((d=this.$doc)==null?void 0:d.querySelectorAll(n,l))||null}$pos(n){const l=this.state.doc.resolve(n);return new NodePos(l,this)}get $doc(){return this.$pos(0)}};function markInputRule(e){return new InputRule$1({find:e.find,handler:({state:n,range:l,match:d})=>{const g=callOrReturn(e.getAttributes,void 0,d);if(g===!1||g===null)return null;const{tr:jn}=n,Un=d[d.length-1],zn=d[0];if(Un){const qn=zn.search(/\S/),Kn=l.from+zn.indexOf(Un),Xn=Kn+Un.length;if(getMarksBetween(l.from,l.to,n.doc).filter(Ai=>Ai.mark.type.excluded.find(Ni=>Ni===e.type&&Ni!==Ai.mark.type)).filter(Ai=>Ai.to>Kn).length)return null;Xn<l.to&&jn.delete(Xn,l.to),Kn>l.from&&jn.delete(l.from+qn,Kn);const Jn=l.from+qn+Un.length;jn.addMark(l.from+qn,Jn,e.type.create(g||{})),jn.removeStoredMark(e.type)}},undoable:e.undoable})}var markdown_exports={};__export(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes$1});function parseAttributes(e){if(!e?.trim())return{};const n={},l=[],d=e.replace(/["']([^"']*)["']/g,Kn=>(l.push(Kn),`__QUOTED_${l.length-1}__`)),g=d.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(g){const Kn=g.map(Xn=>Xn.trim().slice(1));n.class=Kn.join(" ")}const jn=d.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);jn&&(n.id=jn[1]);const Un=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(d.matchAll(Un)).forEach(([,Kn,Xn])=>{var Qn;const Jn=parseInt(((Qn=Xn.match(/__QUOTED_(\d+)__/))==null?void 0:Qn[1])||"0",10),Ai=l[Jn];Ai&&(n[Kn]=Ai.slice(1,-1))});const qn=d.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return qn&&qn.split(/\s+/).filter(Boolean).forEach(Xn=>{Xn.match(/^[a-zA-Z][\w-]*$/)&&(n[Xn]=!0)}),n}function serializeAttributes$1(e){if(!e||Object.keys(e).length===0)return"";const n=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(d=>n.push(`.${d}`)),e.id&&n.push(`#${e.id}`),Object.entries(e).forEach(([l,d])=>{l==="class"||l==="id"||(d===!0?n.push(l):d!==!1&&d!=null&&n.push(`${l}="${String(d)}"`))}),n.join(" ")}function createAtomBlockMarkdownSpec(e){const{nodeName:n,name:l,parseAttributes:d=parseAttributes,serializeAttributes:g=serializeAttributes$1,defaultAttributes:jn={},requiredAttributes:Un=[],allowedAttributes:zn}=e,qn=l||n,Kn=Xn=>{if(!zn)return Xn;const Qn={};return zn.forEach(Jn=>{Jn in Xn&&(Qn[Jn]=Xn[Jn])}),Qn};return{parseMarkdown:(Xn,Qn)=>{const Jn={...jn,...Xn.attributes};return Qn.createNode(n,Jn,[])},markdownTokenizer:{name:n,level:"block",start(Xn){var Qn;const Jn=new RegExp(`^:::${qn}(?:\\s|$)`,"m"),Ai=(Qn=Xn.match(Jn))==null?void 0:Qn.index;return Ai!==void 0?Ai:-1},tokenize(Xn,Qn,Jn){const Ai=new RegExp(`^:::${qn}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),Ri=Xn.match(Ai);if(!Ri)return;const Ni=Ri[1]||"",$i=d(Ni);if(!Un.find(ji=>!(ji in $i)))return{type:n,raw:Ri[0],attributes:$i}}},renderMarkdown:Xn=>{const Qn=Kn(Xn.attrs||{}),Jn=g(Qn),Ai=Jn?` {${Jn}}`:"";return`:::${qn}${Ai} :::`}}}function createBlockMarkdownSpec(e){const{nodeName:n,name:l,getContent:d,parseAttributes:g=parseAttributes,serializeAttributes:jn=serializeAttributes$1,defaultAttributes:Un={},content:zn="block",allowedAttributes:qn}=e,Kn=l||n,Xn=Qn=>{if(!qn)return Qn;const Jn={};return qn.forEach(Ai=>{Ai in Qn&&(Jn[Ai]=Qn[Ai])}),Jn};return{parseMarkdown:(Qn,Jn)=>{let Ai;if(d){const Ni=d(Qn);Ai=typeof Ni=="string"?[{type:"text",text:Ni}]:Ni}else zn==="block"?Ai=Jn.parseChildren(Qn.tokens||[]):Ai=Jn.parseInline(Qn.tokens||[]);const Ri={...Un,...Qn.attributes};return Jn.createNode(n,Ri,Ai)},markdownTokenizer:{name:n,level:"block",start(Qn){var Jn;const Ai=new RegExp(`^:::${Kn}`,"m"),Ri=(Jn=Qn.match(Ai))==null?void 0:Jn.index;return Ri!==void 0?Ri:-1},tokenize(Qn,Jn,Ai){var Ri;const Ni=new RegExp(`^:::${Kn}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),$i=Qn.match(Ni);if(!$i)return;const[Li,ji=""]=$i,Fi=g(ji);let qi=1;const zi=Li.length;let Gi="";const Xi=/^:::([\w-]*)(\s.*)?/gm,as=Qn.slice(zi);for(Xi.lastIndex=0;;){const ls=Xi.exec(as);if(ls===null)break;const Zi=ls.index,gs=ls[1];if(!((Ri=ls[2])!=null&&Ri.endsWith(":::"))){if(gs)qi+=1;else if(qi-=1,qi===0){const bs=as.slice(0,Zi);Gi=bs.trim();const Ss=Qn.slice(0,zi+Zi+ls[0].length);let ss=[];if(Gi)if(zn==="block")for(ss=Ai.blockTokens(bs),ss.forEach(Es=>{Es.text&&(!Es.tokens||Es.tokens.length===0)&&(Es.tokens=Ai.inlineTokens(Es.text))});ss.length>0;){const Es=ss[ss.length-1];if(Es.type==="paragraph"&&(!Es.text||Es.text.trim()===""))ss.pop();else break}else ss=Ai.inlineTokens(Gi);return{type:n,raw:Ss,attributes:Fi,content:Gi,tokens:ss}}}}}},renderMarkdown:(Qn,Jn)=>{const Ai=Xn(Qn.attrs||{}),Ri=jn(Ai),Ni=Ri?` {${Ri}}`:"",$i=Jn.renderChildren(Qn.content||[],`

`);return`:::${Kn}${Ni}

${$i}

:::`}}}function parseShortcodeAttributes(e){if(!e.trim())return{};const n={},l=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let d=l.exec(e);for(;d!==null;){const[,g,jn,Un]=d;n[g]=jn||Un,d=l.exec(e)}return n}function serializeShortcodeAttributes(e){return Object.entries(e).filter(([,n])=>n!=null).map(([n,l])=>`${n}="${l}"`).join(" ")}function createInlineMarkdownSpec(e){const{nodeName:n,name:l,getContent:d,parseAttributes:g=parseShortcodeAttributes,serializeAttributes:jn=serializeShortcodeAttributes,defaultAttributes:Un={},selfClosing:zn=!1,allowedAttributes:qn}=e,Kn=l||n,Xn=Jn=>{if(!qn)return Jn;const Ai={};return qn.forEach(Ri=>{const Ni=typeof Ri=="string"?Ri:Ri.name,$i=typeof Ri=="string"?void 0:Ri.skipIfDefault;if(Ni in Jn){const Li=Jn[Ni];if($i!==void 0&&Li===$i)return;Ai[Ni]=Li}}),Ai},Qn=Kn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(Jn,Ai)=>{const Ri={...Un,...Jn.attributes};if(zn)return Ai.createNode(n,Ri);const Ni=d?d(Jn):Jn.content||"";return Ni?Ai.createNode(n,Ri,[Ai.createTextNode(Ni)]):Ai.createNode(n,Ri,[])},markdownTokenizer:{name:n,level:"inline",start(Jn){const Ai=zn?new RegExp(`\\[${Qn}\\s*[^\\]]*\\]`):new RegExp(`\\[${Qn}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Qn}\\]`),Ri=Jn.match(Ai),Ni=Ri?.index;return Ni!==void 0?Ni:-1},tokenize(Jn,Ai,Ri){const Ni=zn?new RegExp(`^\\[${Qn}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Qn}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Qn}\\]`),$i=Jn.match(Ni);if(!$i)return;let Li="",ji="";if(zn){const[,qi]=$i;ji=qi}else{const[,qi,zi]=$i;ji=qi,Li=zi||""}const Fi=g(ji.trim());return{type:n,raw:$i[0],content:Li.trim(),attributes:Fi}}},renderMarkdown:Jn=>{let Ai="";d?Ai=d(Jn):Jn.content&&Jn.content.length>0&&(Ai=Jn.content.filter(Li=>Li.type==="text").map(Li=>Li.text).join(""));const Ri=Xn(Jn.attrs||{}),Ni=jn(Ri),$i=Ni?` ${Ni}`:"";return zn?`[${Kn}${$i}]`:`[${Kn}${$i}]${Ai}[/${Kn}]`}}}function parseIndentedBlocks(e,n,l){var d,g,jn,Un;const zn=e.split(`
`),qn=[];let Kn="",Xn=0;const Qn=n.baseIndentSize||2;for(;Xn<zn.length;){const Jn=zn[Xn],Ai=Jn.match(n.itemPattern);if(!Ai){if(qn.length>0)break;if(Jn.trim()===""){Xn+=1,Kn=`${Kn}${Jn}
`;continue}else return}const Ri=n.extractItemData(Ai),{indentLevel:Ni,mainContent:$i}=Ri;Kn=`${Kn}${Jn}
`;const Li=[$i];for(Xn+=1;Xn<zn.length;){const zi=zn[Xn];if(zi.trim()===""){const Xi=zn.slice(Xn+1).findIndex(Zi=>Zi.trim()!=="");if(Xi===-1)break;if((((g=(d=zn[Xn+1+Xi].match(/^(\s*)/))==null?void 0:d[1])==null?void 0:g.length)||0)>Ni){Li.push(zi),Kn=`${Kn}${zi}
`,Xn+=1;continue}else break}if((((Un=(jn=zi.match(/^(\s*)/))==null?void 0:jn[1])==null?void 0:Un.length)||0)>Ni)Li.push(zi),Kn=`${Kn}${zi}
`,Xn+=1;else break}let ji;const Fi=Li.slice(1);if(Fi.length>0){const zi=Fi.map(Gi=>Gi.slice(Ni+Qn)).join(`
`);zi.trim()&&(n.customNestedParser?ji=n.customNestedParser(zi):ji=l.blockTokens(zi))}const qi=n.createToken(Ri,ji);qn.push(qi)}if(qn.length!==0)return{items:qn,raw:Kn}}function renderNestedMarkdownContent(e,n,l,d){if(!e||!Array.isArray(e.content))return"";const g=typeof l=="function"?l(d):l,[jn,...Un]=e.content,zn=n.renderChildren([jn]),qn=[`${g}${zn}`];return Un&&Un.length>0&&Un.forEach(Kn=>{const Xn=n.renderChildren([Kn]);if(Xn){const Qn=Xn.split(`
`).map(Jn=>Jn?n.indent(Jn):"").join(`
`);qn.push(Qn)}}),qn.join(`
`)}function updateMarkViewAttributes(e,n,l={}){const{state:d}=n,{doc:g,tr:jn}=d,Un=e;g.descendants((zn,qn)=>{const Kn=jn.mapping.map(qn),Xn=jn.mapping.map(qn)+zn.nodeSize;let Qn=null;if(zn.marks.forEach(Ai=>{if(Ai!==Un)return!1;Qn=Ai}),!Qn)return;let Jn=!1;if(Object.keys(l).forEach(Ai=>{l[Ai]!==Qn.attrs[Ai]&&(Jn=!0)}),Jn){const Ai=e.type.create({...e.attrs,...l});jn.removeMark(Kn,Xn,e.type),jn.addMark(Kn,Xn,Ai)}}),jn.docChanged&&n.view.dispatch(jn)}var Node3=class WT extends Extendable{constructor(){super(...arguments),this.type="node"}static create(n={}){const l=typeof n=="function"?n():n;return new WT(l)}configure(n){return super.configure(n)}extend(n){const l=typeof n=="function"?n():n;return super.extend(l)}};function markPasteRule(e){return new PasteRule({find:e.find,handler:({state:n,range:l,match:d,pasteEvent:g})=>{const jn=callOrReturn(e.getAttributes,void 0,d,g);if(jn===!1||jn===null)return null;const{tr:Un}=n,zn=d[d.length-1],qn=d[0];let Kn=l.to;if(zn){const Xn=qn.search(/\S/),Qn=l.from+qn.indexOf(zn),Jn=Qn+zn.length;if(getMarksBetween(l.from,l.to,n.doc).filter(Ri=>Ri.mark.type.excluded.find($i=>$i===e.type&&$i!==Ri.mark.type)).filter(Ri=>Ri.to>Qn).length)return null;Jn<l.to&&Un.delete(Jn,l.to),Qn>l.from&&Un.delete(l.from+Xn,Qn),Kn=l.from+Xn+zn.length,Un.addMark(l.from+Xn,Kn,e.type.create(jn||{})),Un.removeStoredMark(e.type)}}})}var getRandomValues$1,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(e){return typeof e=="string"&&REGEX.test(e)}var byteToHex=[];for(var i$2=0;i$2<256;++i$2)byteToHex.push((i$2+256).toString(16).substr(1));function stringify$2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(byteToHex[e[n+0]]+byteToHex[e[n+1]]+byteToHex[e[n+2]]+byteToHex[e[n+3]]+"-"+byteToHex[e[n+4]]+byteToHex[e[n+5]]+"-"+byteToHex[e[n+6]]+byteToHex[e[n+7]]+"-"+byteToHex[e[n+8]]+byteToHex[e[n+9]]+"-"+byteToHex[e[n+10]]+byteToHex[e[n+11]]+byteToHex[e[n+12]]+byteToHex[e[n+13]]+byteToHex[e[n+14]]+byteToHex[e[n+15]]).toLowerCase();if(!validate(l))throw TypeError("Stringified UUID is invalid");return l}function v4(e,n,l){e=e||{};var d=e.random||(e.rng||rng)();return d[6]=d[6]&15|64,d[8]=d[8]&63|128,stringify$2(d)}function pt$2(e,n=JSON.stringify){const l={};return e.filter(d=>{const g=n(d);return Object.prototype.hasOwnProperty.call(l,g)?!1:l[g]=!0})}function dt$3(e){const n=e.filter((l,d)=>e.indexOf(l)!==d);return pt$2(n)}const Q$1=Extension.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const e=window.__TEST_OPTIONS;return e.mockID===void 0?e.mockID=0:e.mockID++,e.mockID.toString()}return v4()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute(`data-${this.options.attributeName}`),renderHTML:e=>{const n={[`data-${this.options.attributeName}`]:e[this.options.attributeName]};return this.options.setIdAttribute?{...n,id:e[this.options.attributeName]}:n}}}}]},addProseMirrorPlugins(){let e=null,n=!1;return[new Plugin({key:new PluginKey("uniqueID"),appendTransaction:(l,d,g)=>{const jn=l.some(Ai=>Ai.docChanged)&&!d.doc.eq(g.doc),Un=this.options.filterTransaction&&l.some(Ai=>{var Ri,Ni;return!((Ni=(Ri=this.options).filterTransaction)!=null&&Ni.call(Ri,Ai))});if(!jn||Un)return;const{tr:zn}=g,{types:qn,attributeName:Kn,generateID:Xn}=this.options,Qn=combineTransactionSteps(d.doc,l),{mapping:Jn}=Qn;if(getChangedRanges(Qn).forEach(({newRange:Ai})=>{const Ri=findChildrenInRange(g.doc,Ai,Li=>qn.includes(Li.type.name)),Ni=Ri.map(({node:Li})=>Li.attrs[Kn]).filter(Li=>Li!==null),$i=dt$3(Ni);Ri.forEach(({node:Li,pos:ji})=>{var Fi;const qi=(Fi=zn.doc.nodeAt(ji))==null?void 0:Fi.attrs[Kn];if(qi===null){const Gi=d.doc.type.createAndFill().content;if(d.doc.content.findDiffStart(Gi)===null){const Xi=JSON.parse(JSON.stringify(g.doc.toJSON()));if(Xi.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(Xi.content)===JSON.stringify(Gi.toJSON())){zn.setNodeMarkup(ji,void 0,{...Li.attrs,[Kn]:"initialBlockId"});return}}zn.setNodeMarkup(ji,void 0,{...Li.attrs,[Kn]:Xn()});return}const{deleted:zi}=Jn.invert().mapResult(ji);zi&&$i.includes(qi)&&zn.setNodeMarkup(ji,void 0,{...Li.attrs,[Kn]:Xn()})})}),!!zn.steps.length)return zn.setMeta("uniqueID",!0),zn},view(l){const d=g=>{let jn;e=!((jn=l.dom.parentElement)===null||jn===void 0)&&jn.contains(g.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(l,d)=>{let g;return e!==l.dom.parentElement||((g=d.dataTransfer)===null||g===void 0?void 0:g.effectAllowed)==="copy"?n=!0:n=!1,e=null,!1},paste:()=>(n=!0,!1)},transformPasted:l=>{if(!n)return l;const{types:d,attributeName:g}=this.options,jn=Un=>{const zn=[];return Un.forEach(qn=>{if(qn.isText){zn.push(qn);return}if(!d.includes(qn.type.name)){zn.push(qn.copy(jn(qn.content)));return}const Kn=qn.type.create({...qn.attrs,[g]:null},jn(qn.content),qn.marks);zn.push(Kn)}),Fragment.from(zn)};return n=!1,new Slice(jn(l.content),l.openStart,l.openEnd)}}})]}});function K$4(e){return e.type==="link"}function X(e){return typeof e!="string"&&e.type==="link"}function B$2(e){return typeof e!="string"&&e.type==="text"}function S$1(e){var n,l,d,g,jn;return R$2(e)?{...e}:v$3(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:((n=e.props)==null?void 0:n.backgroundColor)??"default",textColor:((l=e.props)==null?void 0:l.textColor)??"default",textAlignment:((d=e.props)==null?void 0:d.textAlignment)??"left",colspan:((g=e.props)==null?void 0:g.colspan)??1,rowspan:((jn=e.props)==null?void 0:jn.rowspan)??1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function v$3(e){return e!=null&&typeof e!="string"&&!Array.isArray(e)&&e.type==="tableCell"}function R$2(e){return v$3(e)&&e.props!==void 0&&e.content!==void 0}function A$3(e){return R$2(e)?e.props.colspan??1:1}function D$4(e){return R$2(e)?e.props.rowspan??1:1}let O$1=class extends Error{constructor(n){super(`Unreachable case: ${n}`)}};function At$3(e,n=!0){const{"data-test":l,...d}=e;if(Object.keys(d).length>0&&n)throw new Error("Object must be empty "+JSON.stringify(e))}function Y$2(e,n){const l=e.resolve(n);if(l.nodeAfter&&l.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:l.pos,node:l.nodeAfter};let d=l.depth,g=l.node(d);for(;d>0;){if(g.type.isInGroup("bnBlock"))return{posBeforeNode:l.before(d),node:g};d--,g=l.node(d)}const jn=[];e.descendants((zn,qn)=>{zn.type.isInGroup("bnBlock")&&jn.push(qn)}),console.warn(`Position ${n} is not within a blockContainer node.`);const Un=e.resolve(jn.find(zn=>zn>=n)||jn[jn.length-1]);return{posBeforeNode:Un.pos,node:Un.nodeAfter}}function $$4(e,n){if(!e.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${e.type.name}`);const l=e,d=n,g=d+l.nodeSize,jn={node:l,beforePos:d,afterPos:g};if(l.type.name==="blockContainer"){let Un,zn;if(l.forEach((qn,Kn)=>{if(qn.type.spec.group==="blockContent"){const Xn=qn,Qn=d+Kn+1,Jn=Qn+qn.nodeSize;Un={node:Xn,beforePos:Qn,afterPos:Jn}}else if(qn.type.name==="blockGroup"){const Xn=qn,Qn=d+Kn+1,Jn=Qn+qn.nodeSize;zn={node:Xn,beforePos:Qn,afterPos:Jn}}}),!Un)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${l}`);return{isBlockContainer:!0,bnBlock:jn,blockContent:Un,childContainer:zn,blockNoteType:Un.node.type.name}}else{if(!jn.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${jn.node}`);return{isBlockContainer:!1,bnBlock:jn,childContainer:jn,blockNoteType:jn.node.type.name}}}function Z$2(e){return $$4(e.node,e.posBeforeNode)}function It$3(e){if(!e.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${e.pos} but a node at this position does not exist`);return $$4(e.nodeAfter,e.pos)}function Tt$3(e){const n=Y$2(e.doc,e.selection.anchor);return Z$2(n)}function Ot$3(e){const n=Y$2(e.doc,e.selection.anchor);return Z$2(n)}function ht$2(e){return"doc"in e?e.doc.type.schema:e.type.schema}function G(e){return e.cached.blockNoteEditor}function J$2(e){return G(e).schema}function _$1(e){return J$2(e).blockSchema}function H$1(e){return J$2(e).inlineContentSchema}function N$1(e){return J$2(e).styleSchema}function j$2(e){return G(e).blockCache}function gt$3(e,n,l){var d,g;const jn={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},Un=[];e.content.forEach((zn,qn,Kn)=>{const Xn={cells:[]};Kn===0&&zn.content.forEach(Qn=>{let Jn=Qn.attrs.colwidth;Jn==null&&(Jn=new Array(Qn.attrs.colspan??1).fill(void 0)),jn.columnWidths.push(...Jn)}),Xn.cells=zn.content.content.map((Qn,Jn)=>(Un[Kn]||(Un[Kn]=[]),Un[Kn][Jn]=Qn.type.name==="tableHeader",{type:"tableCell",content:Qn.content.content.map(Ai=>F$3(Ai,n,l)).reduce((Ai,Ri)=>{if(!Ai.length)return Ri;const Ni=Ai[Ai.length-1],$i=Ri[0];return $i&&B$2(Ni)&&B$2($i)&&JSON.stringify(Ni.styles)===JSON.stringify($i.styles)?(Ni.text+=`
`+$i.text,Ai.push(...Ri.slice(1)),Ai):(Ai.push(...Ri),Ai)},[]),props:{colspan:Qn.attrs.colspan,rowspan:Qn.attrs.rowspan,backgroundColor:Qn.attrs.backgroundColor,textColor:Qn.attrs.textColor,textAlignment:Qn.attrs.textAlignment}})),jn.rows.push(Xn)});for(let zn=0;zn<Un.length;zn++)(d=Un[zn])!=null&&d.every(qn=>qn)&&(jn.headerRows=(jn.headerRows??0)+1);for(let zn=0;zn<((g=Un[0])==null?void 0:g.length);zn++)Un!=null&&Un.every(qn=>qn[zn])&&(jn.headerCols=(jn.headerCols??0)+1);return jn}function F$3(e,n,l){const d=[];let g;return e.content.forEach(jn=>{if(jn.type.name==="hardBreak"){if(g)if(B$2(g))g.text+=`
`;else if(K$4(g))g.content[g.content.length-1].text+=`
`;else throw new Error("unexpected");else g={type:"text",text:`
`,styles:{}};return}if(jn.type.name!=="link"&&jn.type.name!=="text"){if(!n[jn.type.name]){console.warn("unrecognized inline content type",jn.type.name);return}g&&(d.push(g),g=void 0),d.push(wt$2(jn,n,l));return}const Un={};let zn;for(const qn of jn.marks)if(qn.type.name==="link")zn=qn;else{const Kn=l[qn.type.name];if(!Kn){if(qn.type.spec.blocknoteIgnore)continue;throw new Error(`style ${qn.type.name} not found in styleSchema`)}if(Kn.propSchema==="boolean")Un[Kn.type]=!0;else if(Kn.propSchema==="string")Un[Kn.type]=qn.attrs.stringValue;else throw new O$1(Kn.propSchema)}g?B$2(g)?zn?(d.push(g),g={type:"link",href:zn.attrs.href,content:[{type:"text",text:jn.textContent,styles:Un}]}):JSON.stringify(g.styles)===JSON.stringify(Un)?g.text+=jn.textContent:(d.push(g),g={type:"text",text:jn.textContent,styles:Un}):K$4(g)&&(zn?g.href===zn.attrs.href?JSON.stringify(g.content[g.content.length-1].styles)===JSON.stringify(Un)?g.content[g.content.length-1].text+=jn.textContent:g.content.push({type:"text",text:jn.textContent,styles:Un}):(d.push(g),g={type:"link",href:zn.attrs.href,content:[{type:"text",text:jn.textContent,styles:Un}]}):(d.push(g),g={type:"text",text:jn.textContent,styles:Un})):zn?g={type:"link",href:zn.attrs.href,content:[{type:"text",text:jn.textContent,styles:Un}]}:g={type:"text",text:jn.textContent,styles:Un}}),g&&d.push(g),d}function wt$2(e,n,l){if(e.type.name==="text"||e.type.name==="link")throw new Error("unexpected");const d={},g=n[e.type.name];for(const[Un,zn]of Object.entries(e.attrs)){if(!g)throw Error("ic node is of an unrecognized type: "+e.type.name);const qn=g.propSchema;Un in qn&&(d[Un]=zn)}let jn;return g.content==="styled"?jn=F$3(e,n,l):jn=void 0,{type:e.type.name,props:d,content:jn}}function L$1(e,n,l=_$1(n),d=H$1(n),g=N$1(n),jn=j$2(n)){var Un;if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);const zn=jn?.get(e);if(zn)return zn;const qn=$$4(e,0);let Kn=qn.bnBlock.node.attrs.id;Kn===null&&(Kn=Q$1.options.generateID());const Xn=l[qn.blockNoteType];if(!Xn)throw Error("Block is of an unrecognized type: "+qn.blockNoteType);const Qn={};for(const[$i,Li]of Object.entries({...e.attrs,...qn.isBlockContainer?qn.blockContent.node.attrs:{}})){const ji=Xn.propSchema;$i in ji&&!(ji[$i].default===void 0&&Li===void 0)&&(Qn[$i]=Li)}const Jn=l[qn.blockNoteType],Ai=[];(Un=qn.childContainer)==null||Un.node.forEach($i=>{Ai.push(L$1($i,n,l,d,g,jn))});let Ri;if(Jn.content==="inline"){if(!qn.isBlockContainer)throw new Error("impossible");Ri=F$3(qn.blockContent.node,d,g)}else if(Jn.content==="table"){if(!qn.isBlockContainer)throw new Error("impossible");Ri=gt$3(qn.blockContent.node,d,g)}else if(Jn.content==="none")Ri=void 0;else throw new O$1(Jn.content);const Ni={id:Kn,type:Jn.type,props:Qn,content:Ri,children:Ai};return jn?.set(e,Ni),Ni}function St$3(e,n=ht$2(e),l=_$1(n),d=H$1(n),g=N$1(n),jn=j$2(n)){const Un=[];return e.firstChild&&e.firstChild.descendants(zn=>(Un.push(L$1(zn,n,l,d,g,jn)),!1)),Un}function Dt$3(e,n,l=_$1(n),d=H$1(n),g=N$1(n),jn=j$2(n)){function Un(zn,qn,Kn){if(zn.type.name!=="blockGroup")throw new Error("unexpected");const Xn=[];let Qn,Jn;return zn.forEach((Ai,Ri,Ni)=>{if(Ai.type.name!=="blockContainer")throw new Error("unexpected");if(Ai.childCount===0)return;if(Ai.childCount===0||Ai.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+Ai.childCount);const $i=Ni===0,Li=Ni===zn.childCount-1;if(Ai.firstChild.type.name==="blockGroup"){if(!$i)throw new Error("unexpected");const zi=Un(Ai.firstChild,Math.max(0,qn-1),Li?Math.max(0,Kn-1):0);Qn=zi.blockCutAtStart,Li&&(Jn=zi.blockCutAtEnd),Xn.push(...zi.blocks);return}const ji=L$1(Ai,n,l,d,g,jn),Fi=Ai.childCount>1?Ai.child(1):void 0;let qi=[];if(Fi){const zi=Un(Fi,0,Li?Math.max(0,Kn-1):0);qi=zi.blocks,Li&&(Jn=zi.blockCutAtEnd)}Li&&!Fi&&Kn>1&&(Jn=ji.id),$i&&qn>1&&(Qn=ji.id),Xn.push({...ji,children:qi})}),{blocks:Xn,blockCutAtStart:Qn,blockCutAtEnd:Jn}}if(e.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(e.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return Un(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}function x$2(e){const{height:n,width:l}=tt$2(e),d=new Array(n).fill(!1).map(()=>new Array(l).fill(null)),g=(jn,Un)=>{for(let zn=jn;zn<n;zn++)for(let qn=Un;qn<l;qn++)if(!d[zn][qn])return{row:zn,col:qn};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let jn=0;jn<e.content.rows.length;jn++)for(let Un=0;Un<e.content.rows[jn].cells.length;Un++){const zn=S$1(e.content.rows[jn].cells[Un]),qn=D$4(zn),Kn=A$3(zn),{row:Xn,col:Qn}=g(jn,Un);for(let Jn=Xn;Jn<Xn+qn;Jn++)for(let Ai=Qn;Ai<Qn+Kn;Ai++){if(d[Jn][Ai])throw new Error(`Unable to create occupancy grid for table, cell at ${Jn},${Ai} is already occupied`);d[Jn][Ai]={row:jn,col:Un,rowspan:qn,colspan:Kn,cell:zn}}}return d}function I$3(e){const n=new Set;return e.map(l=>({cells:l.map(d=>n.has(d.row+":"+d.col)?!1:(n.add(d.row+":"+d.col),d.cell)).filter(d=>d!==!1)}))}function E$2(e,n,l=x$2(n)){for(let d=0;d<l.length;d++)for(let g=0;g<l[d].length;g++){const jn=l[d][g];if(jn&&jn.row===e.row&&jn.col===e.col)return{row:d,col:g,cell:jn.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${e.row},${e.col} is not occupied`)}function tt$2(e){const n=e.content.rows.length;let l=0;return e.content.rows.forEach(d=>{let g=0;d.cells.forEach(jn=>{g+=A$3(jn)}),l=Math.max(l,g)}),{height:n,width:l}}function et$1(e,n,l=x$2(n)){var d;const g=(d=l[e.row])==null?void 0:d[e.col];if(g)return{row:g.row,col:g.col,cell:g.cell}}function yt$3(e,n){var l;const d=x$2(e);if(n<0||n>=d.length)return[];let g=0;for(let Un=0;Un<n;Un++){const zn=(l=d[g])==null?void 0:l[0];if(!zn)return[];g+=zn.rowspan}const jn=new Array(d[0].length).fill(!1).map((Un,zn)=>et$1({row:g,col:zn},e,d)).filter(Un=>Un!==void 0);return jn.filter((Un,zn)=>jn.findIndex(qn=>qn.row===Un.row&&qn.col===Un.col)===zn)}function Ct$3(e,n){var l;const d=x$2(e);if(n<0||n>=d[0].length)return[];let g=0;for(let Un=0;Un<n;Un++){const zn=(l=d[0])==null?void 0:l[g];if(!zn)return[];g+=zn.colspan}const jn=new Array(d.length).fill(!1).map((Un,zn)=>et$1({row:zn,col:g},e,d)).filter(Un=>Un!==void 0);return jn.filter((Un,zn)=>jn.findIndex(qn=>qn.row===Un.row&&qn.col===Un.col)===zn)}function Mt$2(e,n,l,d=x$2(e)){const{col:g}=E$2({row:0,col:n},e,d),{col:jn}=E$2({row:0,col:l},e,d);return d.forEach(Un=>{const[zn]=Un.splice(g,1);Un.splice(jn,0,zn)}),I$3(d)}function Pt$4(e,n,l,d=x$2(e)){const{row:g}=E$2({row:n,col:0},e,d),{row:jn}=E$2({row:l,col:0},e,d),[Un]=d.splice(g,1);return d.splice(jn,0,Un),I$3(d)}function M$5(e){return e?v$3(e)?M$5(e.content):typeof e=="string"?e.length===0:Array.isArray(e)?e.every(n=>typeof n=="string"?n.length===0:B$2(n)?n.text.length===0:X(n)?typeof n.content=="string"?n.content.length===0:n.content.every(l=>l.text.length===0):!1):!1:!0}function Rt$3(e,n,l=x$2(e)){if(n==="columns"){let jn=0;for(let Un=l[0].length-1;Un>=0&&l.every(zn=>M$5(zn[Un].cell)&&zn[Un].colspan===1);Un--)jn++;for(let Un=l.length-1;Un>=0;Un--){const zn=Math.max(l[Un].length-jn,1);l[Un]=l[Un].slice(0,zn)}return I$3(l)}let d=0;for(let jn=l.length-1;jn>=0&&l[jn].every(Un=>M$5(Un.cell)&&Un.rowspan===1);jn--)d++;const g=Math.min(d,l.length-1);return l.splice(l.length-g,g),I$3(l)}function $t$3(e,n,l,d=x$2(e)){const{width:g,height:jn}=tt$2(e);if(n==="columns")d.forEach((Un,zn)=>{if(l>=0)for(let qn=0;qn<l;qn++)Un.push({row:zn,col:Math.max(...Un.map(Kn=>Kn.col))+1,rowspan:1,colspan:1,cell:S$1("")});else Un.splice(g+l,-1*l)});else if(l>0)for(let Un=0;Un<l;Un++){const zn=new Array(g).fill(null).map((qn,Kn)=>({row:jn+Un,col:Kn,rowspan:1,colspan:1,cell:S$1("")}));d.push(zn)}else l<0&&d.splice(jn+l,-1*l);return I$3(d)}function Jt$3(e,n,l){const d=yt$3(e,l);if(!d.some(Un=>D$4(Un.cell)>1))return!0;let g=l,jn=l;return d.forEach(Un=>{const zn=D$4(Un.cell);g=Math.max(g,Un.row+zn-1),jn=Math.min(jn,Un.row)}),n<l?l===g:l===jn}function _t$4(e,n,l){const d=Ct$3(e,l);if(!d.some(Un=>A$3(Un.cell)>1))return!0;let g=l,jn=l;return d.forEach(Un=>{const zn=A$3(Un.cell);g=Math.max(g,Un.col+zn-1),jn=Math.min(jn,Un.col)}),n<l?l===g:l===jn}function Ht$2(e,n,l){const d=E$2(e,l),g=E$2(n,l);return d.col===g.col}function V$2(e,n,l,d){const g=[];for(const[jn,Un]of Object.entries(e.styles||{})){const zn=l[jn];if(!zn)throw new Error(`style ${jn} not found in styleSchema`);if(zn.propSchema==="boolean")Un&&g.push(n.mark(jn));else if(zn.propSchema==="string")Un&&g.push(n.mark(jn,{stringValue:Un}));else throw new O$1(zn.propSchema)}return!d||!n.nodes[d].spec.code?e.text.split(/(\n)/g).filter(jn=>jn.length>0).map(jn=>jn===`
`?n.nodes.hardBreak.createChecked():n.text(jn,g)):e.text.length>0?[n.text(e.text,g)]:[]}function mt$3(e,n,l){const d=n.marks.link.create({href:e.href});return P$1(e.content,n,l).map(g=>{if(g.type.name==="text")return g.mark([...g.marks,d]);if(g.type.name==="hardBreak")return g;throw new Error("unexpected node type")})}function P$1(e,n,l,d){const g=[];if(typeof e=="string")return g.push(...V$2({text:e,styles:{}},n,l,d)),g;for(const jn of e)g.push(...V$2(jn,n,l,d));return g}function T$2(e,n,l,d=N$1(n)){const g=[];for(const jn of e)typeof jn=="string"?g.push(...P$1(jn,n,d,l)):X(jn)?g.push(...mt$3(jn,n,d)):B$2(jn)?g.push(...P$1([jn],n,d,l)):g.push(nt$2(jn,n,d));return g}function kt$3(e,n,l=N$1(n)){const d=[],g=new Array(e.headerRows??0).fill(!0),jn=new Array(e.headerCols??0).fill(!0),Un=e.columnWidths??[];for(let zn=0;zn<e.rows.length;zn++){const qn=e.rows[zn],Kn=[],Xn=g[zn];for(let Jn=0;Jn<qn.cells.length;Jn++){const Ai=qn.cells[Jn],Ri=jn[Jn],Ni=void 0;let $i=null;const Li=E$2({row:zn,col:Jn},{content:e});let ji=Un[Li.col]?[Un[Li.col]]:null;if(Ai)if(typeof Ai=="string")$i=n.text(Ai);else if(v$3(Ai)){Ai.content&&($i=T$2(Ai.content,n,"tableParagraph",l));const qi=A$3(Ai);qi>1&&(ji=new Array(qi).fill(!1).map((zi,Gi)=>Un[Li.col+Gi]??void 0))}else $i=T$2(Ai,n,"tableParagraph",l);const Fi=n.nodes[Ri||Xn?"tableHeader":"tableCell"].createChecked({...v$3(Ai)?Ai.props:{},colwidth:ji},n.nodes.tableParagraph.createChecked(Ni,$i));Kn.push(Fi)}const Qn=n.nodes.tableRow.createChecked({},Kn);d.push(Qn)}return d}function nt$2(e,n,l){let d,g=e.type;if(g===void 0&&(g="paragraph"),!n.nodes[g])throw new Error(`node type ${g} not found in schema`);if(!e.content)d=n.nodes[g].createChecked(e.props);else if(typeof e.content=="string"){const jn=T$2([e.content],n,g,l);d=n.nodes[g].createChecked(e.props,jn)}else if(Array.isArray(e.content)){const jn=T$2(e.content,n,g,l);d=n.nodes[g].createChecked(e.props,jn)}else if(e.content.type==="tableContent"){const jn=kt$3(e.content,n,l);d=n.nodes[g].createChecked(e.props,jn)}else throw new O$1(e.content.type);return d}function bt$3(e,n,l=N$1(n)){let d=e.id;d===void 0&&(d=Q$1.options.generateID());const g=[];if(e.children)for(const jn of e.children)g.push(bt$3(jn,n,l));if(!e.type||n.nodes[e.type].isInGroup("blockContent")){const jn=nt$2(e,n,l),Un=g.length>0?n.nodes.blockGroup.createChecked({},g):void 0;return n.nodes.blockContainer.createChecked({id:d,...e.props},Un?[jn,Un]:jn)}else{if(n.nodes[e.type].isInGroup("bnBlock"))return n.nodes[e.type].createChecked({id:d,...e.props},g);throw new Error(`block type ${e.type} doesn't match blockContent or bnBlock group`)}}let readFromCache,addToCache;if(typeof WeakMap<"u"){let e=new WeakMap;readFromCache=n=>e.get(n),addToCache=(n,l)=>(e.set(n,l),l)}else{const e=[];let l=0;readFromCache=d=>{for(let g=0;g<e.length;g+=2)if(e[g]==d)return e[g+1]},addToCache=(d,g)=>(l==10&&(l=0),e[l++]=d,e[l++]=g)}var TableMap=class{constructor(e,n,l,d){this.width=e,this.height=n,this.map=l,this.problems=d}findCell(e){for(let n=0;n<this.map.length;n++){const l=this.map[n];if(l!=e)continue;const d=n%this.width,g=n/this.width|0;let jn=d+1,Un=g+1;for(let zn=1;jn<this.width&&this.map[n+zn]==l;zn++)jn++;for(let zn=1;Un<this.height&&this.map[n+this.width*zn]==l;zn++)Un++;return{left:d,top:g,right:jn,bottom:Un}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let n=0;n<this.map.length;n++)if(this.map[n]==e)return n%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,n,l){const{left:d,right:g,top:jn,bottom:Un}=this.findCell(e);return n=="horiz"?(l<0?d==0:g==this.width)?null:this.map[jn*this.width+(l<0?d-1:g)]:(l<0?jn==0:Un==this.height)?null:this.map[d+this.width*(l<0?jn-1:Un)]}rectBetween(e,n){const{left:l,right:d,top:g,bottom:jn}=this.findCell(e),{left:Un,right:zn,top:qn,bottom:Kn}=this.findCell(n);return{left:Math.min(l,Un),top:Math.min(g,qn),right:Math.max(d,zn),bottom:Math.max(jn,Kn)}}cellsInRect(e){const n=[],l={};for(let d=e.top;d<e.bottom;d++)for(let g=e.left;g<e.right;g++){const jn=d*this.width+g,Un=this.map[jn];l[Un]||(l[Un]=!0,!(g==e.left&&g&&this.map[jn-1]==Un||d==e.top&&d&&this.map[jn-this.width]==Un)&&n.push(Un))}return n}positionAt(e,n,l){for(let d=0,g=0;;d++){const jn=g+l.child(d).nodeSize;if(d==e){let Un=n+e*this.width;const zn=(e+1)*this.width;for(;Un<zn&&this.map[Un]<g;)Un++;return Un==zn?jn-1:this.map[Un]}g=jn}}static get(e){return readFromCache(e)||addToCache(e,computeMap(e))}};function computeMap(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const n=findWidth(e),l=e.childCount,d=[];let g=0,jn=null;const Un=[];for(let Kn=0,Xn=n*l;Kn<Xn;Kn++)d[Kn]=0;for(let Kn=0,Xn=0;Kn<l;Kn++){const Qn=e.child(Kn);Xn++;for(let Ri=0;;Ri++){for(;g<d.length&&d[g]!=0;)g++;if(Ri==Qn.childCount)break;const Ni=Qn.child(Ri),{colspan:$i,rowspan:Li,colwidth:ji}=Ni.attrs;for(let Fi=0;Fi<Li;Fi++){if(Fi+Kn>=l){(jn||(jn=[])).push({type:"overlong_rowspan",pos:Xn,n:Li-Fi});break}const qi=g+Fi*n;for(let zi=0;zi<$i;zi++){d[qi+zi]==0?d[qi+zi]=Xn:(jn||(jn=[])).push({type:"collision",row:Kn,pos:Xn,n:$i-zi});const Gi=ji&&ji[zi];if(Gi){const Xi=(qi+zi)%n*2,as=Un[Xi];as==null||as!=Gi&&Un[Xi+1]==1?(Un[Xi]=Gi,Un[Xi+1]=1):as==Gi&&Un[Xi+1]++}}}g+=$i,Xn+=Ni.nodeSize}const Jn=(Kn+1)*n;let Ai=0;for(;g<Jn;)d[g++]==0&&Ai++;Ai&&(jn||(jn=[])).push({type:"missing",row:Kn,n:Ai}),Xn++}(n===0||l===0)&&(jn||(jn=[])).push({type:"zero_sized"});const zn=new TableMap(n,l,d,jn);let qn=!1;for(let Kn=0;!qn&&Kn<Un.length;Kn+=2)Un[Kn]!=null&&Un[Kn+1]<l&&(qn=!0);return qn&&findBadColWidths(zn,Un,e),zn}function findWidth(e){let n=-1,l=!1;for(let d=0;d<e.childCount;d++){const g=e.child(d);let jn=0;if(l)for(let Un=0;Un<d;Un++){const zn=e.child(Un);for(let qn=0;qn<zn.childCount;qn++){const Kn=zn.child(qn);Un+Kn.attrs.rowspan>d&&(jn+=Kn.attrs.colspan)}}for(let Un=0;Un<g.childCount;Un++){const zn=g.child(Un);jn+=zn.attrs.colspan,zn.attrs.rowspan>1&&(l=!0)}n==-1?n=jn:n!=jn&&(n=Math.max(n,jn))}return n}function findBadColWidths(e,n,l){e.problems||(e.problems=[]);const d={};for(let g=0;g<e.map.length;g++){const jn=e.map[g];if(d[jn])continue;d[jn]=!0;const Un=l.nodeAt(jn);if(!Un)throw new RangeError(`No cell with offset ${jn} found`);let zn=null;const qn=Un.attrs;for(let Kn=0;Kn<qn.colspan;Kn++){const Xn=n[(g+Kn)%e.width*2];Xn!=null&&(!qn.colwidth||qn.colwidth[Kn]!=Xn)&&((zn||(zn=freshColWidth(qn)))[Kn]=Xn)}zn&&e.problems.unshift({type:"colwidth mismatch",pos:jn,colwidth:zn})}}function freshColWidth(e){if(e.colwidth)return e.colwidth.slice();const n=[];for(let l=0;l<e.colspan;l++)n.push(0);return n}function tableNodeTypes(e){let n=e.cached.tableNodeTypes;if(!n){n=e.cached.tableNodeTypes={};for(const l in e.nodes){const d=e.nodes[l],g=d.spec.tableRole;g&&(n[g]=d)}}return n}const tableEditingKey=new PluginKey("selectingCells");function cellAround(e){for(let n=e.depth-1;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return e.node(0).resolve(e.before(n+1));return null}function cellWrapping(e){for(let n=e.depth;n>0;n--){const l=e.node(n).type.spec.tableRole;if(l==="cell"||l==="header_cell")return e.node(n)}return null}function isInTable(e){const n=e.selection.$head;for(let l=n.depth;l>0;l--)if(n.node(l).type.spec.tableRole=="row")return!0;return!1}function selectionCell(e){const n=e.selection;if("$anchorCell"in n&&n.$anchorCell)return n.$anchorCell.pos>n.$headCell.pos?n.$anchorCell:n.$headCell;if("node"in n&&n.node&&n.node.type.spec.tableRole=="cell")return n.$anchor;const l=cellAround(n.$head)||cellNear(n.$head);if(l)return l;throw new RangeError(`No cell found around position ${n.head}`)}function cellNear(e){for(let n=e.nodeAfter,l=e.pos;n;n=n.firstChild,l++){const d=n.type.spec.tableRole;if(d=="cell"||d=="header_cell")return e.doc.resolve(l)}for(let n=e.nodeBefore,l=e.pos;n;n=n.lastChild,l--){const d=n.type.spec.tableRole;if(d=="cell"||d=="header_cell")return e.doc.resolve(l-n.nodeSize)}}function pointsAtCell(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function moveCellForward(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function inSameTable(e,n){return e.depth==n.depth&&e.pos>=n.start(-1)&&e.pos<=n.end(-1)}function nextCell(e,n,l){const d=e.node(-1),g=TableMap.get(d),jn=e.start(-1),Un=g.nextCell(e.pos-jn,n,l);return Un==null?null:e.node(0).resolve(jn+Un)}function removeColSpan(e,n,l=1){const d={...e,colspan:e.colspan-l};return d.colwidth&&(d.colwidth=d.colwidth.slice(),d.colwidth.splice(n,l),d.colwidth.some(g=>g>0)||(d.colwidth=null)),d}function addColSpan(e,n,l=1){const d={...e,colspan:e.colspan+l};if(d.colwidth){d.colwidth=d.colwidth.slice();for(let g=0;g<l;g++)d.colwidth.splice(n,0,0)}return d}function columnIsHeader(e,n,l){const d=tableNodeTypes(n.type.schema).header_cell;for(let g=0;g<e.height;g++)if(n.nodeAt(e.map[l+g*e.width]).type!=d)return!1;return!0}var CellSelection=class Vu extends Selection{constructor(n,l=n){const d=n.node(-1),g=TableMap.get(d),jn=n.start(-1),Un=g.rectBetween(n.pos-jn,l.pos-jn),zn=n.node(0),qn=g.cellsInRect(Un).filter(Xn=>Xn!=l.pos-jn);qn.unshift(l.pos-jn);const Kn=qn.map(Xn=>{const Qn=d.nodeAt(Xn);if(!Qn)throw new RangeError(`No cell with offset ${Xn} found`);const Jn=jn+Xn+1;return new SelectionRange(zn.resolve(Jn),zn.resolve(Jn+Qn.content.size))});super(Kn[0].$from,Kn[0].$to,Kn),this.$anchorCell=n,this.$headCell=l}map(n,l){const d=n.resolve(l.map(this.$anchorCell.pos)),g=n.resolve(l.map(this.$headCell.pos));if(pointsAtCell(d)&&pointsAtCell(g)&&inSameTable(d,g)){const jn=this.$anchorCell.node(-1)!=d.node(-1);return jn&&this.isRowSelection()?Vu.rowSelection(d,g):jn&&this.isColSelection()?Vu.colSelection(d,g):new Vu(d,g)}return TextSelection.between(d,g)}content(){const n=this.$anchorCell.node(-1),l=TableMap.get(n),d=this.$anchorCell.start(-1),g=l.rectBetween(this.$anchorCell.pos-d,this.$headCell.pos-d),jn={},Un=[];for(let qn=g.top;qn<g.bottom;qn++){const Kn=[];for(let Xn=qn*l.width+g.left,Qn=g.left;Qn<g.right;Qn++,Xn++){const Jn=l.map[Xn];if(jn[Jn])continue;jn[Jn]=!0;const Ai=l.findCell(Jn);let Ri=n.nodeAt(Jn);if(!Ri)throw new RangeError(`No cell with offset ${Jn} found`);const Ni=g.left-Ai.left,$i=Ai.right-g.right;if(Ni>0||$i>0){let Li=Ri.attrs;if(Ni>0&&(Li=removeColSpan(Li,0,Ni)),$i>0&&(Li=removeColSpan(Li,Li.colspan-$i,$i)),Ai.left<g.left){if(Ri=Ri.type.createAndFill(Li),!Ri)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(Li)}`)}else Ri=Ri.type.create(Li,Ri.content)}if(Ai.top<g.top||Ai.bottom>g.bottom){const Li={...Ri.attrs,rowspan:Math.min(Ai.bottom,g.bottom)-Math.max(Ai.top,g.top)};Ai.top<g.top?Ri=Ri.type.createAndFill(Li):Ri=Ri.type.create(Li,Ri.content)}Kn.push(Ri)}Un.push(n.child(qn).copy(Fragment.from(Kn)))}const zn=this.isColSelection()&&this.isRowSelection()?n:Un;return new Slice(Fragment.from(zn),1,1)}replace(n,l=Slice.empty){const d=n.steps.length,g=this.ranges;for(let Un=0;Un<g.length;Un++){const{$from:zn,$to:qn}=g[Un],Kn=n.mapping.slice(d);n.replace(Kn.map(zn.pos),Kn.map(qn.pos),Un?Slice.empty:l)}const jn=Selection.findFrom(n.doc.resolve(n.mapping.slice(d).map(this.to)),-1);jn&&n.setSelection(jn)}replaceWith(n,l){this.replace(n,new Slice(Fragment.from(l),0,0))}forEachCell(n){const l=this.$anchorCell.node(-1),d=TableMap.get(l),g=this.$anchorCell.start(-1),jn=d.cellsInRect(d.rectBetween(this.$anchorCell.pos-g,this.$headCell.pos-g));for(let Un=0;Un<jn.length;Un++)n(l.nodeAt(jn[Un]),g+jn[Un])}isColSelection(){const n=this.$anchorCell.index(-1),l=this.$headCell.index(-1);if(Math.min(n,l)>0)return!1;const d=n+this.$anchorCell.nodeAfter.attrs.rowspan,g=l+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(d,g)==this.$headCell.node(-1).childCount}static colSelection(n,l=n){const d=n.node(-1),g=TableMap.get(d),jn=n.start(-1),Un=g.findCell(n.pos-jn),zn=g.findCell(l.pos-jn),qn=n.node(0);return Un.top<=zn.top?(Un.top>0&&(n=qn.resolve(jn+g.map[Un.left])),zn.bottom<g.height&&(l=qn.resolve(jn+g.map[g.width*(g.height-1)+zn.right-1]))):(zn.top>0&&(l=qn.resolve(jn+g.map[zn.left])),Un.bottom<g.height&&(n=qn.resolve(jn+g.map[g.width*(g.height-1)+Un.right-1]))),new Vu(n,l)}isRowSelection(){const n=this.$anchorCell.node(-1),l=TableMap.get(n),d=this.$anchorCell.start(-1),g=l.colCount(this.$anchorCell.pos-d),jn=l.colCount(this.$headCell.pos-d);if(Math.min(g,jn)>0)return!1;const Un=g+this.$anchorCell.nodeAfter.attrs.colspan,zn=jn+this.$headCell.nodeAfter.attrs.colspan;return Math.max(Un,zn)==l.width}eq(n){return n instanceof Vu&&n.$anchorCell.pos==this.$anchorCell.pos&&n.$headCell.pos==this.$headCell.pos}static rowSelection(n,l=n){const d=n.node(-1),g=TableMap.get(d),jn=n.start(-1),Un=g.findCell(n.pos-jn),zn=g.findCell(l.pos-jn),qn=n.node(0);return Un.left<=zn.left?(Un.left>0&&(n=qn.resolve(jn+g.map[Un.top*g.width])),zn.right<g.width&&(l=qn.resolve(jn+g.map[g.width*(zn.top+1)-1]))):(zn.left>0&&(l=qn.resolve(jn+g.map[zn.top*g.width])),Un.right<g.width&&(n=qn.resolve(jn+g.map[g.width*(Un.top+1)-1]))),new Vu(n,l)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(n,l){return new Vu(n.resolve(l.anchor),n.resolve(l.head))}static create(n,l,d=l){return new Vu(n.resolve(l),n.resolve(d))}getBookmark(){return new CellBookmark(this.$anchorCell.pos,this.$headCell.pos)}};CellSelection.prototype.visible=!1;Selection.jsonID("cell",CellSelection);var CellBookmark=class XT{constructor(n,l){this.anchor=n,this.head=l}map(n){return new XT(n.map(this.anchor),n.map(this.head))}resolve(n){const l=n.resolve(this.anchor),d=n.resolve(this.head);return l.parent.type.spec.tableRole=="row"&&d.parent.type.spec.tableRole=="row"&&l.index()<l.parent.childCount&&d.index()<d.parent.childCount&&inSameTable(l,d)?new CellSelection(l,d):Selection.near(d,1)}};function drawCellSelection(e){if(!(e.selection instanceof CellSelection))return null;const n=[];return e.selection.forEachCell((l,d)=>{n.push(Decoration.node(d,d+l.nodeSize,{class:"selectedCell"}))}),DecorationSet.create(e.doc,n)}function isCellBoundarySelection({$from:e,$to:n}){if(e.pos==n.pos||e.pos<n.pos-6)return!1;let l=e.pos,d=n.pos,g=e.depth;for(;g>=0&&!(e.after(g+1)<e.end(g));g--,l++);for(let jn=n.depth;jn>=0&&!(n.before(jn+1)>n.start(jn));jn--,d--);return l==d&&/row|table/.test(e.node(g).type.spec.tableRole)}function isTextSelectionAcrossCells({$from:e,$to:n}){let l,d;for(let g=e.depth;g>0;g--){const jn=e.node(g);if(jn.type.spec.tableRole==="cell"||jn.type.spec.tableRole==="header_cell"){l=jn;break}}for(let g=n.depth;g>0;g--){const jn=n.node(g);if(jn.type.spec.tableRole==="cell"||jn.type.spec.tableRole==="header_cell"){d=jn;break}}return l!==d&&n.parentOffset===0}function normalizeSelection(e,n,l){const d=(n||e).selection,g=(n||e).doc;let jn,Un;if(d instanceof NodeSelection&&(Un=d.node.type.spec.tableRole)){if(Un=="cell"||Un=="header_cell")jn=CellSelection.create(g,d.from);else if(Un=="row"){const zn=g.resolve(d.from+1);jn=CellSelection.rowSelection(zn,zn)}else if(!l){const zn=TableMap.get(d.node),qn=d.from+1,Kn=qn+zn.map[zn.width*zn.height-1];jn=CellSelection.create(g,qn+1,Kn)}}else d instanceof TextSelection&&isCellBoundarySelection(d)?jn=TextSelection.create(g,d.from):d instanceof TextSelection&&isTextSelectionAcrossCells(d)&&(jn=TextSelection.create(g,d.$from.start(),d.$from.end()));return jn&&(n||(n=e.tr)).setSelection(jn),n}const fixTablesKey=new PluginKey("fix-tables");function changedDescendants(e,n,l,d){const g=e.childCount,jn=n.childCount;e:for(let Un=0,zn=0;Un<jn;Un++){const qn=n.child(Un);for(let Kn=zn,Xn=Math.min(g,Un+3);Kn<Xn;Kn++)if(e.child(Kn)==qn){zn=Kn+1,l+=qn.nodeSize;continue e}d(qn,l),zn<g&&e.child(zn).sameMarkup(qn)?changedDescendants(e.child(zn),qn,l+1,d):qn.nodesBetween(0,qn.content.size,d,l+1),l+=qn.nodeSize}}function fixTables(e,n){let l;const d=(g,jn)=>{g.type.spec.tableRole=="table"&&(l=fixTable(e,g,jn,l))};return n?n.doc!=e.doc&&changedDescendants(n.doc,e.doc,0,d):e.doc.descendants(d),l}function fixTable(e,n,l,d){const g=TableMap.get(n);if(!g.problems)return d;d||(d=e.tr);const jn=[];for(let qn=0;qn<g.height;qn++)jn.push(0);for(let qn=0;qn<g.problems.length;qn++){const Kn=g.problems[qn];if(Kn.type=="collision"){const Xn=n.nodeAt(Kn.pos);if(!Xn)continue;const Qn=Xn.attrs;for(let Jn=0;Jn<Qn.rowspan;Jn++)jn[Kn.row+Jn]+=Kn.n;d.setNodeMarkup(d.mapping.map(l+1+Kn.pos),null,removeColSpan(Qn,Qn.colspan-Kn.n,Kn.n))}else if(Kn.type=="missing")jn[Kn.row]+=Kn.n;else if(Kn.type=="overlong_rowspan"){const Xn=n.nodeAt(Kn.pos);if(!Xn)continue;d.setNodeMarkup(d.mapping.map(l+1+Kn.pos),null,{...Xn.attrs,rowspan:Xn.attrs.rowspan-Kn.n})}else if(Kn.type=="colwidth mismatch"){const Xn=n.nodeAt(Kn.pos);if(!Xn)continue;d.setNodeMarkup(d.mapping.map(l+1+Kn.pos),null,{...Xn.attrs,colwidth:Kn.colwidth})}else if(Kn.type=="zero_sized"){const Xn=d.mapping.map(l);d.delete(Xn,Xn+n.nodeSize)}}let Un,zn;for(let qn=0;qn<jn.length;qn++)jn[qn]&&(Un==null&&(Un=qn),zn=qn);for(let qn=0,Kn=l+1;qn<g.height;qn++){const Xn=n.child(qn),Qn=Kn+Xn.nodeSize,Jn=jn[qn];if(Jn>0){let Ai="cell";Xn.firstChild&&(Ai=Xn.firstChild.type.spec.tableRole);const Ri=[];for(let $i=0;$i<Jn;$i++){const Li=tableNodeTypes(e.schema)[Ai].createAndFill();Li&&Ri.push(Li)}const Ni=(qn==0||Un==qn-1)&&zn==qn?Kn+1:Qn-1;d.insert(d.mapping.map(Ni),Ri)}Kn=Qn}return d.setMeta(fixTablesKey,{fixTables:!0})}function selectedRect(e){const n=e.selection,l=selectionCell(e),d=l.node(-1),g=l.start(-1),jn=TableMap.get(d);return{...n instanceof CellSelection?jn.rectBetween(n.$anchorCell.pos-g,n.$headCell.pos-g):jn.findCell(l.pos-g),tableStart:g,map:jn,table:d}}function addColumn(e,{map:n,tableStart:l,table:d},g){let jn=g>0?-1:0;columnIsHeader(n,d,g+jn)&&(jn=g==0||g==n.width?null:0);for(let Un=0;Un<n.height;Un++){const zn=Un*n.width+g;if(g>0&&g<n.width&&n.map[zn-1]==n.map[zn]){const qn=n.map[zn],Kn=d.nodeAt(qn);e.setNodeMarkup(e.mapping.map(l+qn),null,addColSpan(Kn.attrs,g-n.colCount(qn))),Un+=Kn.attrs.rowspan-1}else{const qn=jn==null?tableNodeTypes(d.type.schema).cell:d.nodeAt(n.map[zn+jn]).type,Kn=n.positionAt(Un,g,d);e.insert(e.mapping.map(l+Kn),qn.createAndFill())}}return e}function addColumnBefore(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e);n(addColumn(e.tr,l,l.left))}return!0}function addColumnAfter(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e);n(addColumn(e.tr,l,l.right))}return!0}function removeColumn(e,{map:n,table:l,tableStart:d},g){const jn=e.mapping.maps.length;for(let Un=0;Un<n.height;){const zn=Un*n.width+g,qn=n.map[zn],Kn=l.nodeAt(qn),Xn=Kn.attrs;if(g>0&&n.map[zn-1]==qn||g<n.width-1&&n.map[zn+1]==qn)e.setNodeMarkup(e.mapping.slice(jn).map(d+qn),null,removeColSpan(Xn,g-n.colCount(qn)));else{const Qn=e.mapping.slice(jn).map(d+qn);e.delete(Qn,Qn+Kn.nodeSize)}Un+=Xn.rowspan}}function deleteColumn(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e),d=e.tr;if(l.left==0&&l.right==l.map.width)return!1;for(let g=l.right-1;removeColumn(d,l,g),g!=l.left;g--){const jn=l.tableStart?d.doc.nodeAt(l.tableStart-1):d.doc;if(!jn)throw new RangeError("No table found");l.table=jn,l.map=TableMap.get(jn)}n(d)}return!0}function rowIsHeader(e,n,l){var d;const g=tableNodeTypes(n.type.schema).header_cell;for(let jn=0;jn<e.width;jn++)if(((d=n.nodeAt(e.map[jn+l*e.width]))===null||d===void 0?void 0:d.type)!=g)return!1;return!0}function addRow(e,{map:n,tableStart:l,table:d},g){let jn=l;for(let Kn=0;Kn<g;Kn++)jn+=d.child(Kn).nodeSize;const Un=[];let zn=g>0?-1:0;rowIsHeader(n,d,g+zn)&&(zn=g==0||g==n.height?null:0);for(let Kn=0,Xn=n.width*g;Kn<n.width;Kn++,Xn++)if(g>0&&g<n.height&&n.map[Xn]==n.map[Xn-n.width]){const Qn=n.map[Xn],Jn=d.nodeAt(Qn).attrs;e.setNodeMarkup(l+Qn,null,{...Jn,rowspan:Jn.rowspan+1}),Kn+=Jn.colspan-1}else{var qn;const Qn=zn==null?tableNodeTypes(d.type.schema).cell:(qn=d.nodeAt(n.map[Xn+zn*n.width]))===null||qn===void 0?void 0:qn.type,Jn=Qn?.createAndFill();Jn&&Un.push(Jn)}return e.insert(jn,tableNodeTypes(d.type.schema).row.create(null,Un)),e}function addRowBefore(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e);n(addRow(e.tr,l,l.top))}return!0}function addRowAfter(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e);n(addRow(e.tr,l,l.bottom))}return!0}function removeRow(e,{map:n,table:l,tableStart:d},g){let jn=0;for(let Kn=0;Kn<g;Kn++)jn+=l.child(Kn).nodeSize;const Un=jn+l.child(g).nodeSize,zn=e.mapping.maps.length;e.delete(jn+d,Un+d);const qn=new Set;for(let Kn=0,Xn=g*n.width;Kn<n.width;Kn++,Xn++){const Qn=n.map[Xn];if(!qn.has(Qn)){if(qn.add(Qn),g>0&&Qn==n.map[Xn-n.width]){const Jn=l.nodeAt(Qn).attrs;e.setNodeMarkup(e.mapping.slice(zn).map(Qn+d),null,{...Jn,rowspan:Jn.rowspan-1}),Kn+=Jn.colspan-1}else if(g<n.height&&Qn==n.map[Xn+n.width]){const Jn=l.nodeAt(Qn),Ai=Jn.attrs,Ri=Jn.type.create({...Ai,rowspan:Jn.attrs.rowspan-1},Jn.content),Ni=n.positionAt(g+1,Kn,l);e.insert(e.mapping.slice(zn).map(d+Ni),Ri),Kn+=Ai.colspan-1}}}}function deleteRow(e,n){if(!isInTable(e))return!1;if(n){const l=selectedRect(e),d=e.tr;if(l.top==0&&l.bottom==l.map.height)return!1;for(let g=l.bottom-1;removeRow(d,l,g),g!=l.top;g--){const jn=l.tableStart?d.doc.nodeAt(l.tableStart-1):d.doc;if(!jn)throw new RangeError("No table found");l.table=jn,l.map=TableMap.get(l.table)}n(d)}return!0}function isEmpty$1(e){const n=e.content;return n.childCount==1&&n.child(0).isTextblock&&n.child(0).childCount==0}function cellsOverlapRectangle({width:e,height:n,map:l},d){let g=d.top*e+d.left,jn=g,Un=(d.bottom-1)*e+d.left,zn=g+(d.right-d.left-1);for(let qn=d.top;qn<d.bottom;qn++){if(d.left>0&&l[jn]==l[jn-1]||d.right<e&&l[zn]==l[zn+1])return!0;jn+=e,zn+=e}for(let qn=d.left;qn<d.right;qn++){if(d.top>0&&l[g]==l[g-e]||d.bottom<n&&l[Un]==l[Un+e])return!0;g++,Un++}return!1}function mergeCells(e,n){const l=e.selection;if(!(l instanceof CellSelection)||l.$anchorCell.pos==l.$headCell.pos)return!1;const d=selectedRect(e),{map:g}=d;if(cellsOverlapRectangle(g,d))return!1;if(n){const jn=e.tr,Un={};let zn=Fragment.empty,qn,Kn;for(let Xn=d.top;Xn<d.bottom;Xn++)for(let Qn=d.left;Qn<d.right;Qn++){const Jn=g.map[Xn*g.width+Qn],Ai=d.table.nodeAt(Jn);if(!(Un[Jn]||!Ai))if(Un[Jn]=!0,qn==null)qn=Jn,Kn=Ai;else{isEmpty$1(Ai)||(zn=zn.append(Ai.content));const Ri=jn.mapping.map(Jn+d.tableStart);jn.delete(Ri,Ri+Ai.nodeSize)}}if(qn==null||Kn==null)return!0;if(jn.setNodeMarkup(qn+d.tableStart,null,{...addColSpan(Kn.attrs,Kn.attrs.colspan,d.right-d.left-Kn.attrs.colspan),rowspan:d.bottom-d.top}),zn.size>0){const Xn=qn+1+Kn.content.size,Qn=isEmpty$1(Kn)?qn+1:Xn;jn.replaceWith(Qn+d.tableStart,Xn+d.tableStart,zn)}jn.setSelection(new CellSelection(jn.doc.resolve(qn+d.tableStart))),n(jn)}return!0}function splitCell(e,n){const l=tableNodeTypes(e.schema);return splitCellWithType(({node:d})=>l[d.type.spec.tableRole])(e,n)}function splitCellWithType(e){return(n,l)=>{const d=n.selection;let g,jn;if(d instanceof CellSelection){if(d.$anchorCell.pos!=d.$headCell.pos)return!1;g=d.$anchorCell.nodeAfter,jn=d.$anchorCell.pos}else{var Un;if(g=cellWrapping(d.$from),!g)return!1;jn=(Un=cellAround(d.$from))===null||Un===void 0?void 0:Un.pos}if(g==null||jn==null||g.attrs.colspan==1&&g.attrs.rowspan==1)return!1;if(l){let zn=g.attrs;const qn=[],Kn=zn.colwidth;zn.rowspan>1&&(zn={...zn,rowspan:1}),zn.colspan>1&&(zn={...zn,colspan:1});const Xn=selectedRect(n),Qn=n.tr;for(let Ai=0;Ai<Xn.right-Xn.left;Ai++)qn.push(Kn?{...zn,colwidth:Kn&&Kn[Ai]?[Kn[Ai]]:null}:zn);let Jn;for(let Ai=Xn.top;Ai<Xn.bottom;Ai++){let Ri=Xn.map.positionAt(Ai,Xn.left,Xn.table);Ai==Xn.top&&(Ri+=g.nodeSize);for(let Ni=Xn.left,$i=0;Ni<Xn.right;Ni++,$i++)Ni==Xn.left&&Ai==Xn.top||Qn.insert(Jn=Qn.mapping.map(Ri+Xn.tableStart,1),e({node:g,row:Ai,col:Ni}).createAndFill(qn[$i]))}Qn.setNodeMarkup(jn,e({node:g,row:Xn.top,col:Xn.left}),qn[0]),d instanceof CellSelection&&Qn.setSelection(new CellSelection(Qn.doc.resolve(d.$anchorCell.pos),Jn?Qn.doc.resolve(Jn):void 0)),l(Qn)}return!0}}function deprecated_toggleHeader(e){return function(n,l){if(!isInTable(n))return!1;if(l){const d=tableNodeTypes(n.schema),g=selectedRect(n),jn=n.tr,Un=g.map.cellsInRect(e=="column"?{left:g.left,top:0,right:g.right,bottom:g.map.height}:e=="row"?{left:0,top:g.top,right:g.map.width,bottom:g.bottom}:g),zn=Un.map(qn=>g.table.nodeAt(qn));for(let qn=0;qn<Un.length;qn++)zn[qn].type==d.header_cell&&jn.setNodeMarkup(g.tableStart+Un[qn],d.cell,zn[qn].attrs);if(jn.steps.length===0)for(let qn=0;qn<Un.length;qn++)jn.setNodeMarkup(g.tableStart+Un[qn],d.header_cell,zn[qn].attrs);l(jn)}return!0}}function isHeaderEnabledByType(e,n,l){const d=n.map.cellsInRect({left:0,top:0,right:e=="row"?n.map.width:1,bottom:e=="column"?n.map.height:1});for(let g=0;g<d.length;g++){const jn=n.table.nodeAt(d[g]);if(jn&&jn.type!==l.header_cell)return!1}return!0}function toggleHeader(e,n){return n=n||{useDeprecatedLogic:!1},n.useDeprecatedLogic?deprecated_toggleHeader(e):function(l,d){if(!isInTable(l))return!1;if(d){const g=tableNodeTypes(l.schema),jn=selectedRect(l),Un=l.tr,zn=isHeaderEnabledByType("row",jn,g),qn=isHeaderEnabledByType("column",jn,g),Kn=(e==="column"?zn:e==="row"&&qn)?1:0,Xn=e=="column"?{left:0,top:Kn,right:1,bottom:jn.map.height}:e=="row"?{left:Kn,top:0,right:jn.map.width,bottom:1}:jn,Qn=e=="column"?qn?g.cell:g.header_cell:e=="row"?zn?g.cell:g.header_cell:g.cell;jn.map.cellsInRect(Xn).forEach(Jn=>{const Ai=Jn+jn.tableStart,Ri=Un.doc.nodeAt(Ai);Ri&&Un.setNodeMarkup(Ai,Qn,Ri.attrs)}),d(Un)}return!0}}toggleHeader("row",{useDeprecatedLogic:!0});toggleHeader("column",{useDeprecatedLogic:!0});toggleHeader("cell",{useDeprecatedLogic:!0});function findNextCell(e,n){if(n<0){const l=e.nodeBefore;if(l)return e.pos-l.nodeSize;for(let d=e.index(-1)-1,g=e.before();d>=0;d--){const jn=e.node(-1).child(d),Un=jn.lastChild;if(Un)return g-1-Un.nodeSize;g-=jn.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const l=e.node(-1);for(let d=e.indexAfter(-1),g=e.after();d<l.childCount;d++){const jn=l.child(d);if(jn.childCount)return g+1;g+=jn.nodeSize}}return null}function goToNextCell(e){return function(n,l){if(!isInTable(n))return!1;const d=findNextCell(selectionCell(n),e);if(d==null)return!1;if(l){const g=n.doc.resolve(d);l(n.tr.setSelection(TextSelection.between(g,moveCellForward(g))).scrollIntoView())}return!0}}function deleteCellSelection(e,n){const l=e.selection;if(!(l instanceof CellSelection))return!1;if(n){const d=e.tr,g=tableNodeTypes(e.schema).cell.createAndFill().content;l.forEachCell((jn,Un)=>{jn.content.eq(g)||d.replace(d.mapping.map(Un+1),d.mapping.map(Un+jn.nodeSize-1),new Slice(g,0,0))}),d.docChanged&&n(d)}return!0}function pastedCells(e){if(e.size===0)return null;let{content:n,openStart:l,openEnd:d}=e;for(;n.childCount==1&&(l>0&&d>0||n.child(0).type.spec.tableRole=="table");)l--,d--,n=n.child(0).content;const g=n.child(0),jn=g.type.spec.tableRole,Un=g.type.schema,zn=[];if(jn=="row")for(let qn=0;qn<n.childCount;qn++){let Kn=n.child(qn).content;const Xn=qn?0:Math.max(0,l-1),Qn=qn<n.childCount-1?0:Math.max(0,d-1);(Xn||Qn)&&(Kn=fitSlice(tableNodeTypes(Un).row,new Slice(Kn,Xn,Qn)).content),zn.push(Kn)}else if(jn=="cell"||jn=="header_cell")zn.push(l||d?fitSlice(tableNodeTypes(Un).row,new Slice(n,l,d)).content:n);else return null;return ensureRectangular(Un,zn)}function ensureRectangular(e,n){const l=[];for(let g=0;g<n.length;g++){const jn=n[g];for(let Un=jn.childCount-1;Un>=0;Un--){const{rowspan:zn,colspan:qn}=jn.child(Un).attrs;for(let Kn=g;Kn<g+zn;Kn++)l[Kn]=(l[Kn]||0)+qn}}let d=0;for(let g=0;g<l.length;g++)d=Math.max(d,l[g]);for(let g=0;g<l.length;g++)if(g>=n.length&&n.push(Fragment.empty),l[g]<d){const jn=tableNodeTypes(e).cell.createAndFill(),Un=[];for(let zn=l[g];zn<d;zn++)Un.push(jn);n[g]=n[g].append(Fragment.from(Un))}return{height:n.length,width:d,rows:n}}function fitSlice(e,n){const l=e.createAndFill();return new Transform(l).replace(0,l.content.size,n).doc}function clipCells({width:e,height:n,rows:l},d,g){if(e!=d){const jn=[],Un=[];for(let zn=0;zn<l.length;zn++){const qn=l[zn],Kn=[];for(let Xn=jn[zn]||0,Qn=0;Xn<d;Qn++){let Jn=qn.child(Qn%qn.childCount);Xn+Jn.attrs.colspan>d&&(Jn=Jn.type.createChecked(removeColSpan(Jn.attrs,Jn.attrs.colspan,Xn+Jn.attrs.colspan-d),Jn.content)),Kn.push(Jn),Xn+=Jn.attrs.colspan;for(let Ai=1;Ai<Jn.attrs.rowspan;Ai++)jn[zn+Ai]=(jn[zn+Ai]||0)+Jn.attrs.colspan}Un.push(Fragment.from(Kn))}l=Un,e=d}if(n!=g){const jn=[];for(let Un=0,zn=0;Un<g;Un++,zn++){const qn=[],Kn=l[zn%n];for(let Xn=0;Xn<Kn.childCount;Xn++){let Qn=Kn.child(Xn);Un+Qn.attrs.rowspan>g&&(Qn=Qn.type.create({...Qn.attrs,rowspan:Math.max(1,g-Qn.attrs.rowspan)},Qn.content)),qn.push(Qn)}jn.push(Fragment.from(qn))}l=jn,n=g}return{width:e,height:n,rows:l}}function growTable(e,n,l,d,g,jn,Un){const zn=e.doc.type.schema,qn=tableNodeTypes(zn);let Kn,Xn;if(g>n.width)for(let Qn=0,Jn=0;Qn<n.height;Qn++){const Ai=l.child(Qn);Jn+=Ai.nodeSize;const Ri=[];let Ni;Ai.lastChild==null||Ai.lastChild.type==qn.cell?Ni=Kn||(Kn=qn.cell.createAndFill()):Ni=Xn||(Xn=qn.header_cell.createAndFill());for(let $i=n.width;$i<g;$i++)Ri.push(Ni);e.insert(e.mapping.slice(Un).map(Jn-1+d),Ri)}if(jn>n.height){const Qn=[];for(let Ri=0,Ni=(n.height-1)*n.width;Ri<Math.max(n.width,g);Ri++){const $i=Ri>=n.width?!1:l.nodeAt(n.map[Ni+Ri]).type==qn.header_cell;Qn.push($i?Xn||(Xn=qn.header_cell.createAndFill()):Kn||(Kn=qn.cell.createAndFill()))}const Jn=qn.row.create(null,Fragment.from(Qn)),Ai=[];for(let Ri=n.height;Ri<jn;Ri++)Ai.push(Jn);e.insert(e.mapping.slice(Un).map(d+l.nodeSize-2),Ai)}return!!(Kn||Xn)}function isolateHorizontal(e,n,l,d,g,jn,Un,zn){if(Un==0||Un==n.height)return!1;let qn=!1;for(let Kn=g;Kn<jn;Kn++){const Xn=Un*n.width+Kn,Qn=n.map[Xn];if(n.map[Xn-n.width]==Qn){qn=!0;const Jn=l.nodeAt(Qn),{top:Ai,left:Ri}=n.findCell(Qn);e.setNodeMarkup(e.mapping.slice(zn).map(Qn+d),null,{...Jn.attrs,rowspan:Un-Ai}),e.insert(e.mapping.slice(zn).map(n.positionAt(Un,Ri,l)),Jn.type.createAndFill({...Jn.attrs,rowspan:Ai+Jn.attrs.rowspan-Un})),Kn+=Jn.attrs.colspan-1}}return qn}function isolateVertical(e,n,l,d,g,jn,Un,zn){if(Un==0||Un==n.width)return!1;let qn=!1;for(let Kn=g;Kn<jn;Kn++){const Xn=Kn*n.width+Un,Qn=n.map[Xn];if(n.map[Xn-1]==Qn){qn=!0;const Jn=l.nodeAt(Qn),Ai=n.colCount(Qn),Ri=e.mapping.slice(zn).map(Qn+d);e.setNodeMarkup(Ri,null,removeColSpan(Jn.attrs,Un-Ai,Jn.attrs.colspan-(Un-Ai))),e.insert(Ri+Jn.nodeSize,Jn.type.createAndFill(removeColSpan(Jn.attrs,0,Un-Ai))),Kn+=Jn.attrs.rowspan-1}}return qn}function insertCells(e,n,l,d,g){let jn=l?e.doc.nodeAt(l-1):e.doc;if(!jn)throw new Error("No table found");let Un=TableMap.get(jn);const{top:zn,left:qn}=d,Kn=qn+g.width,Xn=zn+g.height,Qn=e.tr;let Jn=0;function Ai(){if(jn=l?Qn.doc.nodeAt(l-1):Qn.doc,!jn)throw new Error("No table found");Un=TableMap.get(jn),Jn=Qn.mapping.maps.length}growTable(Qn,Un,jn,l,Kn,Xn,Jn)&&Ai(),isolateHorizontal(Qn,Un,jn,l,qn,Kn,zn,Jn)&&Ai(),isolateHorizontal(Qn,Un,jn,l,qn,Kn,Xn,Jn)&&Ai(),isolateVertical(Qn,Un,jn,l,zn,Xn,qn,Jn)&&Ai(),isolateVertical(Qn,Un,jn,l,zn,Xn,Kn,Jn)&&Ai();for(let Ri=zn;Ri<Xn;Ri++){const Ni=Un.positionAt(Ri,qn,jn),$i=Un.positionAt(Ri,Kn,jn);Qn.replace(Qn.mapping.slice(Jn).map(Ni+l),Qn.mapping.slice(Jn).map($i+l),new Slice(g.rows[Ri-zn],0,0))}Ai(),Qn.setSelection(new CellSelection(Qn.doc.resolve(l+Un.positionAt(zn,qn,jn)),Qn.doc.resolve(l+Un.positionAt(Xn-1,Kn-1,jn)))),n(Qn)}const handleKeyDown$1=keydownHandler({ArrowLeft:arrow$5("horiz",-1),ArrowRight:arrow$5("horiz",1),ArrowUp:arrow$5("vert",-1),ArrowDown:arrow$5("vert",1),"Shift-ArrowLeft":shiftArrow("horiz",-1),"Shift-ArrowRight":shiftArrow("horiz",1),"Shift-ArrowUp":shiftArrow("vert",-1),"Shift-ArrowDown":shiftArrow("vert",1),Backspace:deleteCellSelection,"Mod-Backspace":deleteCellSelection,Delete:deleteCellSelection,"Mod-Delete":deleteCellSelection});function maybeSetSelection(e,n,l){return l.eq(e.selection)?!1:(n&&n(e.tr.setSelection(l).scrollIntoView()),!0)}function arrow$5(e,n){return(l,d,g)=>{if(!g)return!1;const jn=l.selection;if(jn instanceof CellSelection)return maybeSetSelection(l,d,Selection.near(jn.$headCell,n));if(e!="horiz"&&!jn.empty)return!1;const Un=atEndOfCell(g,e,n);if(Un==null)return!1;if(e=="horiz")return maybeSetSelection(l,d,Selection.near(l.doc.resolve(jn.head+n),n));{const zn=l.doc.resolve(Un),qn=nextCell(zn,e,n);let Kn;return qn?Kn=Selection.near(qn,1):n<0?Kn=Selection.near(l.doc.resolve(zn.before(-1)),-1):Kn=Selection.near(l.doc.resolve(zn.after(-1)),1),maybeSetSelection(l,d,Kn)}}}function shiftArrow(e,n){return(l,d,g)=>{if(!g)return!1;const jn=l.selection;let Un;if(jn instanceof CellSelection)Un=jn;else{const qn=atEndOfCell(g,e,n);if(qn==null)return!1;Un=new CellSelection(l.doc.resolve(qn))}const zn=nextCell(Un.$headCell,e,n);return zn?maybeSetSelection(l,d,new CellSelection(Un.$anchorCell,zn)):!1}}function handleTripleClick(e,n){const l=e.state.doc,d=cellAround(l.resolve(n));return d?(e.dispatch(e.state.tr.setSelection(new CellSelection(d))),!0):!1}function handlePaste(e,n,l){if(!isInTable(e.state))return!1;let d=pastedCells(l);const g=e.state.selection;if(g instanceof CellSelection){d||(d={width:1,height:1,rows:[Fragment.from(fitSlice(tableNodeTypes(e.state.schema).cell,l))]});const jn=g.$anchorCell.node(-1),Un=g.$anchorCell.start(-1),zn=TableMap.get(jn).rectBetween(g.$anchorCell.pos-Un,g.$headCell.pos-Un);return d=clipCells(d,zn.right-zn.left,zn.bottom-zn.top),insertCells(e.state,e.dispatch,Un,zn,d),!0}else if(d){const jn=selectionCell(e.state),Un=jn.start(-1);return insertCells(e.state,e.dispatch,Un,TableMap.get(jn.node(-1)).findCell(jn.pos-Un),d),!0}else return!1}function handleMouseDown$1(e,n){var l;if(n.button!=0||n.ctrlKey||n.metaKey)return;const d=domInCell(e,n.target);let g;if(n.shiftKey&&e.state.selection instanceof CellSelection)jn(e.state.selection.$anchorCell,n),n.preventDefault();else if(n.shiftKey&&d&&(g=cellAround(e.state.selection.$anchor))!=null&&((l=cellUnderMouse(e,n))===null||l===void 0?void 0:l.pos)!=g.pos)jn(g,n),n.preventDefault();else if(!d)return;function jn(qn,Kn){let Xn=cellUnderMouse(e,Kn);const Qn=tableEditingKey.getState(e.state)==null;if(!Xn||!inSameTable(qn,Xn))if(Qn)Xn=qn;else return;const Jn=new CellSelection(qn,Xn);if(Qn||!e.state.selection.eq(Jn)){const Ai=e.state.tr.setSelection(Jn);Qn&&Ai.setMeta(tableEditingKey,qn.pos),e.dispatch(Ai)}}function Un(){e.root.removeEventListener("mouseup",Un),e.root.removeEventListener("dragstart",Un),e.root.removeEventListener("mousemove",zn),tableEditingKey.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(tableEditingKey,-1))}function zn(qn){const Kn=qn,Xn=tableEditingKey.getState(e.state);let Qn;if(Xn!=null)Qn=e.state.doc.resolve(Xn);else if(domInCell(e,Kn.target)!=d&&(Qn=cellUnderMouse(e,n),!Qn))return Un();Qn&&jn(Qn,Kn)}e.root.addEventListener("mouseup",Un),e.root.addEventListener("dragstart",Un),e.root.addEventListener("mousemove",zn)}function atEndOfCell(e,n,l){if(!(e.state.selection instanceof TextSelection))return null;const{$head:d}=e.state.selection;for(let g=d.depth-1;g>=0;g--){const jn=d.node(g);if((l<0?d.index(g):d.indexAfter(g))!=(l<0?0:jn.childCount))return null;if(jn.type.spec.tableRole=="cell"||jn.type.spec.tableRole=="header_cell"){const Un=d.before(g),zn=n=="vert"?l>0?"down":"up":l>0?"right":"left";return e.endOfTextblock(zn)?Un:null}}return null}function domInCell(e,n){for(;n&&n!=e.dom;n=n.parentNode)if(n.nodeName=="TD"||n.nodeName=="TH")return n;return null}function cellUnderMouse(e,n){const l=e.posAtCoords({left:n.clientX,top:n.clientY});if(!l)return null;let{inside:d,pos:g}=l;return d>=0&&cellAround(e.state.doc.resolve(d))||cellAround(e.state.doc.resolve(g))}var TableView=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumnsOnResize(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,updateColumnsOnResize(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function updateColumnsOnResize(e,n,l,d,g,jn){let Un=0,zn=!0,qn=n.firstChild;const Kn=e.firstChild;if(Kn){for(let Qn=0,Jn=0;Qn<Kn.childCount;Qn++){const{colspan:Ai,colwidth:Ri}=Kn.child(Qn).attrs;for(let Ni=0;Ni<Ai;Ni++,Jn++){const $i=g==Jn?jn:Ri&&Ri[Ni],Li=$i?$i+"px":"";if(Un+=$i||d,$i||(zn=!1),qn)qn.style.width!=Li&&(qn.style.width=Li),qn=qn.nextSibling;else{const ji=document.createElement("col");ji.style.width=Li,n.appendChild(ji)}}}for(;qn;){var Xn;const Qn=qn.nextSibling;(Xn=qn.parentNode)===null||Xn===void 0||Xn.removeChild(qn),qn=Qn}zn?(l.style.width=Un+"px",l.style.minWidth=""):(l.style.width="",l.style.minWidth=Un+"px")}}const columnResizingPluginKey=new PluginKey("tableColumnResizing");function columnResizing({handleWidth:e=5,cellMinWidth:n=25,defaultCellMinWidth:l=100,View:d=TableView,lastColumnResizable:g=!0}={}){const jn=new Plugin({key:columnResizingPluginKey,state:{init(Un,zn){var qn;const Kn=(qn=jn.spec)===null||qn===void 0||(qn=qn.props)===null||qn===void 0?void 0:qn.nodeViews,Xn=tableNodeTypes(zn.schema).table.name;return d&&Kn&&(Kn[Xn]=(Qn,Jn)=>new d(Qn,l,Jn)),new ResizeState(-1,!1)},apply(Un,zn){return zn.apply(Un)}},props:{attributes:Un=>{const zn=columnResizingPluginKey.getState(Un);return zn&&zn.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(Un,zn)=>{handleMouseMove(Un,zn,e,g)},mouseleave:Un=>{handleMouseLeave(Un)},mousedown:(Un,zn)=>{handleMouseDown(Un,zn,n,l)}},decorations:Un=>{const zn=columnResizingPluginKey.getState(Un);if(zn&&zn.activeHandle>-1)return handleDecorations(Un,zn.activeHandle)},nodeViews:{}}});return jn}var ResizeState=class Nm{constructor(n,l){this.activeHandle=n,this.dragging=l}apply(n){const l=this,d=n.getMeta(columnResizingPluginKey);if(d&&d.setHandle!=null)return new Nm(d.setHandle,!1);if(d&&d.setDragging!==void 0)return new Nm(l.activeHandle,d.setDragging);if(l.activeHandle>-1&&n.docChanged){let g=n.mapping.map(l.activeHandle,-1);return pointsAtCell(n.doc.resolve(g))||(g=-1),new Nm(g,l.dragging)}return l}};function handleMouseMove(e,n,l,d){if(!e.editable)return;const g=columnResizingPluginKey.getState(e.state);if(g&&!g.dragging){const jn=domCellAround(n.target);let Un=-1;if(jn){const{left:zn,right:qn}=jn.getBoundingClientRect();n.clientX-zn<=l?Un=edgeCell(e,n,"left",l):qn-n.clientX<=l&&(Un=edgeCell(e,n,"right",l))}if(Un!=g.activeHandle){if(!d&&Un!==-1){const zn=e.state.doc.resolve(Un),qn=zn.node(-1),Kn=TableMap.get(qn),Xn=zn.start(-1);if(Kn.colCount(zn.pos-Xn)+zn.nodeAfter.attrs.colspan-1==Kn.width-1)return}updateHandle(e,Un)}}}function handleMouseLeave(e){if(!e.editable)return;const n=columnResizingPluginKey.getState(e.state);n&&n.activeHandle>-1&&!n.dragging&&updateHandle(e,-1)}function handleMouseDown(e,n,l,d){var g;if(!e.editable)return!1;const jn=(g=e.dom.ownerDocument.defaultView)!==null&&g!==void 0?g:window,Un=columnResizingPluginKey.getState(e.state);if(!Un||Un.activeHandle==-1||Un.dragging)return!1;const zn=e.state.doc.nodeAt(Un.activeHandle),qn=currentColWidth(e,Un.activeHandle,zn.attrs);e.dispatch(e.state.tr.setMeta(columnResizingPluginKey,{setDragging:{startX:n.clientX,startWidth:qn}}));function Kn(Qn){jn.removeEventListener("mouseup",Kn),jn.removeEventListener("mousemove",Xn);const Jn=columnResizingPluginKey.getState(e.state);Jn?.dragging&&(updateColumnWidth(e,Jn.activeHandle,draggedWidth(Jn.dragging,Qn,l)),e.dispatch(e.state.tr.setMeta(columnResizingPluginKey,{setDragging:null})))}function Xn(Qn){if(!Qn.which)return Kn(Qn);const Jn=columnResizingPluginKey.getState(e.state);if(Jn&&Jn.dragging){const Ai=draggedWidth(Jn.dragging,Qn,l);displayColumnWidth(e,Jn.activeHandle,Ai,d)}}return displayColumnWidth(e,Un.activeHandle,qn,d),jn.addEventListener("mouseup",Kn),jn.addEventListener("mousemove",Xn),n.preventDefault(),!0}function currentColWidth(e,n,{colspan:l,colwidth:d}){const g=d&&d[d.length-1];if(g)return g;const jn=e.domAtPos(n);let Un=jn.node.childNodes[jn.offset].offsetWidth,zn=l;if(d)for(let qn=0;qn<l;qn++)d[qn]&&(Un-=d[qn],zn--);return Un/zn}function domCellAround(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function edgeCell(e,n,l,d){const g=l=="right"?-d:d,jn=e.posAtCoords({left:n.clientX+g,top:n.clientY});if(!jn)return-1;const{pos:Un}=jn,zn=cellAround(e.state.doc.resolve(Un));if(!zn)return-1;if(l=="right")return zn.pos;const qn=TableMap.get(zn.node(-1)),Kn=zn.start(-1),Xn=qn.map.indexOf(zn.pos-Kn);return Xn%qn.width==0?-1:Kn+qn.map[Xn-1]}function draggedWidth(e,n,l){const d=n.clientX-e.startX;return Math.max(l,e.startWidth+d)}function updateHandle(e,n){e.dispatch(e.state.tr.setMeta(columnResizingPluginKey,{setHandle:n}))}function updateColumnWidth(e,n,l){const d=e.state.doc.resolve(n),g=d.node(-1),jn=TableMap.get(g),Un=d.start(-1),zn=jn.colCount(d.pos-Un)+d.nodeAfter.attrs.colspan-1,qn=e.state.tr;for(let Kn=0;Kn<jn.height;Kn++){const Xn=Kn*jn.width+zn;if(Kn&&jn.map[Xn]==jn.map[Xn-jn.width])continue;const Qn=jn.map[Xn],Jn=g.nodeAt(Qn).attrs,Ai=Jn.colspan==1?0:zn-jn.colCount(Qn);if(Jn.colwidth&&Jn.colwidth[Ai]==l)continue;const Ri=Jn.colwidth?Jn.colwidth.slice():zeroes(Jn.colspan);Ri[Ai]=l,qn.setNodeMarkup(Un+Qn,null,{...Jn,colwidth:Ri})}qn.docChanged&&e.dispatch(qn)}function displayColumnWidth(e,n,l,d){const g=e.state.doc.resolve(n),jn=g.node(-1),Un=g.start(-1),zn=TableMap.get(jn).colCount(g.pos-Un)+g.nodeAfter.attrs.colspan-1;let qn=e.domAtPos(g.start(-1)).node;for(;qn&&qn.nodeName!="TABLE";)qn=qn.parentNode;qn&&updateColumnsOnResize(jn,qn.firstChild,qn,d,zn,l)}function zeroes(e){return Array(e).fill(0)}function handleDecorations(e,n){const l=[],d=e.doc.resolve(n),g=d.node(-1);if(!g)return DecorationSet.empty;const jn=TableMap.get(g),Un=d.start(-1),zn=jn.colCount(d.pos-Un)+d.nodeAfter.attrs.colspan-1;for(let Kn=0;Kn<jn.height;Kn++){const Xn=zn+Kn*jn.width;if((zn==jn.width-1||jn.map[Xn]!=jn.map[Xn+1])&&(Kn==0||jn.map[Xn]!=jn.map[Xn-jn.width])){var qn;const Qn=jn.map[Xn],Jn=Un+Qn+g.nodeAt(Qn).nodeSize-1,Ai=document.createElement("div");Ai.className="column-resize-handle",!((qn=columnResizingPluginKey.getState(e))===null||qn===void 0)&&qn.dragging&&l.push(Decoration.node(Un+Qn,Un+Qn+g.nodeAt(Qn).nodeSize,{class:"column-resize-dragging"})),l.push(Decoration.widget(Jn,Ai))}}return DecorationSet.create(e.doc,l)}function tableEditing({allowTableNodeSelection:e=!1}={}){return new Plugin({key:tableEditingKey,state:{init(){return null},apply(n,l){const d=n.getMeta(tableEditingKey);if(d!=null)return d==-1?null:d;if(l==null||!n.docChanged)return l;const{deleted:g,pos:jn}=n.mapping.mapResult(l);return g?null:jn}},props:{decorations:drawCellSelection,handleDOMEvents:{mousedown:handleMouseDown$1},createSelectionBetween(n){return tableEditingKey.getState(n.state)!=null?n.state.selection:null},handleTripleClick,handleKeyDown:handleKeyDown$1,handlePaste},appendTransaction(n,l,d){return normalizeSelection(d,fixTables(d,l),e)}})}const create$9=()=>new Map,copy=e=>{const n=create$9();return e.forEach((l,d)=>{n.set(d,l)}),n},setIfUndefined=(e,n,l)=>{let d=e.get(n);return d===void 0&&e.set(n,d=l()),d},map$3=(e,n)=>{const l=[];for(const[d,g]of e)l.push(n(g,d));return l},any=(e,n)=>{for(const[l,d]of e)if(n(d,l))return!0;return!1},create$8=()=>new Set,last=e=>e[e.length-1],appendTo=(e,n)=>{for(let l=0;l<n.length;l++)e.push(n[l])},from=Array.from,every$1=(e,n)=>{for(let l=0;l<e.length;l++)if(!n(e[l],l,e))return!1;return!0},some=(e,n)=>{for(let l=0;l<e.length;l++)if(n(e[l],l,e))return!0;return!1},unfold=(e,n)=>{const l=new Array(e);for(let d=0;d<e;d++)l[d]=n(d,l);return l},isArray=Array.isArray;class ObservableV2{constructor(){this._observers=create$9()}on(n,l){return setIfUndefined(this._observers,n,create$8).add(l),l}once(n,l){const d=(...g)=>{this.off(n,d),l(...g)};this.on(n,d)}off(n,l){const d=this._observers.get(n);d!==void 0&&(d.delete(l),d.size===0&&this._observers.delete(n))}emit(n,l){return from((this._observers.get(n)||create$9()).values()).forEach(d=>d(...l))}destroy(){this._observers=create$9()}}class Observable{constructor(){this._observers=create$9()}on(n,l){setIfUndefined(this._observers,n,create$8).add(l)}once(n,l){const d=(...g)=>{this.off(n,d),l(...g)};this.on(n,d)}off(n,l){const d=this._observers.get(n);d!==void 0&&(d.delete(l),d.size===0&&this._observers.delete(n))}emit(n,l){return from((this._observers.get(n)||create$9()).values()).forEach(d=>d(...l))}destroy(){this._observers=create$9()}}const floor$1=Math.floor,abs=Math.abs,min$1=(e,n)=>e<n?e:n,max$1=(e,n)=>e>n?e:n,isNegativeZero=e=>e!==0?e<0:1/e<0,BIT1=1,BIT2=2,BIT3=4,BIT4=8,BIT6=32,BIT7=64,BIT8=128,BIT30=1<<29,BITS5=31,BITS6=63,BITS7=127,BITS31=2147483647,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,isInteger=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&floor$1(e)===e),fromCharCode=String.fromCharCode,toLowerCase=e=>e.toLowerCase(),trimLeftRegex=/^\s*/g,trimLeft=e=>e.replace(trimLeftRegex,""),fromCamelCaseRegex=/([A-Z])/g,fromCamelCase=(e,n)=>trimLeft(e.replace(fromCamelCaseRegex,l=>`${n}${toLowerCase(l)}`)),_encodeUtf8Polyfill=e=>{const n=unescape(encodeURIComponent(e)),l=n.length,d=new Uint8Array(l);for(let g=0;g<l;g++)d[g]=n.codePointAt(g);return d},utf8TextEncoder=typeof TextEncoder<"u"?new TextEncoder:null,_encodeUtf8Native=e=>utf8TextEncoder.encode(e),encodeUtf8=utf8TextEncoder?_encodeUtf8Native:_encodeUtf8Polyfill;let utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});utf8TextDecoder&&utf8TextDecoder.decode(new Uint8Array).length===1&&(utf8TextDecoder=null);const repeat=(e,n)=>unfold(n,()=>e).join("");class Encoder{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const createEncoder=()=>new Encoder,encode=e=>{const n=createEncoder();return e(n),toUint8Array(n)},length=e=>{let n=e.cpos;for(let l=0;l<e.bufs.length;l++)n+=e.bufs[l].length;return n},toUint8Array=e=>{const n=new Uint8Array(length(e));let l=0;for(let d=0;d<e.bufs.length;d++){const g=e.bufs[d];n.set(g,l),l+=g.length}return n.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),l),n},verifyLen=(e,n)=>{const l=e.cbuf.length;l-e.cpos<n&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(max$1(l,n)*2),e.cpos=0)},write=(e,n)=>{const l=e.cbuf.length;e.cpos===l&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(l*2),e.cpos=0),e.cbuf[e.cpos++]=n},writeUint8=write,writeVarUint=(e,n)=>{for(;n>BITS7;)write(e,BIT8|BITS7&n),n=floor$1(n/128);write(e,BITS7&n)},writeVarInt=(e,n)=>{const l=isNegativeZero(n);for(l&&(n=-n),write(e,(n>BITS6?BIT8:0)|(l?BIT7:0)|BITS6&n),n=floor$1(n/64);n>0;)write(e,(n>BITS7?BIT8:0)|BITS7&n),n=floor$1(n/128)},_strBuffer=new Uint8Array(3e4),_maxStrBSize=_strBuffer.length/3,_writeVarStringNative=(e,n)=>{if(n.length<_maxStrBSize){const l=utf8TextEncoder.encodeInto(n,_strBuffer).written||0;writeVarUint(e,l);for(let d=0;d<l;d++)write(e,_strBuffer[d])}else writeVarUint8Array(e,encodeUtf8(n))},_writeVarStringPolyfill=(e,n)=>{const l=unescape(encodeURIComponent(n)),d=l.length;writeVarUint(e,d);for(let g=0;g<d;g++)write(e,l.codePointAt(g))},writeVarString=utf8TextEncoder&&utf8TextEncoder.encodeInto?_writeVarStringNative:_writeVarStringPolyfill,writeUint8Array=(e,n)=>{const l=e.cbuf.length,d=e.cpos,g=min$1(l-d,n.length),jn=n.length-g;e.cbuf.set(n.subarray(0,g),d),e.cpos+=g,jn>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(max$1(l*2,jn)),e.cbuf.set(n.subarray(g)),e.cpos=jn)},writeVarUint8Array=(e,n)=>{writeVarUint(e,n.byteLength),writeUint8Array(e,n)},writeOnDataView=(e,n)=>{verifyLen(e,n);const l=new DataView(e.cbuf.buffer,e.cpos,n);return e.cpos+=n,l},writeFloat32=(e,n)=>writeOnDataView(e,4).setFloat32(0,n,!1),writeFloat64=(e,n)=>writeOnDataView(e,8).setFloat64(0,n,!1),writeBigInt64=(e,n)=>writeOnDataView(e,8).setBigInt64(0,n,!1),floatTestBed=new DataView(new ArrayBuffer(4)),isFloat32=e=>(floatTestBed.setFloat32(0,e),floatTestBed.getFloat32(0)===e),writeAny=(e,n)=>{switch(typeof n){case"string":write(e,119),writeVarString(e,n);break;case"number":isInteger(n)&&abs(n)<=BITS31?(write(e,125),writeVarInt(e,n)):isFloat32(n)?(write(e,124),writeFloat32(e,n)):(write(e,123),writeFloat64(e,n));break;case"bigint":write(e,122),writeBigInt64(e,n);break;case"object":if(n===null)write(e,126);else if(isArray(n)){write(e,117),writeVarUint(e,n.length);for(let l=0;l<n.length;l++)writeAny(e,n[l])}else if(n instanceof Uint8Array)write(e,116),writeVarUint8Array(e,n);else{write(e,118);const l=Object.keys(n);writeVarUint(e,l.length);for(let d=0;d<l.length;d++){const g=l[d];writeVarString(e,g),writeAny(e,n[g])}}break;case"boolean":write(e,n?120:121);break;default:write(e,127)}};class RleEncoder extends Encoder{constructor(n){super(),this.w=n,this.s=null,this.count=0}write(n){this.s===n?this.count++:(this.count>0&&writeVarUint(this,this.count-1),this.count=1,this.w(this,n),this.s=n)}}const flushUintOptRleEncoder=e=>{e.count>0&&(writeVarInt(e.encoder,e.count===1?e.s:-e.s),e.count>1&&writeVarUint(e.encoder,e.count-2))};class UintOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0}write(n){this.s===n?this.count++:(flushUintOptRleEncoder(this),this.count=1,this.s=n)}toUint8Array(){return flushUintOptRleEncoder(this),toUint8Array(this.encoder)}}const flushIntDiffOptRleEncoder=e=>{if(e.count>0){const n=e.diff*2+(e.count===1?0:1);writeVarInt(e.encoder,n),e.count>1&&writeVarUint(e.encoder,e.count-2)}};class IntDiffOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0,this.diff=0}write(n){this.diff===n-this.s?(this.s=n,this.count++):(flushIntDiffOptRleEncoder(this),this.count=1,this.diff=n-this.s,this.s=n)}toUint8Array(){return flushIntDiffOptRleEncoder(this),toUint8Array(this.encoder)}}class StringEncoder{constructor(){this.sarr=[],this.s="",this.lensE=new UintOptRleEncoder}write(n){this.s+=n,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(n.length)}toUint8Array(){const n=new Encoder;return this.sarr.push(this.s),this.s="",writeVarString(n,this.sarr.join("")),writeUint8Array(n,this.lensE.toUint8Array()),toUint8Array(n)}}const create$7=e=>new Error(e),methodUnimplemented=()=>{throw create$7("Method unimplemented")},unexpectedCase=()=>{throw create$7("Unexpected case")},errorUnexpectedEndOfArray=create$7("Unexpected end of array"),errorIntegerOutOfRange=create$7("Integer out of Range");class Decoder{constructor(n){this.arr=n,this.pos=0}}const createDecoder=e=>new Decoder(e),hasContent=e=>e.pos!==e.arr.length,readUint8Array=(e,n)=>{const l=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,n);return e.pos+=n,l},readVarUint8Array=e=>readUint8Array(e,readVarUint(e)),readUint8=e=>e.arr[e.pos++],readVarUint=e=>{let n=0,l=1;const d=e.arr.length;for(;e.pos<d;){const g=e.arr[e.pos++];if(n=n+(g&BITS7)*l,l*=128,g<BIT8)return n;if(n>MAX_SAFE_INTEGER)throw errorIntegerOutOfRange}throw errorUnexpectedEndOfArray},readVarInt=e=>{let n=e.arr[e.pos++],l=n&BITS6,d=64;const g=(n&BIT7)>0?-1:1;if((n&BIT8)===0)return g*l;const jn=e.arr.length;for(;e.pos<jn;){if(n=e.arr[e.pos++],l=l+(n&BITS7)*d,d*=128,n<BIT8)return g*l;if(l>MAX_SAFE_INTEGER)throw errorIntegerOutOfRange}throw errorUnexpectedEndOfArray},_readVarStringPolyfill=e=>{let n=readVarUint(e);if(n===0)return"";{let l=String.fromCodePoint(readUint8(e));if(--n<100)for(;n--;)l+=String.fromCodePoint(readUint8(e));else for(;n>0;){const d=n<1e4?n:1e4,g=e.arr.subarray(e.pos,e.pos+d);e.pos+=d,l+=String.fromCodePoint.apply(null,g),n-=d}return decodeURIComponent(escape(l))}},_readVarStringNative=e=>utf8TextDecoder.decode(readVarUint8Array(e)),readVarString=utf8TextDecoder?_readVarStringNative:_readVarStringPolyfill,readFromDataView=(e,n)=>{const l=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,n);return e.pos+=n,l},readFloat32=e=>readFromDataView(e,4).getFloat32(0,!1),readFloat64=e=>readFromDataView(e,8).getFloat64(0,!1),readBigInt64=e=>readFromDataView(e,8).getBigInt64(0,!1),readAnyLookupTable=[e=>{},e=>null,readVarInt,readFloat32,readFloat64,readBigInt64,e=>!1,e=>!0,readVarString,e=>{const n=readVarUint(e),l={};for(let d=0;d<n;d++){const g=readVarString(e);l[g]=readAny(e)}return l},e=>{const n=readVarUint(e),l=[];for(let d=0;d<n;d++)l.push(readAny(e));return l},readVarUint8Array],readAny=e=>readAnyLookupTable[127-readUint8(e)](e);class RleDecoder extends Decoder{constructor(n,l){super(n),this.reader=l,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),hasContent(this)?this.count=readVarUint(this)+1:this.count=-1),this.count--,this.s}}class UintOptRleDecoder extends Decoder{constructor(n){super(n),this.s=0,this.count=0}read(){if(this.count===0){this.s=readVarInt(this);const n=isNegativeZero(this.s);this.count=1,n&&(this.s=-this.s,this.count=readVarUint(this)+2)}return this.count--,this.s}}class IntDiffOptRleDecoder extends Decoder{constructor(n){super(n),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const n=readVarInt(this),l=n&1;this.diff=floor$1(n/2),this.count=1,l&&(this.count=readVarUint(this)+2)}return this.s+=this.diff,this.count--,this.s}}class StringDecoder{constructor(n){this.decoder=new UintOptRleDecoder(n),this.str=readVarString(this.decoder),this.spos=0}read(){const n=this.spos+this.decoder.read(),l=this.str.slice(this.spos,n);return this.spos=n,l}}const getRandomValues=crypto.getRandomValues.bind(crypto),rand=Math.random,uint32=()=>getRandomValues(new Uint32Array(1))[0],oneOf$1=e=>e[floor$1(rand()*e.length)],uuidv4Template="10000000-1000-4000-8000"+-1e11,uuidv4=()=>uuidv4Template.replace(/[018]/g,e=>(e^uint32()&15>>e/4).toString(16)),getUnixTime=Date.now,create$6=e=>new Promise(e);Promise.all.bind(Promise);const undefinedToNull=e=>e===void 0?null:e;class VarStoragePolyfill{constructor(){this.map=new Map}setItem(n,l){this.map.set(n,l)}getItem(n){return this.map.get(n)}}let _localStorage=new VarStoragePolyfill,usePolyfill=!0;try{typeof localStorage<"u"&&localStorage&&(_localStorage=localStorage,usePolyfill=!1)}catch{}const varStorage=_localStorage,EqualityTraitSymbol=Symbol("Equality"),equals=(e,n)=>e===n||!!e?.[EqualityTraitSymbol]?.(n)||!1,isObject$2=e=>typeof e=="object",assign=Object.assign,keys$2=Object.keys,forEach=(e,n)=>{for(const l in e)n(e[l],l)},size$3=e=>keys$2(e).length,isEmpty=e=>{for(const n in e)return!1;return!0},every=(e,n)=>{for(const l in e)if(!n(e[l],l))return!1;return!0},hasProperty$1=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),equalFlat=(e,n)=>e===n||size$3(e)===size$3(n)&&every(e,(l,d)=>(l!==void 0||hasProperty$1(n,d))&&equals(n[d],l)),freeze=Object.freeze,deepFreeze=e=>{for(const n in e){const l=e[n];(typeof l=="object"||typeof l=="function")&&deepFreeze(e[n])}return freeze(e)},callAll=(e,n,l=0)=>{try{for(;l<e.length;l++)e[l](...n)}finally{l<e.length&&callAll(e,n,l+1)}},id=e=>e,equalityDeep=(e,n)=>{if(e===n)return!0;if(e==null||n==null||e.constructor!==n.constructor&&(e.constructor||Object)!==(n.constructor||Object))return!1;if(e[EqualityTraitSymbol]!=null)return e[EqualityTraitSymbol](n);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),n=new Uint8Array(n);case Uint8Array:{if(e.byteLength!==n.byteLength)return!1;for(let l=0;l<e.length;l++)if(e[l]!==n[l])return!1;break}case Set:{if(e.size!==n.size)return!1;for(const l of e)if(!n.has(l))return!1;break}case Map:{if(e.size!==n.size)return!1;for(const l of e.keys())if(!n.has(l)||!equalityDeep(e.get(l),n.get(l)))return!1;break}case void 0:case Object:if(size$3(e)!==size$3(n))return!1;for(const l in e)if(!hasProperty$1(e,l)||!equalityDeep(e[l],n[l]))return!1;break;case Array:if(e.length!==n.length)return!1;for(let l=0;l<e.length;l++)if(!equalityDeep(e[l],n[l]))return!1;break;default:return!1}return!0},isOneOf=(e,n)=>n.includes(e);var define_process_env_default={};const isNode$1=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",isBrowser=typeof window<"u"&&typeof document<"u"&&!isNode$1;let params;const computeParams=()=>{if(params===void 0)if(isNode$1){params=create$9();const e=process.argv;let n=null;for(let l=0;l<e.length;l++){const d=e[l];d[0]==="-"?(n!==null&&params.set(n,""),n=d):n!==null&&(params.set(n,d),n=null)}n!==null&&params.set(n,"")}else typeof location=="object"?(params=create$9(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[n,l]=e.split("=");params.set(`--${fromCamelCase(n,"-")}`,l),params.set(`-${fromCamelCase(n,"-")}`,l)}})):params=create$9();return params},hasParam=e=>computeParams().has(e),getVariable=e=>undefinedToNull(isNode$1?define_process_env_default[e.toUpperCase().replaceAll("-","_")]:varStorage.getItem(e)),hasConf=e=>hasParam("--"+e)||getVariable(e)!==null,production=hasConf("production"),forceColor=isNode$1&&isOneOf(define_process_env_default.FORCE_COLOR,["true","1","2"]),supportsColor=forceColor||!hasParam("--no-colors")&&!hasConf("no-color")&&(!isNode$1||process.stdout.isTTY)&&(!isNode$1||hasParam("--color")||getVariable("COLORTERM")!==null||(getVariable("TERM")||"").includes("color")),createUint8ArrayFromLen=e=>new Uint8Array(e),toBase64Browser=e=>{let n="";for(let l=0;l<e.byteLength;l++)n+=fromCharCode(e[l]);return btoa(n)},toBase64Node=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),toBase64=isBrowser?toBase64Browser:toBase64Node,copyUint8Array=e=>{const n=createUint8ArrayFromLen(e.byteLength);return n.set(e),n},encodeAny=e=>encode(n=>writeAny(n,e));class Pair{constructor(n,l){this.left=n,this.right=l}}const create$5=(e,n)=>new Pair(e,n),bool=e=>e.next()>=.5,int53=(e,n,l)=>floor$1(e.next()*(l+1-n)+n),int32=(e,n,l)=>floor$1(e.next()*(l+1-n)+n),int31=(e,n,l)=>int32(e,n,l),letter=e=>fromCharCode(int31(e,97,122)),word=(e,n=0,l=20)=>{const d=int31(e,n,l);let g="";for(let jn=0;jn<d;jn++)g+=letter(e);return g},oneOf=(e,n)=>n[int31(e,0,n.length-1)],schemaSymbol=Symbol("0schema");class ValidationError{constructor(){this._rerrs=[]}extend(n,l,d,g=null){this._rerrs.push({path:n,expected:l,has:d,message:g})}toString(){const n=[];for(let l=this._rerrs.length-1;l>0;l--){const d=this._rerrs[l];n.push(repeat(" ",(this._rerrs.length-l)*2)+`${d.path!=null?`[${d.path}] `:""}${d.has} doesn't match ${d.expected}. ${d.message}`)}return n.join(`
`)}}const shapeExtends=(e,n)=>e===n?!0:e==null||n==null||e.constructor!==n.constructor?!1:e[EqualityTraitSymbol]?equals(e,n):isArray(e)?every$1(e,l=>some(n,d=>shapeExtends(l,d))):isObject$2(e)?every(e,(l,d)=>shapeExtends(l,n[d])):!1;let Schema$1=class{static _dilutes=!1;extends(n){let[l,d]=[this.shape,n.shape];return this.constructor._dilutes&&([d,l]=[l,d]),shapeExtends(l,d)}equals(n){return this.constructor===n.constructor&&equalityDeep(this.shape,n.shape)}[schemaSymbol](){return!0}[EqualityTraitSymbol](n){return this.equals(n)}validate(n){return this.check(n)}check(n,l){methodUnimplemented()}get nullable(){return $union(this,$null)}get optional(){return new $Optional(this)}cast(n){return assert(n,this),n}expect(n){return assert(n,this),n}};class $ConstructedBy extends Schema$1{constructor(n,l){super(),this.shape=n,this._c=l}check(n,l=void 0){const d=n?.constructor===this.shape&&(this._c==null||this._c(n));return!d&&l?.extend(null,this.shape.name,n?.constructor.name,n?.constructor!==this.shape?"Constructor match failed":"Check failed"),d}}const $constructedBy=(e,n=null)=>new $ConstructedBy(e,n);$constructedBy($ConstructedBy);class $Custom extends Schema$1{constructor(n){super(),this.shape=n}check(n,l){const d=this.shape(n);return!d&&l?.extend(null,"custom prop",n?.constructor.name,"failed to check custom prop"),d}}const $custom=e=>new $Custom(e);$constructedBy($Custom);class $Literal extends Schema$1{constructor(n){super(),this.shape=n}check(n,l){const d=this.shape.some(g=>g===n);return!d&&l?.extend(null,this.shape.join(" | "),n.toString()),d}}const $literal=(...e)=>new $Literal(e),$$literal=$constructedBy($Literal),_regexEscape=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,n=>"\\"+n)),_schemaStringTemplateToRegex=e=>{if($string.check(e))return[_regexEscape(e)];if($$literal.check(e))return e.shape.map(n=>n+"");if($$number.check(e))return["[+-]?\\d+.?\\d*"];if($$string.check(e))return[".*"];if($$union.check(e))return e.shape.map(_schemaStringTemplateToRegex).flat(1);unexpectedCase()};class $StringTemplate extends Schema$1{constructor(n){super(),this.shape=n,this._r=new RegExp("^"+n.map(_schemaStringTemplateToRegex).map(l=>`(${l.join("|")})`).join("")+"$")}check(n,l){const d=this._r.exec(n)!=null;return!d&&l?.extend(null,this._r.toString(),n.toString(),"String doesn't match string template."),d}}$constructedBy($StringTemplate);const isOptionalSymbol=Symbol("optional");class $Optional extends Schema$1{constructor(n){super(),this.shape=n}check(n,l){const d=n===void 0||this.shape.check(n);return!d&&l?.extend(null,"undefined (optional)","()"),d}get[isOptionalSymbol](){return!0}}const $$optional=$constructedBy($Optional);class $Never extends Schema$1{check(n,l){return l?.extend(null,"never",typeof n),!1}}$constructedBy($Never);class $Object extends Schema$1{constructor(n,l=!1){super(),this.shape=n,this._isPartial=l}static _dilutes=!0;get partial(){return new $Object(this.shape,!0)}check(n,l){return n==null?(l?.extend(null,"object","null"),!1):every(this.shape,(d,g)=>{const jn=this._isPartial&&!hasProperty$1(n,g)||d.check(n[g],l);return!jn&&l?.extend(g.toString(),d.toString(),typeof n[g],"Object property does not match"),jn})}}const $object=e=>new $Object(e),$$object=$constructedBy($Object),$objectAny=$custom(e=>e!=null&&(e.constructor===Object||e.constructor==null));class $Record extends Schema$1{constructor(n,l){super(),this.shape={keys:n,values:l}}check(n,l){return n!=null&&every(n,(d,g)=>{const jn=this.shape.keys.check(g,l);return!jn&&l?.extend(g+"","Record",typeof n,jn?"Key doesn't match schema":"Value doesn't match value"),jn&&this.shape.values.check(d,l)})}}const $record=(e,n)=>new $Record(e,n),$$record=$constructedBy($Record);class $Tuple extends Schema$1{constructor(n){super(),this.shape=n}check(n,l){return n!=null&&every(this.shape,(d,g)=>{const jn=d.check(n[g],l);return!jn&&l?.extend(g.toString(),"Tuple",typeof d),jn})}}const $tuple=(...e)=>new $Tuple(e);$constructedBy($Tuple);class $Array extends Schema$1{constructor(n){super(),this.shape=n.length===1?n[0]:new $Union(n)}check(n,l){const d=isArray(n)&&every$1(n,g=>this.shape.check(g));return!d&&l?.extend(null,"Array",""),d}}const $array=(...e)=>new $Array(e),$$array=$constructedBy($Array),$arrayAny=$custom(e=>isArray(e));class $InstanceOf extends Schema$1{constructor(n,l){super(),this.shape=n,this._c=l}check(n,l){const d=n instanceof this.shape&&(this._c==null||this._c(n));return!d&&l?.extend(null,this.shape.name,n?.constructor.name),d}}const $instanceOf=(e,n=null)=>new $InstanceOf(e,n);$constructedBy($InstanceOf);const $$schema=$instanceOf(Schema$1);class $Lambda extends Schema$1{constructor(n){super(),this.len=n.length-1,this.args=$tuple(...n.slice(-1)),this.res=n[this.len]}check(n,l){const d=n.constructor===Function&&n.length<=this.len;return!d&&l?.extend(null,"function",typeof n),d}}const $$lambda=$constructedBy($Lambda),$function=$custom(e=>typeof e=="function");class $Intersection extends Schema$1{constructor(n){super(),this.shape=n}check(n,l){const d=every$1(this.shape,g=>g.check(n,l));return!d&&l?.extend(null,"Intersectinon",typeof n),d}}$constructedBy($Intersection,e=>e.shape.length>0);class $Union extends Schema$1{static _dilutes=!0;constructor(n){super(),this.shape=n}check(n,l){const d=some(this.shape,g=>g.check(n,l));return l?.extend(null,"Union",typeof n),d}}const $union=(...e)=>e.findIndex(n=>$$union.check(n))>=0?$union(...e.map(n=>$$3(n)).map(n=>$$union.check(n)?n.shape:[n]).flat(1)):e.length===1?e[0]:new $Union(e),$$union=$constructedBy($Union),_t$3=()=>!0,$any=$custom(_t$3),$$any=$constructedBy($Custom,e=>e.shape===_t$3),$bigint=$custom(e=>typeof e=="bigint"),$$bigint=$custom(e=>e===$bigint),$symbol=$custom(e=>typeof e=="symbol");$custom(e=>e===$symbol);const $number=$custom(e=>typeof e=="number"),$$number=$custom(e=>e===$number),$string=$custom(e=>typeof e=="string"),$$string=$custom(e=>e===$string),$boolean=$custom(e=>typeof e=="boolean"),$$boolean=$custom(e=>e===$boolean),$undefined=$literal(void 0);$constructedBy($Literal,e=>e.shape.length===1&&e.shape[0]===void 0);$literal(void 0);const $null=$literal(null),$$null=$constructedBy($Literal,e=>e.shape.length===1&&e.shape[0]===null);$constructedBy(Uint8Array);$constructedBy($ConstructedBy,e=>e.shape===Uint8Array);const $primitive=$union($number,$string,$null,$undefined,$bigint,$boolean,$symbol);(()=>{const e=$array($any),n=$record($string,$any),l=$union($number,$string,$null,$boolean,e,n);return e.shape=l,n.shape.values=l,l})();const $$3=e=>{if($$schema.check(e))return e;if($objectAny.check(e)){const n={};for(const l in e)n[l]=$$3(e[l]);return $object(n)}else{if($arrayAny.check(e))return $union(...e.map($$3));if($primitive.check(e))return $literal(e);if($function.check(e))return $constructedBy(e)}unexpectedCase()},assert=production?()=>{}:(e,n)=>{const l=new ValidationError;if(!n.check(e,l))throw create$7(`Expected value to be of type ${n.constructor.name}.
${l.toString()}`)};class PatternMatcher{constructor(n){this.patterns=[],this.$state=n}if(n,l){return this.patterns.push({if:$$3(n),h:l}),this}else(n){return this.if($any,n)}done(){return(n,l)=>{for(let d=0;d<this.patterns.length;d++){const g=this.patterns[d];if(g.if.check(n))return g.h(n,l)}throw create$7("Unhandled pattern")}}}const match=e=>new PatternMatcher(e),_random=match($any).if($$number,(e,n)=>int53(n,MIN_SAFE_INTEGER,MAX_SAFE_INTEGER)).if($$string,(e,n)=>word(n)).if($$boolean,(e,n)=>bool(n)).if($$bigint,(e,n)=>BigInt(int53(n,MIN_SAFE_INTEGER,MAX_SAFE_INTEGER))).if($$union,(e,n)=>random(n,oneOf(n,e.shape))).if($$object,(e,n)=>{const l={};for(const d in e.shape){let g=e.shape[d];if($$optional.check(g)){if(bool(n))continue;g=g.shape}l[d]=_random(g,n)}return l}).if($$array,(e,n)=>{const l=[],d=int32(n,0,42);for(let g=0;g<d;g++)l.push(random(n,e.shape));return l}).if($$literal,(e,n)=>oneOf(n,e.shape)).if($$null,(e,n)=>null).if($$lambda,(e,n)=>{const l=random(n,e.res);return()=>l}).if($$any,(e,n)=>random(n,oneOf(n,[$number,$string,$null,$undefined,$bigint,$boolean,$array($number),$record($union("a","b","c"),$number)]))).if($$record,(e,n)=>{const l={},d=int53(n,0,3);for(let g=0;g<d;g++){const jn=random(n,e.shape.keys),Un=random(n,e.shape.values);l[jn]=Un}return l}).done(),random=(e,n)=>_random($$3(n),e),doc=typeof document<"u"?document:{};$custom(e=>e.nodeType===DOCUMENT_FRAGMENT_NODE);typeof DOMParser<"u"&&new DOMParser;$custom(e=>e.nodeType===ELEMENT_NODE);$custom(e=>e.nodeType===TEXT_NODE);const mapToStyleString=e=>map$3(e,(n,l)=>`${l}:${n};`).join(""),ELEMENT_NODE=doc.ELEMENT_NODE,TEXT_NODE=doc.TEXT_NODE,DOCUMENT_NODE=doc.DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE=doc.DOCUMENT_FRAGMENT_NODE;$custom(e=>e.nodeType===DOCUMENT_NODE);const createTimeoutClass=e=>class{constructor(l){this._=l}destroy(){e(this._)}},Timeout=createTimeoutClass(clearTimeout),timeout=(e,n)=>new Timeout(setTimeout(n,e)),create$4=Symbol,BOLD=create$4(),UNBOLD=create$4(),BLUE=create$4(),GREY=create$4(),GREEN=create$4(),RED=create$4(),PURPLE=create$4(),ORANGE=create$4(),UNCOLOR=create$4(),computeNoColorLoggingArgs=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const n=[],l=[];let d=0;for(;d<e.length;d++){const g=e[d];if(g===void 0)break;if(g.constructor===String||g.constructor===Number)n.push(g);else if(g.constructor===Object)break}for(d>0&&l.push(n.join(""));d<e.length;d++){const g=e[d];g instanceof Symbol||l.push(g)}return l},_browserStyleMap={[BOLD]:create$5("font-weight","bold"),[UNBOLD]:create$5("font-weight","normal"),[BLUE]:create$5("color","blue"),[GREEN]:create$5("color","green"),[GREY]:create$5("color","grey"),[RED]:create$5("color","red"),[PURPLE]:create$5("color","purple"),[ORANGE]:create$5("color","orange"),[UNCOLOR]:create$5("color","black")},computeBrowserLoggingArgs=e=>{e.length===1&&e[0]?.constructor===Function&&(e=e[0]());const n=[],l=[],d=create$9();let g=[],jn=0;for(;jn<e.length;jn++){const Un=e[jn],zn=_browserStyleMap[Un];if(zn!==void 0)d.set(zn.left,zn.right);else{if(Un===void 0)break;if(Un.constructor===String||Un.constructor===Number){const qn=mapToStyleString(d);jn>0||qn.length>0?(n.push("%c"+Un),l.push(qn)):n.push(Un)}else break}}for(jn>0&&(g=l,g.unshift(n.join("")));jn<e.length;jn++){const Un=e[jn];Un instanceof Symbol||g.push(Un)}return g},computeLoggingArgs=supportsColor?computeBrowserLoggingArgs:computeNoColorLoggingArgs,print=(...e)=>{console.log(...computeLoggingArgs(e)),vconsoles.forEach(n=>n.print(e))},warn$1=(...e)=>{console.warn(...computeLoggingArgs(e)),e.unshift(ORANGE),vconsoles.forEach(n=>n.print(e))},vconsoles=create$8(),createIterator=e=>({[Symbol.iterator](){return this},next:e}),iteratorFilter=(e,n)=>createIterator(()=>{let l;do l=e.next();while(!l.done&&!n(l.value));return l}),iteratorMap=(e,n)=>createIterator(()=>{const{done:l,value:d}=e.next();return{done:l,value:l?void 0:n(d)}});class DeleteItem{constructor(n,l){this.clock=n,this.len=l}}class DeleteSet{constructor(){this.clients=new Map}}const iterateDeletedStructs=(e,n,l)=>n.clients.forEach((d,g)=>{const jn=e.doc.store.clients.get(g);if(jn!=null){const Un=jn[jn.length-1],zn=Un.id.clock+Un.length;for(let qn=0,Kn=d[qn];qn<d.length&&Kn.clock<zn;Kn=d[++qn])iterateStructs(e,jn,Kn.clock,Kn.len,l)}}),findIndexDS=(e,n)=>{let l=0,d=e.length-1;for(;l<=d;){const g=floor$1((l+d)/2),jn=e[g],Un=jn.clock;if(Un<=n){if(n<Un+jn.len)return g;l=g+1}else d=g-1}return null},isDeleted=(e,n)=>{const l=e.clients.get(n.client);return l!==void 0&&findIndexDS(l,n.clock)!==null},sortAndMergeDeleteSet=e=>{e.clients.forEach(n=>{n.sort((g,jn)=>g.clock-jn.clock);let l,d;for(l=1,d=1;l<n.length;l++){const g=n[d-1],jn=n[l];g.clock+g.len>=jn.clock?g.len=max$1(g.len,jn.clock+jn.len-g.clock):(d<l&&(n[d]=jn),d++)}n.length=d})},mergeDeleteSets=e=>{const n=new DeleteSet;for(let l=0;l<e.length;l++)e[l].clients.forEach((d,g)=>{if(!n.clients.has(g)){const jn=d.slice();for(let Un=l+1;Un<e.length;Un++)appendTo(jn,e[Un].clients.get(g)||[]);n.clients.set(g,jn)}});return sortAndMergeDeleteSet(n),n},addToDeleteSet=(e,n,l,d)=>{setIfUndefined(e.clients,n,()=>[]).push(new DeleteItem(l,d))},createDeleteSet=()=>new DeleteSet,createDeleteSetFromStructStore=e=>{const n=createDeleteSet();return e.clients.forEach((l,d)=>{const g=[];for(let jn=0;jn<l.length;jn++){const Un=l[jn];if(Un.deleted){const zn=Un.id.clock;let qn=Un.length;if(jn+1<l.length)for(let Kn=l[jn+1];jn+1<l.length&&Kn.deleted;Kn=l[++jn+1])qn+=Kn.length;g.push(new DeleteItem(zn,qn))}}g.length>0&&n.clients.set(d,g)}),n},writeDeleteSet=(e,n)=>{writeVarUint(e.restEncoder,n.clients.size),from(n.clients.entries()).sort((l,d)=>d[0]-l[0]).forEach(([l,d])=>{e.resetDsCurVal(),writeVarUint(e.restEncoder,l);const g=d.length;writeVarUint(e.restEncoder,g);for(let jn=0;jn<g;jn++){const Un=d[jn];e.writeDsClock(Un.clock),e.writeDsLen(Un.len)}})},readDeleteSet=e=>{const n=new DeleteSet,l=readVarUint(e.restDecoder);for(let d=0;d<l;d++){e.resetDsCurVal();const g=readVarUint(e.restDecoder),jn=readVarUint(e.restDecoder);if(jn>0){const Un=setIfUndefined(n.clients,g,()=>[]);for(let zn=0;zn<jn;zn++)Un.push(new DeleteItem(e.readDsClock(),e.readDsLen()))}}return n},readAndApplyDeleteSet=(e,n,l)=>{const d=new DeleteSet,g=readVarUint(e.restDecoder);for(let jn=0;jn<g;jn++){e.resetDsCurVal();const Un=readVarUint(e.restDecoder),zn=readVarUint(e.restDecoder),qn=l.clients.get(Un)||[],Kn=getState(l,Un);for(let Xn=0;Xn<zn;Xn++){const Qn=e.readDsClock(),Jn=Qn+e.readDsLen();if(Qn<Kn){Kn<Jn&&addToDeleteSet(d,Un,Kn,Jn-Kn);let Ai=findIndexSS(qn,Qn),Ri=qn[Ai];for(!Ri.deleted&&Ri.id.clock<Qn&&(qn.splice(Ai+1,0,splitItem(n,Ri,Qn-Ri.id.clock)),Ai++);Ai<qn.length&&(Ri=qn[Ai++],Ri.id.clock<Jn);)Ri.deleted||(Jn<Ri.id.clock+Ri.length&&qn.splice(Ai,0,splitItem(n,Ri,Jn-Ri.id.clock)),Ri.delete(n))}else addToDeleteSet(d,Un,Qn,Jn-Qn)}}if(d.clients.size>0){const jn=new UpdateEncoderV2;return writeVarUint(jn.restEncoder,0),writeDeleteSet(jn,d),jn.toUint8Array()}return null},generateNewClientId=uint32;class Doc extends ObservableV2{constructor({guid:n=uuidv4(),collectionid:l=null,gc:d=!0,gcFilter:g=()=>!0,meta:jn=null,autoLoad:Un=!1,shouldLoad:zn=!0}={}){super(),this.gc=d,this.gcFilter=g,this.clientID=generateNewClientId(),this.guid=n,this.collectionid=l,this.share=new Map,this.store=new StructStore,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=zn,this.autoLoad=Un,this.meta=jn,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=create$6(Kn=>{this.on("load",()=>{this.isLoaded=!0,Kn(this)})});const qn=()=>create$6(Kn=>{const Xn=Qn=>{(Qn===void 0||Qn===!0)&&(this.off("sync",Xn),Kn())};this.on("sync",Xn)});this.on("sync",Kn=>{Kn===!1&&this.isSynced&&(this.whenSynced=qn()),this.isSynced=Kn===void 0||Kn===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=qn()}load(){const n=this._item;n!==null&&!this.shouldLoad&&transact$1(n.parent.doc,l=>{l.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(from(this.subdocs).map(n=>n.guid))}transact(n,l=null){return transact$1(this,n,l)}get(n,l=AbstractType){const d=setIfUndefined(this.share,n,()=>{const jn=new l;return jn._integrate(this,null),jn}),g=d.constructor;if(l!==AbstractType&&g!==l)if(g===AbstractType){const jn=new l;jn._map=d._map,d._map.forEach(Un=>{for(;Un!==null;Un=Un.left)Un.parent=jn}),jn._start=d._start;for(let Un=jn._start;Un!==null;Un=Un.right)Un.parent=jn;return jn._length=d._length,this.share.set(n,jn),jn._integrate(this,null),jn}else throw new Error(`Type with the name ${n} has already been defined with a different constructor`);return d}getArray(n=""){return this.get(n,YArray)}getText(n=""){return this.get(n,YText)}getMap(n=""){return this.get(n,YMap)}getXmlElement(n=""){return this.get(n,YXmlElement)}getXmlFragment(n=""){return this.get(n,YXmlFragment)}toJSON(){const n={};return this.share.forEach((l,d)=>{n[d]=l.toJSON()}),n}destroy(){this.isDestroyed=!0,from(this.subdocs).forEach(l=>l.destroy());const n=this._item;if(n!==null){this._item=null;const l=n.content;l.doc=new Doc({guid:this.guid,...l.opts,shouldLoad:!1}),l.doc._item=n,transact$1(n.parent.doc,d=>{const g=l.doc;n.deleted||d.subdocsAdded.add(g),d.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class DSDecoderV1{constructor(n){this.restDecoder=n}resetDsCurVal(){}readDsClock(){return readVarUint(this.restDecoder)}readDsLen(){return readVarUint(this.restDecoder)}}class UpdateDecoderV1 extends DSDecoderV1{readLeftID(){return createID(readVarUint(this.restDecoder),readVarUint(this.restDecoder))}readRightID(){return createID(readVarUint(this.restDecoder),readVarUint(this.restDecoder))}readClient(){return readVarUint(this.restDecoder)}readInfo(){return readUint8(this.restDecoder)}readString(){return readVarString(this.restDecoder)}readParentInfo(){return readVarUint(this.restDecoder)===1}readTypeRef(){return readVarUint(this.restDecoder)}readLen(){return readVarUint(this.restDecoder)}readAny(){return readAny(this.restDecoder)}readBuf(){return copyUint8Array(readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(readVarString(this.restDecoder))}readKey(){return readVarString(this.restDecoder)}}class DSDecoderV2{constructor(n){this.dsCurrVal=0,this.restDecoder=n}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){const n=readVarUint(this.restDecoder)+1;return this.dsCurrVal+=n,n}}class UpdateDecoderV2 extends DSDecoderV2{constructor(n){super(n),this.keys=[],readVarUint(n),this.keyClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(n)),this.clientDecoder=new UintOptRleDecoder(readVarUint8Array(n)),this.leftClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(n)),this.rightClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(n)),this.infoDecoder=new RleDecoder(readVarUint8Array(n),readUint8),this.stringDecoder=new StringDecoder(readVarUint8Array(n)),this.parentInfoDecoder=new RleDecoder(readVarUint8Array(n),readUint8),this.typeRefDecoder=new UintOptRleDecoder(readVarUint8Array(n)),this.lenDecoder=new UintOptRleDecoder(readVarUint8Array(n))}readLeftID(){return new ID(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ID(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return readAny(this.restDecoder)}readBuf(){return readVarUint8Array(this.restDecoder)}readJSON(){return readAny(this.restDecoder)}readKey(){const n=this.keyClockDecoder.read();if(n<this.keys.length)return this.keys[n];{const l=this.stringDecoder.read();return this.keys.push(l),l}}}class DSEncoderV1{constructor(){this.restEncoder=createEncoder()}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(n){writeVarUint(this.restEncoder,n)}writeDsLen(n){writeVarUint(this.restEncoder,n)}}class UpdateEncoderV1 extends DSEncoderV1{writeLeftID(n){writeVarUint(this.restEncoder,n.client),writeVarUint(this.restEncoder,n.clock)}writeRightID(n){writeVarUint(this.restEncoder,n.client),writeVarUint(this.restEncoder,n.clock)}writeClient(n){writeVarUint(this.restEncoder,n)}writeInfo(n){writeUint8(this.restEncoder,n)}writeString(n){writeVarString(this.restEncoder,n)}writeParentInfo(n){writeVarUint(this.restEncoder,n?1:0)}writeTypeRef(n){writeVarUint(this.restEncoder,n)}writeLen(n){writeVarUint(this.restEncoder,n)}writeAny(n){writeAny(this.restEncoder,n)}writeBuf(n){writeVarUint8Array(this.restEncoder,n)}writeJSON(n){writeVarString(this.restEncoder,JSON.stringify(n))}writeKey(n){writeVarString(this.restEncoder,n)}}class DSEncoderV2{constructor(){this.restEncoder=createEncoder(),this.dsCurrVal=0}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(n){const l=n-this.dsCurrVal;this.dsCurrVal=n,writeVarUint(this.restEncoder,l)}writeDsLen(n){n===0&&unexpectedCase(),writeVarUint(this.restEncoder,n-1),this.dsCurrVal+=n}}class UpdateEncoderV2 extends DSEncoderV2{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new IntDiffOptRleEncoder,this.clientEncoder=new UintOptRleEncoder,this.leftClockEncoder=new IntDiffOptRleEncoder,this.rightClockEncoder=new IntDiffOptRleEncoder,this.infoEncoder=new RleEncoder(writeUint8),this.stringEncoder=new StringEncoder,this.parentInfoEncoder=new RleEncoder(writeUint8),this.typeRefEncoder=new UintOptRleEncoder,this.lenEncoder=new UintOptRleEncoder}toUint8Array(){const n=createEncoder();return writeVarUint(n,0),writeVarUint8Array(n,this.keyClockEncoder.toUint8Array()),writeVarUint8Array(n,this.clientEncoder.toUint8Array()),writeVarUint8Array(n,this.leftClockEncoder.toUint8Array()),writeVarUint8Array(n,this.rightClockEncoder.toUint8Array()),writeVarUint8Array(n,toUint8Array(this.infoEncoder)),writeVarUint8Array(n,this.stringEncoder.toUint8Array()),writeVarUint8Array(n,toUint8Array(this.parentInfoEncoder)),writeVarUint8Array(n,this.typeRefEncoder.toUint8Array()),writeVarUint8Array(n,this.lenEncoder.toUint8Array()),writeUint8Array(n,toUint8Array(this.restEncoder)),toUint8Array(n)}writeLeftID(n){this.clientEncoder.write(n.client),this.leftClockEncoder.write(n.clock)}writeRightID(n){this.clientEncoder.write(n.client),this.rightClockEncoder.write(n.clock)}writeClient(n){this.clientEncoder.write(n)}writeInfo(n){this.infoEncoder.write(n)}writeString(n){this.stringEncoder.write(n)}writeParentInfo(n){this.parentInfoEncoder.write(n?1:0)}writeTypeRef(n){this.typeRefEncoder.write(n)}writeLen(n){this.lenEncoder.write(n)}writeAny(n){writeAny(this.restEncoder,n)}writeBuf(n){writeVarUint8Array(this.restEncoder,n)}writeJSON(n){writeAny(this.restEncoder,n)}writeKey(n){const l=this.keyMap.get(n);l===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(n)):this.keyClockEncoder.write(l)}}const writeStructs=(e,n,l,d)=>{d=max$1(d,n[0].id.clock);const g=findIndexSS(n,d);writeVarUint(e.restEncoder,n.length-g),e.writeClient(l),writeVarUint(e.restEncoder,d);const jn=n[g];jn.write(e,d-jn.id.clock);for(let Un=g+1;Un<n.length;Un++)n[Un].write(e,0)},writeClientsStructs=(e,n,l)=>{const d=new Map;l.forEach((g,jn)=>{getState(n,jn)>g&&d.set(jn,g)}),getStateVector(n).forEach((g,jn)=>{l.has(jn)||d.set(jn,0)}),writeVarUint(e.restEncoder,d.size),from(d.entries()).sort((g,jn)=>jn[0]-g[0]).forEach(([g,jn])=>{writeStructs(e,n.clients.get(g),g,jn)})},readClientsStructRefs=(e,n)=>{const l=create$9(),d=readVarUint(e.restDecoder);for(let g=0;g<d;g++){const jn=readVarUint(e.restDecoder),Un=new Array(jn),zn=e.readClient();let qn=readVarUint(e.restDecoder);l.set(zn,{i:0,refs:Un});for(let Kn=0;Kn<jn;Kn++){const Xn=e.readInfo();switch(BITS5&Xn){case 0:{const Qn=e.readLen();Un[Kn]=new GC(createID(zn,qn),Qn),qn+=Qn;break}case 10:{const Qn=readVarUint(e.restDecoder);Un[Kn]=new Skip(createID(zn,qn),Qn),qn+=Qn;break}default:{const Qn=(Xn&(BIT7|BIT8))===0,Jn=new Item$1(createID(zn,qn),null,(Xn&BIT8)===BIT8?e.readLeftID():null,null,(Xn&BIT7)===BIT7?e.readRightID():null,Qn?e.readParentInfo()?n.get(e.readString()):e.readLeftID():null,Qn&&(Xn&BIT6)===BIT6?e.readString():null,readItemContent(e,Xn));Un[Kn]=Jn,qn+=Jn.length}}}}return l},integrateStructs=(e,n,l)=>{const d=[];let g=from(l.keys()).sort((Ai,Ri)=>Ai-Ri);if(g.length===0)return null;const jn=()=>{if(g.length===0)return null;let Ai=l.get(g[g.length-1]);for(;Ai.refs.length===Ai.i;)if(g.pop(),g.length>0)Ai=l.get(g[g.length-1]);else return null;return Ai};let Un=jn();if(Un===null)return null;const zn=new StructStore,qn=new Map,Kn=(Ai,Ri)=>{const Ni=qn.get(Ai);(Ni==null||Ni>Ri)&&qn.set(Ai,Ri)};let Xn=Un.refs[Un.i++];const Qn=new Map,Jn=()=>{for(const Ai of d){const Ri=Ai.id.client,Ni=l.get(Ri);Ni?(Ni.i--,zn.clients.set(Ri,Ni.refs.slice(Ni.i)),l.delete(Ri),Ni.i=0,Ni.refs=[]):zn.clients.set(Ri,[Ai]),g=g.filter($i=>$i!==Ri)}d.length=0};for(;;){if(Xn.constructor!==Skip){const Ri=setIfUndefined(Qn,Xn.id.client,()=>getState(n,Xn.id.client))-Xn.id.clock;if(Ri<0)d.push(Xn),Kn(Xn.id.client,Xn.id.clock-1),Jn();else{const Ni=Xn.getMissing(e,n);if(Ni!==null){d.push(Xn);const $i=l.get(Ni)||{refs:[],i:0};if($i.refs.length===$i.i)Kn(Ni,getState(n,Ni)),Jn();else{Xn=$i.refs[$i.i++];continue}}else(Ri===0||Ri<Xn.length)&&(Xn.integrate(e,Ri),Qn.set(Xn.id.client,Xn.id.clock+Xn.length))}}if(d.length>0)Xn=d.pop();else if(Un!==null&&Un.i<Un.refs.length)Xn=Un.refs[Un.i++];else{if(Un=jn(),Un===null)break;Xn=Un.refs[Un.i++]}}if(zn.clients.size>0){const Ai=new UpdateEncoderV2;return writeClientsStructs(Ai,zn,new Map),writeVarUint(Ai.restEncoder,0),{missing:qn,update:Ai.toUint8Array()}}return null},writeStructsFromTransaction=(e,n)=>writeClientsStructs(e,n.doc.store,n.beforeState),readUpdateV2=(e,n,l,d=new UpdateDecoderV2(e))=>transact$1(n,g=>{g.local=!1;let jn=!1;const Un=g.doc,zn=Un.store,qn=readClientsStructRefs(d,Un),Kn=integrateStructs(g,zn,qn),Xn=zn.pendingStructs;if(Xn){for(const[Jn,Ai]of Xn.missing)if(Ai<getState(zn,Jn)){jn=!0;break}if(Kn){for(const[Jn,Ai]of Kn.missing){const Ri=Xn.missing.get(Jn);(Ri==null||Ri>Ai)&&Xn.missing.set(Jn,Ai)}Xn.update=mergeUpdatesV2([Xn.update,Kn.update])}}else zn.pendingStructs=Kn;const Qn=readAndApplyDeleteSet(d,g,zn);if(zn.pendingDs){const Jn=new UpdateDecoderV2(createDecoder(zn.pendingDs));readVarUint(Jn.restDecoder);const Ai=readAndApplyDeleteSet(Jn,g,zn);Qn&&Ai?zn.pendingDs=mergeUpdatesV2([Qn,Ai]):zn.pendingDs=Qn||Ai}else zn.pendingDs=Qn;if(jn){const Jn=zn.pendingStructs.update;zn.pendingStructs=null,applyUpdateV2(g.doc,Jn)}},l,!1),applyUpdateV2=(e,n,l,d=UpdateDecoderV2)=>{const g=createDecoder(n);readUpdateV2(g,e,l,new d(g))},applyUpdate=(e,n,l)=>applyUpdateV2(e,n,l,UpdateDecoderV1),writeStateAsUpdate=(e,n,l=new Map)=>{writeClientsStructs(e,n.store,l),writeDeleteSet(e,createDeleteSetFromStructStore(n.store))},encodeStateAsUpdateV2=(e,n=new Uint8Array([0]),l=new UpdateEncoderV2)=>{const d=decodeStateVector(n);writeStateAsUpdate(l,e,d);const g=[l.toUint8Array()];if(e.store.pendingDs&&g.push(e.store.pendingDs),e.store.pendingStructs&&g.push(diffUpdateV2(e.store.pendingStructs.update,n)),g.length>1){if(l.constructor===UpdateEncoderV1)return mergeUpdates(g.map((jn,Un)=>Un===0?jn:convertUpdateFormatV2ToV1(jn)));if(l.constructor===UpdateEncoderV2)return mergeUpdatesV2(g)}return g[0]},encodeStateAsUpdate=(e,n)=>encodeStateAsUpdateV2(e,n,new UpdateEncoderV1),readStateVector=e=>{const n=new Map,l=readVarUint(e.restDecoder);for(let d=0;d<l;d++){const g=readVarUint(e.restDecoder),jn=readVarUint(e.restDecoder);n.set(g,jn)}return n},decodeStateVector=e=>readStateVector(new DSDecoderV1(createDecoder(e))),writeStateVector=(e,n)=>(writeVarUint(e.restEncoder,n.size),from(n.entries()).sort((l,d)=>d[0]-l[0]).forEach(([l,d])=>{writeVarUint(e.restEncoder,l),writeVarUint(e.restEncoder,d)}),e),writeDocumentStateVector=(e,n)=>writeStateVector(e,getStateVector(n.store)),encodeStateVectorV2=(e,n=new DSEncoderV2)=>(e instanceof Map?writeStateVector(n,e):writeDocumentStateVector(n,e),n.toUint8Array()),encodeStateVector=e=>encodeStateVectorV2(e,new DSEncoderV1);class EventHandler{constructor(){this.l=[]}}const createEventHandler$1=()=>new EventHandler,addEventHandlerListener=(e,n)=>e.l.push(n),removeEventHandlerListener=(e,n)=>{const l=e.l,d=l.length;e.l=l.filter(g=>n!==g),d===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},callEventHandlerListeners=(e,n,l)=>callAll(e.l,[n,l]);class ID{constructor(n,l){this.client=n,this.clock=l}}const compareIDs=(e,n)=>e===n||e!==null&&n!==null&&e.client===n.client&&e.clock===n.clock,createID=(e,n)=>new ID(e,n),findRootTypeKey=e=>{for(const[n,l]of e.doc.share.entries())if(l===e)return n;throw unexpectedCase()},isParentOf=(e,n)=>{for(;n!==null;){if(n.parent===e)return!0;n=n.parent._item}return!1};class RelativePosition{constructor(n,l,d,g=0){this.type=n,this.tname=l,this.item=d,this.assoc=g}}const createRelativePositionFromJSON=e=>new RelativePosition(e.type==null?null:createID(e.type.client,e.type.clock),e.tname??null,e.item==null?null:createID(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class AbsolutePosition{constructor(n,l,d=0){this.type=n,this.index=l,this.assoc=d}}const createAbsolutePosition=(e,n,l=0)=>new AbsolutePosition(e,n,l),createRelativePosition$1=(e,n,l)=>{let d=null,g=null;return e._item===null?g=findRootTypeKey(e):d=createID(e._item.id.client,e._item.id.clock),new RelativePosition(d,g,n,l)},createRelativePositionFromTypeIndex=(e,n,l=0)=>{let d=e._start;if(l<0){if(n===0)return createRelativePosition$1(e,null,l);n--}for(;d!==null;){if(!d.deleted&&d.countable){if(d.length>n)return createRelativePosition$1(e,createID(d.id.client,d.id.clock+n),l);n-=d.length}if(d.right===null&&l<0)return createRelativePosition$1(e,d.lastId,l);d=d.right}return createRelativePosition$1(e,null,l)},getItemWithOffset=(e,n)=>{const l=getItem(e,n),d=n.clock-l.id.clock;return{item:l,diff:d}},createAbsolutePositionFromRelativePosition=(e,n,l=!0)=>{const d=n.store,g=e.item,jn=e.type,Un=e.tname,zn=e.assoc;let qn=null,Kn=0;if(g!==null){if(getState(d,g.client)<=g.clock)return null;const Xn=l?followRedone(d,g):getItemWithOffset(d,g),Qn=Xn.item;if(!(Qn instanceof Item$1))return null;if(qn=Qn.parent,qn._item===null||!qn._item.deleted){Kn=Qn.deleted||!Qn.countable?0:Xn.diff+(zn>=0?0:1);let Jn=Qn.left;for(;Jn!==null;)!Jn.deleted&&Jn.countable&&(Kn+=Jn.length),Jn=Jn.left}}else{if(Un!==null)qn=n.get(Un);else if(jn!==null){if(getState(d,jn.client)<=jn.clock)return null;const{item:Xn}=l?followRedone(d,jn):{item:getItem(d,jn)};if(Xn instanceof Item$1&&Xn.content instanceof ContentType)qn=Xn.content.type;else return null}else throw unexpectedCase();zn>=0?Kn=qn._length:Kn=0}return createAbsolutePosition(qn,Kn,e.assoc)},compareRelativePositions=(e,n)=>e===n||e!==null&&n!==null&&e.tname===n.tname&&compareIDs(e.item,n.item)&&compareIDs(e.type,n.type)&&e.assoc===n.assoc;class Snapshot{constructor(n,l){this.ds=n,this.sv=l}}const createSnapshot=(e,n)=>new Snapshot(e,n),snapshot=e=>createSnapshot(createDeleteSetFromStructStore(e.store),getStateVector(e.store)),isVisible$1=(e,n)=>n===void 0?!e.deleted:n.sv.has(e.id.client)&&(n.sv.get(e.id.client)||0)>e.id.clock&&!isDeleted(n.ds,e.id),splitSnapshotAffectedStructs=(e,n)=>{const l=setIfUndefined(e.meta,splitSnapshotAffectedStructs,create$8),d=e.doc.store;l.has(n)||(n.sv.forEach((g,jn)=>{g<getState(d,jn)&&getItemCleanStart(e,createID(jn,g))}),iterateDeletedStructs(e,n.ds,g=>{}),l.add(n))};class StructStore{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const getStateVector=e=>{const n=new Map;return e.clients.forEach((l,d)=>{const g=l[l.length-1];n.set(d,g.id.clock+g.length)}),n},getState=(e,n)=>{const l=e.clients.get(n);if(l===void 0)return 0;const d=l[l.length-1];return d.id.clock+d.length},addStruct=(e,n)=>{let l=e.clients.get(n.id.client);if(l===void 0)l=[],e.clients.set(n.id.client,l);else{const d=l[l.length-1];if(d.id.clock+d.length!==n.id.clock)throw unexpectedCase()}l.push(n)},findIndexSS=(e,n)=>{let l=0,d=e.length-1,g=e[d],jn=g.id.clock;if(jn===n)return d;let Un=floor$1(n/(jn+g.length-1)*d);for(;l<=d;){if(g=e[Un],jn=g.id.clock,jn<=n){if(n<jn+g.length)return Un;l=Un+1}else d=Un-1;Un=floor$1((l+d)/2)}throw unexpectedCase()},find$2=(e,n)=>{const l=e.clients.get(n.client);return l[findIndexSS(l,n.clock)]},getItem=find$2,findIndexCleanStart=(e,n,l)=>{const d=findIndexSS(n,l),g=n[d];return g.id.clock<l&&g instanceof Item$1?(n.splice(d+1,0,splitItem(e,g,l-g.id.clock)),d+1):d},getItemCleanStart=(e,n)=>{const l=e.doc.store.clients.get(n.client);return l[findIndexCleanStart(e,l,n.clock)]},getItemCleanEnd=(e,n,l)=>{const d=n.clients.get(l.client),g=findIndexSS(d,l.clock),jn=d[g];return l.clock!==jn.id.clock+jn.length-1&&jn.constructor!==GC&&d.splice(g+1,0,splitItem(e,jn,l.clock-jn.id.clock+1)),jn},replaceStruct=(e,n,l)=>{const d=e.clients.get(n.id.client);d[findIndexSS(d,n.id.clock)]=l},iterateStructs=(e,n,l,d,g)=>{if(d===0)return;const jn=l+d;let Un=findIndexCleanStart(e,n,l),zn;do zn=n[Un++],jn<zn.id.clock+zn.length&&findIndexCleanStart(e,n,jn),g(zn);while(Un<n.length&&n[Un].id.clock<jn)};class Transaction{constructor(n,l,d){this.doc=n,this.deleteSet=new DeleteSet,this.beforeState=getStateVector(n.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=l,this.meta=new Map,this.local=d,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const writeUpdateMessageFromTransaction=(e,n)=>n.deleteSet.clients.size===0&&!any(n.afterState,(l,d)=>n.beforeState.get(d)!==l)?!1:(sortAndMergeDeleteSet(n.deleteSet),writeStructsFromTransaction(e,n),writeDeleteSet(e,n.deleteSet),!0),addChangedTypeToTransaction=(e,n,l)=>{const d=n._item;(d===null||d.id.clock<(e.beforeState.get(d.id.client)||0)&&!d.deleted)&&setIfUndefined(e.changed,n,create$8).add(l)},tryToMergeWithLefts=(e,n)=>{let l=e[n],d=e[n-1],g=n;for(;g>0;l=d,d=e[--g-1]){if(d.deleted===l.deleted&&d.constructor===l.constructor&&d.mergeWith(l)){l instanceof Item$1&&l.parentSub!==null&&l.parent._map.get(l.parentSub)===l&&l.parent._map.set(l.parentSub,d);continue}break}const jn=n-g;return jn&&e.splice(n+1-jn,jn),jn},tryGcDeleteSet=(e,n,l)=>{for(const[d,g]of e.clients.entries()){const jn=n.clients.get(d);for(let Un=g.length-1;Un>=0;Un--){const zn=g[Un],qn=zn.clock+zn.len;for(let Kn=findIndexSS(jn,zn.clock),Xn=jn[Kn];Kn<jn.length&&Xn.id.clock<qn;Xn=jn[++Kn]){const Qn=jn[Kn];if(zn.clock+zn.len<=Qn.id.clock)break;Qn instanceof Item$1&&Qn.deleted&&!Qn.keep&&l(Qn)&&Qn.gc(n,!1)}}}},tryMergeDeleteSet=(e,n)=>{e.clients.forEach((l,d)=>{const g=n.clients.get(d);for(let jn=l.length-1;jn>=0;jn--){const Un=l[jn],zn=min$1(g.length-1,1+findIndexSS(g,Un.clock+Un.len-1));for(let qn=zn,Kn=g[qn];qn>0&&Kn.id.clock>=Un.clock;Kn=g[qn])qn-=1+tryToMergeWithLefts(g,qn)}})},cleanupTransactions=(e,n)=>{if(n<e.length){const l=e[n],d=l.doc,g=d.store,jn=l.deleteSet,Un=l._mergeStructs;try{sortAndMergeDeleteSet(jn),l.afterState=getStateVector(l.doc.store),d.emit("beforeObserverCalls",[l,d]);const zn=[];l.changed.forEach((qn,Kn)=>zn.push(()=>{(Kn._item===null||!Kn._item.deleted)&&Kn._callObserver(l,qn)})),zn.push(()=>{l.changedParentTypes.forEach((qn,Kn)=>{Kn._dEH.l.length>0&&(Kn._item===null||!Kn._item.deleted)&&(qn=qn.filter(Xn=>Xn.target._item===null||!Xn.target._item.deleted),qn.forEach(Xn=>{Xn.currentTarget=Kn,Xn._path=null}),qn.sort((Xn,Qn)=>Xn.path.length-Qn.path.length),zn.push(()=>{callEventHandlerListeners(Kn._dEH,qn,l)}))}),zn.push(()=>d.emit("afterTransaction",[l,d])),zn.push(()=>{l._needFormattingCleanup&&cleanupYTextAfterTransaction(l)})}),callAll(zn,[])}finally{d.gc&&tryGcDeleteSet(jn,g,d.gcFilter),tryMergeDeleteSet(jn,g),l.afterState.forEach((Xn,Qn)=>{const Jn=l.beforeState.get(Qn)||0;if(Jn!==Xn){const Ai=g.clients.get(Qn),Ri=max$1(findIndexSS(Ai,Jn),1);for(let Ni=Ai.length-1;Ni>=Ri;)Ni-=1+tryToMergeWithLefts(Ai,Ni)}});for(let Xn=Un.length-1;Xn>=0;Xn--){const{client:Qn,clock:Jn}=Un[Xn].id,Ai=g.clients.get(Qn),Ri=findIndexSS(Ai,Jn);Ri+1<Ai.length&&tryToMergeWithLefts(Ai,Ri+1)>1||Ri>0&&tryToMergeWithLefts(Ai,Ri)}if(!l.local&&l.afterState.get(d.clientID)!==l.beforeState.get(d.clientID)&&(print(ORANGE,BOLD,"[yjs] ",UNBOLD,RED,"Changed the client-id because another client seems to be using it."),d.clientID=generateNewClientId()),d.emit("afterTransactionCleanup",[l,d]),d._observers.has("update")){const Xn=new UpdateEncoderV1;writeUpdateMessageFromTransaction(Xn,l)&&d.emit("update",[Xn.toUint8Array(),l.origin,d,l])}if(d._observers.has("updateV2")){const Xn=new UpdateEncoderV2;writeUpdateMessageFromTransaction(Xn,l)&&d.emit("updateV2",[Xn.toUint8Array(),l.origin,d,l])}const{subdocsAdded:zn,subdocsLoaded:qn,subdocsRemoved:Kn}=l;(zn.size>0||Kn.size>0||qn.size>0)&&(zn.forEach(Xn=>{Xn.clientID=d.clientID,Xn.collectionid==null&&(Xn.collectionid=d.collectionid),d.subdocs.add(Xn)}),Kn.forEach(Xn=>d.subdocs.delete(Xn)),d.emit("subdocs",[{loaded:qn,added:zn,removed:Kn},d,l]),Kn.forEach(Xn=>Xn.destroy())),e.length<=n+1?(d._transactionCleanups=[],d.emit("afterAllTransactions",[d,e])):cleanupTransactions(e,n+1)}}},transact$1=(e,n,l=null,d=!0)=>{const g=e._transactionCleanups;let jn=!1,Un=null;e._transaction===null&&(jn=!0,e._transaction=new Transaction(e,l,d),g.push(e._transaction),g.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{Un=n(e._transaction)}finally{if(jn){const zn=e._transaction===g[0];e._transaction=null,zn&&cleanupTransactions(g,0)}}return Un};class StackItem{constructor(n,l){this.insertions=l,this.deletions=n,this.meta=new Map}}const clearUndoManagerStackItem=(e,n,l)=>{iterateDeletedStructs(e,l.deletions,d=>{d instanceof Item$1&&n.scope.some(g=>g===e.doc||isParentOf(g,d))&&keepItem(d,!1)})},popStackItem=(e,n,l)=>{let d=null;const g=e.doc,jn=e.scope;transact$1(g,zn=>{for(;n.length>0&&e.currStackItem===null;){const qn=g.store,Kn=n.pop(),Xn=new Set,Qn=[];let Jn=!1;iterateDeletedStructs(zn,Kn.insertions,Ai=>{if(Ai instanceof Item$1){if(Ai.redone!==null){let{item:Ri,diff:Ni}=followRedone(qn,Ai.id);Ni>0&&(Ri=getItemCleanStart(zn,createID(Ri.id.client,Ri.id.clock+Ni))),Ai=Ri}!Ai.deleted&&jn.some(Ri=>Ri===zn.doc||isParentOf(Ri,Ai))&&Qn.push(Ai)}}),iterateDeletedStructs(zn,Kn.deletions,Ai=>{Ai instanceof Item$1&&jn.some(Ri=>Ri===zn.doc||isParentOf(Ri,Ai))&&!isDeleted(Kn.insertions,Ai.id)&&Xn.add(Ai)}),Xn.forEach(Ai=>{Jn=redoItem(zn,Ai,Xn,Kn.insertions,e.ignoreRemoteMapChanges,e)!==null||Jn});for(let Ai=Qn.length-1;Ai>=0;Ai--){const Ri=Qn[Ai];e.deleteFilter(Ri)&&(Ri.delete(zn),Jn=!0)}e.currStackItem=Jn?Kn:null}zn.changed.forEach((qn,Kn)=>{qn.has(null)&&Kn._searchMarker&&(Kn._searchMarker.length=0)}),d=zn},e);const Un=e.currStackItem;if(Un!=null){const zn=d.changedParentTypes;e.emit("stack-item-popped",[{stackItem:Un,type:l,changedParentTypes:zn,origin:e},e]),e.currStackItem=null}return Un};class UndoManager extends ObservableV2{constructor(n,{captureTimeout:l=500,captureTransaction:d=qn=>!0,deleteFilter:g=()=>!0,trackedOrigins:jn=new Set([null]),ignoreRemoteMapChanges:Un=!1,doc:zn=isArray(n)?n[0].doc:n instanceof Doc?n:n.doc}={}){super(),this.scope=[],this.doc=zn,this.addToScope(n),this.deleteFilter=g,jn.add(this),this.trackedOrigins=jn,this.captureTransaction=d,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=Un,this.captureTimeout=l,this.afterTransactionHandler=qn=>{if(!this.captureTransaction(qn)||!this.scope.some($i=>qn.changedParentTypes.has($i)||$i===this.doc)||!this.trackedOrigins.has(qn.origin)&&(!qn.origin||!this.trackedOrigins.has(qn.origin.constructor)))return;const Kn=this.undoing,Xn=this.redoing,Qn=Kn?this.redoStack:this.undoStack;Kn?this.stopCapturing():Xn||this.clear(!1,!0);const Jn=new DeleteSet;qn.afterState.forEach(($i,Li)=>{const ji=qn.beforeState.get(Li)||0,Fi=$i-ji;Fi>0&&addToDeleteSet(Jn,Li,ji,Fi)});const Ai=getUnixTime();let Ri=!1;if(this.lastChange>0&&Ai-this.lastChange<this.captureTimeout&&Qn.length>0&&!Kn&&!Xn){const $i=Qn[Qn.length-1];$i.deletions=mergeDeleteSets([$i.deletions,qn.deleteSet]),$i.insertions=mergeDeleteSets([$i.insertions,Jn])}else Qn.push(new StackItem(qn.deleteSet,Jn)),Ri=!0;!Kn&&!Xn&&(this.lastChange=Ai),iterateDeletedStructs(qn,qn.deleteSet,$i=>{$i instanceof Item$1&&this.scope.some(Li=>Li===qn.doc||isParentOf(Li,$i))&&keepItem($i,!0)});const Ni=[{stackItem:Qn[Qn.length-1],origin:qn.origin,type:Kn?"redo":"undo",changedParentTypes:qn.changedParentTypes},this];Ri?this.emit("stack-item-added",Ni):this.emit("stack-item-updated",Ni)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(n){const l=new Set(this.scope);n=isArray(n)?n:[n],n.forEach(d=>{l.has(d)||(l.add(d),(d instanceof AbstractType?d.doc!==this.doc:d!==this.doc)&&warn$1("[yjs#509] Not same Y.Doc"),this.scope.push(d))})}addTrackedOrigin(n){this.trackedOrigins.add(n)}removeTrackedOrigin(n){this.trackedOrigins.delete(n)}clear(n=!0,l=!0){(n&&this.canUndo()||l&&this.canRedo())&&this.doc.transact(d=>{n&&(this.undoStack.forEach(g=>clearUndoManagerStackItem(d,this,g)),this.undoStack=[]),l&&(this.redoStack.forEach(g=>clearUndoManagerStackItem(d,this,g)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:n,redoStackCleared:l}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let n;try{n=popStackItem(this,this.undoStack,"undo")}finally{this.undoing=!1}return n}redo(){this.redoing=!0;let n;try{n=popStackItem(this,this.redoStack,"redo")}finally{this.redoing=!1}return n}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*lazyStructReaderGenerator(e){const n=readVarUint(e.restDecoder);for(let l=0;l<n;l++){const d=readVarUint(e.restDecoder),g=e.readClient();let jn=readVarUint(e.restDecoder);for(let Un=0;Un<d;Un++){const zn=e.readInfo();if(zn===10){const qn=readVarUint(e.restDecoder);yield new Skip(createID(g,jn),qn),jn+=qn}else if((BITS5&zn)!==0){const qn=(zn&(BIT7|BIT8))===0,Kn=new Item$1(createID(g,jn),null,(zn&BIT8)===BIT8?e.readLeftID():null,null,(zn&BIT7)===BIT7?e.readRightID():null,qn?e.readParentInfo()?e.readString():e.readLeftID():null,qn&&(zn&BIT6)===BIT6?e.readString():null,readItemContent(e,zn));yield Kn,jn+=Kn.length}else{const qn=e.readLen();yield new GC(createID(g,jn),qn),jn+=qn}}}}class LazyStructReader{constructor(n,l){this.gen=lazyStructReaderGenerator(n),this.curr=null,this.done=!1,this.filterSkips=l,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Skip);return this.curr}}class LazyStructWriter{constructor(n){this.currClient=0,this.startClock=0,this.written=0,this.encoder=n,this.clientStructs=[]}}const mergeUpdates=e=>mergeUpdatesV2(e,UpdateDecoderV1,UpdateEncoderV1),sliceStruct=(e,n)=>{if(e.constructor===GC){const{client:l,clock:d}=e.id;return new GC(createID(l,d+n),e.length-n)}else if(e.constructor===Skip){const{client:l,clock:d}=e.id;return new Skip(createID(l,d+n),e.length-n)}else{const l=e,{client:d,clock:g}=l.id;return new Item$1(createID(d,g+n),null,createID(d,g+n-1),null,l.rightOrigin,l.parent,l.parentSub,l.content.splice(n))}},mergeUpdatesV2=(e,n=UpdateDecoderV2,l=UpdateEncoderV2)=>{if(e.length===1)return e[0];const d=e.map(Xn=>new n(createDecoder(Xn)));let g=d.map(Xn=>new LazyStructReader(Xn,!0)),jn=null;const Un=new l,zn=new LazyStructWriter(Un);for(;g=g.filter(Jn=>Jn.curr!==null),g.sort((Jn,Ai)=>{if(Jn.curr.id.client===Ai.curr.id.client){const Ri=Jn.curr.id.clock-Ai.curr.id.clock;return Ri===0?Jn.curr.constructor===Ai.curr.constructor?0:Jn.curr.constructor===Skip?1:-1:Ri}else return Ai.curr.id.client-Jn.curr.id.client}),g.length!==0;){const Xn=g[0],Qn=Xn.curr.id.client;if(jn!==null){let Jn=Xn.curr,Ai=!1;for(;Jn!==null&&Jn.id.clock+Jn.length<=jn.struct.id.clock+jn.struct.length&&Jn.id.client>=jn.struct.id.client;)Jn=Xn.next(),Ai=!0;if(Jn===null||Jn.id.client!==Qn||Ai&&Jn.id.clock>jn.struct.id.clock+jn.struct.length)continue;if(Qn!==jn.struct.id.client)writeStructToLazyStructWriter(zn,jn.struct,jn.offset),jn={struct:Jn,offset:0},Xn.next();else if(jn.struct.id.clock+jn.struct.length<Jn.id.clock)if(jn.struct.constructor===Skip)jn.struct.length=Jn.id.clock+Jn.length-jn.struct.id.clock;else{writeStructToLazyStructWriter(zn,jn.struct,jn.offset);const Ri=Jn.id.clock-jn.struct.id.clock-jn.struct.length;jn={struct:new Skip(createID(Qn,jn.struct.id.clock+jn.struct.length),Ri),offset:0}}else{const Ri=jn.struct.id.clock+jn.struct.length-Jn.id.clock;Ri>0&&(jn.struct.constructor===Skip?jn.struct.length-=Ri:Jn=sliceStruct(Jn,Ri)),jn.struct.mergeWith(Jn)||(writeStructToLazyStructWriter(zn,jn.struct,jn.offset),jn={struct:Jn,offset:0},Xn.next())}}else jn={struct:Xn.curr,offset:0},Xn.next();for(let Jn=Xn.curr;Jn!==null&&Jn.id.client===Qn&&Jn.id.clock===jn.struct.id.clock+jn.struct.length&&Jn.constructor!==Skip;Jn=Xn.next())writeStructToLazyStructWriter(zn,jn.struct,jn.offset),jn={struct:Jn,offset:0}}jn!==null&&(writeStructToLazyStructWriter(zn,jn.struct,jn.offset),jn=null),finishLazyStructWriting(zn);const qn=d.map(Xn=>readDeleteSet(Xn)),Kn=mergeDeleteSets(qn);return writeDeleteSet(Un,Kn),Un.toUint8Array()},diffUpdateV2=(e,n,l=UpdateDecoderV2,d=UpdateEncoderV2)=>{const g=decodeStateVector(n),jn=new d,Un=new LazyStructWriter(jn),zn=new l(createDecoder(e)),qn=new LazyStructReader(zn,!1);for(;qn.curr;){const Xn=qn.curr,Qn=Xn.id.client,Jn=g.get(Qn)||0;if(qn.curr.constructor===Skip){qn.next();continue}if(Xn.id.clock+Xn.length>Jn)for(writeStructToLazyStructWriter(Un,Xn,max$1(Jn-Xn.id.clock,0)),qn.next();qn.curr&&qn.curr.id.client===Qn;)writeStructToLazyStructWriter(Un,qn.curr,0),qn.next();else for(;qn.curr&&qn.curr.id.client===Qn&&qn.curr.id.clock+qn.curr.length<=Jn;)qn.next()}finishLazyStructWriting(Un);const Kn=readDeleteSet(zn);return writeDeleteSet(jn,Kn),jn.toUint8Array()},flushLazyStructWriter=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=createEncoder(),e.written=0)},writeStructToLazyStructWriter=(e,n,l)=>{e.written>0&&e.currClient!==n.id.client&&flushLazyStructWriter(e),e.written===0&&(e.currClient=n.id.client,e.encoder.writeClient(n.id.client),writeVarUint(e.encoder.restEncoder,n.id.clock+l)),n.write(e.encoder,l),e.written++},finishLazyStructWriting=e=>{flushLazyStructWriter(e);const n=e.encoder.restEncoder;writeVarUint(n,e.clientStructs.length);for(let l=0;l<e.clientStructs.length;l++){const d=e.clientStructs[l];writeVarUint(n,d.written),writeUint8Array(n,d.restEncoder)}},convertUpdateFormat=(e,n,l,d)=>{const g=new l(createDecoder(e)),jn=new LazyStructReader(g,!1),Un=new d,zn=new LazyStructWriter(Un);for(let Kn=jn.curr;Kn!==null;Kn=jn.next())writeStructToLazyStructWriter(zn,n(Kn),0);finishLazyStructWriting(zn);const qn=readDeleteSet(g);return writeDeleteSet(Un,qn),Un.toUint8Array()},convertUpdateFormatV2ToV1=e=>convertUpdateFormat(e,id,UpdateDecoderV2,UpdateEncoderV1),errorComputeChanges="You must not compute changes after the event-handler fired.";class YEvent{constructor(n,l){this.target=n,this.currentTarget=n,this.transaction=l,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=getPathTo(this.currentTarget,this.target))}deletes(n){return isDeleted(this.transaction.deleteSet,n.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw create$7(errorComputeChanges);const n=new Map,l=this.target;this.transaction.changed.get(l).forEach(g=>{if(g!==null){const jn=l._map.get(g);let Un,zn;if(this.adds(jn)){let qn=jn.left;for(;qn!==null&&this.adds(qn);)qn=qn.left;if(this.deletes(jn))if(qn!==null&&this.deletes(qn))Un="delete",zn=last(qn.content.getContent());else return;else qn!==null&&this.deletes(qn)?(Un="update",zn=last(qn.content.getContent())):(Un="add",zn=void 0)}else if(this.deletes(jn))Un="delete",zn=last(jn.content.getContent());else return;n.set(g,{action:Un,oldValue:zn})}}),this._keys=n}return this._keys}get delta(){return this.changes.delta}adds(n){return n.id.clock>=(this.transaction.beforeState.get(n.id.client)||0)}get changes(){let n=this._changes;if(n===null){if(this.transaction.doc._transactionCleanups.length===0)throw create$7(errorComputeChanges);const l=this.target,d=create$8(),g=create$8(),jn=[];if(n={added:d,deleted:g,delta:jn,keys:this.keys},this.transaction.changed.get(l).has(null)){let zn=null;const qn=()=>{zn&&jn.push(zn)};for(let Kn=l._start;Kn!==null;Kn=Kn.right)Kn.deleted?this.deletes(Kn)&&!this.adds(Kn)&&((zn===null||zn.delete===void 0)&&(qn(),zn={delete:0}),zn.delete+=Kn.length,g.add(Kn)):this.adds(Kn)?((zn===null||zn.insert===void 0)&&(qn(),zn={insert:[]}),zn.insert=zn.insert.concat(Kn.content.getContent()),d.add(Kn)):((zn===null||zn.retain===void 0)&&(qn(),zn={retain:0}),zn.retain+=Kn.length);zn!==null&&zn.retain===void 0&&qn()}this._changes=n}return n}}const getPathTo=(e,n)=>{const l=[];for(;n._item!==null&&n!==e;){if(n._item.parentSub!==null)l.unshift(n._item.parentSub);else{let d=0,g=n._item.parent._start;for(;g!==n._item&&g!==null;)!g.deleted&&g.countable&&(d+=g.length),g=g.right;l.unshift(d)}n=n._item.parent}return l},warnPrematureAccess=()=>{warn$1("Invalid access: Add Yjs type to a document before reading data.")},maxSearchMarker=80;let globalSearchMarkerTimestamp=0;class ArraySearchMarker{constructor(n,l){n.marker=!0,this.p=n,this.index=l,this.timestamp=globalSearchMarkerTimestamp++}}const refreshMarkerTimestamp=e=>{e.timestamp=globalSearchMarkerTimestamp++},overwriteMarker=(e,n,l)=>{e.p.marker=!1,e.p=n,n.marker=!0,e.index=l,e.timestamp=globalSearchMarkerTimestamp++},markPosition=(e,n,l)=>{if(e.length>=maxSearchMarker){const d=e.reduce((g,jn)=>g.timestamp<jn.timestamp?g:jn);return overwriteMarker(d,n,l),d}else{const d=new ArraySearchMarker(n,l);return e.push(d),d}},findMarker=(e,n)=>{if(e._start===null||n===0||e._searchMarker===null)return null;const l=e._searchMarker.length===0?null:e._searchMarker.reduce((jn,Un)=>abs(n-jn.index)<abs(n-Un.index)?jn:Un);let d=e._start,g=0;for(l!==null&&(d=l.p,g=l.index,refreshMarkerTimestamp(l));d.right!==null&&g<n;){if(!d.deleted&&d.countable){if(n<g+d.length)break;g+=d.length}d=d.right}for(;d.left!==null&&g>n;)d=d.left,!d.deleted&&d.countable&&(g-=d.length);for(;d.left!==null&&d.left.id.client===d.id.client&&d.left.id.clock+d.left.length===d.id.clock;)d=d.left,!d.deleted&&d.countable&&(g-=d.length);return l!==null&&abs(l.index-g)<d.parent.length/maxSearchMarker?(overwriteMarker(l,d,g),l):markPosition(e._searchMarker,d,g)},updateMarkerChanges=(e,n,l)=>{for(let d=e.length-1;d>=0;d--){const g=e[d];if(l>0){let jn=g.p;for(jn.marker=!1;jn&&(jn.deleted||!jn.countable);)jn=jn.left,jn&&!jn.deleted&&jn.countable&&(g.index-=jn.length);if(jn===null||jn.marker===!0){e.splice(d,1);continue}g.p=jn,jn.marker=!0}(n<g.index||l>0&&n===g.index)&&(g.index=max$1(n,g.index+l))}},callTypeObservers=(e,n,l)=>{const d=e,g=n.changedParentTypes;for(;setIfUndefined(g,e,()=>[]).push(l),e._item!==null;)e=e._item.parent;callEventHandlerListeners(d._eH,l,n)};class AbstractType{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=createEventHandler$1(),this._dEH=createEventHandler$1(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(n,l){this.doc=n,this._item=l}_copy(){throw methodUnimplemented()}clone(){throw methodUnimplemented()}_write(n){}get _first(){let n=this._start;for(;n!==null&&n.deleted;)n=n.right;return n}_callObserver(n,l){!n.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(n){addEventHandlerListener(this._eH,n)}observeDeep(n){addEventHandlerListener(this._dEH,n)}unobserve(n){removeEventHandlerListener(this._eH,n)}unobserveDeep(n){removeEventHandlerListener(this._dEH,n)}toJSON(){}}const typeListSlice=(e,n,l)=>{e.doc??warnPrematureAccess(),n<0&&(n=e._length+n),l<0&&(l=e._length+l);let d=l-n;const g=[];let jn=e._start;for(;jn!==null&&d>0;){if(jn.countable&&!jn.deleted){const Un=jn.content.getContent();if(Un.length<=n)n-=Un.length;else{for(let zn=n;zn<Un.length&&d>0;zn++)g.push(Un[zn]),d--;n=0}}jn=jn.right}return g},typeListToArray=e=>{e.doc??warnPrematureAccess();const n=[];let l=e._start;for(;l!==null;){if(l.countable&&!l.deleted){const d=l.content.getContent();for(let g=0;g<d.length;g++)n.push(d[g])}l=l.right}return n},typeListToArraySnapshot=(e,n)=>{const l=[];let d=e._start;for(;d!==null;){if(d.countable&&isVisible$1(d,n)){const g=d.content.getContent();for(let jn=0;jn<g.length;jn++)l.push(g[jn])}d=d.right}return l},typeListForEach=(e,n)=>{let l=0,d=e._start;for(e.doc??warnPrematureAccess();d!==null;){if(d.countable&&!d.deleted){const g=d.content.getContent();for(let jn=0;jn<g.length;jn++)n(g[jn],l++,e)}d=d.right}},typeListMap=(e,n)=>{const l=[];return typeListForEach(e,(d,g)=>{l.push(n(d,g,e))}),l},typeListCreateIterator=e=>{let n=e._start,l=null,d=0;return{[Symbol.iterator](){return this},next:()=>{if(l===null){for(;n!==null&&n.deleted;)n=n.right;if(n===null)return{done:!0,value:void 0};l=n.content.getContent(),d=0,n=n.right}const g=l[d++];return l.length<=d&&(l=null),{done:!1,value:g}}}},typeListGet=(e,n)=>{e.doc??warnPrematureAccess();const l=findMarker(e,n);let d=e._start;for(l!==null&&(d=l.p,n-=l.index);d!==null;d=d.right)if(!d.deleted&&d.countable){if(n<d.length)return d.content.getContent()[n];n-=d.length}},typeListInsertGenericsAfter=(e,n,l,d)=>{let g=l;const jn=e.doc,Un=jn.clientID,zn=jn.store,qn=l===null?n._start:l.right;let Kn=[];const Xn=()=>{Kn.length>0&&(g=new Item$1(createID(Un,getState(zn,Un)),g,g&&g.lastId,qn,qn&&qn.id,n,null,new ContentAny(Kn)),g.integrate(e,0),Kn=[])};d.forEach(Qn=>{if(Qn===null)Kn.push(Qn);else switch(Qn.constructor){case Number:case Object:case Boolean:case Array:case String:Kn.push(Qn);break;default:switch(Xn(),Qn.constructor){case Uint8Array:case ArrayBuffer:g=new Item$1(createID(Un,getState(zn,Un)),g,g&&g.lastId,qn,qn&&qn.id,n,null,new ContentBinary(new Uint8Array(Qn))),g.integrate(e,0);break;case Doc:g=new Item$1(createID(Un,getState(zn,Un)),g,g&&g.lastId,qn,qn&&qn.id,n,null,new ContentDoc(Qn)),g.integrate(e,0);break;default:if(Qn instanceof AbstractType)g=new Item$1(createID(Un,getState(zn,Un)),g,g&&g.lastId,qn,qn&&qn.id,n,null,new ContentType(Qn)),g.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),Xn()},lengthExceeded=()=>create$7("Length exceeded!"),typeListInsertGenerics=(e,n,l,d)=>{if(l>n._length)throw lengthExceeded();if(l===0)return n._searchMarker&&updateMarkerChanges(n._searchMarker,l,d.length),typeListInsertGenericsAfter(e,n,null,d);const g=l,jn=findMarker(n,l);let Un=n._start;for(jn!==null&&(Un=jn.p,l-=jn.index,l===0&&(Un=Un.prev,l+=Un&&Un.countable&&!Un.deleted?Un.length:0));Un!==null;Un=Un.right)if(!Un.deleted&&Un.countable){if(l<=Un.length){l<Un.length&&getItemCleanStart(e,createID(Un.id.client,Un.id.clock+l));break}l-=Un.length}return n._searchMarker&&updateMarkerChanges(n._searchMarker,g,d.length),typeListInsertGenericsAfter(e,n,Un,d)},typeListPushGenerics=(e,n,l)=>{let g=(n._searchMarker||[]).reduce((jn,Un)=>Un.index>jn.index?Un:jn,{index:0,p:n._start}).p;if(g)for(;g.right;)g=g.right;return typeListInsertGenericsAfter(e,n,g,l)},typeListDelete=(e,n,l,d)=>{if(d===0)return;const g=l,jn=d,Un=findMarker(n,l);let zn=n._start;for(Un!==null&&(zn=Un.p,l-=Un.index);zn!==null&&l>0;zn=zn.right)!zn.deleted&&zn.countable&&(l<zn.length&&getItemCleanStart(e,createID(zn.id.client,zn.id.clock+l)),l-=zn.length);for(;d>0&&zn!==null;)zn.deleted||(d<zn.length&&getItemCleanStart(e,createID(zn.id.client,zn.id.clock+d)),zn.delete(e),d-=zn.length),zn=zn.right;if(d>0)throw lengthExceeded();n._searchMarker&&updateMarkerChanges(n._searchMarker,g,-jn+d)},typeMapDelete=(e,n,l)=>{const d=n._map.get(l);d!==void 0&&d.delete(e)},typeMapSet=(e,n,l,d)=>{const g=n._map.get(l)||null,jn=e.doc,Un=jn.clientID;let zn;if(d==null)zn=new ContentAny([d]);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:zn=new ContentAny([d]);break;case Uint8Array:zn=new ContentBinary(d);break;case Doc:zn=new ContentDoc(d);break;default:if(d instanceof AbstractType)zn=new ContentType(d);else throw new Error("Unexpected content type")}new Item$1(createID(Un,getState(jn.store,Un)),g,g&&g.lastId,null,null,n,l,zn).integrate(e,0)},typeMapGet=(e,n)=>{e.doc??warnPrematureAccess();const l=e._map.get(n);return l!==void 0&&!l.deleted?l.content.getContent()[l.length-1]:void 0},typeMapGetAll=e=>{const n={};return e.doc??warnPrematureAccess(),e._map.forEach((l,d)=>{l.deleted||(n[d]=l.content.getContent()[l.length-1])}),n},typeMapHas=(e,n)=>{e.doc??warnPrematureAccess();const l=e._map.get(n);return l!==void 0&&!l.deleted},typeMapGetAllSnapshot=(e,n)=>{const l={};return e._map.forEach((d,g)=>{let jn=d;for(;jn!==null&&(!n.sv.has(jn.id.client)||jn.id.clock>=(n.sv.get(jn.id.client)||0));)jn=jn.left;jn!==null&&isVisible$1(jn,n)&&(l[g]=jn.content.getContent()[jn.length-1])}),l},createMapIterator=e=>(e.doc??warnPrematureAccess(),iteratorFilter(e._map.entries(),n=>!n[1].deleted));class YArrayEvent extends YEvent{}class YArray extends AbstractType{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(n){const l=new YArray;return l.push(n),l}_integrate(n,l){super._integrate(n,l),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YArray}clone(){const n=new YArray;return n.insert(0,this.toArray().map(l=>l instanceof AbstractType?l.clone():l)),n}get length(){return this.doc??warnPrematureAccess(),this._length}_callObserver(n,l){super._callObserver(n,l),callTypeObservers(this,n,new YArrayEvent(this,n))}insert(n,l){this.doc!==null?transact$1(this.doc,d=>{typeListInsertGenerics(d,this,n,l)}):this._prelimContent.splice(n,0,...l)}push(n){this.doc!==null?transact$1(this.doc,l=>{typeListPushGenerics(l,this,n)}):this._prelimContent.push(...n)}unshift(n){this.insert(0,n)}delete(n,l=1){this.doc!==null?transact$1(this.doc,d=>{typeListDelete(d,this,n,l)}):this._prelimContent.splice(n,l)}get(n){return typeListGet(this,n)}toArray(){return typeListToArray(this)}slice(n=0,l=this.length){return typeListSlice(this,n,l)}toJSON(){return this.map(n=>n instanceof AbstractType?n.toJSON():n)}map(n){return typeListMap(this,n)}forEach(n){typeListForEach(this,n)}[Symbol.iterator](){return typeListCreateIterator(this)}_write(n){n.writeTypeRef(YArrayRefID)}}const readYArray=e=>new YArray;class YMapEvent extends YEvent{constructor(n,l,d){super(n,l),this.keysChanged=d}}class YMap extends AbstractType{constructor(n){super(),this._prelimContent=null,n===void 0?this._prelimContent=new Map:this._prelimContent=new Map(n)}_integrate(n,l){super._integrate(n,l),this._prelimContent.forEach((d,g)=>{this.set(g,d)}),this._prelimContent=null}_copy(){return new YMap}clone(){const n=new YMap;return this.forEach((l,d)=>{n.set(d,l instanceof AbstractType?l.clone():l)}),n}_callObserver(n,l){callTypeObservers(this,n,new YMapEvent(this,n,l))}toJSON(){this.doc??warnPrematureAccess();const n={};return this._map.forEach((l,d)=>{if(!l.deleted){const g=l.content.getContent()[l.length-1];n[d]=g instanceof AbstractType?g.toJSON():g}}),n}get size(){return[...createMapIterator(this)].length}keys(){return iteratorMap(createMapIterator(this),n=>n[0])}values(){return iteratorMap(createMapIterator(this),n=>n[1].content.getContent()[n[1].length-1])}entries(){return iteratorMap(createMapIterator(this),n=>[n[0],n[1].content.getContent()[n[1].length-1]])}forEach(n){this.doc??warnPrematureAccess(),this._map.forEach((l,d)=>{l.deleted||n(l.content.getContent()[l.length-1],d,this)})}[Symbol.iterator](){return this.entries()}delete(n){this.doc!==null?transact$1(this.doc,l=>{typeMapDelete(l,this,n)}):this._prelimContent.delete(n)}set(n,l){return this.doc!==null?transact$1(this.doc,d=>{typeMapSet(d,this,n,l)}):this._prelimContent.set(n,l),l}get(n){return typeMapGet(this,n)}has(n){return typeMapHas(this,n)}clear(){this.doc!==null?transact$1(this.doc,n=>{this.forEach(function(l,d,g){typeMapDelete(n,g,d)})}):this._prelimContent.clear()}_write(n){n.writeTypeRef(YMapRefID)}}const readYMap=e=>new YMap,equalAttrs$1=(e,n)=>e===n||typeof e=="object"&&typeof n=="object"&&e&&n&&equalFlat(e,n);class ItemTextListPosition{constructor(n,l,d,g){this.left=n,this.right=l,this.index=d,this.currentAttributes=g}forward(){this.right===null&&unexpectedCase(),this.right.content.constructor===ContentFormat?this.right.deleted||updateCurrentAttributes(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const findNextPosition=(e,n,l)=>{for(;n.right!==null&&l>0;)n.right.content.constructor===ContentFormat?n.right.deleted||updateCurrentAttributes(n.currentAttributes,n.right.content):n.right.deleted||(l<n.right.length&&getItemCleanStart(e,createID(n.right.id.client,n.right.id.clock+l)),n.index+=n.right.length,l-=n.right.length),n.left=n.right,n.right=n.right.right;return n},findPosition=(e,n,l,d)=>{const g=new Map,jn=d?findMarker(n,l):null;if(jn){const Un=new ItemTextListPosition(jn.p.left,jn.p,jn.index,g);return findNextPosition(e,Un,l-jn.index)}else{const Un=new ItemTextListPosition(null,n._start,0,g);return findNextPosition(e,Un,l)}},insertNegatedAttributes=(e,n,l,d)=>{for(;l.right!==null&&(l.right.deleted===!0||l.right.content.constructor===ContentFormat&&equalAttrs$1(d.get(l.right.content.key),l.right.content.value));)l.right.deleted||d.delete(l.right.content.key),l.forward();const g=e.doc,jn=g.clientID;d.forEach((Un,zn)=>{const qn=l.left,Kn=l.right,Xn=new Item$1(createID(jn,getState(g.store,jn)),qn,qn&&qn.lastId,Kn,Kn&&Kn.id,n,null,new ContentFormat(zn,Un));Xn.integrate(e,0),l.right=Xn,l.forward()})},updateCurrentAttributes=(e,n)=>{const{key:l,value:d}=n;d===null?e.delete(l):e.set(l,d)},minimizeAttributeChanges=(e,n)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===ContentFormat&&equalAttrs$1(n[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},insertAttributes=(e,n,l,d)=>{const g=e.doc,jn=g.clientID,Un=new Map;for(const zn in d){const qn=d[zn],Kn=l.currentAttributes.get(zn)??null;if(!equalAttrs$1(Kn,qn)){Un.set(zn,Kn);const{left:Xn,right:Qn}=l;l.right=new Item$1(createID(jn,getState(g.store,jn)),Xn,Xn&&Xn.lastId,Qn,Qn&&Qn.id,n,null,new ContentFormat(zn,qn)),l.right.integrate(e,0),l.forward()}}return Un},insertText=(e,n,l,d,g)=>{l.currentAttributes.forEach((Jn,Ai)=>{g[Ai]===void 0&&(g[Ai]=null)});const jn=e.doc,Un=jn.clientID;minimizeAttributeChanges(l,g);const zn=insertAttributes(e,n,l,g),qn=d.constructor===String?new ContentString(d):d instanceof AbstractType?new ContentType(d):new ContentEmbed(d);let{left:Kn,right:Xn,index:Qn}=l;n._searchMarker&&updateMarkerChanges(n._searchMarker,l.index,qn.getLength()),Xn=new Item$1(createID(Un,getState(jn.store,Un)),Kn,Kn&&Kn.lastId,Xn,Xn&&Xn.id,n,null,qn),Xn.integrate(e,0),l.right=Xn,l.index=Qn,l.forward(),insertNegatedAttributes(e,n,l,zn)},formatText=(e,n,l,d,g)=>{const jn=e.doc,Un=jn.clientID;minimizeAttributeChanges(l,g);const zn=insertAttributes(e,n,l,g);e:for(;l.right!==null&&(d>0||zn.size>0&&(l.right.deleted||l.right.content.constructor===ContentFormat));){if(!l.right.deleted)switch(l.right.content.constructor){case ContentFormat:{const{key:qn,value:Kn}=l.right.content,Xn=g[qn];if(Xn!==void 0){if(equalAttrs$1(Xn,Kn))zn.delete(qn);else{if(d===0)break e;zn.set(qn,Kn)}l.right.delete(e)}else l.currentAttributes.set(qn,Kn);break}default:d<l.right.length&&getItemCleanStart(e,createID(l.right.id.client,l.right.id.clock+d)),d-=l.right.length;break}l.forward()}if(d>0){let qn="";for(;d>0;d--)qn+=`
`;l.right=new Item$1(createID(Un,getState(jn.store,Un)),l.left,l.left&&l.left.lastId,l.right,l.right&&l.right.id,n,null,new ContentString(qn)),l.right.integrate(e,0),l.forward()}insertNegatedAttributes(e,n,l,zn)},cleanupFormattingGap=(e,n,l,d,g)=>{let jn=n;const Un=create$9();for(;jn&&(!jn.countable||jn.deleted);){if(!jn.deleted&&jn.content.constructor===ContentFormat){const Kn=jn.content;Un.set(Kn.key,Kn)}jn=jn.right}let zn=0,qn=!1;for(;n!==jn;){if(l===n&&(qn=!0),!n.deleted){const Kn=n.content;if(Kn.constructor===ContentFormat){const{key:Xn,value:Qn}=Kn,Jn=d.get(Xn)??null;(Un.get(Xn)!==Kn||Jn===Qn)&&(n.delete(e),zn++,!qn&&(g.get(Xn)??null)===Qn&&Jn!==Qn&&(Jn===null?g.delete(Xn):g.set(Xn,Jn))),!qn&&!n.deleted&&updateCurrentAttributes(g,Kn)}}n=n.right}return zn},cleanupContextlessFormattingGap=(e,n)=>{for(;n&&n.right&&(n.right.deleted||!n.right.countable);)n=n.right;const l=new Set;for(;n&&(n.deleted||!n.countable);){if(!n.deleted&&n.content.constructor===ContentFormat){const d=n.content.key;l.has(d)?n.delete(e):l.add(d)}n=n.left}},cleanupYTextFormatting=e=>{let n=0;return transact$1(e.doc,l=>{let d=e._start,g=e._start,jn=create$9();const Un=copy(jn);for(;g;)g.deleted===!1&&(g.content.constructor===ContentFormat?updateCurrentAttributes(Un,g.content):(n+=cleanupFormattingGap(l,d,g,jn,Un),jn=copy(Un),d=g)),g=g.right}),n},cleanupYTextAfterTransaction=e=>{const n=new Set,l=e.doc;for(const[d,g]of e.afterState.entries()){const jn=e.beforeState.get(d)||0;g!==jn&&iterateStructs(e,l.store.clients.get(d),jn,g,Un=>{!Un.deleted&&Un.content.constructor===ContentFormat&&Un.constructor!==GC&&n.add(Un.parent)})}transact$1(l,d=>{iterateDeletedStructs(e,e.deleteSet,g=>{if(g instanceof GC||!g.parent._hasFormatting||n.has(g.parent))return;const jn=g.parent;g.content.constructor===ContentFormat?n.add(jn):cleanupContextlessFormattingGap(d,g)});for(const g of n)cleanupYTextFormatting(g)})},deleteText=(e,n,l)=>{const d=l,g=copy(n.currentAttributes),jn=n.right;for(;l>0&&n.right!==null;){if(n.right.deleted===!1)switch(n.right.content.constructor){case ContentType:case ContentEmbed:case ContentString:l<n.right.length&&getItemCleanStart(e,createID(n.right.id.client,n.right.id.clock+l)),l-=n.right.length,n.right.delete(e);break}n.forward()}jn&&cleanupFormattingGap(e,jn,n.right,g,n.currentAttributes);const Un=(n.left||n.right).parent;return Un._searchMarker&&updateMarkerChanges(Un._searchMarker,n.index,-d+l),n};class YTextEvent extends YEvent{constructor(n,l,d){super(n,l),this.childListChanged=!1,this.keysChanged=new Set,d.forEach(g=>{g===null?this.childListChanged=!0:this.keysChanged.add(g)})}get changes(){if(this._changes===null){const n={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=n}return this._changes}get delta(){if(this._delta===null){const n=this.target.doc,l=[];transact$1(n,d=>{const g=new Map,jn=new Map;let Un=this.target._start,zn=null;const qn={};let Kn="",Xn=0,Qn=0;const Jn=()=>{if(zn!==null){let Ai=null;switch(zn){case"delete":Qn>0&&(Ai={delete:Qn}),Qn=0;break;case"insert":(typeof Kn=="object"||Kn.length>0)&&(Ai={insert:Kn},g.size>0&&(Ai.attributes={},g.forEach((Ri,Ni)=>{Ri!==null&&(Ai.attributes[Ni]=Ri)}))),Kn="";break;case"retain":Xn>0&&(Ai={retain:Xn},isEmpty(qn)||(Ai.attributes=assign({},qn))),Xn=0;break}Ai&&l.push(Ai),zn=null}};for(;Un!==null;){switch(Un.content.constructor){case ContentType:case ContentEmbed:this.adds(Un)?this.deletes(Un)||(Jn(),zn="insert",Kn=Un.content.getContent()[0],Jn()):this.deletes(Un)?(zn!=="delete"&&(Jn(),zn="delete"),Qn+=1):Un.deleted||(zn!=="retain"&&(Jn(),zn="retain"),Xn+=1);break;case ContentString:this.adds(Un)?this.deletes(Un)||(zn!=="insert"&&(Jn(),zn="insert"),Kn+=Un.content.str):this.deletes(Un)?(zn!=="delete"&&(Jn(),zn="delete"),Qn+=Un.length):Un.deleted||(zn!=="retain"&&(Jn(),zn="retain"),Xn+=Un.length);break;case ContentFormat:{const{key:Ai,value:Ri}=Un.content;if(this.adds(Un)){if(!this.deletes(Un)){const Ni=g.get(Ai)??null;equalAttrs$1(Ni,Ri)?Ri!==null&&Un.delete(d):(zn==="retain"&&Jn(),equalAttrs$1(Ri,jn.get(Ai)??null)?delete qn[Ai]:qn[Ai]=Ri)}}else if(this.deletes(Un)){jn.set(Ai,Ri);const Ni=g.get(Ai)??null;equalAttrs$1(Ni,Ri)||(zn==="retain"&&Jn(),qn[Ai]=Ni)}else if(!Un.deleted){jn.set(Ai,Ri);const Ni=qn[Ai];Ni!==void 0&&(equalAttrs$1(Ni,Ri)?Ni!==null&&Un.delete(d):(zn==="retain"&&Jn(),Ri===null?delete qn[Ai]:qn[Ai]=Ri))}Un.deleted||(zn==="insert"&&Jn(),updateCurrentAttributes(g,Un.content));break}}Un=Un.right}for(Jn();l.length>0;){const Ai=l[l.length-1];if(Ai.retain!==void 0&&Ai.attributes===void 0)l.pop();else break}}),this._delta=l}return this._delta}}class YText extends AbstractType{constructor(n){super(),this._pending=n!==void 0?[()=>this.insert(0,n)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??warnPrematureAccess(),this._length}_integrate(n,l){super._integrate(n,l);try{this._pending.forEach(d=>d())}catch(d){console.error(d)}this._pending=null}_copy(){return new YText}clone(){const n=new YText;return n.applyDelta(this.toDelta()),n}_callObserver(n,l){super._callObserver(n,l);const d=new YTextEvent(this,n,l);callTypeObservers(this,n,d),!n.local&&this._hasFormatting&&(n._needFormattingCleanup=!0)}toString(){this.doc??warnPrematureAccess();let n="",l=this._start;for(;l!==null;)!l.deleted&&l.countable&&l.content.constructor===ContentString&&(n+=l.content.str),l=l.right;return n}toJSON(){return this.toString()}applyDelta(n,{sanitize:l=!0}={}){this.doc!==null?transact$1(this.doc,d=>{const g=new ItemTextListPosition(null,this._start,0,new Map);for(let jn=0;jn<n.length;jn++){const Un=n[jn];if(Un.insert!==void 0){const zn=!l&&typeof Un.insert=="string"&&jn===n.length-1&&g.right===null&&Un.insert.slice(-1)===`
`?Un.insert.slice(0,-1):Un.insert;(typeof zn!="string"||zn.length>0)&&insertText(d,this,g,zn,Un.attributes||{})}else Un.retain!==void 0?formatText(d,this,g,Un.retain,Un.attributes||{}):Un.delete!==void 0&&deleteText(d,g,Un.delete)}}):this._pending.push(()=>this.applyDelta(n))}toDelta(n,l,d){this.doc??warnPrematureAccess();const g=[],jn=new Map,Un=this.doc;let zn="",qn=this._start;function Kn(){if(zn.length>0){const Qn={};let Jn=!1;jn.forEach((Ri,Ni)=>{Jn=!0,Qn[Ni]=Ri});const Ai={insert:zn};Jn&&(Ai.attributes=Qn),g.push(Ai),zn=""}}const Xn=()=>{for(;qn!==null;){if(isVisible$1(qn,n)||l!==void 0&&isVisible$1(qn,l))switch(qn.content.constructor){case ContentString:{const Qn=jn.get("ychange");n!==void 0&&!isVisible$1(qn,n)?(Qn===void 0||Qn.user!==qn.id.client||Qn.type!=="removed")&&(Kn(),jn.set("ychange",d?d("removed",qn.id):{type:"removed"})):l!==void 0&&!isVisible$1(qn,l)?(Qn===void 0||Qn.user!==qn.id.client||Qn.type!=="added")&&(Kn(),jn.set("ychange",d?d("added",qn.id):{type:"added"})):Qn!==void 0&&(Kn(),jn.delete("ychange")),zn+=qn.content.str;break}case ContentType:case ContentEmbed:{Kn();const Qn={insert:qn.content.getContent()[0]};if(jn.size>0){const Jn={};Qn.attributes=Jn,jn.forEach((Ai,Ri)=>{Jn[Ri]=Ai})}g.push(Qn);break}case ContentFormat:isVisible$1(qn,n)&&(Kn(),updateCurrentAttributes(jn,qn.content));break}qn=qn.right}Kn()};return n||l?transact$1(Un,Qn=>{n&&splitSnapshotAffectedStructs(Qn,n),l&&splitSnapshotAffectedStructs(Qn,l),Xn()},"cleanup"):Xn(),g}insert(n,l,d){if(l.length<=0)return;const g=this.doc;g!==null?transact$1(g,jn=>{const Un=findPosition(jn,this,n,!d);d||(d={},Un.currentAttributes.forEach((zn,qn)=>{d[qn]=zn})),insertText(jn,this,Un,l,d)}):this._pending.push(()=>this.insert(n,l,d))}insertEmbed(n,l,d){const g=this.doc;g!==null?transact$1(g,jn=>{const Un=findPosition(jn,this,n,!d);insertText(jn,this,Un,l,d||{})}):this._pending.push(()=>this.insertEmbed(n,l,d||{}))}delete(n,l){if(l===0)return;const d=this.doc;d!==null?transact$1(d,g=>{deleteText(g,findPosition(g,this,n,!0),l)}):this._pending.push(()=>this.delete(n,l))}format(n,l,d){if(l===0)return;const g=this.doc;g!==null?transact$1(g,jn=>{const Un=findPosition(jn,this,n,!1);Un.right!==null&&formatText(jn,this,Un,l,d)}):this._pending.push(()=>this.format(n,l,d))}removeAttribute(n){this.doc!==null?transact$1(this.doc,l=>{typeMapDelete(l,this,n)}):this._pending.push(()=>this.removeAttribute(n))}setAttribute(n,l){this.doc!==null?transact$1(this.doc,d=>{typeMapSet(d,this,n,l)}):this._pending.push(()=>this.setAttribute(n,l))}getAttribute(n){return typeMapGet(this,n)}getAttributes(){return typeMapGetAll(this)}_write(n){n.writeTypeRef(YTextRefID)}}const readYText=e=>new YText;class YXmlTreeWalker{constructor(n,l=()=>!0){this._filter=l,this._root=n,this._currentNode=n._start,this._firstCall=!0,n.doc??warnPrematureAccess()}[Symbol.iterator](){return this}next(){let n=this._currentNode,l=n&&n.content&&n.content.type;if(n!==null&&(!this._firstCall||n.deleted||!this._filter(l)))do if(l=n.content.type,!n.deleted&&(l.constructor===YXmlElement||l.constructor===YXmlFragment)&&l._start!==null)n=l._start;else for(;n!==null;){const d=n.next;if(d!==null){n=d;break}else n.parent===this._root?n=null:n=n.parent._item}while(n!==null&&(n.deleted||!this._filter(n.content.type)));return this._firstCall=!1,n===null?{value:void 0,done:!0}:(this._currentNode=n,{value:n.content.type,done:!1})}}class YXmlFragment extends AbstractType{constructor(){super(),this._prelimContent=[]}get firstChild(){const n=this._first;return n?n.content.getContent()[0]:null}_integrate(n,l){super._integrate(n,l),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YXmlFragment}clone(){const n=new YXmlFragment;return n.insert(0,this.toArray().map(l=>l instanceof AbstractType?l.clone():l)),n}get length(){return this.doc??warnPrematureAccess(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(n){return new YXmlTreeWalker(this,n)}querySelector(n){n=n.toUpperCase();const d=new YXmlTreeWalker(this,g=>g.nodeName&&g.nodeName.toUpperCase()===n).next();return d.done?null:d.value}querySelectorAll(n){return n=n.toUpperCase(),from(new YXmlTreeWalker(this,l=>l.nodeName&&l.nodeName.toUpperCase()===n))}_callObserver(n,l){callTypeObservers(this,n,new YXmlEvent(this,l,n))}toString(){return typeListMap(this,n=>n.toString()).join("")}toJSON(){return this.toString()}toDOM(n=document,l={},d){const g=n.createDocumentFragment();return d!==void 0&&d._createAssociation(g,this),typeListForEach(this,jn=>{g.insertBefore(jn.toDOM(n,l,d),null)}),g}insert(n,l){this.doc!==null?transact$1(this.doc,d=>{typeListInsertGenerics(d,this,n,l)}):this._prelimContent.splice(n,0,...l)}insertAfter(n,l){if(this.doc!==null)transact$1(this.doc,d=>{const g=n&&n instanceof AbstractType?n._item:n;typeListInsertGenericsAfter(d,this,g,l)});else{const d=this._prelimContent,g=n===null?0:d.findIndex(jn=>jn===n)+1;if(g===0&&n!==null)throw create$7("Reference item not found");d.splice(g,0,...l)}}delete(n,l=1){this.doc!==null?transact$1(this.doc,d=>{typeListDelete(d,this,n,l)}):this._prelimContent.splice(n,l)}toArray(){return typeListToArray(this)}push(n){this.insert(this.length,n)}unshift(n){this.insert(0,n)}get(n){return typeListGet(this,n)}slice(n=0,l=this.length){return typeListSlice(this,n,l)}forEach(n){typeListForEach(this,n)}_write(n){n.writeTypeRef(YXmlFragmentRefID)}}const readYXmlFragment=e=>new YXmlFragment;class YXmlElement extends YXmlFragment{constructor(n="UNDEFINED"){super(),this.nodeName=n,this._prelimAttrs=new Map}get nextSibling(){const n=this._item?this._item.next:null;return n?n.content.type:null}get prevSibling(){const n=this._item?this._item.prev:null;return n?n.content.type:null}_integrate(n,l){super._integrate(n,l),this._prelimAttrs.forEach((d,g)=>{this.setAttribute(g,d)}),this._prelimAttrs=null}_copy(){return new YXmlElement(this.nodeName)}clone(){const n=new YXmlElement(this.nodeName),l=this.getAttributes();return forEach(l,(d,g)=>{n.setAttribute(g,d)}),n.insert(0,this.toArray().map(d=>d instanceof AbstractType?d.clone():d)),n}toString(){const n=this.getAttributes(),l=[],d=[];for(const zn in n)d.push(zn);d.sort();const g=d.length;for(let zn=0;zn<g;zn++){const qn=d[zn];l.push(qn+'="'+n[qn]+'"')}const jn=this.nodeName.toLocaleLowerCase(),Un=l.length>0?" "+l.join(" "):"";return`<${jn}${Un}>${super.toString()}</${jn}>`}removeAttribute(n){this.doc!==null?transact$1(this.doc,l=>{typeMapDelete(l,this,n)}):this._prelimAttrs.delete(n)}setAttribute(n,l){this.doc!==null?transact$1(this.doc,d=>{typeMapSet(d,this,n,l)}):this._prelimAttrs.set(n,l)}getAttribute(n){return typeMapGet(this,n)}hasAttribute(n){return typeMapHas(this,n)}getAttributes(n){return n?typeMapGetAllSnapshot(this,n):typeMapGetAll(this)}toDOM(n=document,l={},d){const g=n.createElement(this.nodeName),jn=this.getAttributes();for(const Un in jn){const zn=jn[Un];typeof zn=="string"&&g.setAttribute(Un,zn)}return typeListForEach(this,Un=>{g.appendChild(Un.toDOM(n,l,d))}),d!==void 0&&d._createAssociation(g,this),g}_write(n){n.writeTypeRef(YXmlElementRefID),n.writeKey(this.nodeName)}}const readYXmlElement=e=>new YXmlElement(e.readKey());class YXmlEvent extends YEvent{constructor(n,l,d){super(n,d),this.childListChanged=!1,this.attributesChanged=new Set,l.forEach(g=>{g===null?this.childListChanged=!0:this.attributesChanged.add(g)})}}class YXmlHook extends YMap{constructor(n){super(),this.hookName=n}_copy(){return new YXmlHook(this.hookName)}clone(){const n=new YXmlHook(this.hookName);return this.forEach((l,d)=>{n.set(d,l)}),n}toDOM(n=document,l={},d){const g=l[this.hookName];let jn;return g!==void 0?jn=g.createDom(this):jn=document.createElement(this.hookName),jn.setAttribute("data-yjs-hook",this.hookName),d!==void 0&&d._createAssociation(jn,this),jn}_write(n){n.writeTypeRef(YXmlHookRefID),n.writeKey(this.hookName)}}const readYXmlHook=e=>new YXmlHook(e.readKey());class YXmlText extends YText{get nextSibling(){const n=this._item?this._item.next:null;return n?n.content.type:null}get prevSibling(){const n=this._item?this._item.prev:null;return n?n.content.type:null}_copy(){return new YXmlText}clone(){const n=new YXmlText;return n.applyDelta(this.toDelta()),n}toDOM(n=document,l,d){const g=n.createTextNode(this.toString());return d!==void 0&&d._createAssociation(g,this),g}toString(){return this.toDelta().map(n=>{const l=[];for(const g in n.attributes){const jn=[];for(const Un in n.attributes[g])jn.push({key:Un,value:n.attributes[g][Un]});jn.sort((Un,zn)=>Un.key<zn.key?-1:1),l.push({nodeName:g,attrs:jn})}l.sort((g,jn)=>g.nodeName<jn.nodeName?-1:1);let d="";for(let g=0;g<l.length;g++){const jn=l[g];d+=`<${jn.nodeName}`;for(let Un=0;Un<jn.attrs.length;Un++){const zn=jn.attrs[Un];d+=` ${zn.key}="${zn.value}"`}d+=">"}d+=n.insert;for(let g=l.length-1;g>=0;g--)d+=`</${l[g].nodeName}>`;return d}).join("")}toJSON(){return this.toString()}_write(n){n.writeTypeRef(YXmlTextRefID)}}const readYXmlText=e=>new YXmlText;class AbstractStruct{constructor(n,l){this.id=n,this.length=l}get deleted(){throw methodUnimplemented()}mergeWith(n){return!1}write(n,l,d){throw methodUnimplemented()}integrate(n,l){throw methodUnimplemented()}}const structGCRefNumber=0;class GC extends AbstractStruct{get deleted(){return!0}delete(){}mergeWith(n){return this.constructor!==n.constructor?!1:(this.length+=n.length,!0)}integrate(n,l){l>0&&(this.id.clock+=l,this.length-=l),addStruct(n.doc.store,this)}write(n,l){n.writeInfo(structGCRefNumber),n.writeLen(this.length-l)}getMissing(n,l){return null}}class ContentBinary{constructor(n){this.content=n}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ContentBinary(this.content)}splice(n){throw methodUnimplemented()}mergeWith(n){return!1}integrate(n,l){}delete(n){}gc(n){}write(n,l){n.writeBuf(this.content)}getRef(){return 3}}const readContentBinary=e=>new ContentBinary(e.readBuf());class ContentDeleted{constructor(n){this.len=n}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ContentDeleted(this.len)}splice(n){const l=new ContentDeleted(this.len-n);return this.len=n,l}mergeWith(n){return this.len+=n.len,!0}integrate(n,l){addToDeleteSet(n.deleteSet,l.id.client,l.id.clock,this.len),l.markDeleted()}delete(n){}gc(n){}write(n,l){n.writeLen(this.len-l)}getRef(){return 1}}const readContentDeleted=e=>new ContentDeleted(e.readLen()),createDocFromOpts=(e,n)=>new Doc({guid:e,...n,shouldLoad:n.shouldLoad||n.autoLoad||!1});class ContentDoc{constructor(n){n._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=n;const l={};this.opts=l,n.gc||(l.gc=!1),n.autoLoad&&(l.autoLoad=!0),n.meta!==null&&(l.meta=n.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ContentDoc(createDocFromOpts(this.doc.guid,this.opts))}splice(n){throw methodUnimplemented()}mergeWith(n){return!1}integrate(n,l){this.doc._item=l,n.subdocsAdded.add(this.doc),this.doc.shouldLoad&&n.subdocsLoaded.add(this.doc)}delete(n){n.subdocsAdded.has(this.doc)?n.subdocsAdded.delete(this.doc):n.subdocsRemoved.add(this.doc)}gc(n){}write(n,l){n.writeString(this.doc.guid),n.writeAny(this.opts)}getRef(){return 9}}const readContentDoc=e=>new ContentDoc(createDocFromOpts(e.readString(),e.readAny()));class ContentEmbed{constructor(n){this.embed=n}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ContentEmbed(this.embed)}splice(n){throw methodUnimplemented()}mergeWith(n){return!1}integrate(n,l){}delete(n){}gc(n){}write(n,l){n.writeJSON(this.embed)}getRef(){return 5}}const readContentEmbed=e=>new ContentEmbed(e.readJSON());class ContentFormat{constructor(n,l){this.key=n,this.value=l}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ContentFormat(this.key,this.value)}splice(n){throw methodUnimplemented()}mergeWith(n){return!1}integrate(n,l){const d=l.parent;d._searchMarker=null,d._hasFormatting=!0}delete(n){}gc(n){}write(n,l){n.writeKey(this.key),n.writeJSON(this.value)}getRef(){return 6}}const readContentFormat=e=>new ContentFormat(e.readKey(),e.readJSON());class ContentJSON{constructor(n){this.arr=n}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ContentJSON(this.arr)}splice(n){const l=new ContentJSON(this.arr.slice(n));return this.arr=this.arr.slice(0,n),l}mergeWith(n){return this.arr=this.arr.concat(n.arr),!0}integrate(n,l){}delete(n){}gc(n){}write(n,l){const d=this.arr.length;n.writeLen(d-l);for(let g=l;g<d;g++){const jn=this.arr[g];n.writeString(jn===void 0?"undefined":JSON.stringify(jn))}}getRef(){return 2}}const readContentJSON=e=>{const n=e.readLen(),l=[];for(let d=0;d<n;d++){const g=e.readString();g==="undefined"?l.push(void 0):l.push(JSON.parse(g))}return new ContentJSON(l)},isDevMode=getVariable("node_env")==="development";class ContentAny{constructor(n){this.arr=n,isDevMode&&deepFreeze(n)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ContentAny(this.arr)}splice(n){const l=new ContentAny(this.arr.slice(n));return this.arr=this.arr.slice(0,n),l}mergeWith(n){return this.arr=this.arr.concat(n.arr),!0}integrate(n,l){}delete(n){}gc(n){}write(n,l){const d=this.arr.length;n.writeLen(d-l);for(let g=l;g<d;g++){const jn=this.arr[g];n.writeAny(jn)}}getRef(){return 8}}const readContentAny=e=>{const n=e.readLen(),l=[];for(let d=0;d<n;d++)l.push(e.readAny());return new ContentAny(l)};class ContentString{constructor(n){this.str=n}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ContentString(this.str)}splice(n){const l=new ContentString(this.str.slice(n));this.str=this.str.slice(0,n);const d=this.str.charCodeAt(n-1);return d>=55296&&d<=56319&&(this.str=this.str.slice(0,n-1)+"",l.str=""+l.str.slice(1)),l}mergeWith(n){return this.str+=n.str,!0}integrate(n,l){}delete(n){}gc(n){}write(n,l){n.writeString(l===0?this.str:this.str.slice(l))}getRef(){return 4}}const readContentString=e=>new ContentString(e.readString()),typeRefs=[readYArray,readYMap,readYText,readYXmlElement,readYXmlFragment,readYXmlHook,readYXmlText],YArrayRefID=0,YMapRefID=1,YTextRefID=2,YXmlElementRefID=3,YXmlFragmentRefID=4,YXmlHookRefID=5,YXmlTextRefID=6;class ContentType{constructor(n){this.type=n}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ContentType(this.type._copy())}splice(n){throw methodUnimplemented()}mergeWith(n){return!1}integrate(n,l){this.type._integrate(n.doc,l)}delete(n){let l=this.type._start;for(;l!==null;)l.deleted?l.id.clock<(n.beforeState.get(l.id.client)||0)&&n._mergeStructs.push(l):l.delete(n),l=l.right;this.type._map.forEach(d=>{d.deleted?d.id.clock<(n.beforeState.get(d.id.client)||0)&&n._mergeStructs.push(d):d.delete(n)}),n.changed.delete(this.type)}gc(n){let l=this.type._start;for(;l!==null;)l.gc(n,!0),l=l.right;this.type._start=null,this.type._map.forEach(d=>{for(;d!==null;)d.gc(n,!0),d=d.left}),this.type._map=new Map}write(n,l){this.type._write(n)}getRef(){return 7}}const readContentType=e=>new ContentType(typeRefs[e.readTypeRef()](e)),followRedone=(e,n)=>{let l=n,d=0,g;do d>0&&(l=createID(l.client,l.clock+d)),g=getItem(e,l),d=l.clock-g.id.clock,l=g.redone;while(l!==null&&g instanceof Item$1);return{item:g,diff:d}},keepItem=(e,n)=>{for(;e!==null&&e.keep!==n;)e.keep=n,e=e.parent._item},splitItem=(e,n,l)=>{const{client:d,clock:g}=n.id,jn=new Item$1(createID(d,g+l),n,createID(d,g+l-1),n.right,n.rightOrigin,n.parent,n.parentSub,n.content.splice(l));return n.deleted&&jn.markDeleted(),n.keep&&(jn.keep=!0),n.redone!==null&&(jn.redone=createID(n.redone.client,n.redone.clock+l)),n.right=jn,jn.right!==null&&(jn.right.left=jn),e._mergeStructs.push(jn),jn.parentSub!==null&&jn.right===null&&jn.parent._map.set(jn.parentSub,jn),n.length=l,jn},isDeletedByUndoStack=(e,n)=>some(e,l=>isDeleted(l.deletions,n)),redoItem=(e,n,l,d,g,jn)=>{const Un=e.doc,zn=Un.store,qn=Un.clientID,Kn=n.redone;if(Kn!==null)return getItemCleanStart(e,Kn);let Xn=n.parent._item,Qn=null,Jn;if(Xn!==null&&Xn.deleted===!0){if(Xn.redone===null&&(!l.has(Xn)||redoItem(e,Xn,l,d,g,jn)===null))return null;for(;Xn.redone!==null;)Xn=getItemCleanStart(e,Xn.redone)}const Ai=Xn===null?n.parent:Xn.content.type;if(n.parentSub===null){for(Qn=n.left,Jn=n;Qn!==null;){let Li=Qn;for(;Li!==null&&Li.parent._item!==Xn;)Li=Li.redone===null?null:getItemCleanStart(e,Li.redone);if(Li!==null&&Li.parent._item===Xn){Qn=Li;break}Qn=Qn.left}for(;Jn!==null;){let Li=Jn;for(;Li!==null&&Li.parent._item!==Xn;)Li=Li.redone===null?null:getItemCleanStart(e,Li.redone);if(Li!==null&&Li.parent._item===Xn){Jn=Li;break}Jn=Jn.right}}else if(Jn=null,n.right&&!g){for(Qn=n;Qn!==null&&Qn.right!==null&&(Qn.right.redone||isDeleted(d,Qn.right.id)||isDeletedByUndoStack(jn.undoStack,Qn.right.id)||isDeletedByUndoStack(jn.redoStack,Qn.right.id));)for(Qn=Qn.right;Qn.redone;)Qn=getItemCleanStart(e,Qn.redone);if(Qn&&Qn.right!==null)return null}else Qn=Ai._map.get(n.parentSub)||null;const Ri=getState(zn,qn),Ni=createID(qn,Ri),$i=new Item$1(Ni,Qn,Qn&&Qn.lastId,Jn,Jn&&Jn.id,Ai,n.parentSub,n.content.copy());return n.redone=Ni,keepItem($i,!0),$i.integrate(e,0),$i};let Item$1=class K0 extends AbstractStruct{constructor(n,l,d,g,jn,Un,zn,qn){super(n,qn.getLength()),this.origin=d,this.left=l,this.right=g,this.rightOrigin=jn,this.parent=Un,this.parentSub=zn,this.redone=null,this.content=qn,this.info=this.content.isCountable()?BIT2:0}set marker(n){(this.info&BIT4)>0!==n&&(this.info^=BIT4)}get marker(){return(this.info&BIT4)>0}get keep(){return(this.info&BIT1)>0}set keep(n){this.keep!==n&&(this.info^=BIT1)}get countable(){return(this.info&BIT2)>0}get deleted(){return(this.info&BIT3)>0}set deleted(n){this.deleted!==n&&(this.info^=BIT3)}markDeleted(){this.info|=BIT3}getMissing(n,l){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=getState(l,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=getState(l,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ID&&this.id.client!==this.parent.client&&this.parent.clock>=getState(l,this.parent.client))return this.parent.client;if(this.origin&&(this.left=getItemCleanEnd(n,l,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=getItemCleanStart(n,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===GC||this.right&&this.right.constructor===GC)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===K0?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===K0&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ID){const d=getItem(l,this.parent);d.constructor===GC?this.parent=null:this.parent=d.content.type}return null}integrate(n,l){if(l>0&&(this.id.clock+=l,this.left=getItemCleanEnd(n,n.doc.store,createID(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(l),this.length-=l),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let d=this.left,g;if(d!==null)g=d.right;else if(this.parentSub!==null)for(g=this.parent._map.get(this.parentSub)||null;g!==null&&g.left!==null;)g=g.left;else g=this.parent._start;const jn=new Set,Un=new Set;for(;g!==null&&g!==this.right;){if(Un.add(g),jn.add(g),compareIDs(this.origin,g.origin)){if(g.id.client<this.id.client)d=g,jn.clear();else if(compareIDs(this.rightOrigin,g.rightOrigin))break}else if(g.origin!==null&&Un.has(getItem(n.doc.store,g.origin)))jn.has(getItem(n.doc.store,g.origin))||(d=g,jn.clear());else break;g=g.right}this.left=d}if(this.left!==null){const d=this.left.right;this.right=d,this.left.right=this}else{let d;if(this.parentSub!==null)for(d=this.parent._map.get(this.parentSub)||null;d!==null&&d.left!==null;)d=d.left;else d=this.parent._start,this.parent._start=this;this.right=d}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(n)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),addStruct(n.doc.store,this),this.content.integrate(n,this),addChangedTypeToTransaction(n,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(n)}else new GC(this.id,this.length).integrate(n,0)}get next(){let n=this.right;for(;n!==null&&n.deleted;)n=n.right;return n}get prev(){let n=this.left;for(;n!==null&&n.deleted;)n=n.left;return n}get lastId(){return this.length===1?this.id:createID(this.id.client,this.id.clock+this.length-1)}mergeWith(n){if(this.constructor===n.constructor&&compareIDs(n.origin,this.lastId)&&this.right===n&&compareIDs(this.rightOrigin,n.rightOrigin)&&this.id.client===n.id.client&&this.id.clock+this.length===n.id.clock&&this.deleted===n.deleted&&this.redone===null&&n.redone===null&&this.content.constructor===n.content.constructor&&this.content.mergeWith(n.content)){const l=this.parent._searchMarker;return l&&l.forEach(d=>{d.p===n&&(d.p=this,!this.deleted&&this.countable&&(d.index-=this.length))}),n.keep&&(this.keep=!0),this.right=n.right,this.right!==null&&(this.right.left=this),this.length+=n.length,!0}return!1}delete(n){if(!this.deleted){const l=this.parent;this.countable&&this.parentSub===null&&(l._length-=this.length),this.markDeleted(),addToDeleteSet(n.deleteSet,this.id.client,this.id.clock,this.length),addChangedTypeToTransaction(n,l,this.parentSub),this.content.delete(n)}}gc(n,l){if(!this.deleted)throw unexpectedCase();this.content.gc(n),l?replaceStruct(n,this,new GC(this.id,this.length)):this.content=new ContentDeleted(this.length)}write(n,l){const d=l>0?createID(this.id.client,this.id.clock+l-1):this.origin,g=this.rightOrigin,jn=this.parentSub,Un=this.content.getRef()&BITS5|(d===null?0:BIT8)|(g===null?0:BIT7)|(jn===null?0:BIT6);if(n.writeInfo(Un),d!==null&&n.writeLeftID(d),g!==null&&n.writeRightID(g),d===null&&g===null){const zn=this.parent;if(zn._item!==void 0){const qn=zn._item;if(qn===null){const Kn=findRootTypeKey(zn);n.writeParentInfo(!0),n.writeString(Kn)}else n.writeParentInfo(!1),n.writeLeftID(qn.id)}else zn.constructor===String?(n.writeParentInfo(!0),n.writeString(zn)):zn.constructor===ID?(n.writeParentInfo(!1),n.writeLeftID(zn)):unexpectedCase();jn!==null&&n.writeString(jn)}this.content.write(n,l)}};const readItemContent=(e,n)=>contentRefs[n&BITS5](e),contentRefs=[()=>{unexpectedCase()},readContentDeleted,readContentJSON,readContentBinary,readContentString,readContentEmbed,readContentFormat,readContentType,readContentAny,readContentDoc,()=>{unexpectedCase()}],structSkipRefNumber=10;class Skip extends AbstractStruct{get deleted(){return!0}delete(){}mergeWith(n){return this.constructor!==n.constructor?!1:(this.length+=n.length,!0)}integrate(n,l){unexpectedCase()}write(n,l){n.writeInfo(structSkipRefNumber),writeVarUint(n.restEncoder,this.length-l)}getMissing(n,l){return null}}const glo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},importIdentifier="__ $YJS$ __";glo[importIdentifier]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");glo[importIdentifier]=!0;const createMutex=()=>{let e=!0;return(n,l)=>{if(e){e=!1;try{n()}finally{e=!0}}else l!==void 0&&l()}},highSurrogateRegex=/[\uD800-\uDBFF]/,lowSurrogateRegex=/[\uDC00-\uDFFF]/,simpleDiffString=(e,n)=>{let l=0,d=0;for(;l<e.length&&l<n.length&&e[l]===n[l];)l++;for(l>0&&highSurrogateRegex.test(e[l-1])&&l--;d+l<e.length&&d+l<n.length&&e[e.length-d-1]===n[n.length-d-1];)d++;return d>0&&lowSurrogateRegex.test(e[e.length-d])&&d--,{index:l,remove:e.length-l-d,insert:n.slice(l,n.length-d)}},simpleDiff=simpleDiffString,ySyncPluginKey=new PluginKey("y-sync"),yUndoPluginKey=new PluginKey("y-undo"),yCursorPluginKey=new PluginKey("yjs-cursor"),rotr=(e,n)=>e>>>n|e<<32-n,sum0to256=e=>rotr(e,2)^rotr(e,13)^rotr(e,22),sum1to256=e=>rotr(e,6)^rotr(e,11)^rotr(e,25),sigma0to256=e=>rotr(e,7)^rotr(e,18)^e>>>3,sigma1to256=e=>rotr(e,17)^rotr(e,19)^e>>>10,K$3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),HINIT=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class Hasher{constructor(){const n=new ArrayBuffer(320);this._H=new Uint32Array(n,0,8),this._H.set(HINIT),this._W=new Uint32Array(n,64,64)}_updateHash(){const n=this._H,l=this._W;for(let Qn=16;Qn<64;Qn++)l[Qn]=sigma1to256(l[Qn-2])+l[Qn-7]+sigma0to256(l[Qn-15])+l[Qn-16];let d=n[0],g=n[1],jn=n[2],Un=n[3],zn=n[4],qn=n[5],Kn=n[6],Xn=n[7];for(let Qn=0,Jn,Ai;Qn<64;Qn++)Jn=Xn+sum1to256(zn)+(zn&qn^~zn&Kn)+K$3[Qn]+l[Qn]>>>0,Ai=sum0to256(d)+(d&g^d&jn^g&jn)>>>0,Xn=Kn,Kn=qn,qn=zn,zn=Un+Jn>>>0,Un=jn,jn=g,g=d,d=Jn+Ai>>>0;n[0]+=d,n[1]+=g,n[2]+=jn,n[3]+=Un,n[4]+=zn,n[5]+=qn,n[6]+=Kn,n[7]+=Xn}digest(n){let l=0;for(;l+56<=n.length;){let Un=0;for(;Un<16&&l+3<n.length;Un++)this._W[Un]=n[l++]<<24|n[l++]<<16|n[l++]<<8|n[l++];if(l%64!==0){for(this._W.fill(0,Un,16);l<n.length;)this._W[Un]|=n[l]<<(3-l%4)*8,l++;this._W[Un]|=BIT8<<(3-l%4)*8}this._updateHash()}const d=l%64!==0;this._W.fill(0,0,16);let g=0;for(;l<n.length;g++)for(let Un=3;Un>=0&&l<n.length;Un--)this._W[g]|=n[l++]<<Un*8;d||(this._W[g-(l%4===0?0:1)]|=BIT8<<(3-l%4)*8),this._W[14]=n.byteLength/BIT30,this._W[15]=n.byteLength*8,this._updateHash();const jn=new Uint8Array(32);for(let Un=0;Un<this._H.length;Un++)for(let zn=0;zn<4;zn++)jn[Un*4+zn]=this._H[Un]>>>(3-zn)*8;return jn}}const digest=e=>new Hasher().digest(e),_convolute=e=>{for(let l=6;l<e.length;l++)e[l%6]=e[l%6]^e[l];return e.slice(0,6)},hashOfJSON=e=>toBase64(_convolute(digest(encodeAny(e)))),isVisible=(e,n)=>n===void 0?!e.deleted:n.sv.has(e.id.client)&&n.sv.get(e.id.client)>e.id.clock&&!isDeleted(n.ds,e.id),defaultColors$1=[{light:"#ecd44433",dark:"#ecd444"}],getUserColor=(e,n,l)=>{if(!e.has(l)){if(e.size<n.length){const d=create$8();e.forEach(g=>d.add(g)),n=n.filter(g=>!d.has(g))}e.set(l,oneOf$1(n))}return e.get(l)},ySyncPlugin=(e,{colors:n=defaultColors$1,colorMapping:l=new Map,permanentUserData:d=null,onFirstRender:g=()=>{},mapping:jn}={})=>{let Un=!1;const zn=new ProsemirrorBinding(e,jn),qn=new Plugin({props:{editable:Kn=>{const Xn=ySyncPluginKey.getState(Kn);return Xn.snapshot==null&&Xn.prevSnapshot==null}},key:ySyncPluginKey,state:{init:(Kn,Xn)=>({type:e,doc:e.doc,binding:zn,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:n,colorMapping:l,permanentUserData:d}),apply:(Kn,Xn)=>{const Qn=Kn.getMeta(ySyncPluginKey);if(Qn!==void 0){Xn=Object.assign({},Xn);for(const Jn in Qn)Xn[Jn]=Qn[Jn]}return Xn.addToHistory=Kn.getMeta("addToHistory")!==!1,Xn.isChangeOrigin=Qn!==void 0&&!!Qn.isChangeOrigin,Xn.isUndoRedoOperation=Qn!==void 0&&!!Qn.isChangeOrigin&&!!Qn.isUndoRedoOperation,zn.prosemirrorView!==null&&Qn!==void 0&&(Qn.snapshot!=null||Qn.prevSnapshot!=null)&&timeout(0,()=>{zn.prosemirrorView!=null&&(Qn.restore==null?zn._renderSnapshot(Qn.snapshot,Qn.prevSnapshot,Xn):(zn._renderSnapshot(Qn.snapshot,Qn.snapshot,Xn),delete Xn.restore,delete Xn.snapshot,delete Xn.prevSnapshot,zn.mux(()=>{zn._prosemirrorChanged(zn.prosemirrorView.state.doc)})))}),Xn}},view:Kn=>(zn.initView(Kn),jn==null&&zn._forceRerender(),g(),{update:()=>{const Xn=qn.getState(Kn.state);if(Xn.snapshot==null&&Xn.prevSnapshot==null&&(Un||Kn.state.doc.content.findDiffStart(Kn.state.doc.type.createAndFill().content)!==null)){if(Un=!0,Xn.addToHistory===!1&&!Xn.isChangeOrigin){const Qn=yUndoPluginKey.getState(Kn.state),Jn=Qn&&Qn.undoManager;Jn&&Jn.stopCapturing()}zn.mux(()=>{Xn.doc.transact(Qn=>{Qn.meta.set("addToHistory",Xn.addToHistory),zn._prosemirrorChanged(Kn.state.doc)},ySyncPluginKey)})}},destroy:()=>{zn.destroy()}})});return qn},restoreRelativeSelection=(e,n,l)=>{if(n!==null&&n.anchor!==null&&n.head!==null)if(n.type==="all")e.setSelection(new AllSelection(e.doc));else if(n.type==="node"){const d=relativePositionToAbsolutePosition(l.doc,l.type,n.anchor,l.mapping);e.setSelection(NodeSelection.create(e.doc,d))}else{const d=relativePositionToAbsolutePosition(l.doc,l.type,n.anchor,l.mapping),g=relativePositionToAbsolutePosition(l.doc,l.type,n.head,l.mapping);if(d!==null&&g!==null){const jn=TextSelection.between(e.doc.resolve(d),e.doc.resolve(g));e.setSelection(jn)}}},getRelativeSelection=(e,n)=>({type:n.selection.jsonID,anchor:absolutePositionToRelativePosition(n.selection.anchor,e.type,e.mapping),head:absolutePositionToRelativePosition(n.selection.head,e.type,e.mapping)});class ProsemirrorBinding{constructor(n,l=new Map){this.type=n,this.prosemirrorView=null,this.mux=createMutex(),this.mapping=l,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=n.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=getRelativeSelection(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(isBrowser&&this._domSelectionInView===null&&(timeout(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const n=this.prosemirrorView._root.getSelection();if(n==null||n.anchorNode==null)return!1;const l=this.prosemirrorView._root.createRange();l.setStart(n.anchorNode,n.anchorOffset),l.setEnd(n.focusNode,n.focusOffset),l.getClientRects().length===0&&l.startContainer&&l.collapsed&&l.selectNodeContents(l.startContainer);const g=l.getBoundingClientRect(),jn=doc.documentElement;return g.bottom>=0&&g.right>=0&&g.left<=(window.innerWidth||jn.clientWidth||0)&&g.top<=(window.innerHeight||jn.clientHeight||0)}renderSnapshot(n,l){l||(l=createSnapshot(createDeleteSet(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(ySyncPluginKey,{snapshot:n,prevSnapshot:l}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const n=this.type.toArray().map(d=>createNodeFromYElement(d,this.prosemirrorView.state.schema,this)).filter(d=>d!==null),l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Slice(Fragment.from(n),0,0));l.setMeta(ySyncPluginKey,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(l)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const n=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,l=this.type.toArray().map(g=>createNodeFromYElement(g,this.prosemirrorView.state.schema,this)).filter(g=>g!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Slice(Fragment.from(l),0,0));if(n){const g=min$1(max$1(n.anchor,0),d.doc.content.size),jn=min$1(max$1(n.head,0),d.doc.content.size);d.setSelection(TextSelection.create(d.doc,g,jn))}this.prosemirrorView.dispatch(d.setMeta(ySyncPluginKey,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(n,l,d){let g=this.doc,jn=this.type;if(n||(n=snapshot(this.doc)),n instanceof Uint8Array||l instanceof Uint8Array)if((!(n instanceof Uint8Array)||!(l instanceof Uint8Array))&&unexpectedCase(),g=new Doc({gc:!1}),applyUpdateV2(g,l),l=snapshot(g),applyUpdateV2(g,n),n=snapshot(g),jn._item===null){const Un=Array.from(this.doc.share.keys()).find(zn=>this.doc.share.get(zn)===this.type);jn=g.getXmlFragment(Un)}else{const Un=g.store.clients.get(jn._item.id.client)??[],zn=findIndexSS(Un,jn._item.id.clock);jn=Un[zn].content.type}this.mapping.clear(),this.mux(()=>{g.transact(Un=>{const zn=d.permanentUserData;zn&&zn.dss.forEach(Qn=>{iterateDeletedStructs(Un,Qn,Jn=>{})});const qn=(Qn,Jn)=>{const Ai=Qn==="added"?zn.getUserByClientId(Jn.client):zn.getUserByDeletedId(Jn);return{user:Ai,type:Qn,color:getUserColor(d.colorMapping,d.colors,Ai)}},Kn=typeListToArraySnapshot(jn,new Snapshot(l.ds,n.sv)).map(Qn=>!Qn._item.deleted||isVisible(Qn._item,n)||isVisible(Qn._item,l)?createNodeFromYElement(Qn,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},n,l,qn):null).filter(Qn=>Qn!==null),Xn=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Slice(Fragment.from(Kn),0,0));this.prosemirrorView.dispatch(Xn.setMeta(ySyncPluginKey,{isChangeOrigin:!0}))},ySyncPluginKey)})}_typeChanged(n,l){if(this.prosemirrorView==null)return;const d=ySyncPluginKey.getState(this.prosemirrorView.state);if(n.length===0||d.snapshot!=null||d.prevSnapshot!=null){this.renderSnapshot(d.snapshot,d.prevSnapshot);return}this.mux(()=>{const g=(zn,qn)=>this.mapping.delete(qn);iterateDeletedStructs(l,l.deleteSet,zn=>{if(zn.constructor===Item$1){const qn=zn.content.type;qn&&this.mapping.delete(qn)}}),l.changed.forEach(g),l.changedParentTypes.forEach(g);const jn=this.type.toArray().map(zn=>createNodeIfNotExists(zn,this.prosemirrorView.state.schema,this)).filter(zn=>zn!==null);let Un=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Slice(Fragment.from(jn),0,0));restoreRelativeSelection(Un,this.beforeTransactionSelection,this),Un=Un.setMeta(ySyncPluginKey,{isChangeOrigin:!0,isUndoRedoOperation:l.origin instanceof UndoManager}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&Un.scrollIntoView(),this.prosemirrorView.dispatch(Un)})}_prosemirrorChanged(n){this.doc.transact(()=>{updateYFragment(this.doc,this.type,n,this),this.beforeTransactionSelection=getRelativeSelection(this,this.prosemirrorView.state)},ySyncPluginKey)}initView(n){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=n,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const createNodeIfNotExists=(e,n,l,d,g,jn)=>{const Un=l.mapping.get(e);if(Un===void 0){if(e instanceof YXmlElement)return createNodeFromYElement(e,n,l,d,g,jn);throw methodUnimplemented()}return Un},createNodeFromYElement=(e,n,l,d,g,jn)=>{const Un=[],zn=qn=>{if(qn instanceof YXmlElement){const Kn=createNodeIfNotExists(qn,n,l,d,g,jn);Kn!==null&&Un.push(Kn)}else{const Kn=qn._item.right?.content?.type;Kn instanceof YText&&!Kn._item.deleted&&Kn._item.id.client===Kn.doc.clientID&&(qn.applyDelta([{retain:qn.length},...Kn.toDelta()]),Kn.doc.transact(Qn=>{Kn._item.delete(Qn)}));const Xn=createTextNodesFromYText(qn,n,l,d,g,jn);Xn!==null&&Xn.forEach(Qn=>{Qn!==null&&Un.push(Qn)})}};d===void 0||g===void 0?e.toArray().forEach(zn):typeListToArraySnapshot(e,new Snapshot(g.ds,d.sv)).forEach(zn);try{const qn=e.getAttributes(d);d!==void 0&&(isVisible(e._item,d)?isVisible(e._item,g)||(qn.ychange=jn?jn("added",e._item.id):{type:"added"}):qn.ychange=jn?jn("removed",e._item.id):{type:"removed"});const Kn=n.node(e.nodeName,qn,Un);return l.mapping.set(e,Kn),Kn}catch{return e.doc.transact(Kn=>{e._item.delete(Kn)},ySyncPluginKey),l.mapping.delete(e),null}},createTextNodesFromYText=(e,n,l,d,g,jn)=>{const Un=[],zn=e.toDelta(d,g,jn);try{for(let qn=0;qn<zn.length;qn++){const Kn=zn[qn];Un.push(n.text(Kn.insert,attributesToMarks(Kn.attributes,n)))}}catch{return e.doc.transact(Kn=>{e._item.delete(Kn)},ySyncPluginKey),null}return Un},createTypeFromTextNodes=(e,n)=>{const l=new YXmlText,d=e.map(g=>({insert:g.text,attributes:marksToAttributes(g.marks,n)}));return l.applyDelta(d),n.mapping.set(l,e),l},createTypeFromElementNode=(e,n)=>{const l=new YXmlElement(e.type.name);for(const d in e.attrs){const g=e.attrs[d];g!==null&&d!=="ychange"&&l.setAttribute(d,g)}return l.insert(0,normalizePNodeContent(e).map(d=>createTypeFromTextOrElementNode(d,n))),n.mapping.set(l,e),l},createTypeFromTextOrElementNode=(e,n)=>e instanceof Array?createTypeFromTextNodes(e,n):createTypeFromElementNode(e,n),isObject$1=e=>typeof e=="object"&&e!==null,equalAttrs=(e,n)=>{const l=Object.keys(e).filter(g=>e[g]!==null);let d=l.length===(n==null?0:Object.keys(n).filter(g=>n[g]!==null).length);for(let g=0;g<l.length&&d;g++){const jn=l[g],Un=e[jn],zn=n[jn];d=jn==="ychange"||Un===zn||isObject$1(Un)&&isObject$1(zn)&&equalAttrs(Un,zn)}return d},normalizePNodeContent=e=>{const n=e.content.content,l=[];for(let d=0;d<n.length;d++){const g=n[d];if(g.isText){const jn=[];for(let Un=n[d];d<n.length&&Un.isText;Un=n[++d])jn.push(Un);d--,l.push(jn)}else l.push(g)}return l},equalYTextPText=(e,n)=>{const l=e.toDelta();return l.length===n.length&&l.every((d,g)=>d.insert===n[g].text&&keys$2(d.attributes||{}).length===n[g].marks.length&&every(d.attributes,(jn,Un)=>{const zn=yattr2markname(Un),qn=n[g].marks;return equalAttrs(jn,qn.find(Kn=>Kn.type.name===zn)?.attrs)}))},equalYTypePNode=(e,n)=>{if(e instanceof YXmlElement&&!(n instanceof Array)&&matchNodeName(e,n)){const l=normalizePNodeContent(n);return e._length===l.length&&equalAttrs(e.getAttributes(),n.attrs)&&e.toArray().every((d,g)=>equalYTypePNode(d,l[g]))}return e instanceof YXmlText&&n instanceof Array&&equalYTextPText(e,n)},mappedIdentity=(e,n)=>e===n||e instanceof Array&&n instanceof Array&&e.length===n.length&&e.every((l,d)=>n[d]===l),computeChildEqualityFactor=(e,n,l)=>{const d=e.toArray(),g=normalizePNodeContent(n),jn=g.length,Un=d.length,zn=min$1(Un,jn);let qn=0,Kn=0,Xn=!1;for(;qn<zn;qn++){const Qn=d[qn],Jn=g[qn];if(mappedIdentity(l.mapping.get(Qn),Jn))Xn=!0;else if(!equalYTypePNode(Qn,Jn))break}for(;qn+Kn<zn;Kn++){const Qn=d[Un-Kn-1],Jn=g[jn-Kn-1];if(mappedIdentity(l.mapping.get(Qn),Jn))Xn=!0;else if(!equalYTypePNode(Qn,Jn))break}return{equalityFactor:qn+Kn,foundMappedChild:Xn}},ytextTrans=e=>{let n="",l=e._start;const d={};for(;l!==null;)l.deleted||(l.countable&&l.content instanceof ContentString?n+=l.content.str:l.content instanceof ContentFormat&&(d[l.content.key]=null)),l=l.right;return{str:n,nAttrs:d}},updateYText=(e,n,l)=>{l.mapping.set(e,n);const{nAttrs:d,str:g}=ytextTrans(e),jn=n.map(Kn=>({insert:Kn.text,attributes:Object.assign({},d,marksToAttributes(Kn.marks,l))})),{insert:Un,remove:zn,index:qn}=simpleDiff(g,jn.map(Kn=>Kn.insert).join(""));e.delete(qn,zn),e.insert(qn,Un),e.applyDelta(jn.map(Kn=>({retain:Kn.insert.length,attributes:Kn.attributes})))},hashedMarkNameRegex=/(.*)(--[a-zA-Z0-9+/=]{8})$/,yattr2markname=e=>hashedMarkNameRegex.exec(e)?.[1]??e,attributesToMarks=(e,n)=>{const l=[];for(const d in e)l.push(n.mark(yattr2markname(d),e[d]));return l},marksToAttributes=(e,n)=>{const l={};return e.forEach(d=>{if(d.type.name!=="ychange"){const g=setIfUndefined(n.isOMark,d.type,()=>!d.type.excludes(d.type));l[g?`${d.type.name}--${hashOfJSON(d.toJSON())}`:d.type.name]=d.attrs}}),l},updateYFragment=(e,n,l,d)=>{if(n instanceof YXmlElement&&n.nodeName!==l.type.name)throw new Error("node name mismatch!");if(d.mapping.set(n,l),n instanceof YXmlElement){const Qn=n.getAttributes(),Jn=l.attrs;for(const Ai in Jn)Jn[Ai]!==null?Qn[Ai]!==Jn[Ai]&&Ai!=="ychange"&&n.setAttribute(Ai,Jn[Ai]):n.removeAttribute(Ai);for(const Ai in Qn)Jn[Ai]===void 0&&n.removeAttribute(Ai)}const g=normalizePNodeContent(l),jn=g.length,Un=n.toArray(),zn=Un.length,qn=min$1(jn,zn);let Kn=0,Xn=0;for(;Kn<qn;Kn++){const Qn=Un[Kn],Jn=g[Kn];if(!mappedIdentity(d.mapping.get(Qn),Jn))if(equalYTypePNode(Qn,Jn))d.mapping.set(Qn,Jn);else break}for(;Xn+Kn<qn;Xn++){const Qn=Un[zn-Xn-1],Jn=g[jn-Xn-1];if(!mappedIdentity(d.mapping.get(Qn),Jn))if(equalYTypePNode(Qn,Jn))d.mapping.set(Qn,Jn);else break}e.transact(()=>{for(;zn-Kn-Xn>0&&jn-Kn-Xn>0;){const Jn=Un[Kn],Ai=g[Kn],Ri=Un[zn-Xn-1],Ni=g[jn-Xn-1];if(Jn instanceof YXmlText&&Ai instanceof Array)equalYTextPText(Jn,Ai)||updateYText(Jn,Ai,d),Kn+=1;else{let $i=Jn instanceof YXmlElement&&matchNodeName(Jn,Ai),Li=Ri instanceof YXmlElement&&matchNodeName(Ri,Ni);if($i&&Li){const ji=computeChildEqualityFactor(Jn,Ai,d),Fi=computeChildEqualityFactor(Ri,Ni,d);ji.foundMappedChild&&!Fi.foundMappedChild?Li=!1:!ji.foundMappedChild&&Fi.foundMappedChild||ji.equalityFactor<Fi.equalityFactor?$i=!1:Li=!1}$i?(updateYFragment(e,Jn,Ai,d),Kn+=1):Li?(updateYFragment(e,Ri,Ni,d),Xn+=1):(d.mapping.delete(n.get(Kn)),n.delete(Kn,1),n.insert(Kn,[createTypeFromTextOrElementNode(Ai,d)]),Kn+=1)}}const Qn=zn-Kn-Xn;if(zn===1&&jn===0&&Un[0]instanceof YXmlText?(d.mapping.delete(Un[0]),Un[0].delete(0,Un[0].length)):Qn>0&&(n.slice(Kn,Kn+Qn).forEach(Jn=>d.mapping.delete(Jn)),n.delete(Kn,Qn)),Kn+Xn<jn){const Jn=[];for(let Ai=Kn;Ai<jn-Xn;Ai++)Jn.push(createTypeFromTextOrElementNode(g[Ai],d));n.insert(Kn,Jn)}},ySyncPluginKey)},matchNodeName=(e,n)=>!(n instanceof Array)&&e.nodeName===n.type.name;let viewsToUpdate=null;const updateMetas=()=>{const e=viewsToUpdate;viewsToUpdate=null,e.forEach((n,l)=>{const d=l.state.tr,g=ySyncPluginKey.getState(l.state);g&&g.binding&&!g.binding.isDestroyed&&(n.forEach((jn,Un)=>{d.setMeta(Un,jn)}),l.dispatch(d))})},setMeta=(e,n,l)=>{viewsToUpdate||(viewsToUpdate=new Map,timeout(0,updateMetas)),setIfUndefined(viewsToUpdate,e,create$9).set(n,l)},absolutePositionToRelativePosition=(e,n,l)=>{if(e===0)return createRelativePositionFromTypeIndex(n,0,n.length===0?-1:0);let d=n._first===null?null:n._first.content.type;for(;d!==null&&n!==d;){if(d instanceof YXmlText){if(d._length>=e)return createRelativePositionFromTypeIndex(d,e,n.length===0?-1:0);if(e-=d._length,d._item!==null&&d._item.next!==null)d=d._item.next.content.type;else{do d=d._item===null?null:d._item.parent,e--;while(d!==n&&d!==null&&d._item!==null&&d._item.next===null);d!==null&&d!==n&&(d=d._item===null?null:d._item.next.content.type)}}else{const g=(l.get(d)||{nodeSize:0}).nodeSize;if(d._first!==null&&e<g)d=d._first.content.type,e--;else{if(e===1&&d._length===0&&g>1)return new RelativePosition(d._item===null?null:d._item.id,d._item===null?findRootTypeKey(d):null,null);if(e-=g,d._item!==null&&d._item.next!==null)d=d._item.next.content.type;else{if(e===0)return d=d._item===null?d:d._item.parent,new RelativePosition(d._item===null?null:d._item.id,d._item===null?findRootTypeKey(d):null,null);do d=d._item.parent,e--;while(d!==n&&d._item.next===null);d!==n&&(d=d._item.next.content.type)}}}if(d===null)throw unexpectedCase();if(e===0&&d.constructor!==YXmlText&&d!==n)return createRelativePosition(d._item.parent,d._item)}return createRelativePositionFromTypeIndex(n,n._length,n.length===0?-1:0)},createRelativePosition=(e,n)=>{let l=null,d=null;return e._item===null?d=findRootTypeKey(e):l=createID(e._item.id.client,e._item.id.clock),new RelativePosition(l,d,n.id)},relativePositionToAbsolutePosition=(e,n,l,d)=>{const g=createAbsolutePositionFromRelativePosition(l,e);if(g===null||g.type!==n&&!isParentOf(n,g.type._item))return null;let jn=g.type,Un=0;if(jn.constructor===YXmlText)Un=g.index;else if(jn._item===null||!jn._item.deleted){let zn=jn._first,qn=0;for(;qn<jn._length&&qn<g.index&&zn!==null;){if(!zn.deleted){const Kn=zn.content.type;qn++,Kn instanceof YXmlText?Un+=Kn._length:Un+=d.get(Kn).nodeSize}zn=zn.right}Un+=1}for(;jn!==n&&jn._item!==null;){const zn=jn._item.parent;if(zn._item===null||!zn._item.deleted){Un+=1;let qn=zn._first;for(;qn!==null;){const Kn=qn.content.type;if(Kn===jn)break;qn.deleted||(Kn instanceof YXmlText?Un+=Kn._length:Un+=d.get(Kn).nodeSize),qn=qn.right}}jn=zn}return Un-1},defaultAwarenessStateFilter=(e,n,l)=>e!==n,defaultCursorBuilder=e=>{const n=document.createElement("span");n.classList.add("ProseMirror-yjs-cursor"),n.setAttribute("style",`border-color: ${e.color}`);const l=document.createElement("div");l.setAttribute("style",`background-color: ${e.color}`),l.insertBefore(document.createTextNode(e.name),null);const d=document.createTextNode(""),g=document.createTextNode("");return n.insertBefore(d,null),n.insertBefore(l,null),n.insertBefore(g,null),n},defaultSelectionBuilder=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),rxValidColor=/^#[0-9a-fA-F]{6}$/,createDecorations=(e,n,l,d,g)=>{const jn=ySyncPluginKey.getState(e),Un=jn.doc,zn=[];return jn.snapshot!=null||jn.prevSnapshot!=null||jn.binding.mapping.size===0?DecorationSet.create(e.doc,[]):(n.getStates().forEach((qn,Kn)=>{if(l(Un.clientID,Kn,qn)&&qn.cursor!=null){const Xn=qn.user||{};Xn.color==null?Xn.color="#ffa500":rxValidColor.test(Xn.color)||console.warn("A user uses an unsupported color format",Xn),Xn.name==null&&(Xn.name=`User: ${Kn}`);let Qn=relativePositionToAbsolutePosition(Un,jn.type,createRelativePositionFromJSON(qn.cursor.anchor),jn.binding.mapping),Jn=relativePositionToAbsolutePosition(Un,jn.type,createRelativePositionFromJSON(qn.cursor.head),jn.binding.mapping);if(Qn!==null&&Jn!==null){const Ai=max$1(e.doc.content.size-1,0);Qn=min$1(Qn,Ai),Jn=min$1(Jn,Ai),zn.push(Decoration.widget(Jn,()=>d(Xn,Kn),{key:Kn+"",side:10}));const Ri=min$1(Qn,Jn),Ni=max$1(Qn,Jn);zn.push(Decoration.inline(Ri,Ni,g(Xn,Kn),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),DecorationSet.create(e.doc,zn))},yCursorPlugin=(e,{awarenessStateFilter:n=defaultAwarenessStateFilter,cursorBuilder:l=defaultCursorBuilder,selectionBuilder:d=defaultSelectionBuilder,getSelection:g=Un=>Un.selection}={},jn="cursor")=>new Plugin({key:yCursorPluginKey,state:{init(Un,zn){return createDecorations(zn,e,n,l,d)},apply(Un,zn,qn,Kn){const Xn=ySyncPluginKey.getState(Kn),Qn=Un.getMeta(yCursorPluginKey);return Xn&&Xn.isChangeOrigin||Qn&&Qn.awarenessUpdated?createDecorations(Kn,e,n,l,d):zn.map(Un.mapping,Un.doc)}},props:{decorations:Un=>yCursorPluginKey.getState(Un)},view:Un=>{const zn=()=>{Un.docView&&setMeta(Un,yCursorPluginKey,{awarenessUpdated:!0})},qn=()=>{const Kn=ySyncPluginKey.getState(Un.state),Xn=e.getLocalState()||{};if(Un.hasFocus()){const Qn=g(Un.state),Jn=absolutePositionToRelativePosition(Qn.anchor,Kn.type,Kn.binding.mapping),Ai=absolutePositionToRelativePosition(Qn.head,Kn.type,Kn.binding.mapping);(Xn.cursor==null||!compareRelativePositions(createRelativePositionFromJSON(Xn.cursor.anchor),Jn)||!compareRelativePositions(createRelativePositionFromJSON(Xn.cursor.head),Ai))&&e.setLocalStateField(jn,{anchor:Jn,head:Ai})}else Xn.cursor!=null&&relativePositionToAbsolutePosition(Kn.doc,Kn.type,createRelativePositionFromJSON(Xn.cursor.anchor),Kn.binding.mapping)!==null&&e.setLocalStateField(jn,null)};return e.on("change",zn),Un.dom.addEventListener("focusin",qn),Un.dom.addEventListener("focusout",qn),{update:qn,destroy:()=>{Un.dom.removeEventListener("focusin",qn),Un.dom.removeEventListener("focusout",qn),e.off("change",zn),e.setLocalStateField(jn,null)}}}}),undo$1=e=>yUndoPluginKey.getState(e)?.undoManager?.undo()!=null,redo$1=e=>yUndoPluginKey.getState(e)?.undoManager?.redo()!=null,undoCommand=(e,n)=>n==null?yUndoPluginKey.getState(e)?.undoManager?.canUndo():undo$1(e),redoCommand=(e,n)=>n==null?yUndoPluginKey.getState(e)?.undoManager?.canRedo():redo$1(e),defaultProtectedNodes=new Set(["paragraph"]),defaultDeleteFilter=(e,n)=>!(e instanceof Item$1)||!(e.content instanceof ContentType)||!(e.content.type instanceof YText||e.content.type instanceof YXmlElement&&n.has(e.content.type.nodeName))||e.content.type._length===0,yUndoPlugin=({protectedNodes:e=defaultProtectedNodes,trackedOrigins:n=[],undoManager:l=null}={})=>new Plugin({key:yUndoPluginKey,state:{init:(d,g)=>{const jn=ySyncPluginKey.getState(g),Un=l||new UndoManager(jn.type,{trackedOrigins:new Set([ySyncPluginKey].concat(n)),deleteFilter:zn=>defaultDeleteFilter(zn,e),captureTransaction:zn=>zn.meta.get("addToHistory")!==!1});return{undoManager:Un,prevSel:null,hasUndoOps:Un.undoStack.length>0,hasRedoOps:Un.redoStack.length>0}},apply:(d,g,jn,Un)=>{const zn=ySyncPluginKey.getState(Un).binding,qn=g.undoManager,Kn=qn.undoStack.length>0,Xn=qn.redoStack.length>0;return zn?{undoManager:qn,prevSel:getRelativeSelection(zn,jn),hasUndoOps:Kn,hasRedoOps:Xn}:Kn!==g.hasUndoOps||Xn!==g.hasRedoOps?Object.assign({},g,{hasUndoOps:qn.undoStack.length>0,hasRedoOps:qn.redoStack.length>0}):g}},view:d=>{const g=ySyncPluginKey.getState(d.state),jn=yUndoPluginKey.getState(d.state).undoManager;return jn.on("stack-item-added",({stackItem:Un})=>{const zn=g.binding;zn&&Un.meta.set(zn,yUndoPluginKey.getState(d.state).prevSel)}),jn.on("stack-item-popped",({stackItem:Un})=>{const zn=g.binding;zn&&(zn.beforeTransactionSelection=Un.meta.get(zn)||zn.beforeTransactionSelection)}),{destroy:()=>{jn.destroy()}}}}),__storeToDerived=new WeakMap,__derivedToStore=new WeakMap,__depsThatHaveWrittenThisTick={current:[]};let __isFlushing=!1;const __pendingUpdates=new Set,__initialBatchValues=new Map;function __flush_internals(e){const n=Array.from(e).sort((l,d)=>l instanceof Derived&&l.options.deps.includes(d)?1:d instanceof Derived&&d.options.deps.includes(l)?-1:0);for(const l of n){if(__depsThatHaveWrittenThisTick.current.includes(l))continue;__depsThatHaveWrittenThisTick.current.push(l),l.recompute();const d=__derivedToStore.get(l);if(d)for(const g of d){const jn=__storeToDerived.get(g);jn&&__flush_internals(jn)}}}function __notifyListeners(e){const n={prevVal:e.prevState,currentVal:e.state};for(const l of e.listeners)l(n)}function __notifyDerivedListeners(e){const n={prevVal:e.prevState,currentVal:e.state};for(const l of e.listeners)l(n)}function __flush(e){if(__pendingUpdates.add(e),!__isFlushing)try{for(__isFlushing=!0;__pendingUpdates.size>0;){const n=Array.from(__pendingUpdates);__pendingUpdates.clear();for(const l of n){const d=__initialBatchValues.get(l)??l.prevState;l.prevState=d,__notifyListeners(l)}for(const l of n){const d=__storeToDerived.get(l);d&&(__depsThatHaveWrittenThisTick.current.push(l),__flush_internals(d))}for(const l of n){const d=__storeToDerived.get(l);if(d)for(const g of d)__notifyDerivedListeners(g)}}}finally{__isFlushing=!1,__depsThatHaveWrittenThisTick.current=[],__initialBatchValues.clear()}}function isUpdaterFunction(e){return typeof e=="function"}class Store{constructor(n,l){this.listeners=new Set,this.subscribe=d=>{var g,jn;this.listeners.add(d);const Un=(jn=(g=this.options)==null?void 0:g.onSubscribe)==null?void 0:jn.call(g,d,this);return()=>{this.listeners.delete(d),Un?.()}},this.prevState=n,this.state=n,this.options=l}setState(n){var l,d,g;this.prevState=this.state,(l=this.options)!=null&&l.updateFn?this.state=this.options.updateFn(this.prevState)(n):isUpdaterFunction(n)?this.state=n(this.prevState):this.state=n,(g=(d=this.options)==null?void 0:d.onUpdate)==null||g.call(d),__flush(this)}}class Derived{constructor(n){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const l=this.options.deps.length,d=new Array(l),g=new Array(l);for(let jn=0;jn<l;jn++){const Un=this.options.deps[jn];d[jn]=Un.prevState,g[jn]=Un.state}return this.lastSeenDepValues=g,{prevDepVals:d,currDepVals:g,prevVal:this.prevState??void 0}},this.recompute=()=>{var l,d;this.prevState=this.state;const g=this.getDepVals();this.state=this.options.fn(g),(d=(l=this.options).onUpdate)==null||d.call(l)},this.checkIfRecalculationNeededDeeply=()=>{for(const jn of this.options.deps)jn instanceof Derived&&jn.checkIfRecalculationNeededDeeply();let l=!1;const d=this.lastSeenDepValues,{currDepVals:g}=this.getDepVals();for(let jn=0;jn<g.length;jn++)if(g[jn]!==d[jn]){l=!0;break}l&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const l of this._subscriptions)l()}),this.subscribe=l=>{var d,g;this.listeners.add(l);const jn=(g=(d=this.options).onSubscribe)==null?void 0:g.call(d,l,this);return()=>{this.listeners.delete(l),jn?.()}},this.options=n,this.state=n.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(n=this.options.deps){for(const l of n)if(l instanceof Derived)l.registerOnGraph(),this.registerOnGraph(l.options.deps);else if(l instanceof Store){let d=__storeToDerived.get(l);d||(d=new Set,__storeToDerived.set(l,d)),d.add(this);let g=__derivedToStore.get(this);g||(g=new Set,__derivedToStore.set(this,g)),g.add(l)}}unregisterFromGraph(n=this.options.deps){for(const l of n)if(l instanceof Derived)this.unregisterFromGraph(l.options.deps);else if(l instanceof Store){const d=__storeToDerived.get(l);d&&d.delete(this);const g=__derivedToStore.get(this);g&&g.delete(l)}}}const r$3=Symbol("originalFactory");function a$1(e){if(typeof e=="object"&&"key"in e)return function n(){return e[r$3]=n,e};if(typeof e!="function")throw new Error("factory must be a function");return function n(l){return d=>{const g=e({editor:d.editor,options:l});return g[r$3]=n,g}}}function f$3(e,n){return new Store(e,n)}var h$5=(e,n)=>{if(e==="slot")return 0;if(e instanceof Function)return e(n);const{children:l,...d}=n??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,d,l]},starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return h$5("strong",{...mergeAttributes(this.options.HTMLAttributes,e),children:h$5("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,n)=>n.applyMark("bold",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`**${n.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),index_default$4=Bold,inputRegex$1=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$1=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,n)=>n.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,n)=>e.content?`\`${n.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),index_default$3=Code,starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,n)=>n.applyMark("italic",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`*${n.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),index_default$2=Italic,inputRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,n)=>n.applyMark("strike",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`~~${n.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$1=Strike,Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",mergeAttributes(this.options.HTMLAttributes,e),0]},parseMarkdown(e,n){return n.applyMark(this.name||"underline",n.parseInline(e.tokens||[]))},renderMarkdown(e,n){return`++${n.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,n,l){const g=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!g)return;const jn=g[2].trim();return{type:"underline",raw:g[0],text:jn,tokens:l.inlineTokens(jn)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default=Underline,DecorationCache=class QT{constructor(n){this.cache=new Map(n)}get(n){return this.cache.get(n)}set(n,l,d){n<0||this.cache.set(n,[l,d])}replace(n,l,d,g){this.remove(n),this.set(l,d,g)}remove(n){this.cache.delete(n)}invalidate(n){const l=new QT(this.cache),d=n.mapping;return this.cache.forEach(([g,jn],Un)=>{if(Un<0)return;const zn=d.mapResult(Un),qn=n.doc.nodeAt(zn.pos);if(zn.deleted||!qn?.eq(g))l.remove(Un);else if(Un!==zn.pos){const Kn=jn.map(Xn=>Xn.map(d,0,0)).filter(Xn=>Xn!=null);l.replace(Un,zn.pos,qn,Kn)}}),l}};function createHighlightPlugin({parser:e,nodeTypes:n=["code_block","codeBlock"],languageExtractor:l=d=>d.attrs.language}){const d=new PluginKey("prosemirror-highlight");return new Plugin({key:d,state:{init(g,jn){const Un=new DecorationCache,[zn,qn]=calculateDecoration(jn.doc,e,n,l,Un);return{cache:Un,decorations:zn,promises:qn}},apply:(g,jn)=>{const Un=jn.cache.invalidate(g),zn=!!g.getMeta("prosemirror-highlight-refresh");if(!g.docChanged&&!zn){const Xn=jn.decorations.map(g.mapping,g.doc),Qn=jn.promises;return{cache:Un,decorations:Xn,promises:Qn}}const[qn,Kn]=calculateDecoration(g.doc,e,n,l,Un);return{cache:Un,decorations:qn,promises:Kn}}},view:g=>{const jn=new Set,Un=()=>{if(jn.size>0)return;const qn=g.state.tr.setMeta("prosemirror-highlight-refresh",!0);g.dispatch(qn)},zn=()=>{var qn;const Kn=d.getState(g.state);for(const Xn of(qn=Kn?.promises)!=null?qn:[])jn.add(Xn),Xn.then(()=>{jn.delete(Xn),Un()}).catch(()=>{jn.delete(Xn)})};return zn(),{update:()=>{zn()}}},props:{decorations(g){var jn;return(jn=this.getState(g))==null?void 0:jn.decorations}}})}function calculateDecoration(e,n,l,d,g){const jn=[],Un=[];return e.descendants((zn,qn)=>{if(!zn.type.isTextblock)return!0;if(l.includes(zn.type.name)){const Kn=d(zn),Xn=g.get(qn);if(Xn){const[Qn,Jn]=Xn;jn.push(...Jn)}else{const Qn=n({content:zn.textContent,language:Kn||void 0,pos:qn,size:zn.nodeSize});Qn&&Array.isArray(Qn)?(g.set(qn,zn,Qn),jn.push(...Qn)):Qn instanceof Promise&&(g.remove(qn),Un.push(Qn))}}return!1}),[DecorationSet.create(e,jn),Un]}function createParser(e,n){return function({content:d,language:g,pos:jn,size:Un}){var zn;const qn=[],{tokens:Kn,fg:Xn,bg:Qn,rootStyle:Jn}=e.codeToTokens(d,{lang:g,theme:e.getLoadedThemes()[0]}),Ai=Jn||(Xn&&Qn?`--prosemirror-highlight:${Xn};--prosemirror-highlight-bg:${Qn}`:"");if(Ai){const Ni=Decoration.node(jn,jn+Un,{style:Ai});qn.push(Ni)}let Ri=jn+1;for(const Ni of Kn){for(const $i of Ni){const Li=Ri+$i.content.length,ji=Decoration.inline(Ri,Li,{style:stringifyTokenStyle((zn=$i.htmlStyle)!=null?zn:`color: ${$i.color}`),class:"shiki"});qn.push(ji),Ri=Li}Ri+=1}return qn}}function stringifyTokenStyle(e){return typeof e=="string"?e:Object.entries(e).map(([n,l])=>`${n}:${l}`).join(";")}var Oe$2=Object.defineProperty,_e$2=(e,n,l)=>n in e?Oe$2(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,M$4=(e,n,l)=>_e$2(e,typeof n!="symbol"?n+"":n,l);const mt$2=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function L(e,n="Ctrl"){return mt$2()?e.replace("Mod",""):e.replace("Mod",n)}function D$3(...e){return[...new Set(e.filter(n=>n).join(" ").split(" "))].join(" ")}const uo$2=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function gt$2(e,n,l,d){const g=document.createElement("div");g.className=D$3("bn-block-content",l.class),g.setAttribute("data-content-type",e);for(const[Un,zn]of Object.entries(l))Un!=="class"&&g.setAttribute(Un,zn);const jn=document.createElement(n);jn.className=D$3("bn-inline-content",d.class);for(const[Un,zn]of Object.entries(d))Un!=="class"&&jn.setAttribute(Un,zn);return g.appendChild(jn),{dom:g,contentDOM:jn}}const le$1=(e,n)=>{let l=bt$3(e,n.pmSchema);l.type.name==="blockContainer"&&(l=l.firstChild);const d=n.pmSchema.nodes[l.type.name].spec.toDOM;if(d===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const g=d(l);if(typeof g!="object"||!("dom"in g))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return g};function bt$2(e,n="<br>"){const l=e.querySelectorAll("p");if(l.length>1){const d=l[0];for(let g=1;g<l.length;g++){const jn=l[g];d.innerHTML+=n+jn.innerHTML,jn.remove()}}}function W$1(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function po$3(e){const n=e.split("/");return!n.length||n[n.length-1]===""?e:n[n.length-1]}function fo$3(e){var n;const l=["mp4","webm","ogg","mov","mkv","flv","avi","wmv","m4v"];try{const d=((n=new URL(e).pathname.split(".").pop())==null?void 0:n.toLowerCase())||"";return l.includes(d)}catch{return!1}}function Ct$2(e){const n={};return Object.entries(e).forEach(([l,d])=>{n[l]={default:d.default,keepOnSplit:!0,parseHTML:g=>{const jn=g.getAttribute(W$1(l));if(jn===null)return null;if(d.default===void 0&&d.type==="boolean"||d.default!==void 0&&typeof d.default=="boolean")return jn==="true"?!0:jn==="false"?!1:null;if(d.default===void 0&&d.type==="number"||d.default!==void 0&&typeof d.default=="number"){const Un=parseFloat(jn);return!Number.isNaN(Un)&&Number.isFinite(Un)?Un:null}return jn},renderHTML:g=>g[l]!==d.default?{[W$1(l)]:g[l]}:{}}}),n}function kt$2(e,n,l,d){const g=e();if(g===void 0)throw new Error("Cannot find node position");const jn=l.state.doc.resolve(g).node().attrs.id;if(!jn)throw new Error("Block doesn't have id");const Un=n.getBlock(jn);if(Un.type!==d)throw new Error("Block type does not match");return Un}function Z$1(e,n,l,d,g=!1,jn){const Un=document.createElement("div");if(jn!==void 0)for(const[zn,qn]of Object.entries(jn))zn!=="class"&&Un.setAttribute(zn,qn);Un.className=D$3("bn-block-content",jn?.class||""),Un.setAttribute("data-content-type",n);for(const[zn,qn]of Object.entries(l)){const Kn=d[zn].default;qn!==Kn&&Un.setAttribute(W$1(zn),qn)}return g&&Un.setAttribute("data-file-block",""),Un.appendChild(e.dom),e.contentDOM&&(e.contentDOM.className=D$3("bn-inline-content",e.contentDOM.className)),{...e,dom:Un}}function yt$2(e,n,l){return{config:{type:e.type,content:e.content,propSchema:n},implementation:{node:e.node,render:le$1,toExternalHTML:le$1},extensions:l}}function vt$2(e,n){e.stopEvent=l=>(l.type==="mousedown"&&setTimeout(()=>{n.view.dom.blur()},10),!0)}function Et$2(e,n){const l=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return n.parse&&l.push({tag:"*",getAttrs(d){var g;if(typeof d=="string")return!1;const jn=(g=n.parse)==null?void 0:g.call(n,d);return jn===void 0?!1:jn},preserveWhitespace:!0,getContent:e.content==="inline"||e.content==="none"?(d,g)=>{var jn;if(n.parseContent)return n.parseContent({el:d,schema:g});if(e.content==="inline"){const Un=d.cloneNode(!0);return bt$2(Un,(jn=n.meta)!=null&&jn.code?`
`:"<br>"),DOMParser$1.fromSchema(g).parse(Un,{topNode:g.nodes.paragraph.create(),preserveWhitespace:!0}).content}return Fragment.empty}:void 0}),l}function ho$2(e,n,l,d){var g,jn,Un,zn;const qn=n.node||Node3.create({name:e.type,content:e.content==="inline"?"inline*":e.content==="none"?"":e.content,group:"blockContent",selectable:((g=n.meta)==null?void 0:g.selectable)??!0,isolating:((jn=n.meta)==null?void 0:jn.isolating)??!0,code:((Un=n.meta)==null?void 0:Un.code)??!1,defining:((zn=n.meta)==null?void 0:zn.defining)??!0,priority:d,addAttributes(){return Ct$2(e.propSchema)},parseHTML(){return Et$2(e,n)},renderHTML({HTMLAttributes:Kn}){var Xn;const Qn=document.createElement("div");return Z$1({dom:Qn,contentDOM:e.content==="inline"?Qn:void 0},e.type,{},e.propSchema,((Xn=n.meta)==null?void 0:Xn.fileBlockAccept)!==void 0,Kn)},addNodeView(){return Kn=>{var Xn,Qn;const Jn=this.options.editor,Ai=kt$2(Kn.getPos,Jn,this.editor,e.type),Ri=((Xn=this.options.domAttributes)==null?void 0:Xn.blockContent)||{},Ni=n.render.call({blockContentDOMAttributes:Ri,props:Kn,renderType:"nodeView"},Ai,Jn);return((Qn=n.meta)==null?void 0:Qn.selectable)===!1&&vt$2(Ni,this.editor),Ni}}});if(qn.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return{config:e,implementation:{...n,node:qn,render(Kn,Xn){var Qn;const Jn=((Qn=qn.options.domAttributes)==null?void 0:Qn.blockContent)||{};return n.render.call({blockContentDOMAttributes:Jn,props:void 0,renderType:"dom"},Kn,Xn)},toExternalHTML:(Kn,Xn)=>{var Qn,Jn;const Ai=((Qn=qn.options.domAttributes)==null?void 0:Qn.blockContent)||{};return((Jn=n.toExternalHTML)==null?void 0:Jn.call({blockContentDOMAttributes:Ai},Kn,Xn))??n.render.call({blockContentDOMAttributes:Ai,renderType:"dom",props:void 0},Kn,Xn)}},extensions:l}}function v$2(e,n,l){return(d={})=>{const g=typeof e=="function"?e(d):e,jn=typeof n=="function"?n(d):n,Un=l?typeof l=="function"?l(d):l:void 0;return{config:g,implementation:{...jn,toExternalHTML(zn,qn){var Kn,Xn;const Qn=(Kn=jn.toExternalHTML)==null?void 0:Kn.call({blockContentDOMAttributes:this.blockContentDOMAttributes},zn,qn);if(Qn!==void 0)return Z$1(Qn,zn.type,zn.props,g.propSchema,((Xn=jn.meta)==null?void 0:Xn.fileBlockAccept)!==void 0)},render(zn,qn){var Kn;const Xn=jn.render.call({blockContentDOMAttributes:this.blockContentDOMAttributes,renderType:this.renderType,props:this.props},zn,qn);return Z$1(Xn,zn.type,zn.props,g.propSchema,((Kn=jn.meta)==null?void 0:Kn.fileBlockAccept)!==void 0,this.blockContentDOMAttributes)}},extensions:Un}}}function wt$1(e){return Object.fromEntries(Object.entries(e).map(([n,l])=>[n,l.config]))}function St$2(e){return e==="boolean"?{}:{stringValue:{default:void 0,keepOnSplit:!0,parseHTML:n=>n.getAttribute("data-value"),renderHTML:n=>n.stringValue!==void 0?{"data-value":n.stringValue}:{}}}}function V$1(e,n,l,d){return e.dom.setAttribute("data-style-type",n),d==="string"&&e.dom.setAttribute("data-value",l),e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}function Me$1(e,n){return{config:e,implementation:n}}function H(e,n){return Me$1({type:e.name,propSchema:n},{mark:e,render(l,d){const g=d.pmSchema.marks[e.name].spec.toDOM;if(g===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const jn=d.pmSchema.mark(e.name,{stringValue:l}),Un=DOMSerializer.renderSpec(document,g(jn,!0));if(typeof Un!="object"||!("dom"in Un))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return Un},toExternalHTML(l,d){const g=d.pmSchema.marks[e.name].spec.toDOM;if(g===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const jn=d.pmSchema.mark(e.name,{stringValue:l}),Un=DOMSerializer.renderSpec(document,g(jn,!0));if(typeof Un!="object"||!("dom"in Un))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return Un}})}function Mt$1(e){return Object.fromEntries(Object.entries(e).map(([n,l])=>[n,l.config]))}function Lt$2(e,n){const l=[{tag:`[data-style-type="${e.type}"]`,contentElement:d=>{const g=d;return g.matches("[data-editable]")?g:g.querySelector("[data-editable]")||g}}];return n&&l.push({tag:"*",consuming:!1,getAttrs(d){if(typeof d=="string")return!1;const g=n?.(d);return g===void 0?!1:{stringValue:g}}}),l}function Le$2(e,n){const l=Mark.create({name:e.type,addAttributes(){return St$2(e.propSchema)},parseHTML(){return Lt$2(e,n.parse)},renderHTML({mark:d}){const g=(n.toExternalHTML||n.render)(d.attrs.stringValue);return V$1(g,e.type,d.attrs.stringValue,e.propSchema)},addMarkView(){return({mark:d})=>{const g=n.render(d.attrs.stringValue);return V$1(g,e.type,d.attrs.stringValue,e.propSchema)}}});return Me$1(e,{...n,mark:l,render:d=>{const g=n.render(d);return V$1(g,e.type,d,e.propSchema)},toExternalHTML:d=>{const g=(n.toExternalHTML||n.render)(d);return V$1(g,e.type,d,e.propSchema)}})}function Tt$2(e,n){let l,d;if(n.firstChild.descendants((g,jn)=>l?!1:!Bt$2(g)||g.attrs.id!==e?!0:(l=g,d=jn+1,!1)),!(l===void 0||d===void 0))return{node:l,posBeforeNode:d}}function Bt$2(e){return e.type.isInGroup("bnBlock")}const ko$3=(e,n)=>({tr:l,dispatch:d})=>(d&&K$2(l,e,n),!0);function K$2(e,n,l,d,g){const jn=It$3(e.doc.resolve(n));let Un=null;jn.blockNoteType==="table"&&(Un=Pt$3(e));const zn=ht$2(e),qn=zn.nodes[jn.blockNoteType],Kn=zn.nodes[l.type||jn.blockNoteType],Xn=Kn.isInGroup("bnBlock")?Kn:zn.nodes.blockContainer;if(jn.isBlockContainer&&Kn.isInGroup("blockContent"))de$2(l,e,jn),At$2(l,e,qn,Kn,jn);else if(!jn.isBlockContainer&&Kn.isInGroup("bnBlock"))de$2(l,e,jn);else{const Qn=L$1(jn.bnBlock.node,zn);e.replaceWith(jn.bnBlock.beforePos,jn.bnBlock.afterPos,bt$3({children:Qn.children,...l},zn));return}e.setNodeMarkup(jn.bnBlock.beforePos,Xn,{...jn.bnBlock.node.attrs,...l.props}),Un&&Nt$3(e,jn,Un)}function At$2(e,n,l,d,g,jn,Un){const zn=ht$2(n);let qn="keep";if(e.content)if(typeof e.content=="string")qn=T$2([e.content],zn,d.name);else if(Array.isArray(e.content))qn=T$2(e.content,zn,d.name);else if(e.content.type==="tableContent")qn=kt$3(e.content,zn);else throw new O$1(e.content.type);else l.spec.content===""||d.spec.content!==l.spec.content&&(qn=[]);qn==="keep"?n.setNodeMarkup(g.blockContent.beforePos,d,{...g.blockContent.node.attrs,...e.props}):n.replaceWith(g.blockContent.beforePos,g.blockContent.afterPos,d.createChecked({...g.blockContent.node.attrs,...e.props},qn))}function de$2(e,n,l){const d=ht$2(n);if(e.children!==void 0&&e.children.length>0){const g=e.children.map(jn=>bt$3(jn,d));if(l.childContainer)n.step(new ReplaceStep(l.childContainer.beforePos+1,l.childContainer.afterPos-1,new Slice(Fragment.from(g),0,0)));else{if(!l.isBlockContainer)throw new Error("impossible");n.insert(l.blockContent.afterPos,d.nodes.blockGroup.createChecked({},g))}}}function yo$3(e,n,l,d,g){const jn=typeof n=="string"?n:n.id,Un=Tt$2(jn,e.doc);if(!Un)throw new Error(`Block with ID ${jn} not found`);K$2(e,Un.posBeforeNode,l);const zn=e.doc.resolve(Un.posBeforeNode+1).node(),qn=ht$2(e);return L$1(zn,qn)}function Pt$3(e){const n="selection"in e?e.selection:null;if(!(n instanceof TextSelection))return null;const l=e.doc.resolve(n.head);let d=-1,g=-1;for(let Ni=l.depth;Ni>=0;Ni--){const $i=l.node(Ni).type.name;if(d<0&&($i==="tableCell"||$i==="tableHeader")&&(d=Ni),$i==="table"){g=Ni;break}}if(d<0||g<0)return null;const jn=l.before(d),Un=l.before(g),zn=e.doc.nodeAt(Un);if(!zn||zn.type.name!=="table")return null;const qn=TableMap.get(zn),Kn=jn-(Un+1),Xn=qn.map.indexOf(Kn);if(Xn<0)return null;const Qn=Math.floor(Xn/qn.width),Jn=Xn%qn.width,Ai=jn+1+1,Ri=Math.max(0,n.head-Ai);return{row:Qn,col:Jn,offset:Ri}}function Nt$3(e,n,l){var d;if(n.blockNoteType!=="table")return!1;let g=-1;if(n.isBlockContainer)g=e.mapping.map(n.blockContent.beforePos);else{const $i=e.mapping.map(n.bnBlock.beforePos),Li=$i+(((d=e.doc.nodeAt($i))==null?void 0:d.nodeSize)||0);e.doc.nodesBetween($i,Li,(ji,Fi)=>ji.type.name==="table"?(g=Fi,!1):!0)}const jn=g>=0?e.doc.nodeAt(g):null;if(!jn||jn.type.name!=="table")return!1;const Un=TableMap.get(jn),zn=Math.max(0,Math.min(l.row,Un.height-1)),qn=Math.max(0,Math.min(l.col,Un.width-1)),Kn=zn*Un.width+qn,Xn=Un.map[Kn];if(Xn==null)return!1;const Qn=g+1+Xn+1,Jn=e.doc.nodeAt(Qn),Ai=Qn+1,Ri=Jn?Jn.content.size:0,Ni=Ai+Math.max(0,Math.min(l.offset,Ri));return"selection"in e&&e.setSelection(TextSelection.create(e.doc,Ni)),!0}const T$1={gray:{text:"#9b9a97",background:"#ebeced"},brown:{text:"#64473a",background:"#e9e5e3"},red:{text:"#e03e3e",background:"#fbe4e4"},orange:{text:"#d9730d",background:"#f6e9d9"},yellow:{text:"#dfab01",background:"#fbf3db"},green:{text:"#4d6461",background:"#ddedea"},blue:{text:"#0b6e99",background:"#ddebf1"},purple:{text:"#6940a5",background:"#eae4f2"},pink:{text:"#ad1a72",background:"#f4dfeb"}},h$4={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},y=e=>{const n={};return e.hasAttribute("data-background-color")?n.backgroundColor=e.getAttribute("data-background-color"):e.style.backgroundColor&&(n.backgroundColor=e.style.backgroundColor),e.hasAttribute("data-text-color")?n.textColor=e.getAttribute("data-text-color"):e.style.color&&(n.textColor=e.style.color),n.textAlignment=h$4.textAlignment.values.includes(e.style.textAlign)?e.style.textAlign:void 0,n},A$2=(e,n)=>{e.backgroundColor&&e.backgroundColor!==h$4.backgroundColor.default&&(n.style.backgroundColor=e.backgroundColor in T$1?T$1[e.backgroundColor].background:e.backgroundColor),e.textColor&&e.textColor!==h$4.textColor.default&&(n.style.color=e.textColor in T$1?T$1[e.textColor].text:e.textColor),e.textAlignment&&e.textAlignment!==h$4.textAlignment.default&&(n.style.textAlign=e.textAlignment)},Eo$3=(e="backgroundColor")=>({default:h$4.backgroundColor.default,parseHTML:n=>n.hasAttribute("data-background-color")?n.getAttribute("data-background-color"):n.style.backgroundColor?n.style.backgroundColor:h$4.backgroundColor.default,renderHTML:n=>n[e]===h$4.backgroundColor.default?{}:{"data-background-color":n[e]}}),xo$3=(e="textColor")=>({default:h$4.textColor.default,parseHTML:n=>n.hasAttribute("data-text-color")?n.getAttribute("data-text-color"):n.style.color?n.style.color:h$4.textColor.default,renderHTML:n=>n[e]===h$4.textColor.default?{}:{"data-text-color":n[e]}}),$$2=(e,n)=>{const l=e.querySelector(n);if(!l)return;const d=e.querySelector("figcaption"),g=d?.textContent??void 0;return{targetElement:l,caption:g}},I$2=a$1(({editor:e})=>{const n=f$3(void 0);function l(){n.setState(void 0)}return{key:"filePanel",store:n,mount({signal:d}){const g=e.onChange(l,!1),jn=e.onSelectionChange(l,!1);d.addEventListener("abort",()=>{g(),jn()})},closeMenu:l,showMenu(d){n.setState(d)}}}),Ht$1=(e,n,l)=>{const d=document.createElement("div");d.className="bn-add-file-button";const g=document.createElement("div");g.className="bn-add-file-button-icon",l?g.appendChild(l):g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',d.appendChild(g);const jn=document.createElement("p");jn.className="bn-add-file-button-text",jn.innerHTML=e.type in n.dictionary.file_blocks.add_button_text?n.dictionary.file_blocks.add_button_text[e.type]:n.dictionary.file_blocks.add_button_text.file,d.appendChild(jn);const Un=qn=>{qn.preventDefault(),qn.stopPropagation()},zn=()=>{var qn;n.isEditable&&((qn=n.getExtension(I$2))==null||qn.showMenu(e.id))};return d.addEventListener("mousedown",Un,!0),d.addEventListener("click",zn,!0),{dom:d,destroy:()=>{d.removeEventListener("mousedown",Un,!0),d.removeEventListener("click",zn,!0)}}},It$2='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',Dt$2=e=>{const n=document.createElement("div");n.className="bn-file-name-with-icon";const l=document.createElement("div");l.className="bn-file-icon",l.innerHTML=It$2,n.appendChild(l);const d=document.createElement("p");return d.className="bn-file-name",d.textContent=e.props.name,n.appendChild(d),{dom:n}},Q=(e,n,l,d)=>{const g=document.createElement("div");if(g.className="bn-file-block-content-wrapper",e.props.url===""){const Un=Ht$1(e,n,d);g.appendChild(Un.dom);const zn=n.onUploadStart(qn=>{if(qn===e.id){g.removeChild(Un.dom);const Kn=document.createElement("div");Kn.className="bn-file-loading-preview",Kn.textContent="Loading...",g.appendChild(Kn)}});return{dom:g,destroy:()=>{zn(),Un.destroy()}}}const jn={dom:g};if(e.props.showPreview===!1||!l){const Un=Dt$2(e);g.appendChild(Un.dom),jn.destroy=()=>{var zn;(zn=Un.destroy)==null||zn.call(Un)}}else g.appendChild(l.dom);if(e.props.caption){const Un=document.createElement("p");Un.className="bn-file-caption",Un.textContent=e.props.caption,g.appendChild(Un)}return jn},J$1=(e,n)=>{const l=document.createElement("figure"),d=document.createElement("figcaption");return d.textContent=n,l.appendChild(e),l.appendChild(d),{dom:l}},U$2=(e,n)=>{const l=document.createElement("div"),d=document.createElement("p");return d.textContent=n,l.appendChild(e),l.appendChild(d),{dom:l}},ue$2=e=>({url:e.src||void 0}),Ot$2='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',_t$2=e=>({type:"audio",propSchema:{backgroundColor:h$4.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none"}),Vt$1=(e={})=>n=>{if(n.tagName==="AUDIO"){if(n.closest("figure"))return;const{backgroundColor:l}=y(n);return{...ue$2(n),backgroundColor:l}}if(n.tagName==="FIGURE"){const l=$$2(n,"audio");if(!l)return;const{targetElement:d,caption:g}=l,{backgroundColor:jn}=y(n);return{...ue$2(d),backgroundColor:jn,caption:g}}},Rt$2=(e={})=>(n,l)=>{const d=document.createElement("div");d.innerHTML=e.icon??Ot$2;const g=document.createElement("audio");return g.className="bn-audio",l.resolveFileUrl?l.resolveFileUrl(n.props.url).then(jn=>{g.src=jn}):g.src=n.props.url,g.controls=!0,g.contentEditable="false",g.draggable=!1,Q(n,l,{dom:g},d.firstElementChild)},Wt$1=(e={})=>(n,l)=>{if(!n.props.url){const g=document.createElement("p");return g.textContent="Add audio",{dom:g}}let d;return n.props.showPreview?(d=document.createElement("audio"),d.src=n.props.url):(d=document.createElement("a"),d.href=n.props.url,d.textContent=n.props.name||n.props.url),n.props.caption?n.props.showPreview?J$1(d,n.props.caption):U$2(d,n.props.caption):{dom:d}},Ft$3=v$2(_t$2,e=>({meta:{fileBlockAccept:["audio/*"]},parse:Vt$1(e),render:Rt$2(e),toExternalHTML:Wt$1(e),runsBefore:["file"]})),pe$2=Symbol.for("blocknote.shikiParser"),j$1=Symbol.for("blocknote.shikiHighlighterPromise");function $t$2(e){const n=globalThis;let l,d;return createHighlightPlugin({parser:g=>{if(!e.createHighlighter)return[];if(!l)return n[j$1]=n[j$1]||e.createHighlighter(),n[j$1].then(Un=>{l=Un});const jn=Te$2(e,g.language);return!jn||jn==="text"||jn==="none"||jn==="plaintext"||jn==="txt"?[]:l.getLoadedLanguages().includes(jn)?(d||(d=n[pe$2]||createParser(l),n[pe$2]=d),d(g)):l.loadLanguage(jn)},languageExtractor:g=>g.attrs.language,nodeTypes:["codeBlock"]})}const Ut$2=({defaultLanguage:e="text"})=>({type:"codeBlock",propSchema:{language:{default:e}},content:"inline"}),qt$2=v$2(Ut$2,e=>({meta:{code:!0,defining:!0,isolating:!1},parse:n=>{var l,d;if(n.tagName!=="PRE"||n.childElementCount!==1||((l=n.firstElementChild)==null?void 0:l.tagName)!=="CODE")return;const g=n.firstElementChild;return{language:g.getAttribute("data-language")||((d=g.className.split(" ").find(jn=>jn.includes("language-")))==null?void 0:d.replace("language-",""))}},parseContent:({el:n,schema:l})=>{const d=DOMParser$1.fromSchema(l),g=n.firstElementChild;return d.parse(g,{preserveWhitespace:"full",topNode:l.nodes.codeBlock.create()}).content},render(n,l){const d=document.createDocumentFragment(),g=document.createElement("pre"),jn=document.createElement("code");g.appendChild(jn);let Un;if(e.supportedLanguages){const zn=document.createElement("select");Object.entries(e.supportedLanguages??{}).forEach(([Xn,{name:Qn}])=>{const Jn=document.createElement("option");Jn.value=Xn,Jn.text=Qn,zn.appendChild(Jn)}),zn.value=n.props.language||e.defaultLanguage||"text";const qn=Xn=>{const Qn=Xn.target.value;l.updateBlock(n.id,{props:{language:Qn}})};zn.addEventListener("change",qn),Un=()=>zn.removeEventListener("change",qn);const Kn=document.createElement("div");Kn.contentEditable="false",Kn.appendChild(zn),d.appendChild(Kn)}return d.appendChild(g),{dom:d,contentDOM:jn,destroy:()=>{Un?.()}}},toExternalHTML(n){const l=document.createElement("pre"),d=document.createElement("code");return d.className=`language-${n.props.language}`,d.dataset.language=n.props.language,l.appendChild(d),{dom:l,contentDOM:d}}}),e=>[a$1({key:"code-block-highlighter",prosemirrorPlugins:[$t$2(e)]}),a$1({key:"code-block-keyboard-shortcuts",keyboardShortcuts:{Delete:({editor:n})=>n.transact(l=>{const{block:d}=n.getTextCursorPosition();if(d.type!=="codeBlock")return!1;const{$from:g}=l.selection;return g.parent.textContent?!1:(n.removeBlocks([d]),!0)}),Tab:({editor:n})=>e.indentLineWithTab===!1?!1:n.transact(l=>{const{block:d}=n.getTextCursorPosition();return d.type==="codeBlock"?(l.insertText("  "),!0):!1}),Enter:({editor:n})=>n.transact(l=>{const{block:d,nextBlock:g}=n.getTextCursorPosition();if(d.type!=="codeBlock")return!1;const{$from:jn}=l.selection,Un=jn.parentOffset===jn.parent.nodeSize-2,zn=jn.parent.textContent.endsWith(`

`);if(Un&&zn){if(l.delete(jn.pos-2,jn.pos),g)return n.setTextCursorPosition(g,"start"),!0;const[qn]=n.insertBlocks([{type:"paragraph"}],d,"after");return n.setTextCursorPosition(qn,"start"),!0}return l.insertText(`
`),!0}),"Shift-Enter":({editor:n})=>n.transact(()=>{const{block:l}=n.getTextCursorPosition();if(l.type!=="codeBlock")return!1;const[d]=n.insertBlocks([{type:"paragraph"}],l,"after");return n.setTextCursorPosition(d,"start"),!0})},inputRules:[{find:/^```(.*?)\s$/,replace:({match:n})=>{const l=n[1].trim();return{type:"codeBlock",props:{language:{language:Te$2(e,l)??l}.language},content:[]}}}]})]);function Te$2(e,n){var l;return(l=Object.entries(e.supportedLanguages??{}).find(([d,{aliases:g}])=>g?.includes(n)||d===n))==null?void 0:l[0]}const jt$1=()=>({type:"divider",propSchema:{},content:"none"}),Gt$1=v$2(jt$1,{meta:{isolating:!1},parse(e){if(e.tagName==="HR")return{}},render(){return{dom:document.createElement("hr")}}},[a$1({key:"divider-block-shortcuts",inputRules:[{find:new RegExp("^---$"),replace(){return{type:"divider",props:{},content:[]}}}]})]),fe$1=e=>({url:e.src||void 0}),Zt$2=()=>({type:"file",propSchema:{backgroundColor:h$4.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none"}),zt$2=()=>e=>{if(e.tagName==="EMBED"){if(e.closest("figure"))return;const{backgroundColor:n}=y(e);return{...fe$1(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=$$2(e,"embed");if(!n)return;const{targetElement:l,caption:d}=n,{backgroundColor:g}=y(e);return{...fe$1(l),backgroundColor:g,caption:d}}},Xt$2=v$2(Zt$2,{meta:{fileBlockAccept:["*/*"]},parse:zt$2(),render(e,n){return Q(e,n)},toExternalHTML(e){if(!e.props.url){const l=document.createElement("p");return l.textContent="Add file",{dom:l}}const n=document.createElement("a");return n.href=e.props.url,n.textContent=e.props.name||e.props.url,e.props.caption?U$2(n,e.props.caption):{dom:n}}}),Kt$1={set:(e,n)=>window.localStorage.setItem(`toggle-${e.id}`,n?"true":"false"),get:e=>window.localStorage.getItem(`toggle-${e.id}`)==="true"},Be$3=(e,n,l,d=Kt$1)=>{if("isToggleable"in e.props&&!e.props.isToggleable)return{dom:l};const g=document.createElement("div"),jn=document.createElement("div");jn.className="bn-toggle-wrapper";const Un=document.createElement("button");Un.className="bn-toggle-button",Un.type="button",Un.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const zn=Ri=>Ri.preventDefault();Un.addEventListener("mousedown",zn);const qn=()=>{var Ri;jn.getAttribute("data-show-children")==="true"?(jn.setAttribute("data-show-children","false"),d.set(n.getBlock(e),!1),g.contains(Kn)&&g.removeChild(Kn)):(jn.setAttribute("data-show-children","true"),d.set(n.getBlock(e),!0),n.isEditable&&((Ri=n.getBlock(e))==null?void 0:Ri.children.length)===0&&!g.contains(Kn)&&g.appendChild(Kn))};Un.addEventListener("click",qn),jn.appendChild(Un),jn.appendChild(l);const Kn=document.createElement("button");Kn.className="bn-toggle-add-block-button",Kn.type="button",Kn.textContent=n.dictionary.toggle_blocks.add_block_button;const Xn=Ri=>Ri.preventDefault();Kn.addEventListener("mousedown",Xn);const Qn=()=>{n.transact(()=>{const Ri=n.updateBlock(e,{children:[{}]});n.setTextCursorPosition(Ri.children[0].id,"end"),n.focus()})};Kn.addEventListener("click",Qn),g.appendChild(jn);let Jn=e.children.length;const Ai=n.onChange(()=>{var Ri;const Ni=((Ri=n.getBlock(e))==null?void 0:Ri.children.length)??0;Ni>Jn?(jn.getAttribute("data-show-children")==="false"&&(jn.setAttribute("data-show-children","true"),d.set(n.getBlock(e),!0)),g.contains(Kn)&&g.removeChild(Kn)):Ni===0&&Ni<Jn&&(jn.getAttribute("data-show-children")==="true"&&(jn.setAttribute("data-show-children","false"),d.set(n.getBlock(e),!1)),g.contains(Kn)&&g.removeChild(Kn)),Jn=Ni});return d.get(e)?(jn.setAttribute("data-show-children","true"),n.isEditable&&e.children.length===0&&g.appendChild(Kn)):jn.setAttribute("data-show-children","false"),{dom:g,ignoreMutation:Ri=>Ri instanceof MutationRecord&&(Ri.type==="attributes"&&Ri.target===jn&&Ri.attributeName==="data-show-children"||Ri.type==="childList"&&(Ri.addedNodes[0]===Kn||Ri.removedNodes[0]===Kn)),destroy:()=>{Un.removeEventListener("mousedown",zn),Un.removeEventListener("click",qn),Kn.removeEventListener("mousedown",Xn),Kn.removeEventListener("click",Qn),Ai?.()}}},Ae$2=[1,2,3,4,5,6],Qt$1=e=>({editor:n})=>{const l=n.getTextCursorPosition();return n.schema.blockSchema[l.block.type].content!=="inline"?!1:(n.updateBlock(l.block,{type:"heading",props:{level:e}}),!0)},Jt$2=({defaultLevel:e=1,levels:n=Ae$2,allowToggleHeadings:l=!0}={})=>({type:"heading",propSchema:{...h$4,level:{default:e,values:n},...l?{isToggleable:{default:!1,optional:!0}}:{}},content:"inline"}),Yt$2=v$2(Jt$2,({allowToggleHeadings:e=!0}={})=>({meta:{isolating:!1},parse(n){let l;switch(n.tagName){case"H1":l=1;break;case"H2":l=2;break;case"H3":l=3;break;case"H4":l=4;break;case"H5":l=5;break;case"H6":l=6;break;default:return}return{...y(n),level:l}},render(n,l){const d=document.createElement(`h${n.props.level}`);return e?{...Be$3(n,l,d),contentDOM:d}:{dom:d,contentDOM:d}},toExternalHTML(n){const l=document.createElement(`h${n.props.level}`);return A$2(n.props,l),{dom:l,contentDOM:l}}}),({levels:e=Ae$2}={})=>[a$1({key:"heading-shortcuts",keyboardShortcuts:Object.fromEntries(e.map(n=>[`Mod-Alt-${n}`,Qt$1(n)])??[]),inputRules:e.map(n=>({find:new RegExp(`^(#{${n}})\\s$`),replace({match:l}){return{type:"heading",props:{level:l[1].length}}}}))})]),Pe$2=(e,n,l,d,g)=>{const{dom:jn,destroy:Un}=Q(e,n,l,g),zn=jn;zn.style.position="relative",e.props.url&&e.props.showPreview&&(e.props.previewWidth?zn.style.width=`${e.props.previewWidth}px`:zn.style.width="fit-content");const qn=document.createElement("div");qn.className="bn-resize-handle",qn.style.left="4px";const Kn=document.createElement("div");Kn.className="bn-resize-handle",Kn.style.right="4px";const Xn=document.createElement("div");Xn.style.position="absolute",Xn.style.height="100%",Xn.style.width="100%";let Qn,Jn=e.props.previewWidth;const Ai=Fi=>{var qi,zi;if(!Qn){!n.isEditable&&d.contains(qn)&&d.contains(Kn)&&(d.removeChild(qn),d.removeChild(Kn));return}let Gi;const Xi="touches"in Fi?Fi.touches[0].clientX:Fi.clientX;e.props.textAlignment==="center"?Qn.handleUsed==="left"?Gi=Qn.initialWidth+(Qn.initialClientX-Xi)*2:Gi=Qn.initialWidth+(Xi-Qn.initialClientX)*2:Qn.handleUsed==="left"?Gi=Qn.initialWidth+Qn.initialClientX-Xi:Gi=Qn.initialWidth+Xi-Qn.initialClientX,Jn=Math.min(Math.max(Gi,64),((zi=(qi=n.domElement)==null?void 0:qi.firstElementChild)==null?void 0:zi.clientWidth)||Number.MAX_VALUE),zn.style.width=`${Jn}px`},Ri=Fi=>{(!Fi.target||!zn.contains(Fi.target)||!n.isEditable)&&d.contains(qn)&&d.contains(Kn)&&(d.removeChild(qn),d.removeChild(Kn)),Qn&&(Qn=void 0,zn.contains(Xn)&&zn.removeChild(Xn),n.updateBlock(e,{props:{previewWidth:Jn}}))},Ni=()=>{n.isEditable&&(d.appendChild(qn),d.appendChild(Kn))},$i=Fi=>{Fi.relatedTarget===qn||Fi.relatedTarget===Kn||Qn||n.isEditable&&d.contains(qn)&&d.contains(Kn)&&(d.removeChild(qn),d.removeChild(Kn))},Li=Fi=>{Fi.preventDefault(),zn.contains(Xn)||zn.appendChild(Xn);const qi="touches"in Fi?Fi.touches[0].clientX:Fi.clientX;Qn={handleUsed:"left",initialWidth:zn.clientWidth,initialClientX:qi}},ji=Fi=>{Fi.preventDefault(),zn.contains(Xn)||zn.appendChild(Xn);const qi="touches"in Fi?Fi.touches[0].clientX:Fi.clientX;Qn={handleUsed:"right",initialWidth:zn.clientWidth,initialClientX:qi}};return window.addEventListener("mousemove",Ai),window.addEventListener("touchmove",Ai),window.addEventListener("mouseup",Ri),window.addEventListener("touchend",Ri),zn.addEventListener("mouseenter",Ni),zn.addEventListener("mouseleave",$i),qn.addEventListener("mousedown",Li),qn.addEventListener("touchstart",Li),Kn.addEventListener("mousedown",ji),Kn.addEventListener("touchstart",ji),{dom:zn,destroy:()=>{Un?.(),window.removeEventListener("mousemove",Ai),window.removeEventListener("touchmove",Ai),window.removeEventListener("mouseup",Ri),window.removeEventListener("touchend",Ri),zn.removeEventListener("mouseenter",Ni),zn.removeEventListener("mouseleave",$i),qn.removeEventListener("mousedown",Li),qn.removeEventListener("touchstart",Li),Kn.removeEventListener("mousedown",ji),Kn.removeEventListener("touchstart",ji)}}},he=e=>{const n=e.src||void 0,l=e.width||void 0,d=e.alt||void 0;return{url:n,previewWidth:l,name:d}},en$1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',tn$2=(e={})=>({type:"image",propSchema:{textAlignment:h$4.textAlignment,backgroundColor:h$4.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),nn$2=(e={})=>n=>{if(n.tagName==="IMG"){if(n.closest("figure"))return;const{backgroundColor:l}=y(n);return{...he(n),backgroundColor:l}}if(n.tagName==="FIGURE"){const l=$$2(n,"img");if(!l)return;const{targetElement:d,caption:g}=l,{backgroundColor:jn}=y(n);return{...he(d),backgroundColor:jn,caption:g}}},on$1=(e={})=>(n,l)=>{const d=document.createElement("div");d.innerHTML=e.icon??en$1;const g=document.createElement("div");g.className="bn-visual-media-wrapper";const jn=document.createElement("img");return jn.className="bn-visual-media",l.resolveFileUrl?l.resolveFileUrl(n.props.url).then(Un=>{jn.src=Un}):jn.src=n.props.url,jn.alt=n.props.name||n.props.caption||"BlockNote image",jn.contentEditable="false",jn.draggable=!1,g.appendChild(jn),Pe$2(n,l,{dom:g},g,d.firstElementChild)},rn$1=(e={})=>(n,l)=>{if(!n.props.url){const g=document.createElement("p");return g.textContent="Add image",{dom:g}}let d;return n.props.showPreview?(d=document.createElement("img"),d.src=n.props.url,d.alt=n.props.name||n.props.caption||"BlockNote image",n.props.previewWidth&&(d.width=n.props.previewWidth)):(d=document.createElement("a"),d.href=n.props.url,d.textContent=n.props.name||n.props.url),n.props.caption?n.props.showPreview?J$1(d,n.props.caption):U$2(d,n.props.caption):{dom:d}},an$1=v$2(tn$2,e=>({meta:{fileBlockAccept:["image/*"]},parse:nn$2(e),render:on$1(e),toExternalHTML:rn$1(e),runsBefore:["file"]})),So$3=(e,n,l)=>({state:d,dispatch:g})=>g?Ne$1(d.tr,e,n,l):!0,Ne$1=(e,n,l,d)=>{const g=Y$2(e.doc,n),jn=Z$2(g);if(!jn.isBlockContainer)return!1;const Un=ht$2(e),zn=[{type:jn.bnBlock.node.type,attrs:d?{...jn.bnBlock.node.attrs,id:void 0}:{}},{type:l?jn.blockContent.node.type:Un.nodes.paragraph,attrs:d?{...jn.blockContent.node.attrs}:{}}];return e.split(n,2,zn),!0},q$2=(e,n)=>{const{blockInfo:l,selectionEmpty:d}=e.transact(Un=>({blockInfo:Ot$3(Un),selectionEmpty:Un.selection.anchor===Un.selection.head}));if(!l.isBlockContainer)return!1;const{bnBlock:g,blockContent:jn}=l;return jn.node.type.name!==n||!d?!1:jn.node.childCount===0?(e.transact(Un=>{K$2(Un,g.beforePos,{type:"paragraph",props:{}})}),!0):jn.node.childCount>0?e.transact(Un=>(Un.deleteSelection(),Ne$1(Un,Un.selection.from,!0))):!1};function Y$1(e,n,l){var d,g,jn;const Un=DOMParser$1.fromSchema(n),zn=e,qn=document.createElement("div");qn.setAttribute("data-node-type","blockGroup");for(const Ai of Array.from(zn.childNodes))qn.appendChild(Ai.cloneNode(!0));let Kn=Un.parse(qn,{topNode:n.nodes.blockGroup.create()});((g=(d=Kn.firstChild)==null?void 0:d.firstChild)==null?void 0:g.type.name)==="checkListItem"&&(Kn=Kn.copy(Kn.content.cut(Kn.firstChild.firstChild.nodeSize+2)));const Xn=(jn=Kn.firstChild)==null?void 0:jn.firstChild;if(!(Xn!=null&&Xn.isTextblock))return Fragment.from(Kn);const Qn=n.nodes[l].create({},Xn.content),Jn=Kn.content.cut(Xn.nodeSize+2);if(Jn.size>0){const Ai=Kn.copy(Jn);return Qn.content.addToEnd(Ai)}return Qn.content}const sn$1=()=>({type:"bulletListItem",propSchema:{...h$4},content:"inline"}),cn$2=v$2(sn$1,{meta:{isolating:!1},parse(e){var n;if(e.tagName!=="LI")return;const l=e.parentElement;if(l!==null&&(l.tagName==="UL"||l.tagName==="DIV"&&((n=l.parentElement)==null?void 0:n.tagName)==="UL"))return y(e)},parseContent:({el:e,schema:n})=>Y$1(e,n,"bulletListItem"),render(){const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML(e){const n=document.createElement("li"),l=document.createElement("p");return A$2(e.props,n),n.appendChild(l),{dom:n,contentDOM:l}}},[a$1({key:"bullet-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>q$2(e,"bulletListItem"),"Mod-Shift-8":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"bulletListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^[-+*]\\s$"),replace({editor:e}){if(Tt$3(e.prosemirrorState).blockNoteType!=="heading")return{type:"bulletListItem",props:{}}}}]})]),ln$2=()=>({type:"checkListItem",propSchema:{...h$4,checked:{default:!1,type:"boolean"}},content:"inline"}),dn$1=v$2(ln$2,{meta:{isolating:!1},parse(e){var n;if(e.tagName==="input")return e.closest("[data-content-type]")||e.closest("li")?void 0:e.type==="checkbox"?{checked:e.checked}:void 0;if(e.tagName!=="LI")return;const l=e.parentElement;if(l!==null&&(l.tagName==="UL"||l.tagName==="DIV"&&((n=l.parentElement)==null?void 0:n.tagName)==="UL")){const d=e.querySelector("input[type=checkbox]")||null;return d===null?void 0:{...y(e),checked:d.checked}}},parseContent:({el:e,schema:n})=>Y$1(e,n,"checkListItem"),render(e,n){const l=document.createDocumentFragment(),d=document.createElement("input");d.type="checkbox",d.checked=e.props.checked,e.props.checked&&d.setAttribute("checked",""),d.addEventListener("change",()=>{n.updateBlock(e,{props:{checked:!e.props.checked}})});const g=document.createElement("p");return l.appendChild(d),l.appendChild(g),{dom:l,contentDOM:g}},toExternalHTML(e){const n=document.createElement("li"),l=document.createElement("input");l.type="checkbox",l.checked=e.props.checked,e.props.checked&&l.setAttribute("checked","");const d=document.createElement("p");return A$2(e.props,n),n.appendChild(l),n.appendChild(d),{dom:n,contentDOM:d}},runsBefore:["bulletListItem"]},[a$1({key:"check-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>q$2(e,"checkListItem"),"Mod-Shift-9":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"checkListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^\\[\\s*\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!1},content:[]}}},{find:new RegExp("^\\[[Xx]\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!0}}}}]})]);function He$1(e,n,l,d){let g=e.firstChild.attrs.start||1,jn=!0;const Un=!!e.firstChild.attrs.start,zn=Z$2({posBeforeNode:n,node:e});if(!zn.isBlockContainer)throw new Error("impossible");const qn=l.doc.resolve(zn.bnBlock.beforePos).nodeBefore,Kn=qn?d.get(qn):void 0;return Kn!==void 0?(g=Kn+1,jn=!1):qn&&Z$2({posBeforeNode:zn.bnBlock.beforePos-qn.nodeSize,node:qn}).blockNoteType==="numberedListItem"&&(g=He$1(qn,zn.bnBlock.beforePos-qn.nodeSize,l,d).index+1,jn=!1),d.set(e,g),{index:g,isFirst:jn,hasStart:Un}}function me$1(e,n){const l=new Map,d=n.decorations.map(e.mapping,e.doc),g=[];e.doc.nodesBetween(0,e.doc.nodeSize-2,(Un,zn)=>{if(Un.type.name==="blockContainer"&&Un.firstChild.type.name==="numberedListItem"){const{index:qn,isFirst:Kn,hasStart:Xn}=He$1(Un,zn,e,l);if(d.find(zn,zn+Un.nodeSize,Qn=>Qn.index===qn&&Qn.isFirst===Kn&&Qn.hasStart===Xn).length===0){const Qn=e.doc.nodeAt(zn+1);g.push(Decoration.node(zn+1,zn+1+Qn.nodeSize,{"data-index":qn.toString()}))}}});const jn=g.flatMap(Un=>d.find(Un.from,Un.to));return{decorations:d.remove(jn).add(e.doc,g)}}const un$1=()=>new Plugin({key:new PluginKey("numbered-list-indexing-decorations"),state:{init(e,n){return me$1(n.tr,{decorations:DecorationSet.empty})},apply(e,n){return!e.docChanged&&!e.selectionSet&&n.decorations?n:me$1(e,n)}},props:{decorations(e){var n;return((n=this.getState(e))==null?void 0:n.decorations)??DecorationSet.empty}}}),pn$1=()=>({type:"numberedListItem",propSchema:{...h$4,start:{default:void 0,type:"number"}},content:"inline"}),fn$1=v$2(pn$1,{meta:{isolating:!1},parse(e){var n;if(e.tagName!=="LI")return;const l=e.parentElement;if(l!==null&&(l.tagName==="OL"||l.tagName==="DIV"&&((n=l.parentElement)==null?void 0:n.tagName)==="OL")){const d=parseInt(l.getAttribute("start")||"1"),g=y(e);return e.previousElementSibling||d===1?g:{...g,start:d}}},parseContent:({el:e,schema:n})=>Y$1(e,n,"numberedListItem"),render(){const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML(e){const n=document.createElement("li"),l=document.createElement("p");return A$2(e.props,n),n.appendChild(l),{dom:n,contentDOM:l}}},[a$1({key:"numbered-list-item-shortcuts",inputRules:[{find:new RegExp("^(\\d+)\\.\\s$"),replace({match:e,editor:n}){if(Tt$3(n.prosemirrorState).blockNoteType==="heading")return;const l=parseInt(e[1]);return{type:"numberedListItem",props:{start:l!==1?l:void 0}}}}],keyboardShortcuts:{Enter:({editor:e})=>q$2(e,"numberedListItem"),"Mod-Shift-7":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"numberedListItem",props:{}}),!0)}},prosemirrorPlugins:[un$1()]})]),hn$1=()=>({type:"toggleListItem",propSchema:{...h$4},content:"inline"}),mn$1=v$2(hn$1,{meta:{isolating:!1},render(e,n){const l=document.createElement("p");return{...Be$3(e,n,l),contentDOM:l}},toExternalHTML(e){const n=document.createElement("li"),l=document.createElement("p");return A$2(e.props,n),n.appendChild(l),{dom:n,contentDOM:l}}},[a$1({key:"toggle-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:e})=>q$2(e,"toggleListItem"),"Mod-Shift-6":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"toggleListItem",props:{}}),!0)}}})]),gn$1=()=>({type:"paragraph",propSchema:h$4,content:"inline"}),bn$1=v$2(gn$1,{meta:{isolating:!1},parse:e=>{var n;if(e.tagName==="P"&&(n=e.textContent)!=null&&n.trim())return y(e)},render:()=>{const e=document.createElement("p");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const n=document.createElement("p");return A$2(e.props,n),{dom:n,contentDOM:n}},runsBefore:["default"]},[a$1({key:"paragraph-shortcuts",keyboardShortcuts:{"Mod-Alt-0":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"paragraph",props:{}}),!0)}}})]),Cn$1=()=>({type:"quote",propSchema:{backgroundColor:h$4.backgroundColor,textColor:h$4.textColor},content:"inline"}),kn$1=v$2(Cn$1,{meta:{isolating:!1},parse(e){if(e.tagName==="BLOCKQUOTE"){const{backgroundColor:n,textColor:l}=y(e);return{backgroundColor:n,textColor:l}}},render(){const e=document.createElement("blockquote");return{dom:e,contentDOM:e}},toExternalHTML(e){const n=document.createElement("blockquote");return A$2(e.props,n),{dom:n,contentDOM:n}}},[a$1({key:"quote-block-shortcuts",keyboardShortcuts:{"Mod-Alt-q":({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"quote",props:{}}),!0)}},inputRules:[{find:new RegExp("^>\\s$"),replace(){return{type:"quote",props:{}}}}]})]),yn$1=35,Ie$4=120,Mo$2=31,vn=Extension.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[columnResizing({cellMinWidth:yn$1,defaultCellMinWidth:Ie$4,View:null}),tableEditing()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const e=this.editor.state.selection,n=e.empty,l=e.$head.parentOffset===0,d=e.$head.node().type.name==="tableParagraph";return n&&l&&d},Tab:()=>this.editor.commands.command(({state:e,dispatch:n,view:l})=>goToNextCell(1)(e,n,l)),"Shift-Tab":()=>this.editor.commands.command(({state:e,dispatch:n,view:l})=>goToNextCell(-1)(e,n,l))}},extendNodeSchema(e){const n={name:e.name,options:e.options,storage:e.storage};return{tableRole:callOrReturn(getExtensionField(e,"tableRole",n))}}}),En$1={textColor:h$4.textColor},xn$1=Node3.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const n=e.getAttribute("colwidth");return n?n.split(",").map(l=>parseInt(l,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th",getContent:(e,n)=>De$2(e,n)}]},renderHTML({HTMLAttributes:e}){return["th",mergeAttributes(this.options.HTMLAttributes,e),0]}}),wn=Node3.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const n=e.getAttribute("colwidth");return n?n.split(",").map(l=>parseInt(l,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td",getContent:(e,n)=>De$2(e,n)}]},renderHTML({HTMLAttributes:e}){return["td",mergeAttributes(this.options.HTMLAttributes,e),0]}}),Sn$1=Node3.create({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:n}){var l,d,g;const jn=gt$2(this.name,"table",{...((l=this.options.domAttributes)==null?void 0:l.blockContent)||{},...n},((d=this.options.domAttributes)==null?void 0:d.inlineContent)||{}),Un=document.createElement("colgroup");for(const zn of e.children[0].children)if(zn.attrs.colwidth)for(const qn of zn.attrs.colwidth){const Kn=document.createElement("col");qn&&(Kn.style=`width: ${qn}px`),Un.appendChild(Kn)}else Un.appendChild(document.createElement("col"));return(g=jn.dom.firstChild)==null||g.appendChild(Un),jn},addNodeView(){return({node:e,HTMLAttributes:n})=>{var l;class d extends TableView{constructor(jn,Un,zn){super(jn,Un),this.node=jn,this.cellMinWidth=Un,this.blockContentHTMLAttributes=zn;const qn=document.createElement("div");qn.className=D$3("bn-block-content",zn.class),qn.setAttribute("data-content-type","table");for(const[Jn,Ai]of Object.entries(zn))Jn!=="class"&&qn.setAttribute(Jn,Ai);const Kn=this.dom,Xn=document.createElement("div");Xn.className="tableWrapper-inner",Xn.appendChild(Kn.firstChild),Kn.appendChild(Xn),qn.appendChild(Kn);const Qn=document.createElement("div");Qn.className="table-widgets-container",Qn.style.position="relative",Kn.appendChild(Qn),this.dom=qn}ignoreMutation(jn){return!jn.target.closest(".tableWrapper-inner")||super.ignoreMutation(jn)}}return new d(e,Ie$4,{...((l=this.options.domAttributes)==null?void 0:l.blockContent)||{},...n})}}}),Mn=Node3.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:e=>{if(typeof e=="string"||!e.textContent||!e.closest("[data-content-type]"))return!1;const n=e.parentElement;return n===null?!1:n.tagName==="TD"||n.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:e}){return["p",e,0]}}),Ln=Node3.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",mergeAttributes(this.options.HTMLAttributes,e),0]}});function De$2(e,n){const l=DOMParser$1.fromSchema(n).parse(e,{topNode:n.nodes.blockGroup.create()}),d=[];return l.content.descendants(g=>{if(g.isInline)return d.push(g),!1}),Fragment.fromArray(d)}const Tn=()=>yt$2({node:Sn$1,type:"table",content:"table"},En$1,[a$1({key:"table-extensions",tiptapExtensions:[vn,Mn,xn$1,wn,Ln]}),a$1({key:"table-keyboard-delete",keyboardShortcuts:{Backspace:({editor:e})=>{if(!(e.prosemirrorState.selection instanceof CellSelection))return!1;const n=e.getTextCursorPosition().block,l=n.content;let d=0;for(const jn of l.rows)for(const Un of jn.cells){if("type"in Un&&Un.content.length>0||!("type"in Un)&&Un.length>0)return!1;d++}let g=0;return e.prosemirrorState.selection.forEachCell(()=>{g++}),g<d?!1:(e.transact(()=>{(e.getPrevBlock(n)||e.getNextBlock(n))&&e.setTextCursorPosition(n),e.removeBlocks([n])}),!0)}}})]),ge$1=e=>{const n=e.src||void 0,l=e.width||void 0;return{url:n,previewWidth:l}},Bn$1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',An=e=>({type:"video",propSchema:{textAlignment:h$4.textAlignment,backgroundColor:h$4.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),Pn=e=>n=>{if(n.tagName==="VIDEO"){if(n.closest("figure"))return;const{backgroundColor:l}=y(n);return{...ge$1(n),backgroundColor:l}}if(n.tagName==="FIGURE"){const l=$$2(n,"video");if(!l)return;const{targetElement:d,caption:g}=l,{backgroundColor:jn}=y(n);return{...ge$1(d),backgroundColor:jn,caption:g}}},Nn=v$2(An,e=>({meta:{fileBlockAccept:["video/*"]},parse:Pn(),render(n,l){const d=document.createElement("div");d.innerHTML=e.icon??Bn$1;const g=document.createElement("div");g.className="bn-visual-media-wrapper";const jn=document.createElement("video");return jn.className="bn-visual-media",l.resolveFileUrl?l.resolveFileUrl(n.props.url).then(Un=>{jn.src=Un}):jn.src=n.props.url,jn.controls=!0,jn.contentEditable="false",jn.draggable=!1,jn.width=n.props.previewWidth,g.appendChild(jn),Pe$2(n,l,{dom:g},g,d.firstElementChild)},toExternalHTML(n){if(!n.props.url){const d=document.createElement("p");return d.textContent="Add video",{dom:d}}let l;return n.props.showPreview?(l=document.createElement("video"),l.src=n.props.url,n.props.previewWidth&&(l.width=n.props.previewWidth)):(l=document.createElement("a"),l.href=n.props.url,l.textContent=n.props.name||n.props.url),n.props.caption?n.props.showPreview?J$1(l,n.props.caption):U$2(l,n.props.caption):{dom:l}},runsBefore:["file"]}));function b$2(e,n,l){if(!(n in e.schema.blockSpecs))return!1;if(!l)return!0;for(const[d,g]of Object.entries(l)){if(!(d in e.schema.blockSpecs[n].config.propSchema))return!1;if(typeof g=="string"){if(e.schema.blockSpecs[n].config.propSchema[d].default!==void 0&&typeof e.schema.blockSpecs[n].config.propSchema[d].default!==g||e.schema.blockSpecs[n].config.propSchema[d].type!==void 0&&e.schema.blockSpecs[n].config.propSchema[d].type!==g)return!1}else{if(e.schema.blockSpecs[n].config.propSchema[d].default!==g.default||e.schema.blockSpecs[n].config.propSchema[d].default===void 0&&g.default===void 0&&e.schema.blockSpecs[n].config.propSchema[d].type!==g.type||typeof e.schema.blockSpecs[n].config.propSchema[d].values!=typeof g.values)return!1;if(typeof e.schema.blockSpecs[n].config.propSchema[d].values=="object"&&typeof g.values=="object"){for(const jn of g.values)if(!e.schema.blockSpecs[n].config.propSchema[d].values.includes(jn))return!1}}}return!0}function Lo$2(e,n,l,d){return b$2(n,l,d)&&e.type===l}function To$3(e){return e instanceof CellSelection}const R$1=new Map;function Hn(e){if(R$1.has(e))return R$1.get(e);const n=new Mapping;return e._tiptapEditor.on("transaction",({transaction:l})=>{n.appendMapping(l.mapping)}),e._tiptapEditor.on("destroy",()=>{R$1.delete(e)}),R$1.set(e,n),n}function In(e,n,l="left"){const d=ySyncPluginKey.getState(e.prosemirrorState);if(!d){const jn=Hn(e),Un=jn.maps.length;return()=>jn.slice(Un).map(n,l==="left"?-1:1)}const g=absolutePositionToRelativePosition(n+(l==="right"?1:-1),d.binding.type,d.binding.mapping);return()=>{const jn=ySyncPluginKey.getState(e.prosemirrorState),Un=relativePositionToAbsolutePosition(jn.doc,jn.binding.type,g,jn.binding.mapping);if(Un===null)throw new Error("Position not found, cannot track positions");return Un+(l==="right"?-1:1)}}const Dn=findParentNode(e=>e.type.name==="blockContainer");class On{constructor(n,l,d){M$4(this,"state"),M$4(this,"emitUpdate"),M$4(this,"rootEl"),M$4(this,"pluginState"),M$4(this,"handleScroll",()=>{var jn,Un;if((jn=this.state)!=null&&jn.show){const zn=(Un=this.rootEl)==null?void 0:Un.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!zn)return;this.state.referencePos=zn.getBoundingClientRect().toJSON(),this.emitUpdate(this.pluginState.triggerCharacter)}}),M$4(this,"closeMenu",()=>{this.editor.transact(jn=>jn.setMeta(B$1,null))}),M$4(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(jn=>jn.selection.from)}).run()});var g;this.editor=n,this.pluginState=void 0,this.emitUpdate=jn=>{var Un;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");l(jn,{...this.state,ignoreQueryLength:(Un=this.pluginState)==null?void 0:Un.ignoreQueryLength})},this.rootEl=d.root,(g=this.rootEl)==null||g.addEventListener("scroll",this.handleScroll,!0)}update(n,l){var d;const g=B$1.getState(l),jn=B$1.getState(n.state),Un=g===void 0&&jn!==void 0,zn=g!==void 0&&jn===void 0;if(!Un&&!(g!==void 0&&jn!==void 0)&&!zn)return;if(this.pluginState=zn?g:jn,zn||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const qn=(d=this.rootEl)==null?void 0:d.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&qn&&(this.state={show:!0,referencePos:qn.getBoundingClientRect().toJSON(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var n;(n=this.rootEl)==null||n.removeEventListener("scroll",this.handleScroll,!0)}}const B$1=new PluginKey("SuggestionMenuPlugin"),_n=a$1(({editor:e})=>{const n=[];let l;const d=f$3(void 0);return{key:"suggestionMenu",store:d,addTriggerCharacter:g=>{n.push(g)},removeTriggerCharacter:g=>{n.splice(n.indexOf(g),1)},closeMenu:()=>{l?.closeMenu()},clearQuery:()=>{l?.clearQuery()},shown:()=>{var g;return((g=l?.state)==null?void 0:g.show)||!1},openSuggestionMenu:(g,jn)=>{e.headless||(e.focus(),e.transact(Un=>{jn!=null&&jn.deleteTriggerCharacter&&Un.insertText(g),Un.scrollIntoView().setMeta(B$1,{triggerCharacter:g,deleteTriggerCharacter:jn?.deleteTriggerCharacter||!1,ignoreQueryLength:jn?.ignoreQueryLength||!1})}))},prosemirrorPlugins:[new Plugin({key:B$1,view:g=>(l=new On(e,(jn,Un)=>{d.setState({...Un,triggerCharacter:jn})},g),l),state:{init(){},apply:(g,jn,Un,zn)=>{if(g.selection.$from.parent.type.spec.code)return jn;const qn=g.getMeta(B$1);if(typeof qn=="object"&&qn!==null){jn&&l?.closeMenu();const Xn=In(e,zn.selection.from-qn.triggerCharacter.length);return{triggerCharacter:qn.triggerCharacter,deleteTriggerCharacter:qn.deleteTriggerCharacter!==!1,queryStartPos:()=>Xn()+qn.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:qn?.ignoreQueryLength}}if(jn===void 0)return jn;if(zn.selection.from!==zn.selection.to||qn===null||g.getMeta("focus")||g.getMeta("blur")||g.getMeta("pointer")||jn.triggerCharacter!==void 0&&zn.selection.from<jn.queryStartPos()||!zn.selection.$from.sameParent(zn.doc.resolve(jn.queryStartPos())))return;const Kn={...jn};return Kn.query=zn.doc.textBetween(jn.queryStartPos(),zn.selection.from),Kn}},props:{handleTextInput(g,jn,Un,zn){if(jn===Un){const qn=g.state.doc;for(const Kn of n){const Xn=Kn.length>1?qn.textBetween(jn-Kn.length,jn)+zn:zn;if(Kn===Xn)return g.dispatch(g.state.tr.insertText(zn)),g.dispatch(g.state.tr.setMeta(B$1,{triggerCharacter:Xn}).scrollIntoView()),!0}}return!1},decorations(g){const jn=this.getState(g);if(jn===void 0)return null;if(!jn.deleteTriggerCharacter){const Un=Dn(g.selection);if(Un)return DecorationSet.create(g.doc,[Decoration.node(Un.pos,Un.pos+Un.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":jn.decorationId})])}return DecorationSet.create(g.doc,[Decoration.inline(jn.queryStartPos()-jn.triggerCharacter.length,jn.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":jn.decorationId})])}}})]}});function Vn(e){let n=e.getTextCursorPosition().block,l=e.schema.blockSchema[n.type].content;for(;l==="none";){if(n=e.getTextCursorPosition().nextBlock,n===void 0)return;l=e.schema.blockSchema[n.type].content,e.setTextCursorPosition(n,"end")}}function C$1(e,n){const l=e.getTextCursorPosition().block;if(l.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let d;return Array.isArray(l.content)&&(l.content.length===1&&B$2(l.content[0])&&l.content[0].type==="text"&&l.content[0].text==="/"||l.content.length===0)?(d=e.updateBlock(l,n),e.setTextCursorPosition(d)):(d=e.insertBlocks([n],l,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),Vn(e),d}function Bo$3(e){const n=[];return b$2(e,"heading",{level:"number"})&&(e.schema.blockSchema.heading.propSchema.level.values||[]).filter(l=>l<=3).forEach(l=>{n.push({onItemClick:()=>{C$1(e,{type:"heading",props:{level:l}})},badge:L(`Mod-Alt-${l}`),key:l===1?"heading":`heading_${l}`,...e.dictionary.slash_menu[l===1?"heading":`heading_${l}`]})}),b$2(e,"quote")&&n.push({onItemClick:()=>{C$1(e,{type:"quote"})},key:"quote",...e.dictionary.slash_menu.quote}),b$2(e,"toggleListItem")&&n.push({onItemClick:()=>{C$1(e,{type:"toggleListItem"})},badge:L("Mod-Shift-6"),key:"toggle_list",...e.dictionary.slash_menu.toggle_list}),b$2(e,"numberedListItem")&&n.push({onItemClick:()=>{C$1(e,{type:"numberedListItem"})},badge:L("Mod-Shift-7"),key:"numbered_list",...e.dictionary.slash_menu.numbered_list}),b$2(e,"bulletListItem")&&n.push({onItemClick:()=>{C$1(e,{type:"bulletListItem"})},badge:L("Mod-Shift-8"),key:"bullet_list",...e.dictionary.slash_menu.bullet_list}),b$2(e,"checkListItem")&&n.push({onItemClick:()=>{C$1(e,{type:"checkListItem"})},badge:L("Mod-Shift-9"),key:"check_list",...e.dictionary.slash_menu.check_list}),b$2(e,"paragraph")&&n.push({onItemClick:()=>{C$1(e,{type:"paragraph"})},badge:L("Mod-Alt-0"),key:"paragraph",...e.dictionary.slash_menu.paragraph}),b$2(e,"codeBlock")&&n.push({onItemClick:()=>{C$1(e,{type:"codeBlock"})},badge:L("Mod-Alt-c"),key:"code_block",...e.dictionary.slash_menu.code_block}),b$2(e,"divider")&&n.push({onItemClick:()=>{C$1(e,{type:"divider"})},key:"divider",...e.dictionary.slash_menu.divider}),b$2(e,"table")&&n.push({onItemClick:()=>{C$1(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...e.dictionary.slash_menu.table}),b$2(e,"image",{url:"string"})&&n.push({onItemClick:()=>{var l;const d=C$1(e,{type:"image"});(l=e.getExtension(I$2))==null||l.showMenu(d.id)},key:"image",...e.dictionary.slash_menu.image}),b$2(e,"video",{url:"string"})&&n.push({onItemClick:()=>{var l;const d=C$1(e,{type:"video"});(l=e.getExtension(I$2))==null||l.showMenu(d.id)},key:"video",...e.dictionary.slash_menu.video}),b$2(e,"audio",{url:"string"})&&n.push({onItemClick:()=>{var l;const d=C$1(e,{type:"audio"});(l=e.getExtension(I$2))==null||l.showMenu(d.id)},key:"audio",...e.dictionary.slash_menu.audio}),b$2(e,"file",{url:"string"})&&n.push({onItemClick:()=>{var l;const d=C$1(e,{type:"file"});(l=e.getExtension(I$2))==null||l.showMenu(d.id)},key:"file",...e.dictionary.slash_menu.file}),b$2(e,"heading",{level:"number",isToggleable:"boolean"})&&(e.schema.blockSchema.heading.propSchema.level.values||[]).filter(l=>l<=3).forEach(l=>{n.push({onItemClick:()=>{C$1(e,{type:"heading",props:{level:l,isToggleable:!0}})},key:l===1?"toggle_heading":`toggle_heading_${l}`,...e.dictionary.slash_menu[l===1?"toggle_heading":`toggle_heading_${l}`]})}),b$2(e,"heading",{level:"number"})&&(e.schema.blockSchema.heading.propSchema.level.values||[]).filter(l=>l>3).forEach(l=>{n.push({onItemClick:()=>{C$1(e,{type:"heading",props:{level:l}})},badge:L(`Mod-Alt-${l}`),key:`heading_${l}`,...e.dictionary.slash_menu[`heading_${l}`]})}),n.push({onItemClick:()=>{var l;(l=e.getExtension(_n))==null||l.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...e.dictionary.slash_menu.emoji}),n}function Ao$2(e,n){return e.filter(({title:l,aliases:d})=>l.toLowerCase().includes(n.toLowerCase())||d&&d.filter(g=>g.toLowerCase().includes(n.toLowerCase())).length!==0)}const Po$3={audio:Ft$3(),bulletListItem:cn$2(),checkListItem:dn$1(),codeBlock:qt$2(),divider:Gt$1(),file:Xt$2(),heading:Yt$2(),image:an$1(),numberedListItem:fn$1(),paragraph:bn$1(),quote:kn$1(),table:Tn(),toggleListItem:mn$1(),video:Nn()},Rn=Le$2({type:"textColor",propSchema:"string"},{render:()=>{const e=document.createElement("span");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const n=document.createElement("span");return e!==h$4.textColor.default&&(n.style.color=e in T$1?T$1[e].text:e),{dom:n,contentDOM:n}},parse:e=>{if(e.tagName==="SPAN"&&e.style.color)return e.style.color}}),Wn=Le$2({type:"backgroundColor",propSchema:"string"},{render:()=>{const e=document.createElement("span");return{dom:e,contentDOM:e}},toExternalHTML:e=>{const n=document.createElement("span");return e!==h$4.backgroundColor.default&&(n.style.backgroundColor=e in T$1?T$1[e].background:e),{dom:n,contentDOM:n}},parse:e=>{if(e.tagName==="SPAN"&&e.style.backgroundColor)return e.style.backgroundColor}}),Fn={bold:H(index_default$4,"boolean"),italic:H(index_default$2,"boolean"),underline:H(index_default,"boolean"),strike:H(index_default$1,"boolean"),code:H(index_default$3,"boolean"),textColor:Rn,backgroundColor:Wn};Mt$1(Fn);const $n={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},Ho$2=wt$1($n);var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function e(n,l){if(n===l)return!0;if(n&&l&&typeof n=="object"&&typeof l=="object"){if(n.constructor!==l.constructor)return!1;var d,g,jn;if(Array.isArray(n)){if(d=n.length,d!=l.length)return!1;for(g=d;g--!==0;)if(!e(n[g],l[g]))return!1;return!0}if(n.constructor===RegExp)return n.source===l.source&&n.flags===l.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===l.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===l.toString();if(jn=Object.keys(n),d=jn.length,d!==Object.keys(l).length)return!1;for(g=d;g--!==0;)if(!Object.prototype.hasOwnProperty.call(l,jn[g]))return!1;for(g=d;g--!==0;){var Un=jn[g];if(!e(n[Un],l[Un]))return!1}return!0}return n!==n&&l!==l}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const Oe$1=getDefaultExportFromCjs(fastDeepEqualExports);function dropCursor(e={}){return new Plugin({view(n){return new DropCursorView(n,e)}})}class DropCursorView{constructor(n,l){var d;this.editorView=n,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(d=l.width)!==null&&d!==void 0?d:1,this.color=l.color===!1?void 0:l.color||"black",this.class=l.class,this.handlers=["dragover","dragend","drop","dragleave"].map(g=>{let jn=Un=>{this[g](Un)};return n.dom.addEventListener(g,jn),{name:g,handler:jn}})}destroy(){this.handlers.forEach(({name:n,handler:l})=>this.editorView.dom.removeEventListener(n,l))}update(n,l){this.cursorPos!=null&&l.doc!=n.state.doc&&(this.cursorPos>n.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(n){n!=this.cursorPos&&(this.cursorPos=n,n==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let n=this.editorView.state.doc.resolve(this.cursorPos),l=!n.parent.inlineContent,d,g=this.editorView.dom,jn=g.getBoundingClientRect(),Un=jn.width/g.offsetWidth,zn=jn.height/g.offsetHeight;if(l){let Qn=n.nodeBefore,Jn=n.nodeAfter;if(Qn||Jn){let Ai=this.editorView.nodeDOM(this.cursorPos-(Qn?Qn.nodeSize:0));if(Ai){let Ri=Ai.getBoundingClientRect(),Ni=Qn?Ri.bottom:Ri.top;Qn&&Jn&&(Ni=(Ni+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let $i=this.width/2*zn;d={left:Ri.left,right:Ri.right,top:Ni-$i,bottom:Ni+$i}}}}if(!d){let Qn=this.editorView.coordsAtPos(this.cursorPos),Jn=this.width/2*Un;d={left:Qn.left-Jn,right:Qn.left+Jn,top:Qn.top,bottom:Qn.bottom}}let qn=this.editorView.dom.offsetParent;this.element||(this.element=qn.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",l),this.element.classList.toggle("prosemirror-dropcursor-inline",!l);let Kn,Xn;if(!qn||qn==document.body&&getComputedStyle(qn).position=="static")Kn=-pageXOffset,Xn=-pageYOffset;else{let Qn=qn.getBoundingClientRect(),Jn=Qn.width/qn.offsetWidth,Ai=Qn.height/qn.offsetHeight;Kn=Qn.left-qn.scrollLeft*Jn,Xn=Qn.top-qn.scrollTop*Ai}this.element.style.left=(d.left-Kn)/Un+"px",this.element.style.top=(d.top-Xn)/zn+"px",this.element.style.width=(d.right-d.left)/Un+"px",this.element.style.height=(d.bottom-d.top)/zn+"px"}scheduleRemoval(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),n)}dragover(n){if(!this.editorView.editable)return;let l=this.editorView.posAtCoords({left:n.clientX,top:n.clientY}),d=l&&l.inside>=0&&this.editorView.state.doc.nodeAt(l.inside),g=d&&d.type.spec.disableDropCursor,jn=typeof g=="function"?g(this.editorView,l,n):g;if(l&&!jn){let Un=l.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let zn=dropPoint(this.editorView.state.doc,Un,this.editorView.dragging.slice);zn!=null&&(Un=zn)}this.setCursor(Un),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(n){this.editorView.dom.contains(n.relatedTarget)||this.setCursor(null)}}var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(n){return n.length?(n=RopeSequence.from(n),!this.length&&n||n.length<GOOD_LEAF_SIZE&&this.leafAppend(n)||this.length<GOOD_LEAF_SIZE&&n.leafPrepend(this)||this.appendInner(n)):this};RopeSequence.prototype.prepend=function(n){return n.length?RopeSequence.from(n).append(this):this};RopeSequence.prototype.appendInner=function(n){return new Append(this,n)};RopeSequence.prototype.slice=function(n,l){return n===void 0&&(n=0),l===void 0&&(l=this.length),n>=l?RopeSequence.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,l))};RopeSequence.prototype.get=function(n){if(!(n<0||n>=this.length))return this.getInner(n)};RopeSequence.prototype.forEach=function(n,l,d){l===void 0&&(l=0),d===void 0&&(d=this.length),l<=d?this.forEachInner(n,l,d,0):this.forEachInvertedInner(n,l,d,0)};RopeSequence.prototype.map=function(n,l,d){l===void 0&&(l=0),d===void 0&&(d=this.length);var g=[];return this.forEach(function(jn,Un){return g.push(n(jn,Un))},l,d),g};RopeSequence.from=function(n){return n instanceof RopeSequence?n:n&&n.length?new Leaf(n):RopeSequence.empty};var Leaf=(function(e){function n(d){e.call(this),this.values=d}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var l={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(g,jn){return g==0&&jn==this.length?this:new n(this.values.slice(g,jn))},n.prototype.getInner=function(g){return this.values[g]},n.prototype.forEachInner=function(g,jn,Un,zn){for(var qn=jn;qn<Un;qn++)if(g(this.values[qn],zn+qn)===!1)return!1},n.prototype.forEachInvertedInner=function(g,jn,Un,zn){for(var qn=jn-1;qn>=Un;qn--)if(g(this.values[qn],zn+qn)===!1)return!1},n.prototype.leafAppend=function(g){if(this.length+g.length<=GOOD_LEAF_SIZE)return new n(this.values.concat(g.flatten()))},n.prototype.leafPrepend=function(g){if(this.length+g.length<=GOOD_LEAF_SIZE)return new n(g.flatten().concat(this.values))},l.length.get=function(){return this.values.length},l.depth.get=function(){return 0},Object.defineProperties(n.prototype,l),n})(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=(function(e){function n(l,d){e.call(this),this.left=l,this.right=d,this.length=l.length+d.length,this.depth=Math.max(l.depth,d.depth)+1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},n.prototype.getInner=function(d){return d<this.left.length?this.left.get(d):this.right.get(d-this.left.length)},n.prototype.forEachInner=function(d,g,jn,Un){var zn=this.left.length;if(g<zn&&this.left.forEachInner(d,g,Math.min(jn,zn),Un)===!1||jn>zn&&this.right.forEachInner(d,Math.max(g-zn,0),Math.min(this.length,jn)-zn,Un+zn)===!1)return!1},n.prototype.forEachInvertedInner=function(d,g,jn,Un){var zn=this.left.length;if(g>zn&&this.right.forEachInvertedInner(d,g-zn,Math.max(jn,zn)-zn,Un+zn)===!1||jn<zn&&this.left.forEachInvertedInner(d,Math.min(g,zn),jn,Un)===!1)return!1},n.prototype.sliceInner=function(d,g){if(d==0&&g==this.length)return this;var jn=this.left.length;return g<=jn?this.left.slice(d,g):d>=jn?this.right.slice(d-jn,g-jn):this.left.slice(d,jn).append(this.right.slice(0,g-jn))},n.prototype.leafAppend=function(d){var g=this.right.leafAppend(d);if(g)return new n(this.left,g)},n.prototype.leafPrepend=function(d){var g=this.left.leafPrepend(d);if(g)return new n(g,this.right)},n.prototype.appendInner=function(d){return this.left.depth>=Math.max(this.right.depth,d.depth)+1?new n(this.left,new n(this.right,d)):new n(this,d)},n})(RopeSequence);const max_empty_items=500;class Branch{constructor(n,l){this.items=n,this.eventCount=l}popEvent(n,l){if(this.eventCount==0)return null;let d=this.items.length;for(;;d--)if(this.items.get(d-1).selection){--d;break}let g,jn;l&&(g=this.remapping(d,this.items.length),jn=g.maps.length);let Un=n.tr,zn,qn,Kn=[],Xn=[];return this.items.forEach((Qn,Jn)=>{if(!Qn.step){g||(g=this.remapping(d,Jn+1),jn=g.maps.length),jn--,Xn.push(Qn);return}if(g){Xn.push(new Item(Qn.map));let Ai=Qn.step.map(g.slice(jn)),Ri;Ai&&Un.maybeStep(Ai).doc&&(Ri=Un.mapping.maps[Un.mapping.maps.length-1],Kn.push(new Item(Ri,void 0,void 0,Kn.length+Xn.length))),jn--,Ri&&g.appendMap(Ri,jn)}else Un.maybeStep(Qn.step);if(Qn.selection)return zn=g?Qn.selection.map(g.slice(jn)):Qn.selection,qn=new Branch(this.items.slice(0,d).append(Xn.reverse().concat(Kn)),this.eventCount-1),!1},this.items.length,0),{remaining:qn,transform:Un,selection:zn}}addTransform(n,l,d,g){let jn=[],Un=this.eventCount,zn=this.items,qn=!g&&zn.length?zn.get(zn.length-1):null;for(let Xn=0;Xn<n.steps.length;Xn++){let Qn=n.steps[Xn].invert(n.docs[Xn]),Jn=new Item(n.mapping.maps[Xn],Qn,l),Ai;(Ai=qn&&qn.merge(Jn))&&(Jn=Ai,Xn?jn.pop():zn=zn.slice(0,zn.length-1)),jn.push(Jn),l&&(Un++,l=void 0),g||(qn=Jn)}let Kn=Un-d.depth;return Kn>DEPTH_OVERFLOW&&(zn=cutOffEvents(zn,Kn),Un-=Kn),new Branch(zn.append(jn),Un)}remapping(n,l){let d=new Mapping;return this.items.forEach((g,jn)=>{let Un=g.mirrorOffset!=null&&jn-g.mirrorOffset>=n?d.maps.length-g.mirrorOffset:void 0;d.appendMap(g.map,Un)},n,l),d}addMaps(n){return this.eventCount==0?this:new Branch(this.items.append(n.map(l=>new Item(l))),this.eventCount)}rebased(n,l){if(!this.eventCount)return this;let d=[],g=Math.max(0,this.items.length-l),jn=n.mapping,Un=n.steps.length,zn=this.eventCount;this.items.forEach(Jn=>{Jn.selection&&zn--},g);let qn=l;this.items.forEach(Jn=>{let Ai=jn.getMirror(--qn);if(Ai==null)return;Un=Math.min(Un,Ai);let Ri=jn.maps[Ai];if(Jn.step){let Ni=n.steps[Ai].invert(n.docs[Ai]),$i=Jn.selection&&Jn.selection.map(jn.slice(qn+1,Ai));$i&&zn++,d.push(new Item(Ri,Ni,$i))}else d.push(new Item(Ri))},g);let Kn=[];for(let Jn=l;Jn<Un;Jn++)Kn.push(new Item(jn.maps[Jn]));let Xn=this.items.slice(0,g).append(Kn).append(d),Qn=new Branch(Xn,zn);return Qn.emptyItemCount()>max_empty_items&&(Qn=Qn.compress(this.items.length-d.length)),Qn}emptyItemCount(){let n=0;return this.items.forEach(l=>{l.step||n++}),n}compress(n=this.items.length){let l=this.remapping(0,n),d=l.maps.length,g=[],jn=0;return this.items.forEach((Un,zn)=>{if(zn>=n)g.push(Un),Un.selection&&jn++;else if(Un.step){let qn=Un.step.map(l.slice(d)),Kn=qn&&qn.getMap();if(d--,Kn&&l.appendMap(Kn,d),qn){let Xn=Un.selection&&Un.selection.map(l.slice(d));Xn&&jn++;let Qn=new Item(Kn.invert(),qn,Xn),Jn,Ai=g.length-1;(Jn=g.length&&g[Ai].merge(Qn))?g[Ai]=Jn:g.push(Qn)}}else Un.map&&d--},this.items.length,0),new Branch(RopeSequence.from(g.reverse()),jn)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(e,n){let l;return e.forEach((d,g)=>{if(d.selection&&n--==0)return l=g,!1}),e.slice(l)}class Item{constructor(n,l,d,g){this.map=n,this.step=l,this.selection=d,this.mirrorOffset=g}merge(n){if(this.step&&n.step&&!n.selection){let l=n.step.merge(this.step);if(l)return new Item(l.getMap().invert(),l,this.selection)}}}class HistoryState{constructor(n,l,d,g,jn){this.done=n,this.undone=l,this.prevRanges=d,this.prevTime=g,this.prevComposition=jn}}const DEPTH_OVERFLOW=20;function applyTransaction(e,n,l,d){let g=l.getMeta(historyKey),jn;if(g)return g.historyState;l.getMeta(closeHistoryKey)&&(e=new HistoryState(e.done,e.undone,null,0,-1));let Un=l.getMeta("appendedTransaction");if(l.steps.length==0)return e;if(Un&&Un.getMeta(historyKey))return Un.getMeta(historyKey).redo?new HistoryState(e.done.addTransform(l,void 0,d,mustPreserveItems(n)),e.undone,rangesFor(l.mapping.maps),e.prevTime,e.prevComposition):new HistoryState(e.done,e.undone.addTransform(l,void 0,d,mustPreserveItems(n)),null,e.prevTime,e.prevComposition);if(l.getMeta("addToHistory")!==!1&&!(Un&&Un.getMeta("addToHistory")===!1)){let zn=l.getMeta("composition"),qn=e.prevTime==0||!Un&&e.prevComposition!=zn&&(e.prevTime<(l.time||0)-d.newGroupDelay||!isAdjacentTo(l,e.prevRanges)),Kn=Un?mapRanges(e.prevRanges,l.mapping):rangesFor(l.mapping.maps);return new HistoryState(e.done.addTransform(l,qn?n.selection.getBookmark():void 0,d,mustPreserveItems(n)),Branch.empty,Kn,l.time,zn??e.prevComposition)}else return(jn=l.getMeta("rebased"))?new HistoryState(e.done.rebased(l,jn),e.undone.rebased(l,jn),mapRanges(e.prevRanges,l.mapping),e.prevTime,e.prevComposition):new HistoryState(e.done.addMaps(l.mapping.maps),e.undone.addMaps(l.mapping.maps),mapRanges(e.prevRanges,l.mapping),e.prevTime,e.prevComposition)}function isAdjacentTo(e,n){if(!n)return!1;if(!e.docChanged)return!0;let l=!1;return e.mapping.maps[0].forEach((d,g)=>{for(let jn=0;jn<n.length;jn+=2)d<=n[jn+1]&&g>=n[jn]&&(l=!0)}),l}function rangesFor(e){let n=[];for(let l=e.length-1;l>=0&&n.length==0;l--)e[l].forEach((d,g,jn,Un)=>n.push(jn,Un));return n}function mapRanges(e,n){if(!e)return null;let l=[];for(let d=0;d<e.length;d+=2){let g=n.map(e[d],1),jn=n.map(e[d+1],-1);g<=jn&&l.push(g,jn)}return l}function histTransaction(e,n,l){let d=mustPreserveItems(n),g=historyKey.get(n).spec.config,jn=(l?e.undone:e.done).popEvent(n,d);if(!jn)return null;let Un=jn.selection.resolve(jn.transform.doc),zn=(l?e.done:e.undone).addTransform(jn.transform,n.selection.getBookmark(),g,d),qn=new HistoryState(l?zn:jn.remaining,l?jn.remaining:zn,null,0,-1);return jn.transform.setSelection(Un).setMeta(historyKey,{redo:l,historyState:qn})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(e){let n=e.plugins;if(cachedPreserveItemsPlugins!=n){cachedPreserveItems=!1,cachedPreserveItemsPlugins=n;for(let l=0;l<n.length;l++)if(n[l].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}function closeHistory(e){return e.setMeta(closeHistoryKey,!0)}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(n,l,d){return applyTransaction(l,d,n,e)}},config:e,props:{handleDOMEvents:{beforeinput(n,l){let d=l.inputType,g=d=="historyUndo"?undo:d=="historyRedo"?redo:null;return!g||!n.editable?!1:(l.preventDefault(),g(n.state,n.dispatch))}}}})}function buildCommand(e,n){return(l,d)=>{let g=historyKey.getState(l);if(!g||(e?g.undone:g.done).eventCount==0)return!1;if(d){let jn=histTransaction(g,l,e);jn&&d(n?jn.scrollIntoView():jn)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);function ok$1(){}class Schema{constructor(n,l,d){this.normal=l,this.property=n,d&&(this.space=d)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(e,n){const l={},d={};for(const g of e)Object.assign(l,g.property),Object.assign(d,g.normal);return new Schema(l,d,n)}function normalize$1(e){return e.toLowerCase()}class Info{constructor(n,l){this.attribute=l,this.property=n}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(n,l,d,g){let jn=-1;if(super(n,l),mark(this,"space",g),typeof d=="number")for(;++jn<checks.length;){const Un=checks[jn];mark(this,checks[jn],(d&types[Un])===types[Un])}}}DefinedInfo.prototype.defined=!0;function mark(e,n,l){l&&(e[n]=l)}function create$3(e){const n={},l={};for(const[d,g]of Object.entries(e.properties)){const jn=new DefinedInfo(d,e.transform(e.attributes||{},d),g,e.space);e.mustUseProperty&&e.mustUseProperty.includes(d)&&(jn.mustUseProperty=!0),n[d]=jn,l[normalize$1(d)]=d,l[normalize$1(jn.attribute)]=d}return new Schema(n,l,e.space)}const aria=create$3({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function caseSensitiveTransform(e,n){return n in e?e[n]:n}function caseInsensitiveTransform(e,n){return caseSensitiveTransform(e,n.toLowerCase())}const html$5=create$3({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create$3({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create$3({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),xmlns=create$3({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create$3({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),cap=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find$1(e,n){const l=normalize$1(n);let d=n,g=Info;if(l in e.normal)return e.property[e.normal[l]];if(l.length>4&&l.slice(0,4)==="data"&&valid.test(n)){if(n.charAt(4)==="-"){const jn=n.slice(5).replace(dash,camelcase$1);d="data"+jn.charAt(0).toUpperCase()+jn.slice(1)}else{const jn=n.slice(4);if(!dash.test(jn)){let Un=jn.replace(cap,kebab);Un.charAt(0)!=="-"&&(Un="-"+Un),n="data"+Un}}g=DefinedInfo}return new g(d,n)}function kebab(e){return"-"+e.toLowerCase()}function camelcase$1(e){return e.charAt(1).toUpperCase()}const html$4=merge([aria,html$5,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function parse$3(e){const n=[],l=String(e||"");let d=l.indexOf(","),g=0,jn=!1;for(;!jn;){d===-1&&(d=l.length,jn=!0);const Un=l.slice(g,d).trim();(Un||!jn)&&n.push(Un),g=d+1,d=l.indexOf(",",g)}return n}function stringify$1(e,n){const l=n||{};return(e[e.length-1]===""?[...e,""]:e).join((l.padRight?" ":"")+","+(l.padLeft===!1?"":" ")).trim()}const search$1=/[#.]/g;function parseSelector(e,n){const l=e||"",d={};let g=0,jn,Un;for(;g<l.length;){search$1.lastIndex=g;const zn=search$1.exec(l),qn=l.slice(g,zn?zn.index:l.length);qn&&(jn?jn==="#"?d.id=qn:Array.isArray(d.className)?d.className.push(qn):d.className=[qn]:Un=qn,g+=qn.length),zn&&(jn=zn[0],g++)}return{type:"element",tagName:Un||n||"div",properties:d,children:[]}}function parse$2(e){const n=String(e||"").trim();return n?n.split(/[ \t\n\r\f]+/g):[]}function stringify(e){return e.join(" ").trim()}function createH(e,n,l){const d=l?createAdjustMap(l):void 0;function g(jn,Un,...zn){let qn;if(jn==null){qn={type:"root",children:[]};const Kn=Un;zn.unshift(Kn)}else{qn=parseSelector(jn,n);const Kn=qn.tagName.toLowerCase(),Xn=d?d.get(Kn):void 0;if(qn.tagName=Xn||Kn,isChild(Un))zn.unshift(Un);else for(const[Qn,Jn]of Object.entries(Un))addProperty(e,qn.properties,Qn,Jn)}for(const Kn of zn)addChild(qn.children,Kn);return qn.type==="element"&&qn.tagName==="template"&&(qn.content={type:"root",children:qn.children},qn.children=[]),qn}return g}function isChild(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const n=e,l=Object.keys(e);for(const d of l){const g=n[d];if(g&&typeof g=="object"){if(!Array.isArray(g))return!0;const jn=g;for(const Un of jn)if(typeof Un!="number"&&typeof Un!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function addProperty(e,n,l,d){const g=find$1(e,l);let jn;if(d!=null){if(typeof d=="number"){if(Number.isNaN(d))return;jn=d}else typeof d=="boolean"?jn=d:typeof d=="string"?g.spaceSeparated?jn=parse$2(d):g.commaSeparated?jn=parse$3(d):g.commaOrSpaceSeparated?jn=parse$2(parse$3(d).join(" ")):jn=parsePrimitive(g,g.property,d):Array.isArray(d)?jn=[...d]:jn=g.property==="style"?style(d):String(d);if(Array.isArray(jn)){const Un=[];for(const zn of jn)Un.push(parsePrimitive(g,g.property,zn));jn=Un}g.property==="className"&&Array.isArray(n.className)&&(jn=n.className.concat(jn)),n[g.property]=jn}}function addChild(e,n){if(n!=null)if(typeof n=="number"||typeof n=="string")e.push({type:"text",value:String(n)});else if(Array.isArray(n))for(const l of n)addChild(e,l);else if(typeof n=="object"&&"type"in n)n.type==="root"?addChild(e,n.children):e.push(n);else throw new Error("Expected node, nodes, or string, got `"+n+"`")}function parsePrimitive(e,n,l){if(typeof l=="string"){if(e.number&&l&&!Number.isNaN(Number(l)))return Number(l);if((e.boolean||e.overloadedBoolean)&&(l===""||normalize$1(l)===normalize$1(n)))return!0}return l}function style(e){const n=[];for(const[l,d]of Object.entries(e))n.push([l,d].join(": "));return n.join("; ")}function createAdjustMap(e){const n=new Map;for(const l of e)n.set(l.toLowerCase(),l);return n}const svgCaseSensitiveTagNames=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],h$3=createH(html$4,"div"),s=createH(svg,"g",svgCaseSensitiveTagNames);function location$1(e){const n=String(e),l=[];return{toOffset:g,toPoint:d};function d(jn){if(typeof jn=="number"&&jn>-1&&jn<=n.length){let Un=0;for(;;){let zn=l[Un];if(zn===void 0){const qn=next(n,l[Un-1]);zn=qn===-1?n.length+1:qn+1,l[Un]=zn}if(zn>jn)return{line:Un+1,column:jn-(Un>0?l[Un-1]:0)+1,offset:jn};Un++}}}function g(jn){if(jn&&typeof jn.line=="number"&&typeof jn.column=="number"&&!Number.isNaN(jn.line)&&!Number.isNaN(jn.column)){for(;l.length<jn.line;){const zn=l[l.length-1],qn=next(n,zn),Kn=qn===-1?n.length+1:qn+1;if(zn===Kn)break;l.push(Kn)}const Un=(jn.line>1?l[jn.line-2]:0)+jn.column-1;if(Un<l[jn.line-1])return Un}}}function next(e,n){const l=e.indexOf("\r",n),d=e.indexOf(`
`,n);return d===-1?l:l===-1||l+1===d?d:l<d?l:d}const webNamespaces={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},own$9={}.hasOwnProperty,proto=Object.prototype;function fromParse5(e,n){const l=n||{};return one$4({file:l.file||void 0,location:!1,schema:l.space==="svg"?svg:html$4,verbose:l.verbose||!1},e)}function one$4(e,n){let l;switch(n.nodeName){case"#comment":{const d=n;return l={type:"comment",value:d.data},patch$2(e,d,l),l}case"#document":case"#document-fragment":{const d=n,g="mode"in d?d.mode==="quirks"||d.mode==="limited-quirks":!1;if(l={type:"root",children:all$6(e,n.childNodes),data:{quirksMode:g}},e.file&&e.location){const jn=String(e.file),Un=location$1(jn),zn=Un.toPoint(0),qn=Un.toPoint(jn.length);l.position={start:zn,end:qn}}return l}case"#documentType":{const d=n;return l={type:"doctype"},patch$2(e,d,l),l}case"#text":{const d=n;return l={type:"text",value:d.value},patch$2(e,d,l),l}default:return l=element$4(e,n),l}}function all$6(e,n){let l=-1;const d=[];for(;++l<n.length;){const g=one$4(e,n[l]);d.push(g)}return d}function element$4(e,n){const l=e.schema;e.schema=n.namespaceURI===webNamespaces.svg?svg:html$4;let d=-1;const g={};for(;++d<n.attrs.length;){const zn=n.attrs[d],qn=(zn.prefix?zn.prefix+":":"")+zn.name;own$9.call(proto,qn)||(g[qn]=zn.value)}const Un=(e.schema.space==="svg"?s:h$3)(n.tagName,g,all$6(e,n.childNodes));if(patch$2(e,n,Un),Un.tagName==="template"){const zn=n,qn=zn.sourceCodeLocation,Kn=qn&&qn.startTag&&position$2(qn.startTag),Xn=qn&&qn.endTag&&position$2(qn.endTag),Qn=one$4(e,zn.content);Kn&&Xn&&e.file&&(Qn.position={start:Kn.end,end:Xn.start}),Un.content=Qn}return e.schema=l,Un}function patch$2(e,n,l){if("sourceCodeLocation"in n&&n.sourceCodeLocation&&e.file){const d=createLocation(e,l,n.sourceCodeLocation);d&&(e.location=!0,l.position=d)}}function createLocation(e,n,l){const d=position$2(l);if(n.type==="element"){const g=n.children[n.children.length-1];if(d&&!l.endTag&&g&&g.position&&g.position.end&&(d.end=Object.assign({},g.position.end)),e.verbose){const jn={};let Un;if(l.attrs)for(Un in l.attrs)own$9.call(l.attrs,Un)&&(jn[find$1(e.schema,Un).property]=position$2(l.attrs[Un]));l.startTag;const zn=position$2(l.startTag),qn=l.endTag?position$2(l.endTag):void 0,Kn={opening:zn};qn&&(Kn.closing=qn),Kn.properties=jn,n.data={position:Kn}}}return d}function position$2(e){const n=point$3({line:e.startLine,column:e.startCol,offset:e.startOffset}),l=point$3({line:e.endLine,column:e.endCol,offset:e.endOffset});return n||l?{start:n,end:l}:void 0}function point$3(e){return e.line&&e.column?e:void 0}const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),REPLACEMENT_CHARACTER="";var CODE_POINTS;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(CODE_POINTS||(CODE_POINTS={}));const SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(e){return e>=55296&&e<=57343}function isSurrogatePair(e){return e>=56320&&e<=57343}function getSurrogatePairCodePoint(e,n){return(e-55296)*1024+9216+n}function isControlCodePoint(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function isUndefinedCodePoint(e){return e>=64976&&e<=65007||UNDEFINED_CODE_POINTS.has(e)}var ERR;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ERR||(ERR={}));const DEFAULT_BUFFER_WATERLINE=65536;class Preprocessor{constructor(n){this.handler=n,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=DEFAULT_BUFFER_WATERLINE,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(n,l){const{line:d,col:g,offset:jn}=this,Un=g+l,zn=jn+l;return{code:n,startLine:d,endLine:d,startCol:Un,endCol:Un,startOffset:zn,endOffset:zn}}_err(n){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(n,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(n){if(this.pos!==this.html.length-1){const l=this.html.charCodeAt(this.pos+1);if(isSurrogatePair(l))return this.pos++,this._addGap(),getSurrogatePairCodePoint(n,l)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),n}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(n,l){this.html.length>0?this.html+=n:this.html=n,this.endOfChunkHit=!1,this.lastChunkWritten=l}insertHtmlAtCurrentPos(n){this.html=this.html.substring(0,this.pos+1)+n+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(n,l){if(this.pos+n.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(l)return this.html.startsWith(n,this.pos);for(let d=0;d<n.length;d++)if((this.html.charCodeAt(this.pos+d)|32)!==n.charCodeAt(d))return!1;return!0}peek(n){const l=this.pos+n;if(l>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const d=this.html.charCodeAt(l);return d===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:d}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let n=this.html.charCodeAt(this.pos);return n===CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED):n===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,isSurrogate(n)&&(n=this._processSurrogate(n)),this.handler.onParseError===null||n>31&&n<127||n===CODE_POINTS.LINE_FEED||n===CODE_POINTS.CARRIAGE_RETURN||n>159&&n<64976||this._checkForProblematicCharacters(n),n)}_checkForProblematicCharacters(n){isControlCodePoint(n)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(n)&&this._err(ERR.noncharacterInInputStream)}retreat(n){for(this.pos-=n;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(TokenType||(TokenType={}));function getTokenAttr(e,n){for(let l=e.attrs.length-1;l>=0;l--)if(e.attrs[l].name===n)return e.attrs[l].value;return null}const htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function replaceCodePoint(e){var n;return e>=55296&&e<=57343||e>1114111?65533:(n=decodeMap.get(e))!==null&&n!==void 0?n:e}var CharCodes;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(CharCodes||(CharCodes={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber(e){return e>=CharCodes.ZERO&&e<=CharCodes.NINE}function isHexadecimalCharacter(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_F||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_F}function isAsciiAlphaNumeric$1(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_Z||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_Z||isNumber(e)}function isEntityInAttributeInvalidEnd(e){return e===CharCodes.EQUALS||isAsciiAlphaNumeric$1(e)}var EntityDecoderState;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(n,l,d){this.decodeTree=n,this.emitCodePoint=l,this.errors=d,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(n){this.decodeMode=n,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(n,l){switch(this.state){case EntityDecoderState.EntityStart:return n.charCodeAt(l)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(n,l+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(n,l));case EntityDecoderState.NumericStart:return this.stateNumericStart(n,l);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(n,l);case EntityDecoderState.NumericHex:return this.stateNumericHex(n,l);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(n,l)}}stateNumericStart(n,l){return l>=n.length?-1:(n.charCodeAt(l)|TO_LOWER_BIT)===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(n,l+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(n,l))}addToNumericResult(n,l,d,g){if(l!==d){const jn=d-l;this.result=this.result*Math.pow(g,jn)+Number.parseInt(n.substr(l,jn),g),this.consumed+=jn}}stateNumericHex(n,l){const d=l;for(;l<n.length;){const g=n.charCodeAt(l);if(isNumber(g)||isHexadecimalCharacter(g))l+=1;else return this.addToNumericResult(n,d,l,16),this.emitNumericEntity(g,3)}return this.addToNumericResult(n,d,l,16),-1}stateNumericDecimal(n,l){const d=l;for(;l<n.length;){const g=n.charCodeAt(l);if(isNumber(g))l+=1;else return this.addToNumericResult(n,d,l,10),this.emitNumericEntity(g,2)}return this.addToNumericResult(n,d,l,10),-1}emitNumericEntity(n,l){var d;if(this.consumed<=l)return(d=this.errors)===null||d===void 0||d.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(n===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(n!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(n,l){const{decodeTree:d}=this;let g=d[this.treeIndex],jn=(g&BinTrieFlags.VALUE_LENGTH)>>14;for(;l<n.length;l++,this.excess++){const Un=n.charCodeAt(l);if(this.treeIndex=determineBranch(d,g,this.treeIndex+Math.max(1,jn),Un),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(jn===0||isEntityInAttributeInvalidEnd(Un))?0:this.emitNotTerminatedNamedEntity();if(g=d[this.treeIndex],jn=(g&BinTrieFlags.VALUE_LENGTH)>>14,jn!==0){if(Un===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,jn,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var n;const{result:l,decodeTree:d}=this,g=(d[l]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(l,g,this.consumed),(n=this.errors)===null||n===void 0||n.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(n,l,d){const{decodeTree:g}=this;return this.emitCodePoint(l===1?g[n]&~BinTrieFlags.VALUE_LENGTH:g[n+1],d),l===3&&this.emitCodePoint(g[n+2],d),d}end(){var n;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function determineBranch(e,n,l,d){const g=(n&BinTrieFlags.BRANCH_LENGTH)>>7,jn=n&BinTrieFlags.JUMP_TABLE;if(g===0)return jn!==0&&d===jn?l:-1;if(jn){const qn=d-jn;return qn<0||qn>=g?-1:e[l+qn]-1}let Un=l,zn=Un+g-1;for(;Un<=zn;){const qn=Un+zn>>>1,Kn=e[qn];if(Kn<d)Un=qn+1;else if(Kn>d)zn=qn-1;else return e[qn+g]}return-1}var NS;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(NS||(NS={}));var ATTRS;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(ATTRS||(ATTRS={}));var DOCUMENT_MODE;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(DOCUMENT_MODE||(DOCUMENT_MODE={}));var TAG_NAMES;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(TAG_NAMES||(TAG_NAMES={}));var TAG_ID;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(TAG_ID||(TAG_ID={}));const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SEARCH,TAG_ID.SEARCH],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(e){var n;return(n=TAG_NAME_TO_ID.get(e))!==null&&n!==void 0?n:TAG_ID.UNKNOWN}const $$1=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([$$1.ADDRESS,$$1.APPLET,$$1.AREA,$$1.ARTICLE,$$1.ASIDE,$$1.BASE,$$1.BASEFONT,$$1.BGSOUND,$$1.BLOCKQUOTE,$$1.BODY,$$1.BR,$$1.BUTTON,$$1.CAPTION,$$1.CENTER,$$1.COL,$$1.COLGROUP,$$1.DD,$$1.DETAILS,$$1.DIR,$$1.DIV,$$1.DL,$$1.DT,$$1.EMBED,$$1.FIELDSET,$$1.FIGCAPTION,$$1.FIGURE,$$1.FOOTER,$$1.FORM,$$1.FRAME,$$1.FRAMESET,$$1.H1,$$1.H2,$$1.H3,$$1.H4,$$1.H5,$$1.H6,$$1.HEAD,$$1.HEADER,$$1.HGROUP,$$1.HR,$$1.HTML,$$1.IFRAME,$$1.IMG,$$1.INPUT,$$1.LI,$$1.LINK,$$1.LISTING,$$1.MAIN,$$1.MARQUEE,$$1.MENU,$$1.META,$$1.NAV,$$1.NOEMBED,$$1.NOFRAMES,$$1.NOSCRIPT,$$1.OBJECT,$$1.OL,$$1.P,$$1.PARAM,$$1.PLAINTEXT,$$1.PRE,$$1.SCRIPT,$$1.SECTION,$$1.SELECT,$$1.SOURCE,$$1.STYLE,$$1.SUMMARY,$$1.TABLE,$$1.TBODY,$$1.TD,$$1.TEMPLATE,$$1.TEXTAREA,$$1.TFOOT,$$1.TH,$$1.THEAD,$$1.TITLE,$$1.TR,$$1.TRACK,$$1.UL,$$1.WBR,$$1.XMP]),[NS.MATHML]:new Set([$$1.MI,$$1.MO,$$1.MN,$$1.MS,$$1.MTEXT,$$1.ANNOTATION_XML]),[NS.SVG]:new Set([$$1.TITLE,$$1.FOREIGN_OBJECT,$$1.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set},NUMBERED_HEADERS=new Set([$$1.H1,$$1.H2,$$1.H3,$$1.H4,$$1.H5,$$1.H6]);TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT;var State$1;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(State$1||(State$1={}));const TokenizerMode={DATA:State$1.DATA,RCDATA:State$1.RCDATA,RAWTEXT:State$1.RAWTEXT,SCRIPT_DATA:State$1.SCRIPT_DATA,PLAINTEXT:State$1.PLAINTEXT,CDATA_SECTION:State$1.CDATA_SECTION};function isAsciiDigit(e){return e>=CODE_POINTS.DIGIT_0&&e<=CODE_POINTS.DIGIT_9}function isAsciiUpper(e){return e>=CODE_POINTS.LATIN_CAPITAL_A&&e<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLower(e){return e>=CODE_POINTS.LATIN_SMALL_A&&e<=CODE_POINTS.LATIN_SMALL_Z}function isAsciiLetter(e){return isAsciiLower(e)||isAsciiUpper(e)}function isAsciiAlphaNumeric(e){return isAsciiLetter(e)||isAsciiDigit(e)}function toAsciiLower(e){return e+32}function isWhitespace(e){return e===CODE_POINTS.SPACE||e===CODE_POINTS.LINE_FEED||e===CODE_POINTS.TABULATION||e===CODE_POINTS.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(e){return isWhitespace(e)||e===CODE_POINTS.SOLIDUS||e===CODE_POINTS.GREATER_THAN_SIGN}function getErrorForNumericCharacterReference(e){return e===CODE_POINTS.NULL?ERR.nullCharacterReference:e>1114111?ERR.characterReferenceOutsideUnicodeRange:isSurrogate(e)?ERR.surrogateCharacterReference:isUndefinedCodePoint(e)?ERR.noncharacterCharacterReference:isControlCodePoint(e)||e===CODE_POINTS.CARRIAGE_RETURN?ERR.controlCharacterReference:null}class Tokenizer{constructor(n,l){this.options=n,this.handler=l,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=State$1.DATA,this.returnState=State$1.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(l),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new EntityDecoder(htmlDecodeTree,(d,g)=>{this.preprocessor.pos=this.entityStartPos+g-1,this._flushCodePointConsumedAsCharacterReference(d)},l.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ERR.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:d=>{this._err(ERR.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+d)},validateNumericCharacterReference:d=>{const g=getErrorForNumericCharacterReference(d);g&&this._err(g,1)}}:void 0)}_err(n,l=0){var d,g;(g=(d=this.handler).onParseError)===null||g===void 0||g.call(d,this.preprocessor.getError(n,l))}getCurrentLocation(n){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-n,startOffset:this.preprocessor.offset-n,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const n=this._consume();this._ensureHibernation()||this._callState(n)}this.inLoop=!1}}pause(){this.paused=!0}resume(n){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||n?.())}write(n,l,d){this.active=!0,this.preprocessor.write(n,l),this._runParsingLoop(),this.paused||d?.()}insertHtmlAtCurrentPos(n){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(n),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(n){this.consumedAfterSnapshot+=n;for(let l=0;l<n;l++)this.preprocessor.advance()}_consumeSequenceIfMatch(n,l){return this.preprocessor.startsWith(n,l)?(this._advanceBy(n.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(n){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(n)}}_createDoctypeToken(n){this.currentToken={type:TokenType.DOCTYPE,name:n,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(n,l){this.currentCharacterToken={type:n,chars:l,location:this.currentLocation}}_createAttr(n){this.currentAttr={name:n,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var n,l;const d=this.currentToken;if(getTokenAttr(d,this.currentAttr.name)===null){if(d.attrs.push(this.currentAttr),d.location&&this.currentLocation){const g=(n=(l=d.location).attrs)!==null&&n!==void 0?n:l.attrs=Object.create(null);g[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(n){this._emitCurrentCharacterToken(n.location),this.currentToken=null,n.location&&(n.location.endLine=this.preprocessor.line,n.location.endCol=this.preprocessor.col+1,n.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const n=this.currentToken;this.prepareToken(n),n.tagID=getTagID(n.tagName),n.type===TokenType.START_TAG?(this.lastStartTagName=n.tagName,this.handler.onStartTag(n)):(n.attrs.length>0&&this._err(ERR.endTagWithAttributes),n.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(n)),this.preprocessor.dropParsedChunk()}emitCurrentComment(n){this.prepareToken(n),this.handler.onComment(n),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(n){this.prepareToken(n),this.handler.onDoctype(n),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(n){if(this.currentCharacterToken){switch(n&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const n=this.getCurrentLocation(0);n&&(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset),this._emitCurrentCharacterToken(n),this.handler.onEof({type:TokenType.EOF,location:n}),this.active=!1}_appendCharToCurrentCharacterToken(n,l){if(this.currentCharacterToken)if(this.currentCharacterToken.type===n){this.currentCharacterToken.chars+=l;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(n,l)}_emitCodePoint(n){const l=isWhitespace(n)?TokenType.WHITESPACE_CHARACTER:n===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(l,String.fromCodePoint(n))}_emitChars(n){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,n)}_startCharacterReference(){this.returnState=this.state,this.state=State$1.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?DecodingMode.Attribute:DecodingMode.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(n){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(n):this._emitCodePoint(n)}_callState(n){switch(this.state){case State$1.DATA:{this._stateData(n);break}case State$1.RCDATA:{this._stateRcdata(n);break}case State$1.RAWTEXT:{this._stateRawtext(n);break}case State$1.SCRIPT_DATA:{this._stateScriptData(n);break}case State$1.PLAINTEXT:{this._statePlaintext(n);break}case State$1.TAG_OPEN:{this._stateTagOpen(n);break}case State$1.END_TAG_OPEN:{this._stateEndTagOpen(n);break}case State$1.TAG_NAME:{this._stateTagName(n);break}case State$1.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(n);break}case State$1.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(n);break}case State$1.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(n);break}case State$1.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(n);break}case State$1.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(n);break}case State$1.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(n);break}case State$1.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(n);break}case State$1.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(n);break}case State$1.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(n);break}case State$1.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(n);break}case State$1.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(n);break}case State$1.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(n);break}case State$1.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(n);break}case State$1.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(n);break}case State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(n);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(n);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(n);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(n);break}case State$1.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(n);break}case State$1.ATTRIBUTE_NAME:{this._stateAttributeName(n);break}case State$1.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(n);break}case State$1.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(n);break}case State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(n);break}case State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(n);break}case State$1.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(n);break}case State$1.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(n);break}case State$1.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(n);break}case State$1.BOGUS_COMMENT:{this._stateBogusComment(n);break}case State$1.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(n);break}case State$1.COMMENT_START:{this._stateCommentStart(n);break}case State$1.COMMENT_START_DASH:{this._stateCommentStartDash(n);break}case State$1.COMMENT:{this._stateComment(n);break}case State$1.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(n);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(n);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(n);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(n);break}case State$1.COMMENT_END_DASH:{this._stateCommentEndDash(n);break}case State$1.COMMENT_END:{this._stateCommentEnd(n);break}case State$1.COMMENT_END_BANG:{this._stateCommentEndBang(n);break}case State$1.DOCTYPE:{this._stateDoctype(n);break}case State$1.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(n);break}case State$1.DOCTYPE_NAME:{this._stateDoctypeName(n);break}case State$1.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(n);break}case State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(n);break}case State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(n);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(n);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(n);break}case State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(n);break}case State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(n);break}case State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(n);break}case State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(n);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(n);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(n);break}case State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(n);break}case State$1.BOGUS_DOCTYPE:{this._stateBogusDoctype(n);break}case State$1.CDATA_SECTION:{this._stateCdataSection(n);break}case State$1.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(n);break}case State$1.CDATA_SECTION_END:{this._stateCdataSectionEnd(n);break}case State$1.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case State$1.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(n);break}default:throw new Error("Unknown state")}}_stateData(n){switch(n){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.TAG_OPEN;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(n);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateRcdata(n){switch(n){case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RCDATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateRawtext(n){switch(n){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RAWTEXT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateScriptData(n){switch(n){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}_statePlaintext(n){switch(n){case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateTagOpen(n){if(isAsciiLetter(n))this._createStartTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(n);else switch(n){case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.MARKUP_DECLARATION_OPEN;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.END_TAG_OPEN;break}case CODE_POINTS.QUESTION_MARK:{this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(n);break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=State$1.DATA,this._stateData(n)}}_stateEndTagOpen(n){if(isAsciiLetter(n))this._createEndTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(n);else switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingEndTagName),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(n)}}_stateTagName(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.tagName+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:l.tagName+=String.fromCodePoint(isAsciiUpper(n)?toAsciiLower(n):n)}}_stateRcdataLessThanSign(n){n===CODE_POINTS.SOLIDUS?this.state=State$1.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RCDATA,this._stateRcdata(n))}_stateRcdataEndTagOpen(n){isAsciiLetter(n)?(this.state=State$1.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(n)):(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(n))}handleSpecialEndTag(n){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const l=this.currentToken;switch(l.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.BEFORE_ATTRIBUTE_NAME,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.SELF_CLOSING_START_TAG,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=State$1.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(n))}_stateRawtextLessThanSign(n){n===CODE_POINTS.SOLIDUS?this.state=State$1.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RAWTEXT,this._stateRawtext(n))}_stateRawtextEndTagOpen(n){isAsciiLetter(n)?(this.state=State$1.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(n)):(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(n))}_stateRawtextEndTagName(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(n))}_stateScriptDataLessThanSign(n){switch(n){case CODE_POINTS.SOLIDUS:{this.state=State$1.SCRIPT_DATA_END_TAG_OPEN;break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(n)}}_stateScriptDataEndTagOpen(n){isAsciiLetter(n)?(this.state=State$1.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(n)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(n))}_stateScriptDataEndTagName(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(n))}_stateScriptDataEscapeStart(n){n===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(n))}_stateScriptDataEscapeStartDash(n){n===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(n))}_stateScriptDataEscaped(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateScriptDataEscapedDash(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}_stateScriptDataEscapedDashDash(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}_stateScriptDataEscapedLessThanSign(n){n===CODE_POINTS.SOLIDUS?this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(n)?(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(n)):(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}_stateScriptDataEscapedEndTagOpen(n){isAsciiLetter(n)?(this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(n)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}_stateScriptDataEscapedEndTagName(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}_stateScriptDataDoubleEscapeStart(n){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let l=0;l<SEQUENCES.SCRIPT.length;l++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}_stateScriptDataDoubleEscaped(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateScriptDataDoubleEscapedDash(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}_stateScriptDataDoubleEscapedDashDash(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}_stateScriptDataDoubleEscapedLessThanSign(n){n===CODE_POINTS.SOLIDUS?(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}_stateScriptDataDoubleEscapeEnd(n){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let l=0;l<SEQUENCES.SCRIPT.length;l++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}_stateBeforeAttributeName(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case CODE_POINTS.EQUALS_SIGN:{this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=State$1.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(n)}}_stateAttributeName(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this._leaveAttrName(),this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:{this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(n);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+=REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(n)?toAsciiLower(n):n)}}_stateAfterAttributeName(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.EQUALS_SIGN:{this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(n)}}_stateBeforeAttributeValue(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this.state=State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingAttributeValue),this.state=State$1.DATA,this.emitCurrentTagToken();break}default:this.state=State$1.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(n)}}_stateAttributeValueDoubleQuoted(n){switch(n){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}_stateAttributeValueSingleQuoted(n){switch(n){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}_stateAttributeValueUnquoted(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.AMPERSAND:{this._startCharacterReference();break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:{this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(n);break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}_stateAfterAttributeValueQuoted(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}_stateSelfClosingStartTag(n){switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{const l=this.currentToken;l.selfClosing=!0,this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.unexpectedSolidusInTag),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}_stateBogusComment(n){const l=this.currentToken;switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(l);break}case CODE_POINTS.EOF:{this.emitCurrentComment(l),this._emitEOFToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.data+=REPLACEMENT_CHARACTER;break}default:l.data+=String.fromCodePoint(n)}}_stateMarkupDeclarationOpen(n){this._consumeSequenceIfMatch(SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(SEQUENCES.DASH_DASH.length+1),this.state=State$1.COMMENT_START):this._consumeSequenceIfMatch(SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES.DOCTYPE.length+1),this.state=State$1.DOCTYPE):this._consumeSequenceIfMatch(SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=State$1.CDATA_SECTION:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=State$1.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(n))}_stateCommentStart(n){switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_START_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA;const l=this.currentToken;this.emitCurrentComment(l);break}default:this.state=State$1.COMMENT,this._stateComment(n)}}_stateCommentStartDash(n){const l=this.currentToken;switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA,this.emitCurrentComment(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(l),this._emitEOFToken();break}default:l.data+="-",this.state=State$1.COMMENT,this._stateComment(n)}}_stateComment(n){const l=this.currentToken;switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.LESS_THAN_SIGN:{l.data+="<",this.state=State$1.COMMENT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.data+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(l),this._emitEOFToken();break}default:l.data+=String.fromCodePoint(n)}}_stateCommentLessThanSign(n){const l=this.currentToken;switch(n){case CODE_POINTS.EXCLAMATION_MARK:{l.data+="!",this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG;break}case CODE_POINTS.LESS_THAN_SIGN:{l.data+="<";break}default:this.state=State$1.COMMENT,this._stateComment(n)}}_stateCommentLessThanSignBang(n){n===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=State$1.COMMENT,this._stateComment(n))}_stateCommentLessThanSignBangDash(n){n===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=State$1.COMMENT_END_DASH,this._stateCommentEndDash(n))}_stateCommentLessThanSignBangDashDash(n){n!==CODE_POINTS.GREATER_THAN_SIGN&&n!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=State$1.COMMENT_END,this._stateCommentEnd(n)}_stateCommentEndDash(n){const l=this.currentToken;switch(n){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(l),this._emitEOFToken();break}default:l.data+="-",this.state=State$1.COMMENT,this._stateComment(n)}}_stateCommentEnd(n){const l=this.currentToken;switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(l);break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.COMMENT_END_BANG;break}case CODE_POINTS.HYPHEN_MINUS:{l.data+="-";break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(l),this._emitEOFToken();break}default:l.data+="--",this.state=State$1.COMMENT,this._stateComment(n)}}_stateCommentEndBang(n){const l=this.currentToken;switch(n){case CODE_POINTS.HYPHEN_MINUS:{l.data+="--!",this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.incorrectlyClosedComment),this.state=State$1.DATA,this.emitCurrentComment(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(l),this._emitEOFToken();break}default:l.data+="--!",this.state=State$1.COMMENT,this._stateComment(n)}}_stateDoctype(n){switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const l=this.currentToken;l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n)}}_stateBeforeDoctypeName(n){if(isAsciiUpper(n))this._createDoctypeToken(String.fromCharCode(toAsciiLower(n))),this.state=State$1.DOCTYPE_NAME;else switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken(REPLACEMENT_CHARACTER),this.state=State$1.DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const l=this.currentToken;l.forceQuirks=!0,this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const l=this.currentToken;l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(n)),this.state=State$1.DOCTYPE_NAME}}_stateDoctypeName(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.AFTER_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.name+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:l.name+=String.fromCodePoint(isAsciiUpper(n)?toAsciiLower(n):n)}}_stateAfterDoctypeName(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(SEQUENCES.PUBLIC,!1)?this.state=State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(SEQUENCES.SYSTEM,!1)?this.state=State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n))}}_stateAfterDoctypePublicKeyword(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),l.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),l.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),l.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateBeforeDoctypePublicIdentifier(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{l.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{l.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),l.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateDoctypePublicIdentifierDoubleQuoted(n){const l=this.currentToken;switch(n){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),l.forceQuirks=!0,this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:l.publicId+=String.fromCodePoint(n)}}_stateDoctypePublicIdentifierSingleQuoted(n){const l=this.currentToken;switch(n){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),l.forceQuirks=!0,this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:l.publicId+=String.fromCodePoint(n)}}_stateAfterDoctypePublicIdentifier(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateBetweenDoctypePublicAndSystemIdentifiers(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.QUOTATION_MARK:{l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateAfterDoctypeSystemKeyword(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateBeforeDoctypeSystemIdentifier(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{l.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(l);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),l.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateDoctypeSystemIdentifierDoubleQuoted(n){const l=this.currentToken;switch(n){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),l.forceQuirks=!0,this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:l.systemId+=String.fromCodePoint(n)}}_stateDoctypeSystemIdentifierSingleQuoted(n){const l=this.currentToken;switch(n){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),l.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),l.forceQuirks=!0,this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:l.systemId+=String.fromCodePoint(n)}}_stateAfterDoctypeSystemIdentifier(n){const l=this.currentToken;switch(n){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),l.forceQuirks=!0,this.emitCurrentDoctype(l),this._emitEOFToken();break}default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}_stateBogusDoctype(n){const l=this.currentToken;switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(l),this.state=State$1.DATA;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter);break}case CODE_POINTS.EOF:{this.emitCurrentDoctype(l),this._emitEOFToken();break}}}_stateCdataSection(n){switch(n){case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=State$1.CDATA_SECTION_BRACKET;break}case CODE_POINTS.EOF:{this._err(ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(n)}}_stateCdataSectionBracket(n){n===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=State$1.CDATA_SECTION_END:(this._emitChars("]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(n))}_stateCdataSectionEnd(n){switch(n){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA;break}case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(n)}}_stateCharacterReference(){let n=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(n<0)if(this.preprocessor.lastChunkWritten)n=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}n===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&isAsciiAlphaNumeric(this.preprocessor.peek(1))?State$1.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(n){isAsciiAlphaNumeric(n)?this._flushCodePointConsumedAsCharacterReference(n):(n===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this.state=this.returnState,this._callState(n))}}const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENTS_HTML=new Set([TAG_ID.APPLET,TAG_ID.CAPTION,TAG_ID.HTML,TAG_ID.MARQUEE,TAG_ID.OBJECT,TAG_ID.TABLE,TAG_ID.TD,TAG_ID.TEMPLATE,TAG_ID.TH]),SCOPING_ELEMENTS_HTML_LIST=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.OL,TAG_ID.UL]),SCOPING_ELEMENTS_HTML_BUTTON=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.BUTTON]),SCOPING_ELEMENTS_MATHML=new Set([TAG_ID.ANNOTATION_XML,TAG_ID.MI,TAG_ID.MN,TAG_ID.MO,TAG_ID.MS,TAG_ID.MTEXT]),SCOPING_ELEMENTS_SVG=new Set([TAG_ID.DESC,TAG_ID.FOREIGN_OBJECT,TAG_ID.TITLE]),TABLE_ROW_CONTEXT=new Set([TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_BODY_CONTEXT=new Set([TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CONTEXT=new Set([TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CELLS=new Set([TAG_ID.TD,TAG_ID.TH]);class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(n,l,d){this.treeAdapter=l,this.handler=d,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=TAG_ID.UNKNOWN,this.current=n}_indexOf(n){return this.items.lastIndexOf(n,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(n,l){this.stackTop++,this.items[this.stackTop]=n,this.current=n,this.tagIDs[this.stackTop]=l,this.currentTagId=l,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(n,l,!0)}pop(){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!0)}replace(n,l){const d=this._indexOf(n);this.items[d]=l,d===this.stackTop&&(this.current=l)}insertAfter(n,l,d){const g=this._indexOf(n)+1;this.items.splice(g,0,l),this.tagIDs.splice(g,0,d),this.stackTop++,g===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,g===this.stackTop)}popUntilTagNamePopped(n){let l=this.stackTop+1;do l=this.tagIDs.lastIndexOf(n,l-1);while(l>0&&this.treeAdapter.getNamespaceURI(this.items[l])!==NS.HTML);this.shortenToLength(Math.max(l,0))}shortenToLength(n){for(;this.stackTop>=n;){const l=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(l,this.stackTop<n)}}popUntilElementPopped(n){const l=this._indexOf(n);this.shortenToLength(Math.max(l,0))}popUntilPopped(n,l){const d=this._indexOfTagNames(n,l);this.shortenToLength(Math.max(d,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(NUMBERED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(n,l){for(let d=this.stackTop;d>=0;d--)if(n.has(this.tagIDs[d])&&this.treeAdapter.getNamespaceURI(this.items[d])===l)return d;return-1}clearBackTo(n,l){const d=this._indexOfTagNames(n,l);this.shortenToLength(d+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(n){const l=this._indexOf(n);l>=0&&(l===this.stackTop?this.pop():(this.items.splice(l,1),this.tagIDs.splice(l,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(n){return this._indexOf(n)>-1}getCommonAncestor(n){const l=this._indexOf(n)-1;return l>=0?this.items[l]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===TAG_ID.HTML}hasInDynamicScope(n,l){for(let d=this.stackTop;d>=0;d--){const g=this.tagIDs[d];switch(this.treeAdapter.getNamespaceURI(this.items[d])){case NS.HTML:{if(g===n)return!0;if(l.has(g))return!1;break}case NS.SVG:{if(SCOPING_ELEMENTS_SVG.has(g))return!1;break}case NS.MATHML:{if(SCOPING_ELEMENTS_MATHML.has(g))return!1;break}}}return!0}hasInScope(n){return this.hasInDynamicScope(n,SCOPING_ELEMENTS_HTML)}hasInListItemScope(n){return this.hasInDynamicScope(n,SCOPING_ELEMENTS_HTML_LIST)}hasInButtonScope(n){return this.hasInDynamicScope(n,SCOPING_ELEMENTS_HTML_BUTTON)}hasNumberedHeaderInScope(){for(let n=this.stackTop;n>=0;n--){const l=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case NS.HTML:{if(NUMBERED_HEADERS.has(l))return!0;if(SCOPING_ELEMENTS_HTML.has(l))return!1;break}case NS.SVG:{if(SCOPING_ELEMENTS_SVG.has(l))return!1;break}case NS.MATHML:{if(SCOPING_ELEMENTS_MATHML.has(l))return!1;break}}}return!0}hasInTableScope(n){for(let l=this.stackTop;l>=0;l--)if(this.treeAdapter.getNamespaceURI(this.items[l])===NS.HTML)switch(this.tagIDs[l]){case n:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===NS.HTML)switch(this.tagIDs[n]){case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasInSelectScope(n){for(let l=this.stackTop;l>=0;l--)if(this.treeAdapter.getNamespaceURI(this.items[l])===NS.HTML)switch(this.tagIDs[l]){case n:return!0;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(n){for(;this.currentTagId!==void 0&&this.currentTagId!==n&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}const NOAH_ARK_CAPACITY=3;var EntryType;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(EntryType||(EntryType={}));const MARKER={type:EntryType.Marker};class FormattingElementList{constructor(n){this.treeAdapter=n,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(n,l){const d=[],g=l.length,jn=this.treeAdapter.getTagName(n),Un=this.treeAdapter.getNamespaceURI(n);for(let zn=0;zn<this.entries.length;zn++){const qn=this.entries[zn];if(qn.type===EntryType.Marker)break;const{element:Kn}=qn;if(this.treeAdapter.getTagName(Kn)===jn&&this.treeAdapter.getNamespaceURI(Kn)===Un){const Xn=this.treeAdapter.getAttrList(Kn);Xn.length===g&&d.push({idx:zn,attrs:Xn})}}return d}_ensureNoahArkCondition(n){if(this.entries.length<NOAH_ARK_CAPACITY)return;const l=this.treeAdapter.getAttrList(n),d=this._getNoahArkConditionCandidates(n,l);if(d.length<NOAH_ARK_CAPACITY)return;const g=new Map(l.map(Un=>[Un.name,Un.value]));let jn=0;for(let Un=0;Un<d.length;Un++){const zn=d[Un];zn.attrs.every(qn=>g.get(qn.name)===qn.value)&&(jn+=1,jn>=NOAH_ARK_CAPACITY&&this.entries.splice(zn.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(n,l){this._ensureNoahArkCondition(n),this.entries.unshift({type:EntryType.Element,element:n,token:l})}insertElementAfterBookmark(n,l){const d=this.entries.indexOf(this.bookmark);this.entries.splice(d,0,{type:EntryType.Element,element:n,token:l})}removeEntry(n){const l=this.entries.indexOf(n);l!==-1&&this.entries.splice(l,1)}clearToLastMarker(){const n=this.entries.indexOf(MARKER);n===-1?this.entries.length=0:this.entries.splice(0,n+1)}getElementEntryInScopeWithTagName(n){const l=this.entries.find(d=>d.type===EntryType.Marker||this.treeAdapter.getTagName(d.element)===n);return l&&l.type===EntryType.Element?l:null}getElementEntry(n){return this.entries.find(l=>l.type===EntryType.Element&&l.element===n)}}const defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,n,l){return{nodeName:e,tagName:e,attrs:l,namespaceURI:n,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,n){e.childNodes.push(n),n.parentNode=e},insertBefore(e,n,l){const d=e.childNodes.indexOf(l);e.childNodes.splice(d,0,n),n.parentNode=e},setTemplateContent(e,n){e.content=n},getTemplateContent(e){return e.content},setDocumentType(e,n,l,d){const g=e.childNodes.find(jn=>jn.nodeName==="#documentType");if(g)g.name=n,g.publicId=l,g.systemId=d;else{const jn={nodeName:"#documentType",name:n,publicId:l,systemId:d,parentNode:null};defaultTreeAdapter.appendChild(e,jn)}},setDocumentMode(e,n){e.mode=n},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const n=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(n,1),e.parentNode=null}},insertText(e,n){if(e.childNodes.length>0){const l=e.childNodes[e.childNodes.length-1];if(defaultTreeAdapter.isTextNode(l)){l.value+=n;return}}defaultTreeAdapter.appendChild(e,defaultTreeAdapter.createTextNode(n))},insertTextBefore(e,n,l){const d=e.childNodes[e.childNodes.indexOf(l)-1];d&&defaultTreeAdapter.isTextNode(d)?d.value+=n:defaultTreeAdapter.insertBefore(e,defaultTreeAdapter.createTextNode(n),l)},adoptAttributes(e,n){const l=new Set(e.attrs.map(d=>d.name));for(let d=0;d<n.length;d++)l.has(n[d].name)||e.attrs.push(n[d])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,n){e.sourceCodeLocation=n},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,n){e.sourceCodeLocation={...e.sourceCodeLocation,...n}}},VALID_DOCTYPE_NAME="html",VALID_SYSTEM_ID="about:legacy-compat",QUIRKS_MODE_SYSTEM_ID="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(e,n){return n.some(l=>e.startsWith(l))}function isConforming(e){return e.name===VALID_DOCTYPE_NAME&&e.publicId===null&&(e.systemId===null||e.systemId===VALID_SYSTEM_ID)}function getDocumentMode(e){if(e.name!==VALID_DOCTYPE_NAME)return DOCUMENT_MODE.QUIRKS;const{systemId:n}=e;if(n&&n.toLowerCase()===QUIRKS_MODE_SYSTEM_ID)return DOCUMENT_MODE.QUIRKS;let{publicId:l}=e;if(l!==null){if(l=l.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(l))return DOCUMENT_MODE.QUIRKS;let d=n===null?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(l,d))return DOCUMENT_MODE.QUIRKS;if(d=n===null?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(l,d))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}const MIME_TYPES={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},DEFINITION_URL_ATTR="definitionurl",ADJUSTED_DEFINITION_URL_ATTR="definitionURL",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function causesExit(e){const n=e.tagID;return n===TAG_ID.FONT&&e.attrs.some(({name:d})=>d===ATTRS.COLOR||d===ATTRS.SIZE||d===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(n)}function adjustTokenMathMLAttrs(e){for(let n=0;n<e.attrs.length;n++)if(e.attrs[n].name===DEFINITION_URL_ATTR){e.attrs[n].name=ADJUSTED_DEFINITION_URL_ATTR;break}}function adjustTokenSVGAttrs(e){for(let n=0;n<e.attrs.length;n++){const l=SVG_ATTRS_ADJUSTMENT_MAP.get(e.attrs[n].name);l!=null&&(e.attrs[n].name=l)}}function adjustTokenXMLAttrs(e){for(let n=0;n<e.attrs.length;n++){const l=XML_ATTRS_ADJUSTMENT_MAP.get(e.attrs[n].name);l&&(e.attrs[n].prefix=l.prefix,e.attrs[n].name=l.name,e.attrs[n].namespace=l.namespace)}}function adjustTokenSVGTagName(e){const n=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(e.tagName);n!=null&&(e.tagName=n,e.tagID=getTagID(e.tagName))}function isMathMLTextIntegrationPoint(e,n){return n===NS.MATHML&&(e===TAG_ID.MI||e===TAG_ID.MO||e===TAG_ID.MN||e===TAG_ID.MS||e===TAG_ID.MTEXT)}function isHtmlIntegrationPoint(e,n,l){if(n===NS.MATHML&&e===TAG_ID.ANNOTATION_XML){for(let d=0;d<l.length;d++)if(l[d].name===ATTRS.ENCODING){const g=l[d].value.toLowerCase();return g===MIME_TYPES.TEXT_HTML||g===MIME_TYPES.APPLICATION_XML}}return n===NS.SVG&&(e===TAG_ID.FOREIGN_OBJECT||e===TAG_ID.DESC||e===TAG_ID.TITLE)}function isIntegrationPoint(e,n,l,d){return(!d||d===NS.HTML)&&isHtmlIntegrationPoint(e,n,l)||(!d||d===NS.MATHML)&&isMathMLTextIntegrationPoint(e,n)}const HIDDEN_INPUT_TYPE="hidden",AA_OUTER_LOOP_ITER=8,AA_INNER_LOOP_ITER=3;var InsertionMode;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};class Parser{constructor(n,l,d=null,g=null){this.fragmentContext=d,this.scriptHandler=g,this.currentToken=null,this.stopped=!1,this.insertionMode=InsertionMode.INITIAL,this.originalInsertionMode=InsertionMode.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...defaultParserOptions,...n},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=l??this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=d?getTagID(this.treeAdapter.getTagName(d)):TAG_ID.UNKNOWN,this._setContextModes(d??this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(n,l){const d=new this(l);return d.tokenizer.write(n,!0),d.document}static getFragmentParser(n,l){const d={...defaultParserOptions,...l};n??(n=d.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]));const g=d.treeAdapter.createElement("documentmock",NS.HTML,[]),jn=new this(d,g,n);return jn.fragmentContextID===TAG_ID.TEMPLATE&&jn.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),jn._initTokenizerForFragmentParsing(),jn._insertFakeRootElement(),jn._resetInsertionMode(),jn._findFormInFragmentContext(),jn}getFragment(){const n=this.treeAdapter.getFirstChild(this.document),l=this.treeAdapter.createDocumentFragment();return this._adoptNodes(n,l),l}_err(n,l,d){var g;if(!this.onParseError)return;const jn=(g=n.location)!==null&&g!==void 0?g:BASE_LOC,Un={code:l,startLine:jn.startLine,startCol:jn.startCol,startOffset:jn.startOffset,endLine:d?jn.startLine:jn.endLine,endCol:d?jn.startCol:jn.endCol,endOffset:d?jn.startOffset:jn.endOffset};this.onParseError(Un)}onItemPush(n,l,d){var g,jn;(jn=(g=this.treeAdapter).onItemPush)===null||jn===void 0||jn.call(g,n),d&&this.openElements.stackTop>0&&this._setContextModes(n,l)}onItemPop(n,l){var d,g;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(n,this.currentToken),(g=(d=this.treeAdapter).onItemPop)===null||g===void 0||g.call(d,n,this.openElements.current),l){let jn,Un;this.openElements.stackTop===0&&this.fragmentContext?(jn=this.fragmentContext,Un=this.fragmentContextID):{current:jn,currentTagId:Un}=this.openElements,this._setContextModes(jn,Un)}}_setContextModes(n,l){const d=n===this.document||n&&this.treeAdapter.getNamespaceURI(n)===NS.HTML;this.currentNotInHTML=!d,this.tokenizer.inForeignNode=!d&&n!==void 0&&l!==void 0&&!this._isIntegrationPoint(l,n)}_switchToTextParsing(n,l){this._insertElement(n,NS.HTML),this.tokenizer.state=l,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let n=this.fragmentContext;for(;n;){if(this.treeAdapter.getTagName(n)===TAG_NAMES.FORM){this.formElement=n;break}n=this.treeAdapter.getParentNode(n)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==NS.HTML))switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:{this.tokenizer.state=TokenizerMode.RCDATA;break}case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:{this.tokenizer.state=TokenizerMode.RAWTEXT;break}case TAG_ID.SCRIPT:{this.tokenizer.state=TokenizerMode.SCRIPT_DATA;break}case TAG_ID.PLAINTEXT:{this.tokenizer.state=TokenizerMode.PLAINTEXT;break}}}_setDocumentType(n){const l=n.name||"",d=n.publicId||"",g=n.systemId||"";if(this.treeAdapter.setDocumentType(this.document,l,d,g),n.location){const Un=this.treeAdapter.getChildNodes(this.document).find(zn=>this.treeAdapter.isDocumentTypeNode(zn));Un&&this.treeAdapter.setNodeSourceCodeLocation(Un,n.location)}}_attachElementToTree(n,l){if(this.options.sourceCodeLocationInfo){const d=l&&{...l,startTag:l};this.treeAdapter.setNodeSourceCodeLocation(n,d)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(n);else{const d=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(d??this.document,n)}}_appendElement(n,l){const d=this.treeAdapter.createElement(n.tagName,l,n.attrs);this._attachElementToTree(d,n.location)}_insertElement(n,l){const d=this.treeAdapter.createElement(n.tagName,l,n.attrs);this._attachElementToTree(d,n.location),this.openElements.push(d,n.tagID)}_insertFakeElement(n,l){const d=this.treeAdapter.createElement(n,NS.HTML,[]);this._attachElementToTree(d,null),this.openElements.push(d,l)}_insertTemplate(n){const l=this.treeAdapter.createElement(n.tagName,NS.HTML,n.attrs),d=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(l,d),this._attachElementToTree(l,n.location),this.openElements.push(l,n.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(d,null)}_insertFakeRootElement(){const n=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null),this.treeAdapter.appendChild(this.openElements.current,n),this.openElements.push(n,TAG_ID.HTML)}_appendCommentNode(n,l){const d=this.treeAdapter.createCommentNode(n.data);this.treeAdapter.appendChild(l,d),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(d,n.location)}_insertCharacters(n){let l,d;if(this._shouldFosterParentOnInsertion()?({parent:l,beforeElement:d}=this._findFosterParentingLocation(),d?this.treeAdapter.insertTextBefore(l,n.chars,d):this.treeAdapter.insertText(l,n.chars)):(l=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(l,n.chars)),!n.location)return;const g=this.treeAdapter.getChildNodes(l),jn=d?g.lastIndexOf(d):g.length,Un=g[jn-1];if(this.treeAdapter.getNodeSourceCodeLocation(Un)){const{endLine:qn,endCol:Kn,endOffset:Xn}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(Un,{endLine:qn,endCol:Kn,endOffset:Xn})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(Un,n.location)}_adoptNodes(n,l){for(let d=this.treeAdapter.getFirstChild(n);d;d=this.treeAdapter.getFirstChild(n))this.treeAdapter.detachNode(d),this.treeAdapter.appendChild(l,d)}_setEndLocation(n,l){if(this.treeAdapter.getNodeSourceCodeLocation(n)&&l.location){const d=l.location,g=this.treeAdapter.getTagName(n),jn=l.type===TokenType.END_TAG&&g===l.tagName?{endTag:{...d},endLine:d.endLine,endCol:d.endCol,endOffset:d.endOffset}:{endLine:d.startLine,endCol:d.startCol,endOffset:d.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(n,jn)}}shouldProcessStartTagTokenInForeignContent(n){if(!this.currentNotInHTML)return!1;let l,d;return this.openElements.stackTop===0&&this.fragmentContext?(l=this.fragmentContext,d=this.fragmentContextID):{current:l,currentTagId:d}=this.openElements,n.tagID===TAG_ID.SVG&&this.treeAdapter.getTagName(l)===TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(l)===NS.MATHML?!1:this.tokenizer.inForeignNode||(n.tagID===TAG_ID.MGLYPH||n.tagID===TAG_ID.MALIGNMARK)&&d!==void 0&&!this._isIntegrationPoint(d,l,NS.HTML)}_processToken(n){switch(n.type){case TokenType.CHARACTER:{this.onCharacter(n);break}case TokenType.NULL_CHARACTER:{this.onNullCharacter(n);break}case TokenType.COMMENT:{this.onComment(n);break}case TokenType.DOCTYPE:{this.onDoctype(n);break}case TokenType.START_TAG:{this._processStartTag(n);break}case TokenType.END_TAG:{this.onEndTag(n);break}case TokenType.EOF:{this.onEof(n);break}case TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(n);break}}}_isIntegrationPoint(n,l,d){const g=this.treeAdapter.getNamespaceURI(l),jn=this.treeAdapter.getAttrList(l);return isIntegrationPoint(n,g,jn,d)}_reconstructActiveFormattingElements(){const n=this.activeFormattingElements.entries.length;if(n){const l=this.activeFormattingElements.entries.findIndex(g=>g.type===EntryType.Marker||this.openElements.contains(g.element)),d=l===-1?n-1:l-1;for(let g=d;g>=0;g--){const jn=this.activeFormattingElements.entries[g];this._insertElement(jn.token,this.treeAdapter.getNamespaceURI(jn.element)),jn.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let n=this.openElements.stackTop;n>=0;n--)switch(n===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[n]){case TAG_ID.TR:{this.insertionMode=InsertionMode.IN_ROW;return}case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:{this.insertionMode=InsertionMode.IN_TABLE_BODY;return}case TAG_ID.CAPTION:{this.insertionMode=InsertionMode.IN_CAPTION;return}case TAG_ID.COLGROUP:{this.insertionMode=InsertionMode.IN_COLUMN_GROUP;return}case TAG_ID.TABLE:{this.insertionMode=InsertionMode.IN_TABLE;return}case TAG_ID.BODY:{this.insertionMode=InsertionMode.IN_BODY;return}case TAG_ID.FRAMESET:{this.insertionMode=InsertionMode.IN_FRAMESET;return}case TAG_ID.SELECT:{this._resetInsertionModeForSelect(n);return}case TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case TAG_ID.HTML:{this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD;return}case TAG_ID.TD:case TAG_ID.TH:{if(n>0){this.insertionMode=InsertionMode.IN_CELL;return}break}case TAG_ID.HEAD:{if(n>0){this.insertionMode=InsertionMode.IN_HEAD;return}break}}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(n){if(n>0)for(let l=n-1;l>0;l--){const d=this.openElements.tagIDs[l];if(d===TAG_ID.TEMPLATE)break;if(d===TAG_ID.TABLE){this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE;return}}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(n){return TABLE_STRUCTURE_TAGS.has(n)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let n=this.openElements.stackTop;n>=0;n--){const l=this.openElements.items[n];switch(this.openElements.tagIDs[n]){case TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(l)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(l),beforeElement:null};break}case TAG_ID.TABLE:{const d=this.treeAdapter.getParentNode(l);return d?{parent:d,beforeElement:l}:{parent:this.openElements.items[n-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(n){const l=this._findFosterParentingLocation();l.beforeElement?this.treeAdapter.insertBefore(l.parent,n,l.beforeElement):this.treeAdapter.appendChild(l.parent,n)}_isSpecialElement(n,l){const d=this.treeAdapter.getNamespaceURI(n);return SPECIAL_ELEMENTS[d].has(l)}onCharacter(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){characterInForeignContent(this,n);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,n);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,n);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,n);break}case InsertionMode.IN_HEAD:{tokenInHead(this,n);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,n);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,n);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:{characterInBody(this,n);break}case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{this._insertCharacters(n);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,n);break}case InsertionMode.IN_TABLE_TEXT:{characterInTableText(this,n);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,n);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,n);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,n);break}}}onNullCharacter(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nullCharacterInForeignContent(this,n);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,n);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,n);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,n);break}case InsertionMode.IN_HEAD:{tokenInHead(this,n);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,n);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,n);break}case InsertionMode.TEXT:{this._insertCharacters(n);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,n);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,n);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,n);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,n);break}}}onComment(n){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,n);return}switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{appendComment(this,n);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,n);break}case InsertionMode.AFTER_BODY:{appendCommentToRootHtmlElement(this,n);break}case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{appendCommentToDocument(this,n);break}}}onDoctype(n){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:{doctypeInInitialMode(this,n);break}case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:{this._err(n,ERR.misplacedDoctype);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,n);break}}}onStartTag(n){this.skipNextNewLine=!1,this.currentToken=n,this._processStartTag(n),n.selfClosing&&!n.ackSelfClosing&&this._err(n,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(n){this.shouldProcessStartTagTokenInForeignContent(n)?startTagInForeignContent(this,n):this._startTagOutsideForeignContent(n)}_startTagOutsideForeignContent(n){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,n);break}case InsertionMode.BEFORE_HTML:{startTagBeforeHtml(this,n);break}case InsertionMode.BEFORE_HEAD:{startTagBeforeHead(this,n);break}case InsertionMode.IN_HEAD:{startTagInHead(this,n);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{startTagInHeadNoScript(this,n);break}case InsertionMode.AFTER_HEAD:{startTagAfterHead(this,n);break}case InsertionMode.IN_BODY:{startTagInBody(this,n);break}case InsertionMode.IN_TABLE:{startTagInTable(this,n);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,n);break}case InsertionMode.IN_CAPTION:{startTagInCaption(this,n);break}case InsertionMode.IN_COLUMN_GROUP:{startTagInColumnGroup(this,n);break}case InsertionMode.IN_TABLE_BODY:{startTagInTableBody(this,n);break}case InsertionMode.IN_ROW:{startTagInRow(this,n);break}case InsertionMode.IN_CELL:{startTagInCell(this,n);break}case InsertionMode.IN_SELECT:{startTagInSelect(this,n);break}case InsertionMode.IN_SELECT_IN_TABLE:{startTagInSelectInTable(this,n);break}case InsertionMode.IN_TEMPLATE:{startTagInTemplate(this,n);break}case InsertionMode.AFTER_BODY:{startTagAfterBody(this,n);break}case InsertionMode.IN_FRAMESET:{startTagInFrameset(this,n);break}case InsertionMode.AFTER_FRAMESET:{startTagAfterFrameset(this,n);break}case InsertionMode.AFTER_AFTER_BODY:{startTagAfterAfterBody(this,n);break}case InsertionMode.AFTER_AFTER_FRAMESET:{startTagAfterAfterFrameset(this,n);break}}}onEndTag(n){this.skipNextNewLine=!1,this.currentToken=n,this.currentNotInHTML?endTagInForeignContent(this,n):this._endTagOutsideForeignContent(n)}_endTagOutsideForeignContent(n){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,n);break}case InsertionMode.BEFORE_HTML:{endTagBeforeHtml(this,n);break}case InsertionMode.BEFORE_HEAD:{endTagBeforeHead(this,n);break}case InsertionMode.IN_HEAD:{endTagInHead(this,n);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{endTagInHeadNoScript(this,n);break}case InsertionMode.AFTER_HEAD:{endTagAfterHead(this,n);break}case InsertionMode.IN_BODY:{endTagInBody(this,n);break}case InsertionMode.TEXT:{endTagInText(this,n);break}case InsertionMode.IN_TABLE:{endTagInTable(this,n);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,n);break}case InsertionMode.IN_CAPTION:{endTagInCaption(this,n);break}case InsertionMode.IN_COLUMN_GROUP:{endTagInColumnGroup(this,n);break}case InsertionMode.IN_TABLE_BODY:{endTagInTableBody(this,n);break}case InsertionMode.IN_ROW:{endTagInRow(this,n);break}case InsertionMode.IN_CELL:{endTagInCell(this,n);break}case InsertionMode.IN_SELECT:{endTagInSelect(this,n);break}case InsertionMode.IN_SELECT_IN_TABLE:{endTagInSelectInTable(this,n);break}case InsertionMode.IN_TEMPLATE:{endTagInTemplate(this,n);break}case InsertionMode.AFTER_BODY:{endTagAfterBody(this,n);break}case InsertionMode.IN_FRAMESET:{endTagInFrameset(this,n);break}case InsertionMode.AFTER_FRAMESET:{endTagAfterFrameset(this,n);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,n);break}}}onEof(n){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,n);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,n);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,n);break}case InsertionMode.IN_HEAD:{tokenInHead(this,n);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,n);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,n);break}case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{eofInBody(this,n);break}case InsertionMode.TEXT:{eofInText(this,n);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,n);break}case InsertionMode.IN_TEMPLATE:{eofInTemplate(this,n);break}case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{stopParsing(this,n);break}}}onWhitespaceCharacter(n){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,n.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(n.chars.length===1)return;n.chars=n.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(n);return}switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{this._insertCharacters(n);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{whitespaceCharacterInBody(this,n);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,n);break}case InsertionMode.IN_TABLE_TEXT:{whitespaceCharacterInTableText(this,n);break}}}}function aaObtainFormattingElementEntry(e,n){let l=e.activeFormattingElements.getElementEntryInScopeWithTagName(n.tagName);return l?e.openElements.contains(l.element)?e.openElements.hasInScope(n.tagID)||(l=null):(e.activeFormattingElements.removeEntry(l),l=null):genericEndTagInBody(e,n),l}function aaObtainFurthestBlock(e,n){let l=null,d=e.openElements.stackTop;for(;d>=0;d--){const g=e.openElements.items[d];if(g===n.element)break;e._isSpecialElement(g,e.openElements.tagIDs[d])&&(l=g)}return l||(e.openElements.shortenToLength(Math.max(d,0)),e.activeFormattingElements.removeEntry(n)),l}function aaInnerLoop(e,n,l){let d=n,g=e.openElements.getCommonAncestor(n);for(let jn=0,Un=g;Un!==l;jn++,Un=g){g=e.openElements.getCommonAncestor(Un);const zn=e.activeFormattingElements.getElementEntry(Un),qn=zn&&jn>=AA_INNER_LOOP_ITER;!zn||qn?(qn&&e.activeFormattingElements.removeEntry(zn),e.openElements.remove(Un)):(Un=aaRecreateElementFromEntry(e,zn),d===n&&(e.activeFormattingElements.bookmark=zn),e.treeAdapter.detachNode(d),e.treeAdapter.appendChild(Un,d),d=Un)}return d}function aaRecreateElementFromEntry(e,n){const l=e.treeAdapter.getNamespaceURI(n.element),d=e.treeAdapter.createElement(n.token.tagName,l,n.token.attrs);return e.openElements.replace(n.element,d),n.element=d,d}function aaInsertLastNodeInCommonAncestor(e,n,l){const d=e.treeAdapter.getTagName(n),g=getTagID(d);if(e._isElementCausesFosterParenting(g))e._fosterParentElement(l);else{const jn=e.treeAdapter.getNamespaceURI(n);g===TAG_ID.TEMPLATE&&jn===NS.HTML&&(n=e.treeAdapter.getTemplateContent(n)),e.treeAdapter.appendChild(n,l)}}function aaReplaceFormattingElement(e,n,l){const d=e.treeAdapter.getNamespaceURI(l.element),{token:g}=l,jn=e.treeAdapter.createElement(g.tagName,d,g.attrs);e._adoptNodes(n,jn),e.treeAdapter.appendChild(n,jn),e.activeFormattingElements.insertElementAfterBookmark(jn,g),e.activeFormattingElements.removeEntry(l),e.openElements.remove(l.element),e.openElements.insertAfter(n,jn,g.tagID)}function callAdoptionAgency(e,n){for(let l=0;l<AA_OUTER_LOOP_ITER;l++){const d=aaObtainFormattingElementEntry(e,n);if(!d)break;const g=aaObtainFurthestBlock(e,d);if(!g)break;e.activeFormattingElements.bookmark=d;const jn=aaInnerLoop(e,g,d.element),Un=e.openElements.getCommonAncestor(d.element);e.treeAdapter.detachNode(jn),Un&&aaInsertLastNodeInCommonAncestor(e,Un,jn),aaReplaceFormattingElement(e,g,d)}}function appendComment(e,n){e._appendCommentNode(n,e.openElements.currentTmplContentOrNode)}function appendCommentToRootHtmlElement(e,n){e._appendCommentNode(n,e.openElements.items[0])}function appendCommentToDocument(e,n){e._appendCommentNode(n,e.document)}function stopParsing(e,n){if(e.stopped=!0,n.location){const l=e.fragmentContext?0:2;for(let d=e.openElements.stackTop;d>=l;d--)e._setEndLocation(e.openElements.items[d],n);if(!e.fragmentContext&&e.openElements.stackTop>=0){const d=e.openElements.items[0],g=e.treeAdapter.getNodeSourceCodeLocation(d);if(g&&!g.endTag&&(e._setEndLocation(d,n),e.openElements.stackTop>=1)){const jn=e.openElements.items[1],Un=e.treeAdapter.getNodeSourceCodeLocation(jn);Un&&!Un.endTag&&e._setEndLocation(jn,n)}}}}function doctypeInInitialMode(e,n){e._setDocumentType(n);const l=n.forceQuirks?DOCUMENT_MODE.QUIRKS:getDocumentMode(n);isConforming(n)||e._err(n,ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,l),e.insertionMode=InsertionMode.BEFORE_HTML}function tokenInInitialMode(e,n){e._err(n,ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,DOCUMENT_MODE.QUIRKS),e.insertionMode=InsertionMode.BEFORE_HTML,e._processToken(n)}function startTagBeforeHtml(e,n){n.tagID===TAG_ID.HTML?(e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(e,n)}function endTagBeforeHtml(e,n){const l=n.tagID;(l===TAG_ID.HTML||l===TAG_ID.HEAD||l===TAG_ID.BODY||l===TAG_ID.BR)&&tokenBeforeHtml(e,n)}function tokenBeforeHtml(e,n){e._insertFakeRootElement(),e.insertionMode=InsertionMode.BEFORE_HEAD,e._processToken(n)}function startTagBeforeHead(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.HEAD:{e._insertElement(n,NS.HTML),e.headElement=e.openElements.current,e.insertionMode=InsertionMode.IN_HEAD;break}default:tokenBeforeHead(e,n)}}function endTagBeforeHead(e,n){const l=n.tagID;l===TAG_ID.HEAD||l===TAG_ID.BODY||l===TAG_ID.HTML||l===TAG_ID.BR?tokenBeforeHead(e,n):e._err(n,ERR.endTagWithoutMatchingOpenElement)}function tokenBeforeHead(e,n){e._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=InsertionMode.IN_HEAD,e._processToken(n)}function startTagInHead(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:{e._appendElement(n,NS.HTML),n.ackSelfClosing=!0;break}case TAG_ID.TITLE:{e._switchToTextParsing(n,TokenizerMode.RCDATA);break}case TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(n,TokenizerMode.RAWTEXT):(e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break}case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{e._switchToTextParsing(n,TokenizerMode.RAWTEXT);break}case TAG_ID.SCRIPT:{e._switchToTextParsing(n,TokenizerMode.SCRIPT_DATA);break}case TAG_ID.TEMPLATE:{e._insertTemplate(n),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break}case TAG_ID.HEAD:{e._err(n,ERR.misplacedStartTagForHeadElement);break}default:tokenInHead(e,n)}}function endTagInHead(e,n){switch(n.tagID){case TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=InsertionMode.AFTER_HEAD;break}case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:{tokenInHead(e,n);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}default:e._err(n,ERR.endTagWithoutMatchingOpenElement)}}function templateEndTagInHead(e,n){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==TAG_ID.TEMPLATE&&e._err(n,ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(n,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(e,n){e.openElements.pop(),e.insertionMode=InsertionMode.AFTER_HEAD,e._processToken(n)}function startTagInHeadNoScript(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{startTagInHead(e,n);break}case TAG_ID.NOSCRIPT:{e._err(n,ERR.nestedNoscriptInHead);break}default:tokenInHeadNoScript(e,n)}}function endTagInHeadNoScript(e,n){switch(n.tagID){case TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=InsertionMode.IN_HEAD;break}case TAG_ID.BR:{tokenInHeadNoScript(e,n);break}default:e._err(n,ERR.endTagWithoutMatchingOpenElement)}}function tokenInHeadNoScript(e,n){const l=n.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;e._err(n,l),e.openElements.pop(),e.insertionMode=InsertionMode.IN_HEAD,e._processToken(n)}function startTagAfterHead(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.BODY:{e._insertElement(n,NS.HTML),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_BODY;break}case TAG_ID.FRAMESET:{e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_FRAMESET;break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{e._err(n,ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,TAG_ID.HEAD),startTagInHead(e,n),e.openElements.remove(e.headElement);break}case TAG_ID.HEAD:{e._err(n,ERR.misplacedStartTagForHeadElement);break}default:tokenAfterHead(e,n)}}function endTagAfterHead(e,n){switch(n.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:{tokenAfterHead(e,n);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}default:e._err(n,ERR.endTagWithoutMatchingOpenElement)}}function tokenAfterHead(e,n){e._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,n)}function modeInBody(e,n){switch(n.type){case TokenType.CHARACTER:{characterInBody(e,n);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInBody(e,n);break}case TokenType.COMMENT:{appendComment(e,n);break}case TokenType.START_TAG:{startTagInBody(e,n);break}case TokenType.END_TAG:{endTagInBody(e,n);break}case TokenType.EOF:{eofInBody(e,n);break}}}function whitespaceCharacterInBody(e,n){e._reconstructActiveFormattingElements(),e._insertCharacters(n)}function characterInBody(e,n){e._reconstructActiveFormattingElements(),e._insertCharacters(n),e.framesetOk=!1}function htmlStartTagInBody(e,n){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],n.attrs)}function bodyStartTagInBody(e,n){const l=e.openElements.tryPeekProperlyNestedBodyElement();l&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(l,n.attrs))}function framesetStartTagInBody(e,n){const l=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&l&&(e.treeAdapter.detachNode(l),e.openElements.popAllUpToHtmlElement(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_FRAMESET)}function addressStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML)}function numberedHeaderStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&NUMBERED_HEADERS.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(n,NS.HTML)}function preStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function formStartTagInBody(e,n){const l=e.openElements.tmplCount>0;(!e.formElement||l)&&(e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML),l||(e.formElement=e.openElements.current))}function listItemStartTagInBody(e,n){e.framesetOk=!1;const l=n.tagID;for(let d=e.openElements.stackTop;d>=0;d--){const g=e.openElements.tagIDs[d];if(l===TAG_ID.LI&&g===TAG_ID.LI||(l===TAG_ID.DD||l===TAG_ID.DT)&&(g===TAG_ID.DD||g===TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(g),e.openElements.popUntilTagNamePopped(g);break}if(g!==TAG_ID.ADDRESS&&g!==TAG_ID.DIV&&g!==TAG_ID.P&&e._isSpecialElement(e.openElements.items[d],g))break}e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML)}function plaintextStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML),e.tokenizer.state=TokenizerMode.PLAINTEXT}function buttonStartTagInBody(e,n){e.openElements.hasInScope(TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML),e.framesetOk=!1}function aStartTagInBody(e,n){const l=e.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);l&&(callAdoptionAgency(e,n),e.openElements.remove(l.element),e.activeFormattingElements.removeEntry(l)),e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,n)}function bStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,n)}function nobrStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(e,n),e._reconstructActiveFormattingElements()),e._insertElement(n,NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,n)}function appletStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function tableStartTagInBody(e,n){e.treeAdapter.getDocumentMode(e.document)!==DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._insertElement(n,NS.HTML),e.framesetOk=!1,e.insertionMode=InsertionMode.IN_TABLE}function areaStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._appendElement(n,NS.HTML),e.framesetOk=!1,n.ackSelfClosing=!0}function isHiddenInput(e){const n=getTokenAttr(e,ATTRS.TYPE);return n!=null&&n.toLowerCase()===HIDDEN_INPUT_TYPE}function inputStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._appendElement(n,NS.HTML),isHiddenInput(n)||(e.framesetOk=!1),n.ackSelfClosing=!0}function paramStartTagInBody(e,n){e._appendElement(n,NS.HTML),n.ackSelfClosing=!0}function hrStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._appendElement(n,NS.HTML),e.framesetOk=!1,n.ackSelfClosing=!0}function imageStartTagInBody(e,n){n.tagName=TAG_NAMES.IMG,n.tagID=TAG_ID.IMG,areaStartTagInBody(e,n)}function textareaStartTagInBody(e,n){e._insertElement(n,NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=InsertionMode.TEXT}function xmpStartTagInBody(e,n){e.openElements.hasInButtonScope(TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(n,TokenizerMode.RAWTEXT)}function iframeStartTagInBody(e,n){e.framesetOk=!1,e._switchToTextParsing(n,TokenizerMode.RAWTEXT)}function rawTextStartTagInBody(e,n){e._switchToTextParsing(n,TokenizerMode.RAWTEXT)}function selectStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===InsertionMode.IN_TABLE||e.insertionMode===InsertionMode.IN_CAPTION||e.insertionMode===InsertionMode.IN_TABLE_BODY||e.insertionMode===InsertionMode.IN_ROW||e.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}function optgroupStartTagInBody(e,n){e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML)}function rbStartTagInBody(e,n){e.openElements.hasInScope(TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(n,NS.HTML)}function rtStartTagInBody(e,n){e.openElements.hasInScope(TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),e._insertElement(n,NS.HTML)}function mathStartTagInBody(e,n){e._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(n),adjustTokenXMLAttrs(n),n.selfClosing?e._appendElement(n,NS.MATHML):e._insertElement(n,NS.MATHML),n.ackSelfClosing=!0}function svgStartTagInBody(e,n){e._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(n),adjustTokenXMLAttrs(n),n.selfClosing?e._appendElement(n,NS.SVG):e._insertElement(n,NS.SVG),n.ackSelfClosing=!0}function genericStartTagInBody(e,n){e._reconstructActiveFormattingElements(),e._insertElement(n,NS.HTML)}function startTagInBody(e,n){switch(n.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{bStartTagInBody(e,n);break}case TAG_ID.A:{aStartTagInBody(e,n);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderStartTagInBody(e,n);break}case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressStartTagInBody(e,n);break}case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:{listItemStartTagInBody(e,n);break}case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:{areaStartTagInBody(e,n);break}case TAG_ID.HR:{hrStartTagInBody(e,n);break}case TAG_ID.RB:case TAG_ID.RTC:{rbStartTagInBody(e,n);break}case TAG_ID.RT:case TAG_ID.RP:{rtStartTagInBody(e,n);break}case TAG_ID.PRE:case TAG_ID.LISTING:{preStartTagInBody(e,n);break}case TAG_ID.XMP:{xmpStartTagInBody(e,n);break}case TAG_ID.SVG:{svgStartTagInBody(e,n);break}case TAG_ID.HTML:{htmlStartTagInBody(e,n);break}case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:{startTagInHead(e,n);break}case TAG_ID.BODY:{bodyStartTagInBody(e,n);break}case TAG_ID.FORM:{formStartTagInBody(e,n);break}case TAG_ID.NOBR:{nobrStartTagInBody(e,n);break}case TAG_ID.MATH:{mathStartTagInBody(e,n);break}case TAG_ID.TABLE:{tableStartTagInBody(e,n);break}case TAG_ID.INPUT:{inputStartTagInBody(e,n);break}case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:{paramStartTagInBody(e,n);break}case TAG_ID.IMAGE:{imageStartTagInBody(e,n);break}case TAG_ID.BUTTON:{buttonStartTagInBody(e,n);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletStartTagInBody(e,n);break}case TAG_ID.IFRAME:{iframeStartTagInBody(e,n);break}case TAG_ID.SELECT:{selectStartTagInBody(e,n);break}case TAG_ID.OPTION:case TAG_ID.OPTGROUP:{optgroupStartTagInBody(e,n);break}case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:{rawTextStartTagInBody(e,n);break}case TAG_ID.FRAMESET:{framesetStartTagInBody(e,n);break}case TAG_ID.TEXTAREA:{textareaStartTagInBody(e,n);break}case TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?rawTextStartTagInBody(e,n):genericStartTagInBody(e,n);break}case TAG_ID.PLAINTEXT:{plaintextStartTagInBody(e,n);break}case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(e,n)}}function bodyEndTagInBody(e,n){if(e.openElements.hasInScope(TAG_ID.BODY)&&(e.insertionMode=InsertionMode.AFTER_BODY,e.options.sourceCodeLocationInfo)){const l=e.openElements.tryPeekProperlyNestedBodyElement();l&&e._setEndLocation(l,n)}}function htmlEndTagInBody(e,n){e.openElements.hasInScope(TAG_ID.BODY)&&(e.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(e,n))}function addressEndTagInBody(e,n){const l=n.tagID;e.openElements.hasInScope(l)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(l))}function formEndTagInBody(e){const n=e.openElements.tmplCount>0,{formElement:l}=e;n||(e.formElement=null),(l||n)&&e.openElements.hasInScope(TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),n?e.openElements.popUntilTagNamePopped(TAG_ID.FORM):l&&e.openElements.remove(l))}function pEndTagInBody(e){e.openElements.hasInButtonScope(TAG_ID.P)||e._insertFakeElement(TAG_NAMES.P,TAG_ID.P),e._closePElement()}function liEndTagInBody(e){e.openElements.hasInListItemScope(TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),e.openElements.popUntilTagNamePopped(TAG_ID.LI))}function ddEndTagInBody(e,n){const l=n.tagID;e.openElements.hasInScope(l)&&(e.openElements.generateImpliedEndTagsWithExclusion(l),e.openElements.popUntilTagNamePopped(l))}function numberedHeaderEndTagInBody(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function appletEndTagInBody(e,n){const l=n.tagID;e.openElements.hasInScope(l)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(l),e.activeFormattingElements.clearToLastMarker())}function brEndTagInBody(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function genericEndTagInBody(e,n){const l=n.tagName,d=n.tagID;for(let g=e.openElements.stackTop;g>0;g--){const jn=e.openElements.items[g],Un=e.openElements.tagIDs[g];if(d===Un&&(d!==TAG_ID.UNKNOWN||e.treeAdapter.getTagName(jn)===l)){e.openElements.generateImpliedEndTagsWithExclusion(d),e.openElements.stackTop>=g&&e.openElements.shortenToLength(g);break}if(e._isSpecialElement(jn,Un))break}}function endTagInBody(e,n){switch(n.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{callAdoptionAgency(e,n);break}case TAG_ID.P:{pEndTagInBody(e);break}case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressEndTagInBody(e,n);break}case TAG_ID.LI:{liEndTagInBody(e);break}case TAG_ID.DD:case TAG_ID.DT:{ddEndTagInBody(e,n);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderEndTagInBody(e);break}case TAG_ID.BR:{brEndTagInBody(e);break}case TAG_ID.BODY:{bodyEndTagInBody(e,n);break}case TAG_ID.HTML:{htmlEndTagInBody(e,n);break}case TAG_ID.FORM:{formEndTagInBody(e);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletEndTagInBody(e,n);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}default:genericEndTagInBody(e,n)}}function eofInBody(e,n){e.tmplInsertionModeStack.length>0?eofInTemplate(e,n):stopParsing(e,n)}function endTagInText(e,n){var l;n.tagID===TAG_ID.SCRIPT&&((l=e.scriptHandler)===null||l===void 0||l.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function eofInText(e,n){e._err(n,ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(n)}function characterInTable(e,n){if(e.openElements.currentTagId!==void 0&&TABLE_STRUCTURE_TAGS.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=InsertionMode.IN_TABLE_TEXT,n.type){case TokenType.CHARACTER:{characterInTableText(e,n);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInTableText(e,n);break}}else tokenInTable(e,n)}function captionStartTagInTable(e,n){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_CAPTION}function colgroupStartTagInTable(e,n){e.openElements.clearBackToTableContext(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_COLUMN_GROUP}function colStartTagInTable(e,n){e.openElements.clearBackToTableContext(),e._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),e.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(e,n)}function tbodyStartTagInTable(e,n){e.openElements.clearBackToTableContext(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_TABLE_BODY}function tdStartTagInTable(e,n){e.openElements.clearBackToTableContext(),e._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,n)}function tableStartTagInTable(e,n){e.openElements.hasInTableScope(TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(n))}function inputStartTagInTable(e,n){isHiddenInput(n)?e._appendElement(n,NS.HTML):tokenInTable(e,n),n.ackSelfClosing=!0}function formStartTagInTable(e,n){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(n,NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function startTagInTable(e,n){switch(n.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:{tdStartTagInTable(e,n);break}case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(e,n);break}case TAG_ID.COL:{colStartTagInTable(e,n);break}case TAG_ID.FORM:{formStartTagInTable(e,n);break}case TAG_ID.TABLE:{tableStartTagInTable(e,n);break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{tbodyStartTagInTable(e,n);break}case TAG_ID.INPUT:{inputStartTagInTable(e,n);break}case TAG_ID.CAPTION:{captionStartTagInTable(e,n);break}case TAG_ID.COLGROUP:{colgroupStartTagInTable(e,n);break}default:tokenInTable(e,n)}}function endTagInTable(e,n){switch(n.tagID){case TAG_ID.TABLE:{e.openElements.hasInTableScope(TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(TAG_ID.TABLE),e._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(e,n)}}function tokenInTable(e,n){const l=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,modeInBody(e,n),e.fosterParentingEnabled=l}function whitespaceCharacterInTableText(e,n){e.pendingCharacterTokens.push(n)}function characterInTableText(e,n){e.pendingCharacterTokens.push(n),e.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(e,n){let l=0;if(e.hasNonWhitespacePendingCharacterToken)for(;l<e.pendingCharacterTokens.length;l++)tokenInTable(e,e.pendingCharacterTokens[l]);else for(;l<e.pendingCharacterTokens.length;l++)e._insertCharacters(e.pendingCharacterTokens[l]);e.insertionMode=e.originalInsertionMode,e._processToken(n)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInCaption(e,n){const l=n.tagID;TABLE_VOID_ELEMENTS.has(l)?e.openElements.hasInTableScope(TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,n)):startTagInBody(e,n)}function endTagInCaption(e,n){const l=n.tagID;switch(l){case TAG_ID.CAPTION:case TAG_ID.TABLE:{e.openElements.hasInTableScope(TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_TABLE,l===TAG_ID.TABLE&&endTagInTable(e,n));break}case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(e,n)}}function startTagInColumnGroup(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.COL:{e._appendElement(n,NS.HTML),n.ackSelfClosing=!0;break}case TAG_ID.TEMPLATE:{startTagInHead(e,n);break}default:tokenInColumnGroup(e,n)}}function endTagInColumnGroup(e,n){switch(n.tagID){case TAG_ID.COLGROUP:{e.openElements.currentTagId===TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}case TAG_ID.COL:break;default:tokenInColumnGroup(e,n)}}function tokenInColumnGroup(e,n){e.openElements.currentTagId===TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,e._processToken(n))}function startTagInTableBody(e,n){switch(n.tagID){case TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_ROW;break}case TAG_ID.TH:case TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),e.insertionMode=InsertionMode.IN_ROW,startTagInRow(e,n);break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,n));break}default:startTagInTable(e,n)}}function endTagInTableBody(e,n){const l=n.tagID;switch(n.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{e.openElements.hasInTableScope(l)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE,endTagInTable(e,n));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(e,n)}}function startTagInRow(e,n){switch(n.tagID){case TAG_ID.TH:case TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(n,NS.HTML),e.insertionMode=InsertionMode.IN_CELL,e.activeFormattingElements.insertMarker();break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,n));break}default:startTagInTable(e,n)}}function endTagInRow(e,n){switch(n.tagID){case TAG_ID.TR:{e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY);break}case TAG_ID.TABLE:{e.openElements.hasInTableScope(TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(e,n));break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{(e.openElements.hasInTableScope(n.tagID)||e.openElements.hasInTableScope(TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(e,n));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(e,n)}}function startTagInCell(e,n){const l=n.tagID;TABLE_VOID_ELEMENTS.has(l)?(e.openElements.hasInTableScope(TAG_ID.TD)||e.openElements.hasInTableScope(TAG_ID.TH))&&(e._closeTableCell(),startTagInRow(e,n)):startTagInBody(e,n)}function endTagInCell(e,n){const l=n.tagID;switch(l){case TAG_ID.TD:case TAG_ID.TH:{e.openElements.hasInTableScope(l)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(l),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=InsertionMode.IN_ROW);break}case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{e.openElements.hasInTableScope(l)&&(e._closeTableCell(),endTagInRow(e,n));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(e,n)}}function startTagInSelect(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.OPTION:{e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(n,NS.HTML);break}case TAG_ID.OPTGROUP:{e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(n,NS.HTML);break}case TAG_ID.HR:{e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop(),e._appendElement(n,NS.HTML),n.ackSelfClosing=!0;break}case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:{e.openElements.hasInSelectScope(TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),n.tagID!==TAG_ID.SELECT&&e._processStartTag(n));break}case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(e,n);break}}}function endTagInSelect(e,n){switch(n.tagID){case TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===TAG_ID.OPTGROUP&&e.openElements.pop();break}case TAG_ID.OPTION:{e.openElements.currentTagId===TAG_ID.OPTION&&e.openElements.pop();break}case TAG_ID.SELECT:{e.openElements.hasInSelectScope(TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(e,n);break}}}function startTagInSelectInTable(e,n){const l=n.tagID;l===TAG_ID.CAPTION||l===TAG_ID.TABLE||l===TAG_ID.TBODY||l===TAG_ID.TFOOT||l===TAG_ID.THEAD||l===TAG_ID.TR||l===TAG_ID.TD||l===TAG_ID.TH?(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(n)):startTagInSelect(e,n)}function endTagInSelectInTable(e,n){const l=n.tagID;l===TAG_ID.CAPTION||l===TAG_ID.TABLE||l===TAG_ID.TBODY||l===TAG_ID.TFOOT||l===TAG_ID.THEAD||l===TAG_ID.TR||l===TAG_ID.TD||l===TAG_ID.TH?e.openElements.hasInTableScope(l)&&(e.openElements.popUntilTagNamePopped(TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(n)):endTagInSelect(e,n)}function startTagInTemplate(e,n){switch(n.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{startTagInHead(e,n);break}case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,e.insertionMode=InsertionMode.IN_TABLE,startTagInTable(e,n);break}case TAG_ID.COL:{e.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,e.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(e,n);break}case TAG_ID.TR:{e.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,e.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(e,n);break}case TAG_ID.TD:case TAG_ID.TH:{e.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,e.insertionMode=InsertionMode.IN_ROW,startTagInRow(e,n);break}default:e.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,e.insertionMode=InsertionMode.IN_BODY,startTagInBody(e,n)}}function endTagInTemplate(e,n){n.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(e,n)}function eofInTemplate(e,n){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(n)):stopParsing(e,n)}function startTagAfterBody(e,n){n.tagID===TAG_ID.HTML?startTagInBody(e,n):tokenAfterBody(e,n)}function endTagAfterBody(e,n){var l;if(n.tagID===TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=InsertionMode.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],n);const d=e.openElements.items[1];d&&!(!((l=e.treeAdapter.getNodeSourceCodeLocation(d))===null||l===void 0)&&l.endTag)&&e._setEndLocation(d,n)}}else tokenAfterBody(e,n)}function tokenAfterBody(e,n){e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,n)}function startTagInFrameset(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.FRAMESET:{e._insertElement(n,NS.HTML);break}case TAG_ID.FRAME:{e._appendElement(n,NS.HTML),n.ackSelfClosing=!0;break}case TAG_ID.NOFRAMES:{startTagInHead(e,n);break}}}function endTagInFrameset(e,n){n.tagID===TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==TAG_ID.FRAMESET&&(e.insertionMode=InsertionMode.AFTER_FRAMESET))}function startTagAfterFrameset(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.NOFRAMES:{startTagInHead(e,n);break}}}function endTagAfterFrameset(e,n){n.tagID===TAG_ID.HTML&&(e.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}function startTagAfterAfterBody(e,n){n.tagID===TAG_ID.HTML?startTagInBody(e,n):tokenAfterAfterBody(e,n)}function tokenAfterAfterBody(e,n){e.insertionMode=InsertionMode.IN_BODY,modeInBody(e,n)}function startTagAfterAfterFrameset(e,n){switch(n.tagID){case TAG_ID.HTML:{startTagInBody(e,n);break}case TAG_ID.NOFRAMES:{startTagInHead(e,n);break}}}function nullCharacterInForeignContent(e,n){n.chars=REPLACEMENT_CHARACTER,e._insertCharacters(n)}function characterInForeignContent(e,n){e._insertCharacters(n),e.framesetOk=!1}function popUntilHtmlOrIntegrationPoint(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==NS.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function startTagInForeignContent(e,n){if(causesExit(n))popUntilHtmlOrIntegrationPoint(e),e._startTagOutsideForeignContent(n);else{const l=e._getAdjustedCurrentElement(),d=e.treeAdapter.getNamespaceURI(l);d===NS.MATHML?adjustTokenMathMLAttrs(n):d===NS.SVG&&(adjustTokenSVGTagName(n),adjustTokenSVGAttrs(n)),adjustTokenXMLAttrs(n),n.selfClosing?e._appendElement(n,d):e._insertElement(n,d),n.ackSelfClosing=!0}}function endTagInForeignContent(e,n){if(n.tagID===TAG_ID.P||n.tagID===TAG_ID.BR){popUntilHtmlOrIntegrationPoint(e),e._endTagOutsideForeignContent(n);return}for(let l=e.openElements.stackTop;l>0;l--){const d=e.openElements.items[l];if(e.treeAdapter.getNamespaceURI(d)===NS.HTML){e._endTagOutsideForeignContent(n);break}const g=e.treeAdapter.getTagName(d);if(g.toLowerCase()===n.tagName){n.tagName=g,e.openElements.shortenToLength(l);break}}}TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR;function parse$1(e,n){return Parser.parse(e,n)}function parseFragment(e,n,l){typeof e=="string"&&(l=n,n=e,e=null);const d=Parser.getFragmentParser(e,l);return d.tokenizer.write(n,!0),d.getFragment()}function stringifyPosition(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?position$1(e.position):"start"in e||"end"in e?position$1(e):"line"in e||"column"in e?point$2(e):""}function point$2(e){return index$2(e&&e.line)+":"+index$2(e&&e.column)}function position$1(e){return point$2(e&&e.start)+"-"+point$2(e&&e.end)}function index$2(e){return e&&typeof e=="number"?e:1}class VFileMessage extends Error{constructor(n,l,d){super(),typeof l=="string"&&(d=l,l=void 0);let g="",jn={},Un=!1;if(l&&("line"in l&&"column"in l?jn={place:l}:"start"in l&&"end"in l?jn={place:l}:"type"in l?jn={ancestors:[l],place:l.position}:jn={...l}),typeof n=="string"?g=n:!jn.cause&&n&&(Un=!0,g=n.message,jn.cause=n),!jn.ruleId&&!jn.source&&typeof d=="string"){const qn=d.indexOf(":");qn===-1?jn.ruleId=d:(jn.source=d.slice(0,qn),jn.ruleId=d.slice(qn+1))}if(!jn.place&&jn.ancestors&&jn.ancestors){const qn=jn.ancestors[jn.ancestors.length-1];qn&&(jn.place=qn.position)}const zn=jn.place&&"start"in jn.place?jn.place.start:jn.place;this.ancestors=jn.ancestors||void 0,this.cause=jn.cause||void 0,this.column=zn?zn.column:void 0,this.fatal=void 0,this.file="",this.message=g,this.line=zn?zn.line:void 0,this.name=stringifyPosition(jn.place)||"1:1",this.place=jn.place||void 0,this.reason=this.message,this.ruleId=jn.ruleId||void 0,this.source=jn.source||void 0,this.stack=Un&&jn.cause&&typeof jn.cause.stack=="string"?jn.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const minpath={basename,dirname,extname,join:join$1,sep:"/"};function basename(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(e);let l=0,d=-1,g=e.length,jn;if(n===void 0||n.length===0||n.length>e.length){for(;g--;)if(e.codePointAt(g)===47){if(jn){l=g+1;break}}else d<0&&(jn=!0,d=g+1);return d<0?"":e.slice(l,d)}if(n===e)return"";let Un=-1,zn=n.length-1;for(;g--;)if(e.codePointAt(g)===47){if(jn){l=g+1;break}}else Un<0&&(jn=!0,Un=g+1),zn>-1&&(e.codePointAt(g)===n.codePointAt(zn--)?zn<0&&(d=g):(zn=-1,d=Un));return l===d?d=Un:d<0&&(d=e.length),e.slice(l,d)}function dirname(e){if(assertPath$1(e),e.length===0)return".";let n=-1,l=e.length,d;for(;--l;)if(e.codePointAt(l)===47){if(d){n=l;break}}else d||(d=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function extname(e){assertPath$1(e);let n=e.length,l=-1,d=0,g=-1,jn=0,Un;for(;n--;){const zn=e.codePointAt(n);if(zn===47){if(Un){d=n+1;break}continue}l<0&&(Un=!0,l=n+1),zn===46?g<0?g=n:jn!==1&&(jn=1):g>-1&&(jn=-1)}return g<0||l<0||jn===0||jn===1&&g===l-1&&g===d+1?"":e.slice(g,l)}function join$1(...e){let n=-1,l;for(;++n<e.length;)assertPath$1(e[n]),e[n]&&(l=l===void 0?e[n]:l+"/"+e[n]);return l===void 0?".":normalize(l)}function normalize(e){assertPath$1(e);const n=e.codePointAt(0)===47;let l=normalizeString(e,!n);return l.length===0&&!n&&(l="."),l.length>0&&e.codePointAt(e.length-1)===47&&(l+="/"),n?"/"+l:l}function normalizeString(e,n){let l="",d=0,g=-1,jn=0,Un=-1,zn,qn;for(;++Un<=e.length;){if(Un<e.length)zn=e.codePointAt(Un);else{if(zn===47)break;zn=47}if(zn===47){if(!(g===Un-1||jn===1))if(g!==Un-1&&jn===2){if(l.length<2||d!==2||l.codePointAt(l.length-1)!==46||l.codePointAt(l.length-2)!==46){if(l.length>2){if(qn=l.lastIndexOf("/"),qn!==l.length-1){qn<0?(l="",d=0):(l=l.slice(0,qn),d=l.length-1-l.lastIndexOf("/")),g=Un,jn=0;continue}}else if(l.length>0){l="",d=0,g=Un,jn=0;continue}}n&&(l=l.length>0?l+"/..":"..",d=2)}else l.length>0?l+="/"+e.slice(g+1,Un):l=e.slice(g+1,Un),d=Un-g-1;g=Un,jn=0}else zn===46&&jn>-1?jn++:jn=-1}return l}function assertPath$1(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const minproc={cwd};function cwd(){return"/"}function isUrl(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function urlToPath(e){if(typeof e=="string")e=new URL(e);else if(!isUrl(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return getPathFromURLPosix(e)}function getPathFromURLPosix(e){if(e.hostname!==""){const d=new TypeError('File URL host must be "localhost" or empty on darwin');throw d.code="ERR_INVALID_FILE_URL_HOST",d}const n=e.pathname;let l=-1;for(;++l<n.length;)if(n.codePointAt(l)===37&&n.codePointAt(l+1)===50){const d=n.codePointAt(l+2);if(d===70||d===102){const g=new TypeError("File URL path must not include encoded / characters");throw g.code="ERR_INVALID_FILE_URL_PATH",g}}return decodeURIComponent(n)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(n){let l;n?isUrl(n)?l={path:n}:typeof n=="string"||isUint8Array$1(n)?l={value:n}:l=n:l={},this.cwd="cwd"in l?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let d=-1;for(;++d<order.length;){const jn=order[d];jn in l&&l[jn]!==void 0&&l[jn]!==null&&(this[jn]=jn==="history"?[...l[jn]]:l[jn])}let g;for(g in l)order.includes(g)||(this[g]=l[g])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(n){assertNonEmpty(n,"basename"),assertPart(n,"basename"),this.path=minpath.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(n){assertPath(this.basename,"dirname"),this.path=minpath.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(n){if(assertPart(n,"extname"),assertPath(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){isUrl(n)&&(n=urlToPath(n)),assertNonEmpty(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(n){assertNonEmpty(n,"stem"),assertPart(n,"stem"),this.path=minpath.join(this.dirname||"",n+(this.extname||""))}fail(n,l,d){const g=this.message(n,l,d);throw g.fatal=!0,g}info(n,l,d){const g=this.message(n,l,d);return g.fatal=void 0,g}message(n,l,d){const g=new VFileMessage(n,l,d);return this.path&&(g.name=this.path+":"+g.name,g.file=this.path),g.fatal=!1,this.messages.push(g),g}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function assertPart(e,n){if(e&&e.includes(minpath.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function assertPath(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function isUint8Array$1(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const errors={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `-->` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `-->` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `<!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `<!--`. Expected `-->`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},base$1="https://html.spec.whatwg.org/multipage/parsing.html#parse-error-",dashToCamelRe=/-[a-z]/g,formatCRe=/%c(?:([-+])(\d+))?/g,formatXRe=/%x/g,fatalities={2:!0,1:!1,0:null},emptyOptions$6={};function fromHtml(e,n){const l=n||emptyOptions$6,d=l.onerror,g=e instanceof VFile?e:new VFile(e),jn=l.fragment?parseFragment:parse$1,Un=String(g),zn=jn(Un,{sourceCodeLocationInfo:!0,onParseError:l.onerror?qn:null,scriptingEnabled:!1});return fromParse5(zn,{file:g,space:l.space,verbose:l.verbose});function qn(Kn){const Xn=Kn.code,Qn=camelcase(Xn),Jn=l[Qn],Ai=Jn??!0,Ri=typeof Ai=="number"?Ai:Ai?1:0;if(Ri){const $i=errors[Qn],Li=new VFileMessage(Ni($i.reason),{place:{start:{line:Kn.startLine,column:Kn.startCol,offset:Kn.startOffset},end:{line:Kn.endLine,column:Kn.endCol,offset:Kn.endOffset}},ruleId:Xn,source:"hast-util-from-html"});g.path&&(Li.file=g.path,Li.name=g.path+":"+Li.name),Li.fatal=fatalities[Ri],Li.note=Ni($i.description),Li.url=$i.url===!1?void 0:base$1+Xn,d(Li)}function Ni($i){return $i.replace(formatCRe,Li).replace(formatXRe,ji);function Li(Fi,qi,zi){const Gi=(zi?Number.parseInt(zi,10):0)*(qi==="-"?-1:1),Xi=Un.charAt(Kn.startOffset+Gi);return visualizeCharacter(Xi)}function ji(){return visualizeCharacterCode(Un.charCodeAt(Kn.startOffset))}}}}function camelcase(e){return e.replace(dashToCamelRe,dashToCamel)}function dashToCamel(e){return e.charAt(1).toUpperCase()}function visualizeCharacter(e){return e==="`"?"` ` `":e}function visualizeCharacterCode(e){return"0x"+e.toString(16).toUpperCase()}function rehypeParse(e){const n=this,{emitParseErrors:l,...d}={...n.data("settings"),...e};n.parser=g;function g(jn,Un){return fromHtml(jn,{...d,onerror:l?function(zn){Un.path&&(zn.name=Un.path+":"+zn.name,zn.file=Un.path),Un.messages.push(zn)}:void 0})}}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(e,n)=>{const l=(g,jn)=>(e.set(jn,g),g),d=g=>{if(e.has(g))return e.get(g);const[jn,Un]=n[g];switch(jn){case PRIMITIVE:case VOID:return l(Un,g);case ARRAY:{const zn=l([],g);for(const qn of Un)zn.push(d(qn));return zn}case OBJECT:{const zn=l({},g);for(const[qn,Kn]of Un)zn[d(qn)]=d(Kn);return zn}case DATE:return l(new Date(Un),g);case REGEXP:{const{source:zn,flags:qn}=Un;return l(new RegExp(zn,qn),g)}case MAP:{const zn=l(new Map,g);for(const[qn,Kn]of Un)zn.set(d(qn),d(Kn));return zn}case SET:{const zn=l(new Set,g);for(const qn of Un)zn.add(d(qn));return zn}case ERROR:{const{name:zn,message:qn}=Un;return l(new env[zn](qn),g)}case BIGINT:return l(BigInt(Un),g);case"BigInt":return l(Object(BigInt(Un)),g);case"ArrayBuffer":return l(new Uint8Array(Un).buffer,Un);case"DataView":{const{buffer:zn}=new Uint8Array(Un);return l(new DataView(zn),Un)}}return l(new env[jn](Un),g)};return d},deserialize=e=>deserializer(new Map,e)(0),EMPTY="",{toString:toString$1}={},{keys:keys$1}=Object,typeOf=e=>{const n=typeof e;if(n!=="object"||!e)return[PRIMITIVE,n];const l=toString$1.call(e).slice(8,-1);switch(l){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,l]}return l.includes("Array")?[ARRAY,l]:l.includes("Error")?[ERROR,l]:[OBJECT,l]},shouldSkip=([e,n])=>e===PRIMITIVE&&(n==="function"||n==="symbol"),serializer=(e,n,l,d)=>{const g=(Un,zn)=>{const qn=d.push(Un)-1;return l.set(zn,qn),qn},jn=Un=>{if(l.has(Un))return l.get(Un);let[zn,qn]=typeOf(Un);switch(zn){case PRIMITIVE:{let Xn=Un;switch(qn){case"bigint":zn=BIGINT,Xn=Un.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+qn);Xn=null;break;case"undefined":return g([VOID],Un)}return g([zn,Xn],Un)}case ARRAY:{if(qn){let Jn=Un;return qn==="DataView"?Jn=new Uint8Array(Un.buffer):qn==="ArrayBuffer"&&(Jn=new Uint8Array(Un)),g([qn,[...Jn]],Un)}const Xn=[],Qn=g([zn,Xn],Un);for(const Jn of Un)Xn.push(jn(Jn));return Qn}case OBJECT:{if(qn)switch(qn){case"BigInt":return g([qn,Un.toString()],Un);case"Boolean":case"Number":case"String":return g([qn,Un.valueOf()],Un)}if(n&&"toJSON"in Un)return jn(Un.toJSON());const Xn=[],Qn=g([zn,Xn],Un);for(const Jn of keys$1(Un))(e||!shouldSkip(typeOf(Un[Jn])))&&Xn.push([jn(Jn),jn(Un[Jn])]);return Qn}case DATE:return g([zn,Un.toISOString()],Un);case REGEXP:{const{source:Xn,flags:Qn}=Un;return g([zn,{source:Xn,flags:Qn}],Un)}case MAP:{const Xn=[],Qn=g([zn,Xn],Un);for(const[Jn,Ai]of Un)(e||!(shouldSkip(typeOf(Jn))||shouldSkip(typeOf(Ai))))&&Xn.push([jn(Jn),jn(Ai)]);return Qn}case SET:{const Xn=[],Qn=g([zn,Xn],Un);for(const Jn of Un)(e||!shouldSkip(typeOf(Jn)))&&Xn.push(jn(Jn));return Qn}}const{message:Kn}=Un;return g([zn,{name:qn,message:Kn}],Un)};return jn},serialize$1=(e,{json:n,lossy:l}={})=>{const d=[];return serializer(!(n||l),!!n,new Map,d)(e),d},structuredClone$1=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?deserialize(serialize$1(e,n)):structuredClone(e):(e,n)=>deserialize(serialize$1(e,n)),isElement$2=(function(e,n,l,d,g){const jn=convertElement(n);return looksLikeAnElement(e)?jn.call(g,e,l,d):!1}),convertElement=(function(e){if(e==null)return element$3;if(typeof e=="string")return tagNameFactory(e);if(typeof e=="object")return anyFactory$1(e);if(typeof e=="function")return castFactory$1(e);throw new Error("Expected function, string, or array as `test`")});function anyFactory$1(e){const n=[];let l=-1;for(;++l<e.length;)n[l]=convertElement(e[l]);return castFactory$1(d);function d(...g){let jn=-1;for(;++jn<n.length;)if(n[jn].apply(this,g))return!0;return!1}}function tagNameFactory(e){return castFactory$1(n);function n(l){return l.tagName===e}}function castFactory$1(e){return n;function n(l,d,g){return!!(looksLikeAnElement(l)&&e.call(this,l,typeof d=="number"?d:void 0,g||void 0))}}function element$3(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function looksLikeAnElement(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const embedded=convertElement(function(e){return e.tagName==="audio"||e.tagName==="canvas"||e.tagName==="embed"||e.tagName==="iframe"||e.tagName==="img"||e.tagName==="math"||e.tagName==="object"||e.tagName==="picture"||e.tagName==="svg"||e.tagName==="video"}),re$1=/[ \t\n\f\r]/g;function whitespace$1(e){return typeof e=="object"?e.type==="text"?empty$1(e.value):!1:empty$1(e)}function empty$1(e){return e.replace(re$1,"")===""}const convert=(function(e){if(e==null)return ok;if(typeof e=="function")return castFactory(e);if(typeof e=="object")return Array.isArray(e)?anyFactory(e):propertiesFactory(e);if(typeof e=="string")return typeFactory(e);throw new Error("Expected function, string, or object as test")});function anyFactory(e){const n=[];let l=-1;for(;++l<e.length;)n[l]=convert(e[l]);return castFactory(d);function d(...g){let jn=-1;for(;++jn<n.length;)if(n[jn].apply(this,g))return!0;return!1}}function propertiesFactory(e){const n=e;return castFactory(l);function l(d){const g=d;let jn;for(jn in e)if(g[jn]!==n[jn])return!1;return!0}}function typeFactory(e){return castFactory(n);function n(l){return l&&l.type===e}}function castFactory(e){return n;function n(l,d,g){return!!(looksLikeANode(l)&&e.call(this,l,typeof d=="number"?d:void 0,g||void 0))}}function ok(){return!0}function looksLikeANode(e){return e!==null&&typeof e=="object"&&"type"in e}const blocks=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],content$3=["button","input","select","textarea"],skippable$1=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],emptyOptions$5={},ignorableNode=convert(["comment","doctype"]);function minifyWhitespace(e,n){minify(e,{collapse:collapseFactory((n||emptyOptions$5).newlines?replaceNewlines:replaceWhitespace),whitespace:"normal"})}function minify(e,n){if("children"in e){const l={...n};return(e.type==="root"||blocklike(e))&&(l.before=!0,l.after=!0),l.whitespace=inferWhiteSpace(e,n),all$5(e,l)}if(e.type==="text"){if(n.whitespace==="normal")return minifyText(e,n);n.whitespace==="nowrap"&&(e.value=n.collapse(e.value))}return{ignore:ignorableNode(e),stripAtStart:!1,remove:!1}}function minifyText(e,n){const l=n.collapse(e.value),d={ignore:!1,stripAtStart:!1,remove:!1};let g=0,jn=l.length;return n.before&&removable(l.charAt(0))&&g++,g!==jn&&removable(l.charAt(jn-1))&&(n.after?jn--:d.stripAtStart=!0),g===jn?d.remove=!0:e.value=l.slice(g,jn),d}function all$5(e,n){let l=n.before;const d=n.after,g=e.children;let jn=g.length,Un=-1;for(;++Un<jn;){const zn=minify(g[Un],{...n,after:collapsableAfter(g,Un,d),before:l});zn.remove?(g.splice(Un,1),Un--,jn--):zn.ignore||(l=zn.stripAtStart),content$2(g[Un])&&(l=!1)}return{ignore:!1,stripAtStart:!!(l||d),remove:!1}}function collapsableAfter(e,n,l){for(;++n<e.length;){const d=e[n];let g=inferBoundary(d);if(g===void 0&&"children"in d&&!skippable(d)&&(g=collapsableAfter(d.children,-1)),typeof g=="boolean")return g}return l}function inferBoundary(e){if(e.type==="element"){if(content$2(e))return!1;if(blocklike(e))return!0}else if(e.type==="text"){if(!whitespace$1(e))return!1}else if(!ignorableNode(e))return!1}function content$2(e){return embedded(e)||isElement$2(e,content$3)}function blocklike(e){return isElement$2(e,blocks)}function skippable(e){return!!(e.type==="element"&&e.properties.hidden)||ignorableNode(e)||isElement$2(e,skippable$1)}function removable(e){return e===" "||e===`
`}function replaceNewlines(e){const n=/\r?\n|\r/.exec(e);return n?n[0]:" "}function replaceWhitespace(){return" "}function collapseFactory(e){return n;function n(l){return String(l).replace(/[\t\n\v\f\r ]+/g,e)}}function inferWhiteSpace(e,n){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":n.whitespace;case"textarea":return"pre-wrap"}return n.whitespace}function rehypeMinifyWhitespace(e){return function(n){minifyWhitespace(n,e)}}function color(e){return e}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(e,n,l,d){let g;typeof n=="function"&&typeof l!="function"?(d=l,l=n):g=n;const jn=convert(g),Un=d?-1:1;zn(e,void 0,[])();function zn(qn,Kn,Xn){const Qn=qn&&typeof qn=="object"?qn:{};if(typeof Qn.type=="string"){const Ai=typeof Qn.tagName=="string"?Qn.tagName:typeof Qn.name=="string"?Qn.name:void 0;Object.defineProperty(Jn,"name",{value:"node ("+(qn.type+(Ai?"<"+Ai+">":""))+")"})}return Jn;function Jn(){let Ai=empty,Ri,Ni,$i;if((!n||jn(qn,Kn,Xn[Xn.length-1]||void 0))&&(Ai=toResult(l(qn,Xn)),Ai[0]===EXIT))return Ai;if("children"in qn&&qn.children){const Li=qn;if(Li.children&&Ai[0]!==SKIP)for(Ni=(d?Li.children.length:-1)+Un,$i=Xn.concat(Li);Ni>-1&&Ni<Li.children.length;){const ji=Li.children[Ni];if(Ri=zn(ji,Ni,$i)(),Ri[0]===EXIT)return Ri;Ni=typeof Ri[1]=="number"?Ri[1]:Ni+Un}}return Ai}}}function toResult(e){return Array.isArray(e)?e:typeof e=="number"?[CONTINUE,e]:e==null?empty:[e]}function visit(e,n,l,d){let g,jn,Un;typeof n=="function"&&typeof l!="function"?(jn=void 0,Un=n,g=l):(jn=n,Un=l,g=d),visitParents(e,jn,zn,g);function zn(qn,Kn){const Xn=Kn[Kn.length-1],Qn=Xn?Xn.children.indexOf(qn):void 0;return Un(qn,Qn,Xn)}}const pointEnd=point$1("end"),pointStart=point$1("start");function point$1(e){return n;function n(l){const d=l&&l.position&&l.position[e]||{};if(typeof d.line=="number"&&d.line>0&&typeof d.column=="number"&&d.column>0)return{line:d.line,column:d.column,offset:typeof d.offset=="number"&&d.offset>-1?d.offset:void 0}}}function position(e){const n=pointStart(e),l=pointEnd(e);if(n&&l)return{start:n,end:l}}function a(e,n){const l=n.properties||{},d=e.all(n),g={type:"link",url:e.resolve(String(l.href||"")||null),title:l.title?String(l.title):null,children:d};return e.patch(n,g),g}function base(e,n){e.baseFound||(e.frozenBaseUrl=String(n.properties&&n.properties.href||"")||void 0,e.baseFound=!0)}function blockquote$2(e,n){const l={type:"blockquote",children:e.toFlow(e.all(n))};return e.patch(n,l),l}function br$2(e,n){const l={type:"break"};return e.patch(n,l),l}const findAfter=(function(e,n,l){const d=convert(l);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof n=="number"){if(n<0||n===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(n=e.children.indexOf(n),n<0)throw new Error("Expected child node or index");for(;++n<e.children.length;)if(d(e.children[n],n,e))return e.children[n]}),searchLineFeeds=/\n/g,searchTabOrSpaces=/[\t ]+/g,br$1=convertElement("br"),cell=convertElement(isCell),p$2=convertElement("p"),row=convertElement("tr"),notRendered=convertElement(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",hidden$1,closedDialog]),blockOrCaption=convertElement(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function toText(e,n){const l={},d="children"in e?e.children:[],g=blockOrCaption(e),jn=inferWhitespace(e,{whitespace:l.whitespace||"normal"}),Un=[];(e.type==="text"||e.type==="comment")&&Un.push(...collectText(e,{breakBefore:!0,breakAfter:!0}));let zn=-1;for(;++zn<d.length;)Un.push(...renderedTextCollection(d[zn],e,{whitespace:jn,breakBefore:zn?void 0:g,breakAfter:zn<d.length-1?br$1(d[zn+1]):g}));const qn=[];let Kn;for(zn=-1;++zn<Un.length;){const Xn=Un[zn];typeof Xn=="number"?Kn!==void 0&&Xn>Kn&&(Kn=Xn):Xn&&(Kn!==void 0&&Kn>-1&&qn.push(`
`.repeat(Kn)||" "),Kn=-1,qn.push(Xn))}return qn.join("")}function renderedTextCollection(e,n,l){return e.type==="element"?collectElement(e,n,l):e.type==="text"?l.whitespace==="normal"?collectText(e,l):collectPreText(e):[]}function collectElement(e,n,l){const d=inferWhitespace(e,l),g=e.children||[];let jn=-1,Un=[];if(notRendered(e))return Un;let zn,qn;for(br$1(e)||row(e)&&findAfter(n,e,row)?qn=`
`:p$2(e)?(zn=2,qn=2):blockOrCaption(e)&&(zn=1,qn=1);++jn<g.length;)Un=Un.concat(renderedTextCollection(g[jn],e,{whitespace:d,breakBefore:jn?void 0:zn,breakAfter:jn<g.length-1?br$1(g[jn+1]):qn}));return cell(e)&&findAfter(n,e,cell)&&Un.push("	"),zn&&Un.unshift(zn),qn&&Un.push(qn),Un}function collectText(e,n){const l=String(e.value),d=[],g=[];let jn=0;for(;jn<=l.length;){searchLineFeeds.lastIndex=jn;const qn=searchLineFeeds.exec(l),Kn=qn&&"index"in qn?qn.index:l.length;d.push(trimAndCollapseSpacesAndTabs(l.slice(jn,Kn).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),jn===0?n.breakBefore:!0,Kn===l.length?n.breakAfter:!0)),jn=Kn+1}let Un=-1,zn;for(;++Un<d.length;)d[Un].charCodeAt(d[Un].length-1)===8203||Un<d.length-1&&d[Un+1].charCodeAt(0)===8203?(g.push(d[Un]),zn=void 0):d[Un]?(typeof zn=="number"&&g.push(zn),g.push(d[Un]),zn=0):(Un===0||Un===d.length-1)&&g.push(0);return g}function collectPreText(e){return[String(e.value)]}function trimAndCollapseSpacesAndTabs(e,n,l){const d=[];let g=0,jn;for(;g<e.length;){searchTabOrSpaces.lastIndex=g;const Un=searchTabOrSpaces.exec(e);jn=Un?Un.index:e.length,!g&&!jn&&Un&&!n&&d.push(""),g!==jn&&d.push(e.slice(g,jn)),g=Un?jn+Un[0].length:jn}return g!==jn&&!l&&d.push(""),d.join(" ")}function inferWhitespace(e,n){if(e.type==="element"){const l=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return l.wrap?"pre-wrap":"pre";case"td":case"th":return l.noWrap?"nowrap":n.whitespace;case"textarea":return"pre-wrap"}}return n.whitespace}function hidden$1(e){return!!(e.properties||{}).hidden}function isCell(e){return e.tagName==="td"||e.tagName==="th"}function closedDialog(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function trimTrailingLines(e){const n=String(e);let l=n.length;for(;l>0;){const d=n.codePointAt(l-1);if(d!==void 0&&(d===10||d===13))l--;else break}return n.slice(0,l)}const prefix="language-";function code$3(e,n){const l=n.children;let d=-1,g,jn;if(n.tagName==="pre")for(;++d<l.length;){const zn=l[d];if(zn.type==="element"&&zn.tagName==="code"&&zn.properties&&zn.properties.className&&Array.isArray(zn.properties.className)){g=zn.properties.className;break}}if(g){for(d=-1;++d<g.length;)if(String(g[d]).slice(0,prefix.length)===prefix){jn=String(g[d]).slice(prefix.length);break}}const Un={type:"code",lang:jn||null,meta:null,value:trimTrailingLines(toText(n))};return e.patch(n,Un),Un}function comment$2(e,n){const l={type:"html",value:"<!--"+n.value+"-->"};return e.patch(n,l),l}function del$1(e,n){const d={type:"delete",children:e.all(n)};return e.patch(n,d),d}function listItemsSpread(e){let n=-1;if(e.length>1){for(;++n<e.length;)if(e[n].spread)return!0}return!1}function dl(e,n){const l=[],d=[];let g=-1;for(;++g<n.children.length;){const zn=n.children[g];zn.type==="element"&&zn.tagName==="div"?l.push(...zn.children):l.push(zn)}let jn={definitions:[],titles:[]};for(g=-1;++g<l.length;){const zn=l[g];if(zn.type==="element"&&zn.tagName==="dt"){const qn=l[g-1];qn&&qn.type==="element"&&qn.tagName==="dd"&&(d.push(jn),jn={definitions:[],titles:[]}),jn.titles.push(zn)}else jn.definitions.push(zn)}d.push(jn),g=-1;const Un=[];for(;++g<d.length;){const zn=[...handle$2(e,d[g].titles),...handle$2(e,d[g].definitions)];zn.length>0&&Un.push({type:"listItem",spread:zn.length>1,checked:null,children:zn})}if(Un.length>0){const zn={type:"list",ordered:!1,start:null,spread:listItemsSpread(Un),children:Un};return e.patch(n,zn),zn}}function handle$2(e,n){const l=e.all({type:"root",children:n}),d=e.toSpecificContent(l,create$2);return d.length===0?[]:d.length===1?d[0].children:[{type:"list",ordered:!1,start:null,spread:listItemsSpread(d),children:d}]}function create$2(){return{type:"listItem",spread:!1,checked:null,children:[]}}function em$1(e,n){const d={type:"emphasis",children:e.all(n)};return e.patch(n,d),d}function dropSurroundingBreaks(e){let n=0,l=e.length;for(;n<l&&e[n].type==="break";)n++;for(;l>n&&e[l-1].type==="break";)l--;return n===0&&l===e.length?e:e.slice(n,l)}function heading$2(e,n){const l=Number(n.tagName.charAt(1))||1,d=dropSurroundingBreaks(e.all(n)),g={type:"heading",depth:l,children:d};return e.patch(n,g),g}function hr$1(e,n){const l={type:"thematicBreak"};return e.patch(n,l),l}function iframe(e,n){const l=n.properties||{},d=String(l.src||""),g=String(l.title||"");if(d&&g){const jn={type:"link",title:null,url:e.resolve(d),children:[{type:"text",value:g}]};return e.patch(n,jn),jn}}function img(e,n){const l=n.properties||{},d={type:"image",url:e.resolve(String(l.src||"")||null),title:l.title?String(l.title):null,alt:l.alt?String(l.alt):""};return e.patch(n,d),d}function inlineCode$2(e,n){const l={type:"inlineCode",value:toText(n)};return e.patch(n,l),l}function findSelectedOptions(e,n){const l=[],d=[],g=n||e.properties||{},jn=findOptions(e),Un=Math.min(Number.parseInt(String(g.size),10),0)||(g.multiple?4:1);let zn=-1;for(;++zn<jn.length;){const Xn=jn[zn];Xn&&Xn.properties&&Xn.properties.selected&&l.push(Xn)}const qn=l.length>0?l:jn,Kn=Math.min(qn.length,Un);for(zn=-1;++zn<Kn;){const Xn=qn[zn],Qn=Xn.properties||{},Jn=toText(Xn),Ai=Jn||String(Qn.label||""),Ri=String(Qn.value||"")||Jn;d.push([Ri,Ai===Ri?void 0:Ai])}return d}function findOptions(e){const n=[];let l=-1;for(;++l<e.children.length;){const d=e.children[l];"children"in d&&Array.isArray(d.children)&&n.push(...findOptions(d)),d.type==="element"&&d.tagName==="option"&&(!d.properties||!d.properties.disabled)&&n.push(d)}return n}const defaultChecked="[x]",defaultUnchecked="[ ]";function input(e,n){const l=n.properties||{},d=String(l.value||l.placeholder||"");if(l.disabled||l.type==="hidden"||l.type==="file")return;if(l.type==="checkbox"||l.type==="radio"){const qn={type:"text",value:l.checked?e.options.checked||defaultChecked:e.options.unchecked||defaultUnchecked};return e.patch(n,qn),qn}if(l.type==="image"){const qn=l.alt||d;if(qn){const Kn={type:"image",url:e.resolve(String(l.src||"")||null),title:String(l.title||"")||null,alt:String(qn)};return e.patch(n,Kn),Kn}return}let g=[];if(d)g=[[d,void 0]];else if(l.type!=="button"&&l.type!=="file"&&l.type!=="password"&&l.type!=="reset"&&l.type!=="submit"&&l.list){const qn=String(l.list),Kn=e.elementById.get(qn);Kn&&Kn.tagName==="datalist"&&(g=findSelectedOptions(Kn,l))}if(g.length===0)return;if(l.type==="password"&&(g[0]=["".repeat(g[0][0].length),void 0]),l.type==="email"||l.type==="url"){const qn=[];let Kn=-1;for(;++Kn<g.length;){const Xn=e.resolve(g[Kn][0]),Qn={type:"link",title:null,url:l.type==="email"?"mailto:"+Xn:Xn,children:[{type:"text",value:g[Kn][1]||Xn}]};qn.push(Qn),Kn!==g.length-1&&qn.push({type:"text",value:", "})}return qn}const jn=[];let Un=-1;for(;++Un<g.length;)jn.push(g[Un][1]?g[Un][1]+" ("+g[Un][0]+")":g[Un][0]);const zn={type:"text",value:jn.join(", ")};return e.patch(n,zn),zn}const own$8={}.hasOwnProperty;function hasProperty(e,n){const l=e.type==="element"&&own$8.call(e.properties,n)&&e.properties[n];return l!=null&&l!==!1}const list$5=new Set(["pingback","prefetch","stylesheet"]);function isBodyOkLink(e){if(e.type!=="element"||e.tagName!=="link")return!1;if(e.properties.itemProp)return!0;const n=e.properties.rel;let l=-1;if(!Array.isArray(n)||n.length===0)return!1;for(;++l<n.length;)if(!list$5.has(String(n[l])))return!1;return!0}const basic=convertElement(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),meta=convertElement("meta");function phrasing$2(e){return!!(e.type==="text"||basic(e)||embedded(e)||isBodyOkLink(e)||meta(e)&&hasProperty(e,"itemProp"))}function li$2(e,n){const{rest:l,checkbox:d}=extractLeadingCheckbox(n),g=d?!!d.properties.checked:null,jn=spreadout(l),Un=e.toFlow(e.all(l)),zn={type:"listItem",spread:jn,checked:g,children:Un};return e.patch(n,zn),zn}function spreadout(e){let n=-1,l=!1;for(;++n<e.children.length;){const d=e.children[n];if(d.type==="element"){if(phrasing$2(d))continue;if(d.tagName==="p"||l||spreadout(d))return!0;l=!0}}return!1}function extractLeadingCheckbox(e){const n=e.children[0];if(n&&n.type==="element"&&n.tagName==="input"&&n.properties&&(n.properties.type==="checkbox"||n.properties.type==="radio")){const l={...e,children:e.children.slice(1)};return{checkbox:n,rest:l}}if(n&&n.type==="element"&&n.tagName==="p"){const{checkbox:l,rest:d}=extractLeadingCheckbox(n);if(l){const g={...e,children:[d,...e.children.slice(1)]};return{checkbox:l,rest:g}}}return{checkbox:void 0,rest:e}}function list$4(e,n){const l=n.tagName==="ol",d=e.toSpecificContent(e.all(n),create$1);let g=null;l&&(g=n.properties&&n.properties.start?Number.parseInt(String(n.properties.start),10):1);const jn={type:"list",ordered:l,start:g,spread:listItemsSpread(d),children:d};return e.patch(n,jn),jn}function create$1(){return{type:"listItem",spread:!1,checked:null,children:[]}}const emptyOptions$4={};function toString(e,n){const l=emptyOptions$4,d=typeof l.includeImageAlt=="boolean"?l.includeImageAlt:!0,g=typeof l.includeHtml=="boolean"?l.includeHtml:!0;return one$3(e,d,g)}function one$3(e,n,l){if(node(e)){if("value"in e)return e.type==="html"&&!l?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return all$4(e.children,n,l)}return Array.isArray(e)?all$4(e,n,l):""}function all$4(e,n,l){const d=[];let g=-1;for(;++g<e.length;)d[g]=one$3(e[g],n,l);return d.join("")}function node(e){return!!(e&&typeof e=="object")}const phrasing$1=convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function wrapNeeded(e){let n=-1;for(;++n<e.length;){const l=e[n];if(!phrasing(l)||"children"in l&&wrapNeeded(l.children))return!0}return!1}function wrap$2(e){return runs(e,n,function(l){return l});function n(l){return l.every(function(d){return d.type==="text"?whitespace$1(d.value):!1})?[]:[{type:"paragraph",children:dropSurroundingBreaks(l)}]}}function split(e){return runs(e.children,n,l);function n(d){const g=cloneWithoutChildren(e);return g.children=d,[g]}function l(d){if("children"in d&&"children"in e){const g=cloneWithoutChildren(e),jn=cloneWithoutChildren(d);return g.children=d.children,jn.children.push(g),jn}return{...d}}}function runs(e,n,l){const d=flatten(e),g=[];let jn=[],Un=-1;for(;++Un<d.length;){const zn=d[Un];phrasing(zn)?jn.push(zn):(jn.length>0&&(g.push(...n(jn)),jn=[]),g.push(l(zn)))}return jn.length>0&&(g.push(...n(jn)),jn=[]),g}function flatten(e){const n=[];let l=-1;for(;++l<e.length;){const d=e[l];(d.type==="delete"||d.type==="link")&&wrapNeeded(d.children)?n.push(...split(d)):n.push(d)}return n}function phrasing(e){const n=e.data&&e.data.hName;return n?phrasing$2({type:"element",tagName:n,properties:{},children:[]}):phrasing$1(e)}function cloneWithoutChildren(e){return structuredClone$1({...e,children:[]})}function media(e,n){const l=n.properties||{},d=n.tagName==="video"?String(l.poster||""):"";let g=String(l.src||""),jn=-1,Un=!1,zn=e.all(n);if(visit({type:"root",children:zn},function(Qn){if(Qn.type==="link")return Un=!0,EXIT}),Un||wrapNeeded(zn))return zn;for(;!g&&++jn<n.children.length;){const Qn=n.children[jn];Qn.type==="element"&&Qn.tagName==="source"&&Qn.properties&&(g=String(Qn.properties.src||""))}if(d){const Qn={type:"image",title:null,url:e.resolve(d),alt:toString(zn)};e.patch(n,Qn),zn=[Qn]}const Kn=zn,Xn={type:"link",title:l.title?String(l.title):null,url:e.resolve(g),children:Kn};return e.patch(n,Xn),Xn}function p$1(e,n){const l=dropSurroundingBreaks(e.all(n));if(l.length>0){const d={type:"paragraph",children:l};return e.patch(n,d),d}}const defaultQuotes=['"'];function q$1(e,n){const l=e.options.quotes||defaultQuotes;e.qNesting++;const d=e.all(n);e.qNesting--;const g=l[e.qNesting%l.length],jn=d[0],Un=d[d.length-1],zn=g.charAt(0),qn=g.length>1?g.charAt(1):g;return jn&&jn.type==="text"?jn.value=zn+jn.value:d.unshift({type:"text",value:zn}),Un&&Un.type==="text"?Un.value+=qn:d.push({type:"text",value:qn}),d}function root$4(e,n){let l=e.all(n);(e.options.document||wrapNeeded(l))&&(l=wrap$2(l));const d={type:"root",children:l};return e.patch(n,d),d}function select(e,n){const l=findSelectedOptions(n);let d=-1;const g=[];for(;++d<l.length;){const jn=l[d];g.push(jn[1]?jn[1]+" ("+jn[0]+")":jn[0])}if(g.length>0){const jn={type:"text",value:g.join(", ")};return e.patch(n,jn),jn}}function strong$2(e,n){const d={type:"strong",children:e.all(n)};return e.patch(n,d),d}function tableCell$1(e,n){const d={type:"tableCell",children:e.all(n)};if(e.patch(n,d),n.properties){const g=n.properties.rowSpan,jn=n.properties.colSpan;if(g||jn){const Un=d.data||(d.data={});g&&(Un.hastUtilToMdastTemporaryRowSpan=g),jn&&(Un.hastUtilToMdastTemporaryColSpan=jn)}}return d}function tableRow$1(e,n){const d={type:"tableRow",children:e.toSpecificContent(e.all(n),create)};return e.patch(n,d),d}function create(){return{type:"tableCell",children:[]}}function table$1(e,n){if(e.inTable){const Kn={type:"text",value:toText(n)};return e.patch(n,Kn),Kn}e.inTable=!0;const{align:l,headless:d}=inspect(n),g=e.toSpecificContent(e.all(n),createRow);d&&g.unshift(createRow());let jn=-1;for(;++jn<g.length;){const Kn=g[jn],Xn=e.toSpecificContent(Kn.children,createCell);Kn.children=Xn}let Un=1;for(jn=-1;++jn<g.length;){const Kn=g[jn].children;let Xn=-1;for(;++Xn<Kn.length;){const Qn=Kn[Xn];if(Qn.data){const Jn=Qn.data,Ai=Number.parseInt(String(Jn.hastUtilToMdastTemporaryColSpan),10)||1,Ri=Number.parseInt(String(Jn.hastUtilToMdastTemporaryRowSpan),10)||1;if(Ai>1||Ri>1){let Ni=jn-1;for(;++Ni<jn+Ri;){let $i=Xn-1;for(;++$i<Xn+Ai&&g[Ni];){const Li=[];(Ni!==jn||$i!==Xn)&&Li.push({type:"tableCell",children:[]}),g[Ni].children.splice($i,0,...Li)}}}"hastUtilToMdastTemporaryColSpan"in Qn.data&&delete Qn.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in Qn.data&&delete Qn.data.hastUtilToMdastTemporaryRowSpan,Object.keys(Qn.data).length===0&&delete Qn.data}}Kn.length>Un&&(Un=Kn.length)}for(jn=-1;++jn<g.length;){const Kn=g[jn].children;let Xn=Kn.length-1;for(;++Xn<Un;)Kn.push({type:"tableCell",children:[]})}let zn=l.length-1;for(;++zn<Un;)l.push(null);e.inTable=!1;const qn={type:"table",align:l,children:g};return e.patch(n,qn),qn}function inspect(e){const n={align:[null],headless:!0};let l=0,d=0;return visit(e,function(g){if(g.type==="element"){if(g.tagName==="table"&&e!==g)return SKIP;if((g.tagName==="th"||g.tagName==="td")&&g.properties){if(!n.align[d]){const jn=String(g.properties.align||"")||null;(jn==="center"||jn==="left"||jn==="right"||jn===null)&&(n.align[d]=jn)}n.headless&&l<2&&g.tagName==="th"&&(n.headless=!1),d++}else g.tagName==="thead"?n.headless=!1:g.tagName==="tr"&&(l++,d=0)}}),n}function createCell(){return{type:"tableCell",children:[]}}function createRow(){return{type:"tableRow",children:[]}}function text$7(e,n){const l={type:"text",value:n.value};return e.patch(n,l),l}function textarea(e,n){const l={type:"text",value:toText(n)};return e.patch(n,l),l}function wbr(e,n){const l={type:"text",value:""};return e.patch(n,l),l}const nodeHandlers={comment:comment$2,doctype:ignore$1,root:root$4,text:text$7},handlers$1={applet:ignore$1,area:ignore$1,basefont:ignore$1,bgsound:ignore$1,caption:ignore$1,col:ignore$1,colgroup:ignore$1,command:ignore$1,content:ignore$1,datalist:ignore$1,dialog:ignore$1,element:ignore$1,embed:ignore$1,frame:ignore$1,frameset:ignore$1,isindex:ignore$1,keygen:ignore$1,link:ignore$1,math:ignore$1,menu:ignore$1,menuitem:ignore$1,meta:ignore$1,nextid:ignore$1,noembed:ignore$1,noframes:ignore$1,optgroup:ignore$1,option:ignore$1,param:ignore$1,script:ignore$1,shadow:ignore$1,source:ignore$1,spacer:ignore$1,style:ignore$1,svg:ignore$1,template:ignore$1,title:ignore$1,track:ignore$1,abbr:all$3,acronym:all$3,bdi:all$3,bdo:all$3,big:all$3,blink:all$3,button:all$3,canvas:all$3,cite:all$3,data:all$3,details:all$3,dfn:all$3,font:all$3,ins:all$3,label:all$3,map:all$3,marquee:all$3,meter:all$3,nobr:all$3,noscript:all$3,object:all$3,output:all$3,progress:all$3,rb:all$3,rbc:all$3,rp:all$3,rt:all$3,rtc:all$3,ruby:all$3,slot:all$3,small:all$3,span:all$3,sup:all$3,sub:all$3,tbody:all$3,tfoot:all$3,thead:all$3,time:all$3,address:flow$2,article:flow$2,aside:flow$2,body:flow$2,center:flow$2,div:flow$2,fieldset:flow$2,figcaption:flow$2,figure:flow$2,form:flow$2,footer:flow$2,header:flow$2,hgroup:flow$2,html:flow$2,legend:flow$2,main:flow$2,multicol:flow$2,nav:flow$2,picture:flow$2,section:flow$2,a,audio:media,b:strong$2,base,blockquote:blockquote$2,br:br$2,code:inlineCode$2,dir:list$4,dl,dt:li$2,dd:li$2,del:del$1,em:em$1,h1:heading$2,h2:heading$2,h3:heading$2,h4:heading$2,h5:heading$2,h6:heading$2,hr:hr$1,i:em$1,iframe,img,image:img,input,kbd:inlineCode$2,li:li$2,listing:code$3,mark:em$1,ol:list$4,p:p$1,plaintext:code$3,pre:code$3,q:q$1,s:del$1,samp:inlineCode$2,select,strike:del$1,strong:strong$2,summary:p$1,table:table$1,td:tableCell$1,textarea,th:tableCell$1,tr:tableRow$1,tt:inlineCode$2,u:em$1,ul:list$4,var:inlineCode$2,video:media,wbr,xmp:code$3};function all$3(e,n){return e.all(n)}function flow$2(e,n){return e.toFlow(e.all(n))}function ignore$1(){}const own$7={}.hasOwnProperty;function createState$1(e){return{all:all$2,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...handlers$1,...e.handlers},inTable:!1,nodeHandlers:{...nodeHandlers,...e.nodeHandlers},one:one$2,options:e,patch:patch$1,qNesting:0,resolve,toFlow,toSpecificContent}}function all$2(e){const n=e.children||[],l=[];let d=-1;for(;++d<n.length;){const g=n[d],jn=this.one(g,e);Array.isArray(jn)?l.push(...jn):jn&&l.push(jn)}return l}function one$2(e,n){if(e.type==="element"){if(e.properties&&e.properties.dataMdast==="ignore")return;if(own$7.call(this.handlers,e.tagName))return this.handlers[e.tagName](this,e,n)||void 0}else if(own$7.call(this.nodeHandlers,e.type))return this.nodeHandlers[e.type](this,e,n)||void 0;if("value"in e&&typeof e.value=="string"){const l={type:"text",value:e.value};return this.patch(e,l),l}if("children"in e)return this.all(e)}function patch$1(e,n){e.position&&(n.position=position(e))}function resolve(e){const n=this.frozenBaseUrl;return e==null?"":n?String(new URL(e,n)):e}function toFlow(e){return wrap$2(e)}function toSpecificContent(e,n){const l=n(),d=[];let g=[],jn=-1;for(;++jn<e.length;){const zn=e[jn];if(Un(zn))g.length>0&&(zn.children.unshift(...g),g=[]),d.push(zn);else{const qn=zn;g.push(qn)}}if(g.length>0){let zn=d[d.length-1];zn||(zn=n(),d.push(zn)),zn.children.push(...g),g=[]}return d;function Un(zn){return zn.type===l.type}}const emptyOptions$3={};function toMdast(e,n){const l=structuredClone$1(e),d=n||emptyOptions$3,g=rehypeMinifyWhitespace({newlines:d.newlines===!0}),jn=createState$1(d);let Un;g(l),visit(l,function(qn){if(qn&&qn.type==="element"&&qn.properties){const Kn=String(qn.properties.id||"")||void 0;Kn&&!jn.elementById.has(Kn)&&jn.elementById.set(Kn,qn)}});const zn=jn.one(l,void 0);return zn?Array.isArray(zn)?Un={type:"root",children:zn}:Un=zn:Un={type:"root",children:[]},visit(Un,function(qn,Kn,Xn){if(qn.type==="text"&&Kn!==void 0&&Xn){const Qn=Xn.children[Kn-1];if(Qn&&Qn.type===qn.type)return Qn.value+=qn.value,Xn.children.splice(Kn,1),Qn.position&&qn.position&&(Qn.position.end=qn.position.end),Kn-1;if(qn.value=qn.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),Xn&&(Xn.type==="heading"||Xn.type==="paragraph"||Xn.type==="root")&&(Kn||(qn.value=qn.value.replace(/^[\t ]+/,"")),Kn===Xn.children.length-1&&(qn.value=qn.value.replace(/[\t ]+$/,""))),!qn.value)return Xn.children.splice(Kn,1),Kn}}),Un}const defaults$1={document:!0};function rehypeRemark(e,n){return e&&"run"in e?async function(l,d){const g=toMdast(l,{...defaults$1,...n});await e.run(g,d)}:function(l){return toMdast(l,{...defaults$1,...e})}}function ccount(e,n){const l=String(e);if(typeof n!="string")throw new TypeError("Expected character");let d=0,g=l.indexOf(n);for(;g!==-1;)d++,g=l.indexOf(n,g+n.length);return d}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(e){return e!==null&&(e<32||e===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(e){return e!==null&&e<-2}function markdownLineEndingOrSpace(e){return e!==null&&(e<0||e===32)}function markdownSpace(e){return e===-2||e===-1||e===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(e){return n;function n(l){return l!==null&&l>-1&&e.test(String.fromCharCode(l))}}function escapeStringRegexp(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(e,n,l){const g=convert((l||{}).ignore||[]),jn=toPairs(n);let Un=-1;for(;++Un<jn.length;)visitParents(e,"text",zn);function zn(Kn,Xn){let Qn=-1,Jn;for(;++Qn<Xn.length;){const Ai=Xn[Qn],Ri=Jn?Jn.children:void 0;if(g(Ai,Ri?Ri.indexOf(Ai):void 0,Jn))return;Jn=Ai}if(Jn)return qn(Kn,Xn)}function qn(Kn,Xn){const Qn=Xn[Xn.length-1],Jn=jn[Un][0],Ai=jn[Un][1];let Ri=0;const $i=Qn.children.indexOf(Kn);let Li=!1,ji=[];Jn.lastIndex=0;let Fi=Jn.exec(Kn.value);for(;Fi;){const qi=Fi.index,zi={index:Fi.index,input:Fi.input,stack:[...Xn,Kn]};let Gi=Ai(...Fi,zi);if(typeof Gi=="string"&&(Gi=Gi.length>0?{type:"text",value:Gi}:void 0),Gi===!1?Jn.lastIndex=qi+1:(Ri!==qi&&ji.push({type:"text",value:Kn.value.slice(Ri,qi)}),Array.isArray(Gi)?ji.push(...Gi):Gi&&ji.push(Gi),Ri=qi+Fi[0].length,Li=!0),!Jn.global)break;Fi=Jn.exec(Kn.value)}return Li?(Ri<Kn.value.length&&ji.push({type:"text",value:Kn.value.slice(Ri)}),Qn.children.splice($i,1,...ji)):ji=[Kn],$i+ji.length}}function toPairs(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const l=!e[0]||Array.isArray(e[0])?e:[e];let d=-1;for(;++d<l.length;){const g=l[d];n.push([toExpression(g[0]),toFunction(g[1])])}return n}function toExpression(e){return typeof e=="string"?new RegExp(escapeStringRegexp(e),"g"):e}function toFunction(e){return typeof e=="function"?e:function(){return e}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function enterLiteralAutolinkValue(e){this.config.enter.autolinkProtocol.call(this,e)}function exitLiteralAutolinkHttp(e){this.config.exit.autolinkProtocol.call(this,e)}function exitLiteralAutolinkWww(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(e)}function exitLiteralAutolinkEmail(e){this.config.exit.autolinkEmail.call(this,e)}function exitLiteralAutolink(e){this.exit(e)}function transformGfmAutolinkLiterals(e){findAndReplace(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),findEmail]],{ignore:["link","linkReference"]})}function findUrl(e,n,l,d,g){let jn="";if(!previous$1(g)||(/^w/i.test(n)&&(l=n+l,n="",jn="http://"),!isCorrectDomain(l)))return!1;const Un=splitUrl(l+d);if(!Un[0])return!1;const zn={type:"link",title:null,url:jn+n+Un[0],children:[{type:"text",value:n+Un[0]}]};return Un[1]?[zn,{type:"text",value:Un[1]}]:zn}function findEmail(e,n,l,d){return!previous$1(d,!0)||/[-\d_]$/.test(l)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+l,children:[{type:"text",value:n+"@"+l}]}}function isCorrectDomain(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function splitUrl(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let l=n[0],d=l.indexOf(")");const g=ccount(e,"(");let jn=ccount(e,")");for(;d!==-1&&g>jn;)e+=l.slice(0,d+1),l=l.slice(d+1),d=l.indexOf(")"),jn++;return[e,l]}function previous$1(e,n){const l=e.input.charCodeAt(e.index-1);return(e.index===0||unicodeWhitespace(l)||unicodePunctuation(l))&&(!n||l!==47)}function normalizeIdentifier(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}footnoteReference$1.peek=footnoteReferencePeek;function enterFootnoteCallString(){this.buffer()}function enterFootnoteCall(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function enterFootnoteDefinitionLabelString(){this.buffer()}function enterFootnoteDefinition(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function exitFootnoteCallString(e){const n=this.resume(),l=this.stack[this.stack.length-1];l.type,l.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),l.label=n}function exitFootnoteCall(e){this.exit(e)}function exitFootnoteDefinitionLabelString(e){const n=this.resume(),l=this.stack[this.stack.length-1];l.type,l.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),l.label=n}function exitFootnoteDefinition(e){this.exit(e)}function footnoteReferencePeek(){return"["}function footnoteReference$1(e,n,l,d){const g=l.createTracker(d);let jn=g.move("[^");const Un=l.enter("footnoteReference"),zn=l.enter("reference");return jn+=g.move(l.safe(l.associationId(e),{after:"]",before:jn})),zn(),Un(),jn+=g.move("]"),jn}function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteCallString:enterFootnoteCallString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteDefinition:enterFootnoteDefinition},exit:{gfmFootnoteCallString:exitFootnoteCallString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteDefinition:exitFootnoteDefinition}}}function gfmFootnoteToMarkdown(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:l,footnoteReference:footnoteReference$1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function l(d,g,jn,Un){const zn=jn.createTracker(Un);let qn=zn.move("[^");const Kn=jn.enter("footnoteDefinition"),Xn=jn.enter("label");return qn+=zn.move(jn.safe(jn.associationId(d),{before:qn,after:"]"})),Xn(),qn+=zn.move("]:"),d.children&&d.children.length>0&&(zn.shift(4),qn+=zn.move((n?`
`:" ")+jn.indentLines(jn.containerFlow(d,zn.current()),n?mapAll:mapExceptFirst))),Kn(),qn}}function mapExceptFirst(e,n,l){return n===0?e:mapAll(e,n,l)}function mapAll(e,n,l){return(l?"":"    ")+e}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(e){this.enter({type:"delete",children:[]},e)}function exitStrikethrough(e){this.exit(e)}function handleDelete(e,n,l,d){const g=l.createTracker(d),jn=l.enter("strikethrough");let Un=g.move("~~");return Un+=l.containerPhrasing(e,{...g.current(),before:Un,after:"~"}),Un+=g.move("~~"),jn(),Un}function peekDelete(){return"~"}function defaultStringLength(e){return e.length}function markdownTable(e,n){const l=n||{},d=(l.align||[]).concat(),g=l.stringLength||defaultStringLength,jn=[],Un=[],zn=[],qn=[];let Kn=0,Xn=-1;for(;++Xn<e.length;){const Ni=[],$i=[];let Li=-1;for(e[Xn].length>Kn&&(Kn=e[Xn].length);++Li<e[Xn].length;){const ji=serialize(e[Xn][Li]);if(l.alignDelimiters!==!1){const Fi=g(ji);$i[Li]=Fi,(qn[Li]===void 0||Fi>qn[Li])&&(qn[Li]=Fi)}Ni.push(ji)}Un[Xn]=Ni,zn[Xn]=$i}let Qn=-1;if(typeof d=="object"&&"length"in d)for(;++Qn<Kn;)jn[Qn]=toAlignment(d[Qn]);else{const Ni=toAlignment(d);for(;++Qn<Kn;)jn[Qn]=Ni}Qn=-1;const Jn=[],Ai=[];for(;++Qn<Kn;){const Ni=jn[Qn];let $i="",Li="";Ni===99?($i=":",Li=":"):Ni===108?$i=":":Ni===114&&(Li=":");let ji=l.alignDelimiters===!1?1:Math.max(1,qn[Qn]-$i.length-Li.length);const Fi=$i+"-".repeat(ji)+Li;l.alignDelimiters!==!1&&(ji=$i.length+ji+Li.length,ji>qn[Qn]&&(qn[Qn]=ji),Ai[Qn]=ji),Jn[Qn]=Fi}Un.splice(1,0,Jn),zn.splice(1,0,Ai),Xn=-1;const Ri=[];for(;++Xn<Un.length;){const Ni=Un[Xn],$i=zn[Xn];Qn=-1;const Li=[];for(;++Qn<Kn;){const ji=Ni[Qn]||"";let Fi="",qi="";if(l.alignDelimiters!==!1){const zi=qn[Qn]-($i[Qn]||0),Gi=jn[Qn];Gi===114?Fi=" ".repeat(zi):Gi===99?zi%2?(Fi=" ".repeat(zi/2+.5),qi=" ".repeat(zi/2-.5)):(Fi=" ".repeat(zi/2),qi=Fi):qi=" ".repeat(zi)}l.delimiterStart!==!1&&!Qn&&Li.push("|"),l.padding!==!1&&!(l.alignDelimiters===!1&&ji==="")&&(l.delimiterStart!==!1||Qn)&&Li.push(" "),l.alignDelimiters!==!1&&Li.push(Fi),Li.push(ji),l.alignDelimiters!==!1&&Li.push(qi),l.padding!==!1&&Li.push(" "),(l.delimiterEnd!==!1||Qn!==Kn-1)&&Li.push("|")}Ri.push(l.delimiterEnd===!1?Li.join("").replace(/ +$/,""):Li.join(""))}return Ri.join(`
`)}function serialize(e){return e==null?"":String(e)}function toAlignment(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}const own$6={}.hasOwnProperty;function zwitch(e,n){const l=n||{};function d(g,...jn){let Un=d.invalid;const zn=d.handlers;if(g&&own$6.call(g,e)){const qn=String(g[e]);Un=own$6.call(zn,qn)?zn[qn]:d.unknown}if(Un)return Un.call(this,g,...jn)}return d.handlers=l.handlers||{},d.invalid=l.invalid,d.unknown=l.unknown,d}const own$5={}.hasOwnProperty;function configure$1(e,n){let l=-1,d;if(n.extensions)for(;++l<n.extensions.length;)configure$1(e,n.extensions[l]);for(d in n)if(own$5.call(n,d))switch(d){case"extensions":break;case"unsafe":{list$3(e[d],n[d]);break}case"join":{list$3(e[d],n[d]);break}case"handlers":{map$2(e[d],n[d]);break}default:e.options[d]=n[d]}return e}function list$3(e,n){n&&e.push(...n)}function map$2(e,n){n&&Object.assign(e,n)}function blockquote$1(e,n,l,d){const g=l.enter("blockquote"),jn=l.createTracker(d);jn.move("> "),jn.shift(2);const Un=l.indentLines(l.containerFlow(e,jn.current()),map$1);return g(),Un}function map$1(e,n,l){return">"+(l?"":" ")+e}function patternInScope(e,n){return listInScope(e,n.inConstruct,!0)&&!listInScope(e,n.notInConstruct,!1)}function listInScope(e,n,l){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return l;let d=-1;for(;++d<n.length;)if(e.includes(n[d]))return!0;return!1}function hardBreak$1(e,n,l,d){let g=-1;for(;++g<l.unsafe.length;)if(l.unsafe[g].character===`
`&&patternInScope(l.stack,l.unsafe[g]))return/[ \t]/.test(d.before)?"":" ";return`\\
`}function longestStreak(e,n){const l=String(e);let d=l.indexOf(n),g=d,jn=0,Un=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;d!==-1;)d===g?++jn>Un&&(Un=jn):jn=1,g=d+n.length,d=l.indexOf(n,g);return Un}function formatCodeAsIndented(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function checkFence(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function code$2(e,n,l,d){const g=checkFence(l),jn=e.value||"",Un=g==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(e,l)){const Qn=l.enter("codeIndented"),Jn=l.indentLines(jn,map);return Qn(),Jn}const zn=l.createTracker(d),qn=g.repeat(Math.max(longestStreak(jn,g)+1,3)),Kn=l.enter("codeFenced");let Xn=zn.move(qn);if(e.lang){const Qn=l.enter(`codeFencedLang${Un}`);Xn+=zn.move(l.safe(e.lang,{before:Xn,after:" ",encode:["`"],...zn.current()})),Qn()}if(e.lang&&e.meta){const Qn=l.enter(`codeFencedMeta${Un}`);Xn+=zn.move(" "),Xn+=zn.move(l.safe(e.meta,{before:Xn,after:`
`,encode:["`"],...zn.current()})),Qn()}return Xn+=zn.move(`
`),jn&&(Xn+=zn.move(jn+`
`)),Xn+=zn.move(qn),Kn(),Xn}function map(e,n,l){return(l?"":"    ")+e}function checkQuote(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function definition$1(e,n,l,d){const g=checkQuote(l),jn=g==='"'?"Quote":"Apostrophe",Un=l.enter("definition");let zn=l.enter("label");const qn=l.createTracker(d);let Kn=qn.move("[");return Kn+=qn.move(l.safe(l.associationId(e),{before:Kn,after:"]",...qn.current()})),Kn+=qn.move("]: "),zn(),!e.url||/[\0- \u007F]/.test(e.url)?(zn=l.enter("destinationLiteral"),Kn+=qn.move("<"),Kn+=qn.move(l.safe(e.url,{before:Kn,after:">",...qn.current()})),Kn+=qn.move(">")):(zn=l.enter("destinationRaw"),Kn+=qn.move(l.safe(e.url,{before:Kn,after:e.title?" ":`
`,...qn.current()}))),zn(),e.title&&(zn=l.enter(`title${jn}`),Kn+=qn.move(" "+g),Kn+=qn.move(l.safe(e.title,{before:Kn,after:g,...qn.current()})),Kn+=qn.move(g),zn()),Un(),Kn}function checkEmphasis(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function encodeCharacterReference(e){return"&#x"+e.toString(16).toUpperCase()+";"}function classifyCharacter(e){if(e===null||markdownLineEndingOrSpace(e)||unicodeWhitespace(e))return 1;if(unicodePunctuation(e))return 2}function encodeInfo(e,n,l){const d=classifyCharacter(e),g=classifyCharacter(n);return d===void 0?g===void 0?l==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:g===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:d===1?g===void 0?{inside:!1,outside:!1}:g===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:g===void 0?{inside:!1,outside:!1}:g===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}emphasis$1.peek=emphasisPeek;function emphasis$1(e,n,l,d){const g=checkEmphasis(l),jn=l.enter("emphasis"),Un=l.createTracker(d),zn=Un.move(g);let qn=Un.move(l.containerPhrasing(e,{after:g,before:zn,...Un.current()}));const Kn=qn.charCodeAt(0),Xn=encodeInfo(d.before.charCodeAt(d.before.length-1),Kn,g);Xn.inside&&(qn=encodeCharacterReference(Kn)+qn.slice(1));const Qn=qn.charCodeAt(qn.length-1),Jn=encodeInfo(d.after.charCodeAt(0),Qn,g);Jn.inside&&(qn=qn.slice(0,-1)+encodeCharacterReference(Qn));const Ai=Un.move(g);return jn(),l.attentionEncodeSurroundingInfo={after:Jn.outside,before:Xn.outside},zn+qn+Ai}function emphasisPeek(e,n,l){return l.options.emphasis||"*"}function formatHeadingAsSetext(e,n){let l=!1;return visit(e,function(d){if("value"in d&&/\r?\n|\r/.test(d.value)||d.type==="break")return l=!0,EXIT}),!!((!e.depth||e.depth<3)&&toString(e)&&(n.options.setext||l))}function heading$1(e,n,l,d){const g=Math.max(Math.min(6,e.depth||1),1),jn=l.createTracker(d);if(formatHeadingAsSetext(e,l)){const Xn=l.enter("headingSetext"),Qn=l.enter("phrasing"),Jn=l.containerPhrasing(e,{...jn.current(),before:`
`,after:`
`});return Qn(),Xn(),Jn+`
`+(g===1?"=":"-").repeat(Jn.length-(Math.max(Jn.lastIndexOf("\r"),Jn.lastIndexOf(`
`))+1))}const Un="#".repeat(g),zn=l.enter("headingAtx"),qn=l.enter("phrasing");jn.move(Un+" ");let Kn=l.containerPhrasing(e,{before:"# ",after:`
`,...jn.current()});return/^[\t ]/.test(Kn)&&(Kn=encodeCharacterReference(Kn.charCodeAt(0))+Kn.slice(1)),Kn=Kn?Un+" "+Kn:Un,l.options.closeAtx&&(Kn+=" "+Un),qn(),zn(),Kn}html$3.peek=htmlPeek;function html$3(e){return e.value||""}function htmlPeek(){return"<"}image$1.peek=imagePeek;function image$1(e,n,l,d){const g=checkQuote(l),jn=g==='"'?"Quote":"Apostrophe",Un=l.enter("image");let zn=l.enter("label");const qn=l.createTracker(d);let Kn=qn.move("![");return Kn+=qn.move(l.safe(e.alt,{before:Kn,after:"]",...qn.current()})),Kn+=qn.move("]("),zn(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(zn=l.enter("destinationLiteral"),Kn+=qn.move("<"),Kn+=qn.move(l.safe(e.url,{before:Kn,after:">",...qn.current()})),Kn+=qn.move(">")):(zn=l.enter("destinationRaw"),Kn+=qn.move(l.safe(e.url,{before:Kn,after:e.title?" ":")",...qn.current()}))),zn(),e.title&&(zn=l.enter(`title${jn}`),Kn+=qn.move(" "+g),Kn+=qn.move(l.safe(e.title,{before:Kn,after:g,...qn.current()})),Kn+=qn.move(g),zn()),Kn+=qn.move(")"),Un(),Kn}function imagePeek(){return"!"}imageReference$1.peek=imageReferencePeek;function imageReference$1(e,n,l,d){const g=e.referenceType,jn=l.enter("imageReference");let Un=l.enter("label");const zn=l.createTracker(d);let qn=zn.move("![");const Kn=l.safe(e.alt,{before:qn,after:"]",...zn.current()});qn+=zn.move(Kn+"]["),Un();const Xn=l.stack;l.stack=[],Un=l.enter("reference");const Qn=l.safe(l.associationId(e),{before:qn,after:"]",...zn.current()});return Un(),l.stack=Xn,jn(),g==="full"||!Kn||Kn!==Qn?qn+=zn.move(Qn+"]"):g==="shortcut"?qn=qn.slice(0,-1):qn+=zn.move("]"),qn}function imageReferencePeek(){return"!"}inlineCode$1.peek=inlineCodePeek;function inlineCode$1(e,n,l){let d=e.value||"",g="`",jn=-1;for(;new RegExp("(^|[^`])"+g+"([^`]|$)").test(d);)g+="`";for(/[^ \r\n]/.test(d)&&(/^[ \r\n]/.test(d)&&/[ \r\n]$/.test(d)||/^`|`$/.test(d))&&(d=" "+d+" ");++jn<l.unsafe.length;){const Un=l.unsafe[jn],zn=l.compilePattern(Un);let qn;if(Un.atBreak)for(;qn=zn.exec(d);){let Kn=qn.index;d.charCodeAt(Kn)===10&&d.charCodeAt(Kn-1)===13&&Kn--,d=d.slice(0,Kn)+" "+d.slice(qn.index+1)}}return g+d+g}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(e,n){const l=toString(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(l===e.url||"mailto:"+l===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}link$1.peek=linkPeek;function link$1(e,n,l,d){const g=checkQuote(l),jn=g==='"'?"Quote":"Apostrophe",Un=l.createTracker(d);let zn,qn;if(formatLinkAsAutolink(e,l)){const Xn=l.stack;l.stack=[],zn=l.enter("autolink");let Qn=Un.move("<");return Qn+=Un.move(l.containerPhrasing(e,{before:Qn,after:">",...Un.current()})),Qn+=Un.move(">"),zn(),l.stack=Xn,Qn}zn=l.enter("link"),qn=l.enter("label");let Kn=Un.move("[");return Kn+=Un.move(l.containerPhrasing(e,{before:Kn,after:"](",...Un.current()})),Kn+=Un.move("]("),qn(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(qn=l.enter("destinationLiteral"),Kn+=Un.move("<"),Kn+=Un.move(l.safe(e.url,{before:Kn,after:">",...Un.current()})),Kn+=Un.move(">")):(qn=l.enter("destinationRaw"),Kn+=Un.move(l.safe(e.url,{before:Kn,after:e.title?" ":")",...Un.current()}))),qn(),e.title&&(qn=l.enter(`title${jn}`),Kn+=Un.move(" "+g),Kn+=Un.move(l.safe(e.title,{before:Kn,after:g,...Un.current()})),Kn+=Un.move(g),qn()),Kn+=Un.move(")"),zn(),Kn}function linkPeek(e,n,l){return formatLinkAsAutolink(e,l)?"<":"["}linkReference$1.peek=linkReferencePeek;function linkReference$1(e,n,l,d){const g=e.referenceType,jn=l.enter("linkReference");let Un=l.enter("label");const zn=l.createTracker(d);let qn=zn.move("[");const Kn=l.containerPhrasing(e,{before:qn,after:"]",...zn.current()});qn+=zn.move(Kn+"]["),Un();const Xn=l.stack;l.stack=[],Un=l.enter("reference");const Qn=l.safe(l.associationId(e),{before:qn,after:"]",...zn.current()});return Un(),l.stack=Xn,jn(),g==="full"||!Kn||Kn!==Qn?qn+=zn.move(Qn+"]"):g==="shortcut"?qn=qn.slice(0,-1):qn+=zn.move("]"),qn}function linkReferencePeek(){return"["}function checkBullet(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function checkBulletOther(e){const n=checkBullet(e),l=e.options.bulletOther;if(!l)return n==="*"?"-":"*";if(l!=="*"&&l!=="+"&&l!=="-")throw new Error("Cannot serialize items with `"+l+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(l===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+l+"`) to be different");return l}function checkBulletOrdered(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function checkRule(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function list$2(e,n,l,d){const g=l.enter("list"),jn=l.bulletCurrent;let Un=e.ordered?checkBulletOrdered(l):checkBullet(l);const zn=e.ordered?Un==="."?")":".":checkBulletOther(l);let qn=n&&l.bulletLastUsed?Un===l.bulletLastUsed:!1;if(!e.ordered){const Xn=e.children?e.children[0]:void 0;if((Un==="*"||Un==="-")&&Xn&&(!Xn.children||!Xn.children[0])&&l.stack[l.stack.length-1]==="list"&&l.stack[l.stack.length-2]==="listItem"&&l.stack[l.stack.length-3]==="list"&&l.stack[l.stack.length-4]==="listItem"&&l.indexStack[l.indexStack.length-1]===0&&l.indexStack[l.indexStack.length-2]===0&&l.indexStack[l.indexStack.length-3]===0&&(qn=!0),checkRule(l)===Un&&Xn){let Qn=-1;for(;++Qn<e.children.length;){const Jn=e.children[Qn];if(Jn&&Jn.type==="listItem"&&Jn.children&&Jn.children[0]&&Jn.children[0].type==="thematicBreak"){qn=!0;break}}}}qn&&(Un=zn),l.bulletCurrent=Un;const Kn=l.containerFlow(e,d);return l.bulletLastUsed=Un,l.bulletCurrent=jn,g(),Kn}function checkListItemIndent(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function listItem$1(e,n,l,d){const g=checkListItemIndent(l);let jn=l.bulletCurrent||checkBullet(l);n&&n.type==="list"&&n.ordered&&(jn=(typeof n.start=="number"&&n.start>-1?n.start:1)+(l.options.incrementListMarker===!1?0:n.children.indexOf(e))+jn);let Un=jn.length+1;(g==="tab"||g==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(Un=Math.ceil(Un/4)*4);const zn=l.createTracker(d);zn.move(jn+" ".repeat(Un-jn.length)),zn.shift(Un);const qn=l.enter("listItem"),Kn=l.indentLines(l.containerFlow(e,zn.current()),Xn);return qn(),Kn;function Xn(Qn,Jn,Ai){return Jn?(Ai?"":" ".repeat(Un))+Qn:(Ai?jn:jn+" ".repeat(Un-jn.length))+Qn}}function paragraph$1(e,n,l,d){const g=l.enter("paragraph"),jn=l.enter("phrasing"),Un=l.containerPhrasing(e,d);return jn(),g(),Un}function root$3(e,n,l,d){return(e.children.some(function(Un){return phrasing$1(Un)})?l.containerPhrasing:l.containerFlow).call(l,e,d)}function checkStrong(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}strong$1.peek=strongPeek;function strong$1(e,n,l,d){const g=checkStrong(l),jn=l.enter("strong"),Un=l.createTracker(d),zn=Un.move(g+g);let qn=Un.move(l.containerPhrasing(e,{after:g,before:zn,...Un.current()}));const Kn=qn.charCodeAt(0),Xn=encodeInfo(d.before.charCodeAt(d.before.length-1),Kn,g);Xn.inside&&(qn=encodeCharacterReference(Kn)+qn.slice(1));const Qn=qn.charCodeAt(qn.length-1),Jn=encodeInfo(d.after.charCodeAt(0),Qn,g);Jn.inside&&(qn=qn.slice(0,-1)+encodeCharacterReference(Qn));const Ai=Un.move(g+g);return jn(),l.attentionEncodeSurroundingInfo={after:Jn.outside,before:Xn.outside},zn+qn+Ai}function strongPeek(e,n,l){return l.options.strong||"*"}function text$6(e,n,l,d){return l.safe(e.value,d)}function checkRuleRepetition(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function thematicBreak$2(e,n,l){const d=(checkRule(l)+(l.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(l));return l.options.ruleSpaces?d.slice(0,-1):d}const handle$1={blockquote:blockquote$1,break:hardBreak$1,code:code$2,definition:definition$1,emphasis:emphasis$1,hardBreak:hardBreak$1,heading:heading$1,html:html$3,image:image$1,imageReference:imageReference$1,inlineCode:inlineCode$1,link:link$1,linkReference:linkReference$1,list:list$2,listItem:listItem$1,paragraph:paragraph$1,root:root$3,strong:strong$1,text:text$6,thematicBreak:thematicBreak$2},join=[joinDefaults];function joinDefaults(e,n,l,d){if(n.type==="code"&&formatCodeAsIndented(n,d)&&(e.type==="list"||e.type===n.type&&formatCodeAsIndented(e,d)))return!1;if("spread"in l&&typeof l.spread=="boolean")return e.type==="paragraph"&&(e.type===n.type||n.type==="definition"||n.type==="heading"&&formatHeadingAsSetext(n,d))?void 0:l.spread?1:0}const fullPhrasingSpans=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],unsafe=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"~"}],element$2=document.createElement("i");function decodeNamedCharacterReference(e){const n="&"+e+";";element$2.innerHTML=n;const l=element$2.textContent;return l.charCodeAt(l.length-1)===59&&e!=="semi"||l===n?!1:l}function decodeNumericCharacterReference(e,n){const l=Number.parseInt(e,n);return l<9||l===11||l>13&&l<32||l>126&&l<160||l>55295&&l<57344||l>64975&&l<65008||(l&65535)===65535||(l&65535)===65534||l>1114111?"":String.fromCodePoint(l)}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(e){return e.replace(characterEscapeOrReference,decode)}function decode(e,n,l){if(n)return n;if(l.charCodeAt(0)===35){const g=l.charCodeAt(1),jn=g===120||g===88;return decodeNumericCharacterReference(l.slice(jn?2:1),jn?16:10)}return decodeNamedCharacterReference(l)||e}function association(e){return e.label||!e.identifier?e.label||"":decodeString(e.identifier)}function compilePattern(e){if(!e._compiled){const n=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function containerPhrasing(e,n,l){const d=n.indexStack,g=e.children||[],jn=[];let Un=-1,zn=l.before,qn;d.push(-1);let Kn=n.createTracker(l);for(;++Un<g.length;){const Xn=g[Un];let Qn;if(d[d.length-1]=Un,Un+1<g.length){let Ri=n.handle.handlers[g[Un+1].type];Ri&&Ri.peek&&(Ri=Ri.peek),Qn=Ri?Ri(g[Un+1],e,n,{before:"",after:"",...Kn.current()}).charAt(0):""}else Qn=l.after;jn.length>0&&(zn==="\r"||zn===`
`)&&Xn.type==="html"&&(jn[jn.length-1]=jn[jn.length-1].replace(/(\r?\n|\r)$/," "),zn=" ",Kn=n.createTracker(l),Kn.move(jn.join("")));let Jn=n.handle(Xn,e,n,{...Kn.current(),after:Qn,before:zn});qn&&qn===Jn.slice(0,1)&&(Jn=encodeCharacterReference(qn.charCodeAt(0))+Jn.slice(1));const Ai=n.attentionEncodeSurroundingInfo;n.attentionEncodeSurroundingInfo=void 0,qn=void 0,Ai&&(jn.length>0&&Ai.before&&zn===jn[jn.length-1].slice(-1)&&(jn[jn.length-1]=jn[jn.length-1].slice(0,-1)+encodeCharacterReference(zn.charCodeAt(0))),Ai.after&&(qn=Qn)),Kn.move(Jn),jn.push(Jn),zn=Jn.slice(-1)}return d.pop(),jn.join("")}function containerFlow(e,n,l){const d=n.indexStack,g=e.children||[],jn=n.createTracker(l),Un=[];let zn=-1;for(d.push(-1);++zn<g.length;){const qn=g[zn];d[d.length-1]=zn,Un.push(jn.move(n.handle(qn,e,n,{before:`
`,after:`
`,...jn.current()}))),qn.type!=="list"&&(n.bulletLastUsed=void 0),zn<g.length-1&&Un.push(jn.move(between(qn,g[zn+1],e,n)))}return d.pop(),Un.join("")}function between(e,n,l,d){let g=d.join.length;for(;g--;){const jn=d.join[g](e,n,l,d);if(jn===!0||jn===1)break;if(typeof jn=="number")return`
`.repeat(1+jn);if(jn===!1)return`

<!---->

`}return`

`}const eol=/\r?\n|\r/g;function indentLines(e,n){const l=[];let d=0,g=0,jn;for(;jn=eol.exec(e);)Un(e.slice(d,jn.index)),l.push(jn[0]),d=jn.index+jn[0].length,g++;return Un(e.slice(d)),l.join("");function Un(zn){l.push(n(zn,g,!zn))}}function safe(e,n,l){const d=(l.before||"")+(n||"")+(l.after||""),g=[],jn=[],Un={};let zn=-1;for(;++zn<e.unsafe.length;){const Xn=e.unsafe[zn];if(!patternInScope(e.stack,Xn))continue;const Qn=e.compilePattern(Xn);let Jn;for(;Jn=Qn.exec(d);){const Ai="before"in Xn||!!Xn.atBreak,Ri="after"in Xn,Ni=Jn.index+(Ai?Jn[1].length:0);g.includes(Ni)?(Un[Ni].before&&!Ai&&(Un[Ni].before=!1),Un[Ni].after&&!Ri&&(Un[Ni].after=!1)):(g.push(Ni),Un[Ni]={before:Ai,after:Ri})}}g.sort(numerical);let qn=l.before?l.before.length:0;const Kn=d.length-(l.after?l.after.length:0);for(zn=-1;++zn<g.length;){const Xn=g[zn];Xn<qn||Xn>=Kn||Xn+1<Kn&&g[zn+1]===Xn+1&&Un[Xn].after&&!Un[Xn+1].before&&!Un[Xn+1].after||g[zn-1]===Xn-1&&Un[Xn].before&&!Un[Xn-1].before&&!Un[Xn-1].after||(qn!==Xn&&jn.push(escapeBackslashes(d.slice(qn,Xn),"\\")),qn=Xn,/[!-/:-@[-`{-~]/.test(d.charAt(Xn))&&(!l.encode||!l.encode.includes(d.charAt(Xn)))?jn.push("\\"):(jn.push(encodeCharacterReference(d.charCodeAt(Xn))),qn++))}return jn.push(escapeBackslashes(d.slice(qn,Kn),l.after)),jn.join("")}function numerical(e,n){return e-n}function escapeBackslashes(e,n){const l=/\\(?=[!-/:-@[-`{-~])/g,d=[],g=[],jn=e+n;let Un=-1,zn=0,qn;for(;qn=l.exec(jn);)d.push(qn.index);for(;++Un<d.length;)zn!==d[Un]&&g.push(e.slice(zn,d[Un])),g.push("\\"),zn=d[Un];return g.push(e.slice(zn)),g.join("")}function track(e){const n=e||{},l=n.now||{};let d=n.lineShift||0,g=l.line||1,jn=l.column||1;return{move:qn,current:Un,shift:zn};function Un(){return{now:{line:g,column:jn},lineShift:d}}function zn(Kn){d+=Kn}function qn(Kn){const Xn=Kn||"",Qn=Xn.split(/\r?\n|\r/g),Jn=Qn[Qn.length-1];return g+=Qn.length-1,jn=Qn.length===1?jn+Jn.length:1+Jn.length+d,Xn}}function toMarkdown(e,n){const l=n||{},d={associationId:association,containerPhrasing:containerPhrasingBound,containerFlow:containerFlowBound,createTracker:track,compilePattern,enter:jn,handlers:{...handle$1},handle:void 0,indentLines,indexStack:[],join:[...join],options:{},safe:safeBound,stack:[],unsafe:[...unsafe]};configure$1(d,l),d.options.tightDefinitions&&d.join.push(joinDefinition),d.handle=zwitch("type",{invalid:invalid$1,unknown:unknown$1,handlers:d.handlers});let g=d.handle(e,void 0,d,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return g&&g.charCodeAt(g.length-1)!==10&&g.charCodeAt(g.length-1)!==13&&(g+=`
`),g;function jn(Un){return d.stack.push(Un),zn;function zn(){d.stack.pop()}}}function invalid$1(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function unknown$1(e){const n=e;throw new Error("Cannot handle unknown node `"+n.type+"`")}function joinDefinition(e,n){if(e.type==="definition"&&e.type===n.type)return 0}function containerPhrasingBound(e,n){return containerPhrasing(e,this,n)}function containerFlowBound(e,n){return containerFlow(e,this,n)}function safeBound(e,n){return safe(this,e,n)}function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit$1,tableHeader:exit$1,tableRow:exit$1}}}function enterTable(e){const n=e._align;this.enter({type:"table",align:n.map(function(l){return l==="none"?null:l}),children:[]},e),this.data.inTable=!0}function exitTable(e){this.exit(e),this.data.inTable=void 0}function enterRow(e){this.enter({type:"tableRow",children:[]},e)}function exit$1(e){this.exit(e)}function enterCell(e){this.enter({type:"tableCell",children:[]},e)}function exitCodeText(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,replace));const l=this.stack[this.stack.length-1];l.type,l.value=n,this.exit(e)}function replace(e,n){return n==="|"?n:e}function gfmTableToMarkdown(e){const n=e||{},l=n.tableCellPadding,d=n.tablePipeAlign,g=n.stringLength,jn=l?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:Jn,table:Un,tableCell:qn,tableRow:zn}};function Un(Ai,Ri,Ni,$i){return Kn(Xn(Ai,Ni,$i),Ai.align)}function zn(Ai,Ri,Ni,$i){const Li=Qn(Ai,Ni,$i),ji=Kn([Li]);return ji.slice(0,ji.indexOf(`
`))}function qn(Ai,Ri,Ni,$i){const Li=Ni.enter("tableCell"),ji=Ni.enter("phrasing"),Fi=Ni.containerPhrasing(Ai,{...$i,before:jn,after:jn});return ji(),Li(),Fi}function Kn(Ai,Ri){return markdownTable(Ai,{align:Ri,alignDelimiters:d,padding:l,stringLength:g})}function Xn(Ai,Ri,Ni){const $i=Ai.children;let Li=-1;const ji=[],Fi=Ri.enter("table");for(;++Li<$i.length;)ji[Li]=Qn($i[Li],Ri,Ni);return Fi(),ji}function Qn(Ai,Ri,Ni){const $i=Ai.children;let Li=-1;const ji=[],Fi=Ri.enter("tableRow");for(;++Li<$i.length;)ji[Li]=qn($i[Li],Ai,Ri,Ni);return Fi(),ji}function Jn(Ai,Ri,Ni){let $i=handle$1.inlineCode(Ai,Ri,Ni);return Ni.stack.includes("tableCell")&&($i=$i.replace(/\|/g,"\\$&")),$i}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(e){const n=this.stack[this.stack.length-2];n.type,n.checked=e.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const l=this.stack[this.stack.length-1];l.type;const d=l.children[0];if(d&&d.type==="text"){const g=n.children;let jn=-1,Un;for(;++jn<g.length;){const zn=g[jn];if(zn.type==="paragraph"){Un=zn;break}}Un===l&&(d.value=d.value.slice(1),d.value.length===0?l.children.shift():l.position&&d.position&&typeof d.position.start.offset=="number"&&(d.position.start.column++,d.position.start.offset++,l.position.start=Object.assign({},d.position.start)))}}this.exit(e)}function listItemWithTaskListItem(e,n,l,d){const g=e.children[0],jn=typeof e.checked=="boolean"&&g&&g.type==="paragraph",Un="["+(e.checked?"x":" ")+"] ",zn=l.createTracker(d);jn&&zn.move(Un);let qn=handle$1.listItem(e,n,l,{...d,...zn.current()});return jn&&(qn=qn.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,Kn)),qn;function Kn(Xn){return Xn+Un}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(e){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(e),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(e),gfmTaskListItemToMarkdown()]}}function splice(e,n,l,d){const g=e.length;let jn=0,Un;if(n<0?n=-n>g?0:g+n:n=n>g?g:n,l=l>0?l:0,d.length<1e4)Un=Array.from(d),Un.unshift(n,l),e.splice(...Un);else for(l&&e.splice(n,l);jn<d.length;)Un=d.slice(jn,jn+1e4),Un.unshift(n,0),e.splice(...Un),jn+=1e4,n+=1e4}function push(e,n){return e.length>0?(splice(e,e.length,0,n),e):n}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(e){const n={};let l=-1;for(;++l<e.length;)syntaxExtension(n,e[l]);return n}function syntaxExtension(e,n){let l;for(l in n){const g=(hasOwnProperty.call(e,l)?e[l]:void 0)||(e[l]={}),jn=n[l];let Un;if(jn)for(Un in jn){hasOwnProperty.call(g,Un)||(g[Un]=[]);const zn=jn[Un];constructs(g[Un],Array.isArray(zn)?zn:zn?[zn]:[])}}}function constructs(e,n){let l=-1;const d=[];for(;++l<n.length;)(n[l].add==="after"?e:d).push(n[l]);splice(e,0,0,d)}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain$1={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={name:"wwwAutolink",tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={name:"protocolAutolink",tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={name:"emailAutolink",tokenize:tokenizeEmailAutolink,previous:previousEmail},text$5={};function gfmAutolinkLiteral(){return{text:text$5}}let code$1=48;for(;code$1<123;)text$5[code$1]=emailAutolink,code$1++,code$1===58?code$1=65:code$1===91&&(code$1=97);text$5[43]=emailAutolink;text$5[45]=emailAutolink;text$5[46]=emailAutolink;text$5[95]=emailAutolink;text$5[72]=[emailAutolink,protocolAutolink];text$5[104]=[emailAutolink,protocolAutolink];text$5[87]=[emailAutolink,wwwAutolink];text$5[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(e,n,l){const d=this;let g,jn;return Un;function Un(Qn){return!gfmAtext(Qn)||!previousEmail.call(d,d.previous)||previousUnbalanced(d.events)?l(Qn):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),zn(Qn))}function zn(Qn){return gfmAtext(Qn)?(e.consume(Qn),zn):Qn===64?(e.consume(Qn),qn):l(Qn)}function qn(Qn){return Qn===46?e.check(emailDomainDotTrail,Xn,Kn)(Qn):Qn===45||Qn===95||asciiAlphanumeric(Qn)?(jn=!0,e.consume(Qn),qn):Xn(Qn)}function Kn(Qn){return e.consume(Qn),g=!0,qn}function Xn(Qn){return jn&&g&&asciiAlpha(d.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(Qn)):l(Qn)}}function tokenizeWwwAutolink(e,n,l){const d=this;return g;function g(Un){return Un!==87&&Un!==119||!previousWww.call(d,d.previous)||previousUnbalanced(d.events)?l(Un):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(wwwPrefix,e.attempt(domain$1,e.attempt(path,jn),l),l)(Un))}function jn(Un){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(Un)}}function tokenizeProtocolAutolink(e,n,l){const d=this;let g="",jn=!1;return Un;function Un(Qn){return(Qn===72||Qn===104)&&previousProtocol.call(d,d.previous)&&!previousUnbalanced(d.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),g+=String.fromCodePoint(Qn),e.consume(Qn),zn):l(Qn)}function zn(Qn){if(asciiAlpha(Qn)&&g.length<5)return g+=String.fromCodePoint(Qn),e.consume(Qn),zn;if(Qn===58){const Jn=g.toLowerCase();if(Jn==="http"||Jn==="https")return e.consume(Qn),qn}return l(Qn)}function qn(Qn){return Qn===47?(e.consume(Qn),jn?Kn:(jn=!0,qn)):l(Qn)}function Kn(Qn){return Qn===null||asciiControl(Qn)||markdownLineEndingOrSpace(Qn)||unicodeWhitespace(Qn)||unicodePunctuation(Qn)?l(Qn):e.attempt(domain$1,e.attempt(path,Xn),l)(Qn)}function Xn(Qn){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(Qn)}}function tokenizeWwwPrefix(e,n,l){let d=0;return g;function g(Un){return(Un===87||Un===119)&&d<3?(d++,e.consume(Un),g):Un===46&&d===3?(e.consume(Un),jn):l(Un)}function jn(Un){return Un===null?l(Un):n(Un)}}function tokenizeDomain(e,n,l){let d,g,jn;return Un;function Un(Kn){return Kn===46||Kn===95?e.check(trail,qn,zn)(Kn):Kn===null||markdownLineEndingOrSpace(Kn)||unicodeWhitespace(Kn)||Kn!==45&&unicodePunctuation(Kn)?qn(Kn):(jn=!0,e.consume(Kn),Un)}function zn(Kn){return Kn===95?d=!0:(g=d,d=void 0),e.consume(Kn),Un}function qn(Kn){return g||d||!jn?l(Kn):n(Kn)}}function tokenizePath(e,n){let l=0,d=0;return g;function g(Un){return Un===40?(l++,e.consume(Un),g):Un===41&&d<l?jn(Un):Un===33||Un===34||Un===38||Un===39||Un===41||Un===42||Un===44||Un===46||Un===58||Un===59||Un===60||Un===63||Un===93||Un===95||Un===126?e.check(trail,n,jn)(Un):Un===null||markdownLineEndingOrSpace(Un)||unicodeWhitespace(Un)?n(Un):(e.consume(Un),g)}function jn(Un){return Un===41&&d++,e.consume(Un),g}}function tokenizeTrail(e,n,l){return d;function d(zn){return zn===33||zn===34||zn===39||zn===41||zn===42||zn===44||zn===46||zn===58||zn===59||zn===63||zn===95||zn===126?(e.consume(zn),d):zn===38?(e.consume(zn),jn):zn===93?(e.consume(zn),g):zn===60||zn===null||markdownLineEndingOrSpace(zn)||unicodeWhitespace(zn)?n(zn):l(zn)}function g(zn){return zn===null||zn===40||zn===91||markdownLineEndingOrSpace(zn)||unicodeWhitespace(zn)?n(zn):d(zn)}function jn(zn){return asciiAlpha(zn)?Un(zn):l(zn)}function Un(zn){return zn===59?(e.consume(zn),d):asciiAlpha(zn)?(e.consume(zn),Un):l(zn)}}function tokenizeEmailDomainDotTrail(e,n,l){return d;function d(jn){return e.consume(jn),g}function g(jn){return asciiAlphanumeric(jn)?l(jn):n(jn)}}function previousWww(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||markdownLineEndingOrSpace(e)}function previousProtocol(e){return!asciiAlpha(e)}function previousEmail(e){return!(e===47||gfmAtext(e))}function gfmAtext(e){return e===43||e===45||e===46||e===95||asciiAlphanumeric(e)}function previousUnbalanced(e){let n=e.length,l=!1;for(;n--;){const d=e[n][1];if((d.type==="labelLink"||d.type==="labelImage")&&!d._balanced){l=!0;break}if(d._gfmAutolinkLiteralWalkedInto){l=!1;break}}return e.length>0&&!l&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),l}function normalizeUri(e){const n=[];let l=-1,d=0,g=0;for(;++l<e.length;){const jn=e.charCodeAt(l);let Un="";if(jn===37&&asciiAlphanumeric(e.charCodeAt(l+1))&&asciiAlphanumeric(e.charCodeAt(l+2)))g=2;else if(jn<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(jn))||(Un=String.fromCharCode(jn));else if(jn>55295&&jn<57344){const zn=e.charCodeAt(l+1);jn<56320&&zn>56319&&zn<57344?(Un=String.fromCharCode(jn,zn),g=1):Un=""}else Un=String.fromCharCode(jn);Un&&(n.push(e.slice(d,l),encodeURIComponent(Un)),d=l+g+1,Un=""),g&&(l+=g,g=0)}return n.join("")+e.slice(d)}function resolveAll(e,n,l){const d=[];let g=-1;for(;++g<e.length;){const jn=e[g].resolveAll;jn&&!d.includes(jn)&&(n=jn(n,l),d.push(jn))}return n}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(e,n){let l=-1,d,g,jn,Un,zn,qn,Kn,Xn;for(;++l<e.length;)if(e[l][0]==="enter"&&e[l][1].type==="attentionSequence"&&e[l][1]._close){for(d=l;d--;)if(e[d][0]==="exit"&&e[d][1].type==="attentionSequence"&&e[d][1]._open&&n.sliceSerialize(e[d][1]).charCodeAt(0)===n.sliceSerialize(e[l][1]).charCodeAt(0)){if((e[d][1]._close||e[l][1]._open)&&(e[l][1].end.offset-e[l][1].start.offset)%3&&!((e[d][1].end.offset-e[d][1].start.offset+e[l][1].end.offset-e[l][1].start.offset)%3))continue;qn=e[d][1].end.offset-e[d][1].start.offset>1&&e[l][1].end.offset-e[l][1].start.offset>1?2:1;const Qn={...e[d][1].end},Jn={...e[l][1].start};movePoint(Qn,-qn),movePoint(Jn,qn),Un={type:qn>1?"strongSequence":"emphasisSequence",start:Qn,end:{...e[d][1].end}},zn={type:qn>1?"strongSequence":"emphasisSequence",start:{...e[l][1].start},end:Jn},jn={type:qn>1?"strongText":"emphasisText",start:{...e[d][1].end},end:{...e[l][1].start}},g={type:qn>1?"strong":"emphasis",start:{...Un.start},end:{...zn.end}},e[d][1].end={...Un.start},e[l][1].start={...zn.end},Kn=[],e[d][1].end.offset-e[d][1].start.offset&&(Kn=push(Kn,[["enter",e[d][1],n],["exit",e[d][1],n]])),Kn=push(Kn,[["enter",g,n],["enter",Un,n],["exit",Un,n],["enter",jn,n]]),Kn=push(Kn,resolveAll(n.parser.constructs.insideSpan.null,e.slice(d+1,l),n)),Kn=push(Kn,[["exit",jn,n],["enter",zn,n],["exit",zn,n],["exit",g,n]]),e[l][1].end.offset-e[l][1].start.offset?(Xn=2,Kn=push(Kn,[["enter",e[l][1],n],["exit",e[l][1],n]])):Xn=0,splice(e,d-1,l-d+3,Kn),l=d+Kn.length-Xn-2;break}}for(l=-1;++l<e.length;)e[l][1].type==="attentionSequence"&&(e[l][1].type="data");return e}function tokenizeAttention(e,n){const l=this.parser.constructs.attentionMarkers.null,d=this.previous,g=classifyCharacter(d);let jn;return Un;function Un(qn){return jn=qn,e.enter("attentionSequence"),zn(qn)}function zn(qn){if(qn===jn)return e.consume(qn),zn;const Kn=e.exit("attentionSequence"),Xn=classifyCharacter(qn),Qn=!Xn||Xn===2&&g||l.includes(qn),Jn=!g||g===2&&Xn||l.includes(d);return Kn._open=!!(jn===42?Qn:Qn&&(g||!Jn)),Kn._close=!!(jn===42?Jn:Jn&&(Xn||!Qn)),n(qn)}}function movePoint(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const autolink$1={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(e,n,l){let d=0;return g;function g(Ai){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(Ai),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),jn}function jn(Ai){return asciiAlpha(Ai)?(e.consume(Ai),Un):Ai===64?l(Ai):Kn(Ai)}function Un(Ai){return Ai===43||Ai===45||Ai===46||asciiAlphanumeric(Ai)?(d=1,zn(Ai)):Kn(Ai)}function zn(Ai){return Ai===58?(e.consume(Ai),d=0,qn):(Ai===43||Ai===45||Ai===46||asciiAlphanumeric(Ai))&&d++<32?(e.consume(Ai),zn):(d=0,Kn(Ai))}function qn(Ai){return Ai===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(Ai),e.exit("autolinkMarker"),e.exit("autolink"),n):Ai===null||Ai===32||Ai===60||asciiControl(Ai)?l(Ai):(e.consume(Ai),qn)}function Kn(Ai){return Ai===64?(e.consume(Ai),Xn):asciiAtext(Ai)?(e.consume(Ai),Kn):l(Ai)}function Xn(Ai){return asciiAlphanumeric(Ai)?Qn(Ai):l(Ai)}function Qn(Ai){return Ai===46?(e.consume(Ai),d=0,Xn):Ai===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(Ai),e.exit("autolinkMarker"),e.exit("autolink"),n):Jn(Ai)}function Jn(Ai){if((Ai===45||asciiAlphanumeric(Ai))&&d++<63){const Ri=Ai===45?Jn:Qn;return e.consume(Ai),Ri}return l(Ai)}}function factorySpace(e,n,l,d){const g=d?d-1:Number.POSITIVE_INFINITY;let jn=0;return Un;function Un(qn){return markdownSpace(qn)?(e.enter(l),zn(qn)):n(qn)}function zn(qn){return markdownSpace(qn)&&jn++<g?(e.consume(qn),zn):(e.exit(l),n(qn))}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(e,n,l){return d;function d(jn){return markdownSpace(jn)?factorySpace(e,g,"linePrefix")(jn):g(jn)}function g(jn){return jn===null||markdownLineEnding(jn)?n(jn):l(jn)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(e,n,l){const d=this;return g;function g(Un){if(Un===62){const zn=d.containerState;return zn.open||(e.enter("blockQuote",{_container:!0}),zn.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(Un),e.exit("blockQuoteMarker"),jn}return l(Un)}function jn(Un){return markdownSpace(Un)?(e.enter("blockQuotePrefixWhitespace"),e.consume(Un),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(Un))}}function tokenizeBlockQuoteContinuation(e,n,l){const d=this;return g;function g(Un){return markdownSpace(Un)?factorySpace(e,jn,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Un):jn(Un)}function jn(Un){return e.attempt(blockQuote,n,l)(Un)}}function exit(e){e.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(e,n,l){return d;function d(jn){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(jn),e.exit("escapeMarker"),g}function g(jn){return asciiPunctuation(jn)?(e.enter("characterEscapeValue"),e.consume(jn),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):l(jn)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(e,n,l){const d=this;let g=0,jn,Un;return zn;function zn(Qn){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(Qn),e.exit("characterReferenceMarker"),qn}function qn(Qn){return Qn===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(Qn),e.exit("characterReferenceMarkerNumeric"),Kn):(e.enter("characterReferenceValue"),jn=31,Un=asciiAlphanumeric,Xn(Qn))}function Kn(Qn){return Qn===88||Qn===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(Qn),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),jn=6,Un=asciiHexDigit,Xn):(e.enter("characterReferenceValue"),jn=7,Un=asciiDigit,Xn(Qn))}function Xn(Qn){if(Qn===59&&g){const Jn=e.exit("characterReferenceValue");return Un===asciiAlphanumeric&&!decodeNamedCharacterReference(d.sliceSerialize(Jn))?l(Qn):(e.enter("characterReferenceMarker"),e.consume(Qn),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return Un(Qn)&&g++<jn?(e.consume(Qn),Xn):l(Qn)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(e,n,l){const d=this,g={partial:!0,tokenize:zi};let jn=0,Un=0,zn;return qn;function qn(Gi){return Kn(Gi)}function Kn(Gi){const Xi=d.events[d.events.length-1];return jn=Xi&&Xi[1].type==="linePrefix"?Xi[2].sliceSerialize(Xi[1],!0).length:0,zn=Gi,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),Xn(Gi)}function Xn(Gi){return Gi===zn?(Un++,e.consume(Gi),Xn):Un<3?l(Gi):(e.exit("codeFencedFenceSequence"),markdownSpace(Gi)?factorySpace(e,Qn,"whitespace")(Gi):Qn(Gi))}function Qn(Gi){return Gi===null||markdownLineEnding(Gi)?(e.exit("codeFencedFence"),d.interrupt?n(Gi):e.check(nonLazyContinuation,Ni,qi)(Gi)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),Jn(Gi))}function Jn(Gi){return Gi===null||markdownLineEnding(Gi)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qn(Gi)):markdownSpace(Gi)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),factorySpace(e,Ai,"whitespace")(Gi)):Gi===96&&Gi===zn?l(Gi):(e.consume(Gi),Jn)}function Ai(Gi){return Gi===null||markdownLineEnding(Gi)?Qn(Gi):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),Ri(Gi))}function Ri(Gi){return Gi===null||markdownLineEnding(Gi)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),Qn(Gi)):Gi===96&&Gi===zn?l(Gi):(e.consume(Gi),Ri)}function Ni(Gi){return e.attempt(g,qi,$i)(Gi)}function $i(Gi){return e.enter("lineEnding"),e.consume(Gi),e.exit("lineEnding"),Li}function Li(Gi){return jn>0&&markdownSpace(Gi)?factorySpace(e,ji,"linePrefix",jn+1)(Gi):ji(Gi)}function ji(Gi){return Gi===null||markdownLineEnding(Gi)?e.check(nonLazyContinuation,Ni,qi)(Gi):(e.enter("codeFlowValue"),Fi(Gi))}function Fi(Gi){return Gi===null||markdownLineEnding(Gi)?(e.exit("codeFlowValue"),ji(Gi)):(e.consume(Gi),Fi)}function qi(Gi){return e.exit("codeFenced"),n(Gi)}function zi(Gi,Xi,as){let ls=0;return Zi;function Zi(Es){return Gi.enter("lineEnding"),Gi.consume(Es),Gi.exit("lineEnding"),gs}function gs(Es){return Gi.enter("codeFencedFence"),markdownSpace(Es)?factorySpace(Gi,bs,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Es):bs(Es)}function bs(Es){return Es===zn?(Gi.enter("codeFencedFenceSequence"),Ss(Es)):as(Es)}function Ss(Es){return Es===zn?(ls++,Gi.consume(Es),Ss):ls>=Un?(Gi.exit("codeFencedFenceSequence"),markdownSpace(Es)?factorySpace(Gi,ss,"whitespace")(Es):ss(Es)):as(Es)}function ss(Es){return Es===null||markdownLineEnding(Es)?(Gi.exit("codeFencedFence"),Xi(Es)):as(Es)}}}function tokenizeNonLazyContinuation(e,n,l){const d=this;return g;function g(Un){return Un===null?l(Un):(e.enter("lineEnding"),e.consume(Un),e.exit("lineEnding"),jn)}function jn(Un){return d.parser.lazy[d.now().line]?l(Un):n(Un)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(e,n,l){const d=this;return g;function g(Kn){return e.enter("codeIndented"),factorySpace(e,jn,"linePrefix",5)(Kn)}function jn(Kn){const Xn=d.events[d.events.length-1];return Xn&&Xn[1].type==="linePrefix"&&Xn[2].sliceSerialize(Xn[1],!0).length>=4?Un(Kn):l(Kn)}function Un(Kn){return Kn===null?qn(Kn):markdownLineEnding(Kn)?e.attempt(furtherStart,Un,qn)(Kn):(e.enter("codeFlowValue"),zn(Kn))}function zn(Kn){return Kn===null||markdownLineEnding(Kn)?(e.exit("codeFlowValue"),Un(Kn)):(e.consume(Kn),zn)}function qn(Kn){return e.exit("codeIndented"),n(Kn)}}function tokenizeFurtherStart(e,n,l){const d=this;return g;function g(Un){return d.parser.lazy[d.now().line]?l(Un):markdownLineEnding(Un)?(e.enter("lineEnding"),e.consume(Un),e.exit("lineEnding"),g):factorySpace(e,jn,"linePrefix",5)(Un)}function jn(Un){const zn=d.events[d.events.length-1];return zn&&zn[1].type==="linePrefix"&&zn[2].sliceSerialize(zn[1],!0).length>=4?n(Un):markdownLineEnding(Un)?g(Un):l(Un)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(e){let n=e.length-4,l=3,d,g;if((e[l][1].type==="lineEnding"||e[l][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(d=l;++d<n;)if(e[d][1].type==="codeTextData"){e[l][1].type="codeTextPadding",e[n][1].type="codeTextPadding",l+=2,n-=2;break}}for(d=l-1,n++;++d<=n;)g===void 0?d!==n&&e[d][1].type!=="lineEnding"&&(g=d):(d===n||e[d][1].type==="lineEnding")&&(e[g][1].type="codeTextData",d!==g+2&&(e[g][1].end=e[d-1][1].end,e.splice(g+2,d-g-2),n-=d-g-2,d=g+2),g=void 0);return e}function previous(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(e,n,l){let d=0,g,jn;return Un;function Un(Qn){return e.enter("codeText"),e.enter("codeTextSequence"),zn(Qn)}function zn(Qn){return Qn===96?(e.consume(Qn),d++,zn):(e.exit("codeTextSequence"),qn(Qn))}function qn(Qn){return Qn===null?l(Qn):Qn===32?(e.enter("space"),e.consume(Qn),e.exit("space"),qn):Qn===96?(jn=e.enter("codeTextSequence"),g=0,Xn(Qn)):markdownLineEnding(Qn)?(e.enter("lineEnding"),e.consume(Qn),e.exit("lineEnding"),qn):(e.enter("codeTextData"),Kn(Qn))}function Kn(Qn){return Qn===null||Qn===32||Qn===96||markdownLineEnding(Qn)?(e.exit("codeTextData"),qn(Qn)):(e.consume(Qn),Kn)}function Xn(Qn){return Qn===96?(e.consume(Qn),g++,Xn):g===d?(e.exit("codeTextSequence"),e.exit("codeText"),n(Qn)):(jn.type="codeTextData",Kn(Qn))}}class SpliceBuffer{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,l){const d=l??Number.POSITIVE_INFINITY;return d<this.left.length?this.left.slice(n,d):n>this.left.length?this.right.slice(this.right.length-d+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-d+this.left.length).reverse())}splice(n,l,d){const g=l||0;this.setCursor(Math.trunc(n));const jn=this.right.splice(this.right.length-g,Number.POSITIVE_INFINITY);return d&&chunkedPush(this.left,d),jn.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),chunkedPush(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const l=this.left.splice(n,Number.POSITIVE_INFINITY);chunkedPush(this.right,l.reverse())}else{const l=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);chunkedPush(this.left,l.reverse())}}}function chunkedPush(e,n){let l=0;if(n.length<1e4)e.push(...n);else for(;l<n.length;)e.push(...n.slice(l,l+1e4)),l+=1e4}function subtokenize(e){const n={};let l=-1,d,g,jn,Un,zn,qn,Kn;const Xn=new SpliceBuffer(e);for(;++l<Xn.length;){for(;l in n;)l=n[l];if(d=Xn.get(l),l&&d[1].type==="chunkFlow"&&Xn.get(l-1)[1].type==="listItemPrefix"&&(qn=d[1]._tokenizer.events,jn=0,jn<qn.length&&qn[jn][1].type==="lineEndingBlank"&&(jn+=2),jn<qn.length&&qn[jn][1].type==="content"))for(;++jn<qn.length&&qn[jn][1].type!=="content";)qn[jn][1].type==="chunkText"&&(qn[jn][1]._isInFirstContentOfListItem=!0,jn++);if(d[0]==="enter")d[1].contentType&&(Object.assign(n,subcontent(Xn,l)),l=n[l],Kn=!0);else if(d[1]._container){for(jn=l,g=void 0;jn--;)if(Un=Xn.get(jn),Un[1].type==="lineEnding"||Un[1].type==="lineEndingBlank")Un[0]==="enter"&&(g&&(Xn.get(g)[1].type="lineEndingBlank"),Un[1].type="lineEnding",g=jn);else if(!(Un[1].type==="linePrefix"||Un[1].type==="listItemIndent"))break;g&&(d[1].end={...Xn.get(g)[1].start},zn=Xn.slice(g,l),zn.unshift(d),Xn.splice(g,l-g+1,zn))}}return splice(e,0,Number.POSITIVE_INFINITY,Xn.slice(0)),!Kn}function subcontent(e,n){const l=e.get(n)[1],d=e.get(n)[2];let g=n-1;const jn=[];let Un=l._tokenizer;Un||(Un=d.parser[l.contentType](l.start),l._contentTypeTextTrailing&&(Un._contentTypeTextTrailing=!0));const zn=Un.events,qn=[],Kn={};let Xn,Qn,Jn=-1,Ai=l,Ri=0,Ni=0;const $i=[Ni];for(;Ai;){for(;e.get(++g)[1]!==Ai;);jn.push(g),Ai._tokenizer||(Xn=d.sliceStream(Ai),Ai.next||Xn.push(null),Qn&&Un.defineSkip(Ai.start),Ai._isInFirstContentOfListItem&&(Un._gfmTasklistFirstContentOfListItem=!0),Un.write(Xn),Ai._isInFirstContentOfListItem&&(Un._gfmTasklistFirstContentOfListItem=void 0)),Qn=Ai,Ai=Ai.next}for(Ai=l;++Jn<zn.length;)zn[Jn][0]==="exit"&&zn[Jn-1][0]==="enter"&&zn[Jn][1].type===zn[Jn-1][1].type&&zn[Jn][1].start.line!==zn[Jn][1].end.line&&(Ni=Jn+1,$i.push(Ni),Ai._tokenizer=void 0,Ai.previous=void 0,Ai=Ai.next);for(Un.events=[],Ai?(Ai._tokenizer=void 0,Ai.previous=void 0):$i.pop(),Jn=$i.length;Jn--;){const Li=zn.slice($i[Jn],$i[Jn+1]),ji=jn.pop();qn.push([ji,ji+Li.length-1]),e.splice(ji,2,Li)}for(qn.reverse(),Jn=-1;++Jn<qn.length;)Kn[Ri+qn[Jn][0]]=Ri+qn[Jn][1],Ri+=qn[Jn][1]-qn[Jn][0]-1;return Kn}const content$1={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(e){return subtokenize(e),e}function tokenizeContent(e,n){let l;return d;function d(zn){return e.enter("content"),l=e.enter("chunkContent",{contentType:"content"}),g(zn)}function g(zn){return zn===null?jn(zn):markdownLineEnding(zn)?e.check(continuationConstruct,Un,jn)(zn):(e.consume(zn),g)}function jn(zn){return e.exit("chunkContent"),e.exit("content"),n(zn)}function Un(zn){return e.consume(zn),e.exit("chunkContent"),l.next=e.enter("chunkContent",{contentType:"content",previous:l}),l=l.next,g}}function tokenizeContinuation(e,n,l){const d=this;return g;function g(Un){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(Un),e.exit("lineEnding"),factorySpace(e,jn,"linePrefix")}function jn(Un){if(Un===null||markdownLineEnding(Un))return l(Un);const zn=d.events[d.events.length-1];return!d.parser.constructs.disable.null.includes("codeIndented")&&zn&&zn[1].type==="linePrefix"&&zn[2].sliceSerialize(zn[1],!0).length>=4?n(Un):e.interrupt(d.parser.constructs.flow,l,n)(Un)}}function factoryDestination(e,n,l,d,g,jn,Un,zn,qn){const Kn=qn||Number.POSITIVE_INFINITY;let Xn=0;return Qn;function Qn(Li){return Li===60?(e.enter(d),e.enter(g),e.enter(jn),e.consume(Li),e.exit(jn),Jn):Li===null||Li===32||Li===41||asciiControl(Li)?l(Li):(e.enter(d),e.enter(Un),e.enter(zn),e.enter("chunkString",{contentType:"string"}),Ni(Li))}function Jn(Li){return Li===62?(e.enter(jn),e.consume(Li),e.exit(jn),e.exit(g),e.exit(d),n):(e.enter(zn),e.enter("chunkString",{contentType:"string"}),Ai(Li))}function Ai(Li){return Li===62?(e.exit("chunkString"),e.exit(zn),Jn(Li)):Li===null||Li===60||markdownLineEnding(Li)?l(Li):(e.consume(Li),Li===92?Ri:Ai)}function Ri(Li){return Li===60||Li===62||Li===92?(e.consume(Li),Ai):Ai(Li)}function Ni(Li){return!Xn&&(Li===null||Li===41||markdownLineEndingOrSpace(Li))?(e.exit("chunkString"),e.exit(zn),e.exit(Un),e.exit(d),n(Li)):Xn<Kn&&Li===40?(e.consume(Li),Xn++,Ni):Li===41?(e.consume(Li),Xn--,Ni):Li===null||Li===32||Li===40||asciiControl(Li)?l(Li):(e.consume(Li),Li===92?$i:Ni)}function $i(Li){return Li===40||Li===41||Li===92?(e.consume(Li),Ni):Ni(Li)}}function factoryLabel(e,n,l,d,g,jn){const Un=this;let zn=0,qn;return Kn;function Kn(Ai){return e.enter(d),e.enter(g),e.consume(Ai),e.exit(g),e.enter(jn),Xn}function Xn(Ai){return zn>999||Ai===null||Ai===91||Ai===93&&!qn||Ai===94&&!zn&&"_hiddenFootnoteSupport"in Un.parser.constructs?l(Ai):Ai===93?(e.exit(jn),e.enter(g),e.consume(Ai),e.exit(g),e.exit(d),n):markdownLineEnding(Ai)?(e.enter("lineEnding"),e.consume(Ai),e.exit("lineEnding"),Xn):(e.enter("chunkString",{contentType:"string"}),Qn(Ai))}function Qn(Ai){return Ai===null||Ai===91||Ai===93||markdownLineEnding(Ai)||zn++>999?(e.exit("chunkString"),Xn(Ai)):(e.consume(Ai),qn||(qn=!markdownSpace(Ai)),Ai===92?Jn:Qn)}function Jn(Ai){return Ai===91||Ai===92||Ai===93?(e.consume(Ai),zn++,Qn):Qn(Ai)}}function factoryTitle(e,n,l,d,g,jn){let Un;return zn;function zn(Jn){return Jn===34||Jn===39||Jn===40?(e.enter(d),e.enter(g),e.consume(Jn),e.exit(g),Un=Jn===40?41:Jn,qn):l(Jn)}function qn(Jn){return Jn===Un?(e.enter(g),e.consume(Jn),e.exit(g),e.exit(d),n):(e.enter(jn),Kn(Jn))}function Kn(Jn){return Jn===Un?(e.exit(jn),qn(Un)):Jn===null?l(Jn):markdownLineEnding(Jn)?(e.enter("lineEnding"),e.consume(Jn),e.exit("lineEnding"),factorySpace(e,Kn,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),Xn(Jn))}function Xn(Jn){return Jn===Un||Jn===null||markdownLineEnding(Jn)?(e.exit("chunkString"),Kn(Jn)):(e.consume(Jn),Jn===92?Qn:Xn)}function Qn(Jn){return Jn===Un||Jn===92?(e.consume(Jn),Xn):Xn(Jn)}}function factoryWhitespace(e,n){let l;return d;function d(g){return markdownLineEnding(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),l=!0,d):markdownSpace(g)?factorySpace(e,d,l?"linePrefix":"lineSuffix")(g):n(g)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(e,n,l){const d=this;let g;return jn;function jn(Ai){return e.enter("definition"),Un(Ai)}function Un(Ai){return factoryLabel.call(d,e,zn,l,"definitionLabel","definitionLabelMarker","definitionLabelString")(Ai)}function zn(Ai){return g=normalizeIdentifier(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)),Ai===58?(e.enter("definitionMarker"),e.consume(Ai),e.exit("definitionMarker"),qn):l(Ai)}function qn(Ai){return markdownLineEndingOrSpace(Ai)?factoryWhitespace(e,Kn)(Ai):Kn(Ai)}function Kn(Ai){return factoryDestination(e,Xn,l,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Ai)}function Xn(Ai){return e.attempt(titleBefore,Qn,Qn)(Ai)}function Qn(Ai){return markdownSpace(Ai)?factorySpace(e,Jn,"whitespace")(Ai):Jn(Ai)}function Jn(Ai){return Ai===null||markdownLineEnding(Ai)?(e.exit("definition"),d.parser.defined.push(g),n(Ai)):l(Ai)}}function tokenizeTitleBefore(e,n,l){return d;function d(zn){return markdownLineEndingOrSpace(zn)?factoryWhitespace(e,g)(zn):l(zn)}function g(zn){return factoryTitle(e,jn,l,"definitionTitle","definitionTitleMarker","definitionTitleString")(zn)}function jn(zn){return markdownSpace(zn)?factorySpace(e,Un,"whitespace")(zn):Un(zn)}function Un(zn){return zn===null||markdownLineEnding(zn)?n(zn):l(zn)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(e,n,l){return d;function d(jn){return e.enter("hardBreakEscape"),e.consume(jn),g}function g(jn){return markdownLineEnding(jn)?(e.exit("hardBreakEscape"),n(jn)):l(jn)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(e,n){let l=e.length-2,d=3,g,jn;return e[d][1].type==="whitespace"&&(d+=2),l-2>d&&e[l][1].type==="whitespace"&&(l-=2),e[l][1].type==="atxHeadingSequence"&&(d===l-1||l-4>d&&e[l-2][1].type==="whitespace")&&(l-=d+1===l?2:4),l>d&&(g={type:"atxHeadingText",start:e[d][1].start,end:e[l][1].end},jn={type:"chunkText",start:e[d][1].start,end:e[l][1].end,contentType:"text"},splice(e,d,l-d+1,[["enter",g,n],["enter",jn,n],["exit",jn,n],["exit",g,n]])),e}function tokenizeHeadingAtx(e,n,l){let d=0;return g;function g(Xn){return e.enter("atxHeading"),jn(Xn)}function jn(Xn){return e.enter("atxHeadingSequence"),Un(Xn)}function Un(Xn){return Xn===35&&d++<6?(e.consume(Xn),Un):Xn===null||markdownLineEndingOrSpace(Xn)?(e.exit("atxHeadingSequence"),zn(Xn)):l(Xn)}function zn(Xn){return Xn===35?(e.enter("atxHeadingSequence"),qn(Xn)):Xn===null||markdownLineEnding(Xn)?(e.exit("atxHeading"),n(Xn)):markdownSpace(Xn)?factorySpace(e,zn,"whitespace")(Xn):(e.enter("atxHeadingText"),Kn(Xn))}function qn(Xn){return Xn===35?(e.consume(Xn),qn):(e.exit("atxHeadingSequence"),zn(Xn))}function Kn(Xn){return Xn===null||Xn===35||markdownLineEndingOrSpace(Xn)?(e.exit("atxHeadingText"),zn(Xn)):(e.consume(Xn),Kn)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function tokenizeHtmlFlow(e,n,l){const d=this;let g,jn,Un,zn,qn;return Kn;function Kn(Ki){return Xn(Ki)}function Xn(Ki){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Ki),Qn}function Qn(Ki){return Ki===33?(e.consume(Ki),Jn):Ki===47?(e.consume(Ki),jn=!0,Ni):Ki===63?(e.consume(Ki),g=3,d.interrupt?n:Wi):asciiAlpha(Ki)?(e.consume(Ki),Un=String.fromCharCode(Ki),$i):l(Ki)}function Jn(Ki){return Ki===45?(e.consume(Ki),g=2,Ai):Ki===91?(e.consume(Ki),g=5,zn=0,Ri):asciiAlpha(Ki)?(e.consume(Ki),g=4,d.interrupt?n:Wi):l(Ki)}function Ai(Ki){return Ki===45?(e.consume(Ki),d.interrupt?n:Wi):l(Ki)}function Ri(Ki){const ws="CDATA[";return Ki===ws.charCodeAt(zn++)?(e.consume(Ki),zn===ws.length?d.interrupt?n:bs:Ri):l(Ki)}function Ni(Ki){return asciiAlpha(Ki)?(e.consume(Ki),Un=String.fromCharCode(Ki),$i):l(Ki)}function $i(Ki){if(Ki===null||Ki===47||Ki===62||markdownLineEndingOrSpace(Ki)){const ws=Ki===47,_s=Un.toLowerCase();return!ws&&!jn&&htmlRawNames.includes(_s)?(g=1,d.interrupt?n(Ki):bs(Ki)):htmlBlockNames.includes(Un.toLowerCase())?(g=6,ws?(e.consume(Ki),Li):d.interrupt?n(Ki):bs(Ki)):(g=7,d.interrupt&&!d.parser.lazy[d.now().line]?l(Ki):jn?ji(Ki):Fi(Ki))}return Ki===45||asciiAlphanumeric(Ki)?(e.consume(Ki),Un+=String.fromCharCode(Ki),$i):l(Ki)}function Li(Ki){return Ki===62?(e.consume(Ki),d.interrupt?n:bs):l(Ki)}function ji(Ki){return markdownSpace(Ki)?(e.consume(Ki),ji):Zi(Ki)}function Fi(Ki){return Ki===47?(e.consume(Ki),Zi):Ki===58||Ki===95||asciiAlpha(Ki)?(e.consume(Ki),qi):markdownSpace(Ki)?(e.consume(Ki),Fi):Zi(Ki)}function qi(Ki){return Ki===45||Ki===46||Ki===58||Ki===95||asciiAlphanumeric(Ki)?(e.consume(Ki),qi):zi(Ki)}function zi(Ki){return Ki===61?(e.consume(Ki),Gi):markdownSpace(Ki)?(e.consume(Ki),zi):Fi(Ki)}function Gi(Ki){return Ki===null||Ki===60||Ki===61||Ki===62||Ki===96?l(Ki):Ki===34||Ki===39?(e.consume(Ki),qn=Ki,Xi):markdownSpace(Ki)?(e.consume(Ki),Gi):as(Ki)}function Xi(Ki){return Ki===qn?(e.consume(Ki),qn=null,ls):Ki===null||markdownLineEnding(Ki)?l(Ki):(e.consume(Ki),Xi)}function as(Ki){return Ki===null||Ki===34||Ki===39||Ki===47||Ki===60||Ki===61||Ki===62||Ki===96||markdownLineEndingOrSpace(Ki)?zi(Ki):(e.consume(Ki),as)}function ls(Ki){return Ki===47||Ki===62||markdownSpace(Ki)?Fi(Ki):l(Ki)}function Zi(Ki){return Ki===62?(e.consume(Ki),gs):l(Ki)}function gs(Ki){return Ki===null||markdownLineEnding(Ki)?bs(Ki):markdownSpace(Ki)?(e.consume(Ki),gs):l(Ki)}function bs(Ki){return Ki===45&&g===2?(e.consume(Ki),rs):Ki===60&&g===1?(e.consume(Ki),cs):Ki===62&&g===4?(e.consume(Ki),es):Ki===63&&g===3?(e.consume(Ki),Wi):Ki===93&&g===5?(e.consume(Ki),Cs):markdownLineEnding(Ki)&&(g===6||g===7)?(e.exit("htmlFlowData"),e.check(blankLineBefore,fs,Ss)(Ki)):Ki===null||markdownLineEnding(Ki)?(e.exit("htmlFlowData"),Ss(Ki)):(e.consume(Ki),bs)}function Ss(Ki){return e.check(nonLazyContinuationStart,ss,fs)(Ki)}function ss(Ki){return e.enter("lineEnding"),e.consume(Ki),e.exit("lineEnding"),Es}function Es(Ki){return Ki===null||markdownLineEnding(Ki)?Ss(Ki):(e.enter("htmlFlowData"),bs(Ki))}function rs(Ki){return Ki===45?(e.consume(Ki),Wi):bs(Ki)}function cs(Ki){return Ki===47?(e.consume(Ki),Un="",ds):bs(Ki)}function ds(Ki){if(Ki===62){const ws=Un.toLowerCase();return htmlRawNames.includes(ws)?(e.consume(Ki),es):bs(Ki)}return asciiAlpha(Ki)&&Un.length<8?(e.consume(Ki),Un+=String.fromCharCode(Ki),ds):bs(Ki)}function Cs(Ki){return Ki===93?(e.consume(Ki),Wi):bs(Ki)}function Wi(Ki){return Ki===62?(e.consume(Ki),es):Ki===45&&g===2?(e.consume(Ki),Wi):bs(Ki)}function es(Ki){return Ki===null||markdownLineEnding(Ki)?(e.exit("htmlFlowData"),fs(Ki)):(e.consume(Ki),es)}function fs(Ki){return e.exit("htmlFlow"),n(Ki)}}function tokenizeNonLazyContinuationStart(e,n,l){const d=this;return g;function g(Un){return markdownLineEnding(Un)?(e.enter("lineEnding"),e.consume(Un),e.exit("lineEnding"),jn):l(Un)}function jn(Un){return d.parser.lazy[d.now().line]?l(Un):n(Un)}}function tokenizeBlankLineBefore(e,n,l){return d;function d(g){return e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),e.attempt(blankLine,n,l)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(e,n,l){const d=this;let g,jn,Un;return zn;function zn(Wi){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(Wi),qn}function qn(Wi){return Wi===33?(e.consume(Wi),Kn):Wi===47?(e.consume(Wi),zi):Wi===63?(e.consume(Wi),Fi):asciiAlpha(Wi)?(e.consume(Wi),as):l(Wi)}function Kn(Wi){return Wi===45?(e.consume(Wi),Xn):Wi===91?(e.consume(Wi),jn=0,Ri):asciiAlpha(Wi)?(e.consume(Wi),ji):l(Wi)}function Xn(Wi){return Wi===45?(e.consume(Wi),Ai):l(Wi)}function Qn(Wi){return Wi===null?l(Wi):Wi===45?(e.consume(Wi),Jn):markdownLineEnding(Wi)?(Un=Qn,cs(Wi)):(e.consume(Wi),Qn)}function Jn(Wi){return Wi===45?(e.consume(Wi),Ai):Qn(Wi)}function Ai(Wi){return Wi===62?rs(Wi):Wi===45?Jn(Wi):Qn(Wi)}function Ri(Wi){const es="CDATA[";return Wi===es.charCodeAt(jn++)?(e.consume(Wi),jn===es.length?Ni:Ri):l(Wi)}function Ni(Wi){return Wi===null?l(Wi):Wi===93?(e.consume(Wi),$i):markdownLineEnding(Wi)?(Un=Ni,cs(Wi)):(e.consume(Wi),Ni)}function $i(Wi){return Wi===93?(e.consume(Wi),Li):Ni(Wi)}function Li(Wi){return Wi===62?rs(Wi):Wi===93?(e.consume(Wi),Li):Ni(Wi)}function ji(Wi){return Wi===null||Wi===62?rs(Wi):markdownLineEnding(Wi)?(Un=ji,cs(Wi)):(e.consume(Wi),ji)}function Fi(Wi){return Wi===null?l(Wi):Wi===63?(e.consume(Wi),qi):markdownLineEnding(Wi)?(Un=Fi,cs(Wi)):(e.consume(Wi),Fi)}function qi(Wi){return Wi===62?rs(Wi):Fi(Wi)}function zi(Wi){return asciiAlpha(Wi)?(e.consume(Wi),Gi):l(Wi)}function Gi(Wi){return Wi===45||asciiAlphanumeric(Wi)?(e.consume(Wi),Gi):Xi(Wi)}function Xi(Wi){return markdownLineEnding(Wi)?(Un=Xi,cs(Wi)):markdownSpace(Wi)?(e.consume(Wi),Xi):rs(Wi)}function as(Wi){return Wi===45||asciiAlphanumeric(Wi)?(e.consume(Wi),as):Wi===47||Wi===62||markdownLineEndingOrSpace(Wi)?ls(Wi):l(Wi)}function ls(Wi){return Wi===47?(e.consume(Wi),rs):Wi===58||Wi===95||asciiAlpha(Wi)?(e.consume(Wi),Zi):markdownLineEnding(Wi)?(Un=ls,cs(Wi)):markdownSpace(Wi)?(e.consume(Wi),ls):rs(Wi)}function Zi(Wi){return Wi===45||Wi===46||Wi===58||Wi===95||asciiAlphanumeric(Wi)?(e.consume(Wi),Zi):gs(Wi)}function gs(Wi){return Wi===61?(e.consume(Wi),bs):markdownLineEnding(Wi)?(Un=gs,cs(Wi)):markdownSpace(Wi)?(e.consume(Wi),gs):ls(Wi)}function bs(Wi){return Wi===null||Wi===60||Wi===61||Wi===62||Wi===96?l(Wi):Wi===34||Wi===39?(e.consume(Wi),g=Wi,Ss):markdownLineEnding(Wi)?(Un=bs,cs(Wi)):markdownSpace(Wi)?(e.consume(Wi),bs):(e.consume(Wi),ss)}function Ss(Wi){return Wi===g?(e.consume(Wi),g=void 0,Es):Wi===null?l(Wi):markdownLineEnding(Wi)?(Un=Ss,cs(Wi)):(e.consume(Wi),Ss)}function ss(Wi){return Wi===null||Wi===34||Wi===39||Wi===60||Wi===61||Wi===96?l(Wi):Wi===47||Wi===62||markdownLineEndingOrSpace(Wi)?ls(Wi):(e.consume(Wi),ss)}function Es(Wi){return Wi===47||Wi===62||markdownLineEndingOrSpace(Wi)?ls(Wi):l(Wi)}function rs(Wi){return Wi===62?(e.consume(Wi),e.exit("htmlTextData"),e.exit("htmlText"),n):l(Wi)}function cs(Wi){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(Wi),e.exit("lineEnding"),ds}function ds(Wi){return markdownSpace(Wi)?factorySpace(e,Cs,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Wi):Cs(Wi)}function Cs(Wi){return e.enter("htmlTextData"),Un(Wi)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(e){let n=-1;const l=[];for(;++n<e.length;){const d=e[n][1];if(l.push(e[n]),d.type==="labelImage"||d.type==="labelLink"||d.type==="labelEnd"){const g=d.type==="labelImage"?4:2;d.type="data",n+=g}}return e.length!==l.length&&splice(e,0,e.length,l),e}function resolveToLabelEnd(e,n){let l=e.length,d=0,g,jn,Un,zn;for(;l--;)if(g=e[l][1],jn){if(g.type==="link"||g.type==="labelLink"&&g._inactive)break;e[l][0]==="enter"&&g.type==="labelLink"&&(g._inactive=!0)}else if(Un){if(e[l][0]==="enter"&&(g.type==="labelImage"||g.type==="labelLink")&&!g._balanced&&(jn=l,g.type!=="labelLink")){d=2;break}}else g.type==="labelEnd"&&(Un=l);const qn={type:e[jn][1].type==="labelLink"?"link":"image",start:{...e[jn][1].start},end:{...e[e.length-1][1].end}},Kn={type:"label",start:{...e[jn][1].start},end:{...e[Un][1].end}},Xn={type:"labelText",start:{...e[jn+d+2][1].end},end:{...e[Un-2][1].start}};return zn=[["enter",qn,n],["enter",Kn,n]],zn=push(zn,e.slice(jn+1,jn+d+3)),zn=push(zn,[["enter",Xn,n]]),zn=push(zn,resolveAll(n.parser.constructs.insideSpan.null,e.slice(jn+d+4,Un-3),n)),zn=push(zn,[["exit",Xn,n],e[Un-2],e[Un-1],["exit",Kn,n]]),zn=push(zn,e.slice(Un+1)),zn=push(zn,[["exit",qn,n]]),splice(e,jn,e.length,zn),e}function tokenizeLabelEnd(e,n,l){const d=this;let g=d.events.length,jn,Un;for(;g--;)if((d.events[g][1].type==="labelImage"||d.events[g][1].type==="labelLink")&&!d.events[g][1]._balanced){jn=d.events[g][1];break}return zn;function zn(Jn){return jn?jn._inactive?Qn(Jn):(Un=d.parser.defined.includes(normalizeIdentifier(d.sliceSerialize({start:jn.end,end:d.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(Jn),e.exit("labelMarker"),e.exit("labelEnd"),qn):l(Jn)}function qn(Jn){return Jn===40?e.attempt(resourceConstruct,Xn,Un?Xn:Qn)(Jn):Jn===91?e.attempt(referenceFullConstruct,Xn,Un?Kn:Qn)(Jn):Un?Xn(Jn):Qn(Jn)}function Kn(Jn){return e.attempt(referenceCollapsedConstruct,Xn,Qn)(Jn)}function Xn(Jn){return n(Jn)}function Qn(Jn){return jn._balanced=!0,l(Jn)}}function tokenizeResource(e,n,l){return d;function d(Qn){return e.enter("resource"),e.enter("resourceMarker"),e.consume(Qn),e.exit("resourceMarker"),g}function g(Qn){return markdownLineEndingOrSpace(Qn)?factoryWhitespace(e,jn)(Qn):jn(Qn)}function jn(Qn){return Qn===41?Xn(Qn):factoryDestination(e,Un,zn,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Qn)}function Un(Qn){return markdownLineEndingOrSpace(Qn)?factoryWhitespace(e,qn)(Qn):Xn(Qn)}function zn(Qn){return l(Qn)}function qn(Qn){return Qn===34||Qn===39||Qn===40?factoryTitle(e,Kn,l,"resourceTitle","resourceTitleMarker","resourceTitleString")(Qn):Xn(Qn)}function Kn(Qn){return markdownLineEndingOrSpace(Qn)?factoryWhitespace(e,Xn)(Qn):Xn(Qn)}function Xn(Qn){return Qn===41?(e.enter("resourceMarker"),e.consume(Qn),e.exit("resourceMarker"),e.exit("resource"),n):l(Qn)}}function tokenizeReferenceFull(e,n,l){const d=this;return g;function g(zn){return factoryLabel.call(d,e,jn,Un,"reference","referenceMarker","referenceString")(zn)}function jn(zn){return d.parser.defined.includes(normalizeIdentifier(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)))?n(zn):l(zn)}function Un(zn){return l(zn)}}function tokenizeReferenceCollapsed(e,n,l){return d;function d(jn){return e.enter("reference"),e.enter("referenceMarker"),e.consume(jn),e.exit("referenceMarker"),g}function g(jn){return jn===93?(e.enter("referenceMarker"),e.consume(jn),e.exit("referenceMarker"),e.exit("reference"),n):l(jn)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(e,n,l){const d=this;return g;function g(zn){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(zn),e.exit("labelImageMarker"),jn}function jn(zn){return zn===91?(e.enter("labelMarker"),e.consume(zn),e.exit("labelMarker"),e.exit("labelImage"),Un):l(zn)}function Un(zn){return zn===94&&"_hiddenFootnoteSupport"in d.parser.constructs?l(zn):n(zn)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(e,n,l){const d=this;return g;function g(Un){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(Un),e.exit("labelMarker"),e.exit("labelLink"),jn}function jn(Un){return Un===94&&"_hiddenFootnoteSupport"in d.parser.constructs?l(Un):n(Un)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(e,n){return l;function l(d){return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),factorySpace(e,n,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(e,n,l){let d=0,g;return jn;function jn(Kn){return e.enter("thematicBreak"),Un(Kn)}function Un(Kn){return g=Kn,zn(Kn)}function zn(Kn){return Kn===g?(e.enter("thematicBreakSequence"),qn(Kn)):d>=3&&(Kn===null||markdownLineEnding(Kn))?(e.exit("thematicBreak"),n(Kn)):l(Kn)}function qn(Kn){return Kn===g?(e.consume(Kn),d++,qn):(e.exit("thematicBreakSequence"),markdownSpace(Kn)?factorySpace(e,zn,"whitespace")(Kn):zn(Kn))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent$1};function tokenizeListStart(e,n,l){const d=this,g=d.events[d.events.length-1];let jn=g&&g[1].type==="linePrefix"?g[2].sliceSerialize(g[1],!0).length:0,Un=0;return zn;function zn(Ai){const Ri=d.containerState.type||(Ai===42||Ai===43||Ai===45?"listUnordered":"listOrdered");if(Ri==="listUnordered"?!d.containerState.marker||Ai===d.containerState.marker:asciiDigit(Ai)){if(d.containerState.type||(d.containerState.type=Ri,e.enter(Ri,{_container:!0})),Ri==="listUnordered")return e.enter("listItemPrefix"),Ai===42||Ai===45?e.check(thematicBreak$1,l,Kn)(Ai):Kn(Ai);if(!d.interrupt||Ai===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),qn(Ai)}return l(Ai)}function qn(Ai){return asciiDigit(Ai)&&++Un<10?(e.consume(Ai),qn):(!d.interrupt||Un<2)&&(d.containerState.marker?Ai===d.containerState.marker:Ai===41||Ai===46)?(e.exit("listItemValue"),Kn(Ai)):l(Ai)}function Kn(Ai){return e.enter("listItemMarker"),e.consume(Ai),e.exit("listItemMarker"),d.containerState.marker=d.containerState.marker||Ai,e.check(blankLine,d.interrupt?l:Xn,e.attempt(listItemPrefixWhitespaceConstruct,Jn,Qn))}function Xn(Ai){return d.containerState.initialBlankLine=!0,jn++,Jn(Ai)}function Qn(Ai){return markdownSpace(Ai)?(e.enter("listItemPrefixWhitespace"),e.consume(Ai),e.exit("listItemPrefixWhitespace"),Jn):l(Ai)}function Jn(Ai){return d.containerState.size=jn+d.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(Ai)}}function tokenizeListContinuation(e,n,l){const d=this;return d.containerState._closeFlow=void 0,e.check(blankLine,g,jn);function g(zn){return d.containerState.furtherBlankLines=d.containerState.furtherBlankLines||d.containerState.initialBlankLine,factorySpace(e,n,"listItemIndent",d.containerState.size+1)(zn)}function jn(zn){return d.containerState.furtherBlankLines||!markdownSpace(zn)?(d.containerState.furtherBlankLines=void 0,d.containerState.initialBlankLine=void 0,Un(zn)):(d.containerState.furtherBlankLines=void 0,d.containerState.initialBlankLine=void 0,e.attempt(indentConstruct,n,Un)(zn))}function Un(zn){return d.containerState._closeFlow=!0,d.interrupt=void 0,factorySpace(e,e.attempt(list$1,n,l),"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(zn)}}function tokenizeIndent$1(e,n,l){const d=this;return factorySpace(e,g,"listItemIndent",d.containerState.size+1);function g(jn){const Un=d.events[d.events.length-1];return Un&&Un[1].type==="listItemIndent"&&Un[2].sliceSerialize(Un[1],!0).length===d.containerState.size?n(jn):l(jn)}}function tokenizeListEnd(e){e.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(e,n,l){const d=this;return factorySpace(e,g,"listItemPrefixWhitespace",d.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function g(jn){const Un=d.events[d.events.length-1];return!markdownSpace(jn)&&Un&&Un[1].type==="listItemPrefixWhitespace"?n(jn):l(jn)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(e,n){let l=e.length,d,g,jn;for(;l--;)if(e[l][0]==="enter"){if(e[l][1].type==="content"){d=l;break}e[l][1].type==="paragraph"&&(g=l)}else e[l][1].type==="content"&&e.splice(l,1),!jn&&e[l][1].type==="definition"&&(jn=l);const Un={type:"setextHeading",start:{...e[d][1].start},end:{...e[e.length-1][1].end}};return e[g][1].type="setextHeadingText",jn?(e.splice(g,0,["enter",Un,n]),e.splice(jn+1,0,["exit",e[d][1],n]),e[d][1].end={...e[jn][1].end}):e[d][1]=Un,e.push(["exit",Un,n]),e}function tokenizeSetextUnderline(e,n,l){const d=this;let g;return jn;function jn(Kn){let Xn=d.events.length,Qn;for(;Xn--;)if(d.events[Xn][1].type!=="lineEnding"&&d.events[Xn][1].type!=="linePrefix"&&d.events[Xn][1].type!=="content"){Qn=d.events[Xn][1].type==="paragraph";break}return!d.parser.lazy[d.now().line]&&(d.interrupt||Qn)?(e.enter("setextHeadingLine"),g=Kn,Un(Kn)):l(Kn)}function Un(Kn){return e.enter("setextHeadingLineSequence"),zn(Kn)}function zn(Kn){return Kn===g?(e.consume(Kn),zn):(e.exit("setextHeadingLineSequence"),markdownSpace(Kn)?factorySpace(e,qn,"lineSuffix")(Kn):qn(Kn))}function qn(Kn){return Kn===null||markdownLineEnding(Kn)?(e.exit("setextHeadingLine"),n(Kn)):l(Kn)}}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{name:"gfmFootnoteCall",tokenize:tokenizeGfmFootnoteCall},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(e,n,l){const d=this;let g=d.events.length;const jn=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let Un;for(;g--;){const qn=d.events[g][1];if(qn.type==="labelImage"){Un=qn;break}if(qn.type==="gfmFootnoteCall"||qn.type==="labelLink"||qn.type==="label"||qn.type==="image"||qn.type==="link")break}return zn;function zn(qn){if(!Un||!Un._balanced)return l(qn);const Kn=normalizeIdentifier(d.sliceSerialize({start:Un.end,end:d.now()}));return Kn.codePointAt(0)!==94||!jn.includes(Kn.slice(1))?l(qn):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(qn),e.exit("gfmFootnoteCallLabelMarker"),n(qn))}}function resolveToPotentialGfmFootnoteCall(e,n){let l=e.length;for(;l--;)if(e[l][1].type==="labelImage"&&e[l][0]==="enter"){e[l][1];break}e[l+1][1].type="data",e[l+3][1].type="gfmFootnoteCallLabelMarker";const d={type:"gfmFootnoteCall",start:Object.assign({},e[l+3][1].start),end:Object.assign({},e[e.length-1][1].end)},g={type:"gfmFootnoteCallMarker",start:Object.assign({},e[l+3][1].end),end:Object.assign({},e[l+3][1].end)};g.end.column++,g.end.offset++,g.end._bufferIndex++;const jn={type:"gfmFootnoteCallString",start:Object.assign({},g.end),end:Object.assign({},e[e.length-1][1].start)},Un={type:"chunkString",contentType:"string",start:Object.assign({},jn.start),end:Object.assign({},jn.end)},zn=[e[l+1],e[l+2],["enter",d,n],e[l+3],e[l+4],["enter",g,n],["exit",g,n],["enter",jn,n],["enter",Un,n],["exit",Un,n],["exit",jn,n],e[e.length-2],e[e.length-1],["exit",d,n]];return e.splice(l,e.length-l+1,...zn),e}function tokenizeGfmFootnoteCall(e,n,l){const d=this,g=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let jn=0,Un;return zn;function zn(Qn){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(Qn),e.exit("gfmFootnoteCallLabelMarker"),qn}function qn(Qn){return Qn!==94?l(Qn):(e.enter("gfmFootnoteCallMarker"),e.consume(Qn),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",Kn)}function Kn(Qn){if(jn>999||Qn===93&&!Un||Qn===null||Qn===91||markdownLineEndingOrSpace(Qn))return l(Qn);if(Qn===93){e.exit("chunkString");const Jn=e.exit("gfmFootnoteCallString");return g.includes(normalizeIdentifier(d.sliceSerialize(Jn)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(Qn),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):l(Qn)}return markdownLineEndingOrSpace(Qn)||(Un=!0),jn++,e.consume(Qn),Qn===92?Xn:Kn}function Xn(Qn){return Qn===91||Qn===92||Qn===93?(e.consume(Qn),jn++,Kn):Kn(Qn)}}function tokenizeDefinitionStart(e,n,l){const d=this,g=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let jn,Un=0,zn;return qn;function qn(Ri){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(Ri),e.exit("gfmFootnoteDefinitionLabelMarker"),Kn}function Kn(Ri){return Ri===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(Ri),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",Xn):l(Ri)}function Xn(Ri){if(Un>999||Ri===93&&!zn||Ri===null||Ri===91||markdownLineEndingOrSpace(Ri))return l(Ri);if(Ri===93){e.exit("chunkString");const Ni=e.exit("gfmFootnoteDefinitionLabelString");return jn=normalizeIdentifier(d.sliceSerialize(Ni)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(Ri),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),Jn}return markdownLineEndingOrSpace(Ri)||(zn=!0),Un++,e.consume(Ri),Ri===92?Qn:Xn}function Qn(Ri){return Ri===91||Ri===92||Ri===93?(e.consume(Ri),Un++,Xn):Xn(Ri)}function Jn(Ri){return Ri===58?(e.enter("definitionMarker"),e.consume(Ri),e.exit("definitionMarker"),g.includes(jn)||g.push(jn),factorySpace(e,Ai,"gfmFootnoteDefinitionWhitespace")):l(Ri)}function Ai(Ri){return n(Ri)}}function tokenizeDefinitionContinuation(e,n,l){return e.check(blankLine,n,e.attempt(indent,n,l))}function gfmFootnoteDefinitionEnd(e){e.exit("gfmFootnoteDefinition")}function tokenizeIndent(e,n,l){const d=this;return factorySpace(e,g,"gfmFootnoteDefinitionIndent",5);function g(jn){const Un=d.events[d.events.length-1];return Un&&Un[1].type==="gfmFootnoteDefinitionIndent"&&Un[2].sliceSerialize(Un[1],!0).length===4?n(jn):l(jn)}}function gfmStrikethrough(e){let l=(e||{}).singleTilde;const d={name:"strikethrough",tokenize:jn,resolveAll:g};return l==null&&(l=!0),{text:{126:d},insideSpan:{null:[d]},attentionMarkers:{null:[126]}};function g(Un,zn){let qn=-1;for(;++qn<Un.length;)if(Un[qn][0]==="enter"&&Un[qn][1].type==="strikethroughSequenceTemporary"&&Un[qn][1]._close){let Kn=qn;for(;Kn--;)if(Un[Kn][0]==="exit"&&Un[Kn][1].type==="strikethroughSequenceTemporary"&&Un[Kn][1]._open&&Un[qn][1].end.offset-Un[qn][1].start.offset===Un[Kn][1].end.offset-Un[Kn][1].start.offset){Un[qn][1].type="strikethroughSequence",Un[Kn][1].type="strikethroughSequence";const Xn={type:"strikethrough",start:Object.assign({},Un[Kn][1].start),end:Object.assign({},Un[qn][1].end)},Qn={type:"strikethroughText",start:Object.assign({},Un[Kn][1].end),end:Object.assign({},Un[qn][1].start)},Jn=[["enter",Xn,zn],["enter",Un[Kn][1],zn],["exit",Un[Kn][1],zn],["enter",Qn,zn]],Ai=zn.parser.constructs.insideSpan.null;Ai&&splice(Jn,Jn.length,0,resolveAll(Ai,Un.slice(Kn+1,qn),zn)),splice(Jn,Jn.length,0,[["exit",Qn,zn],["enter",Un[qn][1],zn],["exit",Un[qn][1],zn],["exit",Xn,zn]]),splice(Un,Kn-1,qn-Kn+3,Jn),qn=Kn+Jn.length-2;break}}for(qn=-1;++qn<Un.length;)Un[qn][1].type==="strikethroughSequenceTemporary"&&(Un[qn][1].type="data");return Un}function jn(Un,zn,qn){const Kn=this.previous,Xn=this.events;let Qn=0;return Jn;function Jn(Ri){return Kn===126&&Xn[Xn.length-1][1].type!=="characterEscape"?qn(Ri):(Un.enter("strikethroughSequenceTemporary"),Ai(Ri))}function Ai(Ri){const Ni=classifyCharacter(Kn);if(Ri===126)return Qn>1?qn(Ri):(Un.consume(Ri),Qn++,Ai);if(Qn<2&&!l)return qn(Ri);const $i=Un.exit("strikethroughSequenceTemporary"),Li=classifyCharacter(Ri);return $i._open=!Li||Li===2&&!!Ni,$i._close=!Ni||Ni===2&&!!Li,zn(Ri)}}}class EditMap{constructor(){this.map=[]}add(n,l,d){addImplementation(this,n,l,d)}consume(n){if(this.map.sort(function(jn,Un){return jn[0]-Un[0]}),this.map.length===0)return;let l=this.map.length;const d=[];for(;l>0;)l-=1,d.push(n.slice(this.map[l][0]+this.map[l][1]),this.map[l][2]),n.length=this.map[l][0];d.push(n.slice()),n.length=0;let g=d.pop();for(;g;){for(const jn of g)n.push(jn);g=d.pop()}this.map.length=0}}function addImplementation(e,n,l,d){let g=0;if(!(l===0&&d.length===0)){for(;g<e.map.length;){if(e.map[g][0]===n){e.map[g][1]+=l,e.map[g][2].push(...d);return}g+=1}e.map.push([n,l,d])}}function gfmTableAlign(e,n){let l=!1;const d=[];for(;n<e.length;){const g=e[n];if(l){if(g[0]==="enter")g[1].type==="tableContent"&&d.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(g[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const jn=d.length-1;d[jn]=d[jn]==="left"?"center":"right"}}else if(g[1].type==="tableDelimiterRow")break}else g[0]==="enter"&&g[1].type==="tableDelimiterRow"&&(l=!0);n+=1}return d}function gfmTable(){return{flow:{null:{name:"table",tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(e,n,l){const d=this;let g=0,jn=0,Un;return zn;function zn(Zi){let gs=d.events.length-1;for(;gs>-1;){const ss=d.events[gs][1].type;if(ss==="lineEnding"||ss==="linePrefix")gs--;else break}const bs=gs>-1?d.events[gs][1].type:null,Ss=bs==="tableHead"||bs==="tableRow"?Gi:qn;return Ss===Gi&&d.parser.lazy[d.now().line]?l(Zi):Ss(Zi)}function qn(Zi){return e.enter("tableHead"),e.enter("tableRow"),Kn(Zi)}function Kn(Zi){return Zi===124||(Un=!0,jn+=1),Xn(Zi)}function Xn(Zi){return Zi===null?l(Zi):markdownLineEnding(Zi)?jn>1?(jn=0,d.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(Zi),e.exit("lineEnding"),Ai):l(Zi):markdownSpace(Zi)?factorySpace(e,Xn,"whitespace")(Zi):(jn+=1,Un&&(Un=!1,g+=1),Zi===124?(e.enter("tableCellDivider"),e.consume(Zi),e.exit("tableCellDivider"),Un=!0,Xn):(e.enter("data"),Qn(Zi)))}function Qn(Zi){return Zi===null||Zi===124||markdownLineEndingOrSpace(Zi)?(e.exit("data"),Xn(Zi)):(e.consume(Zi),Zi===92?Jn:Qn)}function Jn(Zi){return Zi===92||Zi===124?(e.consume(Zi),Qn):Qn(Zi)}function Ai(Zi){return d.interrupt=!1,d.parser.lazy[d.now().line]?l(Zi):(e.enter("tableDelimiterRow"),Un=!1,markdownSpace(Zi)?factorySpace(e,Ri,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Zi):Ri(Zi))}function Ri(Zi){return Zi===45||Zi===58?$i(Zi):Zi===124?(Un=!0,e.enter("tableCellDivider"),e.consume(Zi),e.exit("tableCellDivider"),Ni):zi(Zi)}function Ni(Zi){return markdownSpace(Zi)?factorySpace(e,$i,"whitespace")(Zi):$i(Zi)}function $i(Zi){return Zi===58?(jn+=1,Un=!0,e.enter("tableDelimiterMarker"),e.consume(Zi),e.exit("tableDelimiterMarker"),Li):Zi===45?(jn+=1,Li(Zi)):Zi===null||markdownLineEnding(Zi)?qi(Zi):zi(Zi)}function Li(Zi){return Zi===45?(e.enter("tableDelimiterFiller"),ji(Zi)):zi(Zi)}function ji(Zi){return Zi===45?(e.consume(Zi),ji):Zi===58?(Un=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(Zi),e.exit("tableDelimiterMarker"),Fi):(e.exit("tableDelimiterFiller"),Fi(Zi))}function Fi(Zi){return markdownSpace(Zi)?factorySpace(e,qi,"whitespace")(Zi):qi(Zi)}function qi(Zi){return Zi===124?Ri(Zi):Zi===null||markdownLineEnding(Zi)?!Un||g!==jn?zi(Zi):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(Zi)):zi(Zi)}function zi(Zi){return l(Zi)}function Gi(Zi){return e.enter("tableRow"),Xi(Zi)}function Xi(Zi){return Zi===124?(e.enter("tableCellDivider"),e.consume(Zi),e.exit("tableCellDivider"),Xi):Zi===null||markdownLineEnding(Zi)?(e.exit("tableRow"),n(Zi)):markdownSpace(Zi)?factorySpace(e,Xi,"whitespace")(Zi):(e.enter("data"),as(Zi))}function as(Zi){return Zi===null||Zi===124||markdownLineEndingOrSpace(Zi)?(e.exit("data"),Xi(Zi)):(e.consume(Zi),Zi===92?ls:as)}function ls(Zi){return Zi===92||Zi===124?(e.consume(Zi),as):as(Zi)}}function resolveTable(e,n){let l=-1,d=!0,g=0,jn=[0,0,0,0],Un=[0,0,0,0],zn=!1,qn=0,Kn,Xn,Qn;const Jn=new EditMap;for(;++l<e.length;){const Ai=e[l],Ri=Ai[1];Ai[0]==="enter"?Ri.type==="tableHead"?(zn=!1,qn!==0&&(flushTableEnd(Jn,n,qn,Kn,Xn),Xn=void 0,qn=0),Kn={type:"table",start:Object.assign({},Ri.start),end:Object.assign({},Ri.end)},Jn.add(l,0,[["enter",Kn,n]])):Ri.type==="tableRow"||Ri.type==="tableDelimiterRow"?(d=!0,Qn=void 0,jn=[0,0,0,0],Un=[0,l+1,0,0],zn&&(zn=!1,Xn={type:"tableBody",start:Object.assign({},Ri.start),end:Object.assign({},Ri.end)},Jn.add(l,0,[["enter",Xn,n]])),g=Ri.type==="tableDelimiterRow"?2:Xn?3:1):g&&(Ri.type==="data"||Ri.type==="tableDelimiterMarker"||Ri.type==="tableDelimiterFiller")?(d=!1,Un[2]===0&&(jn[1]!==0&&(Un[0]=Un[1],Qn=flushCell(Jn,n,jn,g,void 0,Qn),jn=[0,0,0,0]),Un[2]=l)):Ri.type==="tableCellDivider"&&(d?d=!1:(jn[1]!==0&&(Un[0]=Un[1],Qn=flushCell(Jn,n,jn,g,void 0,Qn)),jn=Un,Un=[jn[1],l,0,0])):Ri.type==="tableHead"?(zn=!0,qn=l):Ri.type==="tableRow"||Ri.type==="tableDelimiterRow"?(qn=l,jn[1]!==0?(Un[0]=Un[1],Qn=flushCell(Jn,n,jn,g,l,Qn)):Un[1]!==0&&(Qn=flushCell(Jn,n,Un,g,l,Qn)),g=0):g&&(Ri.type==="data"||Ri.type==="tableDelimiterMarker"||Ri.type==="tableDelimiterFiller")&&(Un[3]=l)}for(qn!==0&&flushTableEnd(Jn,n,qn,Kn,Xn),Jn.consume(n.events),l=-1;++l<n.events.length;){const Ai=n.events[l];Ai[0]==="enter"&&Ai[1].type==="table"&&(Ai[1]._align=gfmTableAlign(n.events,l))}return e}function flushCell(e,n,l,d,g,jn){const Un=d===1?"tableHeader":d===2?"tableDelimiter":"tableData",zn="tableContent";l[0]!==0&&(jn.end=Object.assign({},getPoint(n.events,l[0])),e.add(l[0],0,[["exit",jn,n]]));const qn=getPoint(n.events,l[1]);if(jn={type:Un,start:Object.assign({},qn),end:Object.assign({},qn)},e.add(l[1],0,[["enter",jn,n]]),l[2]!==0){const Kn=getPoint(n.events,l[2]),Xn=getPoint(n.events,l[3]),Qn={type:zn,start:Object.assign({},Kn),end:Object.assign({},Xn)};if(e.add(l[2],0,[["enter",Qn,n]]),d!==2){const Jn=n.events[l[2]],Ai=n.events[l[3]];if(Jn[1].end=Object.assign({},Ai[1].end),Jn[1].type="chunkText",Jn[1].contentType="text",l[3]>l[2]+1){const Ri=l[2]+1,Ni=l[3]-l[2]-1;e.add(Ri,Ni,[])}}e.add(l[3]+1,0,[["exit",Qn,n]])}return g!==void 0&&(jn.end=Object.assign({},getPoint(n.events,g)),e.add(g,0,[["exit",jn,n]]),jn=void 0),jn}function flushTableEnd(e,n,l,d,g){const jn=[],Un=getPoint(n.events,l);g&&(g.end=Object.assign({},Un),jn.push(["exit",g,n])),d.end=Object.assign({},Un),jn.push(["exit",d,n]),e.add(l+1,0,jn)}function getPoint(e,n){const l=e[n],d=l[0]==="enter"?"start":"end";return l[1][d]}const tasklistCheck={name:"tasklistCheck",tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(e,n,l){const d=this;return g;function g(qn){return d.previous!==null||!d._gfmTasklistFirstContentOfListItem?l(qn):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(qn),e.exit("taskListCheckMarker"),jn)}function jn(qn){return markdownLineEndingOrSpace(qn)?(e.enter("taskListCheckValueUnchecked"),e.consume(qn),e.exit("taskListCheckValueUnchecked"),Un):qn===88||qn===120?(e.enter("taskListCheckValueChecked"),e.consume(qn),e.exit("taskListCheckValueChecked"),Un):l(qn)}function Un(qn){return qn===93?(e.enter("taskListCheckMarker"),e.consume(qn),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),zn):l(qn)}function zn(qn){return markdownLineEnding(qn)?n(qn):markdownSpace(qn)?e.check({tokenize:spaceThenNonSpace},n,l)(qn):l(qn)}}function spaceThenNonSpace(e,n,l){return factorySpace(e,d,"whitespace");function d(g){return g===null?l(g):n(g)}}function gfm(e){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(e),gfmTable(),gfmTaskListItem()])}const emptyOptions$2={};function remarkGfm(e){const n=this,l=e||emptyOptions$2,d=n.data(),g=d.micromarkExtensions||(d.micromarkExtensions=[]),jn=d.fromMarkdownExtensions||(d.fromMarkdownExtensions=[]),Un=d.toMarkdownExtensions||(d.toMarkdownExtensions=[]);g.push(gfm(l)),jn.push(gfmFromMarkdown()),Un.push(gfmToMarkdown(l))}function remarkStringify(e){const n=this;n.compiler=l;function l(d){return toMarkdown(d,{...n.data("settings"),...e,extensions:n.data("toMarkdownExtensions")||[]})}}function bail(e){if(e)throw e}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,g=function(Kn){return typeof Array.isArray=="function"?Array.isArray(Kn):n.call(Kn)==="[object Array]"},jn=function(Kn){if(!Kn||n.call(Kn)!=="[object Object]")return!1;var Xn=e.call(Kn,"constructor"),Qn=Kn.constructor&&Kn.constructor.prototype&&e.call(Kn.constructor.prototype,"isPrototypeOf");if(Kn.constructor&&!Xn&&!Qn)return!1;var Jn;for(Jn in Kn);return typeof Jn>"u"||e.call(Kn,Jn)},Un=function(Kn,Xn){l&&Xn.name==="__proto__"?l(Kn,Xn.name,{enumerable:!0,configurable:!0,value:Xn.newValue,writable:!0}):Kn[Xn.name]=Xn.newValue},zn=function(Kn,Xn){if(Xn==="__proto__")if(e.call(Kn,Xn)){if(d)return d(Kn,Xn).value}else return;return Kn[Xn]};return extend$1=function qn(){var Kn,Xn,Qn,Jn,Ai,Ri,Ni=arguments[0],$i=1,Li=arguments.length,ji=!1;for(typeof Ni=="boolean"&&(ji=Ni,Ni=arguments[1]||{},$i=2),(Ni==null||typeof Ni!="object"&&typeof Ni!="function")&&(Ni={});$i<Li;++$i)if(Kn=arguments[$i],Kn!=null)for(Xn in Kn)Qn=zn(Ni,Xn),Jn=zn(Kn,Xn),Ni!==Jn&&(ji&&Jn&&(jn(Jn)||(Ai=g(Jn)))?(Ai?(Ai=!1,Ri=Qn&&g(Qn)?Qn:[]):Ri=Qn&&jn(Qn)?Qn:{},Un(Ni,{name:Xn,newValue:qn(ji,Ri,Jn)})):typeof Jn<"u"&&Un(Ni,{name:Xn,newValue:Jn}));return Ni},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function trough(){const e=[],n={run:l,use:d};return n;function l(...g){let jn=-1;const Un=g.pop();if(typeof Un!="function")throw new TypeError("Expected function as last argument, not "+Un);zn(null,...g);function zn(qn,...Kn){const Xn=e[++jn];let Qn=-1;if(qn){Un(qn);return}for(;++Qn<g.length;)(Kn[Qn]===null||Kn[Qn]===void 0)&&(Kn[Qn]=g[Qn]);g=Kn,Xn?wrap$1(Xn,zn)(...Kn):Un(null,...Kn)}}function d(g){if(typeof g!="function")throw new TypeError("Expected `middelware` to be a function, not "+g);return e.push(g),n}}function wrap$1(e,n){let l;return d;function d(...Un){const zn=e.length>Un.length;let qn;zn&&Un.push(g);try{qn=e.apply(this,Un)}catch(Kn){const Xn=Kn;if(zn&&l)throw Xn;return g(Xn)}zn||(qn&&qn.then&&typeof qn.then=="function"?qn.then(jn,g):qn instanceof Error?g(qn):jn(qn))}function g(Un,...zn){l||(l=!0,n(Un,...zn))}function jn(Un){g(null,Un)}}const CallableInstance=(function(e){const d=this.constructor.prototype,g=d[e],jn=function(){return g.apply(jn,arguments)};return Object.setPrototypeOf(jn,d),jn}),own$4={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const n=new Processor;let l=-1;for(;++l<this.attachers.length;){const d=this.attachers[l];n.use(...d)}return n.data(extend(!0,{},this.namespace)),n}data(n,l){return typeof n=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[n]=l,this):own$4.call(this.namespace,n)&&this.namespace[n]||void 0:n?(assertUnfrozen("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[l,...d]=this.attachers[this.freezeIndex];if(d[0]===!1)continue;d[0]===!0&&(d[0]=void 0);const g=l.call(n,...d);typeof g=="function"&&this.transformers.use(g)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const l=vfile(n),d=this.parser||this.Parser;return assertParser("parse",d),d(String(l),l)}process(n,l){const d=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),l?g(void 0,l):new Promise(g);function g(jn,Un){const zn=vfile(n),qn=d.parse(zn);d.run(qn,zn,function(Xn,Qn,Jn){if(Xn||!Qn||!Jn)return Kn(Xn);const Ai=Qn,Ri=d.stringify(Ai,Jn);looksLikeAValue(Ri)?Jn.value=Ri:Jn.result=Ri,Kn(Xn,Jn)});function Kn(Xn,Qn){Xn||!Qn?Un(Xn):jn?jn(Qn):l(void 0,Qn)}}}processSync(n){let l=!1,d;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(n,g),assertDone("processSync","process",l),d;function g(jn,Un){l=!0,bail(jn),d=Un}}run(n,l,d){assertNode(n),this.freeze();const g=this.transformers;return!d&&typeof l=="function"&&(d=l,l=void 0),d?jn(void 0,d):new Promise(jn);function jn(Un,zn){const qn=vfile(l);g.run(n,qn,Kn);function Kn(Xn,Qn,Jn){const Ai=Qn||n;Xn?zn(Xn):Un?Un(Ai):d(void 0,Ai,Jn)}}}runSync(n,l){let d=!1,g;return this.run(n,l,jn),assertDone("runSync","run",d),g;function jn(Un,zn){bail(Un),g=zn,d=!0}}stringify(n,l){this.freeze();const d=vfile(l),g=this.compiler||this.Compiler;return assertCompiler("stringify",g),assertNode(n),g(n,d)}use(n,...l){const d=this.attachers,g=this.namespace;if(assertUnfrozen("use",this.frozen),n!=null)if(typeof n=="function")qn(n,l);else if(typeof n=="object")Array.isArray(n)?zn(n):Un(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function jn(Kn){if(typeof Kn=="function")qn(Kn,[]);else if(typeof Kn=="object")if(Array.isArray(Kn)){const[Xn,...Qn]=Kn;qn(Xn,Qn)}else Un(Kn);else throw new TypeError("Expected usable value, not `"+Kn+"`")}function Un(Kn){if(!("plugins"in Kn)&&!("settings"in Kn))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");zn(Kn.plugins),Kn.settings&&(g.settings=extend(!0,g.settings,Kn.settings))}function zn(Kn){let Xn=-1;if(Kn!=null)if(Array.isArray(Kn))for(;++Xn<Kn.length;){const Qn=Kn[Xn];jn(Qn)}else throw new TypeError("Expected a list of plugins, not `"+Kn+"`")}function qn(Kn,Xn){let Qn=-1,Jn=-1;for(;++Qn<d.length;)if(d[Qn][0]===Kn){Jn=Qn;break}if(Jn===-1)d.push([Kn,...Xn]);else if(Xn.length>0){let[Ai,...Ri]=Xn;const Ni=d[Jn][1];isPlainObject(Ni)&&isPlainObject(Ai)&&(Ai=extend(!0,Ni,Ai)),d[Jn]=[Kn,Ai,...Ri]}}}}const unified=new Processor().freeze();function assertParser(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function assertCompiler(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function assertUnfrozen(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(e){if(!isPlainObject(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function assertDone(e,n,l){if(!l)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function vfile(e){return looksLikeAVFile(e)?e:new VFile(e)}function looksLikeAVFile(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function looksLikeAValue(e){return typeof e=="string"||isUint8Array(e)}function isUint8Array(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function fromDom(e,n){return transform(e,{})||{type:"root",children:[]}}function transform(e,n){const l=one$1(e,n);return l&&n.afterTransform&&n.afterTransform(e,l),l}function one$1(e,n){switch(e.nodeType){case 1:return element$1(e,n);case 3:return text$4(e);case 8:return comment$1(e);case 9:return root$2(e,n);case 10:return doctype$1();case 11:return root$2(e,n);default:return}}function root$2(e,n){return{type:"root",children:all$1(e,n)}}function doctype$1(){return{type:"doctype"}}function text$4(e){return{type:"text",value:e.nodeValue||""}}function comment$1(e){return{type:"comment",value:e.nodeValue||""}}function element$1(e,n){const l=e.namespaceURI,d=l===webNamespaces.svg?s:h$3,g=l===webNamespaces.html?e.tagName.toLowerCase():e.tagName,jn=l===webNamespaces.html&&g==="template"?e.content:e,Un=e.getAttributeNames(),zn={};let qn=-1;for(;++qn<Un.length;)zn[Un[qn]]=e.getAttribute(Un[qn])||"";return d(g,zn,all$1(jn,n))}function all$1(e,n){const l=e.childNodes,d=[];let g=-1;for(;++g<l.length;){const jn=transform(l[g],n);jn!==void 0&&d.push(jn)}return d}var Ee$2=Object.defineProperty,Ie$3=(e,n,l)=>n in e?Ee$2(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,b$1=(e,n,l)=>Ie$3(e,typeof n!="symbol"?n+"":n,l);function we$1(e){const n=Array.from(e.classList).filter(l=>!l.startsWith("bn-"))||[];n.length>0?e.className=n.join(" "):e.removeAttribute("class")}function ye(e,n,l,d){var g;let jn;if(n)if(typeof n=="string")jn=T$2([n],e.pmSchema);else if(Array.isArray(n))jn=T$2(n,e.pmSchema);else if(n.type==="tableContent")jn=kt$3(n,e.pmSchema);else throw new O$1(n.type);else throw new Error("blockContent is required");const Un=(d?.document??document).createDocumentFragment();for(const zn of jn)if(zn.type.name!=="text"&&e.schema.inlineContentSchema[zn.type.name]){const qn=e.schema.inlineContentSpecs[zn.type.name].implementation;if(qn){const Kn=wt$2(zn,e.schema.inlineContentSchema,e.schema.styleSchema),Xn=qn.toExternalHTML?qn.toExternalHTML(Kn,e):qn.render.call({renderType:"dom",props:void 0},Kn,()=>{},e);if(Xn){if(Un.appendChild(Xn.dom),Xn.contentDOM){const Qn=l.serializeFragment(zn.content,d);Xn.contentDOM.dataset.editable="",Xn.contentDOM.appendChild(Qn)}continue}}}else if(zn.type.name==="text"){let qn=document.createTextNode(zn.textContent);for(const Kn of zn.marks.toReversed())if(Kn.type.name in e.schema.styleSpecs){const Xn=(e.schema.styleSpecs[Kn.type.name].implementation.toExternalHTML??e.schema.styleSpecs[Kn.type.name].implementation.render)(Kn.attrs.stringValue,e);Xn.contentDOM.appendChild(qn),qn=Xn.dom}else{const Xn=Kn.type.spec.toDOM(Kn,!0),Qn=DOMSerializer.renderSpec(document,Xn);Qn.contentDOM.appendChild(qn),qn=Qn.dom}Un.appendChild(qn)}else{const qn=l.serializeFragment(Fragment.from([zn]),d);Un.appendChild(qn)}return Un.childNodes.length===1&&((g=Un.firstChild)==null?void 0:g.nodeType)===1&&we$1(Un.firstChild),Un}function yt$1(e,n,l,d,g,jn,Un){var zn,qn,Kn,Xn,Qn,Jn,Ai,Ri,Ni;const $i=Un?.document??document,Li=n.pmSchema.nodes.blockContainer,ji=l.props||{};for(const[ls,Zi]of Object.entries(n.schema.blockSchema[l.type].propSchema))!(ls in ji)&&Zi.default!==void 0&&(ji[ls]=Zi.default);const Fi=(qn=(zn=Li.spec)==null?void 0:zn.toDOM)==null?void 0:qn.call(zn,Li.create({id:l.id,...ji})),qi=Array.from(Fi.dom.attributes),zi=n.blockImplementations[l.type].implementation,Gi=((Kn=zi.toExternalHTML)==null?void 0:Kn.call({},{...l,props:ji},n))||zi.render.call({},{...l,props:ji},n),Xi=$i.createDocumentFragment();if(Gi.dom.classList.contains("bn-block-content")){const ls=[...qi,...Array.from(Gi.dom.attributes)].filter(Zi=>Zi.name.startsWith("data")&&Zi.name!=="data-content-type"&&Zi.name!=="data-file-block"&&Zi.name!=="data-node-view-wrapper"&&Zi.name!=="data-node-type"&&Zi.name!=="data-id"&&Zi.name!=="data-editable");for(const Zi of ls)Gi.dom.firstChild.setAttribute(Zi.name,Zi.value);we$1(Gi.dom.firstChild),Xi.append(...Array.from(Gi.dom.childNodes))}else Xi.append(Gi.dom);if(Gi.contentDOM&&l.content){const ls=ye(n,l.content,d,Un);Gi.contentDOM.appendChild(ls)}let as;if(g.has(l.type)?as="OL":jn.has(l.type)&&(as="UL"),as){if(((Xn=e.lastChild)==null?void 0:Xn.nodeName)!==as){const ls=$i.createElement(as);as==="OL"&&"start"in ji&&ji.start&&ji?.start!==1&&ls.setAttribute("start",ji.start+""),e.append(ls)}e.lastChild.appendChild(Xi)}else e.append(Xi);if(l.children&&l.children.length>0){const ls=$i.createDocumentFragment();if(be$1(ls,n,l.children,d,g,jn,Un),((Qn=e.lastChild)==null?void 0:Qn.nodeName)==="UL"||((Jn=e.lastChild)==null?void 0:Jn.nodeName)==="OL")for(;((Ai=ls.firstChild)==null?void 0:Ai.nodeName)==="UL"||((Ri=ls.firstChild)==null?void 0:Ri.nodeName)==="OL";)e.lastChild.lastChild.appendChild(ls.firstChild);n.pmSchema.nodes[l.type].isInGroup("blockContent")?e.append(ls):(Ni=Gi.contentDOM)==null||Ni.append(ls)}}const be$1=(e,n,l,d,g,jn,Un)=>{for(const zn of l)yt$1(e,n,zn,d,g,jn,Un)},bt$1=(e,n,l,d,g,jn)=>{const Un=(jn?.document??document).createDocumentFragment();return be$1(Un,e,n,l,d,g,jn),Un},ve$2=(e,n)=>{const l=DOMSerializer.fromSchema(e);return{exportBlocks:(d,g)=>{const jn=bt$1(n,d,l,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem","toggleListItem"]),g),Un=document.createElement("div");return Un.append(jn),Un.innerHTML},exportInlineContent:(d,g)=>{const jn=ye(n,d,l,g),Un=document.createElement("div");return Un.append(jn.cloneNode(!0)),Un.innerHTML}}};function vt$1(e,n){if(n===0)return;const l=e.resolve(n);for(let d=l.depth;d>0;d--){const g=l.node(d);if(Bt$2(g))return g.attrs.id}}function kt$1(e){return e.getMeta("paste")?{type:"paste"}:e.getMeta("uiEvent")==="drop"?{type:"drop"}:e.getMeta("history$")?{type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")?e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function Z(e){const n="__root__",l={},d={},g=ht$2(e);return e.descendants((jn,Un)=>{if(!Bt$2(jn))return!0;const zn=vt$1(e,Un),qn=zn??n;d[qn]||(d[qn]=[]);const Kn=L$1(jn,g);return l[jn.attrs.id]={block:Kn,parentId:zn},d[qn].push(jn.attrs.id),!0}),{byId:l,childrenByParent:d}}function Ct$1(e,n){const l=new Set;if(!e||!n)return l;const d=new Set(e),g=n.filter(Ni=>d.has(Ni)),jn=e.filter(Ni=>g.includes(Ni));if(jn.length<=1||g.length<=1)return l;const Un={};for(let Ni=0;Ni<jn.length;Ni++)Un[jn[Ni]]=Ni;const zn=g.map(Ni=>Un[Ni]),qn=zn.length,Kn=[],Xn=[],Qn=new Array(qn).fill(-1),Jn=(Ni,$i)=>{let Li=0,ji=Ni.length;for(;Li<ji;){const Fi=Li+ji>>>1;Ni[Fi]<$i?Li=Fi+1:ji=Fi}return Li};for(let Ni=0;Ni<qn;Ni++){const $i=zn[Ni],Li=Jn(Kn,$i);Li>0&&(Qn[Ni]=Xn[Li-1]),Li===Kn.length?(Kn.push($i),Xn.push(Ni)):(Kn[Li]=$i,Xn[Li]=Ni)}const Ai=new Set;let Ri=Xn[Xn.length-1]??-1;for(;Ri!==-1;)Ai.add(Ri),Ri=Qn[Ri];for(let Ni=0;Ni<g.length;Ni++)Ai.has(Ni)||l.add(g[Ni]);return l}function St$1(e,n=[]){const l=kt$1(e),d=combineTransactionSteps(e.before,[e,...n]),g=Z(d.before),jn=Z(d.doc),Un=[],zn=new Set;Object.keys(jn.byId).filter(Ai=>!(Ai in g.byId)).forEach(Ai=>{Un.push({type:"insert",block:jn.byId[Ai].block,source:l,prevBlock:void 0}),zn.add(Ai)}),Object.keys(g.byId).filter(Ai=>!(Ai in jn.byId)).forEach(Ai=>{Un.push({type:"delete",block:g.byId[Ai].block,source:l,prevBlock:void 0}),zn.add(Ai)}),Object.keys(jn.byId).filter(Ai=>Ai in g.byId).forEach(Ai=>{var Ri,Ni;const $i=g.byId[Ai],Li=jn.byId[Ai];$i.parentId!==Li.parentId?(Un.push({type:"move",block:Li.block,prevBlock:$i.block,source:l,prevParent:$i.parentId?(Ri=g.byId[$i.parentId])==null?void 0:Ri.block:void 0,currentParent:Li.parentId?(Ni=jn.byId[Li.parentId])==null?void 0:Ni.block:void 0}),zn.add(Ai)):Oe$1({...$i.block,children:void 0},{...Li.block,children:void 0})||(Un.push({type:"update",block:Li.block,prevBlock:$i.block,source:l}),zn.add(Ai))});const qn=g.childrenByParent,Kn=jn.childrenByParent,Xn="__root__",Qn=new Set([...Object.keys(qn),...Object.keys(Kn)]),Jn=new Set;return Qn.forEach(Ai=>{const Ri=Ct$1(qn[Ai],Kn[Ai]);Ri.size!==0&&Ri.forEach(Ni=>{var $i,Li;const ji=g.byId[Ni],Fi=jn.byId[Ni];!ji||!Fi||ji.parentId!==Fi.parentId||zn.has(Ni)||(ji.parentId??Xn)!==Ai||Jn.has(Ni)||(Jn.add(Ni),Un.push({type:"move",block:Fi.block,prevBlock:ji.block,source:l,prevParent:ji.parentId?($i=g.byId[ji.parentId])==null?void 0:$i.block:void 0,currentParent:Fi.parentId?(Li=jn.byId[Fi.parentId])==null?void 0:Li.block:void 0}),zn.add(Ni))})}),Un}const po$2=a$1(()=>{const e=[];return{key:"blockChange",prosemirrorPlugins:[new Plugin({key:new PluginKey("blockChange"),filterTransaction:n=>{let l;return e.reduce((d,g)=>d===!1?d:g({getChanges(){return l||(l=St$1(n),l)},tr:n})!==!1,!0)}})],subscribe(n){return e.push(n),()=>{e.splice(e.indexOf(n),1)}}}});function ee$2(e){const n=e.charAt(0)==="#"?e.substring(1,7):e,l=parseInt(n.substring(0,2),16),d=parseInt(n.substring(2,4),16),g=parseInt(n.substring(4,6),16),jn=[l/255,d/255,g/255].map(Un=>Un<=.03928?Un/12.92:Math.pow((Un+.055)/1.055,2.4));return .2126*jn[0]+.7152*jn[1]+.0722*jn[2]<=.179}function xt$1(e){const n=document.createElement("span");n.classList.add("bn-collaboration-cursor__base");const l=document.createElement("span");l.setAttribute("contentedEditable","false"),l.classList.add("bn-collaboration-cursor__caret"),l.setAttribute("style",`background-color: ${e.color}; color: ${ee$2(e.color)?"white":"black"}`);const d=document.createElement("span");return d.classList.add("bn-collaboration-cursor__label"),d.setAttribute("style",`background-color: ${e.color}; color: ${ee$2(e.color)?"white":"black"}`),d.insertBefore(document.createTextNode(e.name),null),l.insertBefore(d,null),n.insertBefore(document.createTextNode(""),null),n.insertBefore(l,null),n.insertBefore(document.createTextNode(""),null),n}const te$1=a$1(({options:e})=>{const n=new Map,l=e.provider&&"awareness"in e.provider&&typeof e.provider.awareness=="object"?e.provider.awareness:void 0;return l&&("setLocalStateField"in l&&typeof l.setLocalStateField=="function"&&l.setLocalStateField("user",e.user),"on"in l&&typeof l.on=="function"&&e.showCursorLabels!=="always"&&l.on("change",({updated:d})=>{for(const g of d){const jn=n.get(g);jn&&(jn.element.setAttribute("data-active",""),jn.hideTimeout&&clearTimeout(jn.hideTimeout),n.set(g,{element:jn.element,hideTimeout:setTimeout(()=>{jn.element.removeAttribute("data-active")},2e3)}))}})),{key:"yCursor",prosemirrorPlugins:[l?yCursorPlugin(l,{selectionBuilder:defaultSelectionBuilder,cursorBuilder(d,g){let jn=n.get(g);if(!jn){const Un=(e.renderCursor??xt$1)(d);e.showCursorLabels!=="always"&&(Un.addEventListener("mouseenter",()=>{const zn=n.get(g);zn.element.setAttribute("data-active",""),zn.hideTimeout&&(clearTimeout(zn.hideTimeout),n.set(g,{element:zn.element,hideTimeout:void 0}))}),Un.addEventListener("mouseleave",()=>{const zn=n.get(g);n.set(g,{element:zn.element,hideTimeout:setTimeout(()=>{zn.element.removeAttribute("data-active")},2e3)})})),jn={element:Un,hideTimeout:void 0},n.set(g,jn)}return jn.element}}):void 0].filter(Boolean),dependsOn:["ySync"],updateUser(d){l?.setLocalStateField("user",d)}}}),F$2=a$1(({options:e})=>({key:"ySync",prosemirrorPlugins:[ySyncPlugin(e.fragment)],runsBefore:["default"]})),$=a$1(()=>({key:"yUndo",prosemirrorPlugins:[yUndoPlugin()],dependsOn:["yCursor","ySync"],undoCommand,redoCommand}));function Et$1(e,n){const l=e.doc;if(e._item===null){const d=Array.from(l.share.keys()).find(g=>l.share.get(g)===e);if(d==null)throw new Error("type does not exist in other ydoc");return n.get(d,e.constructor)}else{const d=e._item,g=n.store.clients.get(d.id.client)??[],jn=findIndexSS(g,d.id.clock);return g[jn].content.type}}const fo$2=a$1(({editor:e,options:n})=>{let l;const d=f$3({isForked:!1});return{key:"yForkDoc",store:d,fork(){if(l)return;const g=n.fragment;if(!g)throw new Error("No fragment to fork from");const jn=new Doc;applyUpdate(jn,encodeStateAsUpdate(g.doc));const Un=Et$1(g,jn);l={undoStack:yUndoPluginKey.getState(e.prosemirrorState).undoManager.undoStack,originalFragment:g,forkedFragment:Un},e.unregisterExtension([$,te$1,F$2]);const zn={...n,fragment:Un};e.registerExtension([F$2(zn),$()]),d.setState({isForked:!0})},merge({keepChanges:g}){if(!l)return;e.unregisterExtension(["ySync","yCursor","yUndo"]);const{originalFragment:jn,forkedFragment:Un,undoStack:zn}=l;if(e.registerExtension([F$2(n),te$1(n),$()]),yUndoPluginKey.getState(e.prosemirrorState).undoManager.undoStack=zn,g){const qn=encodeStateAsUpdate(Un.doc,encodeStateVector(jn.doc));applyUpdate(jn.doc,qn,e)}l=void 0,d.setState({isForked:!1})}}}),ke=(e,n)=>{n(e),e.forEach(l=>{l instanceof YXmlElement&&ke(l,n)})},It$1=(e,n)=>{const l=new Map;return e.forEach(d=>{d instanceof YXmlElement&&ke(d,g=>{if(g.nodeName==="blockContainer"&&g.hasAttribute("id")){const jn=g.getAttribute("textColor"),Un=g.getAttribute("backgroundColor"),zn={textColor:jn===h$4.textColor.default?void 0:jn,backgroundColor:Un===h$4.backgroundColor.default?void 0:Un};(zn.textColor||zn.backgroundColor)&&l.set(g.getAttribute("id"),zn)}})}),l.size===0?!1:(n.doc.descendants((d,g)=>{if(d.type.name==="blockContainer"&&l.has(d.attrs.id)){const jn=n.doc.nodeAt(g+1);if(!jn)throw new Error("No element found");n.setNodeMarkup(g+1,void 0,{...jn.attrs,...l.get(d.attrs.id)})}}),!0)},Bt$1=[It$1],go$2=a$1(({options:e})=>{let n=!1;const l=new PluginKey("schemaMigration");return{key:"schemaMigration",prosemirrorPlugins:[new Plugin({key:l,appendTransaction:(d,g,jn)=>{if(n||!d.some(zn=>zn.getMeta("y-sync$"))||d.every(zn=>!zn.docChanged)||!e.fragment.firstChild)return;const Un=jn.tr;for(const zn of Bt$1)zn(e.fragment,Un);if(n=!0,!!Un.docChanged)return Un}})]}}),wo$2=a$1(({editor:e,options:n})=>({key:"dropCursor",prosemirrorPlugins:[(n.dropCursor??dropCursor)({width:5,color:"#ddeeff",editor:e})]})),yo$2=a$1(({editor:e})=>{const n=f$3(!1),l=()=>e.transact(d=>{var g;if(d.selection.empty||d.selection instanceof NodeSelection&&(d.selection.node.type.spec.content==="inline*"||((g=d.selection.node.firstChild)==null?void 0:g.type.spec.content)==="inline*")||d.selection instanceof TextSelection&&d.doc.textBetween(d.selection.from,d.selection.to).length===0)return!1;let jn=!1;return d.selection.content().content.descendants(Un=>(Un.type.spec.code&&(jn=!0),!jn)),!jn});return{key:"formattingToolbar",store:n,mount({dom:d,signal:g}){let jn=!1;const Un=e.onChange(()=>{jn||n.setState(l())}),zn=e.onSelectionChange(()=>{jn||n.setState(l())});d.addEventListener("pointerdown",()=>{jn=!0,n.setState(!1)},{signal:g}),e.prosemirrorView.root.addEventListener("pointerup",()=>{jn=!1,e.isFocused()&&n.setState(l())},{signal:g,capture:!0}),d.addEventListener("pointercancel",()=>{jn=!1},{signal:g,capture:!0}),g.addEventListener("abort",()=>{Un(),zn()})}}}),bo$1=a$1(()=>({key:"history",prosemirrorPlugins:[history()],undoCommand:undo,redoCommand:redo})),vo$2=a$1(({editor:e})=>{function n(g){let jn=e.prosemirrorView.nodeDOM(g);for(;jn&&jn.parentElement;){if(jn.nodeName==="A")return jn;jn=jn.parentElement}return null}function l(g,jn){return e.transact(Un=>{const zn=Un.doc.resolve(g),qn=zn.marks().find(Xn=>Xn.type.name===jn);if(!qn)return;const Kn=getMarkRange(zn,qn.type);if(Kn)return{range:Kn,mark:qn,get text(){return Un.doc.textBetween(Kn.from,Kn.to)},get position(){return posToDOMRect(e.prosemirrorView,Kn.from,Kn.to).toJSON()}}})}function d(){return e.transact(g=>{const jn=g.selection;if(jn.empty)return l(jn.anchor,"link")})}return{key:"linkToolbar",getLinkAtSelection:d,getLinkElementAtPos:n,getMarkAtPos:l,getLinkAtElement(g){return e.transact(()=>{const jn=e.prosemirrorView.posAtDOM(g,0)+1;return l(jn,"link")})},editLink(g,jn,Un=e.transact(zn=>zn.selection.anchor)){e.transact(zn=>{const qn=ht$2(zn),{range:Kn}=l(Un+1,"link")||{range:{from:zn.selection.from,to:zn.selection.to}};Kn&&(zn.insertText(jn,Kn.from,Kn.to),zn.addMark(Kn.from,Kn.from+jn.length,qn.mark("link",{href:g})))}),e.prosemirrorView.focus()},deleteLink(g=e.transact(jn=>jn.selection.anchor)){e.transact(jn=>{const Un=ht$2(jn),{range:zn}=l(g+1,"link")||{range:{from:jn.selection.from,to:jn.selection.to}};zn&&jn.removeMark(zn.from,zn.to,Un.marks.link).setMeta("preventAutolink",!0)}),e.prosemirrorView.focus()}}}),ko$2=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],Co$1="https",Tt$1=new PluginKey("node-selection-keyboard"),So$2=a$1(()=>({key:"nodeSelectionKeyboard",prosemirrorPlugins:[new Plugin({key:Tt$1,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const l=e.state.tr;return e.dispatch(l.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new TextSelection(l.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}})]})),Pt$2=new PluginKey("blocknote-placeholder"),xo$2=a$1(({editor:e,options:n})=>{const l=n.placeholders;return{key:"placeholder",prosemirrorPlugins:[new Plugin({key:Pt$2,view:d=>{const g=`placeholder-selector-${v4()}`;d.dom.classList.add(g);const jn=document.createElement("style"),Un=e._tiptapEditor.options.injectNonce;Un&&jn.setAttribute("nonce",Un),d.root instanceof window.ShadowRoot?d.root.append(jn):d.root.head.appendChild(jn);const zn=jn.sheet,qn=(Kn="")=>`.${g} .bn-block-content${Kn} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:Kn,emptyDocument:Xn,...Qn}=l||{};for(const[Ri,Ni]of Object.entries(Qn)){const $i=`[data-content-type="${Ri}"]`;zn.insertRule(`${qn($i)} { content: ${JSON.stringify(Ni)}; }`)}zn.insertRule(`${qn("[data-is-only-empty-block]")} { content: ${JSON.stringify(Xn)}; }`),zn.insertRule(`${qn("[data-is-empty-and-focused]")} { content: ${JSON.stringify(Kn)}; }`)}catch(Kn){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",Kn)}return{destroy:()=>{d.root instanceof window.ShadowRoot?d.root.removeChild(jn):d.root.head.removeChild(jn)}}},props:{decorations:d=>{const{doc:g,selection:jn}=d;if(!e.isEditable||!jn.empty||jn.$from.parent.type.spec.code)return;const Un=[];d.doc.content.size===6&&Un.push(Decoration.node(2,4,{"data-is-only-empty-block":"true"}));const zn=jn.$anchor,qn=zn.parent;if(qn.content.size===0){const Kn=zn.before();Un.push(Decoration.node(Kn,Kn+qn.nodeSize,{"data-is-empty-and-focused":"true"}))}return DecorationSet.create(g,Un)}}})]}}),oe$2=new PluginKey("previous-blocks"),Ot$1={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},Eo$2=a$1(()=>{let e;return{key:"previousBlockType",prosemirrorPlugins:[new Plugin({key:oe$2,view(n){return{update:async(l,d)=>{var g;((g=this.key)==null?void 0:g.getState(l.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{l.dispatch(l.state.tr.setMeta(oe$2,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,l,d,g){if(l.currentTransactionOldBlockAttrs={},l.updatedBlocks.clear(),!n.docChanged||d.doc.eq(g.doc))return l;const jn={},Un=findChildren(d.doc,Kn=>Kn.attrs.id),zn=new Map(Un.map(Kn=>[Kn.node.attrs.id,Kn])),qn=findChildren(g.doc,Kn=>Kn.attrs.id);for(const Kn of qn){const Xn=zn.get(Kn.node.attrs.id),Qn=Xn?.node.firstChild,Jn=Kn.node.firstChild;if(Xn&&Qn&&Jn){const Ai={index:Jn.attrs.index,level:Jn.attrs.level,type:Jn.type.name,depth:g.doc.resolve(Kn.pos).depth},Ri={index:Qn.attrs.index,level:Qn.attrs.level,type:Qn.type.name,depth:d.doc.resolve(Xn.pos).depth};jn[Kn.node.attrs.id]=Ri,l.currentTransactionOldBlockAttrs[Kn.node.attrs.id]=Ri,JSON.stringify(Ri)!==JSON.stringify(Ai)&&(Ri["depth-change"]=Ri.depth-Ai.depth,l.updatedBlocks.add(Kn.node.attrs.id))}}return l.prevTransactionOldBlockAttrs=jn,l}},props:{decorations(n){const l=this.getState(n);if(l.updatedBlocks.size===0)return;const d=[];return n.doc.descendants((g,jn)=>{if(!g.attrs.id||!l.updatedBlocks.has(g.attrs.id))return;const Un=l.currentTransactionOldBlockAttrs[g.attrs.id],zn={};for(const[Kn,Xn]of Object.entries(Un))zn["data-prev-"+Ot$1[Kn]]=Xn||"none";const qn=Decoration.node(jn,jn+g.nodeSize,{...zn});d.push(qn)}),DecorationSet.create(n.doc,d)}}})]}});function Ce$2(e,n){for(var l,d;e&&e.parentElement&&e.parentElement!==n.dom&&((l=e.getAttribute)==null?void 0:l.call(e,"data-node-type"))!=="blockContainer";)e=e.parentElement;if(((d=e.getAttribute)==null?void 0:d.call(e,"data-node-type"))==="blockContainer")return{node:e,id:e.getAttribute("data-id")}}function Dt$1(){const e=n=>{let l=n.children.length;for(let d=0;d<l;d++){const g=n.children[d];if(g.type==="element"&&(e(g),g.tagName==="u"))if(g.children.length>0){n.children.splice(d,1,...g.children);const jn=g.children.length-1;l+=jn,d+=jn}else n.children.splice(d,1),l--,d--}};return e}function At$1(){const e=n=>{var l;if(n.children&&"length"in n.children&&n.children.length)for(let d=n.children.length-1;d>=0;d--){const g=n.children[d],jn=d+1<n.children.length?n.children[d+1]:void 0;g.type==="element"&&g.tagName==="input"&&((l=g.properties)==null?void 0:l.type)==="checkbox"&&jn?.type==="element"&&jn.tagName==="p"?(jn.tagName="span",jn.children.splice(0,0,fromDom(document.createTextNode(" ")))):e(g)}};return e}function Mt(){return e=>{visit(e,"element",(n,l,d)=>{var g,jn,Un,zn;if(d&&n.tagName==="video"){const qn=((g=n.properties)==null?void 0:g.src)||((jn=n.properties)==null?void 0:jn["data-url"])||"",Kn=((Un=n.properties)==null?void 0:Un.title)||((zn=n.properties)==null?void 0:zn["data-name"])||"";d.children[l]={type:"text",value:`![${Kn}](${qn})`}}})}}function Se(e){return unified().use(rehypeParse,{fragment:!0}).use(Mt).use(Dt$1).use(At$1).use(rehypeRemark).use(remarkGfm).use(remarkStringify,{handlers:{text:n=>n.value}}).processSync(e).value}function Io$2(e,n,l,d){const g=ve$2(n,l).exportBlocks(e,d);return Se(g)}function Lt$1(e){const n=[];return e.descendants(l=>{var d,g;const jn=ht$2(l);return l.type.name==="blockContainer"&&((d=l.firstChild)==null?void 0:d.type.name)==="blockGroup"?!0:l.type.name==="columnList"&&l.childCount===1?((g=l.firstChild)==null||g.forEach(Un=>{n.push(L$1(Un,jn))}),!1):l.type.isInGroup("bnBlock")?(n.push(L$1(l,jn)),!1):!0}),n}class B extends Selection{constructor(n,l){super(n,l),b$1(this,"nodes");const d=n.node();this.nodes=[],n.doc.nodesBetween(n.pos,l.pos,(g,jn,Un)=>{if(Un!==null&&Un.eq(d))return this.nodes.push(g),!1})}static create(n,l,d=l){return new B(n.resolve(l),n.resolve(d))}content(){return new Slice(Fragment.from(this.nodes),0,0)}eq(n){if(!(n instanceof B)||this.nodes.length!==n.nodes.length||this.from!==n.from||this.to!==n.to)return!1;for(let l=0;l<this.nodes.length;l++)if(!this.nodes[l].eq(n.nodes[l]))return!1;return!0}map(n,l){const d=l.mapResult(this.from),g=l.mapResult(this.to);return g.deleted?Selection.near(n.resolve(d.pos)):d.deleted?Selection.near(n.resolve(g.pos)):new B(n.resolve(d.pos),n.resolve(g.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}Selection.jsonID("multiple-node",B);let x$1;function Nt$2(e,n){let l,d;const g=n.resolve(e.from).node().type.spec.group==="blockContent",jn=n.resolve(e.to).node().type.spec.group==="blockContent",Un=Math.min(e.$anchor.depth,e.$head.depth);if(g&&jn){const zn=e.$from.start(Un-1),qn=e.$to.end(Un-1);l=n.resolve(zn-1).pos,d=n.resolve(qn+1).pos}else l=e.from,d=e.to;return{from:l,to:d}}function ne$2(e,n,l=n){n===l&&(l+=e.state.doc.resolve(n+1).node().nodeSize);const d=e.domAtPos(n).node.cloneNode(!0),g=e.domAtPos(n).node,jn=(Xn,Qn)=>Array.prototype.indexOf.call(Xn.children,Qn),Un=jn(g,e.domAtPos(n+1).node.parentElement),zn=jn(g,e.domAtPos(l-1).node.parentElement);for(let Xn=g.childElementCount-1;Xn>=0;Xn--)(Xn>zn||Xn<Un)&&d.removeChild(d.children[Xn]);xe$2(e.root),x$1=d;const qn=x$1.getElementsByTagName("iframe");for(let Xn=0;Xn<qn.length;Xn++){const Qn=qn[Xn],Jn=Qn.parentElement;Jn&&Jn.removeChild(Qn)}const Kn=e.dom.className.split(" ").filter(Xn=>Xn!=="ProseMirror"&&Xn!=="bn-root"&&Xn!=="bn-editor").join(" ");x$1.className=x$1.className+" bn-drag-preview "+Kn,e.root instanceof ShadowRoot?e.root.appendChild(x$1):e.root.body.appendChild(x$1)}function xe$2(e){x$1!==void 0&&(e instanceof ShadowRoot?e.removeChild(x$1):e.body.removeChild(x$1),x$1=void 0)}function Rt$1(e,n,l){if(!e.dataTransfer||l.headless)return;const d=l.prosemirrorView,g=Tt$2(n.id,d.state.doc);if(!g)throw new Error(`Block with ID ${n.id} not found`);const jn=g.posBeforeNode;if(jn!=null){const Un=d.state.selection,zn=d.state.doc,{from:qn,to:Kn}=Nt$2(Un,zn),Xn=qn<=jn&&jn<Kn,Qn=Un.$anchor.node()!==Un.$head.node()||Un instanceof B;Xn&&Qn?(d.dispatch(d.state.tr.setSelection(B.create(zn,qn,Kn))),ne$2(d,qn,Kn)):(d.dispatch(d.state.tr.setSelection(NodeSelection.create(d.state.doc,jn))),ne$2(d,jn));const Jn=d.state.selection.content(),Ai=l.pmSchema,Ri=d.serializeForClipboard(Jn).dom.innerHTML,Ni=ve$2(Ai,l),$i=Lt$1(Jn.content),Li=Ni.exportBlocks($i,{}),ji=Se(Li);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",Ri),e.dataTransfer.setData("text/html",Li),e.dataTransfer.setData("text/plain",ji),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(x$1,0,0)}}const re=250;function U$1(e,n,l=!0){const d=e.root.elementsFromPoint(n.left,n.top);for(const g of d)if(e.dom.contains(g))return l&&g.closest("[data-node-type=columnList]")?U$1(e,{left:n.left+50,top:n.top},!1):Ce$2(g,e)}function Vt(e,n){if(!n.dom.firstChild)return;const l=n.dom.firstChild.getBoundingClientRect(),d={left:Math.min(Math.max(l.left+10,e.x),l.right-10),top:e.y},g=U$1(n,d);if(!g)return;const jn=g.node.getBoundingClientRect();return U$1(n,{left:jn.right-10,top:e.y},!1)}class Ht{constructor(n,l,d){b$1(this,"state"),b$1(this,"emitUpdate"),b$1(this,"mousePos"),b$1(this,"hoveredBlock"),b$1(this,"menuFrozen",!1),b$1(this,"isDragOrigin",!1),b$1(this,"updateState",g=>{this.state=g,this.emitUpdate(this.state)}),b$1(this,"updateStateFromMousePos",()=>{var g,jn,Un,zn,qn;if(this.menuFrozen||!this.mousePos)return;const Kn=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(Kn?.element!==this.pmView.dom||Kn.distance>re){(g=this.state)!=null&&g.show&&(this.state.show=!1,this.updateState(this.state));return}const Xn=Vt(this.mousePos,this.pmView);if(!Xn||!this.editor.isEditable){(jn=this.state)!=null&&jn.show&&(this.state.show=!1,this.updateState(this.state));return}if(!((Un=this.state)!=null&&Un.show&&(zn=this.hoveredBlock)!=null&&zn.hasAttribute("data-id")&&((qn=this.hoveredBlock)==null?void 0:qn.getAttribute("data-id"))===Xn.id)&&(this.hoveredBlock=Xn.node,this.editor.isEditable)){const Qn=Xn.node.getBoundingClientRect(),Jn=Xn.node.closest("[data-node-type=column]");this.state={show:!0,referencePos:new DOMRect(Jn?Jn.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,Qn.y,Qn.width,Qn.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))},this.updateState(this.state)}}),b$1(this,"onDragStart",g=>{var jn;const Un=(jn=g.dataTransfer)==null?void 0:jn.getData("blocknote/html");if(!Un||this.pmView.dragging)return;const zn=document.createElement("div");zn.innerHTML=Un;const qn=DOMParser$1.fromSchema(this.pmView.state.schema).parse(zn,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new Slice(qn.content,0,0),move:!0}}),b$1(this,"findClosestEditorElement",g=>{const jn=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(jn.length===0)return null;let Un=jn[0],zn=Number.MAX_VALUE;return jn.forEach(qn=>{const Kn=qn.querySelector(".bn-block-group").getBoundingClientRect(),Xn=g.clientX<Kn.left?Kn.left-g.clientX:g.clientX>Kn.right?g.clientX-Kn.right:0,Qn=g.clientY<Kn.top?Kn.top-g.clientY:g.clientY>Kn.bottom?g.clientY-Kn.bottom:0,Jn=Math.sqrt(Math.pow(Xn,2)+Math.pow(Qn,2));Jn<zn&&(zn=Jn,Un=qn)}),{element:Un,distance:zn}}),b$1(this,"onDragOver",g=>{if(g.synthetic)return;const jn=this.getDragEventContext(g);if(!jn||!jn.isDropPoint){this.closeDropCursor();return}jn.isDropPoint&&!jn.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(g)}),b$1(this,"closeDropCursor",()=>{const g=new Event("dragleave",{bubbles:!1});g.synthetic=!0,this.pmView.dom.dispatchEvent(g)}),b$1(this,"getDragEventContext",g=>{var jn;const Un=!((jn=g.dataTransfer)!=null&&jn.types.includes("blocknote/html"))&&!!this.pmView.dragging,zn=!!this.isDragOrigin,qn=Un||zn,Kn=this.findClosestEditorElement(g);if(!Kn||Kn.distance>re)return;const Xn=Kn.element===this.pmView.dom,Qn=Xn&&Kn.distance===0;if(!(!Xn&&!qn))return{isDropPoint:Xn,isDropWithinEditorBounds:Qn,isDragOrigin:qn}}),b$1(this,"onDrop",g=>{if(g.synthetic)return;const jn=this.getDragEventContext(g);if(!jn){this.closeDropCursor();return}const{isDropPoint:Un,isDropWithinEditorBounds:zn,isDragOrigin:qn}=jn;if(!zn&&Un&&this.dispatchSyntheticEvent(g),Un){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(TextSelection.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(qn){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),b$1(this,"onDragEnd",g=>{g.synthetic||(this.pmView.dragging=null)}),b$1(this,"onKeyDown",g=>{var jn;(jn=this.state)!=null&&jn.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),b$1(this,"onMouseMove",g=>{var jn;if(this.menuFrozen)return;this.mousePos={x:g.clientX,y:g.clientY};const Un=this.pmView.dom.getBoundingClientRect(),zn=this.mousePos.x>Un.left&&this.mousePos.x<Un.right&&this.mousePos.y>Un.top&&this.mousePos.y<Un.bottom,qn=this.pmView.dom.parentElement;if(zn&&g&&g.target&&!(qn===g.target||qn.contains(g.target))){(jn=this.state)!=null&&jn.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),this.editor=n,this.pmView=l,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");d(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0)}dispatchSyntheticEvent(n){const l=new Event(n.type,n),d=this.pmView.dom.firstChild.getBoundingClientRect();l.clientX=n.clientX,l.clientY=n.clientY,l.clientX=Math.min(Math.max(n.clientX,d.left),d.left+d.width),l.clientY=Math.min(Math.max(n.clientY,d.top),d.top+d.height),l.dataTransfer=n.dataTransfer,l.preventDefault=()=>n.preventDefault(),l.synthetic=!0,this.pmView.dom.dispatchEvent(l)}update(n,l){var d;!l.doc.eq(this.pmView.state.doc)&&(d=this.state)!=null&&d.show&&this.updateStateFromMousePos()}destroy(){var n;(n=this.state)!=null&&n.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0)}}const Ft$2=new PluginKey("SideMenuPlugin"),Bo$2=a$1(({editor:e})=>{let n;const l=f$3(void 0);return{key:"sideMenu",store:l,prosemirrorPlugins:[new Plugin({key:Ft$2,view:d=>(n=new Ht(e,d,g=>{l.setState({...g})}),n)})],blockDragStart(d,g){n&&(n.isDragOrigin=!0),Rt$1(d,g,e)},blockDragEnd(){xe$2(e.prosemirrorView.root),n&&(n.isDragOrigin=!1),e.blur()},freezeMenu(){n.menuFrozen=!0,n.state.show=!0,n.emitUpdate(n.state)},unfreezeMenu(){n.menuFrozen=!1,n.state.show=!1,n.emitUpdate(n.state)}}});let C;function se$1(e){C||(C=document.createElement("div"),C.innerHTML="_",C.style.opacity="0",C.style.height="1px",C.style.width="1px",e instanceof Document?e.body.appendChild(C):e.appendChild(C))}function $t$1(e){C&&(e instanceof Document?e.body.removeChild(C):e.removeChild(C),C=void 0)}function M$3(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function Ut$1(e){let n=e;for(;n&&n.nodeName!=="TD"&&n.nodeName!=="TH"&&!n.classList.contains("tableWrapper");){if(n.classList.contains("ProseMirror"))return;const l=n.parentNode;if(!l||!(l instanceof Element))return;n=l}return n.nodeName==="TD"||n.nodeName==="TH"?{type:"cell",domNode:n,tbodyNode:n.closest("tbody")}:{type:"wrapper",domNode:n,tbodyNode:n.querySelector("tbody")}}function _t$1(e,n){const l=n.querySelectorAll(e);for(let d=0;d<l.length;d++)l[d].style.visibility="hidden"}let zt$1=class{constructor(n,l,d){b$1(this,"state"),b$1(this,"emitUpdate"),b$1(this,"tableId"),b$1(this,"tablePos"),b$1(this,"tableElement"),b$1(this,"menuFrozen",!1),b$1(this,"mouseState","up"),b$1(this,"prevWasEditable",null),b$1(this,"viewMousedownHandler",()=>{this.mouseState="down"}),b$1(this,"mouseUpHandler",g=>{this.mouseState="up",this.mouseMoveHandler(g)}),b$1(this,"mouseMoveHandler",g=>{var jn,Un,zn,qn,Kn,Xn,Qn;if(this.menuFrozen||this.mouseState==="selecting"||!(g.target instanceof Element)||!this.pmView.dom.contains(g.target))return;const Jn=Ut$1(g.target);if(Jn?.type==="cell"&&this.mouseState==="down"&&!((jn=this.state)!=null&&jn.draggingState)){this.mouseState="selecting",(Un=this.state)!=null&&Un.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!Jn||!this.editor.isEditable){(zn=this.state)!=null&&zn.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!Jn.tbodyNode)return;const Ai=Jn.tbodyNode.getBoundingClientRect(),Ri=Ce$2(Jn.domNode,this.pmView);if(!Ri)return;this.tableElement=Ri.node;let Ni;const $i=this.editor.transact(Fi=>Tt$2(Ri.id,Fi.doc));if(!$i)throw new Error(`Block with ID ${Ri.id} not found`);const Li=L$1($i.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(b$2(this.editor,"table")&&(this.tablePos=$i.posBeforeNode+1,Ni=Li),!Ni)return;this.tableId=Ri.id;const ji=(qn=Jn.domNode.closest(".tableWrapper"))==null?void 0:qn.querySelector(".table-widgets-container");if(Jn?.type==="wrapper"){const Fi=g.clientY>=Ai.bottom-1&&g.clientY<Ai.bottom+20,qi=g.clientX>=Ai.right-1&&g.clientX<Ai.right+20,zi=g.clientX>Ai.right||g.clientY>Ai.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:Fi,showAddOrRemoveColumnsButton:qi,referencePosTable:Ai,block:Ni,widgetContainer:ji,colIndex:zi||(Kn=this.state)==null?void 0:Kn.colIndex,rowIndex:zi||(Xn=this.state)==null?void 0:Xn.rowIndex,referencePosCell:zi||(Qn=this.state)==null?void 0:Qn.referencePosCell}}else{const Fi=M$3(Jn.domNode),qi=M$3(Jn.domNode.parentElement),zi=Jn.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===Ri.id&&this.state.rowIndex===qi&&this.state.colIndex===Fi)return;this.state={show:!0,showAddOrRemoveColumnsButton:Fi===Ni.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:qi===Ni.content.rows.length-1,referencePosTable:Ai,block:Ni,draggingState:void 0,referencePosCell:zi,colIndex:Fi,rowIndex:qi,widgetContainer:ji}}return this.emitUpdate(),!1}),b$1(this,"dragOverHandler",g=>{var jn;if(((jn=this.state)==null?void 0:jn.draggingState)===void 0)return;g.preventDefault(),g.dataTransfer.dropEffect="move",_t$1(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const Un={left:Math.min(Math.max(g.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(g.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},zn=this.pmView.root.elementsFromPoint(Un.left,Un.top).filter(Ni=>Ni.tagName==="TD"||Ni.tagName==="TH");if(zn.length===0)return;const qn=zn[0];let Kn=!1;const Xn=M$3(qn.parentElement),Qn=M$3(qn),Jn=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,Ai=(this.state.draggingState.draggedCellOrientation==="row"?Xn:Qn)!==Jn;(this.state.rowIndex!==Xn||this.state.colIndex!==Qn)&&(this.state.rowIndex=Xn,this.state.colIndex=Qn,this.state.referencePosCell=qn.getBoundingClientRect(),Kn=!0);const Ri=this.state.draggingState.draggedCellOrientation==="row"?Un.top:Un.left;this.state.draggingState.mousePos!==Ri&&(this.state.draggingState.mousePos=Ri,Kn=!0),Kn&&this.emitUpdate(),Ai&&this.editor.transact(Ni=>Ni.setMeta(D$2,!0))}),b$1(this,"dropHandler",g=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");g.preventDefault();const{draggingState:jn,colIndex:Un,rowIndex:zn}=this.state,qn=this.state.block.content.columnWidths;if(jn.draggedCellOrientation==="row"){if(!Jt$3(this.state.block,jn.originalIndex,zn))return!1;const Kn=Pt$4(this.state.block,jn.originalIndex,zn);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:Kn}})}else{if(!_t$4(this.state.block,jn.originalIndex,Un))return!1;const Kn=Mt$2(this.state.block,jn.originalIndex,Un),[Xn]=qn.splice(jn.originalIndex,1);qn.splice(Un,0,Xn),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:qn,rows:Kn}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=n,this.pmView=l,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");d(this.state)},l.dom.addEventListener("mousemove",this.mouseMoveHandler),l.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),l.root.addEventListener("dragover",this.dragOverHandler),l.root.addEventListener("drop",this.dropHandler)}update(){var n;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((n=this.tableElement)!=null&&n.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:l,width:d}=tt$2(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=l&&(this.state.rowIndex=l-1),this.state.colIndex>=d&&(this.state.colIndex=d-1));const g=this.tableElement.querySelector("tbody");if(!g)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const jn=g.children[this.state.rowIndex].children[this.state.colIndex];jn?this.state.referencePosCell=jn.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=g.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}};const D$2=new PluginKey("TableHandlesPlugin"),To$2=a$1(({editor:e})=>{let n;const l=f$3(void 0);return{key:"tableHandles",store:l,prosemirrorPlugins:[new Plugin({key:D$2,view:d=>(n=new zt$1(e,d,g=>{l.setState(g.block?{...g,draggingState:g.draggingState?{...g.draggingState}:void 0}:void 0)}),n),props:{decorations:d=>{if(n===void 0||n.state===void 0||n.state.draggingState===void 0||n.tablePos===void 0)return;const g=n.state.draggingState.draggedCellOrientation==="row"?n.state.rowIndex:n.state.colIndex;if(g===void 0)return;const jn=[],{block:Un,draggingState:zn}=n.state,{originalIndex:qn,draggedCellOrientation:Kn}=zn;if(g===qn||!Un||Kn==="row"&&!Jt$3(Un,qn,g)||Kn==="col"&&!_t$4(Un,qn,g))return DecorationSet.create(d.doc,jn);const Xn=d.doc.resolve(n.tablePos+1);return n.state.draggingState.draggedCellOrientation==="row"?yt$3(n.state.block,g).forEach(({row:Qn,col:Jn})=>{const Ai=d.doc.resolve(Xn.posAtIndex(Qn)+1),Ri=d.doc.resolve(Ai.posAtIndex(Jn)+1),Ni=Ri.node(),$i=Ri.pos+(g>qn?Ni.nodeSize-2:0);jn.push(Decoration.widget($i,()=>{const Li=document.createElement("div");return Li.className="bn-table-drop-cursor",Li.style.left="0",Li.style.right="0",g>qn?Li.style.bottom="-2px":Li.style.top="-3px",Li.style.height="4px",Li}))}):Ct$3(n.state.block,g).forEach(({row:Qn,col:Jn})=>{const Ai=d.doc.resolve(Xn.posAtIndex(Qn)+1),Ri=d.doc.resolve(Ai.posAtIndex(Jn)+1),Ni=Ri.node(),$i=Ri.pos+(g>qn?Ni.nodeSize-2:0);jn.push(Decoration.widget($i,()=>{const Li=document.createElement("div");return Li.className="bn-table-drop-cursor",Li.style.top="0",Li.style.bottom="0",g>qn?Li.style.right="-2px":Li.style.left="-3px",Li.style.width="4px",Li}))}),DecorationSet.create(d.doc,jn)}}})],colDragStart(d){if(n===void 0||n.state===void 0||n.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");n.state.draggingState={draggedCellOrientation:"col",originalIndex:n.state.colIndex,mousePos:d.clientX},n.emitUpdate(),e.transact(g=>g.setMeta(D$2,{draggedCellOrientation:n.state.draggingState.draggedCellOrientation,originalIndex:n.state.colIndex,newIndex:n.state.colIndex,tablePos:n.tablePos})),!e.headless&&(se$1(e.prosemirrorView.root),d.dataTransfer.setDragImage(C,0,0),d.dataTransfer.effectAllowed="move")},rowDragStart(d){if(n.state===void 0||n.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");n.state.draggingState={draggedCellOrientation:"row",originalIndex:n.state.rowIndex,mousePos:d.clientY},n.emitUpdate(),e.transact(g=>g.setMeta(D$2,{draggedCellOrientation:n.state.draggingState.draggedCellOrientation,originalIndex:n.state.rowIndex,newIndex:n.state.rowIndex,tablePos:n.tablePos})),!e.headless&&(se$1(e.prosemirrorView.root),d.dataTransfer.setDragImage(C,0,0),d.dataTransfer.effectAllowed="copyMove")},dragEnd(){if(n.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");n.state.draggingState=void 0,n.emitUpdate(),e.transact(d=>d.setMeta(D$2,null)),!e.headless&&$t$1(e.prosemirrorView.root)},freezeHandles(){n.menuFrozen=!0},unfreezeHandles(){n.menuFrozen=!1},getCellsAtRowHandle(d,g){return yt$3(d,g)},getCellsAtColumnHandle(d,g){return Ct$3(d,g)},setCellSelection(d,g,jn=g){if(!n)throw new Error("Table handles view not initialized");const Un=d.doc.resolve(n.tablePos+1),zn=d.doc.resolve(Un.posAtIndex(g.row)+1),qn=d.doc.resolve(zn.posAtIndex(g.col)),Kn=d.doc.resolve(Un.posAtIndex(jn.row)+1),Xn=d.doc.resolve(Kn.posAtIndex(jn.col)),Qn=d.tr;return Qn.setSelection(new CellSelection(qn,Xn)),d.apply(Qn)},addRowOrColumn(d,g){e.exec((jn,Un)=>{const zn=this.setCellSelection(jn,g.orientation==="row"?{row:d,col:0}:{row:0,col:d});return g.orientation==="row"?g.side==="above"?addRowBefore(zn,Un):addRowAfter(zn,Un):g.side==="left"?addColumnBefore(zn,Un):addColumnAfter(zn,Un)})},removeRowOrColumn(d,g){return g==="row"?e.exec((jn,Un)=>{const zn=this.setCellSelection(jn,{row:d,col:0});return deleteRow(zn,Un)}):e.exec((jn,Un)=>{const zn=this.setCellSelection(jn,{row:0,col:d});return deleteColumn(zn,Un)})},mergeCells(d){return e.exec((g,jn)=>{const Un=d?this.setCellSelection(g,d.relativeStartCell,d.relativeEndCell):g;return mergeCells(Un,jn)})},splitCell(d){return e.exec((g,jn)=>{const Un=d?this.setCellSelection(g,d):g;return splitCell(Un,jn)})},getCellSelection(){return e.transact(d=>{const g=d.selection;let jn=g.$from,Un=g.$to;if(To$3(g)){const{ranges:Ni}=g;Ni.forEach($i=>{jn=$i.$from.min(jn??$i.$from),Un=$i.$to.max(Un??$i.$to)})}else if(jn=d.doc.resolve(g.$from.pos-g.$from.parentOffset-1),Un=d.doc.resolve(g.$to.pos-g.$to.parentOffset-1),jn.pos===0||Un.pos===0)return;const zn=d.doc.resolve(jn.pos-jn.parentOffset-1),qn=d.doc.resolve(Un.pos-Un.parentOffset-1),Kn=d.doc.resolve(zn.pos-zn.parentOffset-1),Xn=jn.index(zn.depth),Qn=zn.index(Kn.depth),Jn=Un.index(qn.depth),Ai=qn.index(Kn.depth),Ri=[];for(let Ni=Qn;Ni<=Ai;Ni++)for(let $i=Xn;$i<=Jn;$i++)Ri.push({row:Ni,col:$i});return{from:{row:Qn,col:Xn},to:{row:Ai,col:Jn},cells:Ri}})},getMergeDirection(d){return e.transact(g=>{const jn=To$3(g.selection)?g.selection:void 0;if(!jn||!d||jn.ranges.length<=1)return;const Un=this.getCellSelection();if(Un)return Ht$2(Un.from,Un.to,d)?"vertical":"horizontal"})},cropEmptyRowsOrColumns(d,g){return Rt$3(d,g)},addRowsOrColumns(d,g,jn){return $t$3(d,g,jn)}}}),ie$1=new PluginKey("trailingNode"),Po$2=a$1(()=>({key:"trailingNode",prosemirrorPlugins:[new Plugin({key:ie$1,appendTransaction:(e,n,l)=>{const{doc:d,tr:g,schema:jn}=l,Un=ie$1.getState(l),zn=d.content.size-2,qn=jn.nodes.blockContainer,Kn=jn.nodes.paragraph;if(Un)return g.insert(zn,qn.create(void 0,Kn.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let l=e.doc.lastChild;if(!l||l.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(l=l.lastChild,!l||l.type.name!=="blockContainer")return!0;const d=l.firstChild;if(!d)throw new Error("Expected blockContent");return l.nodeSize>4||d.type.spec.content!=="inline*"}}})]}));var u=Object.defineProperty,k$1=(e,n,l)=>n in e?u(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,i$1=(e,n,l)=>k$1(e,typeof n!="symbol"?n+"":n,l);function E$1(e){const n=v$1(e);let{roots:l,nonRoots:d}=f$2(n);const g=[];for(;l.size;){g.push(l);const jn=new Set;for(const Un of l){const zn=e.get(Un);if(zn)for(const qn of zn){const Kn=n.get(qn);if(Kn===void 0)continue;const Xn=Kn-1;n.set(qn,Xn),Xn===0&&jn.add(qn)}}l=jn}if(d=f$2(n).nonRoots,d.size)throw new Error(`Cycle(s) detected; toposort only works on acyclic graphs. Cyclic nodes: ${Array.from(d).join(", ")}`);return g}function D$1(e){const n=I$1(e);return E$1(n)}function v$1(e){const n=new Map;for(const[l,d]of e.entries()){n.has(l)||n.set(l,0);for(const g of d){const jn=n.get(g)??0;n.set(g,jn+1)}}return n}function f$2(e){const n=new Set,l=new Set;for(const[d,g]of e.entries())g===0?n.add(d):l.add(d);return{roots:n,nonRoots:l}}function I$1(e){const n=new Map;for(const[l,d]of e.entries()){n.has(l)||n.set(l,new Set);for(const g of d)n.has(g)||n.set(g,new Set),n.get(g).add(l)}return n}function A$1(){return new Map}function m(e,n,l){return e.has(n)||e.set(n,new Set),e.get(n).add(l),e}function P(e){const n=A$1();for(const g of e)Array.isArray(g.runsBefore)&&g.runsBefore.length>0?g.runsBefore.forEach(jn=>{m(n,g.key,jn)}):m(n,"default",g.key);const l=D$1(n),d=l.findIndex(g=>g.has("default"));return g=>91+(l.findIndex(jn=>jn.has(g))+d)*10}function S(e){return e&&Object.fromEntries(Object.entries(e).filter(([,n])=>n!==void 0))}class N{constructor(n){i$1(this,"BlockNoteEditor","only for types"),i$1(this,"Block","only for types"),i$1(this,"PartialBlock","only for types"),i$1(this,"inlineContentSpecs"),i$1(this,"styleSpecs"),i$1(this,"blockSpecs"),i$1(this,"blockSchema"),i$1(this,"inlineContentSchema"),i$1(this,"styleSchema"),this.opts=n;const{blockSpecs:l,inlineContentSpecs:d,styleSpecs:g,blockSchema:jn,inlineContentSchema:Un,styleSchema:zn}=this.init();this.blockSpecs=l,this.styleSpecs=g,this.styleSchema=zn,this.inlineContentSpecs=d,this.blockSchema=jn,this.inlineContentSchema=Un}init(){const n=P(Object.entries({...this.opts.blockSpecs,...this.opts.inlineContentSpecs,...this.opts.styleSpecs}).map(([jn,Un])=>{var zn;return{key:jn,runsBefore:((zn=Un.implementation)==null?void 0:zn.runsBefore)??[]}})),l=Object.fromEntries(Object.entries(this.opts.blockSpecs).map(([jn,Un])=>[jn,ho$2(Un.config,Un.implementation,Un.extensions,n(jn))])),d=Object.fromEntries(Object.entries(this.opts.inlineContentSpecs).map(([jn,Un])=>{var zn;return typeof Un.config!="object"?[jn,Un]:[jn,{...Un,implementation:{...Un.implementation,node:(zn=Un.implementation)==null?void 0:zn.node.extend({priority:n(jn)})}}]})),g=Object.fromEntries(Object.entries(this.opts.styleSpecs).map(([jn,Un])=>{var zn;return[jn,{...Un,implementation:{...Un.implementation,mark:(zn=Un.implementation)==null?void 0:zn.mark.extend({priority:n(jn)})}}]}));return{blockSpecs:l,blockSchema:Object.fromEntries(Object.entries(l).map(([jn,Un])=>[jn,Un.config])),inlineContentSpecs:S(d),styleSpecs:S(g),inlineContentSchema:wt$1(d),styleSchema:Mt$1(g)}}extend(n){Object.assign(this.opts.blockSpecs,n.blockSpecs),Object.assign(this.opts.inlineContentSpecs,n.inlineContentSpecs),Object.assign(this.opts.styleSpecs,n.styleSpecs);const{blockSpecs:l,inlineContentSpecs:d,styleSpecs:g,blockSchema:jn,inlineContentSchema:Un,styleSchema:zn}=this.init();return this.blockSpecs=l,this.styleSpecs=g,this.styleSchema=zn,this.inlineContentSpecs=d,this.blockSchema=jn,this.inlineContentSchema=Un,this}}let h$2=class ZT extends N{static create(n){return new ZT({blockSpecs:n?.blockSpecs??Po$3,inlineContentSpecs:n?.inlineContentSpecs??$n,styleSpecs:n?.styleSpecs??Fn})}};var h$1=Object.defineProperty,b=(e,n,l)=>n in e?h$1(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,t=(e,n,l)=>b(e,n+"",l);let f$1=class{constructor(){t(this,"callbacks",{})}on(n,l){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(l),()=>this.off(n,l)}emit(n,...l){const d=this.callbacks[n];d&&d.forEach(g=>g.apply(this,l))}off(n,l){const d=this.callbacks[n];d&&(l?this.callbacks[n]=d.filter(g=>g!==l):delete this.callbacks[n])}removeAllListeners(){this.callbacks={}}};const i={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"},divider:{title:"Divider",subtext:"Visually divide blocks",aliases:["divider","hr","line","horizontal rule"],group:"Basic blocks"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{add_button_text:{image:"Add image",video:"Add video",audio:"Add audio",file:"Add file"}},toggle_blocks:{add_block_button:"Empty toggle. Click to add a block."},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:e=>`${e} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};class InputRule{match;handler;undoable;inCode;inCodeMark;constructor(n,l,d={}){this.match=n,this.match=n,this.handler=typeof l=="string"?stringHandler(l):l,this.undoable=d.undoable!==!1,this.inCode=d.inCode||!1,this.inCodeMark=d.inCodeMark!==!1}}function stringHandler(e){return function(n,l,d,g){let jn=e;if(l[1]){let Un=l[0].lastIndexOf(l[1]);jn+=l[0].slice(Un+l[1].length),d+=Un;let zn=d-g;zn>0&&(jn=l[0].slice(Un-zn,Un)+jn,d=g)}return n.tr.insertText(jn,d,g)}}const MAX_MATCH=500;function inputRules({rules:e}){let n=new Plugin({state:{init(){return null},apply(l,d){let g=l.getMeta(this);return g||(l.selectionSet||l.docChanged?null:d)}},props:{handleTextInput(l,d,g,jn){return run$2(l,d,g,jn,e,n)},handleDOMEvents:{compositionend:l=>{setTimeout(()=>{let{$cursor:d}=l.state.selection;d&&run$2(l,d.pos,d.pos,"",e,n)})}}},isInputRules:!0});return n}function run$2(e,n,l,d,g,jn){if(e.composing)return!1;const Un=e.state.tr.insertText(d,n,l),zn=Un.mapping.map(n),qn=Un.mapping.map(l);let Kn=null,Xn=Un.doc.resolve(zn),Qn=Xn.parent.textBetween(Math.max(0,Xn.parentOffset-MAX_MATCH),Xn.parentOffset,null,"");for(let Jn=0;Jn<g.length;Jn++){let Ai=g[Jn];if(!Ai.inCodeMark&&Xn.marks().some($i=>$i.type.spec.code))continue;if(Xn.parent.type.spec.code){if(!Ai.inCode)continue}else if(Ai.inCode==="only")continue;let Ri=Ai.match.exec(Qn);if(!Ri||Ri[0].length<d.length)continue;Kn??=e.state.apply(Un);let Ni=Ai.handler(Kn,Ri,zn-Ri[0].length,qn);if(Ni)return e.dispatch(Un),e.dispatch(closeHistory(e.state.tr)),Ai.undoable&&Ni.setMeta(jn,{transform:Ni,from:zn,to:qn,text:d}),e.dispatch(Ni),!0}return!1}new InputRule(/--$/,"",{inCodeMark:!1});new InputRule(/\.\.\.$/,"",{inCodeMark:!1});new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new InputRule(/"$/,"",{inCodeMark:!1});new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new InputRule(/'$/,"",{inCodeMark:!1});class GapCursor extends Selection{constructor(n){super(n,n)}map(n,l){let d=n.resolve(l.map(this.head));return GapCursor.valid(d)?new GapCursor(d):Selection.near(d)}content(){return Slice.empty}eq(n){return n instanceof GapCursor&&n.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(n,l){if(typeof l.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(n.resolve(l.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(n){let l=n.parent;if(l.isTextblock||!closedBefore(n)||!closedAfter(n))return!1;let d=l.type.spec.allowGapCursor;if(d!=null)return d;let g=l.contentMatchAt(n.index()).defaultType;return g&&g.isTextblock}static findGapCursorFrom(n,l,d=!1){e:for(;;){if(!d&&GapCursor.valid(n))return n;let g=n.pos,jn=null;for(let Un=n.depth;;Un--){let zn=n.node(Un);if(l>0?n.indexAfter(Un)<zn.childCount:n.index(Un)>0){jn=zn.child(l>0?n.indexAfter(Un):n.index(Un)-1);break}else if(Un==0)return null;g+=l;let qn=n.doc.resolve(g);if(GapCursor.valid(qn))return qn}for(;;){let Un=l>0?jn.firstChild:jn.lastChild;if(!Un){if(jn.isAtom&&!jn.isText&&!NodeSelection.isSelectable(jn)){n=n.doc.resolve(g+jn.nodeSize*l),d=!1;continue e}break}jn=Un,g+=l;let zn=n.doc.resolve(g);if(GapCursor.valid(zn))return zn}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(n){this.pos=n}map(n){return new GapBookmark(n.map(this.pos))}resolve(n){let l=n.resolve(this.pos);return GapCursor.valid(l)?new GapCursor(l):Selection.near(l)}}function needsGap(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function closedBefore(e){for(let n=e.depth;n>=0;n--){let l=e.index(n),d=e.node(n);if(l==0){if(d.type.spec.isolating)return!0;continue}for(let g=d.child(l-1);;g=g.lastChild){if(g.childCount==0&&!g.inlineContent||needsGap(g.type))return!0;if(g.inlineContent)return!1}}return!0}function closedAfter(e){for(let n=e.depth;n>=0;n--){let l=e.indexAfter(n),d=e.node(n);if(l==d.childCount){if(d.type.spec.isolating)return!0;continue}for(let g=d.child(l);;g=g.firstChild){if(g.childCount==0&&!g.inlineContent||needsGap(g.type))return!0;if(g.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(e,n,l){return n.pos==l.pos&&GapCursor.valid(l)?new GapCursor(l):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow$4("horiz",-1),ArrowRight:arrow$4("horiz",1),ArrowUp:arrow$4("vert",-1),ArrowDown:arrow$4("vert",1)});function arrow$4(e,n){const l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return function(d,g,jn){let Un=d.selection,zn=n>0?Un.$to:Un.$from,qn=Un.empty;if(Un instanceof TextSelection){if(!jn.endOfTextblock(l)||zn.depth==0)return!1;qn=!1,zn=d.doc.resolve(n>0?zn.after():zn.before())}let Kn=GapCursor.findGapCursorFrom(zn,n,qn);return Kn?(g&&g(d.tr.setSelection(new GapCursor(Kn))),!0):!1}}function handleClick(e,n,l){if(!e||!e.editable)return!1;let d=e.state.doc.resolve(n);if(!GapCursor.valid(d))return!1;let g=e.posAtCoords({left:l.clientX,top:l.clientY});return g&&g.inside>-1&&NodeSelection.isSelectable(e.state.doc.nodeAt(g.inside))?!1:(e.dispatch(e.state.tr.setSelection(new GapCursor(d))),!0)}function beforeinput(e,n){if(n.inputType!="insertCompositionText"||!(e.state.selection instanceof GapCursor))return!1;let{$from:l}=e.state.selection,d=l.parent.contentMatchAt(l.index()).findWrapping(e.state.schema.nodes.text);if(!d)return!1;let g=Fragment.empty;for(let Un=d.length-1;Un>=0;Un--)g=Fragment.from(d[Un].createAndFill(null,g));let jn=e.state.tr.replace(l.pos,l.pos,new Slice(g,0,0));return jn.setSelection(TextSelection.near(jn.doc.resolve(l.pos+1))),e.dispatch(jn),!1}function drawGapCursor(e){if(!(e.selection instanceof GapCursor))return null;let n=document.createElement("div");return n.className="ProseMirror-gapcursor",DecorationSet.create(e.doc,[Decoration.widget(e.selection.head,n,{key:"gapcursor"})])}Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(n=>n!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const n=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const d=n.textBetween(0,n.content.size,void 0," ");return this.options.textCounter(d)}return n.nodeSize},this.storage.words=e=>{const n=e?.node||this.editor.state.doc,l=n.textBetween(0,n.content.size," "," ");return this.options.wordCounter(l)}},addProseMirrorPlugins(){let e=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(n,l,d)=>{if(e)return;const g=this.options.limit;if(g==null||g===0){e=!0;return}const jn=this.storage.characters({node:d.doc});if(jn>g){const Un=jn-g,zn=0,qn=Un;console.warn(`[CharacterCount] Initial content exceeded limit of ${g} characters. Content was automatically trimmed.`);const Kn=d.tr.deleteRange(zn,qn);return e=!0,Kn}e=!0},filterTransaction:(n,l)=>{const d=this.options.limit;if(!n.docChanged||d===0||d===null||d===void 0)return!0;const g=this.storage.characters({node:l.doc}),jn=this.storage.characters({node:n.doc});if(jn<=d||g>d&&jn>d&&jn<=g)return!0;if(g>d&&jn>d&&jn>g||!n.getMeta("paste"))return!1;const zn=n.selection.$head.pos,qn=jn-d,Kn=zn-qn,Xn=zn;return n.deleteRange(Kn,Xn),!(this.storage.characters({node:n.doc})>d)}})]}});Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:e,selection:n})=>{const{isEditable:l,isFocused:d}=this.editor,{anchor:g}=n,jn=[];if(!l||!d)return DecorationSet.create(e,[]);let Un=0;this.options.mode==="deepest"&&e.descendants((qn,Kn)=>{if(qn.isText)return;if(!(g>=Kn&&g<=Kn+qn.nodeSize-1))return!1;Un+=1});let zn=0;return e.descendants((qn,Kn)=>{if(qn.isText||!(g>=Kn&&g<=Kn+qn.nodeSize-1))return!1;if(zn+=1,this.options.mode==="deepest"&&Un-zn>0||this.options.mode==="shallowest"&&zn>1)return this.options.mode==="deepest";jn.push(Decoration.node(Kn,Kn+qn.nodeSize,{class:this.options.className}))}),DecorationSet.create(e,jn)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(e){var n;const l={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(n=callOrReturn(getExtensionField(e,"allowGapCursor",l)))!=null?n:null}}});Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:e,selection:n})=>{const l=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:d}=n,g=[];if(!l)return null;const jn=this.editor.isEmpty;return e.descendants((Un,zn)=>{const qn=d>=zn&&d<=zn+Un.nodeSize,Kn=!Un.isLeaf&&isNodeEmpty(Un);if((qn||!this.options.showOnlyCurrent)&&Kn){const Xn=[this.options.emptyNodeClass];jn&&Xn.push(this.options.emptyEditorClass);const Qn=Decoration.node(zn,zn+Un.nodeSize,{class:Xn.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:Un,pos:zn,hasAnchor:qn}):this.options.placeholder});g.push(Qn)}return this.options.includeChildren}),DecorationSet.create(e,g)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:n}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(l){return l.selection.empty||e.isFocused||!e.isEditable||isNodeSelection(l.selection)||e.view.dragging?null:DecorationSet.create(l.doc,[Decoration.inline(l.selection.from,l.selection.to,{class:n.className})])}}})]}});function nodeEqualsType({types:e,node:n}){return n&&Array.isArray(e)&&e.includes(n.type)||n?.type===e}Extension.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const n=new PluginKey(this.name),l=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",d=Object.entries(this.editor.schema.nodes).map(([,g])=>g).filter(g=>(this.options.notAfter||[]).concat(l).includes(g.name));return[new Plugin({key:n,appendTransaction:(g,jn,Un)=>{const{doc:zn,tr:qn,schema:Kn}=Un,Xn=n.getState(Un),Qn=zn.content.size,Jn=Kn.nodes[l];if(Xn)return qn.insert(Qn,Jn.create())},state:{init:(g,jn)=>{const Un=jn.tr.doc.lastChild;return!nodeEqualsType({node:Un,types:d})},apply:(g,jn)=>{if(!g.docChanged||g.getMeta("__uniqueIDTransaction"))return jn;const Un=g.doc.lastChild;return!nodeEqualsType({node:Un,types:d})}}})]}});Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:n})=>undo(e,n),redo:()=>({state:e,dispatch:n})=>redo(e,n)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha$1="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(e,n){return e in n||(n[e]=[]),n[e]}function addToGroups(e,n,l){n[numeric]&&(n[asciinumeric]=!0,n[alphanumeric]=!0),n[ascii]&&(n[asciinumeric]=!0,n[alpha$1]=!0),n[asciinumeric]&&(n[alphanumeric]=!0),n[alpha$1]&&(n[alphanumeric]=!0),n[alphanumeric]&&(n[domain]=!0),n[emoji]&&(n[domain]=!0);for(const d in n){const g=registerGroup(d,l);g.indexOf(e)<0&&g.push(e)}}function flagsForToken(e,n){const l={};for(const d in n)n[d].indexOf(e)>=0&&(l[d]=!0);return l}function State(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}State.groups={};State.prototype={accepts(){return!!this.t},go(e){const n=this,l=n.j[e];if(l)return l;for(let d=0;d<n.jr.length;d++){const g=n.jr[d][0],jn=n.jr[d][1];if(jn&&g.test(e))return jn}return n.jd},has(e,n=!1){return n?e in this.j:!!this.go(e)},ta(e,n,l,d){for(let g=0;g<e.length;g++)this.tt(e[g],n,l,d)},tr(e,n,l,d){d=d||State.groups;let g;return n&&n.j?g=n:(g=new State(n),l&&d&&addToGroups(n,l,d)),this.jr.push([e,g]),g},ts(e,n,l,d){let g=this;const jn=e.length;if(!jn)return g;for(let Un=0;Un<jn-1;Un++)g=g.tt(e[Un]);return g.tt(e[jn-1],n,l,d)},tt(e,n,l,d){d=d||State.groups;const g=this;if(n&&n.j)return g.j[e]=n,n;const jn=n;let Un,zn=g.go(e);if(zn?(Un=new State,Object.assign(Un.j,zn.j),Un.jr.push.apply(Un.jr,zn.jr),Un.jd=zn.jd,Un.t=zn.t):Un=new State,jn){if(d)if(Un.t&&typeof Un.t=="string"){const qn=Object.assign(flagsForToken(Un.t,d),l);addToGroups(jn,qn,d)}else l&&addToGroups(jn,l,d);Un.t=jn}return g.j[e]=Un,Un}};const ta=(e,n,l,d,g)=>e.ta(n,l,d,g),tr$2=(e,n,l,d,g)=>e.tr(n,l,d,g),ts=(e,n,l,d,g)=>e.ts(n,l,d,g),tt$1=(e,n,l,d,g)=>e.tt(n,l,d,g),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(e=[]){const n={};State.groups=n;const l=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt$1(l,"'",APOSTROPHE),tt$1(l,"{",OPENBRACE),tt$1(l,"}",CLOSEBRACE),tt$1(l,"[",OPENBRACKET),tt$1(l,"]",CLOSEBRACKET),tt$1(l,"(",OPENPAREN),tt$1(l,")",CLOSEPAREN),tt$1(l,"<",OPENANGLEBRACKET),tt$1(l,">",CLOSEANGLEBRACKET),tt$1(l,"",FULLWIDTHLEFTPAREN),tt$1(l,"",FULLWIDTHRIGHTPAREN),tt$1(l,"",LEFTCORNERBRACKET),tt$1(l,"",RIGHTCORNERBRACKET),tt$1(l,"",LEFTWHITECORNERBRACKET),tt$1(l,"",RIGHTWHITECORNERBRACKET),tt$1(l,"",FULLWIDTHLESSTHAN),tt$1(l,"",FULLWIDTHGREATERTHAN),tt$1(l,"&",AMPERSAND),tt$1(l,"*",ASTERISK),tt$1(l,"@",AT),tt$1(l,"`",BACKTICK),tt$1(l,"^",CARET),tt$1(l,":",COLON),tt$1(l,",",COMMA),tt$1(l,"$",DOLLAR),tt$1(l,".",DOT),tt$1(l,"=",EQUALS),tt$1(l,"!",EXCLAMATION),tt$1(l,"-",HYPHEN),tt$1(l,"%",PERCENT),tt$1(l,"|",PIPE),tt$1(l,"+",PLUS),tt$1(l,"#",POUND),tt$1(l,"?",QUERY),tt$1(l,'"',QUOTE),tt$1(l,"/",SLASH),tt$1(l,";",SEMI),tt$1(l,"~",TILDE),tt$1(l,"_",UNDERSCORE),tt$1(l,"\\",BACKSLASH),tt$1(l,"",FULLWIDTHMIDDLEDOT);const d=tr$2(l,DIGIT,NUM,{[numeric]:!0});tr$2(d,DIGIT,d);const g=tr$2(d,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),jn=tr$2(d,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),Un=tr$2(l,ASCII_LETTER,WORD,{[ascii]:!0});tr$2(Un,DIGIT,g),tr$2(Un,ASCII_LETTER,Un),tr$2(g,DIGIT,g),tr$2(g,ASCII_LETTER,g);const zn=tr$2(l,LETTER,UWORD,{[alpha$1]:!0});tr$2(zn,ASCII_LETTER),tr$2(zn,DIGIT,jn),tr$2(zn,LETTER,zn),tr$2(jn,DIGIT,jn),tr$2(jn,ASCII_LETTER),tr$2(jn,LETTER,jn);const qn=tt$1(l,LF,NL,{[whitespace]:!0}),Kn=tt$1(l,CR,WS,{[whitespace]:!0}),Xn=tr$2(l,SPACE,WS,{[whitespace]:!0});tt$1(l,OBJECT_REPLACEMENT,Xn),tt$1(Kn,LF,qn),tt$1(Kn,OBJECT_REPLACEMENT,Xn),tr$2(Kn,SPACE,Xn),tt$1(Xn,CR),tt$1(Xn,LF),tr$2(Xn,SPACE,Xn),tt$1(Xn,OBJECT_REPLACEMENT,Xn);const Qn=tr$2(l,EMOJI,EMOJI$1,{[emoji]:!0});tt$1(Qn,"#"),tr$2(Qn,EMOJI,Qn),tt$1(Qn,EMOJI_VARIATION,Qn);const Jn=tt$1(Qn,EMOJI_JOINER);tt$1(Jn,"#"),tr$2(Jn,EMOJI,Qn);const Ai=[[ASCII_LETTER,Un],[DIGIT,g]],Ri=[[ASCII_LETTER,null],[LETTER,zn],[DIGIT,jn]];for(let Ni=0;Ni<tlds.length;Ni++)fastts(l,tlds[Ni],TLD,WORD,Ai);for(let Ni=0;Ni<utlds.length;Ni++)fastts(l,utlds[Ni],UTLD,UWORD,Ri);addToGroups(TLD,{tld:!0,ascii:!0},n),addToGroups(UTLD,{utld:!0,alpha:!0},n),fastts(l,"file",SCHEME,WORD,Ai),fastts(l,"mailto",SCHEME,WORD,Ai),fastts(l,"http",SLASH_SCHEME,WORD,Ai),fastts(l,"https",SLASH_SCHEME,WORD,Ai),fastts(l,"ftp",SLASH_SCHEME,WORD,Ai),fastts(l,"ftps",SLASH_SCHEME,WORD,Ai),addToGroups(SCHEME,{scheme:!0,ascii:!0},n),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},n),e=e.sort((Ni,$i)=>Ni[0]>$i[0]?1:-1);for(let Ni=0;Ni<e.length;Ni++){const $i=e[Ni][0],ji=e[Ni][1]?{[scheme]:!0}:{[slashscheme]:!0};$i.indexOf("-")>=0?ji[domain]=!0:ASCII_LETTER.test($i)?DIGIT.test($i)?ji[asciinumeric]=!0:ji[ascii]=!0:ji[numeric]=!0,ts(l,$i,$i,ji)}return ts(l,"localhost",LOCALHOST,{ascii:!0}),l.jd=new State(SYM),{start:l,tokens:Object.assign({groups:n},tk)}}function run$1(e,n){const l=stringToArray(n.replace(/[A-Z]/g,zn=>zn.toLowerCase())),d=l.length,g=[];let jn=0,Un=0;for(;Un<d;){let zn=e,qn=null,Kn=0,Xn=null,Qn=-1,Jn=-1;for(;Un<d&&(qn=zn.go(l[Un]));)zn=qn,zn.accepts()?(Qn=0,Jn=0,Xn=zn):Qn>=0&&(Qn+=l[Un].length,Jn++),Kn+=l[Un].length,jn+=l[Un].length,Un++;jn-=Qn,Un-=Jn,Kn-=Qn,g.push({t:Xn.t,v:n.slice(jn-Kn,jn),s:jn-Kn,e:jn})}return g}function stringToArray(e){const n=[],l=e.length;let d=0;for(;d<l;){let g=e.charCodeAt(d),jn,Un=g<55296||g>56319||d+1===l||(jn=e.charCodeAt(d+1))<56320||jn>57343?e[d]:e.slice(d,d+2);n.push(Un),d+=Un.length}return n}function fastts(e,n,l,d,g){let jn;const Un=n.length;for(let zn=0;zn<Un-1;zn++){const qn=n[zn];e.j[qn]?jn=e.j[qn]:(jn=new State(d),jn.jr=g.slice(),e.j[qn]=jn),e=jn}return jn=new State(l),jn.jr=g.slice(),e.j[n[Un-1]]=jn,jn}function decodeTlds(e){const n=[],l=[];let d=0,g="0123456789";for(;d<e.length;){let jn=0;for(;g.indexOf(e[d+jn])>=0;)jn++;if(jn>0){n.push(l.join(""));for(let Un=parseInt(e.substring(d,d+jn),10);Un>0;Un--)l.pop();d+=jn}else l.push(e[d]),d++}return n}const defaults={defaultProtocol:"http",events:null,format:noop$3,formatHref:noop$3,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(e,n=null){let l=Object.assign({},defaults);e&&(l=Object.assign(l,e instanceof Options?e.o:e));const d=l.ignoreTags,g=[];for(let jn=0;jn<d.length;jn++)g.push(d[jn].toUpperCase());this.o=l,n&&(this.defaultRender=n),this.ignoreTags=g}Options.prototype={o:defaults,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,n,l){const d=n!=null;let g=this.o[e];return g&&(typeof g=="object"?(g=l.t in g?g[l.t]:defaults[e],typeof g=="function"&&d&&(g=g(n,l))):typeof g=="function"&&d&&(g=g(n,l.t,l)),g)},getObj(e,n,l){let d=this.o[e];return typeof d=="function"&&n!=null&&(d=d(n,l.t,l)),d},render(e){const n=e.render(this);return(this.get("render",null,e)||this.defaultRender)(n,e.t,e)}};function noop$3(e){return e}function MultiToken(e,n){this.t="token",this.v=e,this.tk=n}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const n=this.toString(),l=e.get("truncate",n,this),d=e.get("format",n,this);return l&&d.length>l?d.substring(0,l)+"":d},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const n=this,l=this.toHref(e.get("defaultProtocol")),d=e.get("formatHref",l,this),g=e.get("tagName",l,n),jn=this.toFormattedString(e),Un={},zn=e.get("className",l,n),qn=e.get("target",l,n),Kn=e.get("rel",l,n),Xn=e.getObj("attributes",l,n),Qn=e.getObj("events",l,n);return Un.href=d,zn&&(Un.class=zn),qn&&(Un.target=qn),Kn&&(Un.rel=Kn),Xn&&Object.assign(Un,Xn),{tagName:g,attributes:Un,content:jn,eventListeners:Qn}}};function createTokenClass(e,n){class l extends MultiToken{constructor(g,jn){super(g,jn),this.t=e}}for(const d in n)l.prototype[d]=n[d];return l.t=e,l}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$2=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(e=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==LOCALHOST&&e[1].t===COLON}}),makeState=e=>new State(e);function init$1({groups:e}){const n=e.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),l=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],d=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],g=makeState(),jn=tt$1(g,TILDE);ta(jn,d,jn),ta(jn,e.domain,jn);const Un=makeState(),zn=makeState(),qn=makeState();ta(g,e.domain,Un),ta(g,e.scheme,zn),ta(g,e.slashscheme,qn),ta(Un,d,jn),ta(Un,e.domain,Un);const Kn=tt$1(Un,AT);tt$1(jn,AT,Kn),tt$1(zn,AT,Kn),tt$1(qn,AT,Kn);const Xn=tt$1(jn,DOT);ta(Xn,d,jn),ta(Xn,e.domain,jn);const Qn=makeState();ta(Kn,e.domain,Qn),ta(Qn,e.domain,Qn);const Jn=tt$1(Qn,DOT);ta(Jn,e.domain,Qn);const Ai=makeState(Email);ta(Jn,e.tld,Ai),ta(Jn,e.utld,Ai),tt$1(Kn,LOCALHOST,Ai);const Ri=tt$1(Qn,HYPHEN);tt$1(Ri,HYPHEN,Ri),ta(Ri,e.domain,Qn),ta(Ai,e.domain,Qn),tt$1(Ai,DOT,Jn),tt$1(Ai,HYPHEN,Ri);const Ni=tt$1(Ai,COLON);ta(Ni,e.numeric,Email);const $i=tt$1(Un,HYPHEN),Li=tt$1(Un,DOT);tt$1($i,HYPHEN,$i),ta($i,e.domain,Un),ta(Li,d,jn),ta(Li,e.domain,Un);const ji=makeState(Url);ta(Li,e.tld,ji),ta(Li,e.utld,ji),ta(ji,e.domain,Un),ta(ji,d,jn),tt$1(ji,DOT,Li),tt$1(ji,HYPHEN,$i),tt$1(ji,AT,Kn);const Fi=tt$1(ji,COLON),qi=makeState(Url);ta(Fi,e.numeric,qi);const zi=makeState(Url),Gi=makeState();ta(zi,n,zi),ta(zi,l,Gi),ta(Gi,n,zi),ta(Gi,l,Gi),tt$1(ji,SLASH,zi),tt$1(qi,SLASH,zi);const Xi=tt$1(zn,COLON),as=tt$1(qn,COLON),ls=tt$1(as,SLASH),Zi=tt$1(ls,SLASH);ta(zn,e.domain,Un),tt$1(zn,DOT,Li),tt$1(zn,HYPHEN,$i),ta(qn,e.domain,Un),tt$1(qn,DOT,Li),tt$1(qn,HYPHEN,$i),ta(Xi,e.domain,zi),tt$1(Xi,SLASH,zi),tt$1(Xi,QUERY,zi),ta(Zi,e.domain,zi),ta(Zi,n,zi),tt$1(Zi,SLASH,zi);const gs=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let bs=0;bs<gs.length;bs++){const[Ss,ss]=gs[bs],Es=tt$1(zi,Ss);tt$1(Gi,Ss,Es),tt$1(Es,ss,zi);const rs=makeState(Url);ta(Es,n,rs);const cs=makeState();ta(Es,l),ta(rs,n,rs),ta(rs,l,cs),ta(cs,n,rs),ta(cs,l,cs),tt$1(rs,ss,zi),tt$1(cs,ss,zi)}return tt$1(g,LOCALHOST,ji),tt$1(g,NL,Nl),{start:g,tokens:tk}}function run(e,n,l){let d=l.length,g=0,jn=[],Un=[];for(;g<d;){let zn=e,qn=null,Kn=null,Xn=0,Qn=null,Jn=-1;for(;g<d&&!(qn=zn.go(l[g].t));)Un.push(l[g++]);for(;g<d&&(Kn=qn||zn.go(l[g].t));)qn=null,zn=Kn,zn.accepts()?(Jn=0,Qn=zn):Jn>=0&&Jn++,g++,Xn++;if(Jn<0)g-=Xn,g<d&&(Un.push(l[g]),g++);else{Un.length>0&&(jn.push(initMultiToken(Text$2,n,Un)),Un=[]),g-=Jn,Xn-=Jn;const Ai=Qn.t,Ri=l.slice(g-Xn,g);jn.push(initMultiToken(Ai,n,Ri))}}return Un.length>0&&jn.push(initMultiToken(Text$2,n,Un)),jn}function initMultiToken(e,n,l){const d=l[0].s,g=l[l.length-1].e,jn=n.slice(d,g);return new e(jn,l)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(e,n=!1){if(INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${e}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([e,n])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let e=0;e<INIT.tokenQueue.length;e++)INIT.tokenQueue[e][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let e=0;e<INIT.pluginQueue.length;e++)INIT.pluginQueue[e][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(e){return INIT.initialized||init(),run(INIT.parser.start,e,run$1(INIT.scanner.start,e))}tokenize.scan=run$1;function find(e,n=null,l=null){if(n&&typeof n=="object"){if(l)throw Error(`linkifyjs: Invalid link type ${n}; must be a string`);l=n,n=null}const d=new Options(l),g=tokenize(e),jn=[];for(let Un=0;Un<g.length;Un++){const zn=g[Un];zn.isLink&&(!n||zn.t===n)&&d.check(zn)&&jn.push(zn.toFormattedObject(d))}return jn}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function autolink(e){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(n,l,d)=>{const g=n.some(Kn=>Kn.docChanged)&&!l.doc.eq(d.doc),jn=n.some(Kn=>Kn.getMeta("preventAutolink"));if(!g||jn)return;const{tr:Un}=d,zn=combineTransactionSteps(l.doc,[...n]);if(getChangedRanges(zn).forEach(({newRange:Kn})=>{const Xn=findChildrenInRange(d.doc,Kn,Ai=>Ai.isTextblock);let Qn,Jn;if(Xn.length>1)Qn=Xn[0],Jn=d.doc.textBetween(Qn.pos,Qn.pos+Qn.node.nodeSize,void 0," ");else if(Xn.length){const Ai=d.doc.textBetween(Kn.from,Kn.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(Ai))return;Qn=Xn[0],Jn=d.doc.textBetween(Qn.pos,Kn.to,void 0," ")}if(Qn&&Jn){const Ai=Jn.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(Ai.length<=0)return!1;const Ri=Ai[Ai.length-1],Ni=Qn.pos+Jn.lastIndexOf(Ri);if(!Ri)return!1;const $i=tokenize(Ri).map(Li=>Li.toObject(e.defaultProtocol));if(!isValidLinkStructure($i))return!1;$i.filter(Li=>Li.isLink).map(Li=>({...Li,from:Ni+Li.start+1,to:Ni+Li.end+1})).filter(Li=>d.schema.marks.code?!d.doc.rangeHasMark(Li.from,Li.to,d.schema.marks.code):!0).filter(Li=>e.validate(Li.value)).filter(Li=>e.shouldAutoLink(Li.value)).forEach(Li=>{getMarksBetween(Li.from,Li.to,d.doc).some(ji=>ji.mark.type===e.type)||Un.addMark(Li.from,Li.to,e.type.create({href:Li.href}))})}}),!!Un.steps.length)return Un}})}function clickHandler(e){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(n,l,d)=>{var g,jn;if(d.button!==0||!n.editable)return!1;let Un=!1;if(e.enableClickSelection&&(Un=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let zn=null;if(d.target instanceof HTMLAnchorElement)zn=d.target;else{let Qn=d.target;const Jn=[];for(;Qn.nodeName!=="DIV";)Jn.push(Qn),Qn=Qn.parentNode;zn=Jn.find(Ai=>Ai.nodeName==="A")}if(!zn)return Un;const qn=getAttributes(n.state,e.type.name),Kn=(g=zn?.href)!=null?g:qn.href,Xn=(jn=zn?.target)!=null?jn:qn.target;zn&&Kn&&(window.open(Kn,Xn),Un=!0)}return Un}}})}function pasteHandler(e){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(n,l,d)=>{const{shouldAutoLink:g}=e,{state:jn}=n,{selection:Un}=jn,{empty:zn}=Un;if(zn)return!1;let qn="";d.content.forEach(Xn=>{qn+=Xn.textContent});const Kn=find(qn,{defaultProtocol:e.defaultProtocol}).find(Xn=>Xn.isLink&&Xn.value===qn);return!qn||!Kn||g!==void 0&&!g(Kn.href)?!1:e.editor.commands.setMark(e.type,{href:Kn.href})}}})}function isAllowedUri(e,n){const l=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return n&&n.forEach(d=>{const g=typeof d=="string"?d:d.scheme;g&&l.push(g)}),!e||e.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${l.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){registerCustomProtocol(e);return}registerCustomProtocol(e.scheme,e.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,n)=>!!isAllowedUri(e,n.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const n=e.getAttribute("href");return!n||!this.options.isAllowedUri(n,{defaultValidate:l=>!!isAllowedUri(l,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,e),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,n)=>n.applyMark("link",n.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,n)=>{var l;const d=((l=e.attrs)==null?void 0:l.href)||"";return`[${n.renderChildren(e)}](${d})`},addCommands(){return{setLink:e=>({chain:n})=>{const{href:l}=e;return this.options.isAllowedUri(l,{defaultValidate:d=>!!isAllowedUri(d,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?n().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:n})=>{const{href:l}=e||{};return l&&!this.options.isAllowedUri(l,{defaultValidate:d=>!!isAllowedUri(d,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:n().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:e=>{const n=[];if(e){const{protocols:l,defaultProtocol:d}=this.options,g=find(e).filter(jn=>jn.isLink&&this.options.isAllowedUri(jn.value,{defaultValidate:Un=>!!isAllowedUri(Un,l),protocols:l,defaultProtocol:d}));g.length&&g.forEach(jn=>{this.options.shouldAutoLink(jn.value)&&n.push({text:jn.value,data:{href:jn.href},index:jn.start})})}return n},type:this.type,getAttributes:e=>{var n;return{href:(n=e.data)==null?void 0:n.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:n,defaultProtocol:l}=this.options;return this.options.autolink&&e.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:d=>this.options.isAllowedUri(d,{defaultValidate:g=>!!isAllowedUri(g,n),protocols:n,defaultProtocol:l}),shouldAutoLink:this.options.shouldAutoLink})),e.push(clickHandler({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),Text$1=Node3.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""});const r$2=new PluginKey("blocknote-show-selection"),f=a$1(({editor:e})=>{const n=f$3({enabled:!1},{onUpdate(){e.transact(l=>l.setMeta(r$2,{}))}});return{key:"showSelection",store:n,prosemirrorPlugins:[new Plugin({key:r$2,props:{decorations:l=>{const{doc:d,selection:g}=l;if(!n.state.enabled)return DecorationSet.empty;const jn=Decoration.inline(g.from,g.to,{"data-show-selection":"true"});return DecorationSet.create(d,[jn])}}})],showSelection(l){n.setState({enabled:l})}}}),content={tokenize:initializeContent};function initializeContent(e){const n=e.attempt(this.parser.constructs.contentInitial,d,g);let l;return n;function d(zn){if(zn===null){e.consume(zn);return}return e.enter("lineEnding"),e.consume(zn),e.exit("lineEnding"),factorySpace(e,n,"linePrefix")}function g(zn){return e.enter("paragraph"),jn(zn)}function jn(zn){const qn=e.enter("chunkText",{contentType:"text",previous:l});return l&&(l.next=qn),l=qn,Un(zn)}function Un(zn){if(zn===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(zn);return}return markdownLineEnding(zn)?(e.consume(zn),e.exit("chunkText"),jn):(e.consume(zn),Un)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(e){const n=this,l=[];let d=0,g,jn,Un;return zn;function zn(Fi){if(d<l.length){const qi=l[d];return n.containerState=qi[1],e.attempt(qi[0].continuation,qn,Kn)(Fi)}return Kn(Fi)}function qn(Fi){if(d++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,g&&ji();const qi=n.events.length;let zi=qi,Gi;for(;zi--;)if(n.events[zi][0]==="exit"&&n.events[zi][1].type==="chunkFlow"){Gi=n.events[zi][1].end;break}Li(d);let Xi=qi;for(;Xi<n.events.length;)n.events[Xi][1].end={...Gi},Xi++;return splice(n.events,zi+1,0,n.events.slice(qi)),n.events.length=Xi,Kn(Fi)}return zn(Fi)}function Kn(Fi){if(d===l.length){if(!g)return Jn(Fi);if(g.currentConstruct&&g.currentConstruct.concrete)return Ri(Fi);n.interrupt=!!(g.currentConstruct&&!g._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(containerConstruct,Xn,Qn)(Fi)}function Xn(Fi){return g&&ji(),Li(d),Jn(Fi)}function Qn(Fi){return n.parser.lazy[n.now().line]=d!==l.length,Un=n.now().offset,Ri(Fi)}function Jn(Fi){return n.containerState={},e.attempt(containerConstruct,Ai,Ri)(Fi)}function Ai(Fi){return d++,l.push([n.currentConstruct,n.containerState]),Jn(Fi)}function Ri(Fi){if(Fi===null){g&&ji(),Li(0),e.consume(Fi);return}return g=g||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:g,contentType:"flow",previous:jn}),Ni(Fi)}function Ni(Fi){if(Fi===null){$i(e.exit("chunkFlow"),!0),Li(0),e.consume(Fi);return}return markdownLineEnding(Fi)?(e.consume(Fi),$i(e.exit("chunkFlow")),d=0,n.interrupt=void 0,zn):(e.consume(Fi),Ni)}function $i(Fi,qi){const zi=n.sliceStream(Fi);if(qi&&zi.push(null),Fi.previous=jn,jn&&(jn.next=Fi),jn=Fi,g.defineSkip(Fi.start),g.write(zi),n.parser.lazy[Fi.start.line]){let Gi=g.events.length;for(;Gi--;)if(g.events[Gi][1].start.offset<Un&&(!g.events[Gi][1].end||g.events[Gi][1].end.offset>Un))return;const Xi=n.events.length;let as=Xi,ls,Zi;for(;as--;)if(n.events[as][0]==="exit"&&n.events[as][1].type==="chunkFlow"){if(ls){Zi=n.events[as][1].end;break}ls=!0}for(Li(d),Gi=Xi;Gi<n.events.length;)n.events[Gi][1].end={...Zi},Gi++;splice(n.events,as+1,0,n.events.slice(Xi)),n.events.length=Gi}}function Li(Fi){let qi=l.length;for(;qi-- >Fi;){const zi=l[qi];n.containerState=zi[1],zi[0].exit.call(n,e)}l.length=Fi}function ji(){g.write([null]),jn=void 0,g=void 0,n.containerState._closeFlow=void 0}}function tokenizeContainer(e,n,l){return factorySpace(e,e.attempt(this.parser.constructs.document,n,l),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const flow$1={tokenize:initializeFlow};function initializeFlow(e){const n=this,l=e.attempt(blankLine,d,e.attempt(this.parser.constructs.flowInitial,g,factorySpace(e,e.attempt(this.parser.constructs.flow,g,e.attempt(content$1,g)),"linePrefix")));return l;function d(jn){if(jn===null){e.consume(jn);return}return e.enter("lineEndingBlank"),e.consume(jn),e.exit("lineEndingBlank"),n.currentConstruct=void 0,l}function g(jn){if(jn===null){e.consume(jn);return}return e.enter("lineEnding"),e.consume(jn),e.exit("lineEnding"),n.currentConstruct=void 0,l}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$3=initializeFactory("text");function initializeFactory(e){return{resolveAll:createResolver(e==="text"?resolveAllLineSuffixes:void 0),tokenize:n};function n(l){const d=this,g=this.parser.constructs[e],jn=l.attempt(g,Un,zn);return Un;function Un(Xn){return Kn(Xn)?jn(Xn):zn(Xn)}function zn(Xn){if(Xn===null){l.consume(Xn);return}return l.enter("data"),l.consume(Xn),qn}function qn(Xn){return Kn(Xn)?(l.exit("data"),jn(Xn)):(l.consume(Xn),qn)}function Kn(Xn){if(Xn===null)return!0;const Qn=g[Xn];let Jn=-1;if(Qn)for(;++Jn<Qn.length;){const Ai=Qn[Jn];if(!Ai.previous||Ai.previous.call(d,d.previous))return!0}return!1}}}function createResolver(e){return n;function n(l,d){let g=-1,jn;for(;++g<=l.length;)jn===void 0?l[g]&&l[g][1].type==="data"&&(jn=g,g++):(!l[g]||l[g][1].type!=="data")&&(g!==jn+2&&(l[jn][1].end=l[g-1][1].end,l.splice(jn+2,g-jn-2),g=jn+2),jn=void 0);return e?e(l,d):l}}function resolveAllLineSuffixes(e,n){let l=0;for(;++l<=e.length;)if((l===e.length||e[l][1].type==="lineEnding")&&e[l-1][1].type==="data"){const d=e[l-1][1],g=n.sliceStream(d);let jn=g.length,Un=-1,zn=0,qn;for(;jn--;){const Kn=g[jn];if(typeof Kn=="string"){for(Un=Kn.length;Kn.charCodeAt(Un-1)===32;)zn++,Un--;if(Un)break;Un=-1}else if(Kn===-2)qn=!0,zn++;else if(Kn!==-1){jn++;break}}if(n._contentTypeTextTrailing&&l===e.length&&(zn=0),zn){const Kn={type:l===e.length||qn||zn<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:jn?Un:d.start._bufferIndex+Un,_index:d.start._index+jn,line:d.end.line,column:d.end.column-zn,offset:d.end.offset-zn},end:{...d.end}};d.end={...Kn.start},d.start.offset===d.end.offset?Object.assign(d,Kn):(e.splice(l,0,["enter",Kn,n],["exit",Kn,n]),l+=2)}l++}return e}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$2={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink$1,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$2},Symbol.toStringTag,{value:"Module"}));function createTokenizer(e,n,l){let d={_bufferIndex:-1,_index:0,line:l&&l.line||1,column:l&&l.column||1,offset:l&&l.offset||0};const g={},jn=[];let Un=[],zn=[];const qn={attempt:Xi(zi),check:Xi(Gi),consume:ji,enter:Fi,exit:qi,interrupt:Xi(Gi,{interrupt:!0})},Kn={code:null,containerState:{},defineSkip:Ni,events:[],now:Ri,parser:e,previous:null,sliceSerialize:Jn,sliceStream:Ai,write:Qn};let Xn=n.tokenize.call(Kn,qn);return n.resolveAll&&jn.push(n),Kn;function Qn(gs){return Un=push(Un,gs),$i(),Un[Un.length-1]!==null?[]:(as(n,0),Kn.events=resolveAll(jn,Kn.events,Kn),Kn.events)}function Jn(gs,bs){return serializeChunks(Ai(gs),bs)}function Ai(gs){return sliceChunks(Un,gs)}function Ri(){const{_bufferIndex:gs,_index:bs,line:Ss,column:ss,offset:Es}=d;return{_bufferIndex:gs,_index:bs,line:Ss,column:ss,offset:Es}}function Ni(gs){g[gs.line]=gs.column,Zi()}function $i(){let gs;for(;d._index<Un.length;){const bs=Un[d._index];if(typeof bs=="string")for(gs=d._index,d._bufferIndex<0&&(d._bufferIndex=0);d._index===gs&&d._bufferIndex<bs.length;)Li(bs.charCodeAt(d._bufferIndex));else Li(bs)}}function Li(gs){Xn=Xn(gs)}function ji(gs){markdownLineEnding(gs)?(d.line++,d.column=1,d.offset+=gs===-3?2:1,Zi()):gs!==-1&&(d.column++,d.offset++),d._bufferIndex<0?d._index++:(d._bufferIndex++,d._bufferIndex===Un[d._index].length&&(d._bufferIndex=-1,d._index++)),Kn.previous=gs}function Fi(gs,bs){const Ss=bs||{};return Ss.type=gs,Ss.start=Ri(),Kn.events.push(["enter",Ss,Kn]),zn.push(Ss),Ss}function qi(gs){const bs=zn.pop();return bs.end=Ri(),Kn.events.push(["exit",bs,Kn]),bs}function zi(gs,bs){as(gs,bs.from)}function Gi(gs,bs){bs.restore()}function Xi(gs,bs){return Ss;function Ss(ss,Es,rs){let cs,ds,Cs,Wi;return Array.isArray(ss)?fs(ss):"tokenize"in ss?fs([ss]):es(ss);function es(Is){return Ms;function Ms(Os){const Rs=Os!==null&&Is[Os],Xs=Os!==null&&Is.null,_a=[...Array.isArray(Rs)?Rs:Rs?[Rs]:[],...Array.isArray(Xs)?Xs:Xs?[Xs]:[]];return fs(_a)(Os)}}function fs(Is){return cs=Is,ds=0,Is.length===0?rs:Ki(Is[ds])}function Ki(Is){return Ms;function Ms(Os){return Wi=ls(),Cs=Is,Is.partial||(Kn.currentConstruct=Is),Is.name&&Kn.parser.constructs.disable.null.includes(Is.name)?_s():Is.tokenize.call(bs?Object.assign(Object.create(Kn),bs):Kn,qn,ws,_s)(Os)}}function ws(Is){return gs(Cs,Wi),Es}function _s(Is){return Wi.restore(),++ds<cs.length?Ki(cs[ds]):rs}}}function as(gs,bs){gs.resolveAll&&!jn.includes(gs)&&jn.push(gs),gs.resolve&&splice(Kn.events,bs,Kn.events.length-bs,gs.resolve(Kn.events.slice(bs),Kn)),gs.resolveTo&&(Kn.events=gs.resolveTo(Kn.events,Kn))}function ls(){const gs=Ri(),bs=Kn.previous,Ss=Kn.currentConstruct,ss=Kn.events.length,Es=Array.from(zn);return{from:ss,restore:rs};function rs(){d=gs,Kn.previous=bs,Kn.currentConstruct=Ss,Kn.events.length=ss,zn=Es,Zi()}}function Zi(){d.line in g&&d.column<2&&(d.column=g[d.line],d.offset+=g[d.line]-1)}}function sliceChunks(e,n){const l=n.start._index,d=n.start._bufferIndex,g=n.end._index,jn=n.end._bufferIndex;let Un;if(l===g)Un=[e[l].slice(d,jn)];else{if(Un=e.slice(l,g),d>-1){const zn=Un[0];typeof zn=="string"?Un[0]=zn.slice(d):Un.shift()}jn>0&&Un.push(e[g].slice(0,jn))}return Un}function serializeChunks(e,n){let l=-1;const d=[];let g;for(;++l<e.length;){const jn=e[l];let Un;if(typeof jn=="string")Un=jn;else switch(jn){case-5:{Un="\r";break}case-4:{Un=`
`;break}case-3:{Un=`\r
`;break}case-2:{Un=n?" ":"	";break}case-1:{if(!n&&g)continue;Un=" ";break}default:Un=String.fromCharCode(jn)}g=jn===-2,d.push(Un)}return d.join("")}function parse(e){const d={constructs:combineExtensions([defaultConstructs,...(e||{}).extensions||[]]),content:g(content),defined:[],document:g(document$2),flow:g(flow$1),lazy:{},string:g(string$1),text:g(text$3)};return d;function g(jn){return Un;function Un(zn){return createTokenizer(d,jn,zn)}}}function postprocess(e){for(;!subtokenize(e););return e}const search=/[\0\t\n\r]/g;function preprocess(){let e=1,n="",l=!0,d;return g;function g(jn,Un,zn){const qn=[];let Kn,Xn,Qn,Jn,Ai;for(jn=n+(typeof jn=="string"?jn.toString():new TextDecoder(Un||void 0).decode(jn)),Qn=0,n="",l&&(jn.charCodeAt(0)===65279&&Qn++,l=void 0);Qn<jn.length;){if(search.lastIndex=Qn,Kn=search.exec(jn),Jn=Kn&&Kn.index!==void 0?Kn.index:jn.length,Ai=jn.charCodeAt(Jn),!Kn){n=jn.slice(Qn);break}if(Ai===10&&Qn===Jn&&d)qn.push(-3),d=void 0;else switch(d&&(qn.push(-5),d=void 0),Qn<Jn&&(qn.push(jn.slice(Qn,Jn)),e+=Jn-Qn),Ai){case 0:{qn.push(65533),e++;break}case 9:{for(Xn=Math.ceil(e/4)*4,qn.push(-2);e++<Xn;)qn.push(-1);break}case 10:{qn.push(-4),e=1;break}default:d=!0,e=1}Qn=Jn+1}return zn&&(d&&qn.push(-5),n&&qn.push(n),qn.push(null)),qn}}const own$3={}.hasOwnProperty;function fromMarkdown(e,n,l){return typeof n!="string"&&(l=n,n=void 0),compiler(l)(postprocess(parse(l).document().write(preprocess()(e,n,!0))))}function compiler(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:jn(vl),autolinkProtocol:ls,autolinkEmail:ls,atxHeading:jn(Hl),blockQuote:jn(Xs),characterEscape:ls,characterReference:ls,codeFenced:jn(_a),codeFencedFenceInfo:Un,codeFencedFenceMeta:Un,codeIndented:jn(_a,Un),codeText:jn(fl,Un),codeTextData:ls,data:ls,codeFlowValue:ls,definition:jn(qs),definitionDestinationString:Un,definitionLabelString:Un,definitionTitleString:Un,emphasis:jn(hl),hardBreakEscape:jn(Jl),hardBreakTrailing:jn(Jl),htmlFlow:jn(bu,Un),htmlFlowData:ls,htmlText:jn(bu,Un),htmlTextData:ls,image:jn(iu),label:Un,link:jn(vl),listItem:jn(Gu),listItemValue:Jn,listOrdered:jn(su,Qn),listUnordered:jn(su),paragraph:jn(Tp),reference:Ki,referenceString:Un,resourceDestinationString:Un,resourceTitleString:Un,setextHeading:jn(Hl),strong:jn(Sp),thematicBreak:jn(xp)},exit:{atxHeading:qn(),atxHeadingSequence:zi,autolink:qn(),autolinkEmail:Rs,autolinkProtocol:Os,blockQuote:qn(),characterEscapeValue:Zi,characterReferenceMarkerHexadecimal:_s,characterReferenceMarkerNumeric:_s,characterReferenceValue:Is,characterReference:Ms,codeFenced:qn($i),codeFencedFence:Ni,codeFencedFenceInfo:Ai,codeFencedFenceMeta:Ri,codeFlowValue:Zi,codeIndented:qn(Li),codeText:qn(Es),codeTextData:Zi,data:Zi,definition:qn(),definitionDestinationString:qi,definitionLabelString:ji,definitionTitleString:Fi,emphasis:qn(),hardBreakEscape:qn(bs),hardBreakTrailing:qn(bs),htmlFlow:qn(Ss),htmlFlowData:Zi,htmlText:qn(ss),htmlTextData:Zi,image:qn(cs),label:Cs,labelText:ds,lineEnding:gs,link:qn(rs),listItem:qn(),listOrdered:qn(),listUnordered:qn(),paragraph:qn(),referenceString:ws,resourceDestinationString:Wi,resourceTitleString:es,resource:fs,setextHeading:qn(as),setextHeadingLineSequence:Xi,setextHeadingText:Gi,strong:qn(),thematicBreak:qn()}};configure(n,(e||{}).mdastExtensions||[]);const l={};return d;function d(xs){let ks={type:"root",children:[]};const Ps={stack:[ks],tokenStack:[],config:n,enter:zn,exit:Kn,buffer:Un,resume:Xn,data:l},js=[];let Ys=-1;for(;++Ys<xs.length;)if(xs[Ys][1].type==="listOrdered"||xs[Ys][1].type==="listUnordered")if(xs[Ys][0]==="enter")js.push(Ys);else{const Fl=js.pop();Ys=g(xs,Fl,Ys)}for(Ys=-1;++Ys<xs.length;){const Fl=n[xs[Ys][0]];own$3.call(Fl,xs[Ys][1].type)&&Fl[xs[Ys][1].type].call(Object.assign({sliceSerialize:xs[Ys][2].sliceSerialize},Ps),xs[Ys][1])}if(Ps.tokenStack.length>0){const Fl=Ps.tokenStack[Ps.tokenStack.length-1];(Fl[1]||defaultOnError).call(Ps,void 0,Fl[0])}for(ks.position={start:point(xs.length>0?xs[0][1].start:{line:1,column:1,offset:0}),end:point(xs.length>0?xs[xs.length-2][1].end:{line:1,column:1,offset:0})},Ys=-1;++Ys<n.transforms.length;)ks=n.transforms[Ys](ks)||ks;return ks}function g(xs,ks,Ps){let js=ks-1,Ys=-1,Fl=!1,Dl,zl,Al,Gl;for(;++js<=Ps;){const Ta=xs[js];switch(Ta[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ta[0]==="enter"?Ys++:Ys--,Gl=void 0;break}case"lineEndingBlank":{Ta[0]==="enter"&&(Dl&&!Gl&&!Ys&&!Al&&(Al=js),Gl=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gl=void 0}if(!Ys&&Ta[0]==="enter"&&Ta[1].type==="listItemPrefix"||Ys===-1&&Ta[0]==="exit"&&(Ta[1].type==="listUnordered"||Ta[1].type==="listOrdered")){if(Dl){let qu=js;for(zl=void 0;qu--;){const yu=xs[qu];if(yu[1].type==="lineEnding"||yu[1].type==="lineEndingBlank"){if(yu[0]==="exit")continue;zl&&(xs[zl][1].type="lineEndingBlank",Fl=!0),yu[1].type="lineEnding",zl=qu}else if(!(yu[1].type==="linePrefix"||yu[1].type==="blockQuotePrefix"||yu[1].type==="blockQuotePrefixWhitespace"||yu[1].type==="blockQuoteMarker"||yu[1].type==="listItemIndent"))break}Al&&(!zl||Al<zl)&&(Dl._spread=!0),Dl.end=Object.assign({},zl?xs[zl][1].start:Ta[1].end),xs.splice(zl||js,0,["exit",Dl,Ta[2]]),js++,Ps++}if(Ta[1].type==="listItemPrefix"){const qu={type:"listItem",_spread:!1,start:Object.assign({},Ta[1].start),end:void 0};Dl=qu,xs.splice(js,0,["enter",qu,Ta[2]]),js++,Ps++,Al=void 0,Gl=!0}}}return xs[ks][1]._spread=Fl,Ps}function jn(xs,ks){return Ps;function Ps(js){zn.call(this,xs(js),js),ks&&ks.call(this,js)}}function Un(){this.stack.push({type:"fragment",children:[]})}function zn(xs,ks,Ps){this.stack[this.stack.length-1].children.push(xs),this.stack.push(xs),this.tokenStack.push([ks,Ps||void 0]),xs.position={start:point(ks.start),end:void 0}}function qn(xs){return ks;function ks(Ps){xs&&xs.call(this,Ps),Kn.call(this,Ps)}}function Kn(xs,ks){const Ps=this.stack.pop(),js=this.tokenStack.pop();if(js)js[0].type!==xs.type&&(ks?ks.call(this,xs,js[0]):(js[1]||defaultOnError).call(this,xs,js[0]));else throw new Error("Cannot close `"+xs.type+"` ("+stringifyPosition({start:xs.start,end:xs.end})+"): its not open");Ps.position.end=point(xs.end)}function Xn(){return toString(this.stack.pop())}function Qn(){this.data.expectingFirstListItemValue=!0}function Jn(xs){if(this.data.expectingFirstListItemValue){const ks=this.stack[this.stack.length-2];ks.start=Number.parseInt(this.sliceSerialize(xs),10),this.data.expectingFirstListItemValue=void 0}}function Ai(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.lang=xs}function Ri(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.meta=xs}function Ni(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function $i(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.value=xs.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Li(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.value=xs.replace(/(\r?\n|\r)$/g,"")}function ji(xs){const ks=this.resume(),Ps=this.stack[this.stack.length-1];Ps.label=ks,Ps.identifier=normalizeIdentifier(this.sliceSerialize(xs)).toLowerCase()}function Fi(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.title=xs}function qi(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.url=xs}function zi(xs){const ks=this.stack[this.stack.length-1];if(!ks.depth){const Ps=this.sliceSerialize(xs).length;ks.depth=Ps}}function Gi(){this.data.setextHeadingSlurpLineEnding=!0}function Xi(xs){const ks=this.stack[this.stack.length-1];ks.depth=this.sliceSerialize(xs).codePointAt(0)===61?1:2}function as(){this.data.setextHeadingSlurpLineEnding=void 0}function ls(xs){const Ps=this.stack[this.stack.length-1].children;let js=Ps[Ps.length-1];(!js||js.type!=="text")&&(js=Rl(),js.position={start:point(xs.start),end:void 0},Ps.push(js)),this.stack.push(js)}function Zi(xs){const ks=this.stack.pop();ks.value+=this.sliceSerialize(xs),ks.position.end=point(xs.end)}function gs(xs){const ks=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ps=ks.children[ks.children.length-1];Ps.position.end=point(xs.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(ks.type)&&(ls.call(this,xs),Zi.call(this,xs))}function bs(){this.data.atHardBreak=!0}function Ss(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.value=xs}function ss(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.value=xs}function Es(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.value=xs}function rs(){const xs=this.stack[this.stack.length-1];if(this.data.inReference){const ks=this.data.referenceType||"shortcut";xs.type+="Reference",xs.referenceType=ks,delete xs.url,delete xs.title}else delete xs.identifier,delete xs.label;this.data.referenceType=void 0}function cs(){const xs=this.stack[this.stack.length-1];if(this.data.inReference){const ks=this.data.referenceType||"shortcut";xs.type+="Reference",xs.referenceType=ks,delete xs.url,delete xs.title}else delete xs.identifier,delete xs.label;this.data.referenceType=void 0}function ds(xs){const ks=this.sliceSerialize(xs),Ps=this.stack[this.stack.length-2];Ps.label=decodeString(ks),Ps.identifier=normalizeIdentifier(ks).toLowerCase()}function Cs(){const xs=this.stack[this.stack.length-1],ks=this.resume(),Ps=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ps.type==="link"){const js=xs.children;Ps.children=js}else Ps.alt=ks}function Wi(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.url=xs}function es(){const xs=this.resume(),ks=this.stack[this.stack.length-1];ks.title=xs}function fs(){this.data.inReference=void 0}function Ki(){this.data.referenceType="collapsed"}function ws(xs){const ks=this.resume(),Ps=this.stack[this.stack.length-1];Ps.label=ks,Ps.identifier=normalizeIdentifier(this.sliceSerialize(xs)).toLowerCase(),this.data.referenceType="full"}function _s(xs){this.data.characterReferenceType=xs.type}function Is(xs){const ks=this.sliceSerialize(xs),Ps=this.data.characterReferenceType;let js;Ps?(js=decodeNumericCharacterReference(ks,Ps==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):js=decodeNamedCharacterReference(ks);const Ys=this.stack[this.stack.length-1];Ys.value+=js}function Ms(xs){const ks=this.stack.pop();ks.position.end=point(xs.end)}function Os(xs){Zi.call(this,xs);const ks=this.stack[this.stack.length-1];ks.url=this.sliceSerialize(xs)}function Rs(xs){Zi.call(this,xs);const ks=this.stack[this.stack.length-1];ks.url="mailto:"+this.sliceSerialize(xs)}function Xs(){return{type:"blockquote",children:[]}}function _a(){return{type:"code",lang:null,meta:null,value:""}}function fl(){return{type:"inlineCode",value:""}}function qs(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function hl(){return{type:"emphasis",children:[]}}function Hl(){return{type:"heading",depth:0,children:[]}}function Jl(){return{type:"break"}}function bu(){return{type:"html",value:""}}function iu(){return{type:"image",title:null,url:"",alt:null}}function vl(){return{type:"link",title:null,url:"",children:[]}}function su(xs){return{type:"list",ordered:xs.type==="listOrdered",start:null,spread:xs._spread,children:[]}}function Gu(xs){return{type:"listItem",spread:xs._spread,checked:null,children:[]}}function Tp(){return{type:"paragraph",children:[]}}function Sp(){return{type:"strong",children:[]}}function Rl(){return{type:"text",value:""}}function xp(){return{type:"thematicBreak"}}}function point(e){return{line:e.line,column:e.column,offset:e.offset}}function configure(e,n){let l=-1;for(;++l<n.length;){const d=n[l];Array.isArray(d)?configure(e,d):extension(e,d)}}function extension(e,n){let l;for(l in n)if(own$3.call(n,l))switch(l){case"canContainEols":{const d=n[l];d&&e[l].push(...d);break}case"transforms":{const d=n[l];d&&e[l].push(...d);break}case"enter":case"exit":{const d=n[l];d&&Object.assign(e[l],d);break}}}function defaultOnError(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+stringifyPosition({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is still open")}function remarkParse(e){const n=this;n.parser=l;function l(d){return fromMarkdown(d,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function blockquote(e,n){const l={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,l),e.applyData(n,l)}function hardBreak(e,n){const l={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,l),[e.applyData(n,l),{type:"text",value:`
`}]}function code(e,n){const l=n.value?n.value+`
`:"",d={},g=n.lang?n.lang.split(/\s+/):[];g.length>0&&(d.className=["language-"+g[0]]);let jn={type:"element",tagName:"code",properties:d,children:[{type:"text",value:l}]};return n.meta&&(jn.data={meta:n.meta}),e.patch(n,jn),jn=e.applyData(n,jn),jn={type:"element",tagName:"pre",properties:{},children:[jn]},e.patch(n,jn),jn}function strikethrough(e,n){const l={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}function emphasis(e,n){const l={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}function footnoteReference(e,n){const l=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",d=String(n.identifier).toUpperCase(),g=normalizeUri(d.toLowerCase()),jn=e.footnoteOrder.indexOf(d);let Un,zn=e.footnoteCounts.get(d);zn===void 0?(zn=0,e.footnoteOrder.push(d),Un=e.footnoteOrder.length):Un=jn+1,zn+=1,e.footnoteCounts.set(d,zn);const qn={type:"element",tagName:"a",properties:{href:"#"+l+"fn-"+g,id:l+"fnref-"+g+(zn>1?"-"+zn:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(Un)}]};e.patch(n,qn);const Kn={type:"element",tagName:"sup",properties:{},children:[qn]};return e.patch(n,Kn),e.applyData(n,Kn)}function heading(e,n){const l={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}function html$2(e,n){if(e.options.allowDangerousHtml){const l={type:"raw",value:n.value};return e.patch(n,l),e.applyData(n,l)}}function revert(e,n){const l=n.referenceType;let d="]";if(l==="collapsed"?d+="[]":l==="full"&&(d+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+d}];const g=e.all(n),jn=g[0];jn&&jn.type==="text"?jn.value="["+jn.value:g.unshift({type:"text",value:"["});const Un=g[g.length-1];return Un&&Un.type==="text"?Un.value+=d:g.push({type:"text",value:d}),g}function imageReference(e,n){const l=String(n.identifier).toUpperCase(),d=e.definitionById.get(l);if(!d)return revert(e,n);const g={src:normalizeUri(d.url||""),alt:n.alt};d.title!==null&&d.title!==void 0&&(g.title=d.title);const jn={type:"element",tagName:"img",properties:g,children:[]};return e.patch(n,jn),e.applyData(n,jn)}function image(e,n){const l={src:normalizeUri(n.url)};n.alt!==null&&n.alt!==void 0&&(l.alt=n.alt),n.title!==null&&n.title!==void 0&&(l.title=n.title);const d={type:"element",tagName:"img",properties:l,children:[]};return e.patch(n,d),e.applyData(n,d)}function inlineCode(e,n){const l={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,l);const d={type:"element",tagName:"code",properties:{},children:[l]};return e.patch(n,d),e.applyData(n,d)}function linkReference(e,n){const l=String(n.identifier).toUpperCase(),d=e.definitionById.get(l);if(!d)return revert(e,n);const g={href:normalizeUri(d.url||"")};d.title!==null&&d.title!==void 0&&(g.title=d.title);const jn={type:"element",tagName:"a",properties:g,children:e.all(n)};return e.patch(n,jn),e.applyData(n,jn)}function link(e,n){const l={href:normalizeUri(n.url)};n.title!==null&&n.title!==void 0&&(l.title=n.title);const d={type:"element",tagName:"a",properties:l,children:e.all(n)};return e.patch(n,d),e.applyData(n,d)}function listItem(e,n,l){const d=e.all(n),g=l?listLoose(l):listItemLoose(n),jn={},Un=[];if(typeof n.checked=="boolean"){const Xn=d[0];let Qn;Xn&&Xn.type==="element"&&Xn.tagName==="p"?Qn=Xn:(Qn={type:"element",tagName:"p",properties:{},children:[]},d.unshift(Qn)),Qn.children.length>0&&Qn.children.unshift({type:"text",value:" "}),Qn.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),jn.className=["task-list-item"]}let zn=-1;for(;++zn<d.length;){const Xn=d[zn];(g||zn!==0||Xn.type!=="element"||Xn.tagName!=="p")&&Un.push({type:"text",value:`
`}),Xn.type==="element"&&Xn.tagName==="p"&&!g?Un.push(...Xn.children):Un.push(Xn)}const qn=d[d.length-1];qn&&(g||qn.type!=="element"||qn.tagName!=="p")&&Un.push({type:"text",value:`
`});const Kn={type:"element",tagName:"li",properties:jn,children:Un};return e.patch(n,Kn),e.applyData(n,Kn)}function listLoose(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const l=e.children;let d=-1;for(;!n&&++d<l.length;)n=listItemLoose(l[d])}return n}function listItemLoose(e){const n=e.spread;return n??e.children.length>1}function list(e,n){const l={},d=e.all(n);let g=-1;for(typeof n.start=="number"&&n.start!==1&&(l.start=n.start);++g<d.length;){const Un=d[g];if(Un.type==="element"&&Un.tagName==="li"&&Un.properties&&Array.isArray(Un.properties.className)&&Un.properties.className.includes("task-list-item")){l.className=["contains-task-list"];break}}const jn={type:"element",tagName:n.ordered?"ol":"ul",properties:l,children:e.wrap(d,!0)};return e.patch(n,jn),e.applyData(n,jn)}function paragraph(e,n){const l={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}function root$1(e,n){const l={type:"root",children:e.wrap(e.all(n))};return e.patch(n,l),e.applyData(n,l)}function strong(e,n){const l={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}function table(e,n){const l=e.all(n),d=l.shift(),g=[];if(d){const Un={type:"element",tagName:"thead",properties:{},children:e.wrap([d],!0)};e.patch(n.children[0],Un),g.push(Un)}if(l.length>0){const Un={type:"element",tagName:"tbody",properties:{},children:e.wrap(l,!0)},zn=pointStart(n.children[1]),qn=pointEnd(n.children[n.children.length-1]);zn&&qn&&(Un.position={start:zn,end:qn}),g.push(Un)}const jn={type:"element",tagName:"table",properties:{},children:e.wrap(g,!0)};return e.patch(n,jn),e.applyData(n,jn)}function tableRow(e,n,l){const d=l?l.children:void 0,jn=(d?d.indexOf(n):1)===0?"th":"td",Un=l&&l.type==="table"?l.align:void 0,zn=Un?Un.length:n.children.length;let qn=-1;const Kn=[];for(;++qn<zn;){const Qn=n.children[qn],Jn={},Ai=Un?Un[qn]:void 0;Ai&&(Jn.align=Ai);let Ri={type:"element",tagName:jn,properties:Jn,children:[]};Qn&&(Ri.children=e.all(Qn),e.patch(Qn,Ri),Ri=e.applyData(Qn,Ri)),Kn.push(Ri)}const Xn={type:"element",tagName:"tr",properties:{},children:e.wrap(Kn,!0)};return e.patch(n,Xn),e.applyData(n,Xn)}function tableCell(e,n){const l={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,l),e.applyData(n,l)}const tab=9,space=32;function trimLines(e){const n=String(e),l=/\r?\n|\r/g;let d=l.exec(n),g=0;const jn=[];for(;d;)jn.push(trimLine(n.slice(g,d.index),g>0,!0),d[0]),g=d.index+d[0].length,d=l.exec(n);return jn.push(trimLine(n.slice(g),g>0,!1)),jn.join("")}function trimLine(e,n,l){let d=0,g=e.length;if(n){let jn=e.codePointAt(d);for(;jn===tab||jn===space;)d++,jn=e.codePointAt(d)}if(l){let jn=e.codePointAt(g-1);for(;jn===tab||jn===space;)g--,jn=e.codePointAt(g-1)}return g>d?e.slice(d,g):""}function text$1(e,n){const l={type:"text",value:trimLines(String(n.value))};return e.patch(n,l),e.applyData(n,l)}function thematicBreak(e,n){const l={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,l),e.applyData(n,l)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html:html$2,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root:root$1,strong,table,tableCell,tableRow,text:text$1,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}function defaultFootnoteBackContent(e,n){const l=[{type:"text",value:""}];return n>1&&l.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),l}function defaultFootnoteBackLabel(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function footer(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",l=e.options.footnoteBackContent||defaultFootnoteBackContent,d=e.options.footnoteBackLabel||defaultFootnoteBackLabel,g=e.options.footnoteLabel||"Footnotes",jn=e.options.footnoteLabelTagName||"h2",Un=e.options.footnoteLabelProperties||{className:["sr-only"]},zn=[];let qn=-1;for(;++qn<e.footnoteOrder.length;){const Kn=e.footnoteById.get(e.footnoteOrder[qn]);if(!Kn)continue;const Xn=e.all(Kn),Qn=String(Kn.identifier).toUpperCase(),Jn=normalizeUri(Qn.toLowerCase());let Ai=0;const Ri=[],Ni=e.footnoteCounts.get(Qn);for(;Ni!==void 0&&++Ai<=Ni;){Ri.length>0&&Ri.push({type:"text",value:" "});let ji=typeof l=="string"?l:l(qn,Ai);typeof ji=="string"&&(ji={type:"text",value:ji}),Ri.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+Jn+(Ai>1?"-"+Ai:""),dataFootnoteBackref:"",ariaLabel:typeof d=="string"?d:d(qn,Ai),className:["data-footnote-backref"]},children:Array.isArray(ji)?ji:[ji]})}const $i=Xn[Xn.length-1];if($i&&$i.type==="element"&&$i.tagName==="p"){const ji=$i.children[$i.children.length-1];ji&&ji.type==="text"?ji.value+=" ":$i.children.push({type:"text",value:" "}),$i.children.push(...Ri)}else Xn.push(...Ri);const Li={type:"element",tagName:"li",properties:{id:n+"fn-"+Jn},children:e.wrap(Xn,!0)};e.patch(Kn,Li),zn.push(Li)}if(zn.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:jn,properties:{...structuredClone$1(Un),id:"footnote-label"},children:[{type:"text",value:g}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(zn,!0)},{type:"text",value:`
`}]}}const own$2={}.hasOwnProperty,emptyOptions$1={};function createState(e,n){const l=n||emptyOptions$1,d=new Map,g=new Map,jn=new Map,Un={...handlers,...l.handlers},zn={all:Kn,applyData,definitionById:d,footnoteById:g,footnoteCounts:jn,footnoteOrder:[],handlers:Un,one:qn,options:l,patch,wrap};return visit(e,function(Xn){if(Xn.type==="definition"||Xn.type==="footnoteDefinition"){const Qn=Xn.type==="definition"?d:g,Jn=String(Xn.identifier).toUpperCase();Qn.has(Jn)||Qn.set(Jn,Xn)}}),zn;function qn(Xn,Qn){const Jn=Xn.type,Ai=zn.handlers[Jn];if(own$2.call(zn.handlers,Jn)&&Ai)return Ai(zn,Xn,Qn);if(zn.options.passThrough&&zn.options.passThrough.includes(Jn)){if("children"in Xn){const{children:Ni,...$i}=Xn,Li=structuredClone$1($i);return Li.children=zn.all(Xn),Li}return structuredClone$1(Xn)}return(zn.options.unknownHandler||defaultUnknownHandler)(zn,Xn,Qn)}function Kn(Xn){const Qn=[];if("children"in Xn){const Jn=Xn.children;let Ai=-1;for(;++Ai<Jn.length;){const Ri=zn.one(Jn[Ai],Xn);if(Ri){if(Ai&&Jn[Ai-1].type==="break"&&(!Array.isArray(Ri)&&Ri.type==="text"&&(Ri.value=trimMarkdownSpaceStart(Ri.value)),!Array.isArray(Ri)&&Ri.type==="element")){const Ni=Ri.children[0];Ni&&Ni.type==="text"&&(Ni.value=trimMarkdownSpaceStart(Ni.value))}Array.isArray(Ri)?Qn.push(...Ri):Qn.push(Ri)}}}return Qn}}function patch(e,n){e.position&&(n.position=position(e))}function applyData(e,n){let l=n;if(e&&e.data){const d=e.data.hName,g=e.data.hChildren,jn=e.data.hProperties;if(typeof d=="string")if(l.type==="element")l.tagName=d;else{const Un="children"in l?l.children:[l];l={type:"element",tagName:d,properties:{},children:Un}}l.type==="element"&&jn&&Object.assign(l.properties,structuredClone$1(jn)),"children"in l&&l.children&&g!==null&&g!==void 0&&(l.children=g)}return l}function defaultUnknownHandler(e,n){const l=n.data||{},d="value"in n&&!(own$2.call(l,"hProperties")||own$2.call(l,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,d),e.applyData(n,d)}function wrap(e,n){const l=[];let d=-1;for(n&&l.push({type:"text",value:`
`});++d<e.length;)d&&l.push({type:"text",value:`
`}),l.push(e[d]);return n&&e.length>0&&l.push({type:"text",value:`
`}),l}function trimMarkdownSpaceStart(e){let n=0,l=e.charCodeAt(n);for(;l===9||l===32;)n++,l=e.charCodeAt(n);return e.slice(n)}function toHast(e,n){const l=createState(e,n),d=l.one(e,void 0),g=footer(l),jn=Array.isArray(d)?{type:"root",children:d}:d||{type:"root",children:[]};return g&&jn.children.push({type:"text",value:`
`},g),jn}function remarkRehype(e,n){return e&&"run"in e?async function(l,d){const g=toHast(l,{file:d,...n});await e.run(g,d)}:function(l,d){return toHast(l,{file:d,...e||n})}}const htmlVoidElements=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],defaultSubsetRegex=/["&'<>`]/g,surrogatePairsRegex=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,controlCharactersRegex=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,regexEscapeRegex=/[|\\{}()[\]^$+*?.]/g,subsetToRegexCache=new WeakMap;function core(e,n){if(e=e.replace(n.subset?charactersToExpressionCached(n.subset):defaultSubsetRegex,d),n.subset||n.escapeOnly)return e;return e.replace(surrogatePairsRegex,l).replace(controlCharactersRegex,d);function l(g,jn,Un){return n.format((g.charCodeAt(0)-55296)*1024+g.charCodeAt(1)-56320+65536,Un.charCodeAt(jn+2),n)}function d(g,jn,Un){return n.format(g.charCodeAt(0),Un.charCodeAt(jn+1),n)}}function charactersToExpressionCached(e){let n=subsetToRegexCache.get(e);return n||(n=charactersToExpression(e),subsetToRegexCache.set(e,n)),n}function charactersToExpression(e){const n=[];let l=-1;for(;++l<e.length;)n.push(e[l].replace(regexEscapeRegex,"\\$&"));return new RegExp("(?:"+n.join("|")+")","g")}const hexadecimalRegex=/[\dA-Fa-f]/;function toHexadecimal(e,n,l){const d="&#x"+e.toString(16).toUpperCase();return l&&n&&!hexadecimalRegex.test(String.fromCharCode(n))?d:d+";"}const decimalRegex=/\d/;function toDecimal(e,n,l){const d="&#"+String(e);return l&&n&&!decimalRegex.test(String.fromCharCode(n))?d:d+";"}const characterEntitiesLegacy=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],characterEntitiesHtml4={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},dangerous=["cent","copy","divide","gt","lt","not","para","times"],own$1={}.hasOwnProperty,characters={};let key;for(key in characterEntitiesHtml4)own$1.call(characterEntitiesHtml4,key)&&(characters[characterEntitiesHtml4[key]]=key);const notAlphanumericRegex=/[^\dA-Za-z]/;function toNamed(e,n,l,d){const g=String.fromCharCode(e);if(own$1.call(characters,g)){const jn=characters[g],Un="&"+jn;return l&&characterEntitiesLegacy.includes(jn)&&!dangerous.includes(jn)&&(!d||n&&n!==61&&notAlphanumericRegex.test(String.fromCharCode(n)))?Un:Un+";"}return""}function formatSmart(e,n,l){let d=toHexadecimal(e,n,l.omitOptionalSemicolons),g;if((l.useNamedReferences||l.useShortestReferences)&&(g=toNamed(e,n,l.omitOptionalSemicolons,l.attribute)),(l.useShortestReferences||!g)&&l.useShortestReferences){const jn=toDecimal(e,n,l.omitOptionalSemicolons);jn.length<d.length&&(d=jn)}return g&&(!l.useShortestReferences||g.length<d.length)?g:d}function stringifyEntities(e,n){return core(e,Object.assign({format:formatSmart},n))}const htmlCommentRegex=/^>|^->|<!--|-->|--!>|<!-$/g,bogusCommentEntitySubset=[">"],commentEntitySubset=["<",">"];function comment(e,n,l,d){return d.settings.bogusComments?"<?"+stringifyEntities(e.value,Object.assign({},d.settings.characterReferences,{subset:bogusCommentEntitySubset}))+">":"<!--"+e.value.replace(htmlCommentRegex,g)+"-->";function g(jn){return stringifyEntities(jn,Object.assign({},d.settings.characterReferences,{subset:commentEntitySubset}))}}function doctype(e,n,l,d){return"<!"+(d.settings.upperDoctype?"DOCTYPE":"doctype")+(d.settings.tightDoctype?"":" ")+"html>"}const siblingAfter=siblings(1),siblingBefore=siblings(-1),emptyChildren$1=[];function siblings(e){return n;function n(l,d,g){const jn=l?l.children:emptyChildren$1;let Un=(d||0)+e,zn=jn[Un];if(!g)for(;zn&&whitespace$1(zn);)Un+=e,zn=jn[Un];return zn}}const own={}.hasOwnProperty;function omission(e){return n;function n(l,d,g){return own.call(e,l.tagName)&&e[l.tagName](l,d,g)}}const closing=omission({body:body$1,caption:headOrColgroupOrCaption,colgroup:headOrColgroupOrCaption,dd,dt:dt$2,head:headOrColgroupOrCaption,html:html$1,li:li$1,optgroup,option,p,rp:rubyElement,rt:rubyElement,tbody:tbody$1,td:cells,tfoot,th:cells,thead,tr:tr$1});function headOrColgroupOrCaption(e,n,l){const d=siblingAfter(l,n,!0);return!d||d.type!=="comment"&&!(d.type==="text"&&whitespace$1(d.value.charAt(0)))}function html$1(e,n,l){const d=siblingAfter(l,n);return!d||d.type!=="comment"}function body$1(e,n,l){const d=siblingAfter(l,n);return!d||d.type!=="comment"}function p(e,n,l){const d=siblingAfter(l,n);return d?d.type==="element"&&(d.tagName==="address"||d.tagName==="article"||d.tagName==="aside"||d.tagName==="blockquote"||d.tagName==="details"||d.tagName==="div"||d.tagName==="dl"||d.tagName==="fieldset"||d.tagName==="figcaption"||d.tagName==="figure"||d.tagName==="footer"||d.tagName==="form"||d.tagName==="h1"||d.tagName==="h2"||d.tagName==="h3"||d.tagName==="h4"||d.tagName==="h5"||d.tagName==="h6"||d.tagName==="header"||d.tagName==="hgroup"||d.tagName==="hr"||d.tagName==="main"||d.tagName==="menu"||d.tagName==="nav"||d.tagName==="ol"||d.tagName==="p"||d.tagName==="pre"||d.tagName==="section"||d.tagName==="table"||d.tagName==="ul"):!l||!(l.type==="element"&&(l.tagName==="a"||l.tagName==="audio"||l.tagName==="del"||l.tagName==="ins"||l.tagName==="map"||l.tagName==="noscript"||l.tagName==="video"))}function li$1(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&d.tagName==="li"}function dt$2(e,n,l){const d=siblingAfter(l,n);return!!(d&&d.type==="element"&&(d.tagName==="dt"||d.tagName==="dd"))}function dd(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&(d.tagName==="dt"||d.tagName==="dd")}function rubyElement(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&(d.tagName==="rp"||d.tagName==="rt")}function optgroup(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&d.tagName==="optgroup"}function option(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&(d.tagName==="option"||d.tagName==="optgroup")}function thead(e,n,l){const d=siblingAfter(l,n);return!!(d&&d.type==="element"&&(d.tagName==="tbody"||d.tagName==="tfoot"))}function tbody$1(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&(d.tagName==="tbody"||d.tagName==="tfoot")}function tfoot(e,n,l){return!siblingAfter(l,n)}function tr$1(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&d.tagName==="tr"}function cells(e,n,l){const d=siblingAfter(l,n);return!d||d.type==="element"&&(d.tagName==="td"||d.tagName==="th")}const opening=omission({body,colgroup,head,html,tbody});function html(e){const n=siblingAfter(e,-1);return!n||n.type!=="comment"}function head(e){const n=new Set;for(const d of e.children)if(d.type==="element"&&(d.tagName==="base"||d.tagName==="title")){if(n.has(d.tagName))return!1;n.add(d.tagName)}const l=e.children[0];return!l||l.type==="element"}function body(e){const n=siblingAfter(e,-1,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&whitespace$1(n.value.charAt(0)))&&!(n.type==="element"&&(n.tagName==="meta"||n.tagName==="link"||n.tagName==="script"||n.tagName==="style"||n.tagName==="template"))}function colgroup(e,n,l){const d=siblingBefore(l,n),g=siblingAfter(e,-1,!0);return l&&d&&d.type==="element"&&d.tagName==="colgroup"&&closing(d,l.children.indexOf(d),l)?!1:!!(g&&g.type==="element"&&g.tagName==="col")}function tbody(e,n,l){const d=siblingBefore(l,n),g=siblingAfter(e,-1);return l&&d&&d.type==="element"&&(d.tagName==="thead"||d.tagName==="tbody")&&closing(d,l.children.indexOf(d),l)?!1:!!(g&&g.type==="element"&&g.tagName==="tr")}const constants={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function element(e,n,l,d){const g=d.schema,jn=g.space==="svg"?!1:d.settings.omitOptionalTags;let Un=g.space==="svg"?d.settings.closeEmptyElements:d.settings.voids.includes(e.tagName.toLowerCase());const zn=[];let qn;g.space==="html"&&e.tagName==="svg"&&(d.schema=svg);const Kn=serializeAttributes(d,e.properties),Xn=d.all(g.space==="html"&&e.tagName==="template"?e.content:e);return d.schema=g,Xn&&(Un=!1),(Kn||!jn||!opening(e,n,l))&&(zn.push("<",e.tagName,Kn?" "+Kn:""),Un&&(g.space==="svg"||d.settings.closeSelfClosing)&&(qn=Kn.charAt(Kn.length-1),(!d.settings.tightSelfClosing||qn==="/"||qn&&qn!=='"'&&qn!=="'")&&zn.push(" "),zn.push("/")),zn.push(">")),zn.push(Xn),!Un&&(!jn||!closing(e,n,l))&&zn.push("</"+e.tagName+">"),zn.join("")}function serializeAttributes(e,n){const l=[];let d=-1,g;if(n){for(g in n)if(n[g]!==null&&n[g]!==void 0){const jn=serializeAttribute(e,g,n[g]);jn&&l.push(jn)}}for(;++d<l.length;){const jn=e.settings.tightAttributes?l[d].charAt(l[d].length-1):void 0;d!==l.length-1&&jn!=='"'&&jn!=="'"&&(l[d]+=" ")}return l.join("")}function serializeAttribute(e,n,l){const d=find$1(e.schema,n),g=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,jn=e.settings.allowDangerousCharacters?0:1;let Un=e.quote,zn;if(d.overloadedBoolean&&(l===d.attribute||l==="")?l=!0:(d.boolean||d.overloadedBoolean)&&(typeof l!="string"||l===d.attribute||l==="")&&(l=!!l),l==null||l===!1||typeof l=="number"&&Number.isNaN(l))return"";const qn=stringifyEntities(d.attribute,Object.assign({},e.settings.characterReferences,{subset:constants.name[g][jn]}));return l===!0||(l=Array.isArray(l)?(d.commaSeparated?stringify$1:stringify)(l,{padLeft:!e.settings.tightCommaSeparatedLists}):String(l),e.settings.collapseEmptyAttributes&&!l)?qn:(e.settings.preferUnquoted&&(zn=stringifyEntities(l,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:constants.unquoted[g][jn]}))),zn!==l&&(e.settings.quoteSmart&&ccount(l,Un)>ccount(l,e.alternative)&&(Un=e.alternative),zn=Un+stringifyEntities(l,Object.assign({},e.settings.characterReferences,{subset:(Un==="'"?constants.single:constants.double)[g][jn],attribute:!0}))+Un),qn+(zn&&"="+zn))}const textEntitySubset=["<","&"];function text(e,n,l,d){return l&&l.type==="element"&&(l.tagName==="script"||l.tagName==="style")?e.value:stringifyEntities(e.value,Object.assign({},d.settings.characterReferences,{subset:textEntitySubset}))}function raw(e,n,l,d){return d.settings.allowDangerousHtml?e.value:text(e,n,l,d)}function root(e,n,l,d){return d.all(e)}const handle=zwitch("type",{invalid,unknown,handlers:{comment,doctype,element,raw,root,text}});function invalid(e){throw new Error("Expected node, not `"+e+"`")}function unknown(e){const n=e;throw new Error("Cannot compile unknown node `"+n.type+"`")}const emptyOptions={},emptyCharacterReferences={},emptyChildren=[];function toHtml(e,n){const l=n||emptyOptions,d=l.quote||'"',g=d==='"'?"'":'"';if(d!=='"'&&d!=="'")throw new Error("Invalid quote `"+d+"`, expected `'` or `\"`");return{one,all,settings:{omitOptionalTags:l.omitOptionalTags||!1,allowParseErrors:l.allowParseErrors||!1,allowDangerousCharacters:l.allowDangerousCharacters||!1,quoteSmart:l.quoteSmart||!1,preferUnquoted:l.preferUnquoted||!1,tightAttributes:l.tightAttributes||!1,upperDoctype:l.upperDoctype||!1,tightDoctype:l.tightDoctype||!1,bogusComments:l.bogusComments||!1,tightCommaSeparatedLists:l.tightCommaSeparatedLists||!1,tightSelfClosing:l.tightSelfClosing||!1,collapseEmptyAttributes:l.collapseEmptyAttributes||!1,allowDangerousHtml:l.allowDangerousHtml||!1,voids:l.voids||htmlVoidElements,characterReferences:l.characterReferences||emptyCharacterReferences,closeSelfClosing:l.closeSelfClosing||!1,closeEmptyElements:l.closeEmptyElements||!1},schema:l.space==="svg"?svg:html$4,quote:d,alternative:g}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function one(e,n,l){return handle(e,n,l,this)}function all(e){const n=[],l=e&&e.children||emptyChildren;let d=-1;for(;++d<l.length;)n[d]=this.one(l[d],d,e);return n.join("")}function rehypeStringify(e){const n=this,l={...n.data("settings"),...e};n.compiler=d;function d(g){return toHtml(g,l)}}var Oe=Object.defineProperty,Fe=(e,n,l)=>n in e?Oe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,h=(e,n,l)=>Fe(e,typeof n!="symbol"?n+"":n,l);function Jt$1(e,n,l,d="before"){const g=typeof l=="string"?l:l.id,jn=ht$2(e),Un=n.map(Kn=>bt$3(Kn,jn)),zn=Tt$2(g,e.doc);if(!zn)throw new Error(`Block with ID ${g} not found`);let qn=zn.posBeforeNode;return d==="after"&&(qn+=zn.node.nodeSize),e.step(new ReplaceStep(qn,qn,new Slice(Fragment.from(Un),0,0))),Un.map(Kn=>L$1(Kn,jn))}function j(e){if(!e||e.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");const n=e.firstChild;if(!n)throw new Error("Invalid column: does not have child node.");const l=n.firstChild;if(!l)throw new Error("Invalid blockContainer: does not have child node.");return e.childCount===1&&n.childCount===1&&l.type.name==="paragraph"&&l.content.content.length===0}function qt$1(e,n){const l=e.doc.resolve(n),d=l.nodeAfter;if(!d||d.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");for(let g=d.childCount-1;g>=0;g--){const jn=e.doc.resolve(l.pos+1).posAtIndex(g),Un=e.doc.resolve(jn).nodeAfter;if(!Un||Un.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");j(Un)&&e.delete(jn,jn+Un.nodeSize)}}function W(e,n){qt$1(e,n);const l=e.doc.resolve(n).nodeAfter;if(!l||l.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");if(l.childCount>2)return;if(l.childCount<2)throw new Error("Invalid columnList: contains fewer than two children.");const d=n+1,g=e.doc.resolve(d).nodeAfter,jn=n+l.nodeSize-1,Un=e.doc.resolve(jn).nodeBefore;if(!g||!Un)throw new Error("Invalid columnList: does not contain children.");const zn=j(g),qn=j(Un);if(zn&&qn){e.delete(n,n+l.nodeSize);return}if(zn){e.step(new ReplaceAroundStep(n,n+l.nodeSize,jn-Un.nodeSize+1,jn-1,Slice.empty,0,!1));return}if(qn){e.step(new ReplaceAroundStep(n,n+l.nodeSize,d+1,d+g.nodeSize-1,Slice.empty,0,!1));return}}function ie(e,n,l){const d=ht$2(e),g=l.map(Xn=>bt$3(Xn,d)),jn=new Set(n.map(Xn=>typeof Xn=="string"?Xn:Xn.id)),Un=[],zn=new Set,qn=typeof n[0]=="string"?n[0]:n[0].id;let Kn=0;if(e.doc.descendants((Xn,Qn)=>{if(jn.size===0)return!1;if(!Xn.type.isInGroup("bnBlock")||!jn.has(Xn.attrs.id))return!0;if(Un.push(L$1(Xn,d)),jn.delete(Xn.attrs.id),l.length>0&&Xn.attrs.id===qn){const Ni=e.doc.nodeSize;e.insert(Qn,g);const $i=e.doc.nodeSize;Kn+=Ni-$i}const Jn=e.doc.nodeSize,Ai=e.doc.resolve(Qn-Kn);Ai.node().type.name==="column"?zn.add(Ai.before(-1)):Ai.node().type.name==="columnList"&&zn.add(Ai.before()),Ai.node().type.name==="blockGroup"&&Ai.node(Ai.depth-1).type.name!=="doc"&&Ai.node().childCount===1?e.delete(Ai.before(),Ai.after()):e.delete(Qn-Kn,Qn-Kn+Xn.nodeSize);const Ri=e.doc.nodeSize;return Kn+=Jn-Ri,!1}),jn.size>0){const Xn=[...jn].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+Xn)}return zn.forEach(Xn=>W(e,Xn)),{insertedBlocks:g.map(Xn=>L$1(Xn,d)),removedBlocks:Un}}function Yt$1(e,n,l,d,g){let jn;if(n)if(typeof n=="string")jn=T$2([n],e.pmSchema,d);else if(Array.isArray(n))jn=T$2(n,e.pmSchema,d);else if(n.type==="tableContent")jn=kt$3(n,e.pmSchema);else throw new O$1(n.type);else throw new Error("blockContent is required");const Un=(g?.document??document).createDocumentFragment();for(const zn of jn)if(zn.type.name!=="text"&&e.schema.inlineContentSchema[zn.type.name]){const qn=e.schema.inlineContentSpecs[zn.type.name].implementation;if(qn){const Kn=wt$2(zn,e.schema.inlineContentSchema,e.schema.styleSchema),Xn=qn.render.call({renderType:"dom",props:void 0},Kn,()=>{},e);if(Xn){if(Un.appendChild(Xn.dom),Xn.contentDOM){const Qn=l.serializeFragment(zn.content,g);Xn.contentDOM.dataset.editable="",Xn.contentDOM.appendChild(Qn)}continue}}}else if(zn.type.name==="text"){let qn=document.createTextNode(zn.textContent);for(const Kn of zn.marks.toReversed())if(Kn.type.name in e.schema.styleSpecs){const Xn=e.schema.styleSpecs[Kn.type.name].implementation.render(Kn.attrs.stringValue,e);Xn.contentDOM.appendChild(qn),qn=Xn.dom}else{const Xn=Kn.type.spec.toDOM(Kn,!0),Qn=DOMSerializer.renderSpec(document,Xn);Qn.contentDOM.appendChild(qn),qn=Qn.dom}Un.appendChild(qn)}else{const qn=l.serializeFragment(Fragment.from([zn]),g);Un.appendChild(qn)}return Un}function Qt(e,n,l,d){var g,jn,Un,zn,qn;const Kn=e.pmSchema.nodes.blockContainer,Xn=n.props||{};for(const[Ri,Ni]of Object.entries(e.schema.blockSchema[n.type].propSchema))!(Ri in Xn)&&Ni.default!==void 0&&(Xn[Ri]=Ni.default);const Qn=n.children||[],Jn=e.blockImplementations[n.type].implementation.render.call({renderType:"dom",props:void 0},{...n,props:Xn,children:Qn},e);if(Jn.contentDOM&&n.content){const Ri=Yt$1(e,n.content,l,n.type,d);Jn.contentDOM.appendChild(Ri)}if(e.pmSchema.nodes[n.type].isInGroup("bnBlock")){if(n.children&&n.children.length>0){const Ri=Be$2(e,n.children,l,d);(g=Jn.contentDOM)==null||g.append(Ri)}return Jn.dom}const Ai=(Un=(jn=Kn.spec)==null?void 0:jn.toDOM)==null?void 0:Un.call(jn,Kn.create({id:n.id,...Xn}));return(zn=Ai.contentDOM)==null||zn.appendChild(Jn.dom),n.children&&n.children.length>0&&((qn=Ai.contentDOM)==null||qn.appendChild(Ce$1(e,n.children,l,d))),Ai.dom}function Be$2(e,n,l,d){const g=(d?.document??document).createDocumentFragment();for(const jn of n){const Un=Qt(e,jn,l,d);g.appendChild(Un)}return g}const Ce$1=(e,n,l,d)=>{var g;const jn=e.pmSchema.nodes.blockGroup,Un=jn.spec.toDOM(jn.create({})),zn=Be$2(e,n,l,d);return(g=Un.contentDOM)==null||g.appendChild(zn),Un.dom},Xt$1=(e,n)=>{const l=DOMSerializer.fromSchema(e);return{serializeBlocks:(d,g)=>Ce$1(n,d,l,g).outerHTML}};function Zt$1(e){return e.transact(n=>{const l=Y$2(n.doc,n.selection.anchor);if(n.selection instanceof CellSelection)return{type:"cell",anchorBlockId:l.node.attrs.id,anchorCellOffset:n.selection.$anchorCell.pos-l.posBeforeNode,headCellOffset:n.selection.$headCell.pos-l.posBeforeNode};if(n.selection instanceof NodeSelection)return{type:"node",anchorBlockId:l.node.attrs.id};{const d=Y$2(n.doc,n.selection.head);return{type:"text",anchorBlockId:l.node.attrs.id,headBlockId:d.node.attrs.id,anchorOffset:n.selection.anchor-l.posBeforeNode,headOffset:n.selection.head-d.posBeforeNode}}})}function eo(e,n){var l,d;const g=(l=Tt$2(n.anchorBlockId,e.doc))==null?void 0:l.posBeforeNode;if(g===void 0)throw new Error(`Could not find block with ID ${n.anchorBlockId} to update selection`);let jn;if(n.type==="cell")jn=CellSelection.create(e.doc,g+n.anchorCellOffset,g+n.headCellOffset);else if(n.type==="node")jn=NodeSelection.create(e.doc,g+1);else{const Un=(d=Tt$2(n.headBlockId,e.doc))==null?void 0:d.posBeforeNode;if(Un===void 0)throw new Error(`Could not find block with ID ${n.headBlockId} to update selection`);jn=TextSelection.create(e.doc,g+n.anchorOffset,Un+n.headOffset)}e.setSelection(jn)}function K$1(e){return e.map(n=>n.type==="columnList"?n.children.map(l=>K$1(l.children)).flat():{...n,children:K$1(n.children)}).flat()}function xe$1(e,n,l){e.transact(d=>{var g;const jn=((g=e.getSelection())==null?void 0:g.blocks)||[e.getTextCursorPosition().block],Un=Zt$1(e);e.removeBlocks(jn),e.insertBlocks(K$1(jn),n,l),eo(d,Un)})}function Ee$1(e){return!e||e.type!=="columnList"}function Me(e,n,l){let d,g;if(n?n.children.length>0?(d=n.children[n.children.length-1],g="after"):(d=n,g="before"):l&&(d=l,g="before"),!d||!g)return;const jn=e.getParentBlock(d);return Ee$1(jn)?{referenceBlock:d,placement:g}:Me(e,g==="after"?d:e.getPrevBlock(d),jn)}function we(e,n,l){let d,g;if(n?n.children.length>0?(d=n.children[0],g="before"):(d=n,g="after"):l&&(d=l,g="after"),!d||!g)return;const jn=e.getParentBlock(d);return Ee$1(jn)?{referenceBlock:d,placement:g}:we(e,g==="before"?d:e.getNextBlock(d),jn)}function to(e){e.transact(()=>{const n=e.getSelection(),l=n?.blocks[0]||e.getTextCursorPosition().block,d=Me(e,e.getPrevBlock(l),e.getParentBlock(l));d&&xe$1(e,d.referenceBlock,d.placement)})}function oo(e){e.transact(()=>{const n=e.getSelection(),l=n?.blocks[n?.blocks.length-1]||e.getTextCursorPosition().block,d=we(e,e.getNextBlock(l),e.getParentBlock(l));d&&xe$1(e,d.referenceBlock,d.placement)})}function no(e,n,l){const{$from:d,$to:g}=e.selection,jn=d.blockRange(g,Ai=>Ai.childCount>0&&(Ai.type.name==="blockGroup"||Ai.type.name==="column"));if(!jn)return!1;const Un=jn.startIndex;if(Un===0)return!1;const zn=jn.parent.child(Un-1);if(zn.type!==n)return!1;const qn=zn.lastChild&&zn.lastChild.type===l,Kn=Fragment.from(qn?n.create():null),Xn=new Slice(Fragment.from(n.create(null,Fragment.from(l.create(null,Kn)))),qn?3:1,0),Qn=jn.start,Jn=jn.end;return e.step(new ReplaceAroundStep(Qn-(qn?3:1),Jn,Qn,Jn,Xn,1,!0)).scrollIntoView(),!0}function Te$1(e){return e.transact(n=>no(n,e.pmSchema.nodes.blockContainer,e.pmSchema.nodes.blockGroup))}function so$1(e){e._tiptapEditor.commands.liftListItem("blockContainer")}function ro(e){return e.transact(n=>{const{bnBlock:l}=Ot$3(n);return n.doc.resolve(l.beforePos).nodeBefore!==null})}function io(e){return e.transact(n=>{const{bnBlock:l}=Ot$3(n);return n.doc.resolve(l.beforePos).depth>1})}function ao$1(e,n){const l=typeof n=="string"?n:n.id,d=ht$2(e),g=Tt$2(l,e);if(g)return L$1(g.node,d)}function co$1(e,n){const l=typeof n=="string"?n:n.id,d=Tt$2(l,e),g=ht$2(e);if(!d)return;const jn=e.resolve(d.posBeforeNode).nodeBefore;if(jn)return L$1(jn,g)}function lo$1(e,n){const l=typeof n=="string"?n:n.id,d=Tt$2(l,e),g=ht$2(e);if(!d)return;const jn=e.resolve(d.posBeforeNode+d.node.nodeSize).nodeAfter;if(jn)return L$1(jn,g)}function uo$1(e,n){const l=typeof n=="string"?n:n.id,d=ht$2(e),g=Tt$2(l,e);if(!g)return;const jn=e.resolve(g.posBeforeNode),Un=jn.node(),zn=jn.node(-1),qn=zn.type.name!=="doc"?Un.type.name==="blockGroup"?zn:Un:void 0;if(qn)return L$1(qn,d)}let po$1=class{constructor(n){this.editor=n}get document(){return this.editor.transact(n=>St$3(n.doc,this.editor.pmSchema))}getBlock(n){return this.editor.transact(l=>ao$1(l.doc,n))}getPrevBlock(n){return this.editor.transact(l=>co$1(l.doc,n))}getNextBlock(n){return this.editor.transact(l=>lo$1(l.doc,n))}getParentBlock(n){return this.editor.transact(l=>uo$1(l.doc,n))}forEachBlock(n,l=!1){const d=this.document.slice();l&&d.reverse();function g(jn){for(const Un of jn){if(n(Un)===!1)return!1;const zn=l?Un.children.slice().reverse():Un.children;if(!g(zn))return!1}return!0}g(d)}insertBlocks(n,l,d="before"){return this.editor.transact(g=>Jt$1(g,n,l,d))}updateBlock(n,l){return this.editor.transact(d=>yo$3(d,n,l))}removeBlocks(n){return this.editor.transact(l=>ie(l,n,[]).removedBlocks)}replaceBlocks(n,l){return this.editor.transact(d=>ie(d,n,l))}canNestBlock(){return ro(this.editor)}nestBlock(){Te$1(this.editor)}canUnnestBlock(){return io(this.editor)}unnestBlock(){so$1(this.editor)}moveBlocksUp(){return to(this.editor)}moveBlocksDown(){return oo(this.editor)}},fo$1=class extends f$1{constructor(n){super(),this.editor=n,n.on("create",()=>{n._tiptapEditor.on("update",({transaction:l,appendedTransactions:d})=>{this.emit("onChange",{editor:n,transaction:l,appendedTransactions:d})}),n._tiptapEditor.on("selectionUpdate",({transaction:l})=>{this.emit("onSelectionChange",{editor:n,transaction:l})}),n._tiptapEditor.on("mount",()=>{this.emit("onMount",{editor:n})}),n._tiptapEditor.on("unmount",()=>{this.emit("onUnmount",{editor:n})})})}onChange(n,l=!0){const d=({transaction:g,appendedTransactions:jn})=>{!l&&ae(g)||n(this.editor,{getChanges(){return St$1(g,jn)}})};return this.on("onChange",d),()=>{this.off("onChange",d)}}onSelectionChange(n,l=!1){const d=g=>{!l&&ae(g.transaction)||n(this.editor)};return this.on("onSelectionChange",d),()=>{this.off("onSelectionChange",d)}}onMount(n){return this.on("onMount",n),()=>{this.off("onMount",n)}}onUnmount(n){return this.on("onUnmount",n),()=>{this.off("onUnmount",n)}}};function ae(e){return!!e.getMeta("y-sync$")}function ho$1(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}function mo$1(e){return e.nodeType===3&&!/\S/.test(e.nodeValue||"")}function ko$1(e){e.querySelectorAll("li > ul, li > ol").forEach(n=>{const l=ho$1(n),d=n.parentElement,g=Array.from(d.childNodes).slice(l+1);n.remove(),g.forEach(jn=>{jn.remove()}),d.insertAdjacentElement("afterend",n),g.reverse().forEach(jn=>{if(mo$1(jn))return;const Un=document.createElement("li");Un.append(jn),n.insertAdjacentElement("afterend",Un)}),d.childNodes.length===0&&d.remove()})}function go$1(e){e.querySelectorAll("li + ul, li + ol").forEach(n=>{var l,d;const g=n.previousElementSibling,jn=document.createElement("div");g.insertAdjacentElement("afterend",jn),jn.append(g);const Un=document.createElement("div");for(Un.setAttribute("data-node-type","blockGroup"),jn.append(Un);((l=jn.nextElementSibling)==null?void 0:l.nodeName)==="UL"||((d=jn.nextElementSibling)==null?void 0:d.nodeName)==="OL";)Un.append(jn.nextElementSibling)})}let ce=null;function bo(){return ce||(ce=document.implementation.createHTMLDocument("title"))}function yo$1(e){if(typeof e=="string"){const n=bo().createElement("div");n.innerHTML=e,e=n}return ko$1(e),go$1(e),e}function Pe$1(e,n){const l=yo$1(e),d=DOMParser$1.fromSchema(n).parse(l,{topNode:n.nodes.blockGroup.create()}),g=[];for(let jn=0;jn<d.childCount;jn++)g.push(L$1(d.child(jn),n));return g}function So$1(e,n){const l=n.value?n.value:"",d={};n.lang&&(d["data-language"]=n.lang);let g={type:"element",tagName:"code",properties:d,children:[{type:"text",value:l}]};return n.meta&&(g.data={meta:n.meta}),e.patch(n,g),g=e.applyData(n,g),g={type:"element",tagName:"pre",properties:{},children:[g]},e.patch(n,g),g}function Bo$1(e,n){var l;const d=String(n?.url||""),g=n!=null&&n.title?String(n.title):void 0;let jn={type:"element",tagName:"video",properties:{src:d,"data-name":g,"data-url":d,controls:!0},children:[]};return(l=e.patch)==null||l.call(e,n,jn),jn=e.applyData?e.applyData(n,jn):jn,jn}function ve$1(e){return unified().use(remarkParse).use(remarkGfm).use(remarkRehype,{handlers:{...handlers,image:(n,l)=>{const d=String(l?.url||"");return fo$3(d)?Bo$1(n,l):handlers.image(n,l)},code:So$1,blockquote:(n,l)=>{const d={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(l),!1)};return n.patch(l,d),n.applyData(l,d)}}}).use(rehypeStringify).processSync(e).value}function Co(e,n){const l=ve$1(e);return Pe$1(l,n)}let xo$1=class{constructor(n){this.editor=n}blocksToHTMLLossy(n=this.editor.document){return ve$2(this.editor.pmSchema,this.editor).exportBlocks(n,{})}blocksToFullHTML(n=this.editor.document){return Xt$1(this.editor.pmSchema,this.editor).serializeBlocks(n,{})}tryParseHTMLToBlocks(n){return Pe$1(n,this.editor.pmSchema)}blocksToMarkdownLossy(n=this.editor.document){return Io$2(n,this.editor.pmSchema,this.editor,{})}tryParseMarkdownToBlocks(n){return Co(n,this.editor.pmSchema)}pasteHTML(n,l=!1){var d;let g=n;if(!l){const jn=this.tryParseHTMLToBlocks(n);g=this.blocksToFullHTML(jn)}g&&((d=this.editor.prosemirrorView)==null||d.pasteHTML(g))}pasteText(n){var l;return(l=this.editor.prosemirrorView)==null?void 0:l.pasteText(n)}pasteMarkdown(n){const l=ve$1(n);return this.pasteHTML(l)}};const oe$1=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function Eo$1(e,n){if(!e.startsWith(".")||!n.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===n}function Mo$1(e,n){const l=e.split("/"),d=n.split("/");if(l.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);if(d.length!==2)throw new Error(`The string ${n} is not a valid MIME type.`);return l[1]==="*"||d[1]==="*"?l[0]===d[0]:(l[0]==="*"||d[0]==="*"||l[0]===d[0])&&l[1]===d[1]}function le(e,n,l,d="after"){let g;return Array.isArray(n.content)&&n.content.length===0?g=e.updateBlock(n,l).id:g=e.insertBlocks([l],n,d)[0].id,g}async function Ie$2(e,n){var l;if(!n.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const d="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(d===null)return;let g=null;for(const Un of oe$1)if(d.types.includes(Un)){g=Un;break}if(g!=="Files")return;const jn=d.items;if(jn){e.preventDefault();for(let Un=0;Un<jn.length;Un++){let zn="file";for(const Kn of Object.values(n.schema.blockSpecs))for(const Xn of((l=Kn.implementation.meta)==null?void 0:l.fileBlockAccept)||[]){const Qn=Xn.startsWith("."),Jn=jn[Un].getAsFile();if(Jn&&(!Qn&&Jn.type&&Mo$1(jn[Un].type,Xn)||Qn&&Eo$1("."+Jn.name.split(".").pop(),Xn))){zn=Kn.config.type;break}}const qn=jn[Un].getAsFile();if(qn){const Kn={type:zn,props:{name:qn.name}};let Xn;if(e.type==="paste"){const Ai=n.getTextCursorPosition().block;Xn=le(n,Ai,Kn)}else if(e.type==="drop"){const Ai={left:e.clientX,top:e.clientY},Ri=n.prosemirrorView.posAtCoords(Ai);if(!Ri)return;Xn=n.transact(Ni=>{var $i;const Li=Y$2(Ni.doc,Ri.pos),ji=($i=n.domElement)==null?void 0:$i.querySelector(`[data-id="${Li.node.attrs.id}"]`),Fi=ji?.getBoundingClientRect();return le(n,n.getBlock(Li.node.attrs.id),Kn,Fi&&(Fi.top+Fi.bottom)/2>Ai.top?"before":"after")})}else return;const Qn=await n.uploadFile(qn,Xn),Jn=typeof Qn=="string"?{props:{url:Qn}}:{...Qn};n.updateBlock(Xn,Jn)}}}}const wo$1=e=>Extension.create({name:"dropFile",addProseMirrorPlugins(){return[new Plugin({props:{handleDOMEvents:{drop(n,l){if(!e.isEditable)return;let d=null;for(const g of oe$1)if(l.dataTransfer.types.includes(g)){d=g;break}return d===null?!0:d==="Files"?(Ie$2(l,e),!0):!1}}}})]}}),To$1=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,Po$1=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,vo$1=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,Io$1=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,Ao$1=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,_o$1=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,Do$1=/\n{2} {0,3}-{2,48}\n{2}/,Lo$1=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,No$1=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,Oo$1=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,Fo$1=/^\s*\|(.+\|)+\s*$/m,$o$1=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,Ho$1=/^\s*\|(.+\|)+\s*$/m,Vo$1=e=>To$1.test(e)||Po$1.test(e)||vo$1.test(e)||Io$1.test(e)||Ao$1.test(e)||_o$1.test(e)||Do$1.test(e)||Lo$1.test(e)||No$1.test(e)||Oo$1.test(e)||Fo$1.test(e)||$o$1.test(e)||Ho$1.test(e);async function Uo$1(e,n){const{schema:l}=n.state;if(!e.clipboardData)return!1;const d=e.clipboardData.getData("text/plain");if(!d)return!1;if(!l.nodes.codeBlock)return n.pasteText(d),!0;const g=e.clipboardData.getData("vscode-editor-data"),jn=g?JSON.parse(g):void 0,Un=jn?.mode;return Un?(n.pasteHTML(`<pre><code class="language-${Un}">${d.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function zo$1({event:e,editor:n,prioritizeMarkdownOverHTML:l,plainTextAsMarkdown:d}){var g;if(n.transact(zn=>zn.selection.$from.parent.type.spec.code&&zn.selection.$to.parent.type.spec.code)){const zn=(g=e.clipboardData)==null?void 0:g.getData("text/plain");if(zn)return n.pasteText(zn),!0}let jn;for(const zn of oe$1)if(e.clipboardData.types.includes(zn)){jn=zn;break}if(!jn)return!0;if(jn==="vscode-editor-data")return Uo$1(e,n.prosemirrorView),!0;if(jn==="Files")return Ie$2(e,n),!0;const Un=e.clipboardData.getData(jn);if(jn==="blocknote/html")return n.pasteHTML(Un,!0),!0;if(jn==="text/markdown")return n.pasteMarkdown(Un),!0;if(l){const zn=e.clipboardData.getData("text/plain");if(Vo$1(zn))return n.pasteMarkdown(zn),!0}return jn==="text/html"?(n.pasteHTML(Un),!0):d?(n.pasteMarkdown(Un),!0):(n.pasteText(Un),!0)}const Go$1=(e,n)=>Extension.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new Plugin({props:{handleDOMEvents:{paste(l,d){if(d.preventDefault(),!!e.isEditable)return n({event:d,editor:e,defaultPasteHandler:({prioritizeMarkdownOverHTML:g=!0,plainTextAsMarkdown:jn=!0}={})=>zo$1({event:d,editor:e,prioritizeMarkdownOverHTML:g,plainTextAsMarkdown:jn})})}}}})]}});function Ro$1(e,n,l){var d;let g=!1;const jn=e.state.selection instanceof CellSelection;if(!jn){const qn=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,Kn=[];for(let Xn=0;Xn<qn.childCount;Xn++)Kn.push(qn.child(Xn));g=Kn.find(Xn=>Xn.type.isInGroup("bnBlock")||Xn.type.name==="blockGroup"||Xn.type.spec.group==="blockContent")===void 0,g&&(n=qn)}let Un;const zn=ve$2(e.state.schema,l);if(jn){((d=n.firstChild)==null?void 0:d.type.name)==="table"&&(n=n.firstChild.content);const qn=gt$3(n,l.schema.inlineContentSchema,l.schema.styleSchema);Un=`<table>${zn.exportInlineContent(qn,{})}</table>`}else if(g){const qn=F$3(n,l.schema.inlineContentSchema,l.schema.styleSchema);Un=zn.exportInlineContent(qn,{})}else{const qn=Lt$1(n);Un=zn.exportBlocks(qn,{})}return Un}function Ae$1(e,n){"node"in e.state.selection&&e.state.selection.node.type.spec.group==="blockContent"&&n.transact(Un=>Un.setSelection(new NodeSelection(Un.doc.resolve(e.state.selection.from-1))));const l=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,d=e.state.selection.content().content,g=Ro$1(e,d,n),jn=Se(g);return{clipboardHTML:l,externalHTML:g,markdown:jn}}const de$1=()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!0;let n=e.focusNode;for(;n;){if(n instanceof HTMLElement&&n.getAttribute("contenteditable")==="false")return!0;n=n.parentElement}return!1},ue$1=(e,n,l)=>{l.preventDefault(),l.clipboardData.clearData();const{clipboardHTML:d,externalHTML:g,markdown:jn}=Ae$1(n,e);l.clipboardData.setData("blocknote/html",d),l.clipboardData.setData("text/html",g),l.clipboardData.setData("text/plain",jn)},jo$1=e=>Extension.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new Plugin({props:{handleDOMEvents:{copy(n,l){return de$1()||ue$1(e,n,l),!0},cut(n,l){return de$1()||(ue$1(e,n,l),n.editable&&n.dispatch(n.state.tr.deleteSelection())),!0},dragstart(n,l){if(!("node"in n.state.selection)||n.state.selection.node.type.spec.group!=="blockContent")return;e.transact(Un=>Un.setSelection(new NodeSelection(Un.doc.resolve(n.state.selection.from-1)))),l.preventDefault(),l.dataTransfer.clearData();const{clipboardHTML:d,externalHTML:g,markdown:jn}=Ae$1(n,e);return l.dataTransfer.setData("blocknote/html",d),l.dataTransfer.setData("text/html",g),l.dataTransfer.setData("text/plain",jn),!0}}}})]}}),Wo$1=Extension.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{backgroundColor:Eo$3()}}]}}),Ko$1=Node3.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",mergeAttributes(this.options.HTMLAttributes,e)]},renderText(){return`
`}}),J=(e,n)=>{const l=e.resolve(n),d=l.index();if(d===0)return;const g=l.posAtIndex(d-1);return It$3(e.resolve(g))},_e$1=(e,n)=>{for(;n.childContainer;){const l=n.childContainer.node,d=e.resolve(n.childContainer.beforePos+1).posAtIndex(l.childCount-1);n=It$3(e.resolve(d))}return n},Jo$1=(e,n)=>e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*"&&e.blockContent.node.childCount>0&&n.isBlockContainer&&n.blockContent.node.type.spec.content==="inline*",qo$1=(e,n,l,d)=>{if(!d.isBlockContainer)throw new Error(`Attempted to merge block at position ${d.bnBlock.beforePos} into previous block at position ${l.bnBlock.beforePos}, but next block is not a block container`);if(d.childContainer){const g=e.doc.resolve(d.childContainer.beforePos+1),jn=e.doc.resolve(d.childContainer.afterPos-1),Un=g.blockRange(jn);if(n){const zn=e.doc.resolve(d.bnBlock.beforePos);e.tr.lift(Un,zn.depth)}}if(n){if(!l.isBlockContainer)throw new Error(`Attempted to merge block at position ${d.bnBlock.beforePos} into previous block at position ${l.bnBlock.beforePos}, but previous block is not a block container`);n(e.tr.delete(l.blockContent.afterPos-1,d.blockContent.beforePos+1))}return!0},pe$1=e=>({state:n,dispatch:l})=>{const d=n.doc.resolve(e),g=It$3(d),jn=J(n.doc,g.bnBlock.beforePos);if(!jn)return!1;const Un=_e$1(n.doc,jn);return Jo$1(Un,g)?qo$1(n,l,Un,g):!1},Yo$1=Extension.create({priority:50,addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({chain:d,commands:g})=>[()=>g.deleteSelection(),()=>g.undoInputRule(),()=>g.command(({state:jn})=>{const Un=Tt$3(jn);if(!Un.isBlockContainer)return!1;const zn=jn.selection.from===Un.blockContent.beforePos+1,qn=Un.blockContent.node.type.name==="paragraph";return zn&&!qn?g.command(ko$3(Un.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>g.command(({state:jn})=>{const Un=Tt$3(jn);if(!Un.isBlockContainer)return!1;const{blockContent:zn}=Un;return jn.selection.from===zn.beforePos+1?g.liftListItem("blockContainer"):!1}),()=>g.command(({state:jn})=>{const Un=Tt$3(jn);if(!Un.isBlockContainer)return!1;const{bnBlock:zn,blockContent:qn}=Un,Kn=jn.selection.from===qn.beforePos+1,Xn=jn.selection.empty,Qn=zn.beforePos;return Kn&&Xn?d().command(pe$1(Qn)).scrollIntoView().run():!1}),()=>g.command(({state:jn,tr:Un,dispatch:zn})=>{const qn=Tt$3(jn);if(!qn.isBlockContainer||Un.selection.from!==qn.blockContent.beforePos+1)return!1;const Kn=Un.doc.resolve(qn.bnBlock.beforePos);if(Kn.nodeBefore||Kn.node().type.name!=="column")return!1;const Xn=Un.doc.resolve(qn.bnBlock.beforePos),Qn=Un.doc.resolve(Xn.before()),Jn=Qn.before();if(zn){const Ai=Un.doc.slice(qn.bnBlock.beforePos,qn.bnBlock.afterPos).content;Un.delete(qn.bnBlock.beforePos,qn.bnBlock.afterPos),Qn.index()===0?(W(Un,Jn),Un.insert(Jn,Ai),Un.setSelection(TextSelection.near(Un.doc.resolve(Jn)))):(Un.insert(Qn.pos-1,Ai),Un.setSelection(TextSelection.near(Un.doc.resolve(Qn.pos-1))),W(Un,Jn))}return!0}),()=>g.command(({state:jn})=>{const Un=Tt$3(jn);if(!Un.isBlockContainer)return!1;if(Un.blockContent.node.childCount===0&&Un.blockContent.node.type.spec.content==="inline*"){const zn=J(jn.doc,Un.bnBlock.beforePos);if(!zn||!zn.isBlockContainer)return!1;let qn=d();if(zn.blockContent.node.type.spec.content==="tableRow+"){const Kn=Un.bnBlock.beforePos-1-1-1-1-1;qn=qn.setTextSelection(Kn)}else if(zn.blockContent.node.type.spec.content===""){const Kn=zn.blockContent.afterPos-zn.blockContent.node.nodeSize;qn=qn.setNodeSelection(Kn)}else{const Kn=zn.blockContent.afterPos-zn.blockContent.node.nodeSize;qn=qn.setTextSelection(Kn)}return qn.deleteRange({from:Un.bnBlock.beforePos,to:Un.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>g.command(({state:jn})=>{const Un=Tt$3(jn);if(!Un.isBlockContainer)throw new Error("todo");const zn=jn.selection.from===Un.blockContent.beforePos+1,qn=jn.selection.empty,Kn=J(jn.doc,Un.bnBlock.beforePos);if(Kn&&zn&&qn){const Xn=_e$1(jn.doc,Kn);if(!Xn.isBlockContainer)throw new Error("todo");if(Xn.blockContent.node.type.spec.content===""||Xn.blockContent.node.type.spec.content==="inline*"&&Xn.blockContent.node.childCount===0)return d().cut({from:Un.bnBlock.beforePos,to:Un.bnBlock.afterPos},Xn.bnBlock.afterPos).deleteRange({from:Xn.bnBlock.beforePos,to:Xn.bnBlock.afterPos}).run()}return!1})]),n=()=>this.editor.commands.first(({commands:d})=>[()=>d.deleteSelection(),()=>d.command(({state:g})=>{const jn=Tt$3(g);if(!jn.isBlockContainer)return!1;const{bnBlock:Un,blockContent:zn,childContainer:qn}=jn,{depth:Kn}=g.doc.resolve(Un.beforePos),Xn=Un.afterPos===g.doc.nodeSize-3,Qn=g.selection.from===zn.afterPos-1,Jn=g.selection.empty;if(!Xn&&Qn&&Jn&&qn===void 0){let Ai=Kn,Ri=Un.afterPos+1,Ni=g.doc.resolve(Ri).depth;for(;Ni<Ai;)Ai=Ni,Ri+=2,Ni=g.doc.resolve(Ri).depth;return d.command(pe$1(Ri-1))}return!1})]),l=(d=!1)=>this.editor.commands.first(({commands:g,tr:jn})=>[()=>g.command(({state:Un})=>{const zn=Tt$3(Un);if(!zn.isBlockContainer)return!1;const{bnBlock:qn,blockContent:Kn}=zn,{depth:Xn}=Un.doc.resolve(qn.beforePos),Qn=Un.selection.$anchor.parentOffset===0,Jn=Un.selection.anchor===Un.selection.head,Ai=Kn.node.childCount===0,Ri=Xn>1;return Qn&&Jn&&Ai&&Ri?g.liftListItem("blockContainer"):!1}),()=>g.command(({state:Un})=>{var zn;const qn=Tt$3(Un),Kn=((zn=this.options.editor.schema.blockSchema[qn.blockNoteType].meta)==null?void 0:zn.hardBreakShortcut)??"shift+enter";if(Kn==="none")return!1;if(Kn==="shift+enter"&&d||Kn==="enter"){const Xn=jn.storedMarks||jn.selection.$head.marks().filter(Qn=>this.editor.extensionManager.splittableMarks.includes(Qn.type.name));return jn.insert(jn.selection.head,jn.doc.type.schema.nodes.hardBreak.create()).ensureMarks(Xn),!0}return!1}),()=>g.command(({state:Un,dispatch:zn})=>{const qn=Tt$3(Un);if(!qn.isBlockContainer)return!1;const{bnBlock:Kn,blockContent:Xn}=qn,Qn=Un.selection.$anchor.parentOffset===0,Jn=Un.selection.anchor===Un.selection.head,Ai=Xn.node.childCount===0;if(Qn&&Jn&&Ai){const Ri=Kn.afterPos,Ni=Ri+2;if(zn){const $i=Un.schema.nodes.blockContainer.createAndFill();Un.tr.insert(Ri,$i).scrollIntoView(),Un.tr.setSelection(new TextSelection(Un.doc.resolve(Ni)))}return!0}return!1}),()=>g.command(({state:Un,chain:zn})=>{const qn=Tt$3(Un);if(!qn.isBlockContainer)return!1;const{blockContent:Kn}=qn,Xn=Un.selection.$anchor.parentOffset===0;return Kn.node.childCount===0?!1:(zn().deleteSelection().command(So$3(Un.selection.from,Xn,Xn)).run(),!0)})]);return{Backspace:e,Delete:n,Enter:()=>l(),"Shift-Enter":()=>l(!0),Tab:()=>{var d,g;return this.options.tabBehavior!=="prefer-indent"&&((d=this.options.editor.getExtension(yo$2))!=null&&d.store.state||((g=this.options.editor.getExtension(I$2))==null?void 0:g.store.state)!==void 0)?!1:Te$1(this.options.editor)},"Shift-Tab":()=>{var d,g;return this.options.tabBehavior!=="prefer-indent"&&((d=this.options.editor.getExtension(yo$2))!=null&&d.store.state||((g=this.options.editor.getExtension(I$2))==null?void 0:g.store.state)!==void 0)?!1:this.editor.commands.liftListItem("blockContainer")},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}}),Qo$1=Mark.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(n,l){return["ins",{"data-id":String(n.attrs.id),"data-inline":String(l),...!l&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(n){return n.dataset.id?{id:parseInt(n.dataset.id,10)}:!1}}]}}}),Xo=Mark.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(e){return e.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(n,l){return["del",{"data-id":String(n.attrs.id),"data-inline":String(l),...!l&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(n){return n.dataset.id?{id:parseInt(n.dataset.id,10)}:!1}}]}}}),Zo$1=Mark.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(e){return e.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(n,l){return[l?"span":"div",{"data-type":"modification","data-id":String(n.attrs.id),"data-mod-type":n.attrs.type,"data-mod-prev-val":JSON.stringify(n.attrs.previousValue),"data-mod-new-val":JSON.stringify(n.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(n){return n.dataset.id?{id:parseInt(n.dataset.id,10),type:n.dataset.modType,previousValue:n.dataset.modPrevVal,newValue:n.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(n){return n.dataset.id?{id:parseInt(n.dataset.id,10),type:n.dataset.modType,previousValue:n.dataset.modPrevVal}:!1}}]}}}),en=Extension.create({name:"textAlignment",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>e.textAlignment==="left"?{}:{"data-text-alignment":e.textAlignment}}}}]}}),tn$1=Extension.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["table","tableCell","tableHeader"],attributes:{textColor:xo$3()}}]}}),on={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},nn$1=Node3.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:e=>{if(typeof e=="string")return!1;const n={};for(const[l,d]of Object.entries(on))e.getAttribute(d)&&(n[l]=e.getAttribute(d));return n}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:e}){var n;const l=document.createElement("div");l.className="bn-block-outer",l.setAttribute("data-node-type","blockOuter");for(const[jn,Un]of Object.entries(e))jn!=="class"&&l.setAttribute(jn,Un);const d={...((n=this.options.domAttributes)==null?void 0:n.block)||{},...e},g=document.createElement("div");g.className=D$3("bn-block",d.class),g.setAttribute("data-node-type",this.name);for(const[jn,Un]of Object.entries(d))jn!=="class"&&g.setAttribute(jn,Un);return l.appendChild(g),{dom:l,contentDOM:g}}}),sn=Node3.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:e=>typeof e=="string"?!1:e.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:e}){var n;const l={...((n=this.options.domAttributes)==null?void 0:n.blockGroup)||{},...e},d=document.createElement("div");d.className=D$3("bn-block-group",l.class),d.setAttribute("data-node-type","blockGroup");for(const[g,jn]of Object.entries(l))g!=="class"&&d.setAttribute(g,jn);return{dom:d,contentDOM:d}}}),rn=Node3.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),an=a$1(({options:e})=>({key:"collaboration",blockNoteExtensions:[fo$2(e),te$1(e),F$2(e),$(),go$2(e)]}));let fe=!1;function cn$1(e,n){const l=[extensions_exports.ClipboardTextSerializer,extensions_exports.Commands,extensions_exports.Editable,extensions_exports.FocusEvents,extensions_exports.Tabindex,Gapcursor,Q$1.configure({types:["blockContainer","columnList","column"],setIdAttribute:n.setIdAttribute}),Ko$1,Text$1,Qo$1,Xo,Zo$1,Link.extend({inclusive:!1}).configure({defaultProtocol:Co$1,protocols:fe?[]:ko$2}),...Object.values(e.schema.styleSpecs).map(d=>d.implementation.mark.configure({editor:e})),tn$1,Wo$1,en,Extension.create({name:"OverrideEscape",addKeyboardShortcuts:()=>({Escape:()=>{var d;return(d=e.getExtension(_n))!=null&&d.shown()?!1:(e.blur(),!0)}})}),rn,nn$1.configure({editor:e,domAttributes:n.domAttributes}),Yo$1.configure({editor:e,tabBehavior:n.tabBehavior}),sn.configure({domAttributes:n.domAttributes}),...Object.values(e.schema.inlineContentSpecs).filter(d=>d.config!=="link"&&d.config!=="text").map(d=>d.implementation.node.configure({editor:e})),...Object.values(e.schema.blockSpecs).flatMap(d=>[..."node"in d.implementation?[d.implementation.node.configure({editor:e,domAttributes:n.domAttributes})]:[]]),jo$1(e),Go$1(e,n.pasteHandler||(d=>d.defaultPasteHandler())),wo$1(e)];return fe=!0,l}function ln$1(e,n){const l=[po$2(),wo$2(n),I$2(n),yo$2(n),vo$2(n),So$2(),xo$2(n),f(n),Bo$2(n),_n(n),...n.trailingBlock!==!1?[Po$2()]:[]];return n.collaboration?l.push(an(n.collaboration)):l.push(bo$1()),"table"in e.schema.blockSpecs&&l.push(To$2(n)),n.animations!==!1&&l.push(Eo$2()),l}class dn{constructor(n,l){h(this,"disabledExtensions",new Set),h(this,"extensions",[]),h(this,"abortMap",new Map),h(this,"extensionFactories",new Map),h(this,"extensionPlugins",new Map),this.editor=n,this.options=l,n.onMount(()=>{for(const d of this.extensions)if(d.mount){const g=new window.AbortController,jn=d.mount({dom:n.prosemirrorView.dom,root:n.prosemirrorView.root,signal:g.signal});jn&&g.signal.addEventListener("abort",()=>{jn()}),this.abortMap.set(d,g)}}),n.onUnmount(()=>{for(const[d,g]of this.abortMap.entries())this.abortMap.delete(d),g.abort()}),this.disabledExtensions=new Set(l.disableExtensions||[]);for(const d of ln$1(this.editor,this.options))this.addExtension(d);for(const d of this.options.extensions??[])this.addExtension(d);for(const d of Object.values(this.editor.schema.blockSpecs))for(const g of d.extensions??[])this.addExtension(g)}registerExtension(n){var l;const d=[].concat(n).filter(Boolean);if(!d.length){console.warn("No extensions found to register",n);return}const g=d.map(Un=>this.addExtension(Un)).filter(Boolean),jn=new Set;for(const Un of g)Un!=null&&Un.tiptapExtensions&&console.warn(`Extension ${Un.key} has tiptap extensions, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,Un),(l=Un?.inputRules)!=null&&l.length&&console.warn(`Extension ${Un.key} has input rules, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,Un),this.getProsemirrorPluginsFromExtension(Un).plugins.forEach(zn=>{jn.add(zn)});this.updatePlugins(Un=>[...Un,...jn])}addExtension(n){let l;if(typeof n=="function"?l=n({editor:this.editor}):l=n,!(!l||this.disabledExtensions.has(l.key))){if(typeof n=="function"){const d=l[r$3];typeof d=="function"&&this.extensionFactories.set(d,l)}if(this.extensions.push(l),l.blockNoteExtensions)for(const d of l.blockNoteExtensions)this.addExtension(d);return l}}resolveExtensions(n){const l=[];if(typeof n=="function"){const d=this.extensionFactories.get(n);d&&l.push(d)}else if(Array.isArray(n))for(const d of n)l.push(...this.resolveExtensions(d));else if(typeof n=="object"&&"key"in n)l.push(n);else if(typeof n=="string"){const d=this.extensions.find(g=>g.key===n);d&&l.push(d)}return l}unregisterExtension(n){var l;const d=this.resolveExtensions(n);if(!d.length){console.warn("No extensions found to unregister",n);return}let g=!1;const jn=new Set;for(const Un of d){this.extensions=this.extensions.filter(qn=>qn!==Un),this.extensionFactories.forEach((qn,Kn)=>{qn===Un&&this.extensionFactories.delete(Kn)}),(l=this.abortMap.get(Un))==null||l.abort(),this.abortMap.delete(Un);const zn=this.extensionPlugins.get(Un);zn?.forEach(qn=>{jn.add(qn)}),this.extensionPlugins.delete(Un),Un.tiptapExtensions&&!g&&(g=!0,console.warn(`Extension ${Un.key} has tiptap extensions, but they will not be removed. Please separate the extension into multiple extensions if you want to remove them, or re-initialize the editor.`,n))}this.updatePlugins(Un=>Un.filter(zn=>!jn.has(zn)))}updatePlugins(n){const l=this.editor.prosemirrorState,d=l.reconfigure({plugins:n(l.plugins.slice())});this.editor.prosemirrorView.updateState(d)}getTiptapExtensions(){var n;const l=cn$1(this.editor,this.options).filter(jn=>!this.disabledExtensions.has(jn.name)),d=P(this.extensions),g=new Map;for(const jn of this.extensions){jn.tiptapExtensions&&l.push(...jn.tiptapExtensions);const Un=d(jn.key),{plugins:zn,inputRules:qn}=this.getProsemirrorPluginsFromExtension(jn);zn.length&&l.push(Extension.create({name:jn.key,priority:Un,addProseMirrorPlugins:()=>zn})),qn.length&&(g.has(Un)||g.set(Un,[]),g.get(Un).push(...qn))}l.push(Extension.create({name:"blocknote-input-rules",addProseMirrorPlugins(){const jn=[];return Array.from(g.keys()).sort().reverse().forEach(Un=>{jn.push(...g.get(Un))}),[inputRules({rules:jn})]}}));for(const jn of((n=this.options._tiptapOptions)==null?void 0:n.extensions)??[])l.push(jn);return l}getProsemirrorPluginsFromExtension(n){var l,d,g;const jn=[...n.prosemirrorPlugins??[]],Un=[];return!((l=n.prosemirrorPlugins)!=null&&l.length)&&!Object.keys(n.keyboardShortcuts||{}).length&&!((d=n.inputRules)!=null&&d.length)?{plugins:jn,inputRules:Un}:(this.extensionPlugins.set(n,jn),(g=n.inputRules)!=null&&g.length&&Un.push(...n.inputRules.map(zn=>new InputRule(zn.find,(qn,Kn,Xn,Qn)=>{const Jn=zn.replace({match:Kn,range:{from:Xn,to:Qn},editor:this.editor});if(Jn){const Ai=this.editor.getTextCursorPosition();if(this.editor.schema.blockSchema[Ai.block.type].content!=="inline")return null;const Ri=Ot$3(qn.tr),Ni=qn.tr.deleteRange(Xn,Qn);return K$2(Ni,Ri.bnBlock.beforePos,Jn),Ni}return null}))),Object.keys(n.keyboardShortcuts||{}).length&&jn.push(keymap(Object.fromEntries(Object.entries(n.keyboardShortcuts).map(([zn,qn])=>[zn,()=>qn({editor:this.editor})])))),{plugins:jn,inputRules:Un})}getExtensions(){return new Map(this.extensions.map(n=>[n.key,n]))}getExtension(n){if(typeof n=="string")return this.extensions.find(d=>d.key===n)||void 0;if(typeof n=="function")return this.extensionFactories.get(n)||void 0;throw new Error(`Invalid extension type: ${typeof n}`)}hasExtension(n){return typeof n=="string"?this.extensions.some(l=>l.key===n):typeof n=="object"&&"key"in n?this.extensions.some(l=>l.key===n.key):typeof n=="function"?this.extensionFactories.has(n):!1}}function un(e,n){let{$from:l,$to:d}=n;if(l.pos>l.start()&&l.pos<e.content.size){const g=e.textBetween(l.pos,l.pos+1);if(/^[\w\p{P}]$/u.test(g)){const jn=e.textBetween(l.start(),l.pos).match(/[\w\p{P}]+$/u);jn&&(l=e.resolve(l.pos-jn[0].length))}}if(d.pos<d.end()&&d.pos>0){const g=e.textBetween(d.pos-1,d.pos);if(/^[\w\p{P}]$/u.test(g)){const jn=e.textBetween(d.pos,d.end()).match(/^[\w\p{P}]+/u);jn&&(d=e.resolve(d.pos+jn[0].length))}}return{$from:l,$to:d,from:l.pos,to:d.pos}}function pn(e){const n=ht$2(e);if(e.selection.empty||"node"in e.selection)return;const l=e.doc.resolve(Y$2(e.doc,e.selection.from).posBeforeNode),d=e.doc.resolve(Y$2(e.doc,e.selection.to).posBeforeNode),g=(Kn,Xn)=>{const Qn=l.posAtIndex(Kn,Xn),Jn=e.doc.resolve(Qn).nodeAfter;if(!Jn)throw new Error(`Error getting selection - node not found at position ${Qn}`);return L$1(Jn,n)},jn=[],Un=l.sharedDepth(d.pos),zn=l.index(Un),qn=d.index(Un);if(l.depth>Un){jn.push(L$1(l.nodeAfter,n));for(let Kn=l.depth;Kn>Un;Kn--)if(l.node(Kn).type.isInGroup("childContainer")){const Xn=l.index(Kn)+1,Qn=l.node(Kn).childCount;for(let Jn=Xn;Jn<Qn;Jn++)jn.push(g(Jn,Kn))}}else jn.push(g(zn,Un));for(let Kn=zn+1;Kn<=qn;Kn++)jn.push(g(Kn,Un));if(jn.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${e.selection})`);return{blocks:jn}}function fn(e,n,l){const d=typeof n=="string"?n:n.id,g=typeof l=="string"?l:l.id,jn=ht$2(e),Un=J$2(jn);if(d===g)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${d})`);const zn=Tt$2(d,e.doc);if(!zn)throw new Error(`Block with ID ${d} not found`);const qn=Tt$2(g,e.doc);if(!qn)throw new Error(`Block with ID ${g} not found`);const Kn=Z$2(zn),Xn=Z$2(qn),Qn=Un.blockSchema[Kn.blockNoteType],Jn=Un.blockSchema[Xn.blockNoteType];if(!Kn.isBlockContainer||Qn.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${d})`);if(!Xn.isBlockContainer||Jn.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${g})`);let Ai,Ri;if(Qn.content==="table"){const Ni=TableMap.get(Kn.blockContent.node);Ai=Kn.blockContent.beforePos+Ni.positionAt(0,0,Kn.blockContent.node)+1+2}else Ai=Kn.blockContent.beforePos+1;if(Jn.content==="table"){const Ni=TableMap.get(Xn.blockContent.node),$i=Xn.blockContent.beforePos+Ni.positionAt(Ni.height-1,Ni.width-1,Xn.blockContent.node)+1,Li=e.doc.resolve($i).nodeAfter.nodeSize;Ri=$i+Li-2}else Ri=Xn.blockContent.afterPos-1;e.setSelection(TextSelection.create(e.doc,Ai,Ri))}function hn(e,n=!1){const l=ht$2(e),d=n?un(e.doc,e.selection):e.selection;let g=d.$from,jn=d.$to;for(;jn.parentOffset>=jn.parent.nodeSize-2&&jn.depth>0;)jn=e.doc.resolve(jn.pos+1);for(;jn.parentOffset===0&&jn.depth>0;)jn=e.doc.resolve(jn.pos-1);for(;g.parentOffset===0&&g.depth>0;)g=e.doc.resolve(g.pos-1);for(;g.parentOffset>=g.parent.nodeSize-2&&g.depth>0;)g=e.doc.resolve(g.pos+1);const Un=Dt$3(e.doc.slice(g.pos,jn.pos,!0),l);return{_meta:{startPos:g.pos,endPos:jn.pos},...Un}}function mn(e){const{bnBlock:n}=Ot$3(e),l=ht$2(e.doc),d=e.doc.resolve(n.beforePos),g=d.nodeBefore,jn=e.doc.resolve(n.afterPos).nodeAfter;let Un;return d.depth>1&&(Un=d.node(),Un.type.isInGroup("bnBlock")||(Un=d.node(d.depth-1))),{block:L$1(n.node,l),prevBlock:g===null?void 0:L$1(g,l),nextBlock:jn===null?void 0:L$1(jn,l),parentBlock:Un===void 0?void 0:L$1(Un,l)}}function De$1(e,n,l="start"){const d=typeof n=="string"?n:n.id,g=ht$2(e.doc),jn=J$2(g),Un=Tt$2(d,e.doc);if(!Un)throw new Error(`Block with ID ${d} not found`);const zn=Z$2(Un),qn=jn.blockSchema[zn.blockNoteType].content;if(zn.isBlockContainer){const Kn=zn.blockContent;if(qn==="none"){e.setSelection(NodeSelection.create(e.doc,Kn.beforePos));return}if(qn==="inline")l==="start"?e.setSelection(TextSelection.create(e.doc,Kn.beforePos+1)):e.setSelection(TextSelection.create(e.doc,Kn.afterPos-1));else if(qn==="table")l==="start"?e.setSelection(TextSelection.create(e.doc,Kn.beforePos+4)):e.setSelection(TextSelection.create(e.doc,Kn.afterPos-4));else throw new O$1(qn)}else{const Kn=l==="start"?zn.childContainer.node.firstChild:zn.childContainer.node.lastChild;De$1(e,Kn.attrs.id,l)}}class kn{constructor(n){this.editor=n}getSelection(){return this.editor.transact(n=>pn(n))}getSelectionCutBlocks(n=!1){return this.editor.transact(l=>hn(l,n))}setSelection(n,l){return this.editor.transact(d=>fn(d,n,l))}getTextCursorPosition(){return this.editor.transact(n=>mn(n))}setTextCursorPosition(n,l="start"){return this.editor.transact(d=>De$1(d,n,l))}getSelectionBoundingBox(){if(!this.editor.prosemirrorView)return;const{selection:n}=this.editor.prosemirrorState,{ranges:l}=n,d=Math.min(...l.map(jn=>jn.$from.pos)),g=Math.max(...l.map(jn=>jn.$to.pos));if(isNodeSelection(n)){const jn=this.editor.prosemirrorView.nodeDOM(d);if(jn)return jn.getBoundingClientRect()}return posToDOMRect(this.editor.prosemirrorView,d,g).toJSON()}}class gn{constructor(n){h(this,"activeTransaction",null),h(this,"isInCan",!1),this.editor=n}can(n){try{return this.isInCan=!0,n()}finally{this.isInCan=!1}}exec(n){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");if(this.isInCan)return this.canExec(n);const l=this.prosemirrorState,d=this.prosemirrorView;return n(l,g=>this.prosemirrorView.dispatch(g),d)}canExec(n){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const l=this.prosemirrorState,d=this.prosemirrorView;return n(l,void 0,d)}transact(n){if(this.activeTransaction)return n(this.activeTransaction);try{this.activeTransaction=this.editor._tiptapEditor.state.tr;const l=n(this.activeTransaction),d=this.activeTransaction;return this.activeTransaction=null,d&&(d.docChanged||d.selectionSet||d.scrolledIntoView||d.storedMarksSet||!d.isGeneric)&&this.prosemirrorView.dispatch(d),l}finally{this.activeTransaction=null}}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this.editor._tiptapEditor.state}get prosemirrorView(){return this.editor._tiptapEditor.view}isFocused(){var n;return((n=this.prosemirrorView)==null?void 0:n.hasFocus())||!1}focus(){var n;(n=this.prosemirrorView)==null||n.focus()}get isEditable(){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return!1}return this.editor._tiptapEditor.isEditable===void 0?!0:this.editor._tiptapEditor.isEditable}set isEditable(n){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return}this.editor._tiptapEditor.options.editable!==n&&this.editor._tiptapEditor.setEditable(n)}undo(){const n=this.editor.getExtension("yUndo");if(n)return this.exec(n.undoCommand);const l=this.editor.getExtension("history");if(l)return this.exec(l.undoCommand);throw new Error("No undo plugin found")}redo(){const n=this.editor.getExtension("yUndo");if(n)return this.exec(n.redoCommand);const l=this.editor.getExtension("history");if(l)return this.exec(l.redoCommand);throw new Error("No redo plugin found")}}function bn(e,n,l,d={updateSelection:!0}){let{from:g,to:jn}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},Un=!0,zn=!0,qn="";if(l.forEach(Kn=>{Kn.check(),Un&&Kn.isText&&Kn.marks.length===0?qn+=Kn.text:Un=!1,zn=zn?Kn.isBlock:!1}),g===jn&&zn){const{parent:Kn}=e.doc.resolve(g);Kn.isTextblock&&!Kn.type.spec.code&&!Kn.childCount&&(g-=1,jn+=1)}return Un?e.insertText(qn,g,jn):e.replaceWith(g,jn,l),d.updateSelection&&selectionToInsertionEnd(e,e.steps.length-1,-1),!0}class yn{constructor(n){this.editor=n}insertInlineContent(n,{updateSelection:l=!1}={}){const d=T$2(n,this.editor.pmSchema);this.editor.transact(g=>{bn(g,{from:g.selection.from,to:g.selection.to},d,{updateSelection:l})})}getActiveStyles(){return this.editor.transact(n=>{const l={},d=n.selection.$to.marks();for(const g of d){const jn=this.editor.schema.styleSchema[g.type.name];if(!jn){g.type.name!=="link"&&!g.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",g.type.name);continue}jn.propSchema==="boolean"?l[jn.type]=!0:l[jn.type]=g.attrs.stringValue}return l})}addStyles(n){for(const[l,d]of Object.entries(n)){const g=this.editor.schema.styleSchema[l];if(!g)throw new Error(`style ${l} not found in styleSchema`);if(g.propSchema==="boolean")this.editor._tiptapEditor.commands.setMark(l);else if(g.propSchema==="string")this.editor._tiptapEditor.commands.setMark(l,{stringValue:d});else throw new O$1(g.propSchema)}}removeStyles(n){for(const l of Object.keys(n))this.editor._tiptapEditor.commands.unsetMark(l)}toggleStyles(n){for(const[l,d]of Object.entries(n)){const g=this.editor.schema.styleSchema[l];if(!g)throw new Error(`style ${l} not found in styleSchema`);if(g.propSchema==="boolean")this.editor._tiptapEditor.commands.toggleMark(l);else if(g.propSchema==="string")this.editor._tiptapEditor.commands.toggleMark(l,{stringValue:d});else throw new O$1(g.propSchema)}}getSelectedText(){return this.editor.transact(n=>n.doc.textBetween(n.selection.from,n.selection.to))}getSelectedLinkUrl(){return this.editor._tiptapEditor.getAttributes("link").href}createLink(n,l){if(n==="")return;const d=this.editor.pmSchema.mark("link",{href:n});this.editor.transact(g=>{const{from:jn,to:Un}=g.selection;l?g.insertText(l,jn,Un).addMark(jn,jn+l.length,d):g.setSelection(TextSelection.create(g.doc,Un)).addMark(jn,Un,d)})}}function Sn(e,n){const l=[];return e.forEach((d,g,jn)=>{jn!==n&&l.push(d)}),Fragment.from(l)}function Bn(e,n){const l=[];for(let d=0;d<e.childCount;d++)if(e.child(d).type.name==="tableRow")if(l.length>0&&l[l.length-1].type.name==="table"){const g=l[l.length-1],jn=g.copy(g.content.addToEnd(e.child(d)));l[l.length-1]=jn}else{const g=n.nodes.table.createChecked(void 0,e.child(d));l.push(g)}else l.push(e.child(d));return e=Fragment.from(l),e}function Cn(e,n){let l=Fragment.from(e.content);if(l=Bn(l,n.state.schema),!xn(l,n))return new Slice(l,e.openStart,e.openEnd);for(let d=0;d<l.childCount;d++)if(l.child(d).type.spec.group==="blockContent"){const g=[l.child(d)];if(d+1<l.childCount&&l.child(d+1).type.name==="blockGroup"){const Un=l.child(d+1).child(0).child(0);(Un.type.name==="bulletListItem"||Un.type.name==="numberedListItem"||Un.type.name==="checkListItem")&&(g.push(l.child(d+1)),l=Sn(l,d+1))}const jn=n.state.schema.nodes.blockContainer.createChecked(void 0,g);l=l.replaceChild(d,jn)}return new Slice(l,e.openStart,e.openEnd)}function xn(e,n){var l,d;const g=e.childCount===1,jn=((l=e.firstChild)==null?void 0:l.type.spec.content)==="inline*",Un=((d=e.firstChild)==null?void 0:d.type.spec.content)==="tableRow+";if(g){if(jn)return!1;if(Un){const zn=Tt$3(n.state);if(zn.isBlockContainer)return zn.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const En={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let Le$1=class JT extends f$1{constructor(n){var l,d,g,jn,Un,zn,qn,Kn,Xn,Qn;super(),h(this,"pmSchema"),h(this,"_tiptapEditor"),h(this,"elementRenderer",null),h(this,"blockCache",new WeakMap),h(this,"dictionary"),h(this,"schema"),h(this,"blockImplementations"),h(this,"inlineContentImplementations"),h(this,"styleImplementations"),h(this,"uploadFile"),h(this,"onUploadStartCallbacks",[]),h(this,"onUploadEndCallbacks",[]),h(this,"resolveFileUrl"),h(this,"settings"),h(this,"_blockManager"),h(this,"_eventManager"),h(this,"_exportManager"),h(this,"_extensionManager"),h(this,"_selectionManager"),h(this,"_stateManager"),h(this,"_styleManager"),h(this,"unregisterExtension",(...ji)=>this._extensionManager.unregisterExtension(...ji)),h(this,"registerExtension",(...ji)=>this._extensionManager.registerExtension(...ji)),h(this,"getExtension",(...ji)=>this._extensionManager.getExtension(...ji)),h(this,"mount",ji=>{this._tiptapEditor.mount({mount:ji})}),h(this,"unmount",()=>{this._tiptapEditor.unmount()}),this.options=n,this.dictionary=n.dictionary||i,this.settings={tables:{splitCells:((l=n?.tables)==null?void 0:l.splitCells)??!1,cellBackgroundColor:((d=n?.tables)==null?void 0:d.cellBackgroundColor)??!1,cellTextColor:((g=n?.tables)==null?void 0:g.cellTextColor)??!1,headers:((jn=n?.tables)==null?void 0:jn.headers)??!1}};const Jn={defaultStyles:!0,schema:n.schema||h$2.create(),...n,placeholders:{...this.dictionary.placeholders,...n.placeholders}};if(this.schema=Jn.schema,this.blockImplementations=Jn.schema.blockSpecs,this.inlineContentImplementations=Jn.schema.inlineContentSpecs,this.styleImplementations=Jn.schema.styleSpecs,Jn.uploadFile){const ji=Jn.uploadFile;this.uploadFile=async(Fi,qi)=>{this.onUploadStartCallbacks.forEach(zi=>zi.apply(this,[qi]));try{return await ji(Fi,qi)}finally{this.onUploadEndCallbacks.forEach(zi=>zi.apply(this,[qi]))}}}this.resolveFileUrl=Jn.resolveFileUrl,this._eventManager=new fo$1(this),this._extensionManager=new dn(this,Jn);const Ai=this._extensionManager.getTiptapExtensions(),Ri=this._extensionManager.hasExtension("ySync")||this._extensionManager.hasExtension("liveblocksExtension");Ri&&Jn.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const Ni={...En,...Jn._tiptapOptions,element:null,autofocus:Jn.autofocus??!1,extensions:Ai,editorProps:{...(Un=Jn._tiptapOptions)==null?void 0:Un.editorProps,attributes:{tabIndex:"0",...(qn=(zn=Jn._tiptapOptions)==null?void 0:zn.editorProps)==null?void 0:qn.attributes,...(Kn=Jn.domAttributes)==null?void 0:Kn.editor,class:D$3("bn-editor",Jn.defaultStyles?"bn-default-styles":"",((Qn=(Xn=Jn.domAttributes)==null?void 0:Xn.editor)==null?void 0:Qn.class)||"")},transformPasted:Cn}};try{const ji=Jn.initialContent||(Ri?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Q$1.options.generateID()}]);if(!Array.isArray(ji)||ji.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+ji);const Fi=getSchema(Ni.extensions),qi=ji.map(Gi=>bt$3(Gi,Fi,this.schema.styleSchema).toJSON()),zi=createDocument({type:"doc",content:[{type:"blockGroup",content:qi}]},Fi,Ni.parseOptions);this._tiptapEditor=new Editor$1({...Ni,content:zi.toJSON()}),this.pmSchema=this._tiptapEditor.schema}catch(ji){throw new Error("Error creating document from blocks passed as `initialContent`",{cause:ji})}let $i;const Li=this.pmSchema.nodes.doc.createAndFill;this.pmSchema.nodes.doc.createAndFill=(...ji)=>{if($i)return $i;const Fi=Li.apply(this.pmSchema.nodes.doc,ji),qi=JSON.parse(JSON.stringify(Fi.toJSON()));return qi.content[0].content[0].attrs.id="initialBlockId",$i=Node$1.fromJSON(this.pmSchema,qi),$i},this.pmSchema.cached.blockNoteEditor=this,this._blockManager=new po$1(this),this._exportManager=new xo$1(this),this._selectionManager=new kn(this),this._stateManager=new gn(this),this._styleManager=new yn(this),this.emit("create")}static create(n){return new JT(n??{})}get extensions(){return this._extensionManager.getExtensions()}exec(n){return this._stateManager.exec(n)}canExec(n){return this._stateManager.canExec(n)}transact(n){return this._stateManager.transact(n)}get prosemirrorState(){return this._stateManager.prosemirrorState}get prosemirrorView(){return this._stateManager.prosemirrorView}get domElement(){var n;if(!this.headless)return(n=this.prosemirrorView)==null?void 0:n.dom}isFocused(){var n;return this.headless?!1:((n=this.prosemirrorView)==null?void 0:n.hasFocus())||!1}get headless(){return!this._tiptapEditor.isInitialized}focus(){this.headless||this.prosemirrorView.focus()}blur(){var n;this.headless||(n=this.domElement)==null||n.blur()}onUploadStart(n){return this.onUploadStartCallbacks.push(n),()=>{const l=this.onUploadStartCallbacks.indexOf(n);l>-1&&this.onUploadStartCallbacks.splice(l,1)}}onUploadEnd(n){return this.onUploadEndCallbacks.push(n),()=>{const l=this.onUploadEndCallbacks.indexOf(n);l>-1&&this.onUploadEndCallbacks.splice(l,1)}}get topLevelBlocks(){return this.document}get document(){return this._blockManager.document}getBlock(n){return this._blockManager.getBlock(n)}getPrevBlock(n){return this._blockManager.getPrevBlock(n)}getNextBlock(n){return this._blockManager.getNextBlock(n)}getParentBlock(n){return this._blockManager.getParentBlock(n)}forEachBlock(n,l=!1){this._blockManager.forEachBlock(n,l)}onEditorContentChange(n){this._tiptapEditor.on("update",n)}onEditorSelectionChange(n){this._tiptapEditor.on("selectionUpdate",n)}onBeforeChange(n){return this._extensionManager.getExtension(po$2).subscribe(n)}getTextCursorPosition(){return this._selectionManager.getTextCursorPosition()}setTextCursorPosition(n,l="start"){return this._selectionManager.setTextCursorPosition(n,l)}getSelection(){return this._selectionManager.getSelection()}getSelectionCutBlocks(n=!1){return this._selectionManager.getSelectionCutBlocks(n)}setSelection(n,l){return this._selectionManager.setSelection(n,l)}get isEditable(){return this._stateManager.isEditable}set isEditable(n){this._stateManager.isEditable=n}insertBlocks(n,l,d="before"){return this._blockManager.insertBlocks(n,l,d)}updateBlock(n,l){return this._blockManager.updateBlock(n,l)}removeBlocks(n){return this._blockManager.removeBlocks(n)}replaceBlocks(n,l){return this._blockManager.replaceBlocks(n,l)}undo(){return this._stateManager.undo()}redo(){return this._stateManager.redo()}insertInlineContent(n,{updateSelection:l=!1}={}){this._styleManager.insertInlineContent(n,{updateSelection:l})}getActiveStyles(){return this._styleManager.getActiveStyles()}addStyles(n){this._styleManager.addStyles(n)}removeStyles(n){this._styleManager.removeStyles(n)}toggleStyles(n){this._styleManager.toggleStyles(n)}getSelectedText(){return this._styleManager.getSelectedText()}getSelectedLinkUrl(){return this._styleManager.getSelectedLinkUrl()}createLink(n,l){this._styleManager.createLink(n,l)}canNestBlock(){return this._blockManager.canNestBlock()}nestBlock(){this._blockManager.nestBlock()}canUnnestBlock(){return this._blockManager.canUnnestBlock()}unnestBlock(){this._blockManager.unnestBlock()}moveBlocksUp(){return this._blockManager.moveBlocksUp()}moveBlocksDown(){return this._blockManager.moveBlocksDown()}blocksToHTMLLossy(n=this.document){return this._exportManager.blocksToHTMLLossy(n)}blocksToFullHTML(n=this.document){return this._exportManager.blocksToFullHTML(n)}tryParseHTMLToBlocks(n){return this._exportManager.tryParseHTMLToBlocks(n)}blocksToMarkdownLossy(n=this.document){return this._exportManager.blocksToMarkdownLossy(n)}tryParseMarkdownToBlocks(n){return this._exportManager.tryParseMarkdownToBlocks(n)}onChange(n,l){return this._eventManager.onChange(n,l)}onSelectionChange(n,l){return this._eventManager.onSelectionChange(n,l)}onMount(n){this._eventManager.onMount(n)}onUnmount(n){this._eventManager.onUnmount(n)}getSelectionBoundingBox(){return this._selectionManager.getSelectionBoundingBox()}get isEmpty(){const n=this.document;return n.length===0||n.length===1&&n[0].type==="paragraph"&&n[0].content.length===0}pasteHTML(n,l=!1){this._exportManager.pasteHTML(n,l)}pasteText(n){return this._exportManager.pasteText(n)}pasteMarkdown(n){return this._exportManager.pasteMarkdown(n)}};const scriptRel="modulepreload",assetsURL=function(e){return"/diegesis/"+e},seen={},__vitePreload=function(n,l,d){let g=Promise.resolve();if(l&&l.length>0){let Kn=function(Xn){return Promise.all(Xn.map(Qn=>Promise.resolve(Qn).then(Jn=>({status:"fulfilled",value:Jn}),Jn=>({status:"rejected",reason:Jn}))))};var Un=Kn;document.getElementsByTagName("link");const zn=document.querySelector("meta[property=csp-nonce]"),qn=zn?.nonce||zn?.getAttribute("nonce");g=Kn(l.map(Xn=>{if(Xn=assetsURL(Xn),Xn in seen)return;seen[Xn]=!0;const Qn=Xn.endsWith(".css"),Jn=Qn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Xn}"]${Jn}`))return;const Ai=document.createElement("link");if(Ai.rel=Qn?"stylesheet":scriptRel,Qn||(Ai.as="script"),Ai.crossOrigin="",Ai.href=Xn,qn&&Ai.setAttribute("nonce",qn),document.head.appendChild(Ai),Qn)return new Promise((Ri,Ni)=>{Ai.addEventListener("load",Ri),Ai.addEventListener("error",()=>Ni(new Error(`Unable to preload CSS for ${Xn}`)))})}))}function jn(zn){const qn=new Event("vite:preloadError",{cancelable:!0});if(qn.payload=zn,window.dispatchEvent(qn),!qn.defaultPrevented)throw zn}return g.then(zn=>{for(const qn of zn||[])qn.status==="rejected"&&jn(qn.reason);return n().catch(jn)})};var x=Object.defineProperty,Y=(e,n,l)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,c$1=(e,n,l)=>Y(e,typeof n!="symbol"?n+"":n,l);const M$2=Mark.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:e=>!!e.getAttribute("data-orphan"),renderHTML:e=>e.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:e=>e.getAttribute("data-bn-thread-id"),renderHTML:e=>({"data-bn-thread-id":e.threadId}),default:""}}},renderHTML({HTMLAttributes:e}){return["span",mergeAttributes(e,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(e){return e.name==="comment"?{blocknoteIgnore:!0}:{}}});let F$1=class extends f$1{constructor(n){super(),c$1(this,"userCache",new Map),c$1(this,"loadingUsers",new Set),this.resolveUsers=n}async loadUsers(n){const l=n.filter(d=>!this.userCache.has(d)&&!this.loadingUsers.has(d));if(l.length!==0){for(const d of l)this.loadingUsers.add(d);try{const d=await this.resolveUsers(l);for(const g of d)this.userCache.set(g.id,g);this.emit("update",this.userCache)}finally{for(const d of l)this.loadingUsers.delete(d)}}}getUser(n){return this.userCache.get(n)}subscribe(n){return this.on("update",n)}};const w$1=new PluginKey("blocknote-comments");function K(e,n){const l=new Map;return e.descendants((d,g)=>{d.marks.forEach(jn=>{if(jn.type.name===n){const Un=jn.attrs.threadId;if(!Un)return;const zn=g,qn=zn+d.nodeSize,Kn=l.get(Un)??{from:1/0,to:0};l.set(Un,{from:Math.min(zn,Kn.from),to:Math.max(qn,Kn.to)})}})}),l}const ne$1=a$1(({editor:e,options:{schema:n,threadStore:l,resolveUsers:d}})=>{if(!d)throw new Error("resolveUsers is required to be defined when using comments");if(!l)throw new Error("threadStore is required to be defined when using comments");const g=M$2.name,jn=new F$1(d),Un=f$3({pendingComment:!1,selectedThreadId:void 0,threadPositions:new Map},{onUpdate(){Un.state.selectedThreadId!==Un.prevState.selectedThreadId&&e.transact(qn=>qn.setMeta(w$1,!0))}}),zn=qn=>{e.transact(Kn=>{Kn.doc.descendants((Xn,Qn)=>{Xn.marks.forEach(Jn=>{if(Jn.type.name===g){const Ai=Jn.type,Ri=Jn.attrs.threadId,Ni=qn.get(Ri),$i=!!(!Ni||Ni.resolved||Ni.deletedAt);if($i!==Jn.attrs.orphan){const Li=Math.max(Qn,0),ji=Math.min(Qn+Xn.nodeSize,Kn.doc.content.size-1,Kn.doc.content.size-1);Kn.removeMark(Li,ji,Jn),Kn.addMark(Li,ji,Ai.create({...Jn.attrs,orphan:$i})),$i&&Un.state.selectedThreadId===Ri&&Un.setState(Fi=>({...Fi,selectedThreadId:void 0}))}}})})})};return{key:"comments",store:Un,prosemirrorPlugins:[new Plugin({key:w$1,state:{init(){return{decorations:DecorationSet.empty}},apply(qn,Kn){const Xn=qn.getMeta(w$1);if(!qn.docChanged&&!Xn)return Kn;const Qn=qn.docChanged?K(qn.doc,g):Un.state.threadPositions;(Qn.size>0||Un.state.threadPositions.size>0)&&Un.setState(Ai=>({...Ai,threadPositions:Qn}));const Jn=[];if(Un.state.selectedThreadId){const Ai=Qn.get(Un.state.selectedThreadId);Ai&&Jn.push(Decoration.inline(Ai.from,Ai.to,{class:"bn-thread-mark-selected"}))}return{decorations:DecorationSet.create(qn.doc,Jn)}}},props:{decorations(qn){var Kn;return((Kn=w$1.getState(qn))==null?void 0:Kn.decorations)??DecorationSet.empty},handleClick:(qn,Kn,Xn)=>{if(Xn.button!==0)return;const Qn=qn.state.doc.nodeAt(Kn);if(!Qn){Un.setState(Ri=>({...Ri,selectedThreadId:void 0}));return}const Jn=Qn.marks.find(Ri=>Ri.type.name===g&&Ri.attrs.orphan!==!0),Ai=Jn?.attrs.threadId;Ai!==Un.state.selectedThreadId&&Un.setState(Ri=>({...Ri,selectedThreadId:Ai}))}}})],threadStore:l,mount(){const qn=l.subscribe(zn);zn(l.getThreads());const Kn=e.onSelectionChange(()=>{Un.state.pendingComment&&Un.setState(Xn=>({...Xn,pendingComment:!1}))});return()=>{qn(),Kn()}},selectThread(qn,Kn=!0){var Xn,Qn;if(Un.state.selectedThreadId!==qn&&(Un.setState(Jn=>({...Jn,pendingComment:!1,selectedThreadId:qn})),qn&&Kn)){const Jn=Un.state.threadPositions.get(qn);if(!Jn)return;(Qn=(Xn=e.prosemirrorView)==null?void 0:Xn.domAtPos(Jn.from).node)==null||Qn.scrollIntoView({behavior:"smooth",block:"center"})}},startPendingComment(){var qn;Un.setState(Kn=>({...Kn,selectedThreadId:void 0,pendingComment:!0})),(qn=e.getExtension(f))==null||qn.showSelection(!0)},stopPendingComment(){var qn;Un.setState(Kn=>({...Kn,selectedThreadId:void 0,pendingComment:!1})),(qn=e.getExtension(f))==null||qn.showSelection(!1)},async createThread(qn){const Kn=await l.createThread(qn);if(l.addThreadToDocument){const Xn=e.prosemirrorView,Qn=Xn.state.selection,Jn=ySyncPluginKey.getState(Xn.state),Ai={prosemirror:{head:Qn.head,anchor:Qn.anchor},yjs:Jn?getRelativeSelection(Jn.binding,Xn.state):void 0};await l.addThreadToDocument({threadId:Kn.id,selection:Ai})}else e._tiptapEditor.commands.setMark(g,{orphan:!1,threadId:Kn.id})},userStore:jn,commentEditorSchema:n,tiptapExtensions:[M$2]}});let o;async function r$1(){return o||(o=(async()=>{const[e,n]=await Promise.all([__vitePreload(()=>import("./module-RjUF93sV.js"),[]),__vitePreload(()=>import("./native-48B9X9Wg.js"),[])]),l="default"in e?e.default:e,d="default"in n?n.default:n;return await l.init({data:d}),{emojiMart:l,emojiData:d}})(),o)}async function c(e,n){if(!("text"in e.schema.inlineContentSchema)||e.schema.inlineContentSchema.text!==Ho$2.text)return[];const{emojiData:l,emojiMart:d}=await r$1();return(n.trim()===""?Object.values(l.emojis):await d.SearchIndex.search(n)).map(g=>({id:g.skins[0].native,onItemClick:()=>e.insertInlineContent(g.skins[0].native+" ")}))}function hasWindow(){return typeof window<"u"}function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function getDocumentElement(e){var n;return(n=(isNode(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function isNode(e){return hasWindow()?e instanceof Node||e instanceof getWindow(e).Node:!1}function isElement$1(e){return hasWindow()?e instanceof Element||e instanceof getWindow(e).Element:!1}function isHTMLElement(e){return hasWindow()?e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement:!1}function isShadowRoot(e){return!hasWindow()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(e){const{overflow:n,overflowX:l,overflowY:d,display:g}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(n+d+l)&&!invalidOverflowDisplayValues.has(g)}const tableElements=new Set(["table","td","th"]);function isTableElement(e){return tableElements.has(getNodeName(e))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(e){return topLayerSelectors.some(n=>{try{return e.matches(n)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(e){const n=isWebKit(),l=isElement$1(e)?getComputedStyle$1(e):e;return transformProperties.some(d=>l[d]?l[d]!=="none":!1)||(l.containerType?l.containerType!=="normal":!1)||!n&&(l.backdropFilter?l.backdropFilter!=="none":!1)||!n&&(l.filter?l.filter!=="none":!1)||willChangeValues.some(d=>(l.willChange||"").includes(d))||containValues.some(d=>(l.contain||"").includes(d))}function getContainingBlock(e){let n=getParentNode(e);for(;isHTMLElement(n)&&!isLastTraversableNode(n);){if(isContainingBlock(n))return n;if(isTopLayer(n))return null;n=getParentNode(n)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(e){return lastTraversableNodeNames.has(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement$1(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode(e){if(getNodeName(e)==="html")return e;const n=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(n)?n.host:n}function getNearestOverflowAncestor(e){const n=getParentNode(e);return isLastTraversableNode(n)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement(n)&&isOverflowElement(n)?n:getNearestOverflowAncestor(n)}function getOverflowAncestors(e,n,l){var d;n===void 0&&(n=[]),l===void 0&&(l=!0);const g=getNearestOverflowAncestor(e),jn=g===((d=e.ownerDocument)==null?void 0:d.body),Un=getWindow(g);if(jn){const zn=getFrameElement(Un);return n.concat(Un,Un.visualViewport||[],isOverflowElement(g)?g:[],zn&&l?getOverflowAncestors(zn):[])}return n.concat(g,getOverflowAncestors(g,[],l))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const sides=["top","right","bottom","left"],alignments=["start","end"],placements=sides.reduce((e,n)=>e.concat(n,n+"-"+alignments[0],n+"-"+alignments[1]),[]),min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=e=>({x:e,y:e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(e,n,l){return max(e,min(n,l))}function evaluate(e,n){return typeof e=="function"?e(n):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return e==="x"?"y":"x"}function getAxisLength(e){return e==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(e){return yAxisSides.has(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getAlignmentSides(e,n,l){l===void 0&&(l=!1);const d=getAlignment(e),g=getAlignmentAxis(e),jn=getAxisLength(g);let Un=g==="x"?d===(l?"end":"start")?"right":"left":d==="start"?"bottom":"top";return n.reference[jn]>n.floating[jn]&&(Un=getOppositePlacement(Un)),[Un,getOppositePlacement(Un)]}function getExpandedPlacements(e){const n=getOppositePlacement(e);return[getOppositeAlignmentPlacement(e),n,getOppositeAlignmentPlacement(n)]}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,n=>oppositeAlignmentMap[n])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(e,n,l){switch(e){case"top":case"bottom":return l?n?rlPlacement:lrPlacement:n?lrPlacement:rlPlacement;case"left":case"right":return n?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(e,n,l,d){const g=getAlignment(e);let jn=getSideList(getSide(e),l==="start",d);return g&&(jn=jn.map(Un=>Un+"-"+g),n&&(jn=jn.concat(jn.map(getOppositeAlignmentPlacement)))),jn}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,n=>oppositeSideMap[n])}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return typeof e!="number"?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){const{x:n,y:l,width:d,height:g}=e;return{width:d,height:g,top:l,left:n,right:n+d,bottom:l+g,x:n,y:l}}function getPlatform(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function getUserAgent(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:l,version:d}=n;return l+"/"+d}).join(" "):navigator.userAgent}function isSafari(){return/apple/i.test(navigator.vendor)}function isMac(){return getPlatform().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function isJSDOM(){return getUserAgent().includes("jsdom/")}const FOCUSABLE_ATTRIBUTE$1="data-floating-ui-focusable",TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function activeElement(e){let n=e.activeElement;for(;((l=n)==null||(l=l.shadowRoot)==null?void 0:l.activeElement)!=null;){var l;n=n.shadowRoot.activeElement}return n}function contains$1(e,n){if(!e||!n)return!1;const l=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(l&&isShadowRoot(l)){let d=n;for(;d;){if(e===d)return!0;d=d.parentNode||d.host}}return!1}function getTarget$1(e){return"composedPath"in e?e.composedPath()[0]:e.target}function isEventTargetWithin(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const l=e;return l.target!=null&&n.contains(l.target)}function isRootElement(e){return e.matches("html,body")}function getDocument(e){return e?.ownerDocument||document}function isTypeableElement(e){return isHTMLElement(e)&&e.matches(TYPEABLE_SELECTOR)}function matchesFocusVisible(e){if(!e||isJSDOM())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function getFloatingFocusElement(e){return e?e.hasAttribute(FOCUSABLE_ATTRIBUTE$1)?e:e.querySelector("["+FOCUSABLE_ATTRIBUTE$1+"]")||e:null}function getNodeChildren$1(e,n,l){return l===void 0&&(l=!0),e.filter(g=>{var jn;return g.parentId===n&&(!l||((jn=g.context)==null?void 0:jn.open))}).flatMap(g=>[g,...getNodeChildren$1(e,g.id,l)])}function isReactEvent(e){return"nativeEvent"in e}function isMouseLikePointerType(e,n){const l=["mouse","pen"];return l.push("",void 0),l.includes(e)}var isClient$1=typeof document<"u",noop$2=function(){},index$1=isClient$1?reactExports.useLayoutEffect:noop$2;const SafeReact$1={...React$1};function useLatestRef$1(e){const n=reactExports.useRef(e);return index$1(()=>{n.current=e}),n}const useInsertionEffect=SafeReact$1.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(e=>e());function useEffectEvent(e){const n=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{n.current=e}),reactExports.useCallback(function(){for(var l=arguments.length,d=new Array(l),g=0;g<l;g++)d[g]=arguments[g];return n.current==null?void 0:n.current(...d)},[])}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function computeCoordsFromPlacement(e,n,l){let{reference:d,floating:g}=e;const jn=getSideAxis(n),Un=getAlignmentAxis(n),zn=getAxisLength(Un),qn=getSide(n),Kn=jn==="y",Xn=d.x+d.width/2-g.width/2,Qn=d.y+d.height/2-g.height/2,Jn=d[zn]/2-g[zn]/2;let Ai;switch(qn){case"top":Ai={x:Xn,y:d.y-g.height};break;case"bottom":Ai={x:Xn,y:d.y+d.height};break;case"right":Ai={x:d.x+d.width,y:Qn};break;case"left":Ai={x:d.x-g.width,y:Qn};break;default:Ai={x:d.x,y:d.y}}switch(getAlignment(n)){case"start":Ai[Un]-=Jn*(l&&Kn?-1:1);break;case"end":Ai[Un]+=Jn*(l&&Kn?-1:1);break}return Ai}const computePosition$1=async(e,n,l)=>{const{placement:d="bottom",strategy:g="absolute",middleware:jn=[],platform:Un}=l,zn=jn.filter(Boolean),qn=await(Un.isRTL==null?void 0:Un.isRTL(n));let Kn=await Un.getElementRects({reference:e,floating:n,strategy:g}),{x:Xn,y:Qn}=computeCoordsFromPlacement(Kn,d,qn),Jn=d,Ai={},Ri=0;for(let Ni=0;Ni<zn.length;Ni++){const{name:$i,fn:Li}=zn[Ni],{x:ji,y:Fi,data:qi,reset:zi}=await Li({x:Xn,y:Qn,initialPlacement:d,placement:Jn,strategy:g,middlewareData:Ai,rects:Kn,platform:Un,elements:{reference:e,floating:n}});Xn=ji??Xn,Qn=Fi??Qn,Ai={...Ai,[$i]:{...Ai[$i],...qi}},zi&&Ri<=50&&(Ri++,typeof zi=="object"&&(zi.placement&&(Jn=zi.placement),zi.rects&&(Kn=zi.rects===!0?await Un.getElementRects({reference:e,floating:n,strategy:g}):zi.rects),{x:Xn,y:Qn}=computeCoordsFromPlacement(Kn,Jn,qn)),Ni=-1)}return{x:Xn,y:Qn,placement:Jn,strategy:g,middlewareData:Ai}};async function detectOverflow(e,n){var l;n===void 0&&(n={});const{x:d,y:g,platform:jn,rects:Un,elements:zn,strategy:qn}=e,{boundary:Kn="clippingAncestors",rootBoundary:Xn="viewport",elementContext:Qn="floating",altBoundary:Jn=!1,padding:Ai=0}=evaluate(n,e),Ri=getPaddingObject(Ai),$i=zn[Jn?Qn==="floating"?"reference":"floating":Qn],Li=rectToClientRect(await jn.getClippingRect({element:(l=await(jn.isElement==null?void 0:jn.isElement($i)))==null||l?$i:$i.contextElement||await(jn.getDocumentElement==null?void 0:jn.getDocumentElement(zn.floating)),boundary:Kn,rootBoundary:Xn,strategy:qn})),ji=Qn==="floating"?{x:d,y:g,width:Un.floating.width,height:Un.floating.height}:Un.reference,Fi=await(jn.getOffsetParent==null?void 0:jn.getOffsetParent(zn.floating)),qi=await(jn.isElement==null?void 0:jn.isElement(Fi))?await(jn.getScale==null?void 0:jn.getScale(Fi))||{x:1,y:1}:{x:1,y:1},zi=rectToClientRect(jn.convertOffsetParentRelativeRectToViewportRelativeRect?await jn.convertOffsetParentRelativeRectToViewportRelativeRect({elements:zn,rect:ji,offsetParent:Fi,strategy:qn}):ji);return{top:(Li.top-zi.top+Ri.top)/qi.y,bottom:(zi.bottom-Li.bottom+Ri.bottom)/qi.y,left:(Li.left-zi.left+Ri.left)/qi.x,right:(zi.right-Li.right+Ri.right)/qi.x}}const arrow$3=e=>({name:"arrow",options:e,async fn(n){const{x:l,y:d,placement:g,rects:jn,platform:Un,elements:zn,middlewareData:qn}=n,{element:Kn,padding:Xn=0}=evaluate(e,n)||{};if(Kn==null)return{};const Qn=getPaddingObject(Xn),Jn={x:l,y:d},Ai=getAlignmentAxis(g),Ri=getAxisLength(Ai),Ni=await Un.getDimensions(Kn),$i=Ai==="y",Li=$i?"top":"left",ji=$i?"bottom":"right",Fi=$i?"clientHeight":"clientWidth",qi=jn.reference[Ri]+jn.reference[Ai]-Jn[Ai]-jn.floating[Ri],zi=Jn[Ai]-jn.reference[Ai],Gi=await(Un.getOffsetParent==null?void 0:Un.getOffsetParent(Kn));let Xi=Gi?Gi[Fi]:0;(!Xi||!await(Un.isElement==null?void 0:Un.isElement(Gi)))&&(Xi=zn.floating[Fi]||jn.floating[Ri]);const as=qi/2-zi/2,ls=Xi/2-Ni[Ri]/2-1,Zi=min(Qn[Li],ls),gs=min(Qn[ji],ls),bs=Zi,Ss=Xi-Ni[Ri]-gs,ss=Xi/2-Ni[Ri]/2+as,Es=clamp(bs,ss,Ss),rs=!qn.arrow&&getAlignment(g)!=null&&ss!==Es&&jn.reference[Ri]/2-(ss<bs?Zi:gs)-Ni[Ri]/2<0,cs=rs?ss<bs?ss-bs:ss-Ss:0;return{[Ai]:Jn[Ai]+cs,data:{[Ai]:Es,centerOffset:ss-Es-cs,...rs&&{alignmentOffset:cs}},reset:rs}}});function getPlacementList(e,n,l){return(e?[...l.filter(g=>getAlignment(g)===e),...l.filter(g=>getAlignment(g)!==e)]:l.filter(g=>getSide(g)===g)).filter(g=>e?getAlignment(g)===e||(n?getOppositeAlignmentPlacement(g)!==g:!1):!0)}const autoPlacement$2=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(n){var l,d,g;const{rects:jn,middlewareData:Un,placement:zn,platform:qn,elements:Kn}=n,{crossAxis:Xn=!1,alignment:Qn,allowedPlacements:Jn=placements,autoAlignment:Ai=!0,...Ri}=evaluate(e,n),Ni=Qn!==void 0||Jn===placements?getPlacementList(Qn||null,Ai,Jn):Jn,$i=await detectOverflow(n,Ri),Li=((l=Un.autoPlacement)==null?void 0:l.index)||0,ji=Ni[Li];if(ji==null)return{};const Fi=getAlignmentSides(ji,jn,await(qn.isRTL==null?void 0:qn.isRTL(Kn.floating)));if(zn!==ji)return{reset:{placement:Ni[0]}};const qi=[$i[getSide(ji)],$i[Fi[0]],$i[Fi[1]]],zi=[...((d=Un.autoPlacement)==null?void 0:d.overflows)||[],{placement:ji,overflows:qi}],Gi=Ni[Li+1];if(Gi)return{data:{index:Li+1,overflows:zi},reset:{placement:Gi}};const Xi=zi.map(Zi=>{const gs=getAlignment(Zi.placement);return[Zi.placement,gs&&Xn?Zi.overflows.slice(0,2).reduce((bs,Ss)=>bs+Ss,0):Zi.overflows[0],Zi.overflows]}).sort((Zi,gs)=>Zi[1]-gs[1]),ls=((g=Xi.filter(Zi=>Zi[2].slice(0,getAlignment(Zi[0])?2:3).every(gs=>gs<=0))[0])==null?void 0:g[0])||Xi[0][0];return ls!==zn?{data:{index:Li+1,overflows:zi},reset:{placement:ls}}:{}}}},flip$2=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var l,d;const{placement:g,middlewareData:jn,rects:Un,initialPlacement:zn,platform:qn,elements:Kn}=n,{mainAxis:Xn=!0,crossAxis:Qn=!0,fallbackPlacements:Jn,fallbackStrategy:Ai="bestFit",fallbackAxisSideDirection:Ri="none",flipAlignment:Ni=!0,...$i}=evaluate(e,n);if((l=jn.arrow)!=null&&l.alignmentOffset)return{};const Li=getSide(g),ji=getSideAxis(zn),Fi=getSide(zn)===zn,qi=await(qn.isRTL==null?void 0:qn.isRTL(Kn.floating)),zi=Jn||(Fi||!Ni?[getOppositePlacement(zn)]:getExpandedPlacements(zn)),Gi=Ri!=="none";!Jn&&Gi&&zi.push(...getOppositeAxisPlacements(zn,Ni,Ri,qi));const Xi=[zn,...zi],as=await detectOverflow(n,$i),ls=[];let Zi=((d=jn.flip)==null?void 0:d.overflows)||[];if(Xn&&ls.push(as[Li]),Qn){const ss=getAlignmentSides(g,Un,qi);ls.push(as[ss[0]],as[ss[1]])}if(Zi=[...Zi,{placement:g,overflows:ls}],!ls.every(ss=>ss<=0)){var gs,bs;const ss=(((gs=jn.flip)==null?void 0:gs.index)||0)+1,Es=Xi[ss];if(Es&&(!(Qn==="alignment"?ji!==getSideAxis(Es):!1)||Zi.every(ds=>getSideAxis(ds.placement)===ji?ds.overflows[0]>0:!0)))return{data:{index:ss,overflows:Zi},reset:{placement:Es}};let rs=(bs=Zi.filter(cs=>cs.overflows[0]<=0).sort((cs,ds)=>cs.overflows[1]-ds.overflows[1])[0])==null?void 0:bs.placement;if(!rs)switch(Ai){case"bestFit":{var Ss;const cs=(Ss=Zi.filter(ds=>{if(Gi){const Cs=getSideAxis(ds.placement);return Cs===ji||Cs==="y"}return!0}).map(ds=>[ds.placement,ds.overflows.filter(Cs=>Cs>0).reduce((Cs,Wi)=>Cs+Wi,0)]).sort((ds,Cs)=>ds[1]-Cs[1])[0])==null?void 0:Ss[0];cs&&(rs=cs);break}case"initialPlacement":rs=zn;break}if(g!==rs)return{reset:{placement:rs}}}return{}}}};function getSideOffsets(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function isAnySideFullyClipped(e){return sides.some(n=>e[n]>=0)}const hide$2=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:l}=n,{strategy:d="referenceHidden",...g}=evaluate(e,n);switch(d){case"referenceHidden":{const jn=await detectOverflow(n,{...g,elementContext:"reference"}),Un=getSideOffsets(jn,l.reference);return{data:{referenceHiddenOffsets:Un,referenceHidden:isAnySideFullyClipped(Un)}}}case"escaped":{const jn=await detectOverflow(n,{...g,altBoundary:!0}),Un=getSideOffsets(jn,l.floating);return{data:{escapedOffsets:Un,escaped:isAnySideFullyClipped(Un)}}}default:return{}}}}};function getBoundingRect(e){const n=min(...e.map(jn=>jn.left)),l=min(...e.map(jn=>jn.top)),d=max(...e.map(jn=>jn.right)),g=max(...e.map(jn=>jn.bottom));return{x:n,y:l,width:d-n,height:g-l}}function getRectsByLine(e){const n=e.slice().sort((g,jn)=>g.y-jn.y),l=[];let d=null;for(let g=0;g<n.length;g++){const jn=n[g];!d||jn.y-d.y>d.height/2?l.push([jn]):l[l.length-1].push(jn),d=jn}return l.map(g=>rectToClientRect(getBoundingRect(g)))}const inline$2=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(n){const{placement:l,elements:d,rects:g,platform:jn,strategy:Un}=n,{padding:zn=2,x:qn,y:Kn}=evaluate(e,n),Xn=Array.from(await(jn.getClientRects==null?void 0:jn.getClientRects(d.reference))||[]),Qn=getRectsByLine(Xn),Jn=rectToClientRect(getBoundingRect(Xn)),Ai=getPaddingObject(zn);function Ri(){if(Qn.length===2&&Qn[0].left>Qn[1].right&&qn!=null&&Kn!=null)return Qn.find($i=>qn>$i.left-Ai.left&&qn<$i.right+Ai.right&&Kn>$i.top-Ai.top&&Kn<$i.bottom+Ai.bottom)||Jn;if(Qn.length>=2){if(getSideAxis(l)==="y"){const Zi=Qn[0],gs=Qn[Qn.length-1],bs=getSide(l)==="top",Ss=Zi.top,ss=gs.bottom,Es=bs?Zi.left:gs.left,rs=bs?Zi.right:gs.right,cs=rs-Es,ds=ss-Ss;return{top:Ss,bottom:ss,left:Es,right:rs,width:cs,height:ds,x:Es,y:Ss}}const $i=getSide(l)==="left",Li=max(...Qn.map(Zi=>Zi.right)),ji=min(...Qn.map(Zi=>Zi.left)),Fi=Qn.filter(Zi=>$i?Zi.left===ji:Zi.right===Li),qi=Fi[0].top,zi=Fi[Fi.length-1].bottom,Gi=ji,Xi=Li,as=Xi-Gi,ls=zi-qi;return{top:qi,bottom:zi,left:Gi,right:Xi,width:as,height:ls,x:Gi,y:qi}}return Jn}const Ni=await jn.getElementRects({reference:{getBoundingClientRect:Ri},floating:d.floating,strategy:Un});return g.reference.x!==Ni.reference.x||g.reference.y!==Ni.reference.y||g.reference.width!==Ni.reference.width||g.reference.height!==Ni.reference.height?{reset:{rects:Ni}}:{}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(e,n){const{placement:l,platform:d,elements:g}=e,jn=await(d.isRTL==null?void 0:d.isRTL(g.floating)),Un=getSide(l),zn=getAlignment(l),qn=getSideAxis(l)==="y",Kn=originSides.has(Un)?-1:1,Xn=jn&&qn?-1:1,Qn=evaluate(n,e);let{mainAxis:Jn,crossAxis:Ai,alignmentAxis:Ri}=typeof Qn=="number"?{mainAxis:Qn,crossAxis:0,alignmentAxis:null}:{mainAxis:Qn.mainAxis||0,crossAxis:Qn.crossAxis||0,alignmentAxis:Qn.alignmentAxis};return zn&&typeof Ri=="number"&&(Ai=zn==="end"?Ri*-1:Ri),qn?{x:Ai*Xn,y:Jn*Kn}:{x:Jn*Kn,y:Ai*Xn}}const offset$2=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var l,d;const{x:g,y:jn,placement:Un,middlewareData:zn}=n,qn=await convertValueToCoords(n,e);return Un===((l=zn.offset)==null?void 0:l.placement)&&(d=zn.arrow)!=null&&d.alignmentOffset?{}:{x:g+qn.x,y:jn+qn.y,data:{...qn,placement:Un}}}}},shift$2=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:l,y:d,placement:g}=n,{mainAxis:jn=!0,crossAxis:Un=!1,limiter:zn={fn:$i=>{let{x:Li,y:ji}=$i;return{x:Li,y:ji}}},...qn}=evaluate(e,n),Kn={x:l,y:d},Xn=await detectOverflow(n,qn),Qn=getSideAxis(getSide(g)),Jn=getOppositeAxis(Qn);let Ai=Kn[Jn],Ri=Kn[Qn];if(jn){const $i=Jn==="y"?"top":"left",Li=Jn==="y"?"bottom":"right",ji=Ai+Xn[$i],Fi=Ai-Xn[Li];Ai=clamp(ji,Ai,Fi)}if(Un){const $i=Qn==="y"?"top":"left",Li=Qn==="y"?"bottom":"right",ji=Ri+Xn[$i],Fi=Ri-Xn[Li];Ri=clamp(ji,Ri,Fi)}const Ni=zn.fn({...n,[Jn]:Ai,[Qn]:Ri});return{...Ni,data:{x:Ni.x-l,y:Ni.y-d,enabled:{[Jn]:jn,[Qn]:Un}}}}}},limitShift$2=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:l,y:d,placement:g,rects:jn,middlewareData:Un}=n,{offset:zn=0,mainAxis:qn=!0,crossAxis:Kn=!0}=evaluate(e,n),Xn={x:l,y:d},Qn=getSideAxis(g),Jn=getOppositeAxis(Qn);let Ai=Xn[Jn],Ri=Xn[Qn];const Ni=evaluate(zn,n),$i=typeof Ni=="number"?{mainAxis:Ni,crossAxis:0}:{mainAxis:0,crossAxis:0,...Ni};if(qn){const Fi=Jn==="y"?"height":"width",qi=jn.reference[Jn]-jn.floating[Fi]+$i.mainAxis,zi=jn.reference[Jn]+jn.reference[Fi]-$i.mainAxis;Ai<qi?Ai=qi:Ai>zi&&(Ai=zi)}if(Kn){var Li,ji;const Fi=Jn==="y"?"width":"height",qi=originSides.has(getSide(g)),zi=jn.reference[Qn]-jn.floating[Fi]+(qi&&((Li=Un.offset)==null?void 0:Li[Qn])||0)+(qi?0:$i.crossAxis),Gi=jn.reference[Qn]+jn.reference[Fi]+(qi?0:((ji=Un.offset)==null?void 0:ji[Qn])||0)-(qi?$i.crossAxis:0);Ri<zi?Ri=zi:Ri>Gi&&(Ri=Gi)}return{[Jn]:Ai,[Qn]:Ri}}}},size$2=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var l,d;const{placement:g,rects:jn,platform:Un,elements:zn}=n,{apply:qn=()=>{},...Kn}=evaluate(e,n),Xn=await detectOverflow(n,Kn),Qn=getSide(g),Jn=getAlignment(g),Ai=getSideAxis(g)==="y",{width:Ri,height:Ni}=jn.floating;let $i,Li;Qn==="top"||Qn==="bottom"?($i=Qn,Li=Jn===(await(Un.isRTL==null?void 0:Un.isRTL(zn.floating))?"start":"end")?"left":"right"):(Li=Qn,$i=Jn==="end"?"top":"bottom");const ji=Ni-Xn.top-Xn.bottom,Fi=Ri-Xn.left-Xn.right,qi=min(Ni-Xn[$i],ji),zi=min(Ri-Xn[Li],Fi),Gi=!n.middlewareData.shift;let Xi=qi,as=zi;if((l=n.middlewareData.shift)!=null&&l.enabled.x&&(as=Fi),(d=n.middlewareData.shift)!=null&&d.enabled.y&&(Xi=ji),Gi&&!Jn){const Zi=max(Xn.left,0),gs=max(Xn.right,0),bs=max(Xn.top,0),Ss=max(Xn.bottom,0);Ai?as=Ri-2*(Zi!==0||gs!==0?Zi+gs:max(Xn.left,Xn.right)):Xi=Ni-2*(bs!==0||Ss!==0?bs+Ss:max(Xn.top,Xn.bottom))}await qn({...n,availableWidth:as,availableHeight:Xi});const ls=await Un.getDimensions(zn.floating);return Ri!==ls.width||Ni!==ls.height?{reset:{rects:!0}}:{}}}};function getCssDimensions(e){const n=getComputedStyle$1(e);let l=parseFloat(n.width)||0,d=parseFloat(n.height)||0;const g=isHTMLElement(e),jn=g?e.offsetWidth:l,Un=g?e.offsetHeight:d,zn=round(l)!==jn||round(d)!==Un;return zn&&(l=jn,d=Un),{width:l,height:d,$:zn}}function unwrapElement(e){return isElement$1(e)?e:e.contextElement}function getScale(e){const n=unwrapElement(e);if(!isHTMLElement(n))return createCoords(1);const l=n.getBoundingClientRect(),{width:d,height:g,$:jn}=getCssDimensions(n);let Un=(jn?round(l.width):l.width)/d,zn=(jn?round(l.height):l.height)/g;return(!Un||!Number.isFinite(Un))&&(Un=1),(!zn||!Number.isFinite(zn))&&(zn=1),{x:Un,y:zn}}const noOffsets=createCoords(0);function getVisualOffsets(e){const n=getWindow(e);return!isWebKit()||!n.visualViewport?noOffsets:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function shouldAddVisualOffsets(e,n,l){return n===void 0&&(n=!1),!l||n&&l!==getWindow(e)?!1:n}function getBoundingClientRect(e,n,l,d){n===void 0&&(n=!1),l===void 0&&(l=!1);const g=e.getBoundingClientRect(),jn=unwrapElement(e);let Un=createCoords(1);n&&(d?isElement$1(d)&&(Un=getScale(d)):Un=getScale(e));const zn=shouldAddVisualOffsets(jn,l,d)?getVisualOffsets(jn):createCoords(0);let qn=(g.left+zn.x)/Un.x,Kn=(g.top+zn.y)/Un.y,Xn=g.width/Un.x,Qn=g.height/Un.y;if(jn){const Jn=getWindow(jn),Ai=d&&isElement$1(d)?getWindow(d):d;let Ri=Jn,Ni=getFrameElement(Ri);for(;Ni&&d&&Ai!==Ri;){const $i=getScale(Ni),Li=Ni.getBoundingClientRect(),ji=getComputedStyle$1(Ni),Fi=Li.left+(Ni.clientLeft+parseFloat(ji.paddingLeft))*$i.x,qi=Li.top+(Ni.clientTop+parseFloat(ji.paddingTop))*$i.y;qn*=$i.x,Kn*=$i.y,Xn*=$i.x,Qn*=$i.y,qn+=Fi,Kn+=qi,Ri=getWindow(Ni),Ni=getFrameElement(Ri)}}return rectToClientRect({width:Xn,height:Qn,x:qn,y:Kn})}function getWindowScrollBarX(e,n){const l=getNodeScroll(e).scrollLeft;return n?n.left+l:getBoundingClientRect(getDocumentElement(e)).left+l}function getHTMLOffset(e,n){const l=e.getBoundingClientRect(),d=l.left+n.scrollLeft-getWindowScrollBarX(e,l),g=l.top+n.scrollTop;return{x:d,y:g}}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:n,rect:l,offsetParent:d,strategy:g}=e;const jn=g==="fixed",Un=getDocumentElement(d),zn=n?isTopLayer(n.floating):!1;if(d===Un||zn&&jn)return l;let qn={scrollLeft:0,scrollTop:0},Kn=createCoords(1);const Xn=createCoords(0),Qn=isHTMLElement(d);if((Qn||!Qn&&!jn)&&((getNodeName(d)!=="body"||isOverflowElement(Un))&&(qn=getNodeScroll(d)),isHTMLElement(d))){const Ai=getBoundingClientRect(d);Kn=getScale(d),Xn.x=Ai.x+d.clientLeft,Xn.y=Ai.y+d.clientTop}const Jn=Un&&!Qn&&!jn?getHTMLOffset(Un,qn):createCoords(0);return{width:l.width*Kn.x,height:l.height*Kn.y,x:l.x*Kn.x-qn.scrollLeft*Kn.x+Xn.x+Jn.x,y:l.y*Kn.y-qn.scrollTop*Kn.y+Xn.y+Jn.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getDocumentRect(e){const n=getDocumentElement(e),l=getNodeScroll(e),d=e.ownerDocument.body,g=max(n.scrollWidth,n.clientWidth,d.scrollWidth,d.clientWidth),jn=max(n.scrollHeight,n.clientHeight,d.scrollHeight,d.clientHeight);let Un=-l.scrollLeft+getWindowScrollBarX(e);const zn=-l.scrollTop;return getComputedStyle$1(d).direction==="rtl"&&(Un+=max(n.clientWidth,d.clientWidth)-g),{width:g,height:jn,x:Un,y:zn}}const SCROLLBAR_MAX=25;function getViewportRect(e,n){const l=getWindow(e),d=getDocumentElement(e),g=l.visualViewport;let jn=d.clientWidth,Un=d.clientHeight,zn=0,qn=0;if(g){jn=g.width,Un=g.height;const Xn=isWebKit();(!Xn||Xn&&n==="fixed")&&(zn=g.offsetLeft,qn=g.offsetTop)}const Kn=getWindowScrollBarX(d);if(Kn<=0){const Xn=d.ownerDocument,Qn=Xn.body,Jn=getComputedStyle(Qn),Ai=Xn.compatMode==="CSS1Compat"&&parseFloat(Jn.marginLeft)+parseFloat(Jn.marginRight)||0,Ri=Math.abs(d.clientWidth-Qn.clientWidth-Ai);Ri<=SCROLLBAR_MAX&&(jn-=Ri)}else Kn<=SCROLLBAR_MAX&&(jn+=Kn);return{width:jn,height:Un,x:zn,y:qn}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(e,n){const l=getBoundingClientRect(e,!0,n==="fixed"),d=l.top+e.clientTop,g=l.left+e.clientLeft,jn=isHTMLElement(e)?getScale(e):createCoords(1),Un=e.clientWidth*jn.x,zn=e.clientHeight*jn.y,qn=g*jn.x,Kn=d*jn.y;return{width:Un,height:zn,x:qn,y:Kn}}function getClientRectFromClippingAncestor(e,n,l){let d;if(n==="viewport")d=getViewportRect(e,l);else if(n==="document")d=getDocumentRect(getDocumentElement(e));else if(isElement$1(n))d=getInnerBoundingClientRect(n,l);else{const g=getVisualOffsets(e);d={x:n.x-g.x,y:n.y-g.y,width:n.width,height:n.height}}return rectToClientRect(d)}function hasFixedPositionAncestor(e,n){const l=getParentNode(e);return l===n||!isElement$1(l)||isLastTraversableNode(l)?!1:getComputedStyle$1(l).position==="fixed"||hasFixedPositionAncestor(l,n)}function getClippingElementAncestors(e,n){const l=n.get(e);if(l)return l;let d=getOverflowAncestors(e,[],!1).filter(zn=>isElement$1(zn)&&getNodeName(zn)!=="body"),g=null;const jn=getComputedStyle$1(e).position==="fixed";let Un=jn?getParentNode(e):e;for(;isElement$1(Un)&&!isLastTraversableNode(Un);){const zn=getComputedStyle$1(Un),qn=isContainingBlock(Un);!qn&&zn.position==="fixed"&&(g=null),(jn?!qn&&!g:!qn&&zn.position==="static"&&!!g&&absoluteOrFixed.has(g.position)||isOverflowElement(Un)&&!qn&&hasFixedPositionAncestor(e,Un))?d=d.filter(Xn=>Xn!==Un):g=zn,Un=getParentNode(Un)}return n.set(e,d),d}function getClippingRect(e){let{element:n,boundary:l,rootBoundary:d,strategy:g}=e;const Un=[...l==="clippingAncestors"?isTopLayer(n)?[]:getClippingElementAncestors(n,this._c):[].concat(l),d],zn=Un[0],qn=Un.reduce((Kn,Xn)=>{const Qn=getClientRectFromClippingAncestor(n,Xn,g);return Kn.top=max(Qn.top,Kn.top),Kn.right=min(Qn.right,Kn.right),Kn.bottom=min(Qn.bottom,Kn.bottom),Kn.left=max(Qn.left,Kn.left),Kn},getClientRectFromClippingAncestor(n,zn,g));return{width:qn.right-qn.left,height:qn.bottom-qn.top,x:qn.left,y:qn.top}}function getDimensions(e){const{width:n,height:l}=getCssDimensions(e);return{width:n,height:l}}function getRectRelativeToOffsetParent(e,n,l){const d=isHTMLElement(n),g=getDocumentElement(n),jn=l==="fixed",Un=getBoundingClientRect(e,!0,jn,n);let zn={scrollLeft:0,scrollTop:0};const qn=createCoords(0);function Kn(){qn.x=getWindowScrollBarX(g)}if(d||!d&&!jn)if((getNodeName(n)!=="body"||isOverflowElement(g))&&(zn=getNodeScroll(n)),d){const Ai=getBoundingClientRect(n,!0,jn,n);qn.x=Ai.x+n.clientLeft,qn.y=Ai.y+n.clientTop}else g&&Kn();jn&&!d&&g&&Kn();const Xn=g&&!d&&!jn?getHTMLOffset(g,zn):createCoords(0),Qn=Un.left+zn.scrollLeft-qn.x-Xn.x,Jn=Un.top+zn.scrollTop-qn.y-Xn.y;return{x:Qn,y:Jn,width:Un.width,height:Un.height}}function isStaticPositioned(e){return getComputedStyle$1(e).position==="static"}function getTrueOffsetParent(e,n){if(!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed")return null;if(n)return n(e);let l=e.offsetParent;return getDocumentElement(e)===l&&(l=l.ownerDocument.body),l}function getOffsetParent(e,n){const l=getWindow(e);if(isTopLayer(e))return l;if(!isHTMLElement(e)){let g=getParentNode(e);for(;g&&!isLastTraversableNode(g);){if(isElement$1(g)&&!isStaticPositioned(g))return g;g=getParentNode(g)}return l}let d=getTrueOffsetParent(e,n);for(;d&&isTableElement(d)&&isStaticPositioned(d);)d=getTrueOffsetParent(d,n);return d&&isLastTraversableNode(d)&&isStaticPositioned(d)&&!isContainingBlock(d)?l:d||getContainingBlock(e)||l}const getElementRects=async function(e){const n=this.getOffsetParent||getOffsetParent,l=this.getDimensions,d=await l(e.floating);return{reference:getRectRelativeToOffsetParent(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}};function isRTL(e){return getComputedStyle$1(e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$1,isRTL};function rectsAreEqual(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function observeMove(e,n){let l=null,d;const g=getDocumentElement(e);function jn(){var zn;clearTimeout(d),(zn=l)==null||zn.disconnect(),l=null}function Un(zn,qn){zn===void 0&&(zn=!1),qn===void 0&&(qn=1),jn();const Kn=e.getBoundingClientRect(),{left:Xn,top:Qn,width:Jn,height:Ai}=Kn;if(zn||n(),!Jn||!Ai)return;const Ri=floor(Qn),Ni=floor(g.clientWidth-(Xn+Jn)),$i=floor(g.clientHeight-(Qn+Ai)),Li=floor(Xn),Fi={rootMargin:-Ri+"px "+-Ni+"px "+-$i+"px "+-Li+"px",threshold:max(0,min(1,qn))||1};let qi=!0;function zi(Gi){const Xi=Gi[0].intersectionRatio;if(Xi!==qn){if(!qi)return Un();Xi?Un(!1,Xi):d=setTimeout(()=>{Un(!1,1e-7)},1e3)}Xi===1&&!rectsAreEqual(Kn,e.getBoundingClientRect())&&Un(),qi=!1}try{l=new IntersectionObserver(zi,{...Fi,root:g.ownerDocument})}catch{l=new IntersectionObserver(zi,Fi)}l.observe(e)}return Un(!0),jn}function autoUpdate(e,n,l,d){d===void 0&&(d={});const{ancestorScroll:g=!0,ancestorResize:jn=!0,elementResize:Un=typeof ResizeObserver=="function",layoutShift:zn=typeof IntersectionObserver=="function",animationFrame:qn=!1}=d,Kn=unwrapElement(e),Xn=g||jn?[...Kn?getOverflowAncestors(Kn):[],...getOverflowAncestors(n)]:[];Xn.forEach(Li=>{g&&Li.addEventListener("scroll",l,{passive:!0}),jn&&Li.addEventListener("resize",l)});const Qn=Kn&&zn?observeMove(Kn,l):null;let Jn=-1,Ai=null;Un&&(Ai=new ResizeObserver(Li=>{let[ji]=Li;ji&&ji.target===Kn&&Ai&&(Ai.unobserve(n),cancelAnimationFrame(Jn),Jn=requestAnimationFrame(()=>{var Fi;(Fi=Ai)==null||Fi.observe(n)})),l()}),Kn&&!qn&&Ai.observe(Kn),Ai.observe(n));let Ri,Ni=qn?getBoundingClientRect(e):null;qn&&$i();function $i(){const Li=getBoundingClientRect(e);Ni&&!rectsAreEqual(Ni,Li)&&l(),Ni=Li,Ri=requestAnimationFrame($i)}return l(),()=>{var Li;Xn.forEach(ji=>{g&&ji.removeEventListener("scroll",l),jn&&ji.removeEventListener("resize",l)}),Qn?.(),(Li=Ai)==null||Li.disconnect(),Ai=null,qn&&cancelAnimationFrame(Ri)}}const offset$1=offset$2,autoPlacement$1=autoPlacement$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,inline$1=inline$2,limitShift$1=limitShift$2,computePosition=(e,n,l)=>{const d=new Map,g={platform,...l},jn={...g.platform,_c:d};return computePosition$1(e,n,{...g,platform:jn})};var isClient=typeof document<"u",noop$1=function(){},index=isClient?reactExports.useLayoutEffect:noop$1;function deepEqual(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let l,d,g;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(l=e.length,l!==n.length)return!1;for(d=l;d--!==0;)if(!deepEqual(e[d],n[d]))return!1;return!0}if(g=Object.keys(e),l=g.length,l!==Object.keys(n).length)return!1;for(d=l;d--!==0;)if(!{}.hasOwnProperty.call(n,g[d]))return!1;for(d=l;d--!==0;){const jn=g[d];if(!(jn==="_owner"&&e.$$typeof)&&!deepEqual(e[jn],n[jn]))return!1}return!0}return e!==e&&n!==n}function getDPR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(e,n){const l=getDPR(e);return Math.round(n*l)/l}function useLatestRef(e){const n=reactExports.useRef(e);return index(()=>{n.current=e}),n}function useFloating$1(e){e===void 0&&(e={});const{placement:n="bottom",strategy:l="absolute",middleware:d=[],platform:g,elements:{reference:jn,floating:Un}={},transform:zn=!0,whileElementsMounted:qn,open:Kn}=e,[Xn,Qn]=reactExports.useState({x:0,y:0,strategy:l,placement:n,middlewareData:{},isPositioned:!1}),[Jn,Ai]=reactExports.useState(d);deepEqual(Jn,d)||Ai(d);const[Ri,Ni]=reactExports.useState(null),[$i,Li]=reactExports.useState(null),ji=reactExports.useCallback(ds=>{ds!==Gi.current&&(Gi.current=ds,Ni(ds))},[]),Fi=reactExports.useCallback(ds=>{ds!==Xi.current&&(Xi.current=ds,Li(ds))},[]),qi=jn||Ri,zi=Un||$i,Gi=reactExports.useRef(null),Xi=reactExports.useRef(null),as=reactExports.useRef(Xn),ls=qn!=null,Zi=useLatestRef(qn),gs=useLatestRef(g),bs=useLatestRef(Kn),Ss=reactExports.useCallback(()=>{if(!Gi.current||!Xi.current)return;const ds={placement:n,strategy:l,middleware:Jn};gs.current&&(ds.platform=gs.current),computePosition(Gi.current,Xi.current,ds).then(Cs=>{const Wi={...Cs,isPositioned:bs.current!==!1};ss.current&&!deepEqual(as.current,Wi)&&(as.current=Wi,reactDomExports.flushSync(()=>{Qn(Wi)}))})},[Jn,n,l,gs,bs]);index(()=>{Kn===!1&&as.current.isPositioned&&(as.current.isPositioned=!1,Qn(ds=>({...ds,isPositioned:!1})))},[Kn]);const ss=reactExports.useRef(!1);index(()=>(ss.current=!0,()=>{ss.current=!1}),[]),index(()=>{if(qi&&(Gi.current=qi),zi&&(Xi.current=zi),qi&&zi){if(Zi.current)return Zi.current(qi,zi,Ss);Ss()}},[qi,zi,Ss,Zi,ls]);const Es=reactExports.useMemo(()=>({reference:Gi,floating:Xi,setReference:ji,setFloating:Fi}),[ji,Fi]),rs=reactExports.useMemo(()=>({reference:qi,floating:zi}),[qi,zi]),cs=reactExports.useMemo(()=>{const ds={position:l,left:0,top:0};if(!rs.floating)return ds;const Cs=roundByDPR(rs.floating,Xn.x),Wi=roundByDPR(rs.floating,Xn.y);return zn?{...ds,transform:"translate("+Cs+"px, "+Wi+"px)",...getDPR(rs.floating)>=1.5&&{willChange:"transform"}}:{position:l,left:Cs,top:Wi}},[l,zn,rs.floating,Xn.x,Xn.y]);return reactExports.useMemo(()=>({...Xn,update:Ss,refs:Es,elements:rs,floatingStyles:cs}),[Xn,Ss,Es,rs,cs])}const arrow$1=e=>{function n(l){return{}.hasOwnProperty.call(l,"current")}return{name:"arrow",options:e,fn(l){const{element:d,padding:g}=typeof e=="function"?e(l):e;return d&&n(d)?d.current!=null?arrow$2({element:d.current,padding:g}).fn(l):{}:d?arrow$2({element:d,padding:g}).fn(l):{}}}},offset=(e,n)=>({...offset$1(e),options:[e,n]}),shift=(e,n)=>({...shift$1(e),options:[e,n]}),limitShift=(e,n)=>({...limitShift$1(e),options:[e,n]}),flip=(e,n)=>({...flip$1(e),options:[e,n]}),size=(e,n)=>({...size$1(e),options:[e,n]}),autoPlacement=(e,n)=>({...autoPlacement$1(e),options:[e,n]}),hide=(e,n)=>({...hide$1(e),options:[e,n]}),inline=(e,n)=>({...inline$1(e),options:[e,n]}),arrow=(e,n)=>({...arrow$1(e),options:[e,n]});function useMergeRefs(e){const n=reactExports.useRef(void 0),l=reactExports.useCallback(d=>{const g=e.map(jn=>{if(jn!=null){if(typeof jn=="function"){const Un=jn,zn=Un(d);return typeof zn=="function"?zn:()=>{Un(null)}}return jn.current=d,()=>{jn.current=null}}});return()=>{g.forEach(jn=>jn?.())}},e);return reactExports.useMemo(()=>e.every(d=>d==null)?null:d=>{n.current&&(n.current(),n.current=void 0),d!=null&&(n.current=l(d))},e)}const FOCUSABLE_ATTRIBUTE="data-floating-ui-focusable",ACTIVE_KEY="active",SELECTED_KEY="selected",SafeReact={...React$1};let serverHandoffComplete=!1,count$1=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count$1++;function useFloatingId(){const[e,n]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{e==null&&n(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),e}const useReactId$1=SafeReact.useId,useId$1=useReactId$1||useFloatingId;function createEventEmitter(){const e=new Map;return{emit(n,l){var d;(d=e.get(n))==null||d.forEach(g=>g(l))},on(n,l){e.has(n)||e.set(n,new Set),e.get(n).add(l)},off(n,l){var d;(d=e.get(n))==null||d.delete(l)}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var e;return((e=reactExports.useContext(FloatingNodeContext))==null?void 0:e.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function createAttribute(e){return"data-floating-ui-"+e}function clearTimeoutIfSet(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const safePolygonIdentifier=createAttribute("safe-polygon");function getDelay(e,n,l){if(l&&!isMouseLikePointerType(l))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const d=e();return typeof d=="number"?d:d?.[n]}return e?.[n]}function getRestMs(e){return typeof e=="function"?e():e}function useHover$1(e,n){n===void 0&&(n={});const{open:l,onOpenChange:d,dataRef:g,events:jn,elements:Un}=e,{enabled:zn=!0,delay:qn=0,handleClose:Kn=null,mouseOnly:Xn=!1,restMs:Qn=0,move:Jn=!0}=n,Ai=useFloatingTree(),Ri=useFloatingParentNodeId(),Ni=useLatestRef$1(Kn),$i=useLatestRef$1(qn),Li=useLatestRef$1(l),ji=useLatestRef$1(Qn),Fi=reactExports.useRef(),qi=reactExports.useRef(-1),zi=reactExports.useRef(),Gi=reactExports.useRef(-1),Xi=reactExports.useRef(!0),as=reactExports.useRef(!1),ls=reactExports.useRef(()=>{}),Zi=reactExports.useRef(!1),gs=useEffectEvent(()=>{var cs;const ds=(cs=g.current.openEvent)==null?void 0:cs.type;return ds?.includes("mouse")&&ds!=="mousedown"});reactExports.useEffect(()=>{if(!zn)return;function cs(ds){let{open:Cs}=ds;Cs||(clearTimeoutIfSet(qi),clearTimeoutIfSet(Gi),Xi.current=!0,Zi.current=!1)}return jn.on("openchange",cs),()=>{jn.off("openchange",cs)}},[zn,jn]),reactExports.useEffect(()=>{if(!zn||!Ni.current||!l)return;function cs(Cs){gs()&&d(!1,Cs,"hover")}const ds=getDocument(Un.floating).documentElement;return ds.addEventListener("mouseleave",cs),()=>{ds.removeEventListener("mouseleave",cs)}},[Un.floating,l,d,zn,Ni,gs]);const bs=reactExports.useCallback(function(cs,ds,Cs){ds===void 0&&(ds=!0),Cs===void 0&&(Cs="hover");const Wi=getDelay($i.current,"close",Fi.current);Wi&&!zi.current?(clearTimeoutIfSet(qi),qi.current=window.setTimeout(()=>d(!1,cs,Cs),Wi)):ds&&(clearTimeoutIfSet(qi),d(!1,cs,Cs))},[$i,d]),Ss=useEffectEvent(()=>{ls.current(),zi.current=void 0}),ss=useEffectEvent(()=>{if(as.current){const cs=getDocument(Un.floating).body;cs.style.pointerEvents="",cs.removeAttribute(safePolygonIdentifier),as.current=!1}}),Es=useEffectEvent(()=>g.current.openEvent?["click","mousedown"].includes(g.current.openEvent.type):!1);reactExports.useEffect(()=>{if(!zn)return;function cs(fs){if(clearTimeoutIfSet(qi),Xi.current=!1,Xn&&!isMouseLikePointerType(Fi.current)||getRestMs(ji.current)>0&&!getDelay($i.current,"open"))return;const Ki=getDelay($i.current,"open",Fi.current);Ki?qi.current=window.setTimeout(()=>{Li.current||d(!0,fs,"hover")},Ki):l||d(!0,fs,"hover")}function ds(fs){if(Es()){ss();return}ls.current();const Ki=getDocument(Un.floating);if(clearTimeoutIfSet(Gi),Zi.current=!1,Ni.current&&g.current.floatingContext){l||clearTimeoutIfSet(qi),zi.current=Ni.current({...g.current.floatingContext,tree:Ai,x:fs.clientX,y:fs.clientY,onClose(){ss(),Ss(),Es()||bs(fs,!0,"safe-polygon")}});const _s=zi.current;Ki.addEventListener("mousemove",_s),ls.current=()=>{Ki.removeEventListener("mousemove",_s)};return}(Fi.current!=="touch"||!contains$1(Un.floating,fs.relatedTarget))&&bs(fs)}function Cs(fs){Es()||g.current.floatingContext&&(Ni.current==null||Ni.current({...g.current.floatingContext,tree:Ai,x:fs.clientX,y:fs.clientY,onClose(){ss(),Ss(),Es()||bs(fs)}})(fs))}function Wi(){clearTimeoutIfSet(qi)}function es(fs){Es()||bs(fs,!1)}if(isElement$1(Un.domReference)){const fs=Un.domReference,Ki=Un.floating;return l&&fs.addEventListener("mouseleave",Cs),Jn&&fs.addEventListener("mousemove",cs,{once:!0}),fs.addEventListener("mouseenter",cs),fs.addEventListener("mouseleave",ds),Ki&&(Ki.addEventListener("mouseleave",Cs),Ki.addEventListener("mouseenter",Wi),Ki.addEventListener("mouseleave",es)),()=>{l&&fs.removeEventListener("mouseleave",Cs),Jn&&fs.removeEventListener("mousemove",cs),fs.removeEventListener("mouseenter",cs),fs.removeEventListener("mouseleave",ds),Ki&&(Ki.removeEventListener("mouseleave",Cs),Ki.removeEventListener("mouseenter",Wi),Ki.removeEventListener("mouseleave",es))}}},[Un,zn,e,Xn,Jn,bs,Ss,ss,d,l,Li,Ai,$i,Ni,g,Es,ji]),index$1(()=>{var cs;if(zn&&l&&(cs=Ni.current)!=null&&(cs=cs.__options)!=null&&cs.blockPointerEvents&&gs()){as.current=!0;const Cs=Un.floating;if(isElement$1(Un.domReference)&&Cs){var ds;const Wi=getDocument(Un.floating).body;Wi.setAttribute(safePolygonIdentifier,"");const es=Un.domReference,fs=Ai==null||(ds=Ai.nodesRef.current.find(Ki=>Ki.id===Ri))==null||(ds=ds.context)==null?void 0:ds.elements.floating;return fs&&(fs.style.pointerEvents=""),Wi.style.pointerEvents="none",es.style.pointerEvents="auto",Cs.style.pointerEvents="auto",()=>{Wi.style.pointerEvents="",es.style.pointerEvents="",Cs.style.pointerEvents=""}}}},[zn,l,Ri,Un,Ai,Ni,gs]),index$1(()=>{l||(Fi.current=void 0,Zi.current=!1,Ss(),ss())},[l,Ss,ss]),reactExports.useEffect(()=>()=>{Ss(),clearTimeoutIfSet(qi),clearTimeoutIfSet(Gi),ss()},[zn,Un.domReference,Ss,ss]);const rs=reactExports.useMemo(()=>{function cs(ds){Fi.current=ds.pointerType}return{onPointerDown:cs,onPointerEnter:cs,onMouseMove(ds){const{nativeEvent:Cs}=ds;function Wi(){!Xi.current&&!Li.current&&d(!0,Cs,"hover")}Xn&&!isMouseLikePointerType(Fi.current)||l||getRestMs(ji.current)===0||Zi.current&&ds.movementX**2+ds.movementY**2<2||(clearTimeoutIfSet(Gi),Fi.current==="touch"?Wi():(Zi.current=!0,Gi.current=window.setTimeout(Wi,getRestMs(ji.current))))}}},[Xn,d,l,Li,ji]);return reactExports.useMemo(()=>zn?{reference:rs}:{},[zn,rs])}const NOOP=()=>{},FloatingDelayGroupContext=reactExports.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:NOOP,setState:NOOP,isInstantPhase:!1}),useDelayGroupContext=()=>reactExports.useContext(FloatingDelayGroupContext);function FloatingDelayGroup(e){const{children:n,delay:l,timeoutMs:d=0}=e,[g,jn]=reactExports.useReducer((qn,Kn)=>({...qn,...Kn}),{delay:l,timeoutMs:d,initialDelay:l,currentId:null,isInstantPhase:!1}),Un=reactExports.useRef(null),zn=reactExports.useCallback(qn=>{jn({currentId:qn})},[]);return index$1(()=>{g.currentId?Un.current===null?Un.current=g.currentId:g.isInstantPhase||jn({isInstantPhase:!0}):(g.isInstantPhase&&jn({isInstantPhase:!1}),Un.current=null)},[g.currentId,g.isInstantPhase]),jsxRuntimeExports.jsx(FloatingDelayGroupContext.Provider,{value:reactExports.useMemo(()=>({...g,setState:jn,setCurrentId:zn}),[g,zn]),children:n})}function useDelayGroup(e,n){n===void 0&&(n={});const{open:l,onOpenChange:d,floatingId:g}=e,{id:jn,enabled:Un=!0}=n,zn=jn??g,qn=useDelayGroupContext(),{currentId:Kn,setCurrentId:Xn,initialDelay:Qn,setState:Jn,timeoutMs:Ai}=qn;return index$1(()=>{Un&&Kn&&(Jn({delay:{open:1,close:getDelay(Qn,"close")}}),Kn!==zn&&d(!1))},[Un,zn,d,Jn,Kn,Qn]),index$1(()=>{function Ri(){d(!1),Jn({delay:Qn,currentId:null})}if(Un&&Kn&&!l&&Kn===zn){if(Ai){const Ni=window.setTimeout(Ri,Ai);return()=>{clearTimeout(Ni)}}Ri()}},[Un,l,Jn,Kn,zn,d,Qn,Ai]),index$1(()=>{Un&&(Xn===NOOP||!l||Xn(zn))},[Un,l,Xn,zn]),qn}function contains(e,n){if(!e||!n)return!1;const l=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(l&&isShadowRoot(l)){let d=n;for(;d;){if(e===d)return!0;d=d.parentNode||d.host}}return!1}function getTarget(e){return"composedPath"in e?e.composedPath()[0]:e.target}const bubbleHandlerKeys={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},captureHandlerKeys={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=e=>{var n,l;return{escapeKey:typeof e=="boolean"?e:(n=e?.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(l=e?.outsidePress)!=null?l:!0}};function useDismiss(e,n){n===void 0&&(n={});const{open:l,onOpenChange:d,elements:g,dataRef:jn}=e,{enabled:Un=!0,escapeKey:zn=!0,outsidePress:qn=!0,outsidePressEvent:Kn="pointerdown",referencePress:Xn=!1,referencePressEvent:Qn="pointerdown",ancestorScroll:Jn=!1,bubbles:Ai,capture:Ri}=n,Ni=useFloatingTree(),$i=useEffectEvent(typeof qn=="function"?qn:()=>!1),Li=typeof qn=="function"?$i:qn,ji=reactExports.useRef(!1),{escapeKey:Fi,outsidePress:qi}=normalizeProp(Ai),{escapeKey:zi,outsidePress:Gi}=normalizeProp(Ri),Xi=reactExports.useRef(!1),as=useEffectEvent(ss=>{var Es;if(!l||!Un||!zn||ss.key!=="Escape"||Xi.current)return;const rs=(Es=jn.current.floatingContext)==null?void 0:Es.nodeId,cs=Ni?getNodeChildren$1(Ni.nodesRef.current,rs):[];if(!Fi&&(ss.stopPropagation(),cs.length>0)){let ds=!0;if(cs.forEach(Cs=>{var Wi;if((Wi=Cs.context)!=null&&Wi.open&&!Cs.context.dataRef.current.__escapeKeyBubbles){ds=!1;return}}),!ds)return}d(!1,isReactEvent(ss)?ss.nativeEvent:ss,"escape-key")}),ls=useEffectEvent(ss=>{var Es;const rs=()=>{var cs;as(ss),(cs=getTarget$1(ss))==null||cs.removeEventListener("keydown",rs)};(Es=getTarget$1(ss))==null||Es.addEventListener("keydown",rs)}),Zi=useEffectEvent(ss=>{var Es;const rs=jn.current.insideReactTree;jn.current.insideReactTree=!1;const cs=ji.current;if(ji.current=!1,Kn==="click"&&cs||rs||typeof Li=="function"&&!Li(ss))return;const ds=getTarget$1(ss),Cs="["+createAttribute("inert")+"]",Wi=getDocument(g.floating).querySelectorAll(Cs);let es=isElement$1(ds)?ds:null;for(;es&&!isLastTraversableNode(es);){const _s=getParentNode(es);if(isLastTraversableNode(_s)||!isElement$1(_s))break;es=_s}if(Wi.length&&isElement$1(ds)&&!isRootElement(ds)&&!contains$1(ds,g.floating)&&Array.from(Wi).every(_s=>!contains$1(es,_s)))return;if(isHTMLElement(ds)&&Ss){const _s=isLastTraversableNode(ds),Is=getComputedStyle$1(ds),Ms=/auto|scroll/,Os=_s||Ms.test(Is.overflowX),Rs=_s||Ms.test(Is.overflowY),Xs=Os&&ds.clientWidth>0&&ds.scrollWidth>ds.clientWidth,_a=Rs&&ds.clientHeight>0&&ds.scrollHeight>ds.clientHeight,fl=Is.direction==="rtl",qs=_a&&(fl?ss.offsetX<=ds.offsetWidth-ds.clientWidth:ss.offsetX>ds.clientWidth),hl=Xs&&ss.offsetY>ds.clientHeight;if(qs||hl)return}const fs=(Es=jn.current.floatingContext)==null?void 0:Es.nodeId,Ki=Ni&&getNodeChildren$1(Ni.nodesRef.current,fs).some(_s=>{var Is;return isEventTargetWithin(ss,(Is=_s.context)==null?void 0:Is.elements.floating)});if(isEventTargetWithin(ss,g.floating)||isEventTargetWithin(ss,g.domReference)||Ki)return;const ws=Ni?getNodeChildren$1(Ni.nodesRef.current,fs):[];if(ws.length>0){let _s=!0;if(ws.forEach(Is=>{var Ms;if((Ms=Is.context)!=null&&Ms.open&&!Is.context.dataRef.current.__outsidePressBubbles){_s=!1;return}}),!_s)return}d(!1,ss,"outside-press")}),gs=useEffectEvent(ss=>{var Es;const rs=()=>{var cs;Zi(ss),(cs=getTarget$1(ss))==null||cs.removeEventListener(Kn,rs)};(Es=getTarget$1(ss))==null||Es.addEventListener(Kn,rs)});reactExports.useEffect(()=>{if(!l||!Un)return;jn.current.__escapeKeyBubbles=Fi,jn.current.__outsidePressBubbles=qi;let ss=-1;function Es(Wi){d(!1,Wi,"ancestor-scroll")}function rs(){window.clearTimeout(ss),Xi.current=!0}function cs(){ss=window.setTimeout(()=>{Xi.current=!1},isWebKit()?5:0)}const ds=getDocument(g.floating);zn&&(ds.addEventListener("keydown",zi?ls:as,zi),ds.addEventListener("compositionstart",rs),ds.addEventListener("compositionend",cs)),Li&&ds.addEventListener(Kn,Gi?gs:Zi,Gi);let Cs=[];return Jn&&(isElement$1(g.domReference)&&(Cs=getOverflowAncestors(g.domReference)),isElement$1(g.floating)&&(Cs=Cs.concat(getOverflowAncestors(g.floating))),!isElement$1(g.reference)&&g.reference&&g.reference.contextElement&&(Cs=Cs.concat(getOverflowAncestors(g.reference.contextElement)))),Cs=Cs.filter(Wi=>{var es;return Wi!==((es=ds.defaultView)==null?void 0:es.visualViewport)}),Cs.forEach(Wi=>{Wi.addEventListener("scroll",Es,{passive:!0})}),()=>{zn&&(ds.removeEventListener("keydown",zi?ls:as,zi),ds.removeEventListener("compositionstart",rs),ds.removeEventListener("compositionend",cs)),Li&&ds.removeEventListener(Kn,Gi?gs:Zi,Gi),Cs.forEach(Wi=>{Wi.removeEventListener("scroll",Es)}),window.clearTimeout(ss)}},[jn,g,zn,Li,Kn,l,d,Jn,Un,Fi,qi,as,zi,ls,Zi,Gi,gs]),reactExports.useEffect(()=>{jn.current.insideReactTree=!1},[jn,Li,Kn]);const bs=reactExports.useMemo(()=>({onKeyDown:as,...Xn&&{[bubbleHandlerKeys[Qn]]:ss=>{d(!1,ss.nativeEvent,"reference-press")},...Qn!=="click"&&{onClick(ss){d(!1,ss.nativeEvent,"reference-press")}}}}),[as,d,Xn,Qn]),Ss=reactExports.useMemo(()=>({onKeyDown:as,onMouseDown(){ji.current=!0},onMouseUp(){ji.current=!0},[captureHandlerKeys[Kn]]:()=>{jn.current.insideReactTree=!0}}),[as,Kn,jn]);return reactExports.useMemo(()=>Un?{reference:bs,floating:Ss}:{},[Un,bs,Ss])}function useFloatingRootContext(e){const{open:n=!1,onOpenChange:l,elements:d}=e,g=useId$1(),jn=reactExports.useRef({}),[Un]=reactExports.useState(()=>createEventEmitter()),zn=useFloatingParentNodeId()!=null,[qn,Kn]=reactExports.useState(d.reference),Xn=useEffectEvent((Ai,Ri,Ni)=>{jn.current.openEvent=Ai?Ri:void 0,Un.emit("openchange",{open:Ai,event:Ri,reason:Ni,nested:zn}),l?.(Ai,Ri,Ni)}),Qn=reactExports.useMemo(()=>({setPositionReference:Kn}),[]),Jn=reactExports.useMemo(()=>({reference:qn||d.reference||null,floating:d.floating||null,domReference:d.reference}),[qn,d.reference,d.floating]);return reactExports.useMemo(()=>({dataRef:jn,open:n,onOpenChange:Xn,elements:Jn,events:Un,floatingId:g,refs:Qn}),[n,Xn,Jn,Un,g,Qn])}function useFloating(e){e===void 0&&(e={});const{nodeId:n}=e,l=useFloatingRootContext({...e,elements:{reference:null,floating:null,...e.elements}}),d=e.rootContext||l,g=d.elements,[jn,Un]=reactExports.useState(null),[zn,qn]=reactExports.useState(null),Xn=g?.domReference||jn,Qn=reactExports.useRef(null),Jn=useFloatingTree();index$1(()=>{Xn&&(Qn.current=Xn)},[Xn]);const Ai=useFloating$1({...e,elements:{...g,...zn&&{reference:zn}}}),Ri=reactExports.useCallback(Fi=>{const qi=isElement$1(Fi)?{getBoundingClientRect:()=>Fi.getBoundingClientRect(),getClientRects:()=>Fi.getClientRects(),contextElement:Fi}:Fi;qn(qi),Ai.refs.setReference(qi)},[Ai.refs]),Ni=reactExports.useCallback(Fi=>{(isElement$1(Fi)||Fi===null)&&(Qn.current=Fi,Un(Fi)),(isElement$1(Ai.refs.reference.current)||Ai.refs.reference.current===null||Fi!==null&&!isElement$1(Fi))&&Ai.refs.setReference(Fi)},[Ai.refs]),$i=reactExports.useMemo(()=>({...Ai.refs,setReference:Ni,setPositionReference:Ri,domReference:Qn}),[Ai.refs,Ni,Ri]),Li=reactExports.useMemo(()=>({...Ai.elements,domReference:Xn}),[Ai.elements,Xn]),ji=reactExports.useMemo(()=>({...Ai,...d,refs:$i,elements:Li,nodeId:n}),[Ai,$i,Li,n,d]);return index$1(()=>{d.dataRef.current.floatingContext=ji;const Fi=Jn?.nodesRef.current.find(qi=>qi.id===n);Fi&&(Fi.context=ji)}),reactExports.useMemo(()=>({...Ai,context:ji,refs:$i,elements:Li}),[Ai,$i,Li,ji])}function isMacSafari(){return isMac()&&isSafari()}function useFocus(e,n){n===void 0&&(n={});const{open:l,onOpenChange:d,events:g,dataRef:jn,elements:Un}=e,{enabled:zn=!0,visibleOnly:qn=!0}=n,Kn=reactExports.useRef(!1),Xn=reactExports.useRef(-1),Qn=reactExports.useRef(!0);reactExports.useEffect(()=>{if(!zn)return;const Ai=getWindow(Un.domReference);function Ri(){!l&&isHTMLElement(Un.domReference)&&Un.domReference===activeElement(getDocument(Un.domReference))&&(Kn.current=!0)}function Ni(){Qn.current=!0}function $i(){Qn.current=!1}return Ai.addEventListener("blur",Ri),isMacSafari()&&(Ai.addEventListener("keydown",Ni,!0),Ai.addEventListener("pointerdown",$i,!0)),()=>{Ai.removeEventListener("blur",Ri),isMacSafari()&&(Ai.removeEventListener("keydown",Ni,!0),Ai.removeEventListener("pointerdown",$i,!0))}},[Un.domReference,l,zn]),reactExports.useEffect(()=>{if(!zn)return;function Ai(Ri){let{reason:Ni}=Ri;(Ni==="reference-press"||Ni==="escape-key")&&(Kn.current=!0)}return g.on("openchange",Ai),()=>{g.off("openchange",Ai)}},[g,zn]),reactExports.useEffect(()=>()=>{clearTimeoutIfSet(Xn)},[]);const Jn=reactExports.useMemo(()=>({onMouseLeave(){Kn.current=!1},onFocus(Ai){if(Kn.current)return;const Ri=getTarget$1(Ai.nativeEvent);if(qn&&isElement$1(Ri)){if(isMacSafari()&&!Ai.relatedTarget){if(!Qn.current&&!isTypeableElement(Ri))return}else if(!matchesFocusVisible(Ri))return}d(!0,Ai.nativeEvent,"focus")},onBlur(Ai){Kn.current=!1;const Ri=Ai.relatedTarget,Ni=Ai.nativeEvent,$i=isElement$1(Ri)&&Ri.hasAttribute(createAttribute("focus-guard"))&&Ri.getAttribute("data-type")==="outside";Xn.current=window.setTimeout(()=>{var Li;const ji=activeElement(Un.domReference?Un.domReference.ownerDocument:document);!Ri&&ji===Un.domReference||contains$1((Li=jn.current.floatingContext)==null?void 0:Li.refs.floating.current,ji)||contains$1(Un.domReference,ji)||$i||d(!1,Ni,"focus")})}}),[jn,Un.domReference,d,qn]);return reactExports.useMemo(()=>zn?{reference:Jn}:{},[zn,Jn])}function mergeProps(e,n,l){const d=new Map,g=l==="item";let jn=e;if(g&&e){const{[ACTIVE_KEY]:Un,[SELECTED_KEY]:zn,...qn}=e;jn=qn}return{...l==="floating"&&{tabIndex:-1,[FOCUSABLE_ATTRIBUTE]:""},...jn,...n.map(Un=>{const zn=Un?Un[l]:null;return typeof zn=="function"?e?zn(e):null:zn}).concat(e).reduce((Un,zn)=>(zn&&Object.entries(zn).forEach(qn=>{let[Kn,Xn]=qn;if(!(g&&[ACTIVE_KEY,SELECTED_KEY].includes(Kn)))if(Kn.indexOf("on")===0){if(d.has(Kn)||d.set(Kn,[]),typeof Xn=="function"){var Qn;(Qn=d.get(Kn))==null||Qn.push(Xn),Un[Kn]=function(){for(var Jn,Ai=arguments.length,Ri=new Array(Ai),Ni=0;Ni<Ai;Ni++)Ri[Ni]=arguments[Ni];return(Jn=d.get(Kn))==null?void 0:Jn.map($i=>$i(...Ri)).find($i=>$i!==void 0)}}}else Un[Kn]=Xn}),Un),{})}}function useInteractions(e){e===void 0&&(e=[]);const n=e.map(zn=>zn?.reference),l=e.map(zn=>zn?.floating),d=e.map(zn=>zn?.item),g=reactExports.useCallback(zn=>mergeProps(zn,e,"reference"),n),jn=reactExports.useCallback(zn=>mergeProps(zn,e,"floating"),l),Un=reactExports.useCallback(zn=>mergeProps(zn,e,"item"),d);return reactExports.useMemo(()=>({getReferenceProps:g,getFloatingProps:jn,getItemProps:Un}),[g,jn,Un])}const componentRoleToAriaRoleMap=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(e,n){var l,d;n===void 0&&(n={});const{open:g,elements:jn,floatingId:Un}=e,{enabled:zn=!0,role:qn="dialog"}=n,Kn=useId$1(),Xn=((l=jn.domReference)==null?void 0:l.id)||Kn,Qn=reactExports.useMemo(()=>{var ji;return((ji=getFloatingFocusElement(jn.floating))==null?void 0:ji.id)||Un},[jn.floating,Un]),Jn=(d=componentRoleToAriaRoleMap.get(qn))!=null?d:qn,Ri=useFloatingParentNodeId()!=null,Ni=reactExports.useMemo(()=>Jn==="tooltip"||qn==="label"?{["aria-"+(qn==="label"?"labelledby":"describedby")]:g?Qn:void 0}:{"aria-expanded":g?"true":"false","aria-haspopup":Jn==="alertdialog"?"dialog":Jn,"aria-controls":g?Qn:void 0,...Jn==="listbox"&&{role:"combobox"},...Jn==="menu"&&{id:Xn},...Jn==="menu"&&Ri&&{role:"menuitem"},...qn==="select"&&{"aria-autocomplete":"none"},...qn==="combobox"&&{"aria-autocomplete":"list"}},[Jn,Qn,Ri,g,Xn,qn]),$i=reactExports.useMemo(()=>{const ji={id:Qn,...Jn&&{role:Jn}};return Jn==="tooltip"||qn==="label"?ji:{...ji,...Jn==="menu"&&{"aria-labelledby":Xn}}},[Jn,Qn,Xn,qn]),Li=reactExports.useCallback(ji=>{let{active:Fi,selected:qi}=ji;const zi={role:"option",...Fi&&{id:Qn+"-fui-option"}};switch(qn){case"select":case"combobox":return{...zi,"aria-selected":qi}}return{}},[Qn,qn]);return reactExports.useMemo(()=>zn?{reference:Ni,floating:$i,item:Li}:{},[zn,Ni,$i,Li])}const camelCaseToKebabCase=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,l)=>(l?"-":"")+n.toLowerCase());function execWithArgsOrReturn(e,n){return typeof e=="function"?e(n):e}function useDelayUnmount(e,n){const[l,d]=reactExports.useState(e);return e&&!l&&d(!0),reactExports.useEffect(()=>{if(!e&&l){const g=setTimeout(()=>d(!1),n);return()=>clearTimeout(g)}},[e,l,n]),l}function useTransitionStatus(e,n){n===void 0&&(n={});const{open:l,elements:{floating:d}}=e,{duration:g=250}=n,Un=(typeof g=="number"?g:g.close)||0,[zn,qn]=reactExports.useState("unmounted"),Kn=useDelayUnmount(l,Un);return!Kn&&zn==="close"&&qn("unmounted"),index$1(()=>{if(d){if(l){qn("initial");const Xn=requestAnimationFrame(()=>{reactDomExports.flushSync(()=>{qn("open")})});return()=>{cancelAnimationFrame(Xn)}}qn("close")}},[l,d]),{isMounted:Kn,status:zn}}function useTransitionStyles(e,n){n===void 0&&(n={});const{initial:l={opacity:0},open:d,close:g,common:jn,duration:Un=250}=n,zn=e.placement,qn=zn.split("-")[0],Kn=reactExports.useMemo(()=>({side:qn,placement:zn}),[qn,zn]),Xn=typeof Un=="number",Qn=(Xn?Un:Un.open)||0,Jn=(Xn?Un:Un.close)||0,[Ai,Ri]=reactExports.useState(()=>({...execWithArgsOrReturn(jn,Kn),...execWithArgsOrReturn(l,Kn)})),{isMounted:Ni,status:$i}=useTransitionStatus(e,{duration:Un}),Li=useLatestRef$1(l),ji=useLatestRef$1(d),Fi=useLatestRef$1(g),qi=useLatestRef$1(jn);return index$1(()=>{const zi=execWithArgsOrReturn(Li.current,Kn),Gi=execWithArgsOrReturn(Fi.current,Kn),Xi=execWithArgsOrReturn(qi.current,Kn),as=execWithArgsOrReturn(ji.current,Kn)||Object.keys(zi).reduce((ls,Zi)=>(ls[Zi]="",ls),{});if($i==="initial"&&Ri(ls=>({transitionProperty:ls.transitionProperty,...Xi,...zi})),$i==="open"&&Ri({transitionProperty:Object.keys(as).map(camelCaseToKebabCase).join(","),transitionDuration:Qn+"ms",...Xi,...as}),$i==="close"){const ls=Gi||zi;Ri({transitionProperty:Object.keys(ls).map(camelCaseToKebabCase).join(","),transitionDuration:Jn+"ms",...Xi,...ls})}},[Jn,Fi,Li,ji,qi,Qn,$i,Kn]),{isMounted:Ni,styles:Ai}}function getNodeChildren(e,n,l){return l===void 0&&(l=!0),e.filter(g=>{var jn;return g.parentId===n&&(!l||((jn=g.context)==null?void 0:jn.open))}).flatMap(g=>[g,...getNodeChildren(e,g.id,l)])}function isPointInPolygon(e,n){const[l,d]=e;let g=!1;const jn=n.length;for(let Un=0,zn=jn-1;Un<jn;zn=Un++){const[qn,Kn]=n[Un]||[0,0],[Xn,Qn]=n[zn]||[0,0];Kn>=d!=Qn>=d&&l<=(Xn-qn)*(d-Kn)/(Qn-Kn)+qn&&(g=!g)}return g}function isInside(e,n){return e[0]>=n.x&&e[0]<=n.x+n.width&&e[1]>=n.y&&e[1]<=n.y+n.height}function safePolygon(e){e===void 0&&(e={});const{buffer:n=.5,blockPointerEvents:l=!1,requireIntent:d=!0}=e,g={current:-1};let jn=!1,Un=null,zn=null,qn=typeof performance<"u"?performance.now():0;function Kn(Qn,Jn){const Ai=performance.now(),Ri=Ai-qn;if(Un===null||zn===null||Ri===0)return Un=Qn,zn=Jn,qn=Ai,null;const Ni=Qn-Un,$i=Jn-zn,ji=Math.sqrt(Ni*Ni+$i*$i)/Ri;return Un=Qn,zn=Jn,qn=Ai,ji}const Xn=Qn=>{let{x:Jn,y:Ai,placement:Ri,elements:Ni,onClose:$i,nodeId:Li,tree:ji}=Qn;return function(qi){function zi(){clearTimeoutIfSet(g),$i()}if(clearTimeoutIfSet(g),!Ni.domReference||!Ni.floating||Ri==null||Jn==null||Ai==null)return;const{clientX:Gi,clientY:Xi}=qi,as=[Gi,Xi],ls=getTarget(qi),Zi=qi.type==="mouseleave",gs=contains(Ni.floating,ls),bs=contains(Ni.domReference,ls),Ss=Ni.domReference.getBoundingClientRect(),ss=Ni.floating.getBoundingClientRect(),Es=Ri.split("-")[0],rs=Jn>ss.right-ss.width/2,cs=Ai>ss.bottom-ss.height/2,ds=isInside(as,Ss),Cs=ss.width>Ss.width,Wi=ss.height>Ss.height,es=(Cs?Ss:ss).left,fs=(Cs?Ss:ss).right,Ki=(Wi?Ss:ss).top,ws=(Wi?Ss:ss).bottom;if(gs&&(jn=!0,!Zi))return;if(bs&&(jn=!1),bs&&!Zi){jn=!0;return}if(Zi&&isElement$1(qi.relatedTarget)&&contains(Ni.floating,qi.relatedTarget)||ji&&getNodeChildren(ji.nodesRef.current,Li).length)return;if(Es==="top"&&Ai>=Ss.bottom-1||Es==="bottom"&&Ai<=Ss.top+1||Es==="left"&&Jn>=Ss.right-1||Es==="right"&&Jn<=Ss.left+1)return zi();let _s=[];switch(Es){case"top":_s=[[es,Ss.top+1],[es,ss.bottom-1],[fs,ss.bottom-1],[fs,Ss.top+1]];break;case"bottom":_s=[[es,ss.top+1],[es,Ss.bottom-1],[fs,Ss.bottom-1],[fs,ss.top+1]];break;case"left":_s=[[ss.right-1,ws],[ss.right-1,Ki],[Ss.left+1,Ki],[Ss.left+1,ws]];break;case"right":_s=[[Ss.right-1,ws],[Ss.right-1,Ki],[ss.left+1,Ki],[ss.left+1,ws]];break}function Is(Ms){let[Os,Rs]=Ms;switch(Es){case"top":{const Xs=[Cs?Os+n/2:rs?Os+n*4:Os-n*4,Rs+n+1],_a=[Cs?Os-n/2:rs?Os+n*4:Os-n*4,Rs+n+1],fl=[[ss.left,rs||Cs?ss.bottom-n:ss.top],[ss.right,rs?Cs?ss.bottom-n:ss.top:ss.bottom-n]];return[Xs,_a,...fl]}case"bottom":{const Xs=[Cs?Os+n/2:rs?Os+n*4:Os-n*4,Rs-n],_a=[Cs?Os-n/2:rs?Os+n*4:Os-n*4,Rs-n],fl=[[ss.left,rs||Cs?ss.top+n:ss.bottom],[ss.right,rs?Cs?ss.top+n:ss.bottom:ss.top+n]];return[Xs,_a,...fl]}case"left":{const Xs=[Os+n+1,Wi?Rs+n/2:cs?Rs+n*4:Rs-n*4],_a=[Os+n+1,Wi?Rs-n/2:cs?Rs+n*4:Rs-n*4];return[...[[cs||Wi?ss.right-n:ss.left,ss.top],[cs?Wi?ss.right-n:ss.left:ss.right-n,ss.bottom]],Xs,_a]}case"right":{const Xs=[Os-n,Wi?Rs+n/2:cs?Rs+n*4:Rs-n*4],_a=[Os-n,Wi?Rs-n/2:cs?Rs+n*4:Rs-n*4],fl=[[cs||Wi?ss.left+n:ss.right,ss.top],[cs?Wi?ss.left+n:ss.right:ss.left+n,ss.bottom]];return[Xs,_a,...fl]}}}if(!isPointInPolygon([Gi,Xi],_s)){if(jn&&!ds)return zi();if(!Zi&&d){const Ms=Kn(qi.clientX,qi.clientY);if(Ms!==null&&Ms<.1)return zi()}isPointInPolygon([Gi,Xi],Is([Jn,Ai]))?!jn&&d&&(g.current=window.setTimeout(zi,40)):zi()}}};return Xn.__options={blockPointerEvents:l},Xn}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var e=requireReact();function n(Qn,Jn){return Qn===Jn&&(Qn!==0||1/Qn===1/Jn)||Qn!==Qn&&Jn!==Jn}var l=typeof Object.is=="function"?Object.is:n,d=e.useState,g=e.useEffect,jn=e.useLayoutEffect,Un=e.useDebugValue;function zn(Qn,Jn){var Ai=Jn(),Ri=d({inst:{value:Ai,getSnapshot:Jn}}),Ni=Ri[0].inst,$i=Ri[1];return jn(function(){Ni.value=Ai,Ni.getSnapshot=Jn,qn(Ni)&&$i({inst:Ni})},[Qn,Ai,Jn]),g(function(){return qn(Ni)&&$i({inst:Ni}),Qn(function(){qn(Ni)&&$i({inst:Ni})})},[Qn]),Un(Ai),Ai}function qn(Qn){var Jn=Qn.getSnapshot;Qn=Qn.value;try{var Ai=Jn();return!l(Qn,Ai)}catch{return!0}}function Kn(Qn,Jn){return Jn()}var Xn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kn:zn;return useSyncExternalStoreShim_production.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:Xn,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var e=requireReact(),n=requireShim();function l(Kn,Xn){return Kn===Xn&&(Kn!==0||1/Kn===1/Xn)||Kn!==Kn&&Xn!==Xn}var d=typeof Object.is=="function"?Object.is:l,g=n.useSyncExternalStore,jn=e.useRef,Un=e.useEffect,zn=e.useMemo,qn=e.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(Kn,Xn,Qn,Jn,Ai){var Ri=jn(null);if(Ri.current===null){var Ni={hasValue:!1,value:null};Ri.current=Ni}else Ni=Ri.current;Ri=zn(function(){function Li(Gi){if(!ji){if(ji=!0,Fi=Gi,Gi=Jn(Gi),Ai!==void 0&&Ni.hasValue){var Xi=Ni.value;if(Ai(Xi,Gi))return qi=Xi}return qi=Gi}if(Xi=qi,d(Fi,Gi))return Xi;var as=Jn(Gi);return Ai!==void 0&&Ai(Xi,as)?(Fi=Gi,Xi):(Fi=Gi,qi=as)}var ji=!1,Fi,qi,zi=Qn===void 0?null:Qn;return[function(){return Li(Xn())},zi===null?void 0:function(){return Li(zi())}]},[Xn,Qn,Jn,Ai]);var $i=g(Kn,Ri[0],Ri[1]);return Un(function(){Ni.hasValue=!0,Ni.value=$i},[$i]),qn($i),$i},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();function useStore(e,n=l=>l){return withSelectorExports.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,n,shallow)}function shallow(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[d,g]of e)if(!n.has(d)||!Object.is(g,n.get(d)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const d of e)if(!n.has(d))return!1;return!0}if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();const l=getOwnKeys(e);if(l.length!==getOwnKeys(n).length)return!1;for(let d=0;d<l.length;d++)if(!Object.prototype.hasOwnProperty.call(n,l[d])||!Object.is(e[l[d]],n[l[d]]))return!1;return!0}function getOwnKeys(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}var ln=Object.defineProperty,cn=(e,n,l)=>n in e?ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,ee$1=(e,n,l)=>cn(e,typeof n!="symbol"?n+"":n,l);const _t=reactExports.createContext(void 0);function q(e){return reactExports.useContext(_t)}const lo=reactExports.createContext(void 0);function w(){return reactExports.useContext(lo)}function v(e){const n=q();if(!(n!=null&&n.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return n.editor}function M$1(){return q().editor.dictionary}const co=e=>{const n=w(),l=M$1(),d=v(),g=d.getBlock(e.blockId),[jn,Un]=reactExports.useState(""),zn=reactExports.useCallback(Xn=>{Un(Xn.currentTarget.value)},[]),qn=reactExports.useCallback(Xn=>{Xn.key==="Enter"&&(Xn.preventDefault(),d.updateBlock(g.id,{props:{name:po$3(jn),url:jn}}))},[d,g.id,jn]),Kn=reactExports.useCallback(()=>{d.updateBlock(g.id,{props:{name:po$3(jn),url:jn}})},[d,g.id,jn]);return jsxRuntimeExports.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[jsxRuntimeExports.jsx(n.FilePanel.TextInput,{className:"bn-text-input",placeholder:l.file_panel.embed.url_placeholder,value:jn,onChange:zn,onKeyDown:qn,"data-test":"embed-input"}),jsxRuntimeExports.jsx(n.FilePanel.Button,{className:"bn-button",onClick:Kn,"data-test":"embed-input-button",children:l.file_panel.embed.embed_button[g.type]||l.file_panel.embed.embed_button.file})]})},ao=e=>{var n,l;const d=w(),g=M$1(),{setLoading:jn}=e,Un=v(),zn=Un.getBlock(e.blockId),[qn,Kn]=reactExports.useState(!1);reactExports.useEffect(()=>{qn&&setTimeout(()=>{Kn(!1)},3e3)},[qn]);const Xn=reactExports.useCallback(Ai=>{if(Ai===null)return;async function Ri(Ni){if(jn(!0),Un.uploadFile!==void 0)try{let $i=await Un.uploadFile(Ni,e.blockId);typeof $i=="string"&&($i={props:{name:Ni.name,url:$i}}),Un.updateBlock(e.blockId,$i)}catch{Kn(!0)}finally{jn(!1)}}Ri(Ai)},[e.blockId,Un,jn]),Qn=Un.schema.blockSpecs[zn.type],Jn=(l=(n=Qn.implementation.meta)==null?void 0:n.fileBlockAccept)!=null&&l.length?Qn.implementation.meta.fileBlockAccept.join(","):"*/*";return jsxRuntimeExports.jsxs(d.FilePanel.TabPanel,{className:"bn-tab-panel",children:[jsxRuntimeExports.jsx(d.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:Jn,placeholder:g.file_panel.upload.file_placeholder[zn.type]||g.file_panel.upload.file_placeholder.file,value:null,onChange:Xn}),qn&&jsxRuntimeExports.jsx("div",{className:"bn-error-text",children:g.file_panel.upload.upload_error})]})},Et=e=>{const n=w(),l=M$1(),d=v(),[g,jn]=reactExports.useState(!1),Un=e.tabs??[...d.uploadFile!==void 0?[{name:l.file_panel.upload.title,tabPanel:jsxRuntimeExports.jsx(ao,{blockId:e.blockId,setLoading:jn})}]:[],{name:l.file_panel.embed.title,tabPanel:jsxRuntimeExports.jsx(co,{blockId:e.blockId})}],[zn,qn]=reactExports.useState(e.defaultOpenTab||Un[0].name);return jsxRuntimeExports.jsx(n.FilePanel.Root,{className:"bn-panel",defaultOpenTab:zn,openTab:zn,setOpenTab:qn,tabs:Un,loading:g})};function so(e){let n=new DOMRect;const l="getBoundingClientRect"in e?()=>e.getBoundingClientRect():()=>e.element.getBoundingClientRect();return()=>"element"in e&&(e.cacheMountedBoundingClientRect??!0)?(e.element.isConnected&&(n=l()),n):l()}const U=e=>{var n,l,d;const{refs:g,floatingStyles:jn,context:Un}=useFloating({whileElementsMounted:autoUpdate,...e.useFloatingOptions}),{isMounted:zn,styles:qn}=useTransitionStyles(Un,e.useTransitionStylesProps),{status:Kn}=useTransitionStatus(Un,e.useTransitionStatusProps),Xn=useDismiss(Un,e.useDismissProps),Qn=useHover$1(Un,{enabled:!1,...e.useHoverProps}),{getFloatingProps:Jn}=useInteractions([Xn,Qn]),Ai=reactExports.useRef(""),Ri=reactExports.useRef(null),Ni=useMergeRefs([Ri,g.setFloating]);if(reactExports.useEffect(()=>{if(e.reference){const Li="element"in e.reference?e.reference.element:void 0;Li!==void 0&&g.setReference(Li),g.setPositionReference({getBoundingClientRect:so(e.reference),contextElement:Li})}},[e.reference,g]),reactExports.useEffect(()=>{var Li;(Kn==="initial"||Kn==="open")&&(Li=Ri.current)!=null&&Li.innerHTML&&(Ai.current=Ri.current.innerHTML)},[Kn,e.reference,e.children]),!zn)return!1;const $i={...e.elementProps,style:{display:"flex",...(n=e.elementProps)==null?void 0:n.style,zIndex:`calc(var(--bn-ui-base-z-index) + ${((d=(l=e.elementProps)==null?void 0:l.style)==null?void 0:d.zIndex)||0})`,...jn,...qn},...Jn()};return Kn==="close"?jsxRuntimeExports.jsx("div",{ref:Ni,...$i,dangerouslySetInnerHTML:{__html:Ai.current}}):jsxRuntimeExports.jsx("div",{ref:Ni,...$i,children:e.children})},Bt=e=>{const{blockId:n,children:l,...d}=e,g=v(),jn=reactExports.useMemo(()=>g.transact(Un=>{if(!n)return;const zn=Tt$2(n,Un.doc);if(!zn)return;const{node:qn}=g.prosemirrorView.domAtPos(zn.posBeforeNode+1);if(qn instanceof Element)return{element:qn}}),[g,n]);return jsxRuntimeExports.jsx(U,{reference:jn,...d,children:n!==void 0&&l})};function T(e,n){const l=(n?.editor??v()).getExtension(e);if(!l)throw new Error("Extension not found",{cause:{plugin:e}});return l}function E(e,n){const{store:l}=T(e,n);if(!l)throw new Error("Store not found on plugin",{cause:{plugin:e}});return useStore(l,n?.selector)}const uo=e=>{const n=v(),l=T(I$2),d=E(I$2),g=reactExports.useMemo(()=>({useFloatingOptions:{open:!!d,onOpenChange:(Un,zn,qn)=>{Un||l.closeMenu(),qn==="escape-key"&&n.focus()},middleware:[offset(10),flip()]},elementProps:{style:{zIndex:90}},...e.floatingUIOptions}),[d,n,l,e.floatingUIOptions]),jn=e.filePanel||Et;return jsxRuntimeExports.jsx(Bt,{blockId:d,...g,children:d&&jsxRuntimeExports.jsx(jn,{blockId:d})})};function mo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fo=function e(n,l){if(n===l)return!0;if(n&&l&&typeof n=="object"&&typeof l=="object"){if(n.constructor!==l.constructor)return!1;var d,g,jn;if(Array.isArray(n)){if(d=n.length,d!=l.length)return!1;for(g=d;g--!==0;)if(!e(n[g],l[g]))return!1;return!0}if(n instanceof Map&&l instanceof Map){if(n.size!==l.size)return!1;for(g of n.entries())if(!l.has(g[0]))return!1;for(g of n.entries())if(!e(g[1],l.get(g[0])))return!1;return!0}if(n instanceof Set&&l instanceof Set){if(n.size!==l.size)return!1;for(g of n.entries())if(!l.has(g[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(l)){if(d=n.length,d!=l.length)return!1;for(g=d;g--!==0;)if(n[g]!==l[g])return!1;return!0}if(n.constructor===RegExp)return n.source===l.source&&n.flags===l.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===l.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===l.toString();if(jn=Object.keys(n),d=jn.length,d!==Object.keys(l).length)return!1;for(g=d;g--!==0;)if(!Object.prototype.hasOwnProperty.call(l,jn[g]))return!1;for(g=d;g--!==0;){var Un=jn[g];if(!(Un==="_owner"&&n.$$typeof)&&!e(n[Un],l[Un]))return!1}return!0}return n!==n&&l!==l};const ho=mo(fo);var Ie$1={exports:{}},Ve$1={},se={exports:{}},Te={};var nt$1;function go(){if(nt$1)return Te;nt$1=1;var e=React;function n(Qn,Jn){return Qn===Jn&&(Qn!==0||1/Qn===1/Jn)||Qn!==Qn&&Jn!==Jn}var l=typeof Object.is=="function"?Object.is:n,d=e.useState,g=e.useEffect,jn=e.useLayoutEffect,Un=e.useDebugValue;function zn(Qn,Jn){var Ai=Jn(),Ri=d({inst:{value:Ai,getSnapshot:Jn}}),Ni=Ri[0].inst,$i=Ri[1];return jn(function(){Ni.value=Ai,Ni.getSnapshot=Jn,qn(Ni)&&$i({inst:Ni})},[Qn,Ai,Jn]),g(function(){return qn(Ni)&&$i({inst:Ni}),Qn(function(){qn(Ni)&&$i({inst:Ni})})},[Qn]),Un(Ai),Ai}function qn(Qn){var Jn=Qn.getSnapshot;Qn=Qn.value;try{var Ai=Jn();return!l(Qn,Ai)}catch{return!0}}function Kn(Qn,Jn){return Jn()}var Xn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kn:zn;return Te.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:Xn,Te}var rt$1;function Lt(){return rt$1||(rt$1=1,se.exports=go()),se.exports}var it$1;function po(){if(it$1)return Ve$1;it$1=1;var e=React,n=Lt();function l(Kn,Xn){return Kn===Xn&&(Kn!==0||1/Kn===1/Xn)||Kn!==Kn&&Xn!==Xn}var d=typeof Object.is=="function"?Object.is:l,g=n.useSyncExternalStore,jn=e.useRef,Un=e.useEffect,zn=e.useMemo,qn=e.useDebugValue;return Ve$1.useSyncExternalStoreWithSelector=function(Kn,Xn,Qn,Jn,Ai){var Ri=jn(null);if(Ri.current===null){var Ni={hasValue:!1,value:null};Ri.current=Ni}else Ni=Ri.current;Ri=zn(function(){function Li(Gi){if(!ji){if(ji=!0,Fi=Gi,Gi=Jn(Gi),Ai!==void 0&&Ni.hasValue){var Xi=Ni.value;if(Ai(Xi,Gi))return qi=Xi}return qi=Gi}if(Xi=qi,d(Fi,Gi))return Xi;var as=Jn(Gi);return Ai!==void 0&&Ai(Xi,as)?(Fi=Gi,Xi):(Fi=Gi,qi=as)}var ji=!1,Fi,qi,zi=Qn===void 0?null:Qn;return[function(){return Li(Xn())},zi===null?void 0:function(){return Li(zi())}]},[Xn,Qn,Jn,Ai]);var $i=g(Kn,Ri[0],Ri[1]);return Un(function(){Ni.hasValue=!0,Ni.value=$i},[$i]),qn($i),$i},Ve$1}Ie$1.exports=po();var vo=Ie$1.exports;const wo=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;class ko{constructor(n){ee$1(this,"transactionNumber",0),ee$1(this,"lastTransactionNumber",0),ee$1(this,"lastSnapshot"),ee$1(this,"editor"),ee$1(this,"subscribers",new Set),this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n,l){if(this.editor=n,this.editor){const d=()=>{this.transactionNumber+=1,this.subscribers.forEach(Un=>Un())},g=this.editor._tiptapEditor,jn={all:"transaction",selection:"selectionUpdate",change:"update"};return g.on(jn[l],d),()=>{g.off(jn[l],d)}}}}function R(e){const n=q(),l=e.editor||n?.editor||null,d=e.on||"all",[g]=reactExports.useState(()=>new ko(l)),jn=vo.useSyncExternalStoreWithSelector(g.subscribe,g.getSnapshot,g.getServerSnapshot,e.selector,e.equalityFn??ho);return wo(()=>g.watch(l,d),[l,g,d]),reactExports.useDebugValue(jn),jn}const Ue$1=e=>{const{position:n,children:l,...d}=e,{from:g,to:jn}=n||{},Un=v(),zn=reactExports.useMemo(()=>{var qn;if(!(g===void 0||jn===void 0))return{element:((qn=Un.domElement)==null?void 0:qn.firstElementChild)||void 0,getBoundingClientRect:()=>posToDOMRect(Un.prosemirrorView,g,jn??g)}},[Un,g,jn]);return jsxRuntimeExports.jsx(U,{reference:zn,...d,children:n!==void 0&&l})};var Rt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ct$1=React.createContext&&React.createContext(Rt),Ho=["attr","size","title"];function xo(e,n){if(e==null)return{};var l=yo(e,n),d,g;if(Object.getOwnPropertySymbols){var jn=Object.getOwnPropertySymbols(e);for(g=0;g<jn.length;g++)d=jn[g],!(n.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(e,d)&&(l[d]=e[d])}return l}function yo(e,n){if(e==null)return{};var l={};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if(n.indexOf(d)>=0)continue;l[d]=e[d]}return l}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(e[d]=l[d])}return e},ge.apply(this,arguments)}function at$1(e,n){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);n&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),l.push.apply(l,d)}return l}function be(e){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?at$1(Object(l),!0).forEach(function(d){So(e,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):at$1(Object(l)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(l,d))})}return e}function So(e,n,l){return n=Mo(n),n in e?Object.defineProperty(e,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[n]=l,e}function Mo(e){var n=Vo(e,"string");return typeof n=="symbol"?n:n+""}function Vo(e,n){if(typeof e!="object"||!e)return e;var l=e[Symbol.toPrimitive];if(l!==void 0){var d=l.call(e,n);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ot(e){return e&&e.map((n,l)=>React.createElement(n.tag,be({key:l},n.attr),Ot(n.child)))}function k(e){return n=>React.createElement(To,ge({attr:be({},e.attr)},n),Ot(e.child))}function To(e){var n=l=>{var{attr:d,size:g,title:jn}=e,Un=xo(e,Ho),zn=g||l.size||"1em",qn;return l.className&&(qn=l.className),e.className&&(qn=(qn?qn+" ":"")+e.className),React.createElement("svg",ge({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,d,Un,{className:qn,style:be(be({color:e.color||l.color},l.style),e.style),height:zn,width:zn,xmlns:"http://www.w3.org/2000/svg"}),jn&&React.createElement("title",null,jn),e.children)};return ct$1!==void 0?React.createElement(ct$1.Consumer,null,l=>n(l)):n(Rt)}function _o(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function It(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function Eo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function Bo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}function je$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function Lo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)}function Ro(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}function Oo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)}function Io(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)}function Po(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)}function No(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}function st$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function pe(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function Ce(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function ve(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function Pt$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(e)}function Nt$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function At(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(e)}function Ao(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function Zo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function dt$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function Do(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)}function Fo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function Zt(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function Dt(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function Ft$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function Gt(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function Go(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function zo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function zt(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function Uo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)}function jo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)}function $e$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function $o(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)}function Wo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)}function Ut(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function qo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function Ko(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function jt(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(e)}function $t(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function Yo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function Jo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function Qo(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function er(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function tr(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function nr(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function or(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function rr(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11V13H19V11H5Z"},child:[]}]})(e)}function ir(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)}function ut$1(e){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}const lr={bold:Po,italic:Do,underline:$o,strike:Uo,code:Bo};function cr(e,n){return e in n.schema.styleSchema&&n.schema.styleSchema[e].type===e&&n.schema.styleSchema[e].propSchema==="boolean"}const de=e=>{const n=M$1(),l=w(),d=v(),g=R({editor:d,selector:({editor:zn})=>{var qn;if(!(!zn.isEditable||!cr(e.basicTextStyle,zn)||!(((qn=zn.getSelection())==null?void 0:qn.blocks)||[zn.getTextCursorPosition().block]).find(Kn=>Kn.content!==void 0)))return e.basicTextStyle in zn.getActiveStyles()?{active:!0}:{active:!1}}}),jn=reactExports.useCallback(zn=>{d.focus(),d.toggleStyles({[zn]:!0})},[d,e]);if(g===void 0)return null;const Un=lr[e.basicTextStyle];return jsxRuntimeExports.jsx(l.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>jn(e.basicTextStyle),isSelected:g.active,label:n.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:n.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:L(n.formatting_toolbar[e.basicTextStyle].secondary_tooltip,n.generic.ctrl_shortcut),icon:jsxRuntimeExports.jsx(Un,{})})},Pe=e=>{const n=e.textColor||"default",l=e.backgroundColor||"default",d=e.size||16,g=reactExports.useMemo(()=>({pointerEvents:"none",fontSize:(d*.75).toString()+"px",height:d.toString()+"px",lineHeight:d.toString()+"px",textAlign:"center",width:d.toString()+"px"}),[d]);return jsxRuntimeExports.jsx("div",{className:"bn-color-icon","data-background-color":l,"data-text-color":n,style:g,children:"A"})},mt$1=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],xe=e=>{const n=w(),l=M$1();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(()=>e.text?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(n.Generic.Menu.Label,{children:l.color_picker.text_title}),mt$1.map(d=>jsxRuntimeExports.jsx(n.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.text.setColor(d)},"data-test":"text-color-"+d,icon:jsxRuntimeExports.jsx(Pe,{textColor:d,size:e.iconSize}),checked:e.text.color===d,children:l.color_picker.colors[d]},"text-color-"+d))]}):null,{}),jsxRuntimeExports.jsx(()=>e.background?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(n.Generic.Menu.Label,{children:l.color_picker.background_title}),mt$1.map(d=>jsxRuntimeExports.jsx(n.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.background.setColor(d)},"data-test":"background-color-"+d,icon:jsxRuntimeExports.jsx(Pe,{backgroundColor:d,size:e.iconSize}),checked:e.background.color===d,children:l.color_picker.colors[d]},"background-color-"+d))]}):null,{})]})};function ue(e,n){return`${e}Color`in n.schema.styleSchema&&n.schema.styleSchema[`${e}Color`].type===`${e}Color`&&n.schema.styleSchema[`${e}Color`].propSchema==="string"}const ar=()=>{const e=w(),n=M$1(),l=v(),d=ue("text",l),g=ue("background",l),jn=R({editor:l,selector:({editor:qn})=>{var Kn;if(!qn.isEditable||!(((Kn=qn.getSelection())==null?void 0:Kn.blocks)||[qn.getTextCursorPosition().block]).find(Jn=>Jn.content!==void 0))return;const Xn=ue("text",qn),Qn=ue("background",qn);if(!(!Xn&&!Qn))return{textColor:Xn?qn.getActiveStyles().textColor||"default":void 0,backgroundColor:Qn?qn.getActiveStyles().backgroundColor||"default":void 0}}}),Un=reactExports.useCallback(qn=>{if(!d)throw Error("Tried to set text color, but style does not exist in editor schema.");qn==="default"?l.removeStyles({textColor:qn}):l.addStyles({textColor:qn}),setTimeout(()=>{l.focus()})},[l,d]),zn=reactExports.useCallback(qn=>{if(!g)throw Error("Tried to set background color, but style does not exist in editor schema.");qn==="default"?l.removeStyles({backgroundColor:qn}):l.addStyles({backgroundColor:qn}),setTimeout(()=>{l.focus()})},[g,l]);return jn===void 0?null:jsxRuntimeExports.jsxs(e.Generic.Menu.Root,{children:[jsxRuntimeExports.jsx(e.Generic.Menu.Trigger,{children:jsxRuntimeExports.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:n.formatting_toolbar.colors.tooltip,mainTooltip:n.formatting_toolbar.colors.tooltip,icon:jsxRuntimeExports.jsx(Pe,{textColor:jn.textColor,backgroundColor:jn.backgroundColor,size:20})})}),jsxRuntimeExports.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:jsxRuntimeExports.jsx(xe,{text:jn.textColor?{color:jn.textColor,setColor:Un}:void 0,background:jn.backgroundColor?{color:jn.backgroundColor,setColor:zn}:void 0})})]})},ft$1=e=>{for(const n of ko$2)if(e.startsWith(n))return e;return`${Co$1}://${e}`},Wt=e=>{const n=w(),l=M$1(),{editLink:d}=T(vo$2),{url:g,text:jn,showTextField:Un}=e,[zn,qn]=reactExports.useState(g),[Kn,Xn]=reactExports.useState(jn);reactExports.useEffect(()=>{qn(g),Xn(jn)},[jn,g]);const Qn=reactExports.useCallback(Ni=>{var $i,Li;Ni.key==="Enter"&&(Ni.preventDefault(),d(ft$1(zn),Kn,e.range.from),($i=e.setToolbarOpen)==null||$i.call(e,!1),(Li=e.setToolbarPositionFrozen)==null||Li.call(e,!1))},[d,zn,Kn,e]),Jn=reactExports.useCallback(Ni=>qn(Ni.currentTarget.value),[]),Ai=reactExports.useCallback(Ni=>Xn(Ni.currentTarget.value),[]),Ri=reactExports.useCallback(()=>{var Ni,$i;d(ft$1(zn),Kn,e.range.from),(Ni=e.setToolbarOpen)==null||Ni.call(e,!1),($i=e.setToolbarPositionFrozen)==null||$i.call(e,!1)},[d,zn,Kn,e]);return jsxRuntimeExports.jsxs(n.Generic.Form.Root,{children:[jsxRuntimeExports.jsx(n.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:jsxRuntimeExports.jsx(Zt,{}),autoFocus:!0,placeholder:l.link_toolbar.form.url_placeholder,value:zn,onKeyDown:Qn,onChange:Jn,onSubmit:Ri}),Un!==!1&&jsxRuntimeExports.jsx(n.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:jsxRuntimeExports.jsx($e$1,{}),placeholder:l.link_toolbar.form.title_placeholder,value:Kn,onKeyDown:Qn,onChange:Ai,onSubmit:Ri})]})};function sr(e){return"link"in e.schema.inlineContentSchema&&e.schema.inlineContentSchema.link==="link"}const dr=()=>{const e=v(),n=w(),l=M$1(),d=T(yo$2),{showSelection:g}=T(f),[jn,Un]=reactExports.useState(!1);reactExports.useEffect(()=>(g(jn),()=>g(!1)),[jn,g]);const zn=R({editor:e,selector:({editor:qn})=>{var Kn;if(!(!qn.isEditable||!sr(qn)||To$3(qn.prosemirrorState.selection)||!(((Kn=qn.getSelection())==null?void 0:Kn.blocks)||[qn.getTextCursorPosition().block]).find(Xn=>Xn.content!==void 0)))return{url:qn.getSelectedLinkUrl(),text:qn.getSelectedText(),range:{from:qn.prosemirrorState.selection.from,to:qn.prosemirrorState.selection.to}}}});return reactExports.useEffect(()=>{var qn;const Kn=Xn=>{(Xn.ctrlKey||Xn.metaKey)&&Xn.key==="k"&&(Un(!0),Xn.preventDefault())};return(qn=e.domElement)==null||qn.addEventListener("keydown",Kn),()=>{var Xn;(Xn=e.domElement)==null||Xn.removeEventListener("keydown",Kn)}},[e.domElement]),zn===void 0?null:jsxRuntimeExports.jsxs(n.Generic.Popover.Root,{open:jn,children:[jsxRuntimeExports.jsx(n.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:l.formatting_toolbar.link.tooltip,mainTooltip:l.formatting_toolbar.link.tooltip,secondaryTooltip:L(l.formatting_toolbar.link.secondary_tooltip,l.generic.ctrl_shortcut),icon:jsxRuntimeExports.jsx(Zt,{}),onClick:()=>Un(!0)})}),jsxRuntimeExports.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:jsxRuntimeExports.jsx(Wt,{url:zn.url||"",text:zn.text,range:zn.range,showTextField:!1,setToolbarOpen:qn=>d.store.setState(qn)})})]})},ur=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:qn})=>{var Kn;if(!qn.isEditable)return;const Xn=((Kn=qn.getSelection())==null?void 0:Kn.blocks)||[qn.getTextCursorPosition().block];if(Xn.length!==1)return;const Qn=Xn[0];if(Lo$2(Qn,qn,Qn.type,{url:"string",caption:"string"}))return Qn}}),[g,jn]=reactExports.useState();reactExports.useEffect(()=>{d!==void 0&&jn(d.props.caption)},[d]);const Un=reactExports.useCallback(qn=>jn(qn.currentTarget.value),[]),zn=reactExports.useCallback(qn=>{d!==void 0&&b$2(l,d.type,{caption:"string"})&&qn.key==="Enter"&&(qn.preventDefault(),l.updateBlock(d.id,{props:{caption:g}}))},[d,g,l]);return d===void 0?null:jsxRuntimeExports.jsxs(n.Generic.Popover.Root,{children:[jsxRuntimeExports.jsx(n.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:jsxRuntimeExports.jsx(dt$1,{})})}),jsxRuntimeExports.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:jsxRuntimeExports.jsx(n.Generic.Form.Root,{children:jsxRuntimeExports.jsx(n.Generic.Form.TextInput,{name:"file-caption",icon:jsxRuntimeExports.jsx(dt$1,{}),value:g||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:zn,onChange:Un})})})]})},mr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:jn})=>{var Un;if(!jn.isEditable)return;const zn=((Un=jn.getSelection())==null?void 0:Un.blocks)||[jn.getTextCursorPosition().block];if(zn.length!==1)return;const qn=zn[0];if(Lo$2(qn,jn,qn.type,{url:"string"}))return qn}}),g=reactExports.useCallback(()=>{d!==void 0&&(l.focus(),l.removeBlocks([d.id]))},[d,l]);return d===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[d.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[d.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:jsxRuntimeExports.jsx(Qo,{}),onClick:g})},fr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:qn})=>{var Kn;if(!qn.isEditable)return;const Xn=((Kn=qn.getSelection())==null?void 0:Kn.blocks)||[qn.getTextCursorPosition().block];if(Xn.length!==1)return;const Qn=Xn[0];if(Lo$2(Qn,qn,Qn.type,{url:"string",name:"string"}))return Qn}}),[g,jn]=reactExports.useState();reactExports.useEffect(()=>{d!==void 0&&jn(d.props.name)},[d]);const Un=reactExports.useCallback(qn=>jn(qn.currentTarget.value),[]),zn=reactExports.useCallback(qn=>{d!==void 0&&b$2(l,d.type,{name:"string"})&&qn.key==="Enter"&&(qn.preventDefault(),l.updateBlock(d.id,{props:{name:g}}))},[d,g,l]);return d===void 0?null:jsxRuntimeExports.jsxs(n.Generic.Popover.Root,{children:[jsxRuntimeExports.jsx(n.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[d.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[d.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:jsxRuntimeExports.jsx(st$1,{})})}),jsxRuntimeExports.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:jsxRuntimeExports.jsx(n.Generic.Form.Root,{children:jsxRuntimeExports.jsx(n.Generic.Form.TextInput,{name:"file-name",icon:jsxRuntimeExports.jsx(st$1,{}),value:g||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[d.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:zn,onChange:Un})})})]})},hr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:g})=>{var jn;if(!g.isEditable)return;const Un=((jn=g.getSelection())==null?void 0:jn.blocks)||[g.getTextCursorPosition().block];if(Un.length!==1)return;const zn=Un[0];if(Lo$2(zn,g,zn.type,{url:"string"}))return zn}});return d===void 0?null:jsxRuntimeExports.jsxs(n.Generic.Popover.Root,{position:"bottom",children:[jsxRuntimeExports.jsx(n.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",mainTooltip:e.formatting_toolbar.file_replace.tooltip[d.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[d.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:jsxRuntimeExports.jsx(Ko,{})})}),jsxRuntimeExports.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:jsxRuntimeExports.jsx(Et,{blockId:d.id})})]})},gr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:jn})=>{var Un;if(!(!jn.isEditable||!(((Un=jn.getSelection())==null?void 0:Un.blocks)||[jn.getTextCursorPosition().block]).find(zn=>zn.content!==void 0)))return{canNestBlock:jn.canNestBlock()}}}),g=reactExports.useCallback(()=>{d!==void 0&&d.canNestBlock&&(l.focus(),l.nestBlock())},[l,d]);return d===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:g,isDisabled:!d.canNestBlock,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:L(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:jsxRuntimeExports.jsx(Zo,{})})},br=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:jn})=>{var Un;if(!(!jn.isEditable||!(((Un=jn.getSelection())==null?void 0:Un.blocks)||[jn.getTextCursorPosition().block]).find(zn=>zn.content!==void 0)))return{canUnnestBlock:jn.canUnnestBlock()}}}),g=reactExports.useCallback(()=>{d!==void 0&&d.canUnnestBlock&&(l.focus(),l.unnestBlock())},[l,d]);return d===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:g,isDisabled:!d.canUnnestBlock,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:L(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:jsxRuntimeExports.jsx(Ao,{})})},pr=e=>[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:$e$1},{name:e.slash_menu.heading.title,type:"heading",props:{level:1,isToggleable:!1},icon:pe},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2,isToggleable:!1},icon:Ce},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3,isToggleable:!1},icon:ve},{name:e.slash_menu.heading_4.title,type:"heading",props:{level:4,isToggleable:!1},icon:Pt$1},{name:e.slash_menu.heading_5.title,type:"heading",props:{level:5,isToggleable:!1},icon:Nt$1},{name:e.slash_menu.heading_6.title,type:"heading",props:{level:6,isToggleable:!1},icon:At},{name:e.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:pe},{name:e.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:Ce},{name:e.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:ve},{name:e.slash_menu.quote.title,type:"quote",icon:zt},{name:e.slash_menu.toggle_list.title,type:"toggleListItem",icon:jt},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:Gt},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:Ft$1},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:Dt}],Cr=e=>{const n=w(),l=v(),d=R({editor:l,selector:({editor:zn})=>{var qn;return((qn=zn.getSelection())==null?void 0:qn.blocks)||[zn.getTextCursorPosition().block]}}),g=d[0],jn=reactExports.useMemo(()=>(e.items||pr(l.dictionary)).filter(zn=>b$2(l,zn.type,Object.fromEntries(Object.entries(zn.props||{}).map(([qn,Kn])=>[qn,typeof Kn])))),[l,e.items]),Un=reactExports.useMemo(()=>jn.map(zn=>{const qn=zn.icon,Kn=zn.type===g.type,Xn=Object.entries(zn.props||{}).filter(([Qn,Jn])=>Jn!==g.props[Qn]).length===0;return{text:zn.name,icon:jsxRuntimeExports.jsx(qn,{size:16}),onClick:()=>{l.focus(),l.transact(()=>{for(const Qn of d)l.updateBlock(Qn,{type:zn.type,props:zn.props})})},isSelected:Kn&&Xn}}),[l,jn,g.props,g.type,d]);return!reactExports.useMemo(()=>Un.find(zn=>zn.isSelected)!==void 0,[Un])||!l.isEditable?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Select,{className:"bn-select",items:Un})},vr=()=>{const e=M$1(),n=w(),l=T("comments"),{store:d}=T(yo$2),g=reactExports.useCallback(()=>{l.startPendingComment(),d.setState(!1)},[l,d]);return jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:jsxRuntimeExports.jsx(It,{}),onClick:g})},wr=()=>v().getExtension("comments")?jsxRuntimeExports.jsx(vr,{}):null,kr=()=>{const e=M$1(),n=w(),l=v(),d=reactExports.useCallback(()=>{l._tiptapEditor.chain().focus().addPendingComment().run()},[l]);return!l._tiptapEditor.commands.addPendingComment||!l.isEditable?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:jsxRuntimeExports.jsx(It,{}),onClick:d})};function Ne(e,n){try{const l=new URL(e,n);if(l.protocol!=="javascript:")return l.href}catch{}return"#"}const Hr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:jn})=>{var Un;const zn=((Un=jn.getSelection())==null?void 0:Un.blocks)||[jn.getTextCursorPosition().block];if(zn.length!==1)return;const qn=zn[0];if(Lo$2(qn,jn,qn.type,{url:"string"}))return qn}}),g=reactExports.useCallback(()=>{d!==void 0&&(l.focus(),l.resolveFileUrl?l.resolveFileUrl(d.props.url).then(jn=>window.open(Ne(jn,window.location.href))):window.open(Ne(d.props.url,window.location.href)))},[d,l]);return d===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[d.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[d.type]||e.formatting_toolbar.file_download.tooltip.file,icon:jsxRuntimeExports.jsx(tr,{}),onClick:g})},xr=()=>{const e=M$1(),n=w(),l=v(),d=R({editor:l,selector:({editor:jn})=>{var Un;if(!jn.isEditable)return;const zn=((Un=jn.getSelection())==null?void 0:Un.blocks)||[jn.getTextCursorPosition().block];if(zn.length!==1)return;const qn=zn[0];if(Lo$2(qn,jn,qn.type,{url:"string",showPreview:"boolean"}))return qn}}),g=reactExports.useCallback(()=>{d!==void 0&&b$2(l,d.type,{showPreview:"boolean"})&&l.updateBlock(d.id,{props:{showPreview:!d.props.showPreview}})},[d,l]);return d===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:jsxRuntimeExports.jsx(qo,{}),isSelected:d.props.showPreview,onClick:g})},yr=()=>{const e=M$1(),n=w(),l=v(),d=T(To$2),g=R({editor:l,selector:({editor:Un})=>{var zn;if(!Un.isEditable||!Un.settings.tables.splitCells)return;const qn=((zn=Un.getSelection())==null?void 0:zn.blocks)||[Un.getTextCursorPosition().block];if(qn.length!==1)return;const Kn=qn[0];if(Kn.type==="table")return{mergeDirection:d.getMergeDirection(Kn)}}}),jn=reactExports.useCallback(()=>{d?.mergeCells()},[d]);return g===void 0?null:jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:g.mergeDirection==="horizontal"?jsxRuntimeExports.jsx(Go,{}):jsxRuntimeExports.jsx(zo,{}),onClick:jn})},Sr=()=>v().getExtension(To$2)?jsxRuntimeExports.jsx(yr,{}):null,Mr={left:Oo,center:Lo,right:Io,justify:Ro},Be$1=e=>{const n=w(),l=M$1(),d=v(),g=R({editor:d,selector:({editor:zn})=>{var qn,Kn;if(!zn.isEditable)return;const Xn=((qn=zn.getSelection())==null?void 0:qn.blocks)||[zn.getTextCursorPosition().block],Qn=Xn[0];if(Lo$2(Qn,zn,Qn.type,{textAlignment:h$4.textAlignment}))return{textAlignment:Qn.props.textAlignment,blocks:Xn};if(Xn.length===1&&Lo$2(Qn,zn,"table"))return(Kn=zn.getExtension(To$2))!=null&&Kn.getCellSelection()?{textAlignment:S$1(Qn.content.rows[0].cells[0]).props.textAlignment,blocks:[Qn]}:void 0}}),jn=reactExports.useCallback(zn=>{var qn;if(g!==void 0){d.focus();for(const Kn of g.blocks)if(Lo$2(Kn,d,Kn.type,{textAlignment:h$4.textAlignment})&&b$2(d,Kn.type,{textAlignment:h$4.textAlignment}))d.updateBlock(Kn,{props:{textAlignment:zn}});else if(Kn.type==="table"){const Xn=(qn=d.getExtension(To$2))==null?void 0:qn.getCellSelection();if(!Xn)continue;const Qn=Kn.content.rows.map(Jn=>({...Jn,cells:Jn.cells.map(Ai=>S$1(Ai))}));Xn.cells.forEach(({row:Jn,col:Ai})=>{Qn[Jn].cells[Ai].props.textAlignment=zn}),d.updateBlock(Kn,{type:"table",content:{...Kn.content,type:"tableContent",rows:Qn}}),d.setTextCursorPosition(Kn)}}},[d,g]);if(g===void 0)return null;const Un=Mr[e.textAlignment];return jsxRuntimeExports.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)}`,onClick:()=>jn(e.textAlignment),isSelected:g.textAlignment===e.textAlignment,label:l.formatting_toolbar[`align_${e.textAlignment}`].tooltip,mainTooltip:l.formatting_toolbar[`align_${e.textAlignment}`].tooltip,icon:jsxRuntimeExports.jsx(Un,{})})},Vr=e=>[jsxRuntimeExports.jsx(Cr,{items:e},"blockTypeSelect"),jsxRuntimeExports.jsx(Sr,{},"tableCellMergeButton"),jsxRuntimeExports.jsx(ur,{},"fileCaptionButton"),jsxRuntimeExports.jsx(hr,{},"replaceFileButton"),jsxRuntimeExports.jsx(fr,{},"fileRenameButton"),jsxRuntimeExports.jsx(mr,{},"fileDeleteButton"),jsxRuntimeExports.jsx(Hr,{},"fileDownloadButton"),jsxRuntimeExports.jsx(xr,{},"filePreviewButton"),jsxRuntimeExports.jsx(de,{basicTextStyle:"bold"},"boldStyleButton"),jsxRuntimeExports.jsx(de,{basicTextStyle:"italic"},"italicStyleButton"),jsxRuntimeExports.jsx(de,{basicTextStyle:"underline"},"underlineStyleButton"),jsxRuntimeExports.jsx(de,{basicTextStyle:"strike"},"strikeStyleButton"),jsxRuntimeExports.jsx(Be$1,{textAlignment:"left"},"textAlignLeftButton"),jsxRuntimeExports.jsx(Be$1,{textAlignment:"center"},"textAlignCenterButton"),jsxRuntimeExports.jsx(Be$1,{textAlignment:"right"},"textAlignRightButton"),jsxRuntimeExports.jsx(ar,{},"colorStyleButton"),jsxRuntimeExports.jsx(gr,{},"nestBlockButton"),jsxRuntimeExports.jsx(br,{},"unnestBlockButton"),jsxRuntimeExports.jsx(dr,{},"createLinkButton"),jsxRuntimeExports.jsx(wr,{},"addCommentButton"),jsxRuntimeExports.jsx(kr,{},"addTiptapCommentButton")],qt=e=>{const n=w();return jsxRuntimeExports.jsx(n.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||Vr(e.blockTypeSelectItems)})},Tr=e=>{switch(e){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},_r=e=>{const n=v(),l=T(yo$2,{editor:n}),d=E(yo$2,{editor:n}),g=R({editor:n,selector:({editor:qn})=>l.store.state?{from:qn.prosemirrorState.selection.from,to:qn.prosemirrorState.selection.to}:void 0}),jn=R({editor:n,selector:({editor:qn})=>{const Kn=qn.getTextCursorPosition().block;return Lo$2(Kn,qn,Kn.type,{textAlignment:h$4.textAlignment})?Tr(Kn.props.textAlignment):"top-start"}}),Un=reactExports.useMemo(()=>({useFloatingOptions:{open:d,onOpenChange:(qn,Kn,Xn)=>{l.store.setState(qn),Xn==="escape-key"&&n.focus()},placement:jn,middleware:[offset(10),shift(),flip()]},elementProps:{style:{zIndex:40}},...e.floatingUIOptions}),[d,jn,e.floatingUIOptions,l.store,n]),zn=e.formattingToolbar||qt;return jsxRuntimeExports.jsx(Ue$1,{position:g,...Un,children:d&&jsxRuntimeExports.jsx(zn,{})})},Er=e=>{const n=w(),l=M$1(),{deleteLink:d}=T(vo$2);return jsxRuntimeExports.jsx(n.LinkToolbar.Button,{className:"bn-button",label:l.link_toolbar.delete.tooltip,mainTooltip:l.link_toolbar.delete.tooltip,isSelected:!1,onClick:()=>{var g;d(e.range.from),(g=e.setToolbarOpen)==null||g.call(e,!1)},icon:jsxRuntimeExports.jsx(Fo,{})})},Br=e=>{const n=w(),l=M$1();return jsxRuntimeExports.jsxs(n.Generic.Popover.Root,{onOpenChange:e.setToolbarPositionFrozen,children:[jsxRuntimeExports.jsx(n.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx(n.LinkToolbar.Button,{className:"bn-button",mainTooltip:l.link_toolbar.edit.tooltip,isSelected:!1,children:l.link_toolbar.edit.text})}),jsxRuntimeExports.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:jsxRuntimeExports.jsx(Wt,{url:e.url,text:e.text,range:e.range,setToolbarOpen:e.setToolbarOpen,setToolbarPositionFrozen:e.setToolbarPositionFrozen})})]})},Lr=e=>{const n=w(),l=M$1();return jsxRuntimeExports.jsx(n.LinkToolbar.Button,{className:"bn-button",mainTooltip:l.link_toolbar.open.tooltip,label:l.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(Ne(e.url,window.location.href),"_blank")},icon:jsxRuntimeExports.jsx(nr,{})})},Rr=e=>{const n=w();return jsxRuntimeExports.jsx(n.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Br,{url:e.url,text:e.text,range:e.range,setToolbarOpen:e.setToolbarOpen,setToolbarPositionFrozen:e.setToolbarPositionFrozen}),jsxRuntimeExports.jsx(Lr,{url:e.url}),jsxRuntimeExports.jsx(Er,{range:e.range,setToolbarOpen:e.setToolbarOpen})]})})},Or=e=>{const n=v(),[l,d]=reactExports.useState(!1),[g,jn]=reactExports.useState(!1),Un=T(vo$2),[zn,qn]=reactExports.useState(void 0);reactExports.useEffect(()=>{var Jn;const Ai=()=>{const Li=Un.getLinkAtSelection();if(!Li){qn(void 0),g||d(!1);return}qn({cursorType:"text",url:Li.mark.attrs.href,text:Li.text,range:Li.range,element:Un.getLinkElementAtPos(Li.range.from)}),g||d(!0)},Ri=Li=>{if(zn!==void 0&&zn.cursorType==="text"||!(Li.target instanceof HTMLElement))return;const ji=Un.getLinkAtElement(Li.target);ji&&qn({cursorType:"mouse",url:ji.mark.attrs.href,text:ji.text,range:ji.range,element:Un.getLinkElementAtPos(ji.range.from)})},Ni=n.onChange(Ai),$i=n.onSelectionChange(Ai);return(Jn=n.domElement)==null||Jn.addEventListener("mouseover",Ri),()=>{var Li;Ni(),$i(),(Li=n.domElement)==null||Li.removeEventListener("mouseover",Ri)}},[n,Un,zn,g]);const Kn=reactExports.useMemo(()=>({useFloatingOptions:{open:l,onOpenChange:(Jn,Ai,Ri)=>{g||zn!==void 0&&zn.cursorType==="text"&&Ri==="hover"||(Ri==="escape-key"&&n.focus(),d(Jn))},placement:"top-start",middleware:[offset(10),flip()]},useHoverProps:{enabled:zn!==void 0&&zn.cursorType==="mouse",delay:{open:250,close:250},handleClose:safePolygon()},elementProps:{style:{zIndex:50}},...e.floatingUIOptions}),[n,zn,e.floatingUIOptions,l,g]),Xn=reactExports.useMemo(()=>zn!=null&&zn.element?{element:zn.element}:void 0,[zn?.element]);if(!n.isEditable)return null;const Qn=e.linkToolbar||Rr;return jsxRuntimeExports.jsx(U,{reference:Xn,...Kn,children:zn&&jsxRuntimeExports.jsx(Qn,{url:zn.url,text:zn.text,range:zn.range,setToolbarOpen:d,setToolbarPositionFrozen:jn})})};function Ir(e){return k({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}const Pr=()=>{const e=w(),n=M$1(),l=v(),d=T(_n),g=E(Bo$2,{editor:l,selector:Un=>Un?.block}),jn=reactExports.useCallback(()=>{if(g===void 0)return;const Un=g.content;if(Un!==void 0&&Array.isArray(Un)&&Un.length===0)l.setTextCursorPosition(g),d.openSuggestionMenu("/");else{const zn=l.insertBlocks([{type:"paragraph"}],g,"after")[0];l.setTextCursorPosition(zn),d.openSuggestionMenu("/")}},[g,l,d]);return g===void 0?null:jsxRuntimeExports.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:jsxRuntimeExports.jsx(Ir,{size:24,onClick:jn,"data-test":"dragHandleAdd"})})};function Kt(e){return k({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function Nr(e){return k({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}const Ar=e=>{const n=w(),l=v(),d=E(Bo$2,{editor:l,selector:g=>g?.block});return d===void 0||!Lo$2(d,l,d.type,{textColor:"string"})&&!Lo$2(d,l,d.type,{backgroundColor:"string"})?null:jsxRuntimeExports.jsxs(n.Generic.Menu.Root,{position:"right",sub:!0,children:[jsxRuntimeExports.jsx(n.Generic.Menu.Trigger,{sub:!0,children:jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),jsxRuntimeExports.jsx(n.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:jsxRuntimeExports.jsx(xe,{iconSize:18,text:Lo$2(d,l,d.type,{textColor:"string"})&&b$2(l,d.type,{textColor:"string"})?{color:d.props.textColor,setColor:g=>l.updateBlock(d,{type:d.type,props:{textColor:g}})}:void 0,background:Lo$2(d,l,d.type,{backgroundColor:"string"})&&b$2(l,d.type,{backgroundColor:"string"})?{color:d.props.backgroundColor,setColor:g=>l.updateBlock(d,{props:{backgroundColor:g}})}:void 0})})]})},Zr=e=>{const n=w(),l=v(),d=E(Bo$2,{editor:l,selector:g=>g?.block});return d===void 0?null:jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>l.removeBlocks([d]),children:e.children})},Dr=e=>{const n=w(),l=v(),d=E(Bo$2,{editor:l,selector:jn=>jn?.block});if(d===void 0||d.type!=="table"||!l.settings.tables.headers)return null;const g=!!d.content.headerRows;return jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",checked:g,onClick:()=>{l.updateBlock(d,{content:{...d.content,headerRows:g?void 0:1}})},children:e.children})},Fr=e=>{const n=w(),l=v(),d=E(Bo$2,{editor:l,selector:jn=>jn?.block});if(d===void 0||d.type!=="table"||!l.settings.tables.headers)return null;const g=!!d.content.headerCols;return jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",checked:g,onClick:()=>{l.updateBlock(d,{content:{...d.content,headerCols:g?void 0:1}})},children:e.children})},Gr=e=>{const n=w(),l=M$1();return jsxRuntimeExports.jsx(n.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zr,{children:l.drag_handle.delete_menuitem}),jsxRuntimeExports.jsx(Ar,{children:l.drag_handle.colors_menuitem}),jsxRuntimeExports.jsx(Dr,{children:l.drag_handle.header_row_menuitem}),jsxRuntimeExports.jsx(Fr,{children:l.drag_handle.header_column_menuitem})]})})},zr=e=>{const n=w(),l=M$1(),d=T(Bo$2),g=E(Bo$2,{selector:Un=>Un?.block});if(g===void 0)return null;const jn=e.dragHandleMenu||Gr;return jsxRuntimeExports.jsxs(n.Generic.Menu.Root,{onOpenChange:Un=>{Un?d.freezeMenu():d.unfreezeMenu()},position:"left",children:[jsxRuntimeExports.jsx(n.Generic.Menu.Trigger,{children:jsxRuntimeExports.jsx(n.SideMenu.Button,{label:l.side_menu.drag_handle_label,draggable:!0,onDragStart:Un=>d.blockDragStart(Un,g),onDragEnd:d.blockDragEnd,className:"bn-button",icon:jsxRuntimeExports.jsx(Kt,{size:24,"data-test":"dragHandle"})})}),jsxRuntimeExports.jsx(jn,{children:e.children})]})},Ur=e=>{const n=w(),l=v(),d=E(Bo$2,{editor:l,selector:jn=>jn?.block}),g=reactExports.useMemo(()=>{var jn;if(d===void 0)return{};const Un={"data-block-type":d.type};return d.type==="heading"&&(Un["data-level"]=d.props.level.toString()),(jn=l.schema.blockSpecs[d.type].implementation.meta)!=null&&jn.fileBlockAccept&&(d.props.url?Un["data-url"]="true":Un["data-url"]="false"),Un},[d,l.schema.blockSpecs]);return jsxRuntimeExports.jsx(n.SideMenu.Root,{className:"bn-side-menu",...g,children:e.children||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Pr,{}),jsxRuntimeExports.jsx(zr,{dragHandleMenu:e.dragHandleMenu})]})})},jr=e=>{const n=E(Bo$2,{selector:Un=>Un!==void 0?{show:Un.show,block:Un.block}:void 0}),{show:l,block:d}=n||{},g=reactExports.useMemo(()=>({useFloatingOptions:{open:l,placement:"left-start"},useDismissProps:{enabled:!1},elementProps:{style:{zIndex:20}},...e.floatingUIOptions}),[e.floatingUIOptions,l]),jn=e.sideMenu||Ur;return jsxRuntimeExports.jsx(Bt,{blockId:l?d?.id:void 0,...g,children:d?.id&&jsxRuntimeExports.jsx(jn,{})})};async function $r(e,n){return(await c(e,n)).map(({id:l,onItemClick:d})=>({id:l,onItemClick:d,icon:l}))}function Wr(e){const n=w(),l=M$1(),{items:d,loadingState:g,selectedIndex:jn,onItemClick:Un,columns:zn}=e,qn=g==="loading-initial"||g==="loading"?jsxRuntimeExports.jsx(n.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:zn}):null,Kn=reactExports.useMemo(()=>{const Xn=[];for(let Qn=0;Qn<d.length;Qn++){const Jn=d[Qn];Xn.push(jsxRuntimeExports.jsx(n.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:Jn,id:`bn-grid-suggestion-menu-item-${Qn}`,isSelected:Qn===jn,onClick:()=>Un?.(Jn)},Jn.id))}return Xn},[n,d,Un,jn]);return jsxRuntimeExports.jsxs(n.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:zn,className:"bn-grid-suggestion-menu",children:[qn,Kn,Kn.length===0&&e.loadingState==="loaded"&&jsxRuntimeExports.jsx(n.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:zn,children:l.suggestion_menu.no_items_title})]})}function Xt(e,n,l,d=3){const g=reactExports.useRef(0);reactExports.useEffect(()=>{n!==void 0&&(e.length>0?g.current=n.length:n.length-g.current>d&&l())},[l,d,e.length,n])}function Yt(e,n){const[l,d]=reactExports.useState([]),[g,jn]=reactExports.useState(!1),Un=reactExports.useRef(void 0),zn=reactExports.useRef(void 0);return reactExports.useEffect(()=>{const qn=e;Un.current=e,jn(!0),n(e).then(Kn=>{Un.current===qn&&(d(Kn),jn(!1),zn.current=qn)})},[e,n]),{items:l||[],usedQuery:zn.current,loadingState:zn.current===void 0?"loading-initial":g?"loading":"loaded"}}function qr(e,n,l,d,g){const[jn,Un]=reactExports.useState(0),zn=d!==void 0&&d>1;return reactExports.useEffect(()=>{var qn;const Kn=Xn=>(Xn.key==="ArrowLeft"&&(Xn.preventDefault(),l.length&&Un((jn-1+l.length)%l.length)),Xn.key==="ArrowRight"&&(Xn.preventDefault(),l.length&&Un((jn+1+l.length)%l.length)),Xn.key==="ArrowUp"?(Xn.preventDefault(),l.length&&Un((jn-d+l.length)%l.length),!0):Xn.key==="ArrowDown"?(Xn.preventDefault(),l.length&&Un((jn+d)%l.length),!0):Xn.key==="Enter"&&!Xn.isComposing?(Xn.stopPropagation(),Xn.preventDefault(),l.length&&g?.(l[jn]),!0):!1);return(qn=e.domElement)==null||qn.addEventListener("keydown",Kn,!0),()=>{var Xn;(Xn=e.domElement)==null||Xn.removeEventListener("keydown",Kn,!0)}},[e.domElement,l,jn,g,d,zn]),reactExports.useEffect(()=>{Un(0)},[n]),{selectedIndex:l.length===0?void 0:jn}}function Kr(e){const n=q().setContentEditableProps,l=v(),{getItems:d,gridSuggestionMenuComponent:g,query:jn,clearQuery:Un,closeMenu:zn,onItemClick:qn,columns:Kn}=e,Xn=reactExports.useCallback(Ni=>{zn(),Un(),qn?.(Ni)},[qn,zn,Un]),{items:Qn,usedQuery:Jn,loadingState:Ai}=Yt(jn,d);Xt(Qn,Jn,zn);const{selectedIndex:Ri}=qr(l,jn,Qn,Kn,Xn);return reactExports.useEffect(()=>(n(Ni=>({...Ni,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{n(Ni=>({...Ni,"aria-expanded":!1,"aria-controls":void 0}))}),[n]),reactExports.useEffect(()=>(n(Ni=>({...Ni,"aria-activedescendant":Ri?"bn-suggestion-menu-item-"+Ri:void 0})),()=>{n(Ni=>({...Ni,"aria-activedescendant":void 0}))}),[n,Ri]),jsxRuntimeExports.jsx(g,{items:Qn,onItemClick:Xn,loadingState:Ai,selectedIndex:Ri,columns:Kn})}function Xr(e){const n=v(),{triggerCharacter:l,gridSuggestionMenuComponent:d,columns:g,minQueryLength:jn,onItemClick:Un,getItems:zn}=e,qn=reactExports.useMemo(()=>Un||(Ri=>{Ri.onItemClick(n)}),[n,Un]),Kn=reactExports.useMemo(()=>zn||(async Ri=>await $r(n,Ri)),[n,zn]),Xn=T(_n);reactExports.useEffect(()=>{Xn.addTriggerCharacter(l)},[Xn,l]);const Qn=E(_n),Jn=E(_n,{selector:Ri=>{var Ni;return{element:((Ni=n.domElement)==null?void 0:Ni.firstChild)||void 0,getBoundingClientRect:()=>Ri?.referencePos||new DOMRect}}}),Ai=reactExports.useMemo(()=>({useFloatingOptions:{open:Qn?.show&&Qn?.triggerCharacter===l,onOpenChange:Ri=>{Ri||Xn.closeMenu()},placement:"bottom-start",middleware:[offset(10),autoPlacement({allowedPlacements:["bottom-start","top-start"],padding:10}),shift(),size({apply({elements:Ri,availableHeight:Ni}){Ri.floating.style.maxHeight=`${Math.max(0,Ni)}px`},padding:10})]},elementProps:{onMouseDownCapture:Ri=>Ri.preventDefault(),style:{zIndex:70}},...e.floatingUIOptions}),[e.floatingUIOptions,Qn?.show,Qn?.triggerCharacter,Xn,l]);return!Qn||!Qn.ignoreQueryLength&&jn&&(Qn.query.startsWith(" ")||Qn.query.length<jn)?null:jsxRuntimeExports.jsx(U,{reference:Jn,...Ai,children:l&&jsxRuntimeExports.jsx(Kr,{query:Qn.query,closeMenu:Xn.closeMenu,clearQuery:Xn.clearQuery,getItems:Kn,columns:g,gridSuggestionMenuComponent:d||Wr,onItemClick:qn})})}function Yr(e){const n=w(),l=M$1(),{items:d,loadingState:g,selectedIndex:jn,onItemClick:Un}=e,zn=g==="loading-initial"||g==="loading"?jsxRuntimeExports.jsx(n.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,qn=reactExports.useMemo(()=>{let Kn;const Xn=[];for(let Qn=0;Qn<d.length;Qn++){const Jn=d[Qn];Jn.group!==Kn&&(Kn=Jn.group,Xn.push(jsxRuntimeExports.jsx(n.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:Kn},Kn))),Xn.push(jsxRuntimeExports.jsx(n.SuggestionMenu.Item,{className:D$3("bn-suggestion-menu-item",Jn.size==="small"?"bn-suggestion-menu-item-small":""),item:Jn,id:`bn-suggestion-menu-item-${Qn}`,isSelected:Qn===jn,onClick:()=>Un?.(Jn)},Jn.title))}return Xn},[n,d,Un,jn]);return jsxRuntimeExports.jsxs(n.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[qn,qn.length===0&&(e.loadingState==="loading"||e.loadingState==="loaded")&&jsxRuntimeExports.jsx(n.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:l.suggestion_menu.no_items_title}),zn]})}function Jr(e,n){const[l,d]=reactExports.useState(0);return{selectedIndex:l,setSelectedIndex:d,handler:g=>{if(g.key==="ArrowUp")return g.preventDefault(),e.length&&d((l-1+e.length)%e.length),!0;if(g.key==="ArrowDown")return g.preventDefault(),e.length&&d((l+1)%e.length),!0;const jn=Qr(g)?g.nativeEvent.isComposing:g.isComposing;return g.key==="Enter"&&!jn?(g.preventDefault(),g.stopPropagation(),e.length&&n?.(e[l]),!0):!1}}}function Qr(e){return e.nativeEvent!==void 0}function ei(e,n,l,d,g){const{selectedIndex:jn,setSelectedIndex:Un,handler:zn}=Jr(l,d);return reactExports.useEffect(()=>{var qn;return(qn=e.domElement)==null||qn.addEventListener("keydown",zn,!0),()=>{var Kn;(Kn=e.domElement)==null||Kn.removeEventListener("keydown",zn,!0)}},[e.domElement,l,jn,d,g,zn]),reactExports.useEffect(()=>{Un(0)},[n,Un]),{selectedIndex:l.length===0?void 0:jn}}function ti(e){const n=q().setContentEditableProps,l=v(),{getItems:d,suggestionMenuComponent:g,query:jn,clearQuery:Un,closeMenu:zn,onItemClick:qn}=e,Kn=reactExports.useCallback(Ri=>{zn(),Un(),qn?.(Ri)},[qn,zn,Un]),{items:Xn,usedQuery:Qn,loadingState:Jn}=Yt(jn,d);Xt(Xn,Qn,zn);const{selectedIndex:Ai}=ei(l,jn,Xn,Kn);return reactExports.useEffect(()=>(n(Ri=>({...Ri,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{n(Ri=>({...Ri,"aria-expanded":!1,"aria-controls":void 0}))}),[n]),reactExports.useEffect(()=>(n(Ri=>({...Ri,"aria-activedescendant":Ai?"bn-suggestion-menu-item-"+Ai:void 0})),()=>{n(Ri=>({...Ri,"aria-activedescendant":void 0}))}),[n,Ai]),jsxRuntimeExports.jsx(g,{items:Xn,onItemClick:Kn,loadingState:Jn,selectedIndex:Ai})}const ni={heading:pe,heading_2:Ce,heading_3:ve,heading_4:Pt$1,heading_5:Nt$1,heading_6:At,toggle_heading:pe,toggle_heading_2:Ce,toggle_heading_3:ve,quote:zt,toggle_list:jt,numbered_list:Ft$1,bullet_list:Gt,check_list:Dt,paragraph:$e$1,table:jo,image:Ut,video:Wo,audio:$t,file:je$1,emoji:ir,code_block:No,divider:rr};function oi(e){return Bo$3(e).map(n=>{const l=ni[n.key];return{...n,icon:jsxRuntimeExports.jsx(l,{size:18})}})}function ri(e){const n=v(),{triggerCharacter:l,suggestionMenuComponent:d,minQueryLength:g,onItemClick:jn,getItems:Un}=e,zn=reactExports.useMemo(()=>jn||(Ai=>{Ai.onItemClick(n)}),[n,jn]),qn=reactExports.useMemo(()=>Un||(async Ai=>Ao$2(oi(n),Ai)),[n,Un]),Kn=T(_n);reactExports.useEffect(()=>{Kn.addTriggerCharacter(l)},[Kn,l]);const Xn=E(_n),Qn=E(_n,{selector:Ai=>{var Ri;return{element:((Ri=n.domElement)==null?void 0:Ri.firstChild)||void 0,getBoundingClientRect:()=>Ai?.referencePos||new DOMRect}}}),Jn=reactExports.useMemo(()=>({useFloatingOptions:{open:Xn?.show&&Xn?.triggerCharacter===l,onOpenChange:Ai=>{Ai||Kn.closeMenu()},placement:"bottom-start",middleware:[offset(10),autoPlacement({allowedPlacements:["bottom-start","top-start"],padding:10}),shift(),size({apply({elements:Ai,availableHeight:Ri}){Ai.floating.style.maxHeight=`${Math.max(0,Ri)}px`},padding:10})]},elementProps:{onMouseDownCapture:Ai=>Ai.preventDefault(),style:{zIndex:80}},...e.floatingUIOptions}),[e.floatingUIOptions,Xn?.show,Xn?.triggerCharacter,Kn,l]);return!Xn||!Xn.ignoreQueryLength&&g&&(Xn.query.startsWith(" ")||Xn.query.length<g)?null:jsxRuntimeExports.jsx(U,{reference:Qn,...Jn,children:l&&jsxRuntimeExports.jsx(ti,{query:Xn.query,closeMenu:Kn.closeMenu,clearQuery:Kn.clearQuery,getItems:qn,suggestionMenuComponent:d||Yr,onItemClick:zn})})}const ii=(e,n=.3)=>{const l=Math.floor(e)+n,d=Math.ceil(e)-n;return e>=l&&e<=d?Math.round(e):e<l?Math.floor(e):Math.ceil(e)},li=e=>{const n=w(),l=v(),d=T(To$2),g=E(To$2,{selector:Xn=>Xn?.block}),jn=reactExports.useRef(!1),[Un,zn]=reactExports.useState(),qn=reactExports.useCallback(Xn=>{d.freezeHandles(),e.hideOtherElements(!0),g&&(zn({originalContent:g.content,originalCroppedContent:{rows:d.cropEmptyRowsOrColumns(g,e.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:e.orientation==="addOrRemoveColumns"?Xn.clientX:Xn.clientY}),jn.current=!1,Xn.preventDefault())},[g,e,d]),Kn=reactExports.useCallback(()=>{!g||jn.current||l.updateBlock(g,{type:"table",content:{...g.content,rows:e.orientation==="addOrRemoveColumns"?d.addRowsOrColumns(g,"columns",1):d.addRowsOrColumns(g,"rows",1)}})},[g,l,e.orientation,d]);return reactExports.useEffect(()=>{const Xn=Qn=>{var Jn,Ai;if(!g)return;if(!Un)throw new Error("editingState is undefined");jn.current=!0;const Ri=(e.orientation==="addOrRemoveColumns"?Qn.clientX:Qn.clientY)-Un.startPos,Ni=e.orientation==="addOrRemoveColumns"?((Jn=Un.originalCroppedContent.rows[0])==null?void 0:Jn.cells.length)??0:Un.originalCroppedContent.rows.length,$i=e.orientation==="addOrRemoveColumns"?((Ai=Un.originalContent.rows[0])==null?void 0:Ai.cells.length)??0:Un.originalContent.rows.length,Li=e.orientation==="addOrRemoveColumns"?g.content.rows[0].cells.length:g.content.rows.length,ji=$i+ii(Ri/(e.orientation==="addOrRemoveColumns"?Ie$4:Mo$2),.3);ji>=Ni&&ji>0&&ji!==Li&&(l.updateBlock(g,{type:"table",content:{...g.content,rows:e.orientation==="addOrRemoveColumns"?d.addRowsOrColumns({type:"table",content:Un.originalCroppedContent},"columns",ji-Ni):d.addRowsOrColumns({type:"table",content:Un.originalCroppedContent},"rows",ji-Ni)}}),g.content&&l.setTextCursorPosition(g))};return Un&&window.addEventListener("mousemove",Xn),()=>{window.removeEventListener("mousemove",Xn)}},[g,Un,l,e.orientation,d]),reactExports.useEffect(()=>{const Xn=()=>{e.hideOtherElements(!1),d.unfreezeHandles(),zn(void 0)};return Un&&window.addEventListener("mouseup",Xn),()=>{window.removeEventListener("mouseup",Xn)}},[Un,e,d]),l.isEditable?jsxRuntimeExports.jsx(n.TableHandle.ExtendButton,{className:D$3("bn-extend-button",e.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",Un!==null?"bn-extend-button-editing":""),onClick:Kn,onMouseDown:qn,children:e.children||jsxRuntimeExports.jsx(Yo,{size:18,"data-test":"extendButton"})}):null},ht$1=e=>{const n=w(),l=M$1(),d=T(To$2),g=E(To$2,{selector:jn=>e.orientation==="column"?jn?.colIndex:jn?.rowIndex});return d===void 0||g===void 0?null:jsxRuntimeExports.jsx(n.Generic.Menu.Item,{onClick:()=>{d.addRowOrColumn(g,e.orientation==="row"?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:l.table_handle[`add_${e.side}_menuitem`]})},ci=e=>{const n=w(),l=M$1(),d=T(To$2),g=E(To$2,{selector:jn=>e.orientation==="column"?jn?.colIndex:jn?.rowIndex});return d===void 0||g===void 0?null:jsxRuntimeExports.jsx(n.Generic.Menu.Item,{onClick:()=>d.removeRowOrColumn(g,e.orientation),children:e.orientation==="row"?l.table_handle.delete_row_menuitem:l.table_handle.delete_column_menuitem})},ai=e=>{const n=w(),l=M$1(),d=v(),g=T(To$2),{block:jn,index:Un}=E(To$2,{selector:Xn=>({block:Xn?.block,index:e.orientation==="column"?Xn?.colIndex:Xn?.rowIndex})}),zn=reactExports.useMemo(()=>g===void 0||jn===void 0||Un===void 0?[]:e.orientation==="row"?g.getCellsAtRowHandle(jn,Un):g.getCellsAtColumnHandle(jn,Un),[jn,Un,e.orientation,g]),qn=(Xn,Qn)=>{if(jn===void 0)return;const Jn=jn.content.rows.map(Ai=>({...Ai,cells:Ai.cells.map(Ri=>S$1(Ri))}));zn.forEach(({row:Ai,col:Ri})=>{Qn==="text"?Jn[Ai].cells[Ri].props.textColor=Xn:Jn[Ai].cells[Ri].props.backgroundColor=Xn}),d.updateBlock(jn,{type:"table",content:{...jn.content,rows:Jn}}),d.setTextCursorPosition(jn)};if(!zn||!zn[0]||!g||d.settings.tables.cellTextColor===!1&&d.settings.tables.cellBackgroundColor===!1)return null;const Kn=S$1(zn[0].cell);return jsxRuntimeExports.jsxs(n.Generic.Menu.Root,{position:"right",sub:!0,children:[jsxRuntimeExports.jsx(n.Generic.Menu.Trigger,{sub:!0,children:jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||l.drag_handle.colors_menuitem})}),jsxRuntimeExports.jsx(n.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:jsxRuntimeExports.jsx(xe,{iconSize:18,text:d.settings.tables.cellTextColor?{color:zn.every(({cell:Xn})=>R$2(Xn)&&Xn.props.textColor===Kn.props.textColor)?Kn.props.textColor:"default",setColor:Xn=>{qn(Xn,"text")}}:void 0,background:d.settings.tables.cellBackgroundColor?{color:zn.every(({cell:Xn})=>R$2(Xn)&&Xn.props.backgroundColor===Kn.props.backgroundColor)?Kn.props.backgroundColor:"default",setColor:Xn=>qn(Xn,"background")}:void 0})})]})},si=e=>{const n=w(),l=M$1(),d=v(),g=T(To$2),{block:jn,index:Un}=E(To$2,{selector:qn=>({block:qn?.block,index:e.orientation==="column"?qn?.colIndex:qn?.rowIndex})});if(g===void 0||jn===void 0||Un!==0||e.orientation!=="row"||!d.settings.tables.headers)return null;const zn=!!jn.content.headerRows;return jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",checked:zn,onClick:()=>{d.updateBlock(jn,{...jn,content:{...jn.content,headerRows:zn?void 0:1}})},children:l.drag_handle.header_row_menuitem})},di=e=>{const n=w(),l=M$1(),d=v(),g=T(To$2),jn=E(To$2,{selector:qn=>qn?.block}),Un=E(To$2,{selector:qn=>e.orientation==="column"?qn?.colIndex:qn?.rowIndex});if(!g||Un!==0||!jn||e.orientation!=="column"||!d.settings.tables.headers)return null;const zn=!!jn.content.headerCols;return jsxRuntimeExports.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",checked:zn,onClick:()=>{d.updateBlock(jn,{...jn,content:{...jn.content,headerCols:zn?void 0:1}})},children:l.drag_handle.header_column_menuitem})},ui=e=>{const n=w();return jsxRuntimeExports.jsx(n.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ci,{orientation:e.orientation}),jsxRuntimeExports.jsx(ht$1,{orientation:e.orientation,side:e.orientation==="row"?"above":"left"}),jsxRuntimeExports.jsx(ht$1,{orientation:e.orientation,side:e.orientation==="row"?"below":"right"}),jsxRuntimeExports.jsx(si,{orientation:e.orientation}),jsxRuntimeExports.jsx(di,{orientation:e.orientation}),jsxRuntimeExports.jsx(ai,{orientation:e.orientation})]})})},mi=e=>{const n=v(),l=w(),[d,g]=reactExports.useState(!1),jn=e.tableHandleMenu||ui,Un=T(To$2),zn=E(To$2),qn=reactExports.useMemo(()=>!Un||!zn||!zn.block||zn.block.type!=="table"?!1:e.orientation==="column"?Un.getCellsAtColumnHandle(zn.block,zn.colIndex).every(({cell:Kn})=>A$3(Kn)===1):Un.getCellsAtRowHandle(zn.block,zn.rowIndex).every(({cell:Kn})=>D$4(Kn)===1),[e.orientation,zn,Un]);return zn?jsxRuntimeExports.jsxs(l.Generic.Menu.Root,{onOpenChange:Kn=>{Kn?(Un.freezeHandles(),e.hideOtherElements(!0)):(Un.unfreezeHandles(),e.hideOtherElements(!1),n.focus())},position:"right",children:[jsxRuntimeExports.jsx(l.Generic.Menu.Trigger,{children:jsxRuntimeExports.jsx(l.TableHandle.Root,{className:D$3("bn-table-handle",d?"bn-table-handle-dragging":"",qn?"":"bn-table-handle-not-draggable"),draggable:qn,onDragStart:Kn=>{g(!0),e.hideOtherElements(!0),e.orientation==="column"?Un.colDragStart(Kn):Un.rowDragStart(Kn)},onDragEnd:()=>{Un.dragEnd(),e.hideOtherElements(!1),g(!1)},style:e.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:e.children||jsxRuntimeExports.jsx(Kt,{size:24,"data-test":"tableHandle"})})}),jsxRuntimeExports.jsx(jn,{orientation:e.orientation})]}):null},fi=e=>{var n,l;const d=w(),g=M$1(),jn=v(),{block:Un,colIndex:zn,rowIndex:qn}=E(To$2,{selector:Qn=>({block:Qn?.block,colIndex:Qn?.colIndex,rowIndex:Qn?.rowIndex})}),Kn=(Qn,Jn)=>{if(Un===void 0||zn===void 0||qn===void 0)return;const Ai=Un.content.rows.map(Ri=>({...Ri,cells:Ri.cells.map(Ni=>S$1(Ni))}));Jn==="text"?Ai[qn].cells[zn].props.textColor=Qn:Ai[qn].cells[zn].props.backgroundColor=Qn,jn.updateBlock(Un,{type:"table",content:{...Un.content,rows:Ai}}),jn.setTextCursorPosition(Un)};if(Un===void 0||zn===void 0||qn===void 0)return null;const Xn=(l=(n=Un.content.rows[qn])==null?void 0:n.cells)==null?void 0:l[zn];return!Xn||jn.settings.tables.cellTextColor===!1&&jn.settings.tables.cellBackgroundColor===!1?null:jsxRuntimeExports.jsxs(d.Generic.Menu.Root,{position:"right",sub:!0,children:[jsxRuntimeExports.jsx(d.Generic.Menu.Trigger,{sub:!0,children:jsxRuntimeExports.jsx(d.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||g.drag_handle.colors_menuitem})}),jsxRuntimeExports.jsx(d.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:jsxRuntimeExports.jsx(xe,{iconSize:18,text:jn.settings.tables.cellTextColor?{color:R$2(Xn)?Xn.props.textColor:"default",setColor:Qn=>Kn(Qn,"text")}:void 0,background:jn.settings.tables.cellBackgroundColor?{color:R$2(Xn)?Xn.props.backgroundColor:"default",setColor:Qn=>Kn(Qn,"background")}:void 0})})]})},hi=()=>{var e,n;const l=w(),d=M$1(),g=v(),jn=T(To$2),{block:Un,colIndex:zn,rowIndex:qn}=E(To$2,{selector:Xn=>({block:Xn?.block,colIndex:Xn?.colIndex,rowIndex:Xn?.rowIndex})});if(Un===void 0||zn===void 0||qn===void 0)return null;const Kn=(n=(e=Un.content.rows[qn])==null?void 0:e.cells)==null?void 0:n[zn];return!Kn||!R$2(Kn)||D$4(Kn)===1&&A$3(Kn)===1||!g.settings.tables.splitCells?null:jsxRuntimeExports.jsx(l.Generic.Menu.Item,{onClick:()=>{jn.splitCell({row:qn,col:zn})},children:d.table_handle.split_cell_menuitem})},gi=e=>{const n=w();return jsxRuntimeExports.jsx(n.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-table-handle-menu",children:e.children||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(hi,{}),jsxRuntimeExports.jsx(fi,{})]})})},bi=e=>{const n=w(),l=v(),d=T(To$2),g=e.tableCellMenu||gi;return!l.settings.tables.splitCells&&!l.settings.tables.cellBackgroundColor&&!l.settings.tables.cellTextColor?null:jsxRuntimeExports.jsxs(n.Generic.Menu.Root,{onOpenChange:jn=>{jn?(d.freezeHandles(),e.hideOtherElements(!0)):(d.unfreezeHandles(),e.hideOtherElements(!1),l.focus())},position:"right",children:[jsxRuntimeExports.jsx(n.Generic.Menu.Trigger,{children:jsxRuntimeExports.jsx(n.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||jsxRuntimeExports.jsx(Nr,{size:12,"data-test":"tableCellHandle"})})}),jsxRuntimeExports.jsx(g,{})]})},pi=e=>{const n=v(),[l,d]=reactExports.useState(),g=E(To$2),jn=reactExports.useMemo(()=>{const Xn={};if(g===void 0)return{};const Qn=Tt$2(g.block.id,n.prosemirrorState.doc);if(!Qn)return{};const Jn=Qn.posBeforeNode+1,Ai=n.prosemirrorView.domAtPos(Jn+1).node;if(!(Ai instanceof Element))return{};if(Xn.tableReference={element:Ai},g.rowIndex===void 0||g.colIndex===void 0)return Xn;const Ri=n.prosemirrorState.doc.resolve(Jn+1).posAtIndex(g.rowIndex),Ni=n.prosemirrorState.doc.resolve(Ri+1).posAtIndex(g.colIndex),$i=n.prosemirrorView.domAtPos(Ni+1).node;return $i instanceof Element?(Xn.cellReference={element:$i},Xn.rowReference={element:Ai,getBoundingClientRect:()=>{const Li=Ai.getBoundingClientRect(),ji=$i.getBoundingClientRect();return new DOMRect(Li.x,g.draggingState&&g.draggingState.draggedCellOrientation==="row"?g.draggingState.mousePos-ji.height/2:ji.y,Li.width,ji.height)}},Xn.columnReference={element:Ai,getBoundingClientRect:()=>{const Li=Ai.getBoundingClientRect(),ji=$i.getBoundingClientRect();return new DOMRect(g.draggingState&&g.draggingState.draggedCellOrientation==="col"?g.draggingState.mousePos-ji.width/2:ji.x,Li.y,ji.width,Li.height)}},Xn):{}},[n,g]),Un=reactExports.useMemo(()=>g!==void 0?{rowTableHandle:{useFloatingOptions:{open:g.show&&g.rowIndex!==void 0&&(!l||l==="rowTableHandle"),placement:"left",middleware:[offset(-10)]},elementProps:{style:{zIndex:10}}},columnTableHandle:{useFloatingOptions:{open:g.show&&g.colIndex!==void 0&&(!l||l==="columnTableHandle"),placement:"top",middleware:[offset(-12)]},elementProps:{style:{zIndex:10}}},tableCellHandle:{useFloatingOptions:{open:g.show&&g.rowIndex!==void 0&&g.colIndex!==void 0&&(!l||l==="tableCellHandle"),placement:"top-end",middleware:[offset({mainAxis:-15,crossAxis:-1})]},elementProps:{style:{zIndex:10}}},extendRowsButton:{useFloatingOptions:{open:g.show&&g.showAddOrRemoveRowsButton&&(!l||l==="extendRowsButton"),placement:"bottom",middleware:[size({apply({rects:Xn,elements:Qn}){Object.assign(Qn.floating.style,{width:`${Xn.reference.width}px`})}})]},elementProps:{style:{zIndex:10}}},extendColumnsButton:{useFloatingOptions:{open:g.show&&g.showAddOrRemoveColumnsButton&&(!l||l==="extendColumnsButton"),placement:"right",middleware:[size({apply({rects:Xn,elements:Qn}){Object.assign(Qn.floating.style,{height:`${Xn.reference.height}px`})}})]},elementProps:{style:{zIndex:10}}}}:void 0,[l,g]);if(!g)return null;const zn=e.tableHandle||mi,qn=e.extendButton||li,Kn=e.tableCellHandle||bi;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(U,{reference:jn?.rowReference,...Un?.rowTableHandle,children:g.show&&g.rowIndex!==void 0&&(!l||l==="rowTableHandle")&&jsxRuntimeExports.jsx(zn,{orientation:"row",hideOtherElements:Xn=>d(Xn?"rowTableHandle":void 0)})}),jsxRuntimeExports.jsx(U,{reference:jn?.columnReference,...Un?.columnTableHandle,children:g.show&&g.colIndex!==void 0&&(!l||l==="columnTableHandle")&&jsxRuntimeExports.jsx(zn,{orientation:"column",hideOtherElements:Xn=>d(Xn?"columnTableHandle":void 0)})}),jsxRuntimeExports.jsx(U,{reference:jn?.cellReference,...Un?.tableCellHandle,children:g.show&&g.rowIndex!==void 0&&g.colIndex!==void 0&&(!l||l==="tableCellHandle")&&jsxRuntimeExports.jsx(Kn,{hideOtherElements:Xn=>d(Xn?"tableCellHandle":void 0)})}),jsxRuntimeExports.jsx(U,{reference:jn?.tableReference,...Un?.extendRowsButton,children:g.show&&g.showAddOrRemoveRowsButton&&(!l||l==="extendRowsButton")&&jsxRuntimeExports.jsx(qn,{orientation:"addOrRemoveRows",hideOtherElements:Xn=>d(Xn?"extendRowsButton":void 0)})}),jsxRuntimeExports.jsx(U,{reference:jn?.tableReference,...Un?.extendColumnsButton,children:g.show&&g.showAddOrRemoveColumnsButton&&(!l||l==="extendColumnsButton")&&jsxRuntimeExports.jsx(qn,{orientation:"addOrRemoveColumns",hideOtherElements:Xn=>d(Xn?"extendColumnsButton":void 0)})})]})},Ci=reactExports.lazy(()=>Promise.resolve().then(()=>ll)),vi=reactExports.lazy(()=>Promise.resolve().then(()=>al));function wi(e){const n=v();if(!n)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n.getExtension(yo$2)&&e.formattingToolbar!==!1&&jsxRuntimeExports.jsx(_r,{}),n.getExtension(vo$2)&&e.linkToolbar!==!1&&jsxRuntimeExports.jsx(Or,{}),n.getExtension(_n)&&e.slashMenu!==!1&&jsxRuntimeExports.jsx(ri,{triggerCharacter:"/"}),n.getExtension(_n)&&e.emojiPicker!==!1&&jsxRuntimeExports.jsx(Xr,{triggerCharacter:":",columns:10,minQueryLength:2}),n.getExtension(Bo$2)&&e.sideMenu!==!1&&jsxRuntimeExports.jsx(jr,{}),n.getExtension(I$2)&&e.filePanel!==!1&&jsxRuntimeExports.jsx(uo,{}),n.getExtension(To$2)&&e.tableHandles!==!1&&jsxRuntimeExports.jsx(pi,{}),n.getExtension(ne$1)&&e.comments!==!1&&jsxRuntimeExports.jsxs(reactExports.Suspense,{children:[jsxRuntimeExports.jsx(Ci,{}),jsxRuntimeExports.jsx(vi,{})]})]})}function ki(e,n){const l=q();n||(n=l?.editor),reactExports.useEffect(()=>{if(!n)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return n.onChange(e)},[e,n])}function Hi(e,n,l){const d=q();n||(n=d?.editor),reactExports.useEffect(()=>{if(!n)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return n.onSelectionChange(e,l)},[e,n,l])}const xi=()=>{const e=reactExports.useMemo(()=>{var Un;return(Un=window.matchMedia)==null?void 0:Un.call(window,"(prefers-color-scheme: dark)")},[]),n=reactExports.useMemo(()=>{var Un;return(Un=window.matchMedia)==null?void 0:Un.call(window,"(prefers-color-scheme: light)")},[]),l=e?.matches,d=n?.matches,[g,jn]=reactExports.useState(l?"dark":d?"light":"no-preference");return reactExports.useEffect(()=>{jn(l?"dark":d?"light":"no-preference")},[l,d]),reactExports.useEffect(()=>{if(typeof e?.addEventListener=="function"){const Un=({matches:qn})=>qn&&jn("dark"),zn=({matches:qn})=>qn&&jn("light");return e?.addEventListener("change",Un),n?.addEventListener("change",zn),()=>{e?.removeEventListener("change",Un),n?.removeEventListener("change",zn)}}else{const Un=()=>jn(e.matches?"dark":n.matches?"light":"no-preference");return e?.addEventListener("change",Un),n?.addEventListener("change",Un),()=>{e?.removeEventListener("change",Un),n?.removeEventListener("change",Un)}}},[e,n]),g},Jt=reactExports.createContext(void 0);function yi(){return reactExports.useContext(Jt)}function Si(){const e=new Set;let n={};return{subscribe(l){return e.add(l),()=>{e.delete(l)}},getSnapshot(){return n},getServerSnapshot(){return n},setRenderer(l,d){n={...n,[l]:reactDomExports.createPortal(d.reactElement,d.element,l)},e.forEach(g=>g())},removeRenderer(l){const d={...n};delete d[l],n=d,e.forEach(g=>g())}}}const Mi=({contentComponent:e})=>{const n=reactExports.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(n)})},Vi=reactExports.forwardRef((e,n)=>{const[l,d]=reactExports.useState();return reactExports.useImperativeHandle(n,()=>(g,jn)=>{reactDomExports.flushSync(()=>{d({node:g,container:jn})}),d(void 0)},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l&&reactDomExports.createPortal(l.node,l.container)})}),gt$1=()=>{};function Ti(e,n){const{editor:l,className:d,theme:g,children:jn,editable:Un,onSelectionChange:zn,onChange:qn,formattingToolbar:Kn,linkToolbar:Xn,slashMenu:Qn,emojiPicker:Jn,sideMenu:Ai,filePanel:Ri,tableHandles:Ni,comments:$i,autoFocus:Li,renderEditor:ji=!0,...Fi}=e,[qi,zi]=reactExports.useState(),Gi=q(),Xi=xi(),as=Gi?.colorSchemePreference||Xi,ls=g||(as==="dark"?"dark":"light");ki(qn||gt$1,l),Hi(zn||gt$1,l),reactExports.useEffect(()=>{l.isEditable=Un!==!1},[Un,l]);const Zi=reactExports.useCallback(Ss=>{l.elementRenderer=Ss},[l]),gs=reactExports.useMemo(()=>({...Gi,editor:l,setContentEditableProps:zi,colorSchemePreference:ls}),[Gi,l,ls]),bs=reactExports.useMemo(()=>({editorProps:{autoFocus:Li,contentEditableProps:qi},defaultUIProps:{formattingToolbar:Kn,linkToolbar:Xn,slashMenu:Qn,emojiPicker:Jn,sideMenu:Ai,filePanel:Ri,tableHandles:Ni,comments:$i}}),[Li,qi,Kn,Xn,Qn,Jn,Ai,Ri,Ni,$i]);return jsxRuntimeExports.jsx(_t.Provider,{value:gs,children:jsxRuntimeExports.jsxs(Jt.Provider,{value:bs,children:[jsxRuntimeExports.jsx(Vi,{ref:Zi}),jsxRuntimeExports.jsx(_i,{className:d,renderEditor:ji,editable:Un,editorColorScheme:ls,ref:n,...Fi,children:jn})]})})}const _i=React.forwardRef(({className:e,renderEditor:n,editable:l,editorColorScheme:d,children:g,...jn},Un)=>jsxRuntimeExports.jsx("div",{className:D$3("bn-container",d,e),"data-color-scheme":d,...jn,ref:Un,children:n?jsxRuntimeExports.jsx(Ei,{editable:l,children:g}):g})),yl=React.forwardRef(Ti),Ei=e=>{const n=yi(),l=v(),d=reactExports.useMemo(()=>Si(),[]),g=reactExports.useCallback(jn=>{e.editable!==void 0&&e.editable!==l.isEditable&&(l.isEditable=e.editable),l._tiptapEditor.contentComponent=d,jn?l.mount(jn):l.unmount()},[l,d,e.editable]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Mi,{contentComponent:d}),jsxRuntimeExports.jsx(Bi,{...n.editorProps,...e,mount:g}),jsxRuntimeExports.jsx(wi,{...n.defaultUIProps}),e.children]})},Bi=e=>{const{autoFocus:n,mount:l,contentEditableProps:d}=e;return jsxRuntimeExports.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":n,ref:l,...d})},Xe$1=(e={},n=[])=>reactExports.useMemo(()=>{const l=Le$1.create(e);return window&&(window.ProseMirror=l._tiptapEditor),l},n),Ye$1=e=>{const[n,l]=reactExports.useState(!1),d=R({editor:e.editor,selector:({editor:zn})=>zn.isEmpty}),g=w(),jn=reactExports.useCallback(()=>{l(!0)},[]),Un=reactExports.useCallback(()=>{l(!1)},[]);return reactExports.useEffect(()=>{e.editable&&e.autoFocus&&e.editor.focus()},[e.autoFocus,e.editable,e.editor]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(g.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:jn,onBlur:Un,editable:e.editable}),e.actions&&jsxRuntimeExports.jsx("div",{className:"bn-comment-actions-wrapper",children:jsxRuntimeExports.jsx(e.actions,{isFocused:n,isEmpty:d})})]})};let me;async function Yi(){return me||(me=(async()=>{const[e,n]=await Promise.all([__vitePreload(()=>import("./module-RjUF93sV.js"),[]),__vitePreload(()=>import("./native-48B9X9Wg.js"),[])]),l="default"in e?e.default:e,d="default"in n?n.default:n;return await l.init({data:d}),{emojiMart:l,emojiData:d}})(),me)}function Ji(e){const n=reactExports.useRef(null),l=reactExports.useRef(null);return l.current&&l.current.update(e),reactExports.useEffect(()=>((async()=>{const{emojiMart:d}=await Yi();l.current=new d.Picker({...e,ref:n})})(),()=>{l.current=null}),[]),React.createElement("div",{ref:n})}const pt$1=e=>{const[n,l]=reactExports.useState(!1),d=w(),g=v(),jn=q();return jsxRuntimeExports.jsxs(d.Generic.Popover.Root,{open:n,children:[jsxRuntimeExports.jsx(d.Generic.Popover.Trigger,{children:jsxRuntimeExports.jsx("div",{onClick:Un=>{var zn;Un.preventDefault(),Un.stopPropagation(),l(!n),(zn=e.onOpenChange)==null||zn.call(e,!n)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),reactDomExports.createPortal(jsxRuntimeExports.jsx(d.Generic.Popover.Content,{className:"bn-emoji-picker-popover",variant:"panel-popover",children:jsxRuntimeExports.jsx(Ji,{perLine:7,onClickOutside:()=>{var Un;l(!1),(Un=e.onOpenChange)==null||Un.call(e,!1)},onEmojiSelect:Un=>{var zn;e.onEmojiSelect(Un),l(!1),(zn=e.onOpenChange)==null||zn.call(e,!1)},theme:jn?.colorSchemePreference})}),g.domElement.parentElement)]})};function Qi(e){return Je$1([e]).get(e)}function Je$1(e){const n=T(ne$1).userStore,l=reactExports.useCallback(()=>{const jn=new Map;for(const Un of e){const zn=n.getUser(Un);zn&&jn.set(Un,zn)}return jn},[n,e]),d=reactExports.useMemo(()=>({current:l()}),[l]),g=reactExports.useCallback(jn=>{const Un=n.subscribe(zn=>{d.current=l(),jn()});return n.loadUsers(e),Un},[n,l,e,d]);return reactExports.useSyncExternalStore(g,()=>d.current)}const el=e=>{const n=w(),l=M$1(),d=T(ne$1),g=e.comment.reactions.find(qn=>qn.emoji===e.emoji);if(!g)throw new Error("Trying to render reaction badge for non-existing reaction");const[jn,Un]=reactExports.useState([]),zn=Je$1(jn);return jsxRuntimeExports.jsx(n.Generic.Badge.Root,{className:D$3("bn-badge","bn-comment-reaction"),text:g.userIds.length.toString(),icon:g.emoji,isSelected:d.threadStore.auth.canDeleteReaction(e.comment,g.emoji),onClick:()=>e.onReactionSelect(g.emoji),onMouseEnter:()=>Un(g.userIds),mainTooltip:l.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(zn.values()).map(qn=>qn.username).join(`
`)}`},g.emoji)},{textColor:Il,backgroundColor:Pl,...tl}=Fn,Qe$1=h$2.create({blockSpecs:{paragraph:bn$1()},styleSpecs:tl}),nl=({comment:e,thread:n,showResolveButton:l})=>{const d=T(ne$1),g=M$1(),jn=Xe$1({initialContent:e.body,trailingBlock:!1,dictionary:{...g,placeholders:{emptyDocument:g.placeholders.edit_comment}},schema:d.commentEditorSchema||Qe$1}),Un=w(),[zn,qn]=reactExports.useState(!1),[Kn,Xn]=reactExports.useState(!1),Qn=d.threadStore,Jn=reactExports.useCallback(()=>{qn(!0)},[]),Ai=reactExports.useCallback(()=>{jn.replaceBlocks(jn.document,e.body),qn(!1)},[jn,e.body]),Ri=reactExports.useCallback(async Zi=>{await Qn.updateComment({commentId:e.id,comment:{body:jn.document},threadId:n.id}),qn(!1)},[e,n.id,jn,Qn]),Ni=reactExports.useCallback(async()=>{await Qn.deleteComment({commentId:e.id,threadId:n.id})},[e,n.id,Qn]),$i=reactExports.useCallback(async Zi=>{Qn.auth.canAddReaction(e,Zi)?await Qn.addReaction({threadId:n.id,commentId:e.id,emoji:Zi}):Qn.auth.canDeleteReaction(e,Zi)&&await Qn.deleteReaction({threadId:n.id,commentId:e.id,emoji:Zi})},[Qn,e,n.id]),Li=reactExports.useCallback(async()=>{await Qn.resolveThread({threadId:n.id})},[n.id,Qn]),ji=reactExports.useCallback(async()=>{await Qn.unresolveThread({threadId:n.id})},[n.id,Qn]),Fi=Qi(e.userId);if(!e.body)return null;let qi;const zi=Qn.auth.canAddReaction(e),Gi=Qn.auth.canDeleteComment(e),Xi=Qn.auth.canUpdateComment(e),as=l&&(n.resolved?Qn.auth.canUnresolveThread(n):Qn.auth.canResolveThread(n));zn||(qi=jsxRuntimeExports.jsxs(Un.Generic.Toolbar.Root,{className:D$3("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[zi&&jsxRuntimeExports.jsx(pt$1,{onEmojiSelect:Zi=>$i(Zi.native),onOpenChange:Xn,children:jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{mainTooltip:g.comments.actions.add_reaction,variant:"compact",children:jsxRuntimeExports.jsx(ut$1,{size:16})},"add-reaction")}),as&&(n.resolved?jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:ji,children:jsxRuntimeExports.jsx(_o,{size:16})},"reopen"):jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{mainTooltip:g.comments.actions.resolve,variant:"compact",onClick:Li,children:jsxRuntimeExports.jsx(Jo,{size:16})},"resolve")),(Gi||Xi)&&jsxRuntimeExports.jsxs(Un.Generic.Menu.Root,{position:"bottom-start",children:[jsxRuntimeExports.jsx(Un.Generic.Menu.Trigger,{children:jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{mainTooltip:g.comments.actions.more_actions,variant:"compact",children:jsxRuntimeExports.jsx(or,{size:16})},"more-actions")}),jsxRuntimeExports.jsxs(Un.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[Xi&&jsxRuntimeExports.jsx(Un.Generic.Menu.Item,{icon:jsxRuntimeExports.jsx(Eo,{}),onClick:Jn,children:g.comments.actions.edit_comment},"edit-comment"),Gi&&jsxRuntimeExports.jsx(Un.Generic.Menu.Item,{icon:jsxRuntimeExports.jsx(er,{}),onClick:Ni,children:g.comments.actions.delete_comment},"delete-comment")]})]})]}));const ls=e.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!e.body)throw new Error("soft deletes are not yet supported");return jsxRuntimeExports.jsx(Un.Comments.Comment,{authorInfo:Fi??"loading",timeString:ls,edited:e.updatedAt.getTime()!==e.createdAt.getTime(),showActions:"hover",actions:qi,className:"bn-thread-comment",emojiPickerOpen:Kn,children:jsxRuntimeExports.jsx(Ye$1,{autoFocus:zn,editor:jn,editable:zn,actions:e.reactions.length>0||zn?({isEmpty:Zi})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.reactions.length>0&&!zn&&jsxRuntimeExports.jsxs(Un.Generic.Badge.Group,{className:D$3("bn-badge-group","bn-comment-reactions"),children:[e.reactions.map(gs=>jsxRuntimeExports.jsx(el,{comment:e,emoji:gs.emoji,onReactionSelect:$i},gs.emoji)),zi&&jsxRuntimeExports.jsx(pt$1,{onEmojiSelect:gs=>$i(gs.native),onOpenChange:Xn,children:jsxRuntimeExports.jsx(Un.Generic.Badge.Root,{className:D$3("bn-badge","bn-comment-add-reaction"),text:"+",icon:jsxRuntimeExports.jsx(ut$1,{size:16}),mainTooltip:g.comments.actions.add_reaction})})]}),zn&&jsxRuntimeExports.jsxs(Un.Generic.Toolbar.Root,{variant:"action-toolbar",className:D$3("bn-action-toolbar","bn-comment-actions"),children:[jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{mainTooltip:g.comments.save_button_text,variant:"compact",onClick:Ri,isDisabled:Zi,children:g.comments.save_button_text}),jsxRuntimeExports.jsx(Un.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:g.comments.cancel_button_text,variant:"compact",onClick:Ai,children:g.comments.cancel_button_text})]})]}):void 0})})},ol=({thread:e,maxCommentsBeforeCollapse:n})=>{const l=w(),d=M$1(),g=Je$1(e.resolvedBy?[e.resolvedBy]:[]),jn=e.comments.map((Un,zn)=>jsxRuntimeExports.jsx(nl,{thread:e,comment:Un,showResolveButton:zn===0},Un.id+JSON.stringify(Un.body||"{}")));if(e.resolved&&e.resolvedUpdatedAt&&e.resolvedBy){if(!g.get(e.resolvedBy))throw new Error(`User ${e.resolvedBy} resolved thread ${e.id}, but their data could not be found.`);const Un=e.comments.findLastIndex(zn=>e.resolvedUpdatedAt.getTime()>zn.createdAt.getTime())+1;jn.splice(Un,0,jsxRuntimeExports.jsx(l.Comments.Comment,{className:"bn-thread-comment",authorInfo:e.resolvedBy&&g.get(e.resolvedBy)||"loading",timeString:e.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:jsxRuntimeExports.jsx("div",{className:"bn-resolved-text",children:d.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return n&&jn.length>n&&jn.splice(1,jn.length-2,jsxRuntimeExports.jsx(l.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:d.comments.sidebar.more_replies(e.comments.length-2)},"expand-prompt")),jn};function rl(){const e=T(ne$1),n=w(),l=M$1(),d=Xe$1({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.new_comment}},schema:e.commentEditorSchema||Qe$1});return jsxRuntimeExports.jsx(n.Comments.Card,{className:"bn-thread",children:jsxRuntimeExports.jsx(Ye$1,{autoFocus:!0,editable:!0,editor:d,actions:({isEmpty:g})=>jsxRuntimeExports.jsx(n.Generic.Toolbar.Root,{className:D$3("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:jsxRuntimeExports.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:g,onClick:async()=>{await e.createThread({initialComment:{body:d.document}}),e.stopPendingComment()},children:"Save"})})})})}function il(e){const n=v(),l=T(ne$1),d=E(ne$1,{editor:n,selector:zn=>zn.pendingComment}),g=R({editor:n,selector:({editor:zn})=>d?{from:zn.prosemirrorState.selection.from,to:zn.prosemirrorState.selection.to}:void 0}),jn=reactExports.useMemo(()=>({useFloatingOptions:{open:!!d,onOpenChange:zn=>{zn||(l.stopPendingComment(),n.focus())},placement:"bottom",middleware:[offset(10),shift(),flip()]},elementProps:{style:{zIndex:60}},...e.floatingUIOptions}),[l,n,d,e.floatingUIOptions]),Un=e.floatingComposer||rl;return jsxRuntimeExports.jsx(Ue$1,{position:g,...jn,children:jsxRuntimeExports.jsx(Un,{})})}const ll=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),tn=({thread:e,selected:n,referenceText:l,maxCommentsBeforeCollapse:d,onFocus:g,onBlur:jn,tabIndex:Un})=>{const zn=w(),qn=M$1(),Kn=T(ne$1),Xn=Xe$1({trailingBlock:!1,dictionary:{...qn,placeholders:{emptyDocument:qn.placeholders.comment_reply}},schema:Kn.commentEditorSchema||Qe$1}),Qn=reactExports.useCallback(async()=>{await Kn.threadStore.addComment({comment:{body:Xn.document},threadId:e.id}),Xn.removeBlocks(Xn.document)},[Kn,Xn,e.id]);return jsxRuntimeExports.jsxs(zn.Comments.Card,{className:"bn-thread",headerText:l,onFocus:g,onBlur:jn,selected:n,tabIndex:Un,children:[jsxRuntimeExports.jsx(zn.Comments.CardSection,{className:"bn-thread-comments",children:jsxRuntimeExports.jsx(ol,{thread:e,maxCommentsBeforeCollapse:n?void 0:d||5})}),n&&jsxRuntimeExports.jsx(zn.Comments.CardSection,{className:"bn-thread-composer",children:jsxRuntimeExports.jsx(Ye$1,{autoFocus:!1,editable:!0,editor:Xn,actions:({isEmpty:Jn})=>Jn?null:jsxRuntimeExports.jsx(zn.Generic.Toolbar.Root,{variant:"action-toolbar",className:D$3("bn-action-toolbar","bn-comment-actions"),children:jsxRuntimeExports.jsx(zn.Generic.Toolbar.Button,{mainTooltip:qn.comments.save_button_text,variant:"compact",isDisabled:Jn,onClick:Qn,children:qn.comments.save_button_text})})})})]})};function nn(){const e=T(ne$1).threadStore,n=reactExports.useRef(void 0);n.current||(n.current=e.getThreads());const l=reactExports.useCallback(d=>e.subscribe(g=>{n.current=g,d()}),[e]);return reactExports.useSyncExternalStore(l,()=>n.current)}function cl(e){const n=v(),l=T(ne$1),d=E(ne$1,{editor:n,selector:qn=>qn.selectedThreadId?{id:qn.selectedThreadId,position:qn.threadPositions.get(qn.selectedThreadId)}:void 0}),g=nn(),jn=reactExports.useMemo(()=>d?g.get(d.id):void 0,[d,g]),Un=reactExports.useMemo(()=>({useFloatingOptions:{open:!!d,onOpenChange:(qn,Kn,Xn)=>{Xn==="escape-key"&&n.focus(),qn||l.selectThread(void 0)},placement:"bottom",middleware:[offset(10),shift(),flip()]},elementProps:{style:{zIndex:30}},...e.floatingUIOptions}),[l,n,e.floatingUIOptions,d]),zn=e.floatingThread||tn;return jsxRuntimeExports.jsx(Ue$1,{position:d?.position,...Un,children:jn&&jsxRuntimeExports.jsx(zn,{thread:jn,selected:!0})})}const al=Object.freeze(Object.defineProperty({__proto__:null,default:cl},Symbol.toStringTag,{value:"Module"}));React.memo(({thread:e,selectedThreadId:n,maxCommentsBeforeCollapse:l,referenceText:d})=>{const g=T(ne$1),jn=reactExports.useCallback(zn=>{zn.target.closest(".bn-action-toolbar")||g.selectThread(e.id)},[g,e.id]),Un=reactExports.useCallback(zn=>{if(!zn.relatedTarget||zn.relatedTarget.closest(".bn-action-toolbar"))return;const qn=zn.target instanceof Node?zn.target:null,Kn=zn.relatedTarget instanceof Node?zn.relatedTarget.closest(".bn-thread"):null;(!qn||!Kn||!Kn.contains(qn))&&g.selectThread(void 0)},[g]);return jsxRuntimeExports.jsx(tn,{thread:e,selected:e.id===n,referenceText:d,maxCommentsBeforeCollapse:l,onFocus:jn,onBlur:Un,tabIndex:0})});function Ul(e,n){const l=e.getBoundingClientRect(),d=n.getBoundingClientRect(),g=l.top<d.top,jn=l.bottom>d.bottom;return g&&jn?"both":g?"top":jn?"bottom":"none"}function jl(e){return n=>{e.forEach(l=>{typeof l=="function"?l(n):l!=null&&(l.current=n)})}}function keys(e){return Object.keys(e)}function isObject(e){return e&&typeof e=="object"&&!Array.isArray(e)}function deepMerge(e,n){const l={...e},d=n;return isObject(e)&&isObject(n)&&Object.keys(n).forEach(g=>{isObject(d[g])&&g in e?l[g]=deepMerge(l[g],d[g]):l[g]=d[g]}),l}function camelToKebabCase(e){return e.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}function getTransformedScaledValue(e){return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function px(e){const n=getTransformedScaledValue(e);return typeof n=="number"?n:typeof n=="string"?n.includes("calc")||n.includes("var")?n:n.includes("px")?Number(n.replace("px","")):n.includes("rem")?Number(n.replace("rem",""))*16:n.includes("em")?Number(n.replace("em",""))*16:Number(n):NaN}function scaleRem(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function createConverter(e,{shouldScale:n=!1}={}){function l(d){if(d===0||d==="0")return`0${e}`;if(typeof d=="number"){const g=`${d/16}${e}`;return n?scaleRem(g):g}if(typeof d=="string"){if(d===""||d.startsWith("calc(")||d.startsWith("clamp(")||d.includes("rgba("))return d;if(d.includes(","))return d.split(",").map(jn=>l(jn)).join(",");if(d.includes(" "))return d.split(" ").map(jn=>l(jn)).join(" ");const g=d.replace("px","");if(!Number.isNaN(Number(g))){const jn=`${Number(g)/16}${e}`;return n?scaleRem(jn):jn}}return d}return l}const rem=createConverter("rem",{shouldScale:!0}),em=createConverter("em");function filterProps(e){return Object.keys(e).reduce((n,l)=>(e[l]!==void 0&&(n[l]=e[l]),n),{})}function isNumberLike(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const n=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(d=>n.test(d))}return!1}function isElement(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==reactExports.Fragment:!1}function createSafeContext(e){const n=reactExports.createContext(null);return[({children:g,value:jn})=>jsxRuntimeExports.jsx(n.Provider,{value:jn,children:g}),()=>{const g=reactExports.useContext(n);if(g===null)throw new Error(e);return g}]}function createOptionalContext(e=null){const n=reactExports.createContext(e);return[({children:g,value:jn})=>jsxRuntimeExports.jsx(n.Provider,{value:jn,children:g}),()=>reactExports.useContext(n)]}function getSafeId(e,n){return l=>{if(typeof l!="string"||l.trim().length===0)throw new Error(n);return`${e}-${l}`}}function findElementAncestor(e,n){let l=e;for(;(l=l.parentElement)&&!l.matches(n););return l}function getPreviousIndex(e,n,l){for(let d=e-1;d>=0;d-=1)if(!n[d].disabled)return d;if(l){for(let d=n.length-1;d>-1;d-=1)if(!n[d].disabled)return d}return e}function getNextIndex(e,n,l){for(let d=e+1;d<n.length;d+=1)if(!n[d].disabled)return d;if(l){for(let d=0;d<n.length;d+=1)if(!n[d].disabled)return d}return e}function onSameLevel(e,n,l){return findElementAncestor(e,l)===findElementAncestor(n,l)}function createScopedKeydownHandler({parentSelector:e,siblingSelector:n,onKeyDown:l,loop:d=!0,activateOnFocus:g=!1,dir:jn="rtl",orientation:Un}){return zn=>{l?.(zn);const qn=Array.from(findElementAncestor(zn.currentTarget,e)?.querySelectorAll(n)||[]).filter(Ri=>onSameLevel(zn.currentTarget,Ri,e)),Kn=qn.findIndex(Ri=>zn.currentTarget===Ri),Xn=getNextIndex(Kn,qn,d),Qn=getPreviousIndex(Kn,qn,d),Jn=jn==="rtl"?Qn:Xn,Ai=jn==="rtl"?Xn:Qn;switch(zn.key){case"ArrowRight":{Un==="horizontal"&&(zn.stopPropagation(),zn.preventDefault(),qn[Jn].focus(),g&&qn[Jn].click());break}case"ArrowLeft":{Un==="horizontal"&&(zn.stopPropagation(),zn.preventDefault(),qn[Ai].focus(),g&&qn[Ai].click());break}case"ArrowUp":{Un==="vertical"&&(zn.stopPropagation(),zn.preventDefault(),qn[Qn].focus(),g&&qn[Qn].click());break}case"ArrowDown":{Un==="vertical"&&(zn.stopPropagation(),zn.preventDefault(),qn[Xn].focus(),g&&qn[Xn].click());break}case"Home":{zn.stopPropagation(),zn.preventDefault(),!qn[0].disabled&&qn[0].focus();break}case"End":{zn.stopPropagation(),zn.preventDefault();const Ri=qn.length-1;!qn[Ri].disabled&&qn[Ri].focus();break}}}}const elevations={app:100,modal:200,popover:300,overlay:400,max:9999};function getDefaultZIndex(e){return elevations[e]}const noop=()=>{};function closeOnEscape(e,n={active:!0}){return typeof e!="function"||!n.active?n.onKeyDown||noop:l=>{l.key==="Escape"&&(e(l),n.onTrigger?.())}}function getSize(e,n="size",l=!0){if(e!==void 0)return isNumberLike(e)?l?rem(e):e:`var(--${n}-${e})`}function getSpacing(e){return getSize(e,"mantine-spacing")}function getRadius(e){return e===void 0?"var(--mantine-radius-default)":getSize(e,"mantine-radius")}function getFontSize(e){return getSize(e,"mantine-font-size")}function getLineHeight(e){return getSize(e,"mantine-line-height",!1)}function getShadow(e){if(e)return getSize(e,"mantine-shadow",!1)}function createEventHandler(e,n){return l=>{e?.(l),n?.(l)}}function getContextItemIndex(e,n,l){return l?Array.from(findElementAncestor(l,n)?.querySelectorAll(e)||[]).findIndex(d=>d===l):null}function randomId(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}const DEFAULT_EVENTS=["mousedown","touchstart"];function useClickOutside(e,n,l){const d=reactExports.useRef(null),g=n||DEFAULT_EVENTS;return reactExports.useEffect(()=>{const jn=Un=>{const{target:zn}=Un??{};if(Array.isArray(l)){const qn=!document.body.contains(zn)&&zn?.tagName!=="HTML";l.every(Xn=>!!Xn&&!Un.composedPath().includes(Xn))&&!qn&&e(Un)}else d.current&&!d.current.contains(zn)&&e(Un)};return g.forEach(Un=>document.addEventListener(Un,jn)),()=>{g.forEach(Un=>document.removeEventListener(Un,jn))}},[d,e,l]),d}function attachMediaListener(e,n){try{return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}catch{return e.addListener(n),()=>e.removeListener(n)}}function getInitialValue(e,n){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function useMediaQuery(e,n,{getInitialValueInEffect:l}={getInitialValueInEffect:!0}){const[d,g]=reactExports.useState(l?n:getInitialValue(e));return reactExports.useEffect(()=>{try{const jn=window.matchMedia(e);return g(jn.matches),attachMediaListener(jn,Un=>g(Un.matches))}catch{return}},[e]),d||!1}const useIsomorphicEffect=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useDidUpdate(e,n){const l=reactExports.useRef(!1);reactExports.useEffect(()=>()=>{l.current=!1},[]),reactExports.useEffect(()=>{if(l.current)return e();l.current=!0},n)}function useFocusReturn({opened:e,shouldReturnFocus:n=!0}){const l=reactExports.useRef(null),d=()=>{l.current&&"focus"in l.current&&typeof l.current.focus=="function"&&l.current?.focus({preventScroll:!0})};return useDidUpdate(()=>{let g=-1;const jn=Un=>{Un.key==="Tab"&&window.clearTimeout(g)};return document.addEventListener("keydown",jn),e?l.current=document.activeElement:n&&(g=window.setTimeout(d,10)),()=>{window.clearTimeout(g),document.removeEventListener("keydown",jn)}},[e,n]),d}const TABBABLE_NODES=/input|select|textarea|button|object/,FOCUS_SELECTOR="a, input, select, textarea, button, object, [tabindex]";function hidden(e){return e.style.display==="none"}function visible(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let l=e;for(;l&&!(l===document.body||l.nodeType===11);){if(hidden(l))return!1;l=l.parentNode}return!0}function getElementTabIndex(e){let n=e.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function focusable(e){const n=e.nodeName.toLowerCase(),l=!Number.isNaN(getElementTabIndex(e));return(TABBABLE_NODES.test(n)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||l)&&visible(e)}function tabbable(e){const n=getElementTabIndex(e);return(Number.isNaN(n)||n>=0)&&focusable(e)}function findTabbableDescendants(e){return Array.from(e.querySelectorAll(FOCUS_SELECTOR)).filter(tabbable)}function scopeTab(e,n){const l=findTabbableDescendants(e);if(!l.length){n.preventDefault();return}const d=l[n.shiftKey?0:l.length-1],g=e.getRootNode();let jn=d===g.activeElement||e===g.activeElement;const Un=g.activeElement;if(Un.tagName==="INPUT"&&Un.getAttribute("type")==="radio"&&(jn=l.filter(Xn=>Xn.getAttribute("type")==="radio"&&Xn.getAttribute("name")===Un.getAttribute("name")).includes(d)),!jn)return;n.preventDefault();const qn=l[n.shiftKey?l.length-1:0];qn&&qn.focus()}function useFocusTrap(e=!0){const n=reactExports.useRef(null),l=g=>{let jn=g.querySelector("[data-autofocus]");if(!jn){const Un=Array.from(g.querySelectorAll(FOCUS_SELECTOR));jn=Un.find(tabbable)||Un.find(focusable)||null,!jn&&focusable(g)&&(jn=g)}jn&&jn.focus({preventScroll:!0})},d=reactExports.useCallback(g=>{e&&g!==null&&n.current!==g&&(g?(setTimeout(()=>{g.getRootNode()&&l(g)}),n.current=g):n.current=null)},[e]);return reactExports.useEffect(()=>{if(!e)return;n.current&&setTimeout(()=>l(n.current));const g=jn=>{jn.key==="Tab"&&n.current&&scopeTab(n.current,jn)};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[e]),d}const __useId=React.useId||(()=>{});function useReactId(){const e=__useId();return e?`mantine-${e.replace(/:/g,"")}`:""}function useId(e){const n=useReactId(),[l,d]=reactExports.useState(n);return useIsomorphicEffect(()=>{d(randomId())},[]),typeof e=="string"?e:typeof window>"u"?n:l}function assignRef(e,n){if(typeof e=="function")return e(n);typeof e=="object"&&e!==null&&"current"in e&&(e.current=n)}function mergeRefs(...e){const n=new Map;return l=>{if(e.forEach(d=>{const g=assignRef(d,l);g&&n.set(d,g)}),n.size>0)return()=>{e.forEach(d=>{const g=n.get(d);g&&typeof g=="function"?g():assignRef(d,null)}),n.clear()}}}function useMergedRef(...e){return reactExports.useCallback(mergeRefs(...e),e)}function useUncontrolled({value:e,defaultValue:n,finalValue:l,onChange:d=()=>{}}){const[g,jn]=reactExports.useState(n!==void 0?n:l),Un=(zn,...qn)=>{jn(zn),d?.(zn,...qn)};return e!==void 0?[e,d,!0]:[g,Un,!1]}function useReducedMotion(e,n){return useMediaQuery("(prefers-reduced-motion: reduce)",e,n)}function useHover(){const[e,n]=reactExports.useState(!1),l=reactExports.useRef(null),d=reactExports.useCallback(()=>{n(!0)},[]),g=reactExports.useCallback(()=>{n(!1)},[]);return{ref:reactExports.useCallback(Un=>{l.current&&(l.current.removeEventListener("mouseenter",d),l.current.removeEventListener("mouseleave",g)),Un&&(Un.addEventListener("mouseenter",d),Un.addEventListener("mouseleave",g)),l.current=Un},[d,g]),hovered:e}}function useDisclosure(e=!1,n={}){const[l,d]=reactExports.useState(e),g=reactExports.useCallback(()=>{d(zn=>zn||(n.onOpen?.(),!0))},[n.onOpen]),jn=reactExports.useCallback(()=>{d(zn=>zn&&(n.onClose?.(),!1))},[n.onClose]),Un=reactExports.useCallback(()=>{l?jn():g()},[jn,g,l]);return[l,{open:g,close:jn,toggle:Un}]}function containsRelatedTarget(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement?e.currentTarget.contains(e.relatedTarget):!1}function useFocusWithin({onBlur:e,onFocus:n}={}){const[l,d]=reactExports.useState(!1),g=reactExports.useRef(!1),jn=reactExports.useRef(null),Un=reactExports.useCallback(Xn=>{d(Xn),g.current=Xn},[]),zn=reactExports.useCallback(Xn=>{g.current||(Un(!0),n?.(Xn))},[n]),qn=reactExports.useCallback(Xn=>{g.current&&!containsRelatedTarget(Xn)&&(Un(!1),e?.(Xn))},[e]),Kn=reactExports.useCallback(Xn=>{Xn&&(jn.current&&(jn.current.removeEventListener("focusin",zn),jn.current.removeEventListener("focusout",qn)),Xn.addEventListener("focusin",zn),Xn.addEventListener("focusout",qn),jn.current=Xn)},[zn,qn]);return reactExports.useEffect(()=>()=>{jn.current&&(jn.current.removeEventListener("focusin",zn),jn.current.removeEventListener("focusout",qn))},[]),{ref:Kn,focused:l}}function getRefProp(e){const n=React.version;return typeof React.version!="string"||n.startsWith("18.")?e?.ref:e?.props?.ref}function getSingleElementChild(e){const n=reactExports.Children.toArray(e);return n.length!==1||!isElement(n[0])?null:n[0]}function createVarsResolver(e){return e}function r(e){var n,l,d="";if(typeof e=="string"||typeof e=="number")d+=e;else if(typeof e=="object")if(Array.isArray(e)){var g=e.length;for(n=0;n<g;n++)e[n]&&(l=r(e[n]))&&(d&&(d+=" "),d+=l)}else for(l in e)e[l]&&(d&&(d+=" "),d+=l);return d}function clsx(){for(var e,n,l=0,d="",g=arguments.length;l<g;l++)(e=arguments[l])&&(n=r(e))&&(d&&(d+=" "),d+=n);return d}const EMPTY_CLASS_NAMES={};function mergeClassNames(e){const n={};return e.forEach(l=>{Object.entries(l).forEach(([d,g])=>{n[d]?n[d]=clsx(n[d],g):n[d]=g})}),n}function resolveClassNames({theme:e,classNames:n,props:l,stylesCtx:d}){const jn=(Array.isArray(n)?n:[n]).map(Un=>typeof Un=="function"?Un(e,l,d):Un||EMPTY_CLASS_NAMES);return mergeClassNames(jn)}function resolveStyles({theme:e,styles:n,props:l,stylesCtx:d}){return(Array.isArray(n)?n:[n]).reduce((jn,Un)=>typeof Un=="function"?{...jn,...Un(e,l,d)}:{...jn,...Un},{})}const MantineContext=reactExports.createContext(null);function useMantineContext(){const e=reactExports.useContext(MantineContext);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function useMantineCssVariablesResolver(){return useMantineContext().cssVariablesResolver}function useMantineClassNamesPrefix(){return useMantineContext().classNamesPrefix}function useMantineStyleNonce(){return useMantineContext().getStyleNonce}function useMantineWithStaticClasses(){return useMantineContext().withStaticClasses}function useMantineIsHeadless(){return useMantineContext().headless}function useMantineSxTransform(){return useMantineContext().stylesTransform?.sx}function useMantineStylesTransform(){return useMantineContext().stylesTransform?.styles}function useMantineEnv(){return useMantineContext().env||"default"}function isHexColor(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function hexToRgba(e){let n=e.replace("#","");if(n.length===3){const Un=n.split("");n=[Un[0],Un[0],Un[1],Un[1],Un[2],Un[2]].join("")}if(n.length===8){const Un=parseInt(n.slice(6,8),16)/255;return{r:parseInt(n.slice(0,2),16),g:parseInt(n.slice(2,4),16),b:parseInt(n.slice(4,6),16),a:Un}}const l=parseInt(n,16),d=l>>16&255,g=l>>8&255,jn=l&255;return{r:d,g,b:jn,a:1}}function rgbStringToRgba(e){const[n,l,d,g]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:n,g:l,b:d,a:g===void 0?1:g}}function hslStringToRgba(e){const n=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,l=e.match(n);if(!l)return{r:0,g:0,b:0,a:1};const d=parseInt(l[1],10),g=parseInt(l[2],10)/100,jn=parseInt(l[3],10)/100,Un=l[5]?parseFloat(l[5]):void 0,zn=(1-Math.abs(2*jn-1))*g,qn=d/60,Kn=zn*(1-Math.abs(qn%2-1)),Xn=jn-zn/2;let Qn,Jn,Ai;return qn>=0&&qn<1?(Qn=zn,Jn=Kn,Ai=0):qn>=1&&qn<2?(Qn=Kn,Jn=zn,Ai=0):qn>=2&&qn<3?(Qn=0,Jn=zn,Ai=Kn):qn>=3&&qn<4?(Qn=0,Jn=Kn,Ai=zn):qn>=4&&qn<5?(Qn=Kn,Jn=0,Ai=zn):(Qn=zn,Jn=0,Ai=Kn),{r:Math.round((Qn+Xn)*255),g:Math.round((Jn+Xn)*255),b:Math.round((Ai+Xn)*255),a:Un||1}}function toRgba(e){return isHexColor(e)?hexToRgba(e):e.startsWith("rgb")?rgbStringToRgba(e):e.startsWith("hsl")?hslStringToRgba(e):{r:0,g:0,b:0,a:1}}function darken(e,n){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${n*100}%)`;const{r:l,g:d,b:g,a:jn}=toRgba(e),Un=1-n,zn=qn=>Math.round(qn*Un);return`rgba(${zn(l)}, ${zn(d)}, ${zn(g)}, ${jn})`}function getPrimaryShade(e,n){return typeof e.primaryShade=="number"?e.primaryShade:n==="dark"?e.primaryShade.dark:e.primaryShade.light}function gammaCorrect(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function getLightnessFromOklch(e){const n=e.match(/oklch\((.*?)%\s/);return n?parseFloat(n[1]):null}function luminance(e){if(e.startsWith("oklch("))return(getLightnessFromOklch(e)||0)/100;const{r:n,g:l,b:d}=toRgba(e),g=n/255,jn=l/255,Un=d/255,zn=gammaCorrect(g),qn=gammaCorrect(jn),Kn=gammaCorrect(Un);return .2126*zn+.7152*qn+.0722*Kn}function isLightColor(e,n=.179){return e.startsWith("var(")?!1:luminance(e)>n}function parseThemeColor({color:e,theme:n,colorScheme:l}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:l==="dark"?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:isLightColor(l==="dark"?n.white:n.black,n.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:l==="dark"?n.colors.dark[2]:n.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:isLightColor(l==="dark"?n.colors.dark[2]:n.colors.gray[6],n.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:isLightColor(e==="white"?n.white:n.black,n.luminanceThreshold),variable:`--mantine-color-${e}`};const[d,g]=e.split("."),jn=g?Number(g):void 0,Un=d in n.colors;if(Un){const zn=jn!==void 0?n.colors[d][jn]:n.colors[d][getPrimaryShade(n,l||"light")];return{color:d,value:zn,shade:jn,isThemeColor:Un,isLight:isLightColor(zn,n.luminanceThreshold),variable:g?`--mantine-color-${d}-${jn}`:`--mantine-color-${d}-filled`}}return{color:e,value:e,isThemeColor:Un,isLight:isLightColor(e,n.luminanceThreshold),shade:jn,variable:void 0}}function getThemeColor(e,n){const l=parseThemeColor({color:e||n.primaryColor,theme:n});return l.variable?`var(${l.variable})`:e}function getGradient(e,n){const l={from:e?.from||n.defaultGradient.from,to:e?.to||n.defaultGradient.to,deg:e?.deg??n.defaultGradient.deg??0},d=getThemeColor(l.from,n),g=getThemeColor(l.to,n);return`linear-gradient(${l.deg}deg, ${d} 0%, ${g} 100%)`}function rgba(e,n){if(typeof e!="string"||n>1||n<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const jn=(1-n)*100;return`color-mix(in srgb, ${e}, transparent ${jn}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${n})`):e.replace(")",` / ${n})`);const{r:l,g:d,b:g}=toRgba(e);return`rgba(${l}, ${d}, ${g}, ${n})`}const alpha=rgba,defaultVariantColorsResolver=({color:e,theme:n,variant:l,gradient:d,autoContrast:g})=>{const jn=parseThemeColor({color:e,theme:n}),Un=typeof g=="boolean"?g:n.autoContrast;if(l==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(l==="filled"){const zn=Un&&jn.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return jn.isThemeColor?jn.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:zn,border:`${rem(1)} solid transparent`}:{background:`var(--mantine-color-${jn.color}-${jn.shade})`,hover:`var(--mantine-color-${jn.color}-${jn.shade===9?8:jn.shade+1})`,color:zn,border:`${rem(1)} solid transparent`}:{background:e,hover:darken(e,.1),color:zn,border:`${rem(1)} solid transparent`}}if(l==="light"){if(jn.isThemeColor){if(jn.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${rem(1)} solid transparent`};const zn=n.colors[jn.color][jn.shade];return{background:rgba(zn,.1),hover:rgba(zn,.12),color:`var(--mantine-color-${jn.color}-${Math.min(jn.shade,6)})`,border:`${rem(1)} solid transparent`}}return{background:rgba(e,.1),hover:rgba(e,.12),color:e,border:`${rem(1)} solid transparent`}}if(l==="outline")return jn.isThemeColor?jn.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${rem(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:rgba(n.colors[jn.color][jn.shade],.05),color:`var(--mantine-color-${jn.color}-${jn.shade})`,border:`${rem(1)} solid var(--mantine-color-${jn.color}-${jn.shade})`}:{background:"transparent",hover:rgba(e,.05),color:e,border:`${rem(1)} solid ${e}`};if(l==="subtle"){if(jn.isThemeColor){if(jn.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${rem(1)} solid transparent`};const zn=n.colors[jn.color][jn.shade];return{background:"transparent",hover:rgba(zn,.12),color:`var(--mantine-color-${jn.color}-${Math.min(jn.shade,6)})`,border:`${rem(1)} solid transparent`}}return{background:"transparent",hover:rgba(e,.12),color:e,border:`${rem(1)} solid transparent`}}return l==="transparent"?jn.isThemeColor?jn.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${rem(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${jn.color}-${Math.min(jn.shade,6)})`,border:`${rem(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${rem(1)} solid transparent`}:l==="white"?jn.isThemeColor?jn.shade===void 0?{background:"var(--mantine-color-white)",hover:darken(n.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${rem(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:darken(n.white,.01),color:`var(--mantine-color-${jn.color}-${jn.shade})`,border:`${rem(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:darken(n.white,.01),color:e,border:`${rem(1)} solid transparent`}:l==="gradient"?{background:getGradient(d,n),hover:getGradient(d,n),color:"var(--mantine-color-white)",border:"none"}:l==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${rem(1)} solid var(--mantine-color-default-border)`}:{}},DEFAULT_COLORS={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},DEFAULT_FONT_FAMILY="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",DEFAULT_THEME={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:DEFAULT_COLORS,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:defaultVariantColorsResolver,autoContrast:!1,luminanceThreshold:.3,fontFamily:DEFAULT_FONT_FAMILY,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:DEFAULT_FONT_FAMILY,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:rem(34),lineHeight:"1.3"},h2:{fontSize:rem(26),lineHeight:"1.35"},h3:{fontSize:rem(22),lineHeight:"1.4"},h4:{fontSize:rem(18),lineHeight:"1.45"},h5:{fontSize:rem(16),lineHeight:"1.5"},h6:{fontSize:rem(14),lineHeight:"1.5"}}},fontSizes:{xs:rem(12),sm:rem(14),md:rem(16),lg:rem(18),xl:rem(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:rem(2),sm:rem(4),md:rem(8),lg:rem(16),xl:rem(32)},spacing:{xs:rem(10),sm:rem(12),md:rem(16),lg:rem(20),xl:rem(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), 0 ${rem(1)} ${rem(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(10)} ${rem(15)} ${rem(-5)}, rgba(0, 0, 0, 0.04) 0 ${rem(7)} ${rem(7)} ${rem(-5)}`,md:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(20)} ${rem(25)} ${rem(-5)}, rgba(0, 0, 0, 0.04) 0 ${rem(10)} ${rem(10)} ${rem(-5)}`,lg:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(28)} ${rem(23)} ${rem(-7)}, rgba(0, 0, 0, 0.04) 0 ${rem(12)} ${rem(12)} ${rem(-7)}`,xl:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(36)} ${rem(28)} ${rem(-7)}, rgba(0, 0, 0, 0.04) 0 ${rem(17)} ${rem(17)} ${rem(-7)}`},other:{},components:{}};function isMantineColorScheme(e){return e==="auto"||e==="dark"||e==="light"}function localStorageColorSchemeManager({key:e="mantine-color-scheme-value"}={}){let n;return{get:l=>{if(typeof window>"u")return l;try{const d=window.localStorage.getItem(e);return isMantineColorScheme(d)?d:l}catch{return l}},set:l=>{try{window.localStorage.setItem(e,l)}catch(d){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",d)}},subscribe:l=>{n=d=>{d.storageArea===window.localStorage&&d.key===e&&isMantineColorScheme(d.newValue)&&l(d.newValue)},window.addEventListener("storage",n)},unsubscribe:()=>{window.removeEventListener("storage",n)},clear:()=>{window.localStorage.removeItem(e)}}}const INVALID_PRIMARY_COLOR_ERROR="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",INVALID_PRIMARY_SHADE_ERROR="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function isValidPrimaryShade(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function validateMantineTheme(e){if(!(e.primaryColor in e.colors))throw new Error(INVALID_PRIMARY_COLOR_ERROR);if(typeof e.primaryShade=="object"&&(!isValidPrimaryShade(e.primaryShade.dark)||!isValidPrimaryShade(e.primaryShade.light)))throw new Error(INVALID_PRIMARY_SHADE_ERROR);if(typeof e.primaryShade=="number"&&!isValidPrimaryShade(e.primaryShade))throw new Error(INVALID_PRIMARY_SHADE_ERROR)}function mergeMantineTheme(e,n){if(!n)return validateMantineTheme(e),e;const l=deepMerge(e,n);return n.fontFamily&&!n.headings?.fontFamily&&(l.headings.fontFamily=n.fontFamily),validateMantineTheme(l),l}const MantineThemeContext=reactExports.createContext(null),useSafeMantineTheme=()=>reactExports.useContext(MantineThemeContext)||DEFAULT_THEME;function useMantineTheme(){const e=reactExports.useContext(MantineThemeContext);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function MantineThemeProvider({theme:e,children:n,inherit:l=!0}){const d=useSafeMantineTheme(),g=reactExports.useMemo(()=>mergeMantineTheme(l?d:DEFAULT_THEME,e),[e,d,l]);return jsxRuntimeExports.jsx(MantineThemeContext.Provider,{value:g,children:n})}MantineThemeProvider.displayName="@mantine/core/MantineThemeProvider";function MantineClasses(){const e=useMantineTheme(),n=useMantineStyleNonce(),l=keys(e.breakpoints).reduce((d,g)=>{const jn=e.breakpoints[g].includes("px"),Un=px(e.breakpoints[g]),zn=jn?`${Un-.1}px`:em(Un-.1),qn=jn?`${Un}px`:em(Un);return`${d}@media (max-width: ${zn}) {.mantine-visible-from-${g} {display: none !important;}}@media (min-width: ${qn}) {.mantine-hidden-from-${g} {display: none !important;}}`},"");return jsxRuntimeExports.jsx("style",{"data-mantine-styles":"classes",nonce:n?.(),dangerouslySetInnerHTML:{__html:l}})}function cssVariablesObjectToString(e){return Object.entries(e).map(([n,l])=>`${n}: ${l};`).join("")}function convertCssVariables(e,n){const l=n?[n]:[":root",":host"],d=cssVariablesObjectToString(e.variables),g=d?`${l.join(", ")}{${d}}`:"",jn=cssVariablesObjectToString(e.dark),Un=cssVariablesObjectToString(e.light),zn=Xn=>l.map(Qn=>Qn===":host"?`${Qn}([data-mantine-color-scheme="${Xn}"])`:`${Qn}[data-mantine-color-scheme="${Xn}"]`).join(", "),qn=jn?`${zn("dark")}{${jn}}`:"",Kn=Un?`${zn("light")}{${Un}}`:"";return`${g}

${qn}

${Kn}`}function getContrastColor({color:e,theme:n,autoContrast:l}){return(typeof l=="boolean"?l:n.autoContrast)&&parseThemeColor({color:e||n.primaryColor,theme:n}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function getPrimaryContrastColor(e,n){return getContrastColor({color:e.colors[e.primaryColor][getPrimaryShade(e,n)],theme:e,autoContrast:null})}function getCSSColorVariables({theme:e,color:n,colorScheme:l,name:d=n,withColorValues:g=!0}){if(!e.colors[n])return{};if(l==="light"){const zn=getPrimaryShade(e,"light"),qn={[`--mantine-color-${d}-text`]:`var(--mantine-color-${d}-filled)`,[`--mantine-color-${d}-filled`]:`var(--mantine-color-${d}-${zn})`,[`--mantine-color-${d}-filled-hover`]:`var(--mantine-color-${d}-${zn===9?8:zn+1})`,[`--mantine-color-${d}-light`]:alpha(e.colors[n][zn],.1),[`--mantine-color-${d}-light-hover`]:alpha(e.colors[n][zn],.12),[`--mantine-color-${d}-light-color`]:`var(--mantine-color-${d}-${zn})`,[`--mantine-color-${d}-outline`]:`var(--mantine-color-${d}-${zn})`,[`--mantine-color-${d}-outline-hover`]:alpha(e.colors[n][zn],.05)};return g?{[`--mantine-color-${d}-0`]:e.colors[n][0],[`--mantine-color-${d}-1`]:e.colors[n][1],[`--mantine-color-${d}-2`]:e.colors[n][2],[`--mantine-color-${d}-3`]:e.colors[n][3],[`--mantine-color-${d}-4`]:e.colors[n][4],[`--mantine-color-${d}-5`]:e.colors[n][5],[`--mantine-color-${d}-6`]:e.colors[n][6],[`--mantine-color-${d}-7`]:e.colors[n][7],[`--mantine-color-${d}-8`]:e.colors[n][8],[`--mantine-color-${d}-9`]:e.colors[n][9],...qn}:qn}const jn=getPrimaryShade(e,"dark"),Un={[`--mantine-color-${d}-text`]:`var(--mantine-color-${d}-4)`,[`--mantine-color-${d}-filled`]:`var(--mantine-color-${d}-${jn})`,[`--mantine-color-${d}-filled-hover`]:`var(--mantine-color-${d}-${jn===9?8:jn+1})`,[`--mantine-color-${d}-light`]:alpha(e.colors[n][Math.max(0,jn-2)],.15),[`--mantine-color-${d}-light-hover`]:alpha(e.colors[n][Math.max(0,jn-2)],.2),[`--mantine-color-${d}-light-color`]:`var(--mantine-color-${d}-${Math.max(jn-5,0)})`,[`--mantine-color-${d}-outline`]:`var(--mantine-color-${d}-${Math.max(jn-4,0)})`,[`--mantine-color-${d}-outline-hover`]:alpha(e.colors[n][Math.max(jn-4,0)],.05)};return g?{[`--mantine-color-${d}-0`]:e.colors[n][0],[`--mantine-color-${d}-1`]:e.colors[n][1],[`--mantine-color-${d}-2`]:e.colors[n][2],[`--mantine-color-${d}-3`]:e.colors[n][3],[`--mantine-color-${d}-4`]:e.colors[n][4],[`--mantine-color-${d}-5`]:e.colors[n][5],[`--mantine-color-${d}-6`]:e.colors[n][6],[`--mantine-color-${d}-7`]:e.colors[n][7],[`--mantine-color-${d}-8`]:e.colors[n][8],[`--mantine-color-${d}-9`]:e.colors[n][9],...Un}:Un}function isVirtualColor(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function assignSizeVariables(e,n,l){keys(n).forEach(d=>Object.assign(e,{[`--mantine-${l}-${d}`]:n[d]}))}const defaultCssVariablesResolver=e=>{const n=getPrimaryShade(e,"light"),l=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:rem(e.defaultRadius),d={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":l,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":getPrimaryContrastColor(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${n})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":getPrimaryContrastColor(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};assignSizeVariables(d.variables,e.breakpoints,"breakpoint"),assignSizeVariables(d.variables,e.spacing,"spacing"),assignSizeVariables(d.variables,e.fontSizes,"font-size"),assignSizeVariables(d.variables,e.lineHeights,"line-height"),assignSizeVariables(d.variables,e.shadows,"shadow"),assignSizeVariables(d.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((jn,Un)=>{d.variables[`--mantine-primary-color-${Un}`]=`var(--mantine-color-${e.primaryColor}-${Un})`}),keys(e.colors).forEach(jn=>{const Un=e.colors[jn];if(isVirtualColor(Un)){Object.assign(d.light,getCSSColorVariables({theme:e,name:Un.name,color:Un.light,colorScheme:"light",withColorValues:!0})),Object.assign(d.dark,getCSSColorVariables({theme:e,name:Un.name,color:Un.dark,colorScheme:"dark",withColorValues:!0}));return}Un.forEach((zn,qn)=>{d.variables[`--mantine-color-${jn}-${qn}`]=zn}),Object.assign(d.light,getCSSColorVariables({theme:e,color:jn,colorScheme:"light",withColorValues:!1})),Object.assign(d.dark,getCSSColorVariables({theme:e,color:jn,colorScheme:"dark",withColorValues:!1}))});const g=e.headings.sizes;return keys(g).forEach(jn=>{d.variables[`--mantine-${jn}-font-size`]=g[jn].fontSize,d.variables[`--mantine-${jn}-line-height`]=g[jn].lineHeight,d.variables[`--mantine-${jn}-font-weight`]=g[jn].fontWeight||e.headings.fontWeight}),d};function getMergedVariables({theme:e,generator:n}){const l=defaultCssVariablesResolver(e),d=n?.(e);return d?deepMerge(l,d):l}const defaultCssVariables=defaultCssVariablesResolver(DEFAULT_THEME);function removeDefaultVariables(e){const n={variables:{},light:{},dark:{}};return keys(e.variables).forEach(l=>{defaultCssVariables.variables[l]!==e.variables[l]&&(n.variables[l]=e.variables[l])}),keys(e.light).forEach(l=>{defaultCssVariables.light[l]!==e.light[l]&&(n.light[l]=e.light[l])}),keys(e.dark).forEach(l=>{defaultCssVariables.dark[l]!==e.dark[l]&&(n.dark[l]=e.dark[l])}),n}function getColorSchemeCssVariables(e){return convertCssVariables({variables:{},dark:{"--mantine-color-scheme":"dark"},light:{"--mantine-color-scheme":"light"}},e)}function MantineCssVariables({cssVariablesSelector:e,deduplicateCssVariables:n}){const l=useMantineTheme(),d=useMantineStyleNonce(),g=useMantineCssVariablesResolver(),jn=getMergedVariables({theme:l,generator:g}),Un=(e===void 0||e===":root"||e===":host")&&n,zn=Un?removeDefaultVariables(jn):jn,qn=convertCssVariables(zn,e);return qn?jsxRuntimeExports.jsx("style",{"data-mantine-styles":!0,nonce:d?.(),dangerouslySetInnerHTML:{__html:`${qn}${Un?"":getColorSchemeCssVariables(e)}`}}):null}MantineCssVariables.displayName="@mantine/CssVariables";function setColorSchemeAttribute(e,n){const l=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,d=e!=="auto"?e:l?"dark":"light";n()?.setAttribute("data-mantine-color-scheme",d)}function useProviderColorScheme({manager:e,defaultColorScheme:n,getRootElement:l,forceColorScheme:d}){const g=reactExports.useRef(null),[jn,Un]=reactExports.useState(()=>e.get(n)),zn=d||jn,qn=reactExports.useCallback(Xn=>{d||(setColorSchemeAttribute(Xn,l),Un(Xn),e.set(Xn))},[e.set,zn,d]),Kn=reactExports.useCallback(()=>{Un(n),setColorSchemeAttribute(n,l),e.clear()},[e.clear,n]);return reactExports.useEffect(()=>(e.subscribe(qn),e.unsubscribe),[e.subscribe,e.unsubscribe]),useIsomorphicEffect(()=>{setColorSchemeAttribute(e.get(n),l)},[]),reactExports.useEffect(()=>{if(d)return setColorSchemeAttribute(d,l),()=>{};d===void 0&&setColorSchemeAttribute(jn,l),typeof window<"u"&&"matchMedia"in window&&(g.current=window.matchMedia("(prefers-color-scheme: dark)"));const Xn=Qn=>{jn==="auto"&&setColorSchemeAttribute(Qn.matches?"dark":"light",l)};return g.current?.addEventListener("change",Xn),()=>g.current?.removeEventListener("change",Xn)},[jn,d]),{colorScheme:zn,setColorScheme:qn,clearColorScheme:Kn}}function useRespectReduceMotion({respectReducedMotion:e,getRootElement:n}){useIsomorphicEffect(()=>{e&&n()?.setAttribute("data-respect-reduced-motion","true")},[e])}function MantineProvider({theme:e,children:n,getStyleNonce:l,withStaticClasses:d=!0,withGlobalClasses:g=!0,deduplicateCssVariables:jn=!0,withCssVariables:Un=!0,cssVariablesSelector:zn,classNamesPrefix:qn="mantine",colorSchemeManager:Kn=localStorageColorSchemeManager(),defaultColorScheme:Xn="light",getRootElement:Qn=()=>document.documentElement,cssVariablesResolver:Jn,forceColorScheme:Ai,stylesTransform:Ri,env:Ni}){const{colorScheme:$i,setColorScheme:Li,clearColorScheme:ji}=useProviderColorScheme({defaultColorScheme:Xn,forceColorScheme:Ai,manager:Kn,getRootElement:Qn});return useRespectReduceMotion({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:Qn}),jsxRuntimeExports.jsx(MantineContext.Provider,{value:{colorScheme:$i,setColorScheme:Li,clearColorScheme:ji,getRootElement:Qn,classNamesPrefix:qn,getStyleNonce:l,cssVariablesResolver:Jn,cssVariablesSelector:zn??":root",withStaticClasses:d,stylesTransform:Ri,env:Ni},children:jsxRuntimeExports.jsxs(MantineThemeProvider,{theme:e,children:[Un&&jsxRuntimeExports.jsx(MantineCssVariables,{cssVariablesSelector:zn,deduplicateCssVariables:jn}),g&&jsxRuntimeExports.jsx(MantineClasses,{}),n]})})}MantineProvider.displayName="@mantine/core/MantineProvider";function useResolvedStylesApi({classNames:e,styles:n,props:l,stylesCtx:d}){const g=useMantineTheme();return{resolvedClassNames:resolveClassNames({theme:g,classNames:e,props:l,stylesCtx:d||void 0}),resolvedStyles:resolveStyles({theme:g,styles:n,props:l,stylesCtx:d||void 0})}}const FOCUS_CLASS_NAMES={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function getGlobalClassNames({theme:e,options:n,unstyled:l}){return clsx(n?.focusable&&!l&&(e.focusClassName||FOCUS_CLASS_NAMES[e.focusRing]),n?.active&&!l&&e.activeClassName)}function getOptionsClassNames({selector:e,stylesCtx:n,options:l,props:d,theme:g}){return resolveClassNames({theme:g,classNames:l?.classNames,props:l?.props||d,stylesCtx:n})[e]}function getResolvedClassNames({selector:e,stylesCtx:n,theme:l,classNames:d,props:g}){return resolveClassNames({theme:l,classNames:d,props:g,stylesCtx:n})[e]}function getRootClassName({rootSelector:e,selector:n,className:l}){return e===n?l:void 0}function getSelectorClassName({selector:e,classes:n,unstyled:l}){return l?void 0:n[e]}function getStaticClassNames({themeName:e,classNamesPrefix:n,selector:l,withStaticClass:d}){return d===!1?[]:e.map(g=>`${n}-${g}-${l}`)}function getThemeClassNames({themeName:e,theme:n,selector:l,props:d,stylesCtx:g}){return e.map(jn=>resolveClassNames({theme:n,classNames:n.components[jn]?.classNames,props:d,stylesCtx:g})?.[l])}function getVariantClassName({options:e,classes:n,selector:l,unstyled:d}){return e?.variant&&!d?n[`${l}--${e.variant}`]:void 0}function getClassName({theme:e,options:n,themeName:l,selector:d,classNamesPrefix:g,classNames:jn,classes:Un,unstyled:zn,className:qn,rootSelector:Kn,props:Xn,stylesCtx:Qn,withStaticClasses:Jn,headless:Ai,transformedStyles:Ri}){return clsx(getGlobalClassNames({theme:e,options:n,unstyled:zn||Ai}),getThemeClassNames({theme:e,themeName:l,selector:d,props:Xn,stylesCtx:Qn}),getVariantClassName({options:n,classes:Un,selector:d,unstyled:zn}),getResolvedClassNames({selector:d,stylesCtx:Qn,theme:e,classNames:jn,props:Xn}),getResolvedClassNames({selector:d,stylesCtx:Qn,theme:e,classNames:Ri,props:Xn}),getOptionsClassNames({selector:d,stylesCtx:Qn,options:n,props:Xn,theme:e}),getRootClassName({rootSelector:Kn,selector:d,className:qn}),getSelectorClassName({selector:d,classes:Un,unstyled:zn||Ai}),Jn&&!Ai&&getStaticClassNames({themeName:l,classNamesPrefix:g,selector:d,withStaticClass:n?.withStaticClass}),n?.className)}function getThemeStyles({theme:e,themeName:n,props:l,stylesCtx:d,selector:g}){return n.map(jn=>resolveStyles({theme:e,styles:e.components[jn]?.styles,props:l,stylesCtx:d})[g]).reduce((jn,Un)=>({...jn,...Un}),{})}function resolveStyle({style:e,theme:n}){return Array.isArray(e)?[...e].reduce((l,d)=>({...l,...resolveStyle({style:d,theme:n})}),{}):typeof e=="function"?e(n):e??{}}function mergeVars(e){return e.reduce((n,l)=>(l&&Object.keys(l).forEach(d=>{n[d]={...n[d],...filterProps(l[d])}}),n),{})}function resolveVars({vars:e,varsResolver:n,theme:l,props:d,stylesCtx:g,selector:jn,themeName:Un,headless:zn}){return mergeVars([zn?{}:n?.(l,d,g),...Un.map(qn=>l.components?.[qn]?.vars?.(l,d,g)),e?.(l,d,g)])?.[jn]}function getStyle({theme:e,themeName:n,selector:l,options:d,props:g,stylesCtx:jn,rootSelector:Un,styles:zn,style:qn,vars:Kn,varsResolver:Xn,headless:Qn,withStylesTransform:Jn}){return{...!Jn&&getThemeStyles({theme:e,themeName:n,props:g,stylesCtx:jn,selector:l}),...!Jn&&resolveStyles({theme:e,styles:zn,props:g,stylesCtx:jn})[l],...!Jn&&resolveStyles({theme:e,styles:d?.styles,props:d?.props||g,stylesCtx:jn})[l],...resolveVars({theme:e,props:g,stylesCtx:jn,vars:Kn,varsResolver:Xn,selector:l,themeName:n,headless:Qn}),...Un===l?resolveStyle({style:qn,theme:e}):null,...resolveStyle({style:d?.style,theme:e})}}function useStylesTransform({props:e,stylesCtx:n,themeName:l}){const d=useMantineTheme(),g=useMantineStylesTransform()?.();return{getTransformedStyles:Un=>g?[...Un.map(qn=>g(qn,{props:e,theme:d,ctx:n})),...l.map(qn=>g(d.components[qn]?.styles,{props:e,theme:d,ctx:n}))].filter(Boolean):[],withStylesTransform:!!g}}function useStyles({name:e,classes:n,props:l,stylesCtx:d,className:g,style:jn,rootSelector:Un="root",unstyled:zn,classNames:qn,styles:Kn,vars:Xn,varsResolver:Qn,attributes:Jn}){const Ai=useMantineTheme(),Ri=useMantineClassNamesPrefix(),Ni=useMantineWithStaticClasses(),$i=useMantineIsHeadless(),Li=(Array.isArray(e)?e:[e]).filter(qi=>qi),{withStylesTransform:ji,getTransformedStyles:Fi}=useStylesTransform({props:l,stylesCtx:d,themeName:Li});return(qi,zi)=>({className:getClassName({theme:Ai,options:zi,themeName:Li,selector:qi,classNamesPrefix:Ri,classNames:qn,classes:n,unstyled:zn,className:g,rootSelector:Un,props:l,stylesCtx:d,withStaticClasses:Ni,headless:$i,transformedStyles:Fi([zi?.styles,Kn])}),style:getStyle({theme:Ai,themeName:Li,selector:qi,options:zi,props:l,stylesCtx:d,rootSelector:Un,styles:Kn,style:jn,vars:Xn,varsResolver:Qn,headless:$i,withStylesTransform:ji}),...Jn?.[qi]})}function getAutoContrastValue(e,n){return typeof e=="boolean"?e:n.autoContrast}function useProps(e,n,l){const d=useMantineTheme(),g=d.components[e]?.defaultProps,jn=typeof g=="function"?g(d):g;return{...n,...jn,...filterProps(l)}}function cssObjectToString(e){return keys(e).reduce((n,l)=>e[l]!==void 0?`${n}${camelToKebabCase(l)}:${e[l]};`:n,"").trim()}function stylesToString({selector:e,styles:n,media:l,container:d}){const g=n?cssObjectToString(n):"",jn=Array.isArray(l)?l.map(zn=>`@media${zn.query}{${e}{${cssObjectToString(zn.styles)}}}`):[],Un=Array.isArray(d)?d.map(zn=>`@container ${zn.query}{${e}{${cssObjectToString(zn.styles)}}}`):[];return`${g?`${e}{${g}}`:""}${jn.join("")}${Un.join("")}`.trim()}function InlineStyles(e){const n=useMantineStyleNonce();return jsxRuntimeExports.jsx("style",{"data-mantine-styles":"inline",nonce:n?.(),dangerouslySetInnerHTML:{__html:stylesToString(e)}})}function extractStyleProps(e){const{m:n,mx:l,my:d,mt:g,mb:jn,ml:Un,mr:zn,me:qn,ms:Kn,p:Xn,px:Qn,py:Jn,pt:Ai,pb:Ri,pl:Ni,pr:$i,pe:Li,ps:ji,bd:Fi,bdrs:qi,bg:zi,c:Gi,opacity:Xi,ff:as,fz:ls,fw:Zi,lts:gs,ta:bs,lh:Ss,fs:ss,tt:Es,td:rs,w:cs,miw:ds,maw:Cs,h:Wi,mih:es,mah:fs,bgsz:Ki,bgp:ws,bgr:_s,bga:Is,pos:Ms,top:Os,left:Rs,bottom:Xs,right:_a,inset:fl,display:qs,flex:hl,hiddenFrom:Hl,visibleFrom:Jl,lightHidden:bu,darkHidden:iu,sx:vl,...su}=e;return{styleProps:filterProps({m:n,mx:l,my:d,mt:g,mb:jn,ml:Un,mr:zn,me:qn,ms:Kn,p:Xn,px:Qn,py:Jn,pt:Ai,pb:Ri,pl:Ni,pr:$i,pe:Li,ps:ji,bd:Fi,bg:zi,c:Gi,opacity:Xi,ff:as,fz:ls,fw:Zi,lts:gs,ta:bs,lh:Ss,fs:ss,tt:Es,td:rs,w:cs,miw:ds,maw:Cs,h:Wi,mih:es,mah:fs,bgsz:Ki,bgp:ws,bgr:_s,bga:Is,pos:Ms,top:Os,left:Rs,bottom:Xs,right:_a,inset:fl,display:qs,flex:hl,bdrs:qi,hiddenFrom:Hl,visibleFrom:Jl,lightHidden:bu,darkHidden:iu,sx:vl}),rest:su}}const STYlE_PROPS_DATA={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function colorResolver(e,n){const l=parseThemeColor({color:e,theme:n});return l.color==="dimmed"?"var(--mantine-color-dimmed)":l.color==="bright"?"var(--mantine-color-bright)":l.variable?`var(${l.variable})`:l.color}function textColorResolver(e,n){const l=parseThemeColor({color:e,theme:n});return l.isThemeColor&&l.shade===void 0?`var(--mantine-color-${l.color}-text)`:colorResolver(e,n)}function borderResolver(e,n){if(typeof e=="number")return rem(e);if(typeof e=="string"){const[l,d,...g]=e.split(" ").filter(Un=>Un.trim()!=="");let jn=`${rem(l)}`;return d&&(jn+=` ${d}`),g.length>0&&(jn+=` ${colorResolver(g.join(" "),n)}`),jn.trim()}return e}const values={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function fontFamilyResolver(e){return typeof e=="string"&&e in values?values[e]:e}const headings$1=["h1","h2","h3","h4","h5","h6"];function fontSizeResolver(e,n){return typeof e=="string"&&e in n.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&headings$1.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?rem(e):e}function identityResolver(e){return e}const headings=["h1","h2","h3","h4","h5","h6"];function lineHeightResolver(e,n){return typeof e=="string"&&e in n.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&headings.includes(e)?`var(--mantine-${e}-line-height)`:e}function radiusResolver(e,n){return typeof e=="string"&&e in n.radius?`var(--mantine-radius-${e})`:typeof e=="number"||typeof e=="string"?rem(e):e}function sizeResolver(e){return typeof e=="number"?rem(e):e}function spacingResolver(e,n){if(typeof e=="number")return rem(e);if(typeof e=="string"){const l=e.replace("-","");if(!(l in n.spacing))return rem(e);const d=`--mantine-spacing-${l}`;return e.startsWith("-")?`calc(var(${d}) * -1)`:`var(${d})`}return e}const resolvers={color:colorResolver,textColor:textColorResolver,fontSize:fontSizeResolver,spacing:spacingResolver,radius:radiusResolver,identity:identityResolver,size:sizeResolver,lineHeight:lineHeightResolver,fontFamily:fontFamilyResolver,border:borderResolver};function replaceMediaQuery(e){return e.replace("(min-width: ","").replace("em)","")}function sortMediaQueries({media:e,...n}){const d=Object.keys(e).sort((g,jn)=>Number(replaceMediaQuery(g))-Number(replaceMediaQuery(jn))).map(g=>({query:g,styles:e[g]}));return{...n,media:d}}function hasResponsiveStyles(e){if(typeof e!="object"||e===null)return!1;const n=Object.keys(e);return!(n.length===1&&n[0]==="base")}function getBaseValue(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function getBreakpointKeys(e){return typeof e=="object"&&e!==null?keys(e).filter(n=>n!=="base"):[]}function getBreakpointValue(e,n){return typeof e=="object"&&e!==null&&n in e?e[n]:e}function parseStyleProps({styleProps:e,data:n,theme:l}){return sortMediaQueries(keys(e).reduce((d,g)=>{if(g==="hiddenFrom"||g==="visibleFrom"||g==="sx")return d;const jn=n[g],Un=Array.isArray(jn.property)?jn.property:[jn.property],zn=getBaseValue(e[g]);if(!hasResponsiveStyles(e[g]))return Un.forEach(Kn=>{d.inlineStyles[Kn]=resolvers[jn.type](zn,l)}),d;d.hasResponsiveStyles=!0;const qn=getBreakpointKeys(e[g]);return Un.forEach(Kn=>{zn!=null&&(d.styles[Kn]=resolvers[jn.type](zn,l)),qn.forEach(Xn=>{const Qn=`(min-width: ${l.breakpoints[Xn]})`;d.media[Qn]={...d.media[Qn],[Kn]:resolvers[jn.type](getBreakpointValue(e[g],Xn),l)}})}),d},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function useRandomClassName(){return`__m__-${reactExports.useId().replace(/[:]/g,"")}`}function getStyleObject(e,n){return Array.isArray(e)?[...e].reduce((l,d)=>({...l,...getStyleObject(d,n)}),{}):typeof e=="function"?e(n):e??{}}function createPolymorphicComponent(e){return e}function transformModKey(e){return e.startsWith("data-")?e:`data-${e}`}function getMod(e){return Object.keys(e).reduce((n,l)=>{const d=e[l];return d===void 0||d===""||d===!1||d===null||(n[transformModKey(l)]=e[l]),n},{})}function getBoxMod(e){return e?typeof e=="string"?{[transformModKey(e)]:!0}:Array.isArray(e)?[...e].reduce((n,l)=>({...n,...getBoxMod(l)}),{}):getMod(e):null}function mergeStyles(e,n){return Array.isArray(e)?[...e].reduce((l,d)=>({...l,...mergeStyles(d,n)}),{}):typeof e=="function"?e(n):e??{}}function getBoxStyle({theme:e,style:n,vars:l,styleProps:d}){const g=mergeStyles(n,e),jn=mergeStyles(l,e);return{...g,...jn,...d}}const _Box=reactExports.forwardRef(({component:e,style:n,__vars:l,className:d,variant:g,mod:jn,size:Un,hiddenFrom:zn,visibleFrom:qn,lightHidden:Kn,darkHidden:Xn,renderRoot:Qn,__size:Jn,...Ai},Ri)=>{const Ni=useMantineTheme(),$i=e||"div",{styleProps:Li,rest:ji}=extractStyleProps(Ai),qi=useMantineSxTransform()?.()?.(Li.sx),zi=useRandomClassName(),Gi=parseStyleProps({styleProps:Li,theme:Ni,data:STYlE_PROPS_DATA}),Xi={ref:Ri,style:getBoxStyle({theme:Ni,style:n,vars:l,styleProps:Gi.inlineStyles}),className:clsx(d,qi,{[zi]:Gi.hasResponsiveStyles,"mantine-light-hidden":Kn,"mantine-dark-hidden":Xn,[`mantine-hidden-from-${zn}`]:zn,[`mantine-visible-from-${qn}`]:qn}),"data-variant":g,"data-size":isNumberLike(Un)?void 0:Un||void 0,size:Jn,...getBoxMod(jn),...ji};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Gi.hasResponsiveStyles&&jsxRuntimeExports.jsx(InlineStyles,{selector:`.${zi}`,styles:Gi.styles,media:Gi.media}),typeof Qn=="function"?Qn(Xi):jsxRuntimeExports.jsx($i,{...Xi})]})});_Box.displayName="@mantine/core/Box";const Box=_Box;function identity(e){return e}function getWithProps(e){const n=e;return l=>{const d=reactExports.forwardRef((g,jn)=>jsxRuntimeExports.jsx(n,{...l,...g,ref:jn}));return d.extend=n.extend,d.displayName=`WithProps(${n.displayName})`,d}}function factory(e){const n=reactExports.forwardRef(e);return n.extend=identity,n.withProps=l=>{const d=reactExports.forwardRef((g,jn)=>jsxRuntimeExports.jsx(n,{...l,...g,ref:jn}));return d.extend=n.extend,d.displayName=`WithProps(${n.displayName})`,d},n}function polymorphicFactory(e){const n=reactExports.forwardRef(e);return n.withProps=l=>{const d=reactExports.forwardRef((g,jn)=>jsxRuntimeExports.jsx(n,{...l,...g,ref:jn}));return d.extend=n.extend,d.displayName=`WithProps(${n.displayName})`,d},n.extend=identity,n}const DirectionContext=reactExports.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function useDirection(){return reactExports.useContext(DirectionContext)}var classes$n={root:"m_87cf2631"};const defaultProps$s={__staticSelector:"UnstyledButton"},UnstyledButton=polymorphicFactory((e,n)=>{const l=useProps("UnstyledButton",defaultProps$s,e),{className:d,component:g="button",__staticSelector:jn,unstyled:Un,classNames:zn,styles:qn,style:Kn,attributes:Xn,...Qn}=l,Jn=useStyles({name:jn,props:l,classes:classes$n,className:d,style:Kn,classNames:zn,styles:qn,unstyled:Un,attributes:Xn});return jsxRuntimeExports.jsx(Box,{...Jn("root",{focusable:!0}),component:g,ref:n,type:g==="button"?"button":void 0,...Qn})});UnstyledButton.classes=classes$n;UnstyledButton.displayName="@mantine/core/UnstyledButton";var classes$m={root:"m_515a97f8"};const VisuallyHidden=factory((e,n)=>{const l=useProps("VisuallyHidden",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,attributes:Kn,...Xn}=l,Qn=useStyles({name:"VisuallyHidden",classes:classes$m,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Kn});return jsxRuntimeExports.jsx(Box,{component:"span",ref:n,...Qn("root"),...Xn})});VisuallyHidden.classes=classes$m;VisuallyHidden.displayName="@mantine/core/VisuallyHidden";var classes$l={root:"m_1b7284a3"};const varsResolver$t=(e,{radius:n,shadow:l})=>({root:{"--paper-radius":n===void 0?void 0:getRadius(n),"--paper-shadow":getShadow(l)}}),Paper=polymorphicFactory((e,n)=>{const l=useProps("Paper",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,withBorder:qn,vars:Kn,radius:Xn,shadow:Qn,variant:Jn,mod:Ai,attributes:Ri,...Ni}=l,$i=useStyles({name:"Paper",props:l,classes:classes$l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Ri,vars:Kn,varsResolver:varsResolver$t});return jsxRuntimeExports.jsx(Box,{ref:n,mod:[{"data-with-border":qn},Ai],...$i("root"),variant:Jn,...Ni})});Paper.classes=classes$l;Paper.displayName="@mantine/core/Paper";function horizontalSide(e,n,l,d){return e==="center"||d==="center"?{top:n}:e==="end"?{bottom:l}:e==="start"?{top:l}:{}}function verticalSide(e,n,l,d,g){return e==="center"||d==="center"?{left:n}:e==="end"?{[g==="ltr"?"right":"left"]:l}:e==="start"?{[g==="ltr"?"left":"right"]:l}:{}}const radiusByFloatingSide={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function getArrowPositionStyles({position:e,arrowSize:n,arrowOffset:l,arrowRadius:d,arrowPosition:g,arrowX:jn,arrowY:Un,dir:zn}){const[qn,Kn="center"]=e.split("-"),Xn={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[radiusByFloatingSide[qn]]:d},Qn=-n/2;return qn==="left"?{...Xn,...horizontalSide(Kn,Un,l,g),right:Qn,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:qn==="right"?{...Xn,...horizontalSide(Kn,Un,l,g),left:Qn,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:qn==="top"?{...Xn,...verticalSide(Kn,jn,l,g,zn),bottom:Qn,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:qn==="bottom"?{...Xn,...verticalSide(Kn,jn,l,g,zn),top:Qn,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const FloatingArrow=reactExports.forwardRef(({position:e,arrowSize:n,arrowOffset:l,arrowRadius:d,arrowPosition:g,visible:jn,arrowX:Un,arrowY:zn,style:qn,...Kn},Xn)=>{const{dir:Qn}=useDirection();return jn?jsxRuntimeExports.jsx("div",{...Kn,ref:Xn,style:{...qn,...getArrowPositionStyles({position:e,arrowSize:n,arrowOffset:l,arrowRadius:d,arrowPosition:g,dir:Qn,arrowX:Un,arrowY:zn})}}):null});FloatingArrow.displayName="@mantine/core/FloatingArrow";function getFloatingPosition(e,n){if(e==="rtl"&&(n.includes("right")||n.includes("left"))){const[l,d]=n.split("-"),g=l==="right"?"left":"right";return d===void 0?g:`${g}-${d}`}return n}var classes$k={root:"m_9814e45f"};const defaultProps$r={zIndex:getDefaultZIndex("modal")},varsResolver$s=(e,{gradient:n,color:l,backgroundOpacity:d,blur:g,radius:jn,zIndex:Un})=>({root:{"--overlay-bg":n||(l!==void 0||d!==void 0)&&rgba(l||"#000",d??.6)||void 0,"--overlay-filter":g?`blur(${rem(g)})`:void 0,"--overlay-radius":jn===void 0?void 0:getRadius(jn),"--overlay-z-index":Un?.toString()}}),Overlay=polymorphicFactory((e,n)=>{const l=useProps("Overlay",defaultProps$r,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,fixed:Kn,center:Xn,children:Qn,radius:Jn,zIndex:Ai,gradient:Ri,blur:Ni,color:$i,backgroundOpacity:Li,mod:ji,attributes:Fi,...qi}=l,zi=useStyles({name:"Overlay",props:l,classes:classes$k,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Fi,vars:qn,varsResolver:varsResolver$s});return jsxRuntimeExports.jsx(Box,{ref:n,...zi("root"),mod:[{center:Xn,fixed:Kn},ji],...qi,children:Qn})});Overlay.classes=classes$k;Overlay.displayName="@mantine/core/Overlay";function createPortalNode(e){const n=document.createElement("div");return n.setAttribute("data-portal","true"),typeof e.className=="string"&&n.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(n.style,e.style),typeof e.id=="string"&&n.setAttribute("id",e.id),n}function getTargetNode({target:e,reuseTargetNode:n,...l}){if(e)return typeof e=="string"?document.querySelector(e)||createPortalNode(l):e;if(n){const d=document.querySelector("[data-mantine-shared-portal-node]");if(d)return d;const g=createPortalNode(l);return g.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(g),g}return createPortalNode(l)}const defaultProps$q={reuseTargetNode:!0},Portal=factory((e,n)=>{const{children:l,target:d,reuseTargetNode:g,...jn}=useProps("Portal",defaultProps$q,e),[Un,zn]=reactExports.useState(!1),qn=reactExports.useRef(null);return useIsomorphicEffect(()=>(zn(!0),qn.current=getTargetNode({target:d,reuseTargetNode:g,...jn}),assignRef(n,qn.current),!d&&!g&&qn.current&&document.body.appendChild(qn.current),()=>{!d&&!g&&qn.current&&document.body.removeChild(qn.current)}),[d]),!Un||!qn.current?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l}),qn.current)});Portal.displayName="@mantine/core/Portal";const OptionalPortal=factory(({withinPortal:e=!0,children:n,...l},d)=>useMantineEnv()==="test"||!e?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n}):jsxRuntimeExports.jsx(Portal,{ref:d,...l,children:n}));OptionalPortal.displayName="@mantine/core/OptionalPortal";const popIn=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),transitions={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...popIn("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...popIn("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...popIn("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...popIn("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...popIn("top"),common:{transformOrigin:"top right"}}},transitionStatuses={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function getTransitionStyles({transition:e,state:n,duration:l,timingFunction:d}){const g={WebkitBackfaceVisibility:"hidden",transitionDuration:`${l}ms`,transitionTimingFunction:d};return typeof e=="string"?e in transitions?{transitionProperty:transitions[e].transitionProperty,...g,...transitions[e].common,...transitions[e][transitionStatuses[n]]}:{}:{transitionProperty:e.transitionProperty,...g,...e.common,...e[transitionStatuses[n]]}}function useTransition({duration:e,exitDuration:n,timingFunction:l,mounted:d,onEnter:g,onExit:jn,onEntered:Un,onExited:zn,enterDelay:qn,exitDelay:Kn}){const Xn=useMantineTheme(),Qn=useReducedMotion(),Jn=Xn.respectReducedMotion?Qn:!1,[Ai,Ri]=reactExports.useState(Jn?0:e),[Ni,$i]=reactExports.useState(d?"entered":"exited"),Li=reactExports.useRef(-1),ji=reactExports.useRef(-1),Fi=reactExports.useRef(-1);function qi(){window.clearTimeout(Li.current),window.clearTimeout(ji.current),cancelAnimationFrame(Fi.current)}const zi=Xi=>{qi();const as=Xi?g:jn,ls=Xi?Un:zn,Zi=Jn?0:Xi?e:n;Ri(Zi),Zi===0?(typeof as=="function"&&as(),typeof ls=="function"&&ls(),$i(Xi?"entered":"exited")):Fi.current=requestAnimationFrame(()=>{ReactDOM.flushSync(()=>{$i(Xi?"pre-entering":"pre-exiting")}),Fi.current=requestAnimationFrame(()=>{typeof as=="function"&&as(),$i(Xi?"entering":"exiting"),Li.current=window.setTimeout(()=>{typeof ls=="function"&&ls(),$i(Xi?"entered":"exited")},Zi)})})},Gi=Xi=>{if(qi(),typeof(Xi?qn:Kn)!="number"){zi(Xi);return}ji.current=window.setTimeout(()=>{zi(Xi)},Xi?qn:Kn)};return useDidUpdate(()=>{Gi(d)},[d]),reactExports.useEffect(()=>()=>{qi()},[]),{transitionDuration:Ai,transitionStatus:Ni,transitionTimingFunction:l||"ease"}}function Transition({keepMounted:e,transition:n="fade",duration:l=250,exitDuration:d=l,mounted:g,children:jn,timingFunction:Un="ease",onExit:zn,onEntered:qn,onEnter:Kn,onExited:Xn,enterDelay:Qn,exitDelay:Jn}){const Ai=useMantineEnv(),{transitionDuration:Ri,transitionStatus:Ni,transitionTimingFunction:$i}=useTransition({mounted:g,exitDuration:d,duration:l,timingFunction:Un,onExit:zn,onEntered:qn,onEnter:Kn,onExited:Xn,enterDelay:Qn,exitDelay:Jn});return Ri===0||Ai==="test"?g?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jn({})}):e?jn({display:"none"}):null:Ni==="exited"?e?jn({display:"none"}):null:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jn(getTransitionStyles({transition:n,duration:Ri,state:Ni,timingFunction:$i}))})}Transition.displayName="@mantine/core/Transition";const[PopoverContextProvider,usePopoverContext]=createSafeContext("Popover component was not found in the tree");function FocusTrap({children:e,active:n=!0,refProp:l="ref",innerRef:d}){const g=useFocusTrap(n),jn=useMergedRef(g,d),Un=getSingleElementChild(e);return Un?reactExports.cloneElement(Un,{[l]:jn}):e}function FocusTrapInitialFocus(e){return jsxRuntimeExports.jsx(VisuallyHidden,{tabIndex:-1,"data-autofocus":!0,...e})}FocusTrap.displayName="@mantine/core/FocusTrap";FocusTrapInitialFocus.displayName="@mantine/core/FocusTrapInitialFocus";FocusTrap.InitialFocus=FocusTrapInitialFocus;var classes$j={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const PopoverDropdown=factory((e,n)=>{const l=useProps("PopoverDropdown",null,e),{className:d,style:g,vars:jn,children:Un,onKeyDownCapture:zn,variant:qn,classNames:Kn,styles:Xn,...Qn}=l,Jn=usePopoverContext(),Ai=useFocusReturn({opened:Jn.opened,shouldReturnFocus:Jn.returnFocus}),Ri=Jn.withRoles?{"aria-labelledby":Jn.getTargetId(),id:Jn.getDropdownId(),role:"dialog",tabIndex:-1}:{},Ni=useMergedRef(n,Jn.floating);return Jn.disabled?null:jsxRuntimeExports.jsx(OptionalPortal,{...Jn.portalProps,withinPortal:Jn.withinPortal,children:jsxRuntimeExports.jsx(Transition,{mounted:Jn.opened,...Jn.transitionProps,transition:Jn.transitionProps?.transition||"fade",duration:Jn.transitionProps?.duration??150,keepMounted:Jn.keepMounted,exitDuration:typeof Jn.transitionProps?.exitDuration=="number"?Jn.transitionProps.exitDuration:Jn.transitionProps?.duration,children:$i=>jsxRuntimeExports.jsx(FocusTrap,{active:Jn.trapFocus&&Jn.opened,innerRef:Ni,children:jsxRuntimeExports.jsxs(Box,{...Ri,...Qn,variant:qn,onKeyDownCapture:closeOnEscape(()=>{Jn.onClose?.(),Jn.onDismiss?.()},{active:Jn.closeOnEscape,onTrigger:Ai,onKeyDown:zn}),"data-position":Jn.placement,"data-fixed":Jn.floatingStrategy==="fixed"||void 0,...Jn.getStyles("dropdown",{className:d,props:l,classNames:Kn,styles:Xn,style:[{...$i,zIndex:Jn.zIndex,top:Jn.y??0,left:Jn.x??0,width:Jn.width==="target"?void 0:rem(Jn.width),...Jn.referenceHidden?{display:"none"}:null},Jn.resolvedStyles.dropdown,Xn?.dropdown,g]}),children:[Un,jsxRuntimeExports.jsx(FloatingArrow,{ref:Jn.arrowRef,arrowX:Jn.arrowX,arrowY:Jn.arrowY,visible:Jn.withArrow,position:Jn.placement,arrowSize:Jn.arrowSize,arrowRadius:Jn.arrowRadius,arrowOffset:Jn.arrowOffset,arrowPosition:Jn.arrowPosition,...Jn.getStyles("arrow",{props:l,classNames:Kn,styles:Xn})})]})})})})});PopoverDropdown.classes=classes$j;PopoverDropdown.displayName="@mantine/core/PopoverDropdown";const defaultProps$p={refProp:"ref",popupType:"dialog"},PopoverTarget=factory((e,n)=>{const{children:l,refProp:d,popupType:g,...jn}=useProps("PopoverTarget",defaultProps$p,e),Un=getSingleElementChild(l);if(!Un)throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const zn=jn,qn=usePopoverContext(),Kn=useMergedRef(qn.reference,getRefProp(Un),n),Xn=qn.withRoles?{"aria-haspopup":g,"aria-expanded":qn.opened,"aria-controls":qn.getDropdownId(),id:qn.getTargetId()}:{},Qn=Un.props;return reactExports.cloneElement(Un,{...zn,...Xn,...qn.targetProps,className:clsx(qn.targetProps.className,zn.className,Qn.className),[d]:Kn,...qn.controlled?null:{onClick:()=>{qn.onToggle(),Qn.onClick?.()}}})});PopoverTarget.displayName="@mantine/core/PopoverTarget";function getDefaultMiddlewares$1(e){if(e===void 0)return{shift:!0,flip:!0};const n={...e};return e.shift===void 0&&(n.shift=!0),e.flip===void 0&&(n.flip=!0),n}function getPopoverMiddlewares(e,n,l){const d=getDefaultMiddlewares$1(e.middlewares),g=[offset(e.offset),hide()];return e.dropdownVisible&&l!=="test"&&e.preventPositionChangeWhenVisible&&(d.flip=!1),d.shift&&g.push(shift(typeof d.shift=="boolean"?{limiter:limitShift(),padding:5}:{limiter:limitShift(),padding:5,...d.shift})),d.flip&&g.push(typeof d.flip=="boolean"?flip():flip(d.flip)),d.inline&&g.push(typeof d.inline=="boolean"?inline():inline(d.inline)),g.push(arrow({element:e.arrowRef,padding:e.arrowOffset})),(d.size||e.width==="target")&&g.push(size({...typeof d.size=="boolean"?{}:d.size,apply({rects:jn,availableWidth:Un,availableHeight:zn,...qn}){const Xn=n().refs.floating.current?.style??{};d.size&&(typeof d.size=="object"&&d.size.apply?d.size.apply({rects:jn,availableWidth:Un,availableHeight:zn,...qn}):Object.assign(Xn,{maxWidth:`${Un}px`,maxHeight:`${zn}px`})),e.width==="target"&&Object.assign(Xn,{width:`${jn.reference.width}px`})}})),g}function usePopover(e){const n=useMantineEnv(),[l,d]=useUncontrolled({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),g=reactExports.useRef(l),jn=()=>{l&&!e.disabled&&d(!1)},Un=()=>{e.disabled||d(!l)},zn=useFloating({strategy:e.strategy,placement:e.preventPositionChangeWhenVisible?e.positionRef.current:e.position,middleware:getPopoverMiddlewares(e,()=>zn,n),whileElementsMounted:e.keepMounted?void 0:autoUpdate});return reactExports.useEffect(()=>{if(!(!zn.refs.reference.current||!zn.refs.floating.current)&&l)return autoUpdate(zn.refs.reference.current,zn.refs.floating.current,zn.update)},[l,zn.update]),useDidUpdate(()=>{e.onPositionChange?.(zn.placement),e.positionRef.current=zn.placement},[zn.placement,e.preventPositionChangeWhenVisible]),useDidUpdate(()=>{l!==g.current&&(l?e.onOpen?.():e.onClose?.()),g.current=l},[l,e.onClose,e.onOpen]),useIsomorphicEffect(()=>{let qn=-1;return l&&(qn=window.setTimeout(()=>e.setDropdownVisible(!0),4)),()=>{window.clearTimeout(qn)}},[l,e.position]),{floating:zn,controlled:typeof e.opened=="boolean",opened:l,onClose:jn,onToggle:Un}}const defaultProps$o={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:getDefaultZIndex("popover"),__staticSelector:"Popover",width:"max-content"},varsResolver$r=(e,{radius:n,shadow:l})=>({dropdown:{"--popover-radius":n===void 0?void 0:getRadius(n),"--popover-shadow":getShadow(l)}});function Popover(e){const n=useProps("Popover",defaultProps$o,e),{children:l,position:d,offset:g,onPositionChange:jn,positionDependencies:Un,opened:zn,transitionProps:qn,onExitTransitionEnd:Kn,onEnterTransitionEnd:Xn,width:Qn,middlewares:Jn,withArrow:Ai,arrowSize:Ri,arrowOffset:Ni,arrowRadius:$i,arrowPosition:Li,unstyled:ji,classNames:Fi,styles:qi,closeOnClickOutside:zi,withinPortal:Gi,portalProps:Xi,closeOnEscape:as,clickOutsideEvents:ls,trapFocus:Zi,onClose:gs,onDismiss:bs,onOpen:Ss,onChange:ss,zIndex:Es,radius:rs,shadow:cs,id:ds,defaultOpened:Cs,__staticSelector:Wi,withRoles:es,disabled:fs,returnFocus:Ki,variant:ws,keepMounted:_s,vars:Is,floatingStrategy:Ms,withOverlay:Os,overlayProps:Rs,hideDetached:Xs,attributes:_a,preventPositionChangeWhenVisible:fl,...qs}=n,hl=useStyles({name:Wi,props:n,classes:classes$j,classNames:Fi,styles:qi,unstyled:ji,attributes:_a,rootSelector:"dropdown",vars:Is,varsResolver:varsResolver$r}),{resolvedStyles:Hl}=useResolvedStylesApi({classNames:Fi,styles:qi,props:n}),[Jl,bu]=reactExports.useState(zn??Cs??!1),iu=reactExports.useRef(d),vl=reactExports.useRef(null),[su,Gu]=reactExports.useState(null),[Tp,Sp]=reactExports.useState(null),{dir:Rl}=useDirection(),xp=useMantineEnv(),xs=useId(ds),ks=usePopover({middlewares:Jn,width:Qn,position:getFloatingPosition(Rl,d),offset:typeof g=="number"?g+(Ai?Ri/2:0):g,arrowRef:vl,arrowOffset:Ni,onPositionChange:jn,positionDependencies:Un,opened:zn,defaultOpened:Cs,onChange:ss,onOpen:Ss,onClose:gs,onDismiss:bs,strategy:Ms,dropdownVisible:Jl,setDropdownVisible:bu,positionRef:iu,disabled:fs,preventPositionChangeWhenVisible:fl,keepMounted:_s});useClickOutside(()=>{zi&&(ks.onClose(),bs?.())},ls,[su,Tp]);const Ps=reactExports.useCallback(Dl=>{Gu(Dl),ks.floating.refs.setReference(Dl)},[ks.floating.refs.setReference]),js=reactExports.useCallback(Dl=>{Sp(Dl),ks.floating.refs.setFloating(Dl)},[ks.floating.refs.setFloating]),Ys=reactExports.useCallback(()=>{qn?.onExited?.(),Kn?.(),bu(!1),fl||(iu.current=d)},[qn?.onExited,Kn,fl,d]),Fl=reactExports.useCallback(()=>{qn?.onEntered?.(),Xn?.()},[qn?.onEntered,Xn]);return jsxRuntimeExports.jsxs(PopoverContextProvider,{value:{returnFocus:Ki,disabled:fs,controlled:ks.controlled,reference:Ps,floating:js,x:ks.floating.x,y:ks.floating.y,arrowX:ks.floating?.middlewareData?.arrow?.x,arrowY:ks.floating?.middlewareData?.arrow?.y,opened:ks.opened,arrowRef:vl,transitionProps:{...qn,onExited:Ys,onEntered:Fl},width:Qn,withArrow:Ai,arrowSize:Ri,arrowOffset:Ni,arrowRadius:$i,arrowPosition:Li,placement:ks.floating.placement,trapFocus:Zi,withinPortal:Gi,portalProps:Xi,zIndex:Es,radius:rs,shadow:cs,closeOnEscape:as,onDismiss:bs,onClose:ks.onClose,onToggle:ks.onToggle,getTargetId:()=>`${xs}-target`,getDropdownId:()=>`${xs}-dropdown`,withRoles:es,targetProps:qs,__staticSelector:Wi,classNames:Fi,styles:qi,unstyled:ji,variant:ws,keepMounted:_s,getStyles:hl,resolvedStyles:Hl,floatingStrategy:Ms,referenceHidden:Xs&&xp!=="test"?ks.floating.middlewareData.hide?.referenceHidden:!1},children:[l,Os&&jsxRuntimeExports.jsx(Transition,{transition:"fade",mounted:ks.opened,duration:qn?.duration||250,exitDuration:qn?.exitDuration||250,children:Dl=>jsxRuntimeExports.jsx(OptionalPortal,{withinPortal:Gi,children:jsxRuntimeExports.jsx(Overlay,{...Rs,...hl("overlay",{className:Rs?.className,style:[Dl,Rs?.style]})})})})]})}Popover.Target=PopoverTarget;Popover.Dropdown=PopoverDropdown;Popover.displayName="@mantine/core/Popover";Popover.extend=e=>e;var classes$i={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Bars=reactExports.forwardRef(({className:e,...n},l)=>jsxRuntimeExports.jsxs(Box,{component:"span",className:clsx(classes$i.barsLoader,e),...n,ref:l,children:[jsxRuntimeExports.jsx("span",{className:classes$i.bar}),jsxRuntimeExports.jsx("span",{className:classes$i.bar}),jsxRuntimeExports.jsx("span",{className:classes$i.bar})]}));Bars.displayName="@mantine/core/Bars";const Dots=reactExports.forwardRef(({className:e,...n},l)=>jsxRuntimeExports.jsxs(Box,{component:"span",className:clsx(classes$i.dotsLoader,e),...n,ref:l,children:[jsxRuntimeExports.jsx("span",{className:classes$i.dot}),jsxRuntimeExports.jsx("span",{className:classes$i.dot}),jsxRuntimeExports.jsx("span",{className:classes$i.dot})]}));Dots.displayName="@mantine/core/Dots";const Oval=reactExports.forwardRef(({className:e,...n},l)=>jsxRuntimeExports.jsx(Box,{component:"span",className:clsx(classes$i.ovalLoader,e),...n,ref:l}));Oval.displayName="@mantine/core/Oval";const defaultLoaders={bars:Bars,oval:Oval,dots:Dots},defaultProps$n={loaders:defaultLoaders,type:"oval"},varsResolver$q=(e,{size:n,color:l})=>({root:{"--loader-size":getSize(n,"loader-size"),"--loader-color":l?getThemeColor(l,e):void 0}}),Loader=factory((e,n)=>{const l=useProps("Loader",defaultProps$n,e),{size:d,color:g,type:jn,vars:Un,className:zn,style:qn,classNames:Kn,styles:Xn,unstyled:Qn,loaders:Jn,variant:Ai,children:Ri,attributes:Ni,...$i}=l,Li=useStyles({name:"Loader",props:l,classes:classes$i,className:zn,style:qn,classNames:Kn,styles:Xn,unstyled:Qn,attributes:Ni,vars:Un,varsResolver:varsResolver$q});return Ri?jsxRuntimeExports.jsx(Box,{...Li("root"),ref:n,...$i,children:Ri}):jsxRuntimeExports.jsx(Box,{...Li("root"),ref:n,component:Jn[jn],variant:Ai,size:d,...$i})});Loader.defaultLoaders=defaultLoaders;Loader.classes=classes$i;Loader.displayName="@mantine/core/Loader";var classes$h={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const defaultProps$m={orientation:"horizontal"},varsResolver$p=(e,{borderWidth:n})=>({group:{"--ai-border-width":rem(n)}}),ActionIconGroup=factory((e,n)=>{const l=useProps("ActionIconGroup",defaultProps$m,e),{className:d,style:g,classNames:jn,styles:Un,unstyled:zn,orientation:qn,vars:Kn,borderWidth:Xn,variant:Qn,mod:Jn,attributes:Ai,...Ri}=useProps("ActionIconGroup",defaultProps$m,e),Ni=useStyles({name:"ActionIconGroup",props:l,classes:classes$h,className:d,style:g,classNames:jn,styles:Un,unstyled:zn,attributes:Ai,vars:Kn,varsResolver:varsResolver$p,rootSelector:"group"});return jsxRuntimeExports.jsx(Box,{...Ni("group"),ref:n,variant:Qn,mod:[{"data-orientation":qn},Jn],role:"group",...Ri})});ActionIconGroup.classes=classes$h;ActionIconGroup.displayName="@mantine/core/ActionIconGroup";const varsResolver$o=(e,{radius:n,color:l,gradient:d,variant:g,autoContrast:jn,size:Un})=>{const zn=e.variantColorResolver({color:l||e.primaryColor,theme:e,gradient:d,variant:g||"filled",autoContrast:jn});return{groupSection:{"--section-height":getSize(Un,"section-height"),"--section-padding-x":getSize(Un,"section-padding-x"),"--section-fz":getFontSize(Un),"--section-radius":n===void 0?void 0:getRadius(n),"--section-bg":l||g?zn.background:void 0,"--section-color":zn.color,"--section-bd":l||g?zn.border:void 0}}},ActionIconGroupSection=factory((e,n)=>{const l=useProps("ActionIconGroupSection",null,e),{className:d,style:g,classNames:jn,styles:Un,unstyled:zn,vars:qn,variant:Kn,gradient:Xn,radius:Qn,autoContrast:Jn,attributes:Ai,...Ri}=l,Ni=useStyles({name:"ActionIconGroupSection",props:l,classes:classes$h,className:d,style:g,classNames:jn,styles:Un,unstyled:zn,attributes:Ai,vars:qn,varsResolver:varsResolver$o,rootSelector:"groupSection"});return jsxRuntimeExports.jsx(Box,{...Ni("groupSection"),ref:n,variant:Kn,...Ri})});ActionIconGroupSection.classes=classes$h;ActionIconGroupSection.displayName="@mantine/core/ActionIconGroupSection";const varsResolver$n=(e,{size:n,radius:l,variant:d,gradient:g,color:jn,autoContrast:Un})=>{const zn=e.variantColorResolver({color:jn||e.primaryColor,theme:e,gradient:g,variant:d||"filled",autoContrast:Un});return{root:{"--ai-size":getSize(n,"ai-size"),"--ai-radius":l===void 0?void 0:getRadius(l),"--ai-bg":jn||d?zn.background:void 0,"--ai-hover":jn||d?zn.hover:void 0,"--ai-hover-color":jn||d?zn.hoverColor:void 0,"--ai-color":zn.color,"--ai-bd":jn||d?zn.border:void 0}}},ActionIcon=polymorphicFactory((e,n)=>{const l=useProps("ActionIcon",null,e),{className:d,unstyled:g,variant:jn,classNames:Un,styles:zn,style:qn,loading:Kn,loaderProps:Xn,size:Qn,color:Jn,radius:Ai,__staticSelector:Ri,gradient:Ni,vars:$i,children:Li,disabled:ji,"data-disabled":Fi,autoContrast:qi,mod:zi,attributes:Gi,...Xi}=l,as=useStyles({name:["ActionIcon",Ri],props:l,className:d,style:qn,classes:classes$h,classNames:Un,styles:zn,unstyled:g,attributes:Gi,vars:$i,varsResolver:varsResolver$n});return jsxRuntimeExports.jsxs(UnstyledButton,{...as("root",{active:!ji&&!Kn&&!Fi}),...Xi,unstyled:g,variant:jn,size:Qn,disabled:ji||Kn,ref:n,mod:[{loading:Kn,disabled:ji||Fi},zi],children:[typeof Kn=="boolean"&&jsxRuntimeExports.jsx(Transition,{mounted:Kn,transition:"slide-down",duration:150,children:ls=>jsxRuntimeExports.jsx(Box,{component:"span",...as("loader",{style:ls}),"aria-hidden":!0,children:jsxRuntimeExports.jsx(Loader,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...Xn})})}),jsxRuntimeExports.jsx(Box,{component:"span",mod:{loading:Kn},...as("icon"),children:Li})]})});ActionIcon.classes=classes$h;ActionIcon.displayName="@mantine/core/ActionIcon";ActionIcon.Group=ActionIconGroup;ActionIcon.GroupSection=ActionIconGroupSection;const CloseIcon=reactExports.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:n,...l},d)=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...n,width:e,height:e},ref:d,...l,children:jsxRuntimeExports.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));CloseIcon.displayName="@mantine/core/CloseIcon";var classes$g={root:"m_86a44da5","root--subtle":"m_220c80f2"};const defaultProps$l={variant:"subtle"},varsResolver$m=(e,{size:n,radius:l,iconSize:d})=>({root:{"--cb-size":getSize(n,"cb-size"),"--cb-radius":l===void 0?void 0:getRadius(l),"--cb-icon-size":rem(d)}}),CloseButton=polymorphicFactory((e,n)=>{const l=useProps("CloseButton",defaultProps$l,e),{iconSize:d,children:g,vars:jn,radius:Un,className:zn,classNames:qn,style:Kn,styles:Xn,unstyled:Qn,"data-disabled":Jn,disabled:Ai,variant:Ri,icon:Ni,mod:$i,attributes:Li,__staticSelector:ji,...Fi}=l,qi=useStyles({name:ji||"CloseButton",props:l,className:zn,style:Kn,classes:classes$g,classNames:qn,styles:Xn,unstyled:Qn,attributes:Li,vars:jn,varsResolver:varsResolver$m});return jsxRuntimeExports.jsxs(UnstyledButton,{ref:n,...Fi,unstyled:Qn,variant:Ri,disabled:Ai,mod:[{disabled:Ai||Jn},$i],...qi("root",{variant:Ri,active:!Ai&&!Jn}),children:[Ni||jsxRuntimeExports.jsx(CloseIcon,{}),g]})});CloseButton.classes=classes$g;CloseButton.displayName="@mantine/core/CloseButton";function filterFalsyChildren(e){return reactExports.Children.toArray(e).filter(Boolean)}var classes$f={root:"m_4081bf90"};const defaultProps$k={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},varsResolver$l=(e,{grow:n,preventGrowOverflow:l,gap:d,align:g,justify:jn,wrap:Un},{childWidth:zn})=>({root:{"--group-child-width":n&&l?zn:void 0,"--group-gap":getSpacing(d),"--group-align":g,"--group-justify":jn,"--group-wrap":Un}}),Group=factory((e,n)=>{const l=useProps("Group",defaultProps$k,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,children:qn,gap:Kn,align:Xn,justify:Qn,wrap:Jn,grow:Ai,preventGrowOverflow:Ri,vars:Ni,variant:$i,__size:Li,mod:ji,attributes:Fi,...qi}=l,zi=filterFalsyChildren(qn),Gi=zi.length,Xi=getSpacing(Kn??"md"),ls={childWidth:`calc(${100/Gi}% - (${Xi} - ${Xi} / ${Gi}))`},Zi=useStyles({name:"Group",props:l,stylesCtx:ls,className:g,style:jn,classes:classes$f,classNames:d,styles:Un,unstyled:zn,attributes:Fi,vars:Ni,varsResolver:varsResolver$l});return jsxRuntimeExports.jsx(Box,{...Zi("root"),ref:n,variant:$i,mod:[{grow:Ai},ji],size:Li,...qi,children:zi})});Group.classes=classes$f;Group.displayName="@mantine/core/Group";const[InputContext,useInputContext]=createOptionalContext({size:"sm"}),InputClearButton=factory((e,n)=>{const l=useProps("InputClearButton",null,e),{size:d,variant:g,vars:jn,classNames:Un,styles:zn,...qn}=l,Kn=useInputContext(),{resolvedClassNames:Xn,resolvedStyles:Qn}=useResolvedStylesApi({classNames:Un,styles:zn,props:l});return jsxRuntimeExports.jsx(CloseButton,{variant:g||"transparent",ref:n,size:d||Kn?.size||"sm",classNames:Xn,styles:Qn,__staticSelector:"InputClearButton",style:{pointerEvents:"all",background:"var(--input-bg)",...qn.style},...qn})});InputClearButton.displayName="@mantine/core/InputClearButton";const clearSectionOffset={xs:7,sm:8,md:10,lg:12,xl:15};function InputClearSection({__clearable:e,__clearSection:n,rightSection:l,__defaultRightSection:d,size:g="sm"}){const jn=e&&n;return jn&&(l||d)?jsxRuntimeExports.jsxs("div",{"data-combined-clear-section":!0,style:{display:"flex",gap:2,alignItems:"center",paddingInlineEnd:clearSectionOffset[g]},children:[jn,l||d]}):l===null?null:l||jn||d}const[InputWrapperProvider,useInputWrapperContext]=createOptionalContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var classes$e={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const varsResolver$k=(e,{size:n})=>({description:{"--input-description-size":n===void 0?void 0:`calc(${getFontSize(n)} - ${rem(2)})`}}),InputDescription=factory((e,n)=>{const l=useProps("InputDescription",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,size:Kn,__staticSelector:Xn,__inheritStyles:Qn=!0,attributes:Jn,variant:Ai,...Ri}=useProps("InputDescription",null,l),Ni=useInputWrapperContext(),$i=useStyles({name:["InputWrapper",Xn],props:l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Jn,rootSelector:"description",vars:qn,varsResolver:varsResolver$k}),Li=Qn&&Ni?.getStyles||$i;return jsxRuntimeExports.jsx(Box,{component:"p",ref:n,variant:Ai,size:Kn,...Li("description",Ni?.getStyles?{className:g,style:jn}:void 0),...Ri})});InputDescription.classes=classes$e;InputDescription.displayName="@mantine/core/InputDescription";const varsResolver$j=(e,{size:n})=>({error:{"--input-error-size":n===void 0?void 0:`calc(${getFontSize(n)} - ${rem(2)})`}}),InputError=factory((e,n)=>{const l=useProps("InputError",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,size:Kn,attributes:Xn,__staticSelector:Qn,__inheritStyles:Jn=!0,variant:Ai,...Ri}=l,Ni=useStyles({name:["InputWrapper",Qn],props:l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Xn,rootSelector:"error",vars:qn,varsResolver:varsResolver$j}),$i=useInputWrapperContext(),Li=Jn&&$i?.getStyles||Ni;return jsxRuntimeExports.jsx(Box,{component:"p",ref:n,variant:Ai,size:Kn,...Li("error",$i?.getStyles?{className:g,style:jn}:void 0),...Ri})});InputError.classes=classes$e;InputError.displayName="@mantine/core/InputError";const defaultProps$j={labelElement:"label"},varsResolver$i=(e,{size:n})=>({label:{"--input-label-size":getFontSize(n),"--input-asterisk-color":void 0}}),InputLabel=factory((e,n)=>{const l=useProps("InputLabel",defaultProps$j,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,labelElement:Kn,size:Xn,required:Qn,htmlFor:Jn,onMouseDown:Ai,children:Ri,__staticSelector:Ni,variant:$i,mod:Li,attributes:ji,...Fi}=useProps("InputLabel",defaultProps$j,l),qi=useStyles({name:["InputWrapper",Ni],props:l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:ji,rootSelector:"label",vars:qn,varsResolver:varsResolver$i}),zi=useInputWrapperContext(),Gi=zi?.getStyles||qi;return jsxRuntimeExports.jsxs(Box,{...Gi("label",zi?.getStyles?{className:g,style:jn}:void 0),component:Kn,variant:$i,size:Xn,ref:n,htmlFor:Kn==="label"?Jn:void 0,mod:[{required:Qn},Li],onMouseDown:Xi=>{Ai?.(Xi),!Xi.defaultPrevented&&Xi.detail>1&&Xi.preventDefault()},...Fi,children:[Ri,Qn&&jsxRuntimeExports.jsx("span",{...Gi("required"),"aria-hidden":!0,children:" *"})]})});InputLabel.classes=classes$e;InputLabel.displayName="@mantine/core/InputLabel";const InputPlaceholder=factory((e,n)=>{const l=useProps("InputPlaceholder",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,__staticSelector:Kn,variant:Xn,error:Qn,mod:Jn,attributes:Ai,...Ri}=l,Ni=useStyles({name:["InputPlaceholder",Kn],props:l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Ai,rootSelector:"placeholder"});return jsxRuntimeExports.jsx(Box,{...Ni("placeholder"),mod:[{error:!!Qn},Jn],component:"span",variant:Xn,ref:n,...Ri})});InputPlaceholder.classes=classes$e;InputPlaceholder.displayName="@mantine/core/InputPlaceholder";function getInputOffsets(e,{hasDescription:n,hasError:l}){const d=e.findIndex(qn=>qn==="input"),g=e.slice(0,d),jn=e.slice(d+1),Un=n&&g.includes("description")||l&&g.includes("error");return{offsetBottom:n&&jn.includes("description")||l&&jn.includes("error"),offsetTop:Un}}const defaultProps$i={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},varsResolver$h=(e,{size:n})=>({label:{"--input-label-size":getFontSize(n),"--input-asterisk-color":void 0},error:{"--input-error-size":n===void 0?void 0:`calc(${getFontSize(n)} - ${rem(2)})`},description:{"--input-description-size":n===void 0?void 0:`calc(${getFontSize(n)} - ${rem(2)})`}}),InputWrapper=factory((e,n)=>{const l=useProps("InputWrapper",defaultProps$i,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,size:Kn,variant:Xn,__staticSelector:Qn,inputContainer:Jn,inputWrapperOrder:Ai,label:Ri,error:Ni,description:$i,labelProps:Li,descriptionProps:ji,errorProps:Fi,labelElement:qi,children:zi,withAsterisk:Gi,id:Xi,required:as,__stylesApiProps:ls,mod:Zi,attributes:gs,...bs}=l,Ss=useStyles({name:["InputWrapper",Qn],props:ls||l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:gs,vars:qn,varsResolver:varsResolver$h}),ss={size:Kn,variant:Xn,__staticSelector:Qn},Es=useId(Xi),rs=typeof Gi=="boolean"?Gi:as,cs=Fi?.id||`${Es}-error`,ds=ji?.id||`${Es}-description`,Cs=Es,Wi=!!Ni&&typeof Ni!="boolean",es=!!$i,fs=`${Wi?cs:""} ${es?ds:""}`,Ki=fs.trim().length>0?fs.trim():void 0,ws=Li?.id||`${Es}-label`,_s=Ri&&jsxRuntimeExports.jsx(InputLabel,{labelElement:qi,id:ws,htmlFor:Cs,required:rs,...ss,...Li,children:Ri},"label"),Is=es&&jsxRuntimeExports.jsx(InputDescription,{...ji,...ss,size:ji?.size||ss.size,id:ji?.id||ds,children:$i},"description"),Ms=jsxRuntimeExports.jsx(reactExports.Fragment,{children:Jn(zi)},"input"),Os=Wi&&reactExports.createElement(InputError,{...Fi,...ss,size:Fi?.size||ss.size,key:"error",id:Fi?.id||cs},Ni),Rs=Ai.map(Xs=>{switch(Xs){case"label":return _s;case"input":return Ms;case"description":return Is;case"error":return Os;default:return null}});return jsxRuntimeExports.jsx(InputWrapperProvider,{value:{getStyles:Ss,describedBy:Ki,inputId:Cs,labelId:ws,...getInputOffsets(Ai,{hasDescription:es,hasError:Wi})},children:jsxRuntimeExports.jsx(Box,{ref:n,variant:Xn,size:Kn,mod:[{error:!!Ni},Zi],...Ss("root"),...bs,children:Rs})})});InputWrapper.classes=classes$e;InputWrapper.displayName="@mantine/core/InputWrapper";const defaultProps$h={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},varsResolver$g=(e,n,l)=>({wrapper:{"--input-margin-top":l.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":l.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":getSize(n.size,"input-height"),"--input-fz":getFontSize(n.size),"--input-radius":n.radius===void 0?void 0:getRadius(n.radius),"--input-left-section-width":n.leftSectionWidth!==void 0?rem(n.leftSectionWidth):void 0,"--input-right-section-width":n.rightSectionWidth!==void 0?rem(n.rightSectionWidth):void 0,"--input-padding-y":n.multiline?getSize(n.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":n.leftSectionPointerEvents,"--input-right-section-pointer-events":n.rightSectionPointerEvents}}),Input=polymorphicFactory((e,n)=>{const l=useProps("Input",defaultProps$h,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,required:qn,__staticSelector:Kn,__stylesApiProps:Xn,size:Qn,wrapperProps:Jn,error:Ai,disabled:Ri,leftSection:Ni,leftSectionProps:$i,leftSectionWidth:Li,rightSection:ji,rightSectionProps:Fi,rightSectionWidth:qi,rightSectionPointerEvents:zi,leftSectionPointerEvents:Gi,variant:Xi,vars:as,pointer:ls,multiline:Zi,radius:gs,id:bs,withAria:Ss,withErrorStyles:ss,mod:Es,inputSize:rs,attributes:cs,__clearSection:ds,__clearable:Cs,__defaultRightSection:Wi,...es}=l,{styleProps:fs,rest:Ki}=extractStyleProps(es),ws=useInputWrapperContext(),_s={offsetBottom:ws?.offsetBottom,offsetTop:ws?.offsetTop},Is=useStyles({name:["Input",Kn],props:Xn||l,classes:classes$e,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:cs,stylesCtx:_s,rootSelector:"wrapper",vars:as,varsResolver:varsResolver$g}),Ms=Ss?{required:qn,disabled:Ri,"aria-invalid":!!Ai,"aria-describedby":ws?.describedBy,id:ws?.inputId||bs}:{},Os=InputClearSection({__clearable:Cs,__clearSection:ds,rightSection:ji,__defaultRightSection:Wi,size:Qn});return jsxRuntimeExports.jsx(InputContext,{value:{size:Qn||"sm"},children:jsxRuntimeExports.jsxs(Box,{...Is("wrapper"),...fs,...Jn,mod:[{error:!!Ai&&ss,pointer:ls,disabled:Ri,multiline:Zi,"data-with-right-section":!!Os,"data-with-left-section":!!Ni},Es],variant:Xi,size:Qn,children:[Ni&&jsxRuntimeExports.jsx("div",{...$i,"data-position":"left",...Is("section",{className:$i?.className,style:$i?.style}),children:Ni}),jsxRuntimeExports.jsx(Box,{component:"input",...Ki,...Ms,ref:n,required:qn,mod:{disabled:Ri,error:!!Ai&&ss},variant:Xi,__size:rs,...Is("input")}),Os&&jsxRuntimeExports.jsx("div",{...Fi,"data-position":"right",...Is("section",{className:Fi?.className,style:Fi?.style}),children:Os})]})})});Input.classes=classes$e;Input.Wrapper=InputWrapper;Input.Label=InputLabel;Input.Error=InputError;Input.Description=InputDescription;Input.Placeholder=InputPlaceholder;Input.ClearButton=InputClearButton;Input.displayName="@mantine/core/Input";function useInputProps(e,n,l){const d=useProps(e,n,l),{label:g,description:jn,error:Un,required:zn,classNames:qn,styles:Kn,className:Xn,unstyled:Qn,__staticSelector:Jn,__stylesApiProps:Ai,errorProps:Ri,labelProps:Ni,descriptionProps:$i,wrapperProps:Li,id:ji,size:Fi,style:qi,inputContainer:zi,inputWrapperOrder:Gi,withAsterisk:Xi,variant:as,vars:ls,mod:Zi,attributes:gs,...bs}=d,{styleProps:Ss,rest:ss}=extractStyleProps(bs),Es={label:g,description:jn,error:Un,required:zn,classNames:qn,className:Xn,__staticSelector:Jn,__stylesApiProps:Ai||d,errorProps:Ri,labelProps:Ni,descriptionProps:$i,unstyled:Qn,styles:Kn,size:Fi,style:qi,inputContainer:zi,inputWrapperOrder:Gi,withAsterisk:Xi,variant:as,id:ji,mod:Zi,attributes:gs,...Li};return{...ss,classNames:qn,styles:Kn,unstyled:Qn,wrapperProps:{...Es,...Ss},inputProps:{required:zn,classNames:qn,styles:Kn,unstyled:Qn,size:Fi,__staticSelector:Jn,__stylesApiProps:Ai||d,error:Un,variant:as,id:ji,attributes:gs}}}const defaultProps$g={__staticSelector:"InputBase",withAria:!0,size:"sm"},InputBase=polymorphicFactory((e,n)=>{const{inputProps:l,wrapperProps:d,...g}=useInputProps("InputBase",defaultProps$g,e);return jsxRuntimeExports.jsx(Input.Wrapper,{...d,children:jsxRuntimeExports.jsx(Input,{...l,...g,ref:n})})});InputBase.classes={...Input.classes,...Input.Wrapper.classes};InputBase.displayName="@mantine/core/InputBase";const FLEX_STYLE_PROPS_DATA={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var classes$d={root:"m_8bffd616"};const Flex=polymorphicFactory((e,n)=>{const l=useProps("Flex",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,gap:Kn,rowGap:Xn,columnGap:Qn,align:Jn,justify:Ai,wrap:Ri,direction:Ni,attributes:$i,...Li}=l,ji=useStyles({name:"Flex",classes:classes$d,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:$i,vars:qn}),Fi=useMantineTheme(),qi=useRandomClassName(),zi=parseStyleProps({styleProps:{gap:Kn,rowGap:Xn,columnGap:Qn,align:Jn,justify:Ai,wrap:Ri,direction:Ni},theme:Fi,data:FLEX_STYLE_PROPS_DATA});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[zi.hasResponsiveStyles&&jsxRuntimeExports.jsx(InlineStyles,{selector:`.${qi}`,styles:zi.styles,media:zi.media}),jsxRuntimeExports.jsx(Box,{ref:n,...ji("root",{className:qi,style:filterProps(zi.inlineStyles)}),...Li})]})});Flex.classes=classes$d;Flex.displayName="@mantine/core/Flex";function useDelayedHover({open:e,close:n,openDelay:l,closeDelay:d}){const g=reactExports.useRef(-1),jn=reactExports.useRef(-1),Un=()=>{window.clearTimeout(g.current),window.clearTimeout(jn.current)},zn=()=>{Un(),l===0||l===void 0?e():g.current=window.setTimeout(e,l)},qn=()=>{Un(),d===0||d===void 0?n():jn.current=window.setTimeout(n,d)};return reactExports.useEffect(()=>Un,[]),{openDropdown:zn,closeDropdown:qn}}function AccordionChevron({style:e,size:n=16,...l}){return jsxRuntimeExports.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:rem(n),height:rem(n),display:"block"},...l,children:jsxRuntimeExports.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}AccordionChevron.displayName="@mantine/core/AccordionChevron";var classes$c={root:"m_b6d8b162"};function getTextTruncate(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const defaultProps$f={inherit:!1},varsResolver$f=(e,{variant:n,lineClamp:l,gradient:d,size:g,color:jn})=>({root:{"--text-fz":getFontSize(g),"--text-lh":getLineHeight(g),"--text-gradient":n==="gradient"?getGradient(d,e):void 0,"--text-line-clamp":typeof l=="number"?l.toString():void 0,"--text-color":jn?getThemeColor(jn,e):void 0}}),Text=polymorphicFactory((e,n)=>{const l=useProps("Text",defaultProps$f,e),{lineClamp:d,truncate:g,inline:jn,inherit:Un,gradient:zn,span:qn,__staticSelector:Kn,vars:Xn,className:Qn,style:Jn,classNames:Ai,styles:Ri,unstyled:Ni,variant:$i,mod:Li,size:ji,attributes:Fi,...qi}=l,zi=useStyles({name:["Text",Kn],props:l,classes:classes$c,className:Qn,style:Jn,classNames:Ai,styles:Ri,unstyled:Ni,attributes:Fi,vars:Xn,varsResolver:varsResolver$f});return jsxRuntimeExports.jsx(Box,{...zi("root",{focusable:!0}),ref:n,component:qn?"span":"p",variant:$i,mod:[{"data-truncate":getTextTruncate(g),"data-line-clamp":typeof d=="number","data-inline":jn,"data-inherit":Un},Li],size:ji,...qi})});Text.classes=classes$c;Text.displayName="@mantine/core/Text";function CheckIcon({size:e,style:n,...l}){const d=e!==void 0?{width:rem(e),height:rem(e),...n}:n;return jsxRuntimeExports.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:d,"aria-hidden":!0,...l,children:jsxRuntimeExports.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const AvatarGroupContext=reactExports.createContext(null),AvatarGroupProvider=AvatarGroupContext.Provider;function useAvatarGroupContext(){return{withinGroup:!!reactExports.useContext(AvatarGroupContext)}}var classes$b={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const varsResolver$e=(e,{spacing:n})=>({group:{"--ag-spacing":getSpacing(n)}}),AvatarGroup=factory((e,n)=>{const l=useProps("AvatarGroup",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,spacing:Kn,attributes:Xn,...Qn}=l,Jn=useStyles({name:"AvatarGroup",classes:classes$b,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Xn,vars:qn,varsResolver:varsResolver$e,rootSelector:"group"});return jsxRuntimeExports.jsx(AvatarGroupProvider,{value:!0,children:jsxRuntimeExports.jsx(Box,{ref:n,...Jn("group"),...Qn})})});AvatarGroup.classes=classes$b;AvatarGroup.displayName="@mantine/core/AvatarGroup";function AvatarPlaceholderIcon(e){return jsxRuntimeExports.jsx("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function hashCode(e){let n=0;for(let l=0;l<e.length;l+=1){const d=e.charCodeAt(l);n=(n<<5)-n+d,n|=0}return n}const defaultColors=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function getInitialsColor(e,n=defaultColors){const l=hashCode(e),d=Math.abs(l)%n.length;return n[d]}function getInitials(e,n=2){const l=e.split(" ");return l.length===1?e.slice(0,n).toUpperCase():l.map(d=>d[0]).slice(0,n).join("").toUpperCase()}const varsResolver$d=(e,{size:n,radius:l,variant:d,gradient:g,color:jn,autoContrast:Un,name:zn,allowedInitialsColors:qn})=>{const Kn=jn==="initials"&&typeof zn=="string"?getInitialsColor(zn,qn):jn,Xn=e.variantColorResolver({color:Kn||"gray",theme:e,gradient:g,variant:d||"light",autoContrast:Un});return{root:{"--avatar-size":getSize(n,"avatar-size"),"--avatar-radius":l===void 0?void 0:getRadius(l),"--avatar-bg":Kn||d?Xn.background:void 0,"--avatar-color":Kn||d?Xn.color:void 0,"--avatar-bd":Kn||d?Xn.border:void 0}}},Avatar=polymorphicFactory((e,n)=>{const l=useProps("Avatar",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,src:Kn,alt:Xn,radius:Qn,color:Jn,gradient:Ai,imageProps:Ri,children:Ni,autoContrast:$i,mod:Li,name:ji,allowedInitialsColors:Fi,attributes:qi,...zi}=l,Gi=useAvatarGroupContext(),[Xi,as]=reactExports.useState(!Kn),ls=useStyles({name:"Avatar",props:l,classes:classes$b,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:qi,vars:qn,varsResolver:varsResolver$d});return reactExports.useEffect(()=>as(!Kn),[Kn]),jsxRuntimeExports.jsx(Box,{...ls("root"),mod:[{"within-group":Gi.withinGroup},Li],ref:n,...zi,children:Xi||!Kn?jsxRuntimeExports.jsx("span",{...ls("placeholder"),title:Xn,children:Ni||typeof ji=="string"&&getInitials(ji)||jsxRuntimeExports.jsx(AvatarPlaceholderIcon,{})}):jsxRuntimeExports.jsx("img",{...Ri,...ls("image"),src:Kn,alt:Xn,onError:Zi=>{as(!0),Ri?.onError?.(Zi)}})})});Avatar.classes=classes$b;Avatar.displayName="@mantine/core/Avatar";Avatar.Group=AvatarGroup;var classes$a={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const varsResolver$c=(e,{radius:n,color:l,gradient:d,variant:g,size:jn,autoContrast:Un,circle:zn})=>{const qn=e.variantColorResolver({color:l||e.primaryColor,theme:e,gradient:d,variant:g||"filled",autoContrast:Un});return{root:{"--badge-height":getSize(jn,"badge-height"),"--badge-padding-x":getSize(jn,"badge-padding-x"),"--badge-fz":getSize(jn,"badge-fz"),"--badge-radius":zn||n===void 0?void 0:getRadius(n),"--badge-bg":l||g?qn.background:void 0,"--badge-color":l||g?qn.color:void 0,"--badge-bd":l||g?qn.border:void 0,"--badge-dot-color":g==="dot"?getThemeColor(l,e):void 0}}},Badge=polymorphicFactory((e,n)=>{const l=useProps("Badge",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,radius:Kn,color:Xn,gradient:Qn,leftSection:Jn,rightSection:Ai,children:Ri,variant:Ni,fullWidth:$i,autoContrast:Li,circle:ji,mod:Fi,attributes:qi,...zi}=l,Gi=useStyles({name:"Badge",props:l,classes:classes$a,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:qi,vars:qn,varsResolver:varsResolver$c});return jsxRuntimeExports.jsxs(Box,{variant:Ni,mod:[{block:$i,circle:ji,"with-right-section":!!Ai,"with-left-section":!!Jn},Fi],...Gi("root",{variant:Ni}),ref:n,...zi,children:[Jn&&jsxRuntimeExports.jsx("span",{...Gi("section"),"data-position":"left",children:Jn}),jsxRuntimeExports.jsx("span",{...Gi("label"),children:Ri}),Ai&&jsxRuntimeExports.jsx("span",{...Gi("section"),"data-position":"right",children:Ai})]})});Badge.classes=classes$a;Badge.displayName="@mantine/core/Badge";var classes$9={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const defaultProps$e={orientation:"horizontal"},varsResolver$b=(e,{borderWidth:n})=>({group:{"--button-border-width":rem(n)}}),ButtonGroup=factory((e,n)=>{const l=useProps("ButtonGroup",defaultProps$e,e),{className:d,style:g,classNames:jn,styles:Un,unstyled:zn,orientation:qn,vars:Kn,borderWidth:Xn,variant:Qn,mod:Jn,attributes:Ai,...Ri}=useProps("ButtonGroup",defaultProps$e,e),Ni=useStyles({name:"ButtonGroup",props:l,classes:classes$9,className:d,style:g,classNames:jn,styles:Un,unstyled:zn,attributes:Ai,vars:Kn,varsResolver:varsResolver$b,rootSelector:"group"});return jsxRuntimeExports.jsx(Box,{...Ni("group"),ref:n,variant:Qn,mod:[{"data-orientation":qn},Jn],role:"group",...Ri})});ButtonGroup.classes=classes$9;ButtonGroup.displayName="@mantine/core/ButtonGroup";const varsResolver$a=(e,{radius:n,color:l,gradient:d,variant:g,autoContrast:jn,size:Un})=>{const zn=e.variantColorResolver({color:l||e.primaryColor,theme:e,gradient:d,variant:g||"filled",autoContrast:jn});return{groupSection:{"--section-height":getSize(Un,"section-height"),"--section-padding-x":getSize(Un,"section-padding-x"),"--section-fz":Un?.includes("compact")?getFontSize(Un.replace("compact-","")):getFontSize(Un),"--section-radius":n===void 0?void 0:getRadius(n),"--section-bg":l||g?zn.background:void 0,"--section-color":zn.color,"--section-bd":l||g?zn.border:void 0}}},ButtonGroupSection=factory((e,n)=>{const l=useProps("ButtonGroupSection",null,e),{className:d,style:g,classNames:jn,styles:Un,unstyled:zn,vars:qn,variant:Kn,gradient:Xn,radius:Qn,autoContrast:Jn,attributes:Ai,...Ri}=l,Ni=useStyles({name:"ButtonGroupSection",props:l,classes:classes$9,className:d,style:g,classNames:jn,styles:Un,unstyled:zn,attributes:Ai,vars:qn,varsResolver:varsResolver$a,rootSelector:"groupSection"});return jsxRuntimeExports.jsx(Box,{...Ni("groupSection"),ref:n,variant:Kn,...Ri})});ButtonGroupSection.classes=classes$9;ButtonGroupSection.displayName="@mantine/core/ButtonGroupSection";const loaderTransition={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${rem(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},varsResolver$9=(e,{radius:n,color:l,gradient:d,variant:g,size:jn,justify:Un,autoContrast:zn})=>{const qn=e.variantColorResolver({color:l||e.primaryColor,theme:e,gradient:d,variant:g||"filled",autoContrast:zn});return{root:{"--button-justify":Un,"--button-height":getSize(jn,"button-height"),"--button-padding-x":getSize(jn,"button-padding-x"),"--button-fz":jn?.includes("compact")?getFontSize(jn.replace("compact-","")):getFontSize(jn),"--button-radius":n===void 0?void 0:getRadius(n),"--button-bg":l||g?qn.background:void 0,"--button-hover":l||g?qn.hover:void 0,"--button-color":qn.color,"--button-bd":l||g?qn.border:void 0,"--button-hover-color":l||g?qn.hoverColor:void 0}}},Button=polymorphicFactory((e,n)=>{const l=useProps("Button",null,e),{style:d,vars:g,className:jn,color:Un,disabled:zn,children:qn,leftSection:Kn,rightSection:Xn,fullWidth:Qn,variant:Jn,radius:Ai,loading:Ri,loaderProps:Ni,gradient:$i,classNames:Li,styles:ji,unstyled:Fi,"data-disabled":qi,autoContrast:zi,mod:Gi,attributes:Xi,...as}=l,ls=useStyles({name:"Button",props:l,classes:classes$9,className:jn,style:d,classNames:Li,styles:ji,unstyled:Fi,attributes:Xi,vars:g,varsResolver:varsResolver$9}),Zi=!!Kn,gs=!!Xn;return jsxRuntimeExports.jsxs(UnstyledButton,{ref:n,...ls("root",{active:!zn&&!Ri&&!qi}),unstyled:Fi,variant:Jn,disabled:zn||Ri,mod:[{disabled:zn||qi,loading:Ri,block:Qn,"with-left-section":Zi,"with-right-section":gs},Gi],...as,children:[typeof Ri=="boolean"&&jsxRuntimeExports.jsx(Transition,{mounted:Ri,transition:loaderTransition,duration:150,children:bs=>jsxRuntimeExports.jsx(Box,{component:"span",...ls("loader",{style:bs}),"aria-hidden":!0,children:jsxRuntimeExports.jsx(Loader,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...Ni})})}),jsxRuntimeExports.jsxs("span",{...ls("inner"),children:[Kn&&jsxRuntimeExports.jsx(Box,{component:"span",...ls("section"),mod:{position:"left"},children:Kn}),jsxRuntimeExports.jsx(Box,{component:"span",mod:{loading:Ri},...ls("label"),children:qn}),Xn&&jsxRuntimeExports.jsx(Box,{component:"span",...ls("section"),mod:{position:"right"},children:Xn})]})]})});Button.classes=classes$9;Button.displayName="@mantine/core/Button";Button.Group=ButtonGroup;Button.GroupSection=ButtonGroupSection;const[CardProvider,useCardContext]=createSafeContext("Card component was not found in tree");var classes$8={root:"m_e615b15f",section:"m_599a2148"};const CardSection=polymorphicFactory((e,n)=>{const l=useProps("CardSection",null,e),{classNames:d,className:g,style:jn,styles:Un,vars:zn,withBorder:qn,inheritPadding:Kn,mod:Xn,...Qn}=l,Jn=useCardContext();return jsxRuntimeExports.jsx(Box,{ref:n,mod:[{"with-border":qn,"inherit-padding":Kn},Xn],...Jn.getStyles("section",{className:g,style:jn,styles:Un,classNames:d}),...Qn})});CardSection.classes=classes$8;CardSection.displayName="@mantine/core/CardSection";const varsResolver$8=(e,{padding:n})=>({root:{"--card-padding":getSpacing(n)}}),Card=polymorphicFactory((e,n)=>{const l=useProps("Card",null,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,children:Kn,padding:Xn,attributes:Qn,...Jn}=l,Ai=useStyles({name:"Card",props:l,classes:classes$8,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Qn,vars:qn,varsResolver:varsResolver$8}),Ri=reactExports.Children.toArray(Kn),Ni=Ri.map(($i,Li)=>typeof $i=="object"&&$i&&"type"in $i&&$i.type===CardSection?reactExports.cloneElement($i,{"data-first-section":Li===0||void 0,"data-last-section":Li===Ri.length-1||void 0}):$i);return jsxRuntimeExports.jsx(CardProvider,{value:{getStyles:Ai},children:jsxRuntimeExports.jsx(Paper,{ref:n,unstyled:zn,...Ai("root"),...Jn,children:Ni})})});Card.classes=classes$8;Card.displayName="@mantine/core/Card";Card.Section=CardSection;const[ChipGroupProvider,useChipGroupContext]=createOptionalContext();function ChipGroup(e){const{value:n,defaultValue:l,onChange:d,multiple:g,children:jn}=useProps("ChipGroup",null,e),[Un,zn]=useUncontrolled({value:n,defaultValue:l,finalValue:g?[]:null,onChange:d}),qn=Xn=>Array.isArray(Un)?Un.includes(Xn):Xn===Un,Kn=Xn=>{const Qn=Xn.currentTarget.value;Array.isArray(Un)?zn(Un.includes(Qn)?Un.filter(Jn=>Jn!==Qn):[...Un,Qn]):zn(Qn)};return jsxRuntimeExports.jsx(ChipGroupProvider,{value:{isChipSelected:qn,onChange:Kn,multiple:g},children:jn})}ChipGroup.displayName="@mantine/core/ChipGroup";var classes$7={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const defaultProps$d={type:"checkbox"},varsResolver$7=(e,{size:n,radius:l,variant:d,color:g,autoContrast:jn})=>{const Un=e.variantColorResolver({color:g||e.primaryColor,theme:e,variant:d||"filled",autoContrast:jn});return{root:{"--chip-fz":getFontSize(n),"--chip-size":getSize(n,"chip-size"),"--chip-radius":l===void 0?void 0:getRadius(l),"--chip-checked-padding":getSize(n,"chip-checked-padding"),"--chip-padding":getSize(n,"chip-padding"),"--chip-icon-size":getSize(n,"chip-icon-size"),"--chip-bg":g||d?Un.background:void 0,"--chip-hover":g||d?Un.hover:void 0,"--chip-color":g||d?Un.color:void 0,"--chip-bd":g||d?Un.border:void 0,"--chip-spacing":getSize(n,"chip-spacing")}}},Chip=factory((e,n)=>{const l=useProps("Chip",defaultProps$d,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,id:Kn,checked:Xn,defaultChecked:Qn,onChange:Jn,value:Ai,wrapperProps:Ri,type:Ni,disabled:$i,children:Li,size:ji,variant:Fi,icon:qi,rootRef:zi,autoContrast:Gi,mod:Xi,attributes:as,...ls}=l,Zi=useStyles({name:"Chip",classes:classes$7,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:as,vars:qn,varsResolver:varsResolver$7}),gs=useChipGroupContext(),bs=useId(Kn),{styleProps:Ss,rest:ss}=extractStyleProps(ls),[Es,rs]=useUncontrolled({value:Xn,defaultValue:Qn,finalValue:!1,onChange:Jn}),cs=gs?{checked:gs.isChipSelected(Ai),onChange:Cs=>{gs.onChange(Cs),Jn?.(Cs.currentTarget.checked)},type:gs.multiple?"checkbox":"radio"}:{},ds=cs.checked||Es;return jsxRuntimeExports.jsxs(Box,{size:ji,variant:Fi,ref:zi,mod:Xi,...Zi("root"),...Ss,...Ri,children:[jsxRuntimeExports.jsx("input",{type:Ni,...Zi("input"),checked:ds,onChange:Cs=>rs(Cs.currentTarget.checked),id:bs,disabled:$i,ref:n,value:Ai,...cs,...ss}),jsxRuntimeExports.jsxs("label",{htmlFor:bs,"data-checked":ds||void 0,"data-disabled":$i||void 0,...Zi("label",{variant:Fi||"filled"}),children:[ds&&qi!==null&&qi!==!1&&jsxRuntimeExports.jsx("span",{...Zi("iconWrapper"),children:qi===void 0?jsxRuntimeExports.jsx(CheckIcon,{...Zi("checkIcon")}):qi}),jsxRuntimeExports.jsx("span",{children:Li})]})]})});Chip.classes=classes$7;Chip.displayName="@mantine/core/Chip";Chip.Group=ChipGroup;var classes$6={root:"m_3eebeb36",label:"m_9e365f20"};const defaultProps$c={orientation:"horizontal"},varsResolver$6=(e,{color:n,variant:l,size:d})=>({root:{"--divider-color":n?getThemeColor(n,e):void 0,"--divider-border-style":l,"--divider-size":getSize(d,"divider-size")}}),Divider=factory((e,n)=>{const l=useProps("Divider",defaultProps$c,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,color:Kn,orientation:Xn,label:Qn,labelPosition:Jn,mod:Ai,attributes:Ri,...Ni}=l,$i=useStyles({name:"Divider",classes:classes$6,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Ri,vars:qn,varsResolver:varsResolver$6});return jsxRuntimeExports.jsx(Box,{ref:n,mod:[{orientation:Xn,"with-label":!!Qn},Ai],...$i("root"),...Ni,role:"separator",children:Qn&&jsxRuntimeExports.jsx(Box,{component:"span",mod:{position:Jn},...$i("label"),children:Qn})})});Divider.classes=classes$6;Divider.displayName="@mantine/core/Divider";const defaultProps$b={multiple:!1},FileButton=reactExports.forwardRef((e,n)=>{const{onChange:l,children:d,multiple:g,accept:jn,name:Un,form:zn,resetRef:qn,disabled:Kn,capture:Xn,inputProps:Qn,...Jn}=useProps("FileButton",defaultProps$b,e),Ai=reactExports.useRef(null),Ri=()=>{!Kn&&Ai.current?.click()},Ni=Li=>{if(Li.currentTarget.files===null)return l(g?[]:null);l(g?Array.from(Li.currentTarget.files):Li.currentTarget.files[0]||null)};return assignRef(qn,()=>{Ai.current&&(Ai.current.value="")}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{style:{display:"none"},type:"file",accept:jn,multiple:g,onChange:Ni,ref:useMergedRef(n,Ai),name:Un,form:zn,capture:Xn,...Qn}),d({onClick:Ri,...Jn})]})});FileButton.displayName="@mantine/core/FileButton";const DefaultValue=({value:e})=>jsxRuntimeExports.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(n=>n.name).join(", "):e?.name}),defaultProps$a={valueComponent:DefaultValue},_FileInput=factory((e,n)=>{const l=useProps("FileInput",defaultProps$a,e),{unstyled:d,vars:g,onChange:jn,value:Un,defaultValue:zn,multiple:qn,accept:Kn,name:Xn,form:Qn,valueComponent:Jn,clearable:Ai,clearButtonProps:Ri,readOnly:Ni,capture:$i,fileInputProps:Li,rightSection:ji,size:Fi,placeholder:qi,component:zi,resetRef:Gi,classNames:Xi,styles:as,attributes:ls,...Zi}=l,gs=reactExports.useRef(null),{resolvedClassNames:bs,resolvedStyles:Ss}=useResolvedStylesApi({classNames:Xi,styles:as,props:l}),[ss,Es]=useUncontrolled({value:Un,defaultValue:zn,onChange:jn,finalValue:qn?[]:null}),rs=Array.isArray(ss)?ss.length!==0:ss!==null,cs=ji||(Ai&&rs&&!Ni?jsxRuntimeExports.jsx(CloseButton,{...Ri,variant:"subtle",onClick:()=>Es(qn?[]:null),size:Fi,unstyled:d}):null);return reactExports.useEffect(()=>{(Array.isArray(ss)&&ss.length===0||ss===null)&&gs.current?.()},[ss]),jsxRuntimeExports.jsx(FileButton,{onChange:Es,multiple:qn,accept:Kn,name:Xn,form:Qn,resetRef:useMergedRef(gs,Gi),disabled:Ni,capture:$i,inputProps:Li,children:ds=>jsxRuntimeExports.jsx(InputBase,{component:zi||"button",ref:n,rightSection:cs,...ds,...Zi,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:l,unstyled:d,size:Fi,classNames:Xi,styles:as,attributes:ls,children:rs?jsxRuntimeExports.jsx(Jn,{value:ss}):jsxRuntimeExports.jsx(Input.Placeholder,{__staticSelector:"FileInput",classNames:bs,styles:Ss,attributes:ls,children:qi})})})});_FileInput.classes=InputBase.classes;_FileInput.displayName="@mantine/core/FileInput";const FileInput=_FileInput;var classes$5={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const defaultProps$9={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:getDefaultZIndex("overlay")},varsResolver$5=(e,{zIndex:n})=>({root:{"--lo-z-index":n?.toString()}}),LoadingOverlay=factory((e,n)=>{const l=useProps("LoadingOverlay",defaultProps$9,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,transitionProps:Kn,loaderProps:Xn,overlayProps:Qn,visible:Jn,zIndex:Ai,attributes:Ri,...Ni}=l,$i=useMantineTheme(),Li=useStyles({name:"LoadingOverlay",classes:classes$5,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Ri,vars:qn,varsResolver:varsResolver$5}),ji={...defaultProps$9.overlayProps,...Qn};return jsxRuntimeExports.jsx(Transition,{transition:"fade",...Kn,mounted:!!Jn,children:Fi=>jsxRuntimeExports.jsxs(Box,{...Li("root",{style:Fi}),ref:n,...Ni,children:[jsxRuntimeExports.jsx(Loader,{...Li("loader"),unstyled:zn,...Xn}),jsxRuntimeExports.jsx(Overlay,{...ji,...Li("overlay"),darkHidden:!0,unstyled:zn,color:Qn?.color||$i.white}),jsxRuntimeExports.jsx(Overlay,{...ji,...Li("overlay"),lightHidden:!0,unstyled:zn,color:Qn?.color||$i.colors.dark[5]})]})})});LoadingOverlay.classes=classes$5;LoadingOverlay.displayName="@mantine/core/LoadingOverlay";const[MenuContextProvider,useMenuContext]=createSafeContext("Menu component was not found in the tree");var classes$4={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504",chevron:"m_b85b0bed"};const MenuDivider=factory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,...zn}=useProps("MenuDivider",null,e),qn=useMenuContext();return jsxRuntimeExports.jsx(Box,{ref:n,...qn.getStyles("divider",{className:d,style:g,styles:jn,classNames:l}),...zn})});MenuDivider.classes=classes$4;MenuDivider.displayName="@mantine/core/MenuDivider";const MenuDropdown=factory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,onMouseEnter:zn,onMouseLeave:qn,onKeyDown:Kn,children:Xn,...Qn}=useProps("MenuDropdown",null,e),Jn=reactExports.useRef(null),Ai=useMenuContext(),Ri=createEventHandler(Kn,Li=>{(Li.key==="ArrowUp"||Li.key==="ArrowDown")&&(Li.preventDefault(),Jn.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),Ni=createEventHandler(zn,()=>(Ai.trigger==="hover"||Ai.trigger==="click-hover")&&Ai.openDropdown()),$i=createEventHandler(qn,()=>(Ai.trigger==="hover"||Ai.trigger==="click-hover")&&Ai.closeDropdown());return jsxRuntimeExports.jsxs(Popover.Dropdown,{...Qn,onMouseEnter:Ni,onMouseLeave:$i,role:"menu","aria-orientation":"vertical",ref:useMergedRef(n,Jn),...Ai.getStyles("dropdown",{className:d,style:g,styles:jn,classNames:l,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:Ri,children:[Ai.withInitialFocusPlaceholder&&jsxRuntimeExports.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),Xn]})});MenuDropdown.classes=classes$4;MenuDropdown.displayName="@mantine/core/MenuDropdown";const[SubMenuProvider,useSubMenuContext]=createOptionalContext(),MenuItem=polymorphicFactory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,color:zn,closeMenuOnClick:qn,leftSection:Kn,rightSection:Xn,children:Qn,disabled:Jn,"data-disabled":Ai,...Ri}=useProps("MenuItem",null,e),Ni=useMenuContext(),$i=useSubMenuContext(),Li=useMantineTheme(),{dir:ji}=useDirection(),Fi=reactExports.useRef(null),qi=Ri,zi=createEventHandler(qi.onClick,()=>{Ai||(typeof qn=="boolean"?qn&&Ni.closeDropdownImmediately():Ni.closeOnItemClick&&Ni.closeDropdownImmediately())}),Gi=zn?Li.variantColorResolver({color:zn,theme:Li,variant:"light"}):void 0,Xi=zn?parseThemeColor({color:zn,theme:Li}):null,as=createEventHandler(qi.onKeyDown,ls=>{ls.key==="ArrowLeft"&&$i&&($i.close(),$i.focusParentItem())});return jsxRuntimeExports.jsxs(UnstyledButton,{onMouseDown:ls=>ls.preventDefault(),...Ri,unstyled:Ni.unstyled,tabIndex:Ni.menuItemTabIndex,...Ni.getStyles("item",{className:d,style:g,styles:jn,classNames:l}),ref:useMergedRef(Fi,n),role:"menuitem",disabled:Jn,"data-menu-item":!0,"data-disabled":Jn||Ai||void 0,"data-mantine-stop-propagation":!0,onClick:zi,onKeyDown:createScopedKeydownHandler({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:Ni.loop,dir:ji,orientation:"vertical",onKeyDown:as}),__vars:{"--menu-item-color":Xi?.isThemeColor&&Xi?.shade===void 0?`var(--mantine-color-${Xi.color}-6)`:Gi?.color,"--menu-item-hover":Gi?.hover},children:[Kn&&jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemSection",{styles:jn,classNames:l}),"data-position":"left",children:Kn}),Qn&&jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemLabel",{styles:jn,classNames:l}),children:Qn}),Xn&&jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemSection",{styles:jn,classNames:l}),"data-position":"right",children:Xn})]})});MenuItem.classes=classes$4;MenuItem.displayName="@mantine/core/MenuItem";const MenuLabel=factory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,...zn}=useProps("MenuLabel",null,e),qn=useMenuContext();return jsxRuntimeExports.jsx(Box,{ref:n,...qn.getStyles("label",{className:d,style:g,styles:jn,classNames:l}),...zn})});MenuLabel.classes=classes$4;MenuLabel.displayName="@mantine/core/MenuLabel";const MenuSubDropdown=factory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,onMouseEnter:zn,onMouseLeave:qn,onKeyDown:Kn,children:Xn,...Qn}=useProps("MenuSubDropdown",null,e),Jn=reactExports.useRef(null),Ai=useMenuContext(),Ri=useSubMenuContext(),Ni=createEventHandler(zn,Ri?.open),$i=createEventHandler(qn,Ri?.close);return jsxRuntimeExports.jsx(Popover.Dropdown,{...Qn,onMouseEnter:Ni,onMouseLeave:$i,role:"menu","aria-orientation":"vertical",ref:useMergedRef(n,Jn),...Ai.getStyles("dropdown",{className:d,style:g,styles:jn,classNames:l,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,children:Xn})});MenuSubDropdown.classes=classes$4;MenuSubDropdown.displayName="@mantine/core/MenuSubDropdown";const MenuSubItem=polymorphicFactory((e,n)=>{const{classNames:l,className:d,style:g,styles:jn,vars:Un,color:zn,leftSection:qn,rightSection:Kn,children:Xn,disabled:Qn,"data-disabled":Jn,closeMenuOnClick:Ai,...Ri}=useProps("MenuSubItem",null,e),Ni=useMenuContext(),$i=useSubMenuContext(),Li=useMantineTheme(),{dir:ji}=useDirection(),Fi=reactExports.useRef(null),qi=Ri,zi=zn?Li.variantColorResolver({color:zn,theme:Li,variant:"light"}):void 0,Gi=zn?parseThemeColor({color:zn,theme:Li}):null,Xi=createEventHandler(qi.onKeyDown,gs=>{gs.key==="ArrowRight"&&($i?.open(),$i?.focusFirstItem()),gs.key==="ArrowLeft"&&$i?.parentContext&&($i.parentContext.close(),$i.parentContext.focusParentItem())}),as=createEventHandler(qi.onClick,()=>{!Jn&&Ai&&Ni.closeDropdownImmediately()}),ls=createEventHandler(qi.onMouseEnter,$i?.open),Zi=createEventHandler(qi.onMouseLeave,$i?.close);return jsxRuntimeExports.jsxs(UnstyledButton,{onMouseDown:gs=>gs.preventDefault(),...Ri,unstyled:Ni.unstyled,tabIndex:Ni.menuItemTabIndex,...Ni.getStyles("item",{className:d,style:g,styles:jn,classNames:l}),ref:useMergedRef(Fi,n),role:"menuitem",disabled:Qn,"data-menu-item":!0,"data-sub-menu-item":!0,"data-disabled":Qn||Jn||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:ls,onMouseLeave:Zi,onClick:as,onKeyDown:createScopedKeydownHandler({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:Ni.loop,dir:ji,orientation:"vertical",onKeyDown:Xi}),__vars:{"--menu-item-color":Gi?.isThemeColor&&Gi?.shade===void 0?`var(--mantine-color-${Gi.color}-6)`:zi?.color,"--menu-item-hover":zi?.hover},children:[qn&&jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemSection",{styles:jn,classNames:l}),"data-position":"left",children:qn}),Xn&&jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemLabel",{styles:jn,classNames:l}),children:Xn}),jsxRuntimeExports.jsx("div",{...Ni.getStyles("itemSection",{styles:jn,classNames:l}),"data-position":"right",children:Kn||jsxRuntimeExports.jsx(AccordionChevron,{...Ni.getStyles("chevron"),size:14})})]})});MenuSubItem.classes=classes$4;MenuSubItem.displayName="@mantine/core/MenuSubItem";function MenuSubTarget({children:e,refProp:n}){if(!isElement(e))throw new Error("Menu.Sub.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return useMenuContext(),jsxRuntimeExports.jsx(Popover.Target,{refProp:n,popupType:"menu",children:e})}MenuSubTarget.displayName="@mantine/core/MenuSubTarget";const defaultProps$8={offset:0,position:"right-start",transitionProps:{duration:0},openDelay:0,middlewares:{shift:{crossAxis:!0}}};function MenuSub(e){const{children:n,closeDelay:l,openDelay:d,...g}=useProps("MenuSub",defaultProps$8,e),jn=useId(),[Un,{open:zn,close:qn}]=useDisclosure(!1),Kn=useSubMenuContext(),{openDropdown:Xn,closeDropdown:Qn}=useDelayedHover({open:zn,close:qn,closeDelay:l,openDelay:d}),Jn=()=>window.setTimeout(()=>{document.getElementById(`${jn}-dropdown`)?.querySelectorAll("[data-menu-item]:not([data-disabled])")[0]?.focus()},16),Ai=()=>window.setTimeout(()=>{document.getElementById(`${jn}-target`)?.focus()},16);return jsxRuntimeExports.jsx(SubMenuProvider,{value:{opened:Un,close:Qn,open:Xn,focusFirstItem:Jn,focusParentItem:Ai,parentContext:Kn},children:jsxRuntimeExports.jsx(Popover,{opened:Un,withinPortal:!1,withArrow:!1,id:jn,...g,children:n})})}MenuSub.extend=e=>e;MenuSub.displayName="@mantine/core/MenuSub";MenuSub.Target=MenuSubTarget;MenuSub.Dropdown=MenuSubDropdown;MenuSub.Item=MenuSubItem;const defaultProps$7={refProp:"ref"},MenuTarget=reactExports.forwardRef((e,n)=>{const{children:l,refProp:d,...g}=useProps("MenuTarget",defaultProps$7,e),jn=getSingleElementChild(l);if(!jn)throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const Un=useMenuContext(),zn=jn.props,qn=createEventHandler(zn.onClick,()=>{Un.trigger==="click"?Un.toggleDropdown():Un.trigger==="click-hover"&&(Un.setOpenedViaClick(!0),Un.opened||Un.openDropdown())}),Kn=createEventHandler(zn.onMouseEnter,()=>(Un.trigger==="hover"||Un.trigger==="click-hover")&&Un.openDropdown()),Xn=createEventHandler(zn.onMouseLeave,()=>{(Un.trigger==="hover"||Un.trigger==="click-hover"&&!Un.openedViaClick)&&Un.closeDropdown()});return jsxRuntimeExports.jsx(Popover.Target,{refProp:d,popupType:"menu",ref:n,...g,children:reactExports.cloneElement(jn,{onClick:qn,onMouseEnter:Kn,onMouseLeave:Xn,"data-expanded":Un.opened?!0:void 0})})});MenuTarget.displayName="@mantine/core/MenuTarget";const defaultProps$6={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Menu(e){const n=useProps("Menu",defaultProps$6,e),{children:l,onOpen:d,onClose:g,opened:jn,defaultOpened:Un,trapFocus:zn,onChange:qn,closeOnItemClick:Kn,loop:Xn,closeOnEscape:Qn,trigger:Jn,openDelay:Ai,closeDelay:Ri,classNames:Ni,styles:$i,unstyled:Li,variant:ji,vars:Fi,menuItemTabIndex:qi,keepMounted:zi,withInitialFocusPlaceholder:Gi,attributes:Xi,...as}=n,ls=useStyles({name:"Menu",classes:classes$4,props:n,classNames:Ni,styles:$i,unstyled:Li,attributes:Xi}),[Zi,gs]=useUncontrolled({value:jn,defaultValue:Un,finalValue:!1,onChange:qn}),[bs,Ss]=reactExports.useState(!1),ss=()=>{gs(!1),Ss(!1),Zi&&g?.()},Es=()=>{gs(!0),!Zi&&d?.()},rs=()=>{Zi?ss():Es()},{openDropdown:cs,closeDropdown:ds}=useDelayedHover({open:Es,close:ss,closeDelay:Ri,openDelay:Ai}),Cs=fs=>getContextItemIndex("[data-menu-item]","[data-menu-dropdown]",fs),{resolvedClassNames:Wi,resolvedStyles:es}=useResolvedStylesApi({classNames:Ni,styles:$i,props:n});return jsxRuntimeExports.jsx(MenuContextProvider,{value:{getStyles:ls,opened:Zi,toggleDropdown:rs,getItemIndex:Cs,openedViaClick:bs,setOpenedViaClick:Ss,closeOnItemClick:Kn,closeDropdown:Jn==="click"?ss:ds,openDropdown:Jn==="click"?Es:cs,closeDropdownImmediately:ss,loop:Xn,trigger:Jn,unstyled:Li,menuItemTabIndex:qi,withInitialFocusPlaceholder:Gi},children:jsxRuntimeExports.jsx(Popover,{returnFocus:!0,...as,opened:Zi,onChange:rs,defaultOpened:Un,trapFocus:zi?!1:zn,closeOnEscape:Qn,__staticSelector:"Menu",classNames:Wi,styles:es,unstyled:Li,variant:ji,keepMounted:zi,children:l})})}Menu.extend=e=>e;Menu.withProps=getWithProps(Menu);Menu.classes=classes$4;Menu.displayName="@mantine/core/Menu";Menu.Item=MenuItem;Menu.Label=MenuLabel;Menu.Dropdown=MenuDropdown;Menu.Target=MenuTarget;Menu.Divider=MenuDivider;Menu.Sub=MenuSub;const defaultTransition={duration:100,transition:"fade"};function getTransitionProps(e,n){return{...defaultTransition,...n,...e}}function useFloatingTooltip({offset:e,position:n,defaultOpened:l}){const[d,g]=reactExports.useState(l),jn=reactExports.useRef(null),{x:Un,y:zn,elements:qn,refs:Kn,update:Xn,placement:Qn}=useFloating({placement:n,middleware:[shift({crossAxis:!0,padding:5,rootBoundary:"document"})]}),Jn=Qn.includes("right")?e:n.includes("left")?e*-1:0,Ai=Qn.includes("bottom")?e:n.includes("top")?e*-1:0,Ri=reactExports.useCallback(({clientX:Ni,clientY:$i})=>{Kn.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:Ni,y:$i,left:Ni+Jn,top:$i+Ai,right:Ni,bottom:$i}}})},[qn.reference]);return reactExports.useEffect(()=>{if(Kn.floating.current){const Ni=jn.current;Ni.addEventListener("mousemove",Ri);const $i=getOverflowAncestors(Kn.floating.current);return $i.forEach(Li=>{Li.addEventListener("scroll",Xn)}),()=>{Ni.removeEventListener("mousemove",Ri),$i.forEach(Li=>{Li.removeEventListener("scroll",Xn)})}}},[qn.reference,Kn.floating.current,Xn,Ri,d]),{handleMouseMove:Ri,x:Un,y:zn,opened:d,setOpened:g,boundaryRef:jn,floating:Kn.setFloating}}var classes$3={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const defaultProps$5={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:getDefaultZIndex("popover")},varsResolver$4=(e,{radius:n,color:l})=>({tooltip:{"--tooltip-radius":n===void 0?void 0:getRadius(n),"--tooltip-bg":l?getThemeColor(l,e):void 0,"--tooltip-color":l?"var(--mantine-color-white)":void 0}}),TooltipFloating=factory((e,n)=>{const l=useProps("TooltipFloating",defaultProps$5,e),{children:d,refProp:g,withinPortal:jn,style:Un,className:zn,classNames:qn,styles:Kn,unstyled:Xn,radius:Qn,color:Jn,label:Ai,offset:Ri,position:Ni,multiline:$i,zIndex:Li,disabled:ji,defaultOpened:Fi,variant:qi,vars:zi,portalProps:Gi,attributes:Xi,...as}=l,ls=useMantineTheme(),Zi=useStyles({name:"TooltipFloating",props:l,classes:classes$3,className:zn,style:Un,classNames:qn,styles:Kn,unstyled:Xn,attributes:Xi,rootSelector:"tooltip",vars:zi,varsResolver:varsResolver$4}),{handleMouseMove:gs,x:bs,y:Ss,opened:ss,boundaryRef:Es,floating:rs,setOpened:cs}=useFloatingTooltip({offset:Ri,position:Ni,defaultOpened:Fi}),ds=getSingleElementChild(d);if(!ds)throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Cs=useMergedRef(Es,getRefProp(ds),n),Wi=ds.props,es=Ki=>{Wi.onMouseEnter?.(Ki),gs(Ki),cs(!0)},fs=Ki=>{Wi.onMouseLeave?.(Ki),cs(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(OptionalPortal,{...Gi,withinPortal:jn,children:jsxRuntimeExports.jsx(Box,{...as,...Zi("tooltip",{style:{...getStyleObject(Un,ls),zIndex:Li,display:!ji&&ss?"block":"none",top:(Ss&&Math.round(Ss))??"",left:(bs&&Math.round(bs))??""}}),variant:qi,ref:rs,mod:{multiline:$i},children:Ai})}),reactExports.cloneElement(ds,{...Wi,[g]:Cs,onMouseEnter:es,onMouseLeave:fs})]})});TooltipFloating.classes=classes$3;TooltipFloating.displayName="@mantine/core/TooltipFloating";const TooltipGroupContext=reactExports.createContext(!1),TooltipGroupProvider=TooltipGroupContext.Provider,useTooltipGroupContext=()=>reactExports.useContext(TooltipGroupContext),defaultProps$4={openDelay:0,closeDelay:0};function TooltipGroup(e){const{openDelay:n,closeDelay:l,children:d}=useProps("TooltipGroup",defaultProps$4,e);return jsxRuntimeExports.jsx(TooltipGroupProvider,{value:!0,children:jsxRuntimeExports.jsx(FloatingDelayGroup,{delay:{open:n,close:l},children:d})})}TooltipGroup.displayName="@mantine/core/TooltipGroup";TooltipGroup.extend=e=>e;function getDefaultMiddlewares(e){if(e===void 0)return{shift:!0,flip:!0};const n={...e};return e.shift===void 0&&(n.shift=!0),e.flip===void 0&&(n.flip=!0),n}function getTooltipMiddlewares(e){const n=getDefaultMiddlewares(e.middlewares),l=[offset(e.offset)];return n.shift&&l.push(shift(typeof n.shift=="boolean"?{padding:8}:{padding:8,...n.shift})),n.flip&&l.push(typeof n.flip=="boolean"?flip():flip(n.flip)),l.push(arrow({element:e.arrowRef,padding:e.arrowOffset})),n.inline?l.push(typeof n.inline=="boolean"?inline():inline(n.inline)):e.inline&&l.push(inline()),l}function useTooltip(e){const[n,l]=reactExports.useState(e.defaultOpened),g=typeof e.opened=="boolean"?e.opened:n,jn=useTooltipGroupContext(),Un=useId(),zn=reactExports.useCallback(zi=>{l(zi),zi&&Li(Un)},[Un]),{x:qn,y:Kn,context:Xn,refs:Qn,placement:Jn,middlewareData:{arrow:{x:Ai,y:Ri}={}}}=useFloating({strategy:e.strategy,placement:e.position,open:g,onOpenChange:zn,middleware:getTooltipMiddlewares(e),whileElementsMounted:autoUpdate}),{delay:Ni,currentId:$i,setCurrentId:Li}=useDelayGroup(Xn,{id:Un}),{getReferenceProps:ji,getFloatingProps:Fi}=useInteractions([useHover$1(Xn,{enabled:e.events?.hover,delay:jn?Ni:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),useFocus(Xn,{enabled:e.events?.focus,visibleOnly:!0}),useRole(Xn,{role:"tooltip"}),useDismiss(Xn,{enabled:typeof e.opened>"u"})]);useDidUpdate(()=>{e.onPositionChange?.(Jn)},[Jn]);const qi=g&&$i&&$i!==Un;return{x:qn,y:Kn,arrowX:Ai,arrowY:Ri,reference:Qn.setReference,floating:Qn.setFloating,getFloatingProps:Fi,getReferenceProps:ji,isGroupPhase:qi,opened:g,placement:Jn}}const defaultProps$3={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:getDefaultZIndex("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},varsResolver$3=(e,{radius:n,color:l,variant:d,autoContrast:g})=>{const jn=e.variantColorResolver({theme:e,color:l||e.primaryColor,autoContrast:g,variant:d||"filled"});return{tooltip:{"--tooltip-radius":n===void 0?void 0:getRadius(n),"--tooltip-bg":l?jn.background:void 0,"--tooltip-color":l?jn.color:void 0}}},Tooltip=factory((e,n)=>{const l=useProps("Tooltip",defaultProps$3,e),{children:d,position:g,refProp:jn,label:Un,openDelay:zn,closeDelay:qn,onPositionChange:Kn,opened:Xn,defaultOpened:Qn,withinPortal:Jn,radius:Ai,color:Ri,classNames:Ni,styles:$i,unstyled:Li,style:ji,className:Fi,withArrow:qi,arrowSize:zi,arrowOffset:Gi,arrowRadius:Xi,arrowPosition:as,offset:ls,transitionProps:Zi,multiline:gs,events:bs,zIndex:Ss,disabled:ss,positionDependencies:Es,onClick:rs,onMouseEnter:cs,onMouseLeave:ds,inline:Cs,variant:Wi,keepMounted:es,vars:fs,portalProps:Ki,mod:ws,floatingStrategy:_s,middlewares:Is,autoContrast:Ms,attributes:Os,target:Rs,...Xs}=useProps("Tooltip",defaultProps$3,l),{dir:_a}=useDirection(),fl=reactExports.useRef(null),qs=useTooltip({position:getFloatingPosition(_a,g),closeDelay:qn,openDelay:zn,onPositionChange:Kn,opened:Xn,defaultOpened:Qn,events:bs,arrowRef:fl,arrowOffset:Gi,offset:typeof ls=="number"?ls+(qi?zi/2:0):ls,positionDependencies:[...Es,Rs??d],inline:Cs,strategy:_s,middlewares:Is});reactExports.useEffect(()=>{const vl=Rs instanceof HTMLElement?Rs:typeof Rs=="string"?document.querySelector(Rs):Rs?.current||null;vl&&qs.reference(vl)},[Rs,qs]);const hl=useStyles({name:"Tooltip",props:l,classes:classes$3,className:Fi,style:ji,classNames:Ni,styles:$i,unstyled:Li,attributes:Os,rootSelector:"tooltip",vars:fs,varsResolver:varsResolver$3}),Hl=getSingleElementChild(d);if(!Rs&&!Hl)return null;if(Rs){const vl=getTransitionProps(Zi,{duration:100,transition:"fade"});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(OptionalPortal,{...Ki,withinPortal:Jn,children:jsxRuntimeExports.jsx(Transition,{...vl,keepMounted:es,mounted:!ss&&!!qs.opened,duration:qs.isGroupPhase?10:vl.duration,children:su=>jsxRuntimeExports.jsxs(Box,{...Xs,"data-fixed":_s==="fixed"||void 0,variant:Wi,mod:[{multiline:gs},ws],...qs.getFloatingProps({ref:qs.floating,className:hl("tooltip").className,style:{...hl("tooltip").style,...su,zIndex:Ss,top:qs.y??0,left:qs.x??0}}),children:[Un,jsxRuntimeExports.jsx(FloatingArrow,{ref:fl,arrowX:qs.arrowX,arrowY:qs.arrowY,visible:qi,position:qs.placement,arrowSize:zi,arrowOffset:Gi,arrowRadius:Xi,arrowPosition:as,...hl("arrow")})]})})})})}const Jl=Hl.props,bu=useMergedRef(qs.reference,getRefProp(Hl),n),iu=getTransitionProps(Zi,{duration:100,transition:"fade"});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(OptionalPortal,{...Ki,withinPortal:Jn,children:jsxRuntimeExports.jsx(Transition,{...iu,keepMounted:es,mounted:!ss&&!!qs.opened,duration:qs.isGroupPhase?10:iu.duration,children:vl=>jsxRuntimeExports.jsxs(Box,{...Xs,"data-fixed":_s==="fixed"||void 0,variant:Wi,mod:[{multiline:gs},ws],...qs.getFloatingProps({ref:qs.floating,className:hl("tooltip").className,style:{...hl("tooltip").style,...vl,zIndex:Ss,top:qs.y??0,left:qs.x??0}}),children:[Un,jsxRuntimeExports.jsx(FloatingArrow,{ref:fl,arrowX:qs.arrowX,arrowY:qs.arrowY,visible:qi,position:qs.placement,arrowSize:zi,arrowOffset:Gi,arrowRadius:Xi,arrowPosition:as,...hl("arrow")})]})})}),reactExports.cloneElement(Hl,qs.getReferenceProps({onClick:rs,onMouseEnter:cs,onMouseLeave:ds,onMouseMove:l.onMouseMove,onPointerDown:l.onPointerDown,onPointerEnter:l.onPointerEnter,...Jl,className:clsx(Fi,Jl.className),[jn]:bu}))]})});Tooltip.classes=classes$3;Tooltip.displayName="@mantine/core/Tooltip";Tooltip.Floating=TooltipFloating;Tooltip.Group=TooltipGroup;var classes$2={root:"m_18320242","skeleton-fade":"m_299c329c"};const defaultProps$2={visible:!0,animate:!0},varsResolver$2=(e,{width:n,height:l,radius:d,circle:g})=>({root:{"--skeleton-height":rem(l),"--skeleton-width":rem(g?l:n),"--skeleton-radius":g?"1000px":d===void 0?void 0:getRadius(d)}}),Skeleton=factory((e,n)=>{const l=useProps("Skeleton",defaultProps$2,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,width:Kn,height:Xn,circle:Qn,visible:Jn,radius:Ai,animate:Ri,mod:Ni,attributes:$i,...Li}=l,ji=useStyles({name:"Skeleton",classes:classes$2,props:l,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:$i,vars:qn,varsResolver:varsResolver$2});return jsxRuntimeExports.jsx(Box,{ref:n,...ji("root"),mod:[{visible:Jn,animate:Ri},Ni],...Li})});Skeleton.classes=classes$2;Skeleton.displayName="@mantine/core/Skeleton";var classes$1={root:"m_6d731127"};const defaultProps$1={gap:"md",align:"stretch",justify:"flex-start"},varsResolver$1=(e,{gap:n,align:l,justify:d})=>({root:{"--stack-gap":getSpacing(n),"--stack-align":l,"--stack-justify":d}}),Stack=factory((e,n)=>{const l=useProps("Stack",defaultProps$1,e),{classNames:d,className:g,style:jn,styles:Un,unstyled:zn,vars:qn,align:Kn,justify:Xn,gap:Qn,variant:Jn,attributes:Ai,...Ri}=l,Ni=useStyles({name:"Stack",props:l,classes:classes$1,className:g,style:jn,classNames:d,styles:Un,unstyled:zn,attributes:Ai,vars:qn,varsResolver:varsResolver$1});return jsxRuntimeExports.jsx(Box,{ref:n,...Ni("root"),variant:Jn,...Ri})});Stack.classes=classes$1;Stack.displayName="@mantine/core/Stack";const[TabsProvider,useTabsContext]=createSafeContext("Tabs component was not found in the tree");var classes={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const TabsList=factory((e,n)=>{const l=useProps("TabsList",null,e),{children:d,className:g,grow:jn,justify:Un,classNames:zn,styles:qn,style:Kn,mod:Xn,...Qn}=l,Jn=useTabsContext();return jsxRuntimeExports.jsx(Box,{...Qn,...Jn.getStyles("list",{className:g,style:Kn,classNames:zn,styles:qn,props:l,variant:Jn.variant}),ref:n,role:"tablist",variant:Jn.variant,mod:[{grow:jn,orientation:Jn.orientation,placement:Jn.orientation==="vertical"&&Jn.placement,inverted:Jn.inverted},Xn],"aria-orientation":Jn.orientation,__vars:{"--tabs-justify":Un},children:d})});TabsList.classes=classes;TabsList.displayName="@mantine/core/TabsList";const TabsPanel=factory((e,n)=>{const l=useProps("TabsPanel",null,e),{children:d,className:g,value:jn,classNames:Un,styles:zn,style:qn,mod:Kn,keepMounted:Xn,...Qn}=l,Jn=useTabsContext(),Ai=Jn.value===jn,Ri=Jn.keepMounted||Xn||Ai?d:null;return jsxRuntimeExports.jsx(Box,{...Jn.getStyles("panel",{className:g,classNames:Un,styles:zn,style:[qn,Ai?void 0:{display:"none"}],props:l}),ref:n,mod:[{orientation:Jn.orientation},Kn],role:"tabpanel",id:Jn.getPanelId(jn),"aria-labelledby":Jn.getTabId(jn),...Qn,children:Ri})});TabsPanel.classes=classes;TabsPanel.displayName="@mantine/core/TabsPanel";const TabsTab=factory((e,n)=>{const l=useProps("TabsTab",null,e),{className:d,children:g,rightSection:jn,leftSection:Un,value:zn,onClick:qn,onKeyDown:Kn,disabled:Xn,color:Qn,style:Jn,classNames:Ai,styles:Ri,vars:Ni,mod:$i,tabIndex:Li,...ji}=l,Fi=useMantineTheme(),{dir:qi}=useDirection(),zi=useTabsContext(),Gi=zn===zi.value,Xi=ls=>{zi.onChange(zi.allowTabDeactivation&&zn===zi.value?null:zn),qn?.(ls)},as={classNames:Ai,styles:Ri,props:l};return jsxRuntimeExports.jsxs(UnstyledButton,{...zi.getStyles("tab",{className:d,style:Jn,variant:zi.variant,...as}),disabled:Xn,unstyled:zi.unstyled,variant:zi.variant,mod:[{active:Gi,disabled:Xn,orientation:zi.orientation,inverted:zi.inverted,placement:zi.orientation==="vertical"&&zi.placement},$i],ref:n,role:"tab",id:zi.getTabId(zn),"aria-selected":Gi,tabIndex:Li!==void 0?Li:Gi||zi.value===null?0:-1,"aria-controls":zi.getPanelId(zn),onClick:Xi,__vars:{"--tabs-color":Qn?getThemeColor(Qn,Fi):void 0},onKeyDown:createScopedKeydownHandler({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:zi.activateTabWithKeyboard,loop:zi.loop,orientation:zi.orientation||"horizontal",dir:qi,onKeyDown:Kn}),...ji,children:[Un&&jsxRuntimeExports.jsx("span",{...zi.getStyles("tabSection",as),"data-position":"left",children:Un}),g&&jsxRuntimeExports.jsx("span",{...zi.getStyles("tabLabel",as),children:g}),jn&&jsxRuntimeExports.jsx("span",{...zi.getStyles("tabSection",as),"data-position":"right",children:jn})]})});TabsTab.classes=classes;TabsTab.displayName="@mantine/core/TabsTab";const VALUE_ERROR="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",defaultProps={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},varsResolver=(e,{radius:n,color:l,autoContrast:d})=>({root:{"--tabs-radius":getRadius(n),"--tabs-color":getThemeColor(l,e),"--tabs-text-color":getAutoContrastValue(d,e)?getContrastColor({color:l,theme:e,autoContrast:d}):void 0}}),Tabs=factory((e,n)=>{const l=useProps("Tabs",defaultProps,e),{defaultValue:d,value:g,onChange:jn,orientation:Un,children:zn,loop:qn,id:Kn,activateTabWithKeyboard:Xn,allowTabDeactivation:Qn,variant:Jn,color:Ai,radius:Ri,inverted:Ni,placement:$i,keepMounted:Li,classNames:ji,styles:Fi,unstyled:qi,className:zi,style:Gi,vars:Xi,autoContrast:as,mod:ls,attributes:Zi,...gs}=l,bs=useId(Kn),[Ss,ss]=useUncontrolled({value:g,defaultValue:d,finalValue:null,onChange:jn}),Es=useStyles({name:"Tabs",props:l,classes,className:zi,style:Gi,classNames:ji,styles:Fi,unstyled:qi,attributes:Zi,vars:Xi,varsResolver});return jsxRuntimeExports.jsx(TabsProvider,{value:{placement:$i,value:Ss,orientation:Un,id:bs,loop:qn,activateTabWithKeyboard:Xn,getTabId:getSafeId(`${bs}-tab`,VALUE_ERROR),getPanelId:getSafeId(`${bs}-panel`,VALUE_ERROR),onChange:ss,allowTabDeactivation:Qn,variant:Jn,color:Ai,radius:Ri,inverted:Ni,keepMounted:Li,unstyled:qi,getStyles:Es},children:jsxRuntimeExports.jsx(Box,{ref:n,id:bs,variant:Jn,mod:[{orientation:Un,inverted:Un==="horizontal"&&Ni,placement:Un==="vertical"&&$i},ls],...Es("root"),...gs,children:zn})})});Tabs.classes=classes;Tabs.displayName="@mantine/core/Tabs";Tabs.Tab=TabsTab;Tabs.Panel=TabsPanel;Tabs.List=TabsList;const TextInput=factory((e,n)=>{const l=useProps("TextInput",null,e);return jsxRuntimeExports.jsx(InputBase,{component:"input",ref:n,...l,__staticSelector:"TextInput"})});TextInput.classes=InputBase.classes;TextInput.displayName="@mantine/core/TextInput";const ee=(e,n,l=!1)=>{const d=[];function g(jn,Un="--bn"){for(const zn in jn){const qn=zn.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Kn=`${Un}-${qn}`;typeof jn[zn]!="object"?(typeof jn[zn]=="number"&&(jn[zn]=`${jn[zn]}px`),l?n.style.removeProperty(Kn):n.style.setProperty(Kn,jn[zn].toString())):g(jn[zn],Kn)}}return g(e),d},A=(e,n)=>ee(e,n),De={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},Ie=e=>ee(De,e,!0),te=e=>jsxRuntimeExports.jsxs(Stack,{gap:0,className:"bn-tooltip",children:[jsxRuntimeExports.jsx(Text,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&jsxRuntimeExports.jsx(Text,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]}),O=reactExports.forwardRef((e,n)=>{const{className:l,children:d,mainTooltip:g,secondaryTooltip:jn,icon:Un,isSelected:zn,isDisabled:qn,onClick:Kn,label:Xn,variant:Qn,...Jn}=e;At$3(Jn,!1);const[Ai,Ri]=reactExports.useState(!1),Ni=d?jsxRuntimeExports.jsx(Button,{"aria-label":Xn,className:l,onMouseDown:$i=>{uo$2()&&$i.currentTarget.focus()},onClick:$i=>{Ri(!0),Kn?.($i)},onPointerLeave:()=>Ri(!1),"aria-pressed":zn,"data-selected":zn||void 0,"data-test":g?g.slice(0,1).toLowerCase()+g.replace(/\s+/g,"").slice(1):void 0,size:Qn==="compact"?"compact-xs":"xs",disabled:qn||!1,ref:n,...Jn,children:d}):jsxRuntimeExports.jsx(ActionIcon,{className:l,"aria-label":Xn,onMouseDown:$i=>{uo$2()&&$i.currentTarget.focus()},onClick:$i=>{Ri(!0),Kn?.($i)},onPointerLeave:()=>Ri(!1),"aria-pressed":zn,"data-selected":zn||void 0,"data-test":g?g.slice(0,1).toLowerCase()+g.replace(/\s+/g,"").slice(1):void 0,size:Qn==="compact"?20:30,disabled:qn||!1,ref:n,...Jn,children:Un});return g?jsxRuntimeExports.jsx(Tooltip,{disabled:Ai,withinPortal:!1,label:jsxRuntimeExports.jsx(te,{mainTooltip:g,secondaryTooltip:jn}),children:Ni}):Ni}),Re=reactExports.forwardRef((e,n)=>{const{className:l,text:d,icon:g,isSelected:jn,mainTooltip:Un,secondaryTooltip:zn,onClick:qn,onMouseEnter:Kn,...Xn}=e;At$3(Xn,!1);const[Qn,Jn]=reactExports.useState(!1),Ai=jsxRuntimeExports.jsxs(Chip,{className:l,checked:jn===!0,wrapperProps:{onMouseEnter:Kn,onMouseLeave:()=>Jn(!1),onClick:Ri=>{Jn(!0),qn?.(Ri)}},variant:"light",icon:null,ref:n,children:[jsxRuntimeExports.jsx("span",{children:g}),jsxRuntimeExports.jsx("span",{children:d})]});return!Un||Qn?Ai:jsxRuntimeExports.jsx(Tooltip,{refProp:"rootRef",withinPortal:!1,label:jsxRuntimeExports.jsx(te,{mainTooltip:Un,secondaryTooltip:zn}),children:Ai})}),ze=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g),jsxRuntimeExports.jsx(Group,{className:l,ref:n,children:d})}),Be=reactExports.forwardRef((e,n)=>{const{className:l,children:d,headerText:g,selected:jn,onFocus:Un,onBlur:zn,tabIndex:qn,...Kn}=e;return At$3(Kn,!1),jsxRuntimeExports.jsxs(Card,{className:D$3(l,jn?"selected":""),onFocus:Un,onBlur:zn,tabIndex:qn,ref:n,children:[g&&jsxRuntimeExports.jsx(Text,{className:"bn-header-text",children:g}),d]})}),Ee=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g,!1),jsxRuntimeExports.jsx(Card.Section,{className:l,ref:n,children:d})}),Le=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g,!1),jsxRuntimeExports.jsx(Divider,{className:l,label:jsxRuntimeExports.jsx(Text,{children:d}),ref:n})}),je=reactExports.forwardRef((e,n)=>{const{authorInfo:l,timeString:d,edited:g,...jn}=e,Un=M$1();return At$3(jn,!1),l==="loading"?jsxRuntimeExports.jsxs(Group,{children:[jsxRuntimeExports.jsx(Skeleton,{height:24,width:24}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Skeleton,{height:12,width:100})})]}):jsxRuntimeExports.jsxs(Group,{children:[jsxRuntimeExports.jsx(Avatar,{src:l.avatarUrl,alt:l.username,radius:"xl",size:"sm",color:"initials"}),jsxRuntimeExports.jsxs(Text,{fz:"sm",fw:"bold",children:[l.username,jsxRuntimeExports.jsxs(Text,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[d," ",g&&`(${Un.comments.edited})`]})]})]})}),$e=reactExports.forwardRef((e,n)=>{const{className:l,showActions:d,authorInfo:g,timeString:jn,edited:Un,actions:zn,emojiPickerOpen:qn,children:Kn,...Xn}=e,{hovered:Qn,ref:Jn}=useHover(),Ai=jl([n,Jn]);return At$3(Xn,!1),jsxRuntimeExports.jsxs(Group,{pos:"relative",ref:Ai,className:l,children:[zn&&(d===!0||d===void 0||d==="hover"&&Qn||qn)?jsxRuntimeExports.jsx(Group,{style:{position:"absolute",right:0,top:0,zIndex:10},children:zn}):null,jsxRuntimeExports.jsx(je,{...e}),Kn]})}),Ae=reactExports.forwardRef((e,n)=>{const{className:l,autoFocus:d,onFocus:g,onBlur:jn,editor:Un,editable:zn,...qn}=e;At$3(qn,!1);const Kn=q();return jsxRuntimeExports.jsx(Ft,{autoFocus:d,className:l,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:zn,theme:Kn?.colorSchemePreference,ref:n,onFocus:g,onBlur:jn,children:jsxRuntimeExports.jsx(_r,{formattingToolbar:_e})})}),_e=()=>{const e=Vr([]).filter(n=>n.key!=="nestBlockButton"&&n.key!=="unnestBlockButton");return jsxRuntimeExports.jsx(qt,{blockTypeSelectItems:[],children:e})},Ve=reactExports.forwardRef((e,n)=>{const{className:l,name:d,label:g,variant:jn,icon:Un,value:zn,autoFocus:qn,placeholder:Kn,disabled:Xn,onKeyDown:Qn,onChange:Jn,onSubmit:Ai,autoComplete:Ri,rightSection:Ni,...$i}=e;return At$3($i),jsxRuntimeExports.jsx(TextInput,{size:"xs",className:D$3(l||"",jn==="large"?"bn-mt-input-large":""),ref:n,name:d,label:g,leftSection:Un,value:zn,autoFocus:qn,"data-autofocus":qn?"true":void 0,rightSection:Ni,placeholder:Kn,disabled:Xn,onKeyDown:Qn,onChange:Jn,onSubmit:Ai,autoComplete:Ri})}),Ge=reactExports.createContext(void 0),He=e=>{const{children:n,onOpenChange:l,position:d,sub:g,...jn}=e;return At$3(jn),g?jsxRuntimeExports.jsx(Menu.Sub,{transitionProps:{duration:250,exitDelay:250},withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:l,position:d,children:n}):jsxRuntimeExports.jsx(Menu,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:l,position:d,children:n})},Ke=reactExports.forwardRef((e,n)=>{const{className:l,children:d,icon:g,checked:jn,subTrigger:Un,onClick:zn,...qn}=e;return At$3(qn,!1),Un?jsxRuntimeExports.jsx(Menu.Sub.Item,{className:l,ref:n,leftSection:g,rightSection:jn?jsxRuntimeExports.jsx(CheckIcon,{size:10}):jn===!1?jsxRuntimeExports.jsx("div",{className:"bn-tick-space"}):null,onClick:zn,...qn,children:d}):jsxRuntimeExports.jsx(Menu.Item,{className:l,ref:n,leftSection:g,rightSection:jn?jsxRuntimeExports.jsx(CheckIcon,{size:10}):jn===!1?jsxRuntimeExports.jsx("div",{className:"bn-tick-space"}):null,onClick:zn,...qn,children:d})}),Ue=e=>{const{children:n,sub:l,...d}=e;return At$3(d),l?jsxRuntimeExports.jsx(Menu.Sub.Target,{children:n}):jsxRuntimeExports.jsx(Menu.Target,{children:n})},We=reactExports.forwardRef((e,n)=>{const{className:l,children:d,sub:g,...jn}=e;At$3(jn);const Un=reactExports.useContext(Ge);return g?jsxRuntimeExports.jsx(Menu.Sub.Dropdown,{className:l,ref:n,onMouseOver:Un?.onMenuMouseOver,onMouseLeave:Un?.onMenuMouseLeave,children:d}):jsxRuntimeExports.jsx(Menu.Dropdown,{className:l,ref:n,onMouseOver:Un?.onMenuMouseOver,onMouseLeave:Un?.onMenuMouseLeave,children:d})}),Ze=reactExports.forwardRef((e,n)=>{const{className:l,...d}=e;return At$3(d),jsxRuntimeExports.jsx(Menu.Divider,{className:l,ref:n})}),qe=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g),jsxRuntimeExports.jsx(Menu.Label,{className:l,ref:n,children:d})}),Je=reactExports.forwardRef((e,n)=>{const{className:l,children:d,icon:g,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,label:Kn,...Xn}=e;return At$3(Xn,!1),g?jsxRuntimeExports.jsx(ActionIcon,{size:24,className:l,ref:n,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,"aria-label":Kn,...Xn,children:g}):jsxRuntimeExports.jsx(Button,{className:l,ref:n,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,"aria-label":Kn,...Xn,children:d})}),Qe=reactExports.forwardRef((e,n)=>{const{className:l,tabs:d,defaultOpenTab:g,openTab:jn,setOpenTab:Un,loading:zn,...qn}=e;return At$3(qn),jsxRuntimeExports.jsx(Group,{className:l,ref:n,children:jsxRuntimeExports.jsxs(Tabs,{value:jn,defaultValue:g,onChange:Un,children:[zn&&jsxRuntimeExports.jsx(LoadingOverlay,{visible:zn}),jsxRuntimeExports.jsx(Tabs.List,{children:d.map(Kn=>jsxRuntimeExports.jsx(Tabs.Tab,{"data-test":`${Kn.name.toLowerCase()}-tab`,value:Kn.name,children:Kn.name},Kn.name))}),d.map(Kn=>jsxRuntimeExports.jsx(Tabs.Panel,{value:Kn.name,children:Kn.tabPanel},Kn.name))]})})}),Xe=reactExports.forwardRef((e,n)=>{const{className:l,children:d,onClick:g,label:jn,...Un}=e;return At$3(Un),jsxRuntimeExports.jsx(Button,{size:"xs","aria-label":jn,className:l,ref:n,onClick:g,...Un,children:d})}),Ye=reactExports.forwardRef((e,n)=>{const{className:l,accept:d,value:g,placeholder:jn,onChange:Un,...zn}=e;return At$3(zn),jsxRuntimeExports.jsx(FileInput,{size:"xs",className:l,ref:n,accept:d,value:g,placeholder:jn,onChange:Un,...zn})}),et=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g),jsxRuntimeExports.jsx("div",{className:l,ref:n,children:d})}),tt=reactExports.forwardRef((e,n)=>{const{className:l,value:d,placeholder:g,onKeyDown:jn,onChange:Un,...zn}=e;return At$3(zn),jsxRuntimeExports.jsx(TextInput,{size:"xs","data-test":"embed-input",className:l,ref:n,value:d,placeholder:g,onKeyDown:jn,onChange:Un})}),nt=e=>{const{open:n,onOpenChange:l,position:d,children:g,...jn}=e;return At$3(jn),jsxRuntimeExports.jsx(Popover,{middlewares:{size:{padding:20}},withinPortal:!1,opened:n,onChange:l,position:d,zIndex:1e4,children:g})},ot=e=>{const{children:n,...l}=e;return At$3(l),jsxRuntimeExports.jsx(PopoverTarget,{children:n})},rt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,variant:g,...jn}=e;return At$3(jn),jsxRuntimeExports.jsx(PopoverDropdown,{className:l,ref:n,children:d})}),st=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g,!1),jsxRuntimeExports.jsx(Group,{align:"center",gap:0,className:l,ref:n,...g,children:d})}),it=reactExports.forwardRef((e,n)=>{const{className:l,children:d,icon:g,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,label:Kn,...Xn}=e;return At$3(Xn,!1),g?jsxRuntimeExports.jsx(ActionIcon,{size:24,className:l,ref:n,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,"aria-label":Kn,...Xn,children:g}):jsxRuntimeExports.jsx(Button,{className:l,ref:n,onClick:jn,onDragEnd:Un,onDragStart:zn,draggable:qn,"aria-label":Kn,...Xn,children:d})}),at=reactExports.forwardRef((e,n)=>{const{className:l,children:d,id:g,...jn}=e;return At$3(jn),jsxRuntimeExports.jsx(Stack,{gap:0,className:l,ref:n,id:g,role:"listbox",children:d})}),lt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g),jsxRuntimeExports.jsx(Group,{className:l,ref:n,children:jsxRuntimeExports.jsx(Group,{className:"bn-mt-suggestion-menu-item-title",children:d})})}),ct=reactExports.forwardRef((e,n)=>{const{className:l,isSelected:d,onClick:g,item:jn,id:Un,...zn}=e;At$3(zn);const qn=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!qn.current||!d)return;const Kn=Ul(qn.current,qn.current.closest(".bn-suggestion-menu, #ai-suggestion-menu"));Kn==="top"?qn.current.scrollIntoView(!0):Kn==="bottom"&&qn.current.scrollIntoView(!1)},[d]),jsxRuntimeExports.jsxs(Group,{gap:0,className:l,ref:mergeRefs(n,qn),id:Un,role:"option",onMouseDown:Kn=>Kn.preventDefault(),onClick:g,"aria-selected":d||void 0,children:[jn.icon&&jsxRuntimeExports.jsx(Group,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:jn.icon}),jsxRuntimeExports.jsxs(Stack,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[jsxRuntimeExports.jsx(Text,{className:"bn-mt-suggestion-menu-item-title",children:jn.title}),jsxRuntimeExports.jsx(Text,{className:"bn-mt-suggestion-menu-item-subtitle",children:jn.subtext})]}),jn.badge&&jsxRuntimeExports.jsx(Group,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:jsxRuntimeExports.jsx(Badge,{size:"xs",children:jn.badge})})]})}),dt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,...g}=e;return At$3(g),jsxRuntimeExports.jsx(Group,{className:l,ref:n,children:d})}),ut=reactExports.forwardRef((e,n)=>{const{className:l,...d}=e;return At$3(d),jsxRuntimeExports.jsx(Loader,{className:l,type:"dots",size:16,ref:n})}),mt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,id:g,columns:jn,...Un}=e;return At$3(Un),jsxRuntimeExports.jsx("div",{className:l,style:{gridTemplateColumns:`repeat(${jn}, 1fr)`},ref:n,id:g,role:"grid",children:d})}),gt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,columns:g,...jn}=e;return At$3(jn),jsxRuntimeExports.jsx(Group,{className:l,style:{gridColumn:`1 / ${g+1}`},ref:n,children:jsxRuntimeExports.jsx(Group,{className:"bn-mt-suggestion-menu-item-title",children:d})})}),ft=reactExports.forwardRef((e,n)=>{const{className:l,isSelected:d,onClick:g,item:jn,id:Un,...zn}=e;At$3(zn);const qn=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!qn.current||!d)return;const Kn=Ul(qn.current,qn.current.closest(".bn-grid-suggestion-menu"));Kn==="top"?qn.current.scrollIntoView(!0):Kn==="bottom"&&qn.current.scrollIntoView(!1)},[d]),jsxRuntimeExports.jsx("div",{className:l,ref:mergeRefs(n,qn),id:Un,role:"option",onClick:g,"aria-selected":d||void 0,children:jn.icon})}),ht=reactExports.forwardRef((e,n)=>{const{className:l,children:d,columns:g,...jn}=e;return At$3(jn),jsxRuntimeExports.jsx(Loader,{className:l,style:{gridColumn:`1 / ${g+1}`},type:"dots",ref:n})}),bt=reactExports.forwardRef((e,n)=>{const{children:l,className:d,onMouseDown:g,onClick:jn,...Un}=e;return At$3(Un,!1),jsxRuntimeExports.jsx(Button,{className:d,ref:n,onMouseDown:g,onClick:jn,...Un,children:l})}),pt=reactExports.forwardRef((e,n)=>{const{className:l,children:d,draggable:g,onDragStart:jn,onDragEnd:Un,style:zn,label:qn,...Kn}=e;return At$3(Kn,!1),jsxRuntimeExports.jsx(Button,{className:l,ref:n,"aria-label":qn,draggable:g,onDragStart:jn,onDragEnd:Un,style:zn,...Kn,children:d})}),D=reactExports.forwardRef((e,n)=>{const{className:l,children:d,onMouseEnter:g,onMouseLeave:jn,variant:Un,...zn}=e;At$3(zn);const{ref:qn,focused:Kn}=useFocusWithin(),Xn=useFocusTrap(Kn),Qn=mergeRefs(n,qn,Xn);return jsxRuntimeExports.jsx(Flex,{className:l,ref:Qn,role:"toolbar",onMouseEnter:g,onMouseLeave:jn,gap:Un==="action-toolbar"?2:void 0,children:d})});var ne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_=React.createContext&&React.createContext(ne),vt=["attr","size","title"];function St(e,n){if(e==null)return{};var l=yt(e,n),d,g;if(Object.getOwnPropertySymbols){var jn=Object.getOwnPropertySymbols(e);for(g=0;g<jn.length;g++)d=jn[g],!(n.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(e,d)&&(l[d]=e[d])}return l}function yt(e,n){if(e==null)return{};var l={};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if(n.indexOf(d)>=0)continue;l[d]=e[d]}return l}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(e[d]=l[d])}return e},F.apply(this,arguments)}function V(e,n){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);n&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),l.push.apply(l,d)}return l}function M(e){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?V(Object(l),!0).forEach(function(d){wt(e,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):V(Object(l)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(l,d))})}return e}function wt(e,n,l){return n=xt(n),n in e?Object.defineProperty(e,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[n]=l,e}function xt(e){var n=Ct(e,"string");return typeof n=="symbol"?n:n+""}function Ct(e,n){if(typeof e!="object"||!e)return e;var l=e[Symbol.toPrimitive];if(l!==void 0){var d=l.call(e,n);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function oe(e){return e&&e.map((n,l)=>React.createElement(n.tag,M({key:l},n.attr),oe(n.child)))}function Nt(e){return n=>React.createElement(Tt,F({attr:M({},e.attr)},n),oe(e.child))}function Tt(e){var n=l=>{var{attr:d,size:g,title:jn}=e,Un=St(e,vt),zn=g||l.size||"1em",qn;return l.className&&(qn=l.className),e.className&&(qn=(qn?qn+" ":"")+e.className),React.createElement("svg",F({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,d,Un,{className:qn,style:M(M({color:e.color||l.color},l.style),e.style),height:zn,width:zn,xmlns:"http://www.w3.org/2000/svg"}),jn&&React.createElement("title",null,jn),e.children)};return _!==void 0?React.createElement(_.Consumer,null,l=>n(l)):n(ne)}function Pt(e){return Nt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}const I=reactExports.forwardRef((e,n)=>{const{className:l,items:d,isDisabled:g,...jn}=e;At$3(jn);const Un=d.filter(zn=>zn.isSelected)[0];return Un?jsxRuntimeExports.jsxs(Menu,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:g,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[jsxRuntimeExports.jsx(Menu.Target,{children:jsxRuntimeExports.jsx(Button,{onMouseDown:zn=>{uo$2()&&zn.currentTarget.focus()},leftSection:Un.icon,rightSection:jsxRuntimeExports.jsx(Pt,{}),size:"xs",variant:"subtle",disabled:g,children:Un.text})}),jsxRuntimeExports.jsx(Menu.Dropdown,{className:l,ref:n,children:d.map(zn=>jsxRuntimeExports.jsx(Menu.Item,{onClick:zn.onClick,leftSection:zn.icon,rightSection:zn.isSelected?jsxRuntimeExports.jsx(CheckIcon,{size:10,className:"bn-tick-icon"}):jsxRuntimeExports.jsx("div",{className:"bn-tick-space"}),disabled:zn.isDisabled,children:zn.text},zn.text))})]}):null}),kt={FormattingToolbar:{Root:D,Button:O,Select:I},FilePanel:{Root:Qe,Button:Xe,FileInput:Ye,TabPanel:et,TextInput:tt},GridSuggestionMenu:{Root:mt,Item:ft,EmptyItem:gt,Loader:ht},LinkToolbar:{Root:D,Button:O,Select:I},SideMenu:{Root:st,Button:it},SuggestionMenu:{Root:at,Item:ct,EmptyItem:lt,Label:dt,Loader:ut},TableHandle:{Root:pt,ExtendButton:bt},Generic:{Badge:{Root:Re,Group:ze},Form:{Root:e=>jsxRuntimeExports.jsx("div",{children:e.children}),TextInput:Ve},Menu:{Root:He,Trigger:Ue,Dropdown:We,Divider:Ze,Label:qe,Item:Ke,Button:Je},Popover:{Root:nt,Trigger:ot,Content:rt},Toolbar:{Root:D,Button:O,Select:I}},Comments:{Comment:$e,Editor:Ae,Card:Be,CardSection:Ee,ExpandSectionsPrompt:Le}},Ft=e=>{const{className:n,theme:l,...d}=e,g=q(),jn=xi(),Un=g?.colorSchemePreference||jn,zn=reactExports.useCallback(Qn=>{if(Qn&&(Ie(Qn),typeof l=="object")){if("light"in l&&"dark"in l){A(l[Un==="dark"?"dark":"light"],Qn);return}A(l,Qn);return}},[Un,l]),qn=reactExports.useContext(MantineContext),Kn=typeof l=="string"?l:Un!=="no-preference"?Un:"light",Xn=jsxRuntimeExports.jsx(lo.Provider,{value:kt,children:jsxRuntimeExports.jsx(yl,{"data-mantine-color-scheme":Kn,className:D$3("bn-mantine",n||""),theme:typeof l=="object"?void 0:l,...d,ref:zn})});return qn?Xn:jsxRuntimeExports.jsx(MantineProvider,{withCssVariables:!1,getRootElement:()=>{},children:Xn})},Editor=e=>{const n=compilerRuntimeExports.c(8),{doc:l}=e;let d;n[0]!==l?(d=l.getXmlFragment("document-store"),n[0]=l,n[1]=d):d=n[1];let g;n[2]===Symbol.for("react.memo_cache_sentinel")?(g={name:"User",color:"#ff0000"},n[2]=g):g=n[2];let jn;n[3]!==d?(jn={collaboration:{fragment:d,user:g}},n[3]=d,n[4]=jn):jn=n[4];const Un=Xe$1(jn);if(!Un){let qn;return n[5]===Symbol.for("react.memo_cache_sentinel")?(qn=jsxRuntimeExports.jsx("div",{children:"Loading Editor..."}),n[5]=qn):qn=n[5],qn}let zn;return n[6]!==Un?(zn=jsxRuntimeExports.jsx("div",{className:"w-full max-w-4xl mx-auto min-h-[500px] bg-white rounded-lg shadow-sm p-4",children:jsxRuntimeExports.jsx(Ft,{editor:Un,theme:"light"})}),n[6]=Un,n[7]=zn):zn=n[7],zn};var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var aa=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,l){return e==Array.prototype||e==Object.prototype||(e[n]=l.value),e},da=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var n=0;n<e.length;++n){var l=e[n];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")},ea=da(this),fa=function(e,n){if(n)e:{var l=ea;e=e.split(".");for(var d=0;d<e.length-1;d++){var g=e[d];if(!(g in l))break e;l=l[g]}e=e[e.length-1],d=l[e],n=n(d),n!=d&&n!=null&&aa(l,e,{configurable:!0,writable:!0,value:n})}},ha=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}};fa("Symbol",function(e){if(e)return e;var n=function(g,jn){this.ba=g,aa(this,"description",{configurable:!0,writable:!0,value:jn})};n.prototype.toString=function(){return this.ba};var l=0,d=function(g){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(g||"")+"_"+l++,g)};return d}),fa("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),l=0;l<n.length;l++){var d=ea[n[l]];typeof d=="function"&&typeof d.prototype[e]!="function"&&aa(d.prototype,e,{configurable:!0,writable:!0,value:function(){return ia(ha(this))}})}return e});var ia=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},ja=function(e,n){e instanceof String&&(e+="");var l=0,d=!1,g={next:function(){if(!d&&l<e.length){var jn=l++;return{value:n(jn,e[jn]),done:!1}}return d=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g};fa("Array.prototype.keys",function(e){return e||function(){return ja(this,function(n){return n})}});var m=this||self,ka=function(e){var n=typeof e;return n!="object"?n:e?Array.isArray(e)?"array":n:"null"},la=function(e,n,l){return e.call.apply(e.bind,arguments)},ma=function(e,n,l){if(!e)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,d),e.apply(n,g)}}return function(){return e.apply(n,arguments)}},na=function(e,n,l){return na=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?la:ma,na.apply(null,arguments)},oa=function(e,n){function l(){}l.prototype=n.prototype,e.ma=n.prototype,e.prototype=new l,e.prototype.constructor=e,e.A=function(d,g,jn){for(var Un=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)Un[zn-2]=arguments[zn];return n.prototype[g].apply(d,Un)}},pa=function(e){return e},qa=function(e){var n=null,l=m.trustedTypes;if(!l||!l.createPolicy)return n;try{n=l.createPolicy(e,{createHTML:pa,createScript:pa,createScriptURL:pa})}catch(d){m.console&&m.console.error(d.message)}return n};function q(e){if(Error.captureStackTrace)Error.captureStackTrace(this,q);else{var n=Error().stack;n&&(this.stack=n)}e&&(this.message=String(e))}oa(q,Error),q.prototype.name="CustomError";var ra=function(e,n){e=e.split("%s");for(var l="",d=e.length-1,g=0;g<d;g++)l+=e[g]+(g<n.length?n[g]:"%s");q.call(this,l+e[d])};oa(ra,q),ra.prototype.name="AssertionError";var sa=function(e,n,l,d){var g="Assertion failed";if(l){g+=": "+l;var jn=d}else e&&(g+=": "+e,jn=n);throw new ra(""+g,jn||[])},ta=function(e,n,l){return e||sa("",null,n,Array.prototype.slice.call(arguments,2)),e},ua=function(e,n){throw new ra("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))},va=function(e,n,l){typeof e!="string"&&sa("Expected string but got %s: %s.",[ka(e),e],n,Array.prototype.slice.call(arguments,2))},xa=function(e,n){e:{try{var l=e&&e.ownerDocument,d=l&&(l.defaultView||l.parentWindow);if(d=d||m,d.Element&&d.Location){var g=d;break e}}catch{}g=null}if(g&&typeof g[n]<"u"&&(!e||!(e instanceof g[n])&&(e instanceof g.Location||e instanceof g.Element))){if(g=typeof e,g=="object"&&e!=null||g=="function")try{var jn=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch{jn="<object could not be stringified>"}else jn=e===void 0?"undefined":e===null?"null":typeof e;ua("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,jn)}return e},ya,t=function(e,n){this.P=e===za&&n||"",this.ca=Aa};t.prototype.J=!0,t.prototype.H=function(){return this.P},t.prototype.toString=function(){return"Const{"+this.P+"}"};var Ba=function(e){return e instanceof t&&e.constructor===t&&e.ca===Aa?e.P:(ua("expected object of type Const, got '"+e+"'"),"type_error:Const")},Aa={},za={},v=function(e,n){this.N=n===Ca?e:""};v.prototype.J=!0,v.prototype.H=function(){return this.N.toString()},v.prototype.toString=function(){return"SafeUrl{"+this.N+"}"};var Da=function(e){return e instanceof v&&e.constructor===v?e.N:(ua("expected object of type SafeUrl, got '"+e+"' of type "+ka(e)),"type_error:SafeUrl")},Ea=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Fa=function(e){return e instanceof v?e:(e=typeof e=="object"&&e.J?e.H():String(e),ta(Ea.test(e),"%s does not match the safe URL pattern",e)||(e="about:invalid#zClosurez"),new v(e,Ca))},Ca={},w=function(e,n,l){this.M=l===Ga?e:""};w.prototype.J=!0,w.prototype.H=function(){return this.M.toString()},w.prototype.toString=function(){return"SafeHtml{"+this.M+"}"};var Ha=function(e){return e instanceof w&&e.constructor===w?e.M:(ua("expected object of type SafeHtml, got '"+e+"' of type "+ka(e)),"type_error:SafeHtml")},Ga={},Ia=new w(m.trustedTypes&&m.trustedTypes.emptyHTML||"",0,Ga),Ja={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},Ka=(function(e){var n=!1,l;return function(){return n||(l=e(),n=!0),l}})(function(){if(typeof document>"u")return!1;var e=document.createElement("div"),n=document.createElement("div");return n.appendChild(document.createElement("div")),e.appendChild(n),e.firstChild?(n=e.firstChild.firstChild,e.innerHTML=Ha(Ia),!n.parentElement):!1}),x=window,z=document,La=x.location,Ma=function(){},Na=/\[native code\]/,A=function(e,n,l){return e[n]=e[n]||l},Oa=function(e){for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1},Pa=function(e){e=e.sort();for(var n=[],l=void 0,d=0;d<e.length;d++){var g=e[d];g!=l&&n.push(g),l=g}return n},Qa=/&/g,Ra=/</g,Sa=/>/g,Ua=/"/g,Va=/'/g,Wa=function(e){return String(e).replace(Qa,"&amp;").replace(Ra,"&lt;").replace(Sa,"&gt;").replace(Ua,"&quot;").replace(Va,"&#39;")},B=function(){var e;if((e=Object.create)&&Na.test(e))e=e(null);else{e={};for(var n in e)e[n]=void 0}return e},C=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},Xa=function(e){if(Na.test(Object.keys))return Object.keys(e);var n=[],l;for(l in e)C(e,l)&&n.push(l);return n},D=function(e,n){e=e||{};for(var l in e)C(e,l)&&(n[l]=e[l])},Ya=function(e){return function(){x.setTimeout(e,0)}},E=function(e,n){if(!e)throw Error(n||"")},F=A(x,"gapi",{}),H=function(e,n,l){var d=new RegExp("([#].*&|[#])"+n+"=([^&#]*)","g");if(n=new RegExp("([?#].*&|[?#])"+n+"=([^&#]*)","g"),e=e&&(d.exec(e)||n.exec(e)))try{l=decodeURIComponent(e[2])}catch{}return l},Za=new RegExp(/^/.source+/([a-zA-Z][-+.a-zA-Z0-9]*:)?/.source+/(\/\/[^\/?#]*)?/.source+/([^?#]*)?/.source+/(\?([^#]*))?/.source+/(#((#|[^#])*))?/.source+/$/.source),$a=/[\ud800-\udbff][\udc00-\udfff]|[^!-~]/g,ab=new RegExp(/(%([^0-9a-fA-F%]|[0-9a-fA-F]([^0-9a-fA-F%])?)?)*/.source+/%($|[^0-9a-fA-F]|[0-9a-fA-F]($|[^0-9a-fA-F]))/.source,"g"),bb=/%([a-f]|[0-9a-fA-F][a-f])/g,cb=/^(https?|ftp|file|chrome-extension):$/i,I=function(e){e=String(e),e=e.replace($a,function(g){try{return encodeURIComponent(g)}catch{return encodeURIComponent(g.replace(/^[^%]+$/g,""))}}).replace(ab,function(g){return g.replace(/%/g,"%25")}).replace(bb,function(g){return g.toUpperCase()}),e=e.match(Za)||[];var n=B(),l=function(g){return g.replace(/\\/g,"%5C").replace(/\^/g,"%5E").replace(/`/g,"%60").replace(/\{/g,"%7B").replace(/\|/g,"%7C").replace(/\}/g,"%7D")},d=!!(e[1]||"").match(cb);return n.A=l((e[1]||"")+(e[2]||"")+(e[3]||(e[2]&&d?"/":""))),d=function(g){return l(g.replace(/\?/g,"%3F").replace(/#/g,"%23"))},n.query=e[5]?[d(e[5])]:[],n.g=e[7]?[d(e[7])]:[],n},db=function(e){return e.A+(0<e.query.length?"?"+e.query.join("&"):"")+(0<e.g.length?"#"+e.g.join("&"):"")},eb=function(e,n){var l=[];if(e){for(var d in e)if(C(e,d)&&e[d]!=null){var g=n?n(e[d]):e[d];l.push(encodeURIComponent(d)+"="+encodeURIComponent(g))}}return l},fb=function(e,n,l,d){return e=I(e),e.query.push.apply(e.query,eb(n,d)),e.g.push.apply(e.g,eb(l,d)),db(e)},gb=new RegExp(/\/?\??#?/.source+"("+/[\/?#]/i.source+"|"+/[\uD800-\uDBFF]/i.source+"|"+/%[c-f][0-9a-f](%[89ab][0-9a-f]){0,2}(%[89ab]?)?/i.source+"|"+/%[0-9a-f]?/i.source+")$","i"),hb=function(e,n){var l=I(n);n=l.A,l.query.length&&(n+="?"+l.query.join("")),l.g.length&&(n+="#"+l.g.join(""));var d="";2e3<n.length&&(d=n,n=n.substr(0,2e3),n=n.replace(gb,""),d=d.substr(n.length));var g=e.createElement("div");if(e=e.createElement("a"),l=I(n),n=l.A,l.query.length&&(n+="?"+l.query.join("")),l.g.length&&(n+="#"+l.g.join("")),n=new v(n,Ca),xa(e,"HTMLAnchorElement"),n=n instanceof v?n:Fa(n),e.href=Da(n),g.appendChild(e),n=g.innerHTML,l=new t(za,"Assignment to self."),va(Ba(l),"must provide justification"),ta(!/^[\s\xa0]*$/.test(Ba(l)),"must provide non-empty justification"),ya===void 0&&(ya=qa("gapi#html")),n=(l=ya)?l.createHTML(n):n,n=new w(n,null,Ga),g.tagName&&Ja[g.tagName.toUpperCase()])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+g.tagName+".");if(Ka())for(;g.lastChild;)g.removeChild(g.lastChild);return g.innerHTML=Ha(n),n=String(g.firstChild.href),g.parentNode&&g.parentNode.removeChild(g),l=I(n+d),d=l.A,l.query.length&&(d+="?"+l.query.join("")),l.g.length&&(d+="#"+l.g.join("")),d},ib=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i,jb=function(e,n,l,d){x[l+"EventListener"]?x[l+"EventListener"](e,n,!1):x[d+"tachEvent"]&&x[d+"tachEvent"]("on"+e,n)},kb=function(){var e=z.readyState;return e==="complete"||e==="interactive"&&navigator.userAgent.indexOf("MSIE")==-1},nb=function(e){var n=lb;if(!kb())try{n()}catch{}mb(e)},mb=function(e){if(kb())e();else{var n=!1,l=function(){if(!n)return n=!0,e.apply(this,arguments)};x.addEventListener?(x.addEventListener("load",l,!1),x.addEventListener("DOMContentLoaded",l,!1)):x.attachEvent&&(x.attachEvent("onreadystatechange",function(){kb()&&l.apply(this,arguments)}),x.attachEvent("onload",l))}},ob=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},pb={button:!0,div:!0,span:!0},K;K=A(x,"___jsl",B()),A(K,"I",0),A(K,"hel",10);var qb=function(e){return K.dpo?K.h:H(e,"jsh",K.h)},rb=function(e){var n=A(K,"sws",[]);n.push.apply(n,e)},sb=function(e){return A(K,"watt",B())[e]},tb=function(e){var n=A(K,"PQ",[]);K.PQ=[];var l=n.length;if(l===0)e();else for(var d=0,g=function(){++d===l&&e()},jn=0;jn<l;jn++)n[jn](g)},ub=function(e){return A(A(K,"H",B()),e,B())},vb=A(K,"perf",B()),wb=A(vb,"g",B()),xb=A(vb,"i",B());A(vb,"r",[]),B(),B();var yb=function(e,n,l){var d=vb.r;typeof d=="function"?d(e,n,l):d.push([e,n,l])},L=function(e,n,l){wb[e]=!n&&wb[e]||l||new Date().getTime(),yb(e)},Ab=function(e,n,l){n&&0<n.length&&(n=zb(n),l&&0<l.length&&(n+="___"+zb(l)),28<n.length&&(n=n.substr(0,28)+(n.length-28)),l=n,n=A(xb,"_p",B()),A(n,l,B())[e]=new Date().getTime(),yb(e,"_p",l))},zb=function(e){return e.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},Bb=B(),N=[],O=function(e){throw Error("Bad hint"+(e?": "+e:""))};N.push(["jsl",function(e){for(var n in e)if(C(e,n)){var l=e[n];typeof l=="object"?K[n]=A(K,n,[]).concat(l):A(K,n,l)}(n=e.u)&&(e=A(K,"us",[]),e.push(n),(n=/^https:(.*)$/.exec(n))&&e.push("http:"+n[1]))}]);var Cb=/^(\/[a-zA-Z0-9_\-]+)+$/,Db=[/\/amp\//,/\/amp$/,/^\/amp$/],Eb=/^[a-zA-Z0-9\-_\.,!]+$/,Fb=/^gapi\.loaded_[0-9]+$/,Gb=/^[a-zA-Z0-9,._-]+$/,Kb=function(e,n,l,d){var g=e.split(";"),jn=g.shift(),Un=Bb[jn],zn=null;return Un?zn=Un(g,n,l,d):O("no hint processor for: "+jn),zn||O("failed to generate load url"),n=zn,l=n.match(Hb),(d=n.match(Ib))&&d.length===1&&Jb.test(n)&&l&&l.length===1||O("failed sanity: "+e),zn},Nb=function(e,n,l,d){e=Lb(e),Fb.test(l)||O("invalid_callback"),n=Mb(n),d=d&&d.length?Mb(d):null;var g=function(jn){return encodeURIComponent(jn).replace(/%2C/g,",")};return[encodeURIComponent(e.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",g(e.version),"/m=",g(n),d?"/exm="+g(d):"","/rt=j/sv=1/d=1/ed=1",e.S?"/am="+g(e.S):"",e.Z?"/rs="+g(e.Z):"",e.aa?"/t="+g(e.aa):"","/cb=",g(l)].join("")},Lb=function(e){e.charAt(0)!=="/"&&O("relative path");for(var n=e.substring(1).split("/"),l=[];n.length;){if(e=n.shift(),!e.length||e.indexOf(".")==0)O("empty/relative directory");else if(0<e.indexOf("=")){n.unshift(e);break}l.push(e)}e={};for(var d=0,g=n.length;d<g;++d){var jn=n[d].split("="),Un=decodeURIComponent(jn[0]),zn=decodeURIComponent(jn[1]);jn.length==2&&Un&&zn&&(e[Un]=e[Un]||zn)}for(n="/"+l.join("/"),Cb.test(n)||O("invalid_prefix"),l=0,d=Db.length;l<d;++l)Db[l].test(n)&&O("invalid_prefix");return l=Ob(e,"k",!0),d=Ob(e,"am"),g=Ob(e,"rs"),e=Ob(e,"t"),{pathPrefix:n,version:l,S:d,Z:g,aa:e}},Mb=function(e){for(var n=[],l=0,d=e.length;l<d;++l){var g=e[l].replace(/\./g,"_").replace(/-/g,"_");Gb.test(g)&&n.push(g)}return n.join(",")},Ob=function(e,n,l){if(e=e[n],!e&&l&&O("missing: "+n),e){if(Eb.test(e))return e;O("invalid: "+n)}return null},Jb=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,Ib=/\/cb=/g,Hb=/\/\//g,Pb=function(){var e=qb(La.href);if(!e)throw Error("Bad hint");return e};Bb.m=function(e,n,l,d){return(e=e[0])||O("missing_hint"),"https://apis.google.com"+Nb(e,n,l,d)};var Qb=decodeURI("%73cript"),Rb=/^[-+_0-9\/A-Za-z]+={0,2}$/,Sb=function(e,n){for(var l=[],d=0;d<e.length;++d){var g=e[d];g&&0>Oa.call(n,g)&&l.push(g)}return l},Tb=function(){var e=K.nonce;return e!==void 0?e&&e===String(e)&&e.match(Rb)?e:K.nonce=null:z.querySelector&&(e=z.querySelector("script[nonce]"))?(e=e.nonce||e.getAttribute("nonce")||"",e&&e===String(e)&&e.match(Rb)?K.nonce=e:K.nonce=null):null},Wb=function(e){if(z.readyState!="loading")Ub(e);else{var n=Tb(),l="";n!==null&&(l=' nonce="'+n+'"'),e="<"+Qb+' src="'+encodeURI(e)+'"'+l+"></"+Qb+">",z.write(Vb?Vb.createHTML(e):e)}},Ub=function(e){var n=z.createElement(Qb);n.setAttribute("src",Vb?Vb.createScriptURL(e):e),e=Tb(),e!==null&&n.setAttribute("nonce",e),n.async="true",(e=z.getElementsByTagName(Qb)[0])?e.parentNode.insertBefore(n,e):(z.head||z.body||z.documentElement).appendChild(n)},Xb=function(e,n){var l=n&&n._c;if(l)for(var d=0;d<N.length;d++){var g=N[d][0],jn=N[d][1];jn&&C(l,g)&&jn(l[g],e,n)}},Zb=function(e,n,l){Yb(function(){var d=n===qb(La.href)?A(F,"_",B()):B();d=A(ub(n),"_",d),e(d)},l)},ac=function(e,n){var l=n||{};typeof n=="function"&&(l={},l.callback=n),Xb(e,l),n=e?e.split(":"):[];var d=l.h||Pb(),g=A(K,"ah",B());if(g["::"]&&n.length){e=[];for(var jn=null;jn=n.shift();){var Un=jn.split(".");Un=g[jn]||g[Un[1]&&"ns:"+Un[0]||""]||d;var zn=e.length&&e[e.length-1]||null,qn=zn;zn&&zn.hint==Un||(qn={hint:Un,V:[]},e.push(qn)),qn.V.push(jn)}var Kn=e.length;if(1<Kn){var Xn=l.callback;Xn&&(l.callback=function(){--Kn==0&&Xn()})}for(;n=e.shift();)$b(n.V,l,n.hint)}else $b(n||[],l,d)},$b=function(e,n,l){e=Pa(e)||[];var d=n.callback,g=n.config,jn=n.timeout,Un=n.ontimeout,zn=n.onerror,qn=void 0;typeof zn=="function"&&(qn=zn);var Kn=null,Xn=!1;if(jn&&!Un||!jn&&Un)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";zn=A(ub(l),"r",[]).sort();var Qn=A(ub(l),"L",[]).sort(),Jn=[].concat(zn),Ai=function(ji,Fi){if(Xn)return 0;x.clearTimeout(Kn),Qn.push.apply(Qn,Ri);var qi=((F||{}).config||{}).update;if(qi?qi(g):g&&A(K,"cu",[]).push(g),Fi){Ab("me0",ji,Jn);try{Zb(Fi,l,qn)}finally{Ab("me1",ji,Jn)}}return 1};0<jn&&(Kn=x.setTimeout(function(){Xn=!0,Un()},jn));var Ri=Sb(e,Qn);if(Ri.length){Ri=Sb(e,zn);var Ni=A(K,"CP",[]),$i=Ni.length;if(Ni[$i]=function(ji){if(!ji)return 0;Ab("ml1",Ri,Jn);var Fi=function(zi){Ni[$i]=null,Ai(Ri,ji)&&tb(function(){d&&d(),zi()})},qi=function(){var zi=Ni[$i+1];zi&&zi()};0<$i&&Ni[$i-1]?Ni[$i]=function(){Fi(qi)}:Fi(qi)},Ri.length){var Li="loaded_"+K.I++;F[Li]=function(ji){Ni[$i](ji),F[Li]=null},e=Kb(l,Ri,"gapi."+Li,zn),zn.push.apply(zn,Ri),Ab("ml0",Ri,Jn),n.sync||x.___gapisync?Wb(e):Ub(e)}else Ni[$i](Ma)}else Ai(Ri)&&d&&d()},Vb=qa("gapi#gapi"),Yb=function(e,n){if(K.hee&&0<K.hel)try{return e()}catch(l){n&&n(l),K.hel--,ac("debug_error",function(){try{window.___jsl.hefn(l)}catch{throw l}})}else try{return e()}catch(l){throw n&&n(l),l}};F.load=function(e,n){return Yb(function(){return ac(e,n)})};var bc=function(e){var n=window.___jsl=window.___jsl||{};return n[e]=n[e]||[],n[e]},cc=function(e){var n=window.___jsl=window.___jsl||{};return n.cfg=!e&&n.cfg||{},n.cfg},dc=function(e){return typeof e=="object"&&/\[native code\]/.test(e.push)},P=function(e,n,l){if(n&&typeof n=="object")for(var d in n)!Object.prototype.hasOwnProperty.call(n,d)||l&&d==="___goc"&&typeof n[d]>"u"||(e[d]&&n[d]&&typeof e[d]=="object"&&typeof n[d]=="object"&&!dc(e[d])&&!dc(n[d])?P(e[d],n[d]):n[d]&&typeof n[d]=="object"?(e[d]=dc(n[d])?[]:{},P(e[d],n[d])):e[d]=n[d])},ec=function(e){if(e&&!/^\s+$/.test(e)){for(;e.charCodeAt(e.length-1)==0;)e=e.substring(0,e.length-1);try{var n=window.JSON.parse(e)}catch{}if(typeof n=="object")return n;try{n=new Function("return ("+e+`
)`)()}catch{}if(typeof n=="object")return n;try{n=new Function("return ({"+e+`
})`)()}catch{}return typeof n=="object"?n:{}}},fc=function(e,n){var l={___goc:void 0};e.length&&e[e.length-1]&&Object.hasOwnProperty.call(e[e.length-1],"___goc")&&typeof e[e.length-1].___goc>"u"&&(l=e.pop()),P(l,n),e.push(l)},gc=function(e){cc(!0);var n=window.___gcfg,l=bc("cu"),d=window.___gu;n&&n!==d&&(fc(l,n),window.___gu=n),n=bc("cu");var g=document.scripts||document.getElementsByTagName("script")||[];d=[];var jn=[];jn.push.apply(jn,bc("us"));for(var Un=0;Un<g.length;++Un)for(var zn=g[Un],qn=0;qn<jn.length;++qn)zn.src&&zn.src.indexOf(jn[qn])==0&&d.push(zn);for(d.length==0&&0<g.length&&g[g.length-1].src&&d.push(g[g.length-1]),g=0;g<d.length;++g)d[g].getAttribute("gapi_processed")||(d[g].setAttribute("gapi_processed",!0),(jn=d[g])?(Un=jn.nodeType,jn=Un==3||Un==4?jn.nodeValue:jn.textContent||jn.innerText||jn.innerHTML||""):jn=void 0,(jn=ec(jn))&&n.push(jn));for(e&&fc(l,e),d=bc("cd"),e=0,n=d.length;e<n;++e)P(cc(),d[e],!0);for(d=bc("ci"),e=0,n=d.length;e<n;++e)P(cc(),d[e],!0);for(e=0,n=l.length;e<n;++e)P(cc(),l[e],!0)},Q=function(e){var n=cc();if(!e)return n;e=e.split("/");for(var l=0,d=e.length;n&&typeof n=="object"&&l<d;++l)n=n[e[l]];return l===e.length&&n!==void 0?n:void 0},hc=function(e,n){var l;if(typeof e=="string"){var d=l={};e=e.split("/");for(var g=0,jn=e.length;g<jn-1;++g){var Un={};d=d[e[g]]=Un}d[e[g]]=n}else l=e;gc(l)},ic=function(){var e=window.__GOOGLEAPIS;e&&(e.googleapis&&!e["googleapis.config"]&&(e["googleapis.config"]=e.googleapis),A(K,"ci",[]).push(e),window.__GOOGLEAPIS=void 0)},jc={callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},kc=!1,lc=B(),mc=function(){if(!kc){for(var e=document.getElementsByTagName("meta"),n=0;n<e.length;++n){var l=e[n].name.toLowerCase();if(l.lastIndexOf("google-signin-",0)==0){l=l.substring(14);var d=e[n].content;jc[l]&&d&&(lc[l]=d)}}if(window.self!==window.top){e=document.location.toString();for(var g in jc)0<jc[g]&&(n=H(e,g,""))&&(lc[g]=n)}kc=!0}return g=B(),D(lc,g),g},nc=function(e){return!!(e.clientid&&e.scope&&e.callback)},oc=window.console,pc=function(e){oc&&oc.log&&oc.log(e)},qc=function(){return!!K.oa},rc=function(){},R=A(K,"rw",B()),sc=function(e){for(var n in R)e(R[n])},tc=function(e,n){(e=R[e])&&e.state<n&&(e.state=n)},vc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/u\/(\d)\//,wc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/b\/(\d{10,21})\//,xc=function(e){var n=Q("googleapis.config/sessionIndex");if(typeof n=="string"&&254<n.length&&(n=null),n==null&&(n=window.__X_GOOG_AUTHUSER),typeof n=="string"&&254<n.length&&(n=null),n==null){var l=window.google;l&&(n=l.authuser)}return typeof n=="string"&&254<n.length&&(n=null),n==null&&(e=e||window.location.href,n=H(e,"authuser")||null,n==null&&(n=(n=e.match(vc))?n[1]:null)),n==null?null:(n=String(n),254<n.length&&(n=null),n)},yc=function(e){var n=Q("googleapis.config/sessionDelegate");return typeof n=="string"&&21<n.length&&(n=null),n==null&&(n=(e=(e||window.location.href).match(wc))?e[1]:null),n==null?null:(n=String(n),21<n.length&&(n=null),n)},zc,S,T=void 0,U=function(e){try{return m.JSON.parse.call(m.JSON,e)}catch{return!1}},V=function(e){return Object.prototype.toString.call(e)},Ac=V(0),Bc=V(new Date(0)),Cc=V(!0),Dc=V(""),Ec=V({}),Fc=V([]),W=function(e,n){if(n){for(var l=0,d=n.length;l<d;++l)if(e===n[l])throw new TypeError("Converting circular structure to JSON")}if(d=typeof e,d!=="undefined"){l=Array.prototype.slice.call(n||[],0),l[l.length]=e,n=[];var g=V(e);if(e!=null&&typeof e.toJSON=="function"&&(Object.prototype.hasOwnProperty.call(e,"toJSON")||(g!==Fc||e.constructor!==Array&&e.constructor!==Object)&&(g!==Ec||e.constructor!==Array&&e.constructor!==Object)&&g!==Dc&&g!==Ac&&g!==Cc&&g!==Bc))return W(e.toJSON.call(e),l);if(e==null)n[n.length]="null";else if(g===Ac)e=Number(e),isNaN(e)||isNaN(e-e)?e="null":e===-0&&0>1/e&&(e="-0"),n[n.length]=String(e);else if(g===Cc)n[n.length]=String(!!Number(e));else{if(g===Bc)return W(e.toISOString.call(e),l);if(g===Fc&&V(e.length)===Ac){n[n.length]="[";var jn=0;for(d=Number(e.length)>>0;jn<d;++jn)jn&&(n[n.length]=","),n[n.length]=W(e[jn],l)||"null";n[n.length]="]"}else if(g==Dc&&V(e.length)===Ac){for(n[n.length]='"',jn=0,l=Number(e.length)>>0;jn<l;++jn)d=String.prototype.charAt.call(e,jn),g=String.prototype.charCodeAt.call(e,jn),n[n.length]=d==="\b"?"\\b":d==="\f"?"\\f":d===`
`?"\\n":d==="\r"?"\\r":d==="	"?"\\t":d==="\\"||d==='"'?"\\"+d:31>=g?"\\u"+(g+65536).toString(16).substr(1):32<=g&&65535>=g?d:"";n[n.length]='"'}else if(d==="object"){n[n.length]="{",d=0;for(jn in e)Object.prototype.hasOwnProperty.call(e,jn)&&(g=W(e[jn],l),g!==void 0&&(d++&&(n[n.length]=","),n[n.length]=W(jn),n[n.length]=":",n[n.length]=g));n[n.length]="}"}else return}return n.join("")}},Gc=/[\0-\x07\x0b\x0e-\x1f]/,Hc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*[\0-\x1f]/,Ic=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\[^\\\/"bfnrtu]/,Jc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\u([0-9a-fA-F]{0,3}[^0-9a-fA-F])/,Kc=/"([^\0-\x1f\\"]|\\[\\\/"bfnrt]|\\u[0-9a-fA-F]{4})*"/g,Lc=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][-+]?[0-9]+)?/g,Mc=/[ \t\n\r]+/g,Nc=/[^"]:/,Oc=/""/g,Pc=/true|false|null/g,Qc=/00/,Rc=/[\{]([^0\}]|0[^:])/,Sc=/(^|\[)[,:]|[,:](\]|\}|[,:]|$)/,Tc=/[^\[,:][\[\{]/,Uc=/^(\{|\}|\[|\]|,|:|0)+/,Vc=/\u2028/g,Wc=/\u2029/g,Xc=function(a){if(a=String(a),Gc.test(a)||Hc.test(a)||Ic.test(a)||Jc.test(a))return!1;var b=a.replace(Kc,'""');if(b=b.replace(Lc,"0"),b=b.replace(Mc,""),Nc.test(b)||(b=b.replace(Oc,"0"),b=b.replace(Pc,"0"),Qc.test(b)||Rc.test(b)||Sc.test(b)||Tc.test(b)||!b||(b=b.replace(Uc,""))))return!1;a=a.replace(Vc,"\\u2028").replace(Wc,"\\u2029"),b=void 0;try{b=T?[U(a)]:eval(`(function (var_args) {
  return Array.prototype.slice.call(arguments, 0);
})(
`+a+`
)`)}catch(e){return!1}return b&&b.length===1?b[0]:!1},Yc=function(){var e=((m.document||{}).scripts||[]).length;if((zc===void 0||T===void 0||S!==e)&&S!==-1){zc=T=!1,S=-1;try{try{T=!!m.JSON&&m.JSON.stringify.call(m.JSON,{a:[3,!0,new Date(0)],c:function(){}})==='{"a":[3,true,"1970-01-01T00:00:00.000Z"]}'&&U("true")===!0&&U('[{"a":3}]')[0].a===3}catch{}zc=T&&!U("[00]")&&!U('"\x07"')&&!U('"\\0"')&&!U('"\\v"')}finally{S=e}}},Zc=function(e){return S===-1?!1:(Yc(),(zc?U:Xc)(e))},$c=function(e){if(S!==-1)return Yc(),T?m.JSON.stringify.call(m.JSON,e):W(e)},ad=!Date.prototype.toISOString||typeof Date.prototype.toISOString!="function"||new Date(0).toISOString()!=="1970-01-01T00:00:00.000Z",bd=function(){var e=Date.prototype.getUTCFullYear.call(this);return[0>e?"-"+String(1e6-e).substr(1):9999>=e?String(1e4+e).substr(1):"+"+String(1e6+e).substr(1),"-",String(101+Date.prototype.getUTCMonth.call(this)).substr(1),"-",String(100+Date.prototype.getUTCDate.call(this)).substr(1),"T",String(100+Date.prototype.getUTCHours.call(this)).substr(1),":",String(100+Date.prototype.getUTCMinutes.call(this)).substr(1),":",String(100+Date.prototype.getUTCSeconds.call(this)).substr(1),".",String(1e3+Date.prototype.getUTCMilliseconds.call(this)).substr(1),"Z"].join("")};Date.prototype.toISOString=ad?bd:Date.prototype.toISOString;var cd=function(){this.j=-1},dd=function(){this.j=64,this.b=[],this.G=[],this.da=[],this.C=[],this.C[0]=128;for(var e=1;e<this.j;++e)this.C[e]=0;this.D=this.o=0,this.reset()};oa(dd,cd),dd.prototype.reset=function(){this.b[0]=1732584193,this.b[1]=4023233417,this.b[2]=2562383102,this.b[3]=271733878,this.b[4]=3285377520,this.D=this.o=0};var ed=function(e,n,l){l||(l=0);var d=e.da;if(typeof n=="string")for(var g=0;16>g;g++)d[g]=n.charCodeAt(l)<<24|n.charCodeAt(l+1)<<16|n.charCodeAt(l+2)<<8|n.charCodeAt(l+3),l+=4;else for(g=0;16>g;g++)d[g]=n[l]<<24|n[l+1]<<16|n[l+2]<<8|n[l+3],l+=4;for(g=16;80>g;g++){var jn=d[g-3]^d[g-8]^d[g-14]^d[g-16];d[g]=(jn<<1|jn>>>31)&4294967295}n=e.b[0],l=e.b[1];var Un=e.b[2],zn=e.b[3],qn=e.b[4];for(g=0;80>g;g++){if(40>g)if(20>g){jn=zn^l&(Un^zn);var Kn=1518500249}else jn=l^Un^zn,Kn=1859775393;else 60>g?(jn=l&Un|zn&(l|Un),Kn=2400959708):(jn=l^Un^zn,Kn=3395469782);jn=(n<<5|n>>>27)+jn+qn+Kn+d[g]&4294967295,qn=zn,zn=Un,Un=(l<<30|l>>>2)&4294967295,l=n,n=jn}e.b[0]=e.b[0]+n&4294967295,e.b[1]=e.b[1]+l&4294967295,e.b[2]=e.b[2]+Un&4294967295,e.b[3]=e.b[3]+zn&4294967295,e.b[4]=e.b[4]+qn&4294967295};dd.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var l=n-this.j,d=0,g=this.G,jn=this.o;d<n;){if(jn==0)for(;d<=l;)ed(this,e,d),d+=this.j;if(typeof e=="string"){for(;d<n;)if(g[jn]=e.charCodeAt(d),++jn,++d,jn==this.j){ed(this,g),jn=0;break}}else for(;d<n;)if(g[jn]=e[d],++jn,++d,jn==this.j){ed(this,g),jn=0;break}}this.o=jn,this.D+=n}},dd.prototype.digest=function(){var e=[],n=8*this.D;56>this.o?this.update(this.C,56-this.o):this.update(this.C,this.j-(this.o-56));for(var l=this.j-1;56<=l;l--)this.G[l]=n&255,n/=256;for(ed(this,this.G),l=n=0;5>l;l++)for(var d=24;0<=d;d-=8)e[n]=this.b[l]>>d&255,++n;return e};var fd=function(){this.O=new dd};fd.prototype.reset=function(){this.O.reset()};var gd=x.crypto,hd=!1,id=0,jd=0,kd=1,ld=0,md="",nd=function(e){e=e||x.event;var n=e.screenX+e.clientX<<16;n+=e.screenY+e.clientY,n*=new Date().getTime()%1e6,kd=kd*n%ld,0<id&&++jd==id&&jb("mousemove",nd,"remove","de")},od=function(e){var n=new fd;e=unescape(encodeURIComponent(e));for(var l=[],d=0,g=e.length;d<g;++d)l.push(e.charCodeAt(d));for(n.O.update(l),n=n.O.digest(),e="",l=0;l<n.length;l++)e+="0123456789ABCDEF".charAt(Math.floor(n[l]/16))+"0123456789ABCDEF".charAt(n[l]%16);return e};hd=!!gd&&typeof gd.getRandomValues=="function",hd||(ld=1e6*(screen.width*screen.width+screen.height),md=od(z.cookie+"|"+z.location+"|"+new Date().getTime()+"|"+Math.random()),id=Q("random/maxObserveMousemove")||0,id!=0&&jb("mousemove",nd,"add","at"));var pd=function(){var e=kd;return e+=parseInt(md.substr(0,20),16),md=od(md),e/(ld+Math.pow(16,20))},qd=function(){var e=new x.Uint32Array(1);return gd.getRandomValues(e),+("0."+e[0])},rd=function(){var e=K.onl;if(!e){e=B(),K.onl=e;var n=B();e.e=function(l){var d=n[l];d&&(delete n[l],d())},e.a=function(l,d){n[l]=d},e.r=function(l){delete n[l]}}return e},sd=function(e,n){return n=n.onload,typeof n=="function"?(rd().a(e,n),n):null},td=function(e){return E(/^\w+$/.test(e),"Unsupported id - "+e),rd(),'onload="window.___jsl.onl.e(&#34;'+e+'&#34;)"'},ud=function(e){rd().r(e)},vd={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},wd={allowtransparency:!0,onload:!0},xd=0,yd=function(e){E(!e||ib.test(e),"Illegal url for new iframe - "+e)},zd=function(e,n,l,d,g){yd(l.src);var jn,Un=sd(d,l),zn=Un?td(d):"";try{document.all&&(jn=e.createElement('<iframe frameborder="'+Wa(String(l.frameborder))+'" scrolling="'+Wa(String(l.scrolling))+'" '+zn+' name="'+Wa(String(l.name))+'"/>'))}catch{}finally{jn||(jn=e.createElement("iframe"),Un&&(jn.onload=function(){jn.onload=null,Un.call(this)},ud(d)))}jn.setAttribute("ng-non-bindable","");for(var qn in l)e=l[qn],qn==="style"&&typeof e=="object"?D(e,jn.style):wd[qn]||jn.setAttribute(qn,String(e));return(qn=g&&g.beforeNode||null)||g&&g.dontclear||ob(n),n.insertBefore(jn,qn),jn=qn?qn.previousSibling:n.lastChild,l.allowtransparency&&(jn.allowTransparency=!0),jn},Ad=/^:[\w]+$/,Bd=/:([a-zA-Z_]+):/g,Cd=function(){var e=xc()||"0",n=yc(),l=xc(void 0)||e,d=yc(void 0),g="";l&&(g+="u/"+encodeURIComponent(String(l))+"/"),d&&(g+="b/"+encodeURIComponent(String(d))+"/"),l=g||null,(g=(d=Q("isLoggedIn")===!1)?"_/im/":"")&&(l="");var jn=Q("iframes/:socialhost:"),Un=Q("iframes/:im_socialhost:");return{socialhost:jn,ctx_socialhost:d?Un:jn,session_index:e,session_delegate:n,session_prefix:l,im_prefix:g}},Dd=function(e,n){return Cd()[n]||""},Ed=function(e){return function(n,l){return e?Cd()[l]||e[l]||"":Cd()[l]||""}},Fd=function(e){var n;return e.match(/^https?%3A/i)&&(n=decodeURIComponent(e)),hb(document,n||e)},Gd=function(e){e=e||"canonical";for(var n=document.getElementsByTagName("link"),l=0,d=n.length;l<d;l++){var g=n[l],jn=g.getAttribute("rel");if(jn&&jn.toLowerCase()==e&&(g=g.getAttribute("href"))&&(g=Fd(g))&&g.match(/^https?:\/\/[\w\-_\.]+/i)!=null)return g}return window.location.href},Hd={se:"0"},Id={post:!0},Jd={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},Kd="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),Ld=A(K,"WI",B()),Md=function(e,n,l){var d,g={},jn=d=e;e=="plus"&&n.action&&(d=e+"_"+n.action,jn=e+"/"+n.action),(d=Q("iframes/"+d+"/url"))||(d=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+jn+"?usegapi=1");for(var Un in Hd)g[Un]=Un+"/"+(n[Un]||Hd[Un])+"/";if(g=hb(z,d.replace(Bd,Ed(g))),Un="iframes/"+e+"/params/",jn={},D(n,jn),(d=Q("lang")||Q("gwidget/lang"))&&(jn.hl=d),Id[e]||(jn.origin=window.location.origin||window.location.protocol+"//"+window.location.host),jn.exp=Q(Un+"exp"),Un=Q(Un+"location"))for(d=0;d<Un.length;d++){var zn=Un[d];jn[zn]=x.location[zn]}switch(e){case"plus":case"follow":Un=jn.href,d=n.action?void 0:"publisher",Un=(Un=typeof Un=="string"?Un:void 0)?Fd(Un):Gd(d),jn.url=Un,delete jn.href;break;case"plusone":Un=(Un=n.href)?Fd(Un):Gd(),jn.url=Un,Un=n.db,d=Q(),Un==null&&d&&(Un=d.db,Un==null&&(Un=d.gwidget&&d.gwidget.db)),jn.db=Un||void 0,Un=n.ecp,d=Q(),Un==null&&d&&(Un=d.ecp,Un==null&&(Un=d.gwidget&&d.gwidget.ecp)),jn.ecp=Un||void 0,delete jn.href;break;case"signin":jn.url=Gd()}K.ILI&&(jn.iloader="1"),delete jn["data-onload"],delete jn.rd;for(var qn in Hd)jn[qn]&&delete jn[qn];jn.gsrc=Q("iframes/:source:"),qn=Q("inline/css"),typeof qn<"u"&&0<l&&qn>=l&&(jn.ic="1"),qn=/^#|^fr-/,l={};for(var Kn in jn)C(jn,Kn)&&qn.test(Kn)&&(l[Kn.replace(qn,"")]=jn[Kn],delete jn[Kn]);Kn=Q("iframes/"+e+"/params/si")=="q"?jn:l,qn=mc();for(var Xn in qn)!C(qn,Xn)||C(jn,Xn)||C(l,Xn)||(Kn[Xn]=qn[Xn]);Xn=[].concat(Kd),(Kn=Q("iframes/"+e+"/methods"))&&typeof Kn=="object"&&Na.test(Kn.push)&&(Xn=Xn.concat(Kn));for(var Qn in n)C(n,Qn)&&/^on/.test(Qn)&&(e!="plus"||Qn!="onconnect")&&(Xn.push(Qn),delete jn[Qn]);return delete jn.callback,l._methods=Xn.join(","),fb(g,jn,l)},Nd=["style","data-gapiscan"],Pd=function(e){for(var n=B(),l=e.nodeName.toLowerCase().indexOf("g:")!=0,d=0,g=e.attributes.length;d<g;d++){var jn=e.attributes[d],Un=jn.name,zn=jn.value;0<=Oa.call(Nd,Un)||l&&Un.indexOf("data-")!=0||zn==="null"||"specified"in jn&&!jn.specified||(l&&(Un=Un.substr(5)),n[Un.toLowerCase()]=zn)}return e=e.style,(l=Od(e&&e.height))&&(n.height=String(l)),(e=Od(e&&e.width))&&(n.width=String(e)),n},Od=function(e){var n=void 0;return typeof e=="number"?n=e:typeof e=="string"&&(n=parseInt(e,10)),n},Rd=function(){var e=K.drw;sc(function(n){if(e!==n.id&&n.state!=4&&n.type!="share"){var l=n.id,d=n.type,g=n.url;n=n.userParams;var jn=z.getElementById(l);if(jn){var Un=Md(d,n,0);Un?(jn=jn.parentNode,g.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")!==Un.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")&&(n.dontclear=!0,n.rd=!0,n.ri=!0,n.type=d,Qd(jn,n),(d=R[jn.lastChild.id])&&(d.oid=l),tc(l,4))):delete R[l]}else delete R[l]}})},Sd,Td,X,Ud,Vd,Wd=/(?:^|\s)g-((\S)*)(?:$|\s)/,Xd={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};Sd=A(K,"SW",B()),Td=A(K,"SA",B()),X=A(K,"SM",B()),Ud=A(K,"FW",[]),Vd=null;var Zd=function(e,n){Yd(void 0,!1,e,n)},Yd=function(e,n,l,d){L("ps0",!0),l=(typeof l=="string"?document.getElementById(l):l)||z;var g=z.documentMode;if(l.querySelectorAll&&(!g||8<g)){g=d?[d]:Xa(Sd).concat(Xa(Td)).concat(Xa(X));for(var jn=[],Un=0;Un<g.length;Un++){var zn=g[Un];jn.push(".g-"+zn,"g\\:"+zn)}g=l.querySelectorAll(jn.join(","))}else g=l.getElementsByTagName("*");for(l=B(),jn=0;jn<g.length;jn++){Un=g[jn];var qn=Un;zn=d;var Kn=qn.nodeName.toLowerCase(),Xn=void 0;if(qn.getAttribute("data-gapiscan"))zn=null;else{var Qn=Kn.indexOf("g:");Qn==0?Xn=Kn.substr(2):(Qn=(Qn=String(qn.className||qn.getAttribute("class")))&&Wd.exec(Qn))&&(Xn=Qn[1]),zn=!Xn||!(Sd[Xn]||Td[Xn]||X[Xn])||zn&&Xn!==zn?null:Xn}zn&&(Xd[zn]||Un.nodeName.toLowerCase().indexOf("g:")==0||Xa(Pd(Un)).length!=0)&&(Un.setAttribute("data-gapiscan",!0),A(l,zn,[]).push(Un))}if(n)for(var Jn in l)for(n=l[Jn],d=0;d<n.length;d++)n[d].setAttribute("data-onload",!0);for(var Ai in l)Ud.push(Ai);if(L("ps1",!0),(Jn=Ud.join(":"))||e)try{F.load(Jn,e)}catch(Ni){pc(Ni);return}if($d(Vd||{}))for(var Ri in l){for(e=l[Ri],Ai=0,n=e.length;Ai<n;Ai++)e[Ai].removeAttribute("data-gapiscan");ae(Ri)}else{d=[];for(Ri in l)for(e=l[Ri],Ai=0,n=e.length;Ai<n;Ai++)g=e[Ai],be(Ri,g,Pd(g),d,n);ce(Jn,d)}},de=function(e){var n=A(F,e,{});n.go||(n.go=function(l){return Zd(l,e)},n.render=function(l,d){return d=d||{},d.type=e,Qd(l,d)})},ee=function(e){Sd[e]=!0},fe=function(e){Td[e]=!0},ge=function(e){X[e]=!0},ae=function(e,n){var l=sb(e);n&&l?(l(n),(l=n.iframeNode)&&l.setAttribute("data-gapiattached",!0)):F.load(e,function(){var d=sb(e),g=n&&n.iframeNode,jn=n&&n.userParams;g&&d?(d(n),g.setAttribute("data-gapiattached",!0)):(d=F[e].go,e=="signin2"?d(g,jn):d(g&&g.parentNode,jn))})},$d=function(){return!1},ce=function(){},be=function(e,n,l,d,g,jn,Un){switch(he(n,e,jn)){case 0:e=X[e]?e+"_annotation":e,d={},d.iframeNode=n,d.userParams=l,ae(e,d);break;case 1:if(n.parentNode){for(var zn in l)if((jn=C(l,zn))&&(jn=l[zn],jn=!!jn&&typeof jn=="object"&&(!jn.toString||jn.toString===Object.prototype.toString||jn.toString===Array.prototype.toString)),jn)try{l[zn]=$c(l[zn])}catch{delete l[zn]}if(jn=!0,l.dontclear&&(jn=!1),delete l.dontclear,rc(),zn=Md(e,l,g),g=Un||{},g.allowPost=1,g.attributes=Jd,g.dontclear=!jn,Un={},Un.userParams=l,Un.url=zn,Un.type=e,l.rd)var qn=n;else qn=document.createElement("div"),n.setAttribute("data-gapistub",!0),qn.style.cssText="position:absolute;width:450px;left:-10000px;",n.parentNode.insertBefore(qn,n);Un.siteElement=qn,qn.id||(n=qn,A(Ld,e,0),jn="___"+e+"_"+Ld[e]++,n.id=jn),n=B(),n[">type"]=e,D(l,n),jn=zn,l=qn,zn=g||{},n=zn.attributes||{},E(!(zn.allowPost||zn.forcePost)||!n.onload,"onload is not supported by post iframe (allowPost or forcePost)"),g=n=jn,Ad.test(n)&&(g=Q("iframes/"+g.substring(1)+"/url"),E(!!g,"Unknown iframe url config for - "+n)),jn=hb(z,g.replace(Bd,Dd)),n=l.ownerDocument||z,qn=0;do g=zn.id||["I",xd++,"_",new Date().getTime()].join("");while(n.getElementById(g)&&5>++qn);E(5>qn,"Error creating iframe id"),qn={};var Kn={};n.documentMode&&9>n.documentMode&&(qn.hostiemode=n.documentMode),D(zn.queryParams||{},qn),D(zn.fragmentParams||{},Kn);var Xn=zn.pfname,Qn=B();Q("iframes/dropLegacyIdParam")||(Qn.id=g),Qn._gfid=g,Qn.parent=n.location.protocol+"//"+n.location.host;var Jn=H(n.location.href,"parent");if(Xn=Xn||"",!Xn&&Jn&&(Jn=H(n.location.href,"_gfid","")||H(n.location.href,"id",""),Xn=H(n.location.href,"pfname",""),Xn=Jn?Xn+"/"+Jn:""),Xn||(Jn=Zc(H(n.location.href,"jcp","")))&&typeof Jn=="object"&&(Xn=(Xn=Jn.id)?Jn.pfname+"/"+Xn:""),Qn.pfname=Xn,zn.connectWithJsonParam&&(Jn={},Jn.jcp=$c(Qn),Qn=Jn),Jn=H(jn,"rpctoken")||qn.rpctoken||Kn.rpctoken,Jn||(Jn=zn.rpctoken||String(Math.round(1e8*(hd?qd():pd()))),Qn.rpctoken=Jn),zn.rpctoken=Jn,D(Qn,zn.connectWithQueryParams?qn:Kn),Jn=n.location.href,Qn=B(),(Xn=H(Jn,"_bsh",K.bsh))&&(Qn._bsh=Xn),(Jn=qb(Jn))&&(Qn.jsh=Jn),zn.hintInFragment?D(Qn,Kn):D(Qn,qn),jn=fb(jn,qn,Kn,zn.paramsSerializer),Kn=B(),D(vd,Kn),D(zn.attributes,Kn),Kn.name=Kn.id=g,Kn.src=jn,zn.eurl=jn,qn=zn||{},Qn=!!qn.allowPost,qn.forcePost||Qn&&2e3<jn.length){if(qn=I(jn),Kn.src="",zn.dropDataPostorigin||(Kn["data-postorigin"]=jn),jn=zd(n,l,Kn,g),navigator.userAgent.indexOf("WebKit")!=-1){var Ai=jn.contentWindow.document;Ai.open(),Kn=Ai.createElement("div"),Qn={},Jn=g+"_inner",Qn.name=Jn,Qn.src="",Qn.style="display:none",zd(n,Kn,Qn,Jn,zn)}for(Kn=(zn=qn.query[0])?zn.split("&"):[],zn=[],Qn=0;Qn<Kn.length;Qn++)Jn=Kn[Qn].split("=",2),zn.push([decodeURIComponent(Jn[0]),decodeURIComponent(Jn[1])]);for(qn.query=[],Kn=db(qn),E(ib.test(Kn),"Invalid URL: "+Kn),qn=n.createElement("form"),qn.method="POST",qn.target=g,qn.style.display="none",g=Kn instanceof v?Kn:Fa(Kn),xa(qn,"HTMLFormElement").action=Da(g),g=0;g<zn.length;g++)Kn=n.createElement("input"),Kn.type="hidden",Kn.name=zn[g][0],Kn.value=zn[g][1],qn.appendChild(Kn);l.appendChild(qn),qn.submit(),qn.parentNode.removeChild(qn),Ai&&Ai.close(),Ai=jn}else Ai=zd(n,l,Kn,g,zn);Un.iframeNode=Ai,Un.id=Ai.getAttribute("id"),Ai=Un.id,l=B(),l.id=Ai,l.userParams=Un.userParams,l.url=Un.url,l.type=Un.type,l.state=1,R[Ai]=l,Ai=Un}else Ai=null;Ai&&((Un=Ai.id)&&d.push(Un),ae(e,Ai))}},he=function(e,n,l){if(e&&e.nodeType===1&&n){if(l)return 1;if(X[n]){if(pb[e.nodeName.toLowerCase()])return(e=e.innerHTML)&&e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(Td[n])return 0;if(Sd[n])return 1}}return null},Qd=function(e,n){var l=n.type;delete n.type;var d=(typeof e=="string"?document.getElementById(e):e)||void 0;if(d){e={};for(var g in n)C(n,g)&&(e[g.toLowerCase()]=n[g]);e.rd=1,(n=!!e.ri)&&delete e.ri,g=[],be(l,d,e,g,0,n,void 0),ce(l,g)}else pc("gapi."+l+".render: missing element "+typeof e=="string"?e:"")};A(F,"platform",{}).go=Zd,$d=function(e){for(var n=["_c","jsl","h"],l=0;l<n.length&&e;l++)e=e[n[l]];return n=qb(La.href),!e||e.indexOf("n;")!=0&&n.indexOf("n;")!=0&&e!==n},ce=function(e,n){ie(e,n)};var lb=function(e){Yd(e,!0)},je=function(e,n){n=n||[];for(var l=0;l<n.length;++l)e(n[l]);for(e=0;e<n.length;e++)de(n[e])};N.push(["platform",function(e,n,l){if(Vd=l,n&&Ud.push(n),je(ee,e),je(fe,l._c.annotation),je(ge,l._c.bimodal),ic(),gc(),Q("parsetags")!="explicit"){if(rb(e),nc(mc())&&!Q("disableRealtimeCallback")&&rc(),l&&(e=l.callback)){var d=Ya(e);delete l.callback}nb(function(){lb(d)})}}]),F._pl=!0;var ke=function(e){if(e=(e=R[e])?e.oid:void 0,e){var n=z.getElementById(e);n&&n.parentNode.removeChild(n),delete R[e],ke(e)}},le=/^\{h:'/,me=/^!_/,ne="",ie=function(e,n){function l(){jb("message",d,"remove","de")}function d(jn){var Un=jn.data,zn=jn.origin;if(oe(Un,n)){var qn=g;g=!1,qn&&L("rqe"),pe(e,function(){qn&&L("rqd"),l();for(var Kn=A(K,"RPMQ",[]),Xn=0;Xn<Kn.length;Xn++)Kn[Xn]({data:Un,origin:zn})})}}if(n.length!==0){ne=H(La.href,"pfname","");var g=!0;jb("message",d,"add","at"),ac(e,l)}},oe=function(e,n){if(e=String(e),le.test(e))return!0;var l=!1;if(me.test(e)&&(l=!0,e=e.substr(2)),!/^\{/.test(e))return!1;var d=Zc(e);if(!d)return!1;if(e=d.f,d.s&&e&&Oa.call(n,e)!=-1){if((d.s==="_renderstart"||d.s===ne+"/"+e+"::_renderstart")&&(d=d.a&&d.a[l?0:1],n=z.getElementById(e),tc(e,2),d&&n&&d.width&&d.height)){e:{if(l=n.parentNode,e=d||{},qc()){var g=n.id;if(g){if(d=(d=R[g])?d.state:void 0,d===1||d===4)break e;ke(g)}}(d=l.nextSibling)&&d.getAttribute&&d.getAttribute("data-gapistub")&&(l.parentNode.removeChild(d),l.style.cssText=""),d=e.width;var jn=e.height,Un=l.style;Un.textIndent="0",Un.margin="0",Un.padding="0",Un.background="transparent",Un.borderStyle="none",Un.cssFloat="none",Un.styleFloat="none",Un.lineHeight="normal",Un.fontSize="1px",Un.verticalAlign="baseline",l=l.style,l.display="inline-block",Un=n.style,Un.position="static",Un.left="0",Un.top="0",Un.visibility="visible",d&&(l.width=Un.width=d+"px"),jn&&(l.height=Un.height=jn+"px"),e.verticalAlign&&(l.verticalAlign=e.verticalAlign),g&&tc(g,3)}n["data-csi-wdt"]=new Date().getTime()}return!0}return!1},pe=function(e,n){ac(e,n)},qe=function(e,n){this.L=e,e=n||{},this.fa=Number(e.maxAge)||0,this.U=e.domain,this.X=e.path,this.ga=!!e.secure};qe.prototype.read=function(){for(var e=this.L+"=",n=document.cookie.split(/;\s*/),l=0;l<n.length;++l){var d=n[l];if(d.indexOf(e)==0)return d.substr(e.length)}},qe.prototype.write=function(e,n){if(!re.test(this.L))throw"Invalid cookie name";if(!se.test(e))throw"Invalid cookie value";if(e=this.L+"="+e,this.U&&(e+=";domain="+this.U),this.X&&(e+=";path="+this.X),n=typeof n=="number"?n:this.fa,0<=n){var l=new Date;l.setSeconds(l.getSeconds()+n),e+=";expires="+l.toUTCString()}return this.ga&&(e+=";secure"),document.cookie=e,!0},qe.prototype.clear=function(){this.write("",0)};var se=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,re=/^[A-Z_][A-Z0-9_]{0,63}$/;qe.iterate=function(e){for(var n=document.cookie.split(/;\s*/),l=0;l<n.length;++l){var d=n[l].split("="),g=d.shift();e(g,d.join("="))}};var te=function(e){this.B=e};te.prototype.read=function(){if(Y.hasOwnProperty(this.B))return Y[this.B]},te.prototype.write=function(e){return Y[this.B]=e,!0},te.prototype.clear=function(){delete Y[this.B]};var Y={};te.iterate=function(e){for(var n in Y)Y.hasOwnProperty(n)&&e(n,Y[n])};var ue=window.location.protocol==="https:",ve=ue||window.location.protocol==="http:"?qe:te,we=function(e){var n=e.substr(1),l="",d=window.location.hostname;if(n!==""){if(l=parseInt(n,10),isNaN(l)||(n=d.split("."),n.length<l-1))return null;n.length==l-1&&(d="."+d)}else d="";return{i:e.charAt(0)=="S",domain:d,l}},xe=function(){var e,n=null;return ve.iterate(function(l,d){l.indexOf("G_AUTHUSER_")===0&&(l=we(l.substring(11)),!e||l.i&&!e.i||l.i==e.i&&l.l>e.l)&&(e=l,n=d)}),{ea:e,F:n}},ye=function(e){if(e.indexOf("GCSC")!==0)return null;var n={W:!1};if(e=e.substr(4),!e)return n;var l=e.charAt(0);e=e.substr(1);var d=e.lastIndexOf("_");if(d==-1)return n;var g=we(e.substr(d+1));return g==null||(e=e.substring(0,d),e.charAt(0)!=="_")?n:(d=l==="E"&&g.i,!d&&(l!=="U"||g.i)||d&&!ue?n:{W:!0,i:d,ja:e.substr(1),domain:g.domain,l:g.l})},ze=function(e){return e?(e=e.split("="),e[1]?e[1].split("|"):[]):[]},Ae=function(e){return e=e.split(":"),{clientId:e[0].split("=")[1],ia:ze(e[1]),la:ze(e[2]),ka:ze(e[3])}},Be=function(){var e=xe(),n=e.ea;if(e=e.F,e!==null){var l;if(ve.iterate(function(jn,Un){(jn=ye(jn))&&jn.W&&jn.i==n.i&&jn.l==n.l&&(l=Un)}),l){var d=Ae(l),g=d&&d.ia[Number(e)];if(d=d&&d.clientId,g)return{F:e,ha:g,clientId:d}}}return null},Z=function(){this.T=Ce};Z.prototype.$=function(){this.K||(this.v=0,this.K=!0,this.Y())},Z.prototype.Y=function(){this.K&&(this.T()?this.v=this.R:this.v=Math.min(2*(this.v||this.R),120),window.setTimeout(na(this.Y,this),1e3*this.v))},Z.prototype.v=0,Z.prototype.R=2,Z.prototype.T=null,Z.prototype.K=!1;var Ee=null;qc=function(){return K.oa=!0},rc=function(){K.oa=!0;var e=Be();(e=e&&e.F)&&hc("googleapis.config/sessionIndex",e),Ee||(Ee=A(K,"ss",new Z)),e=Ee,e.$&&e.$()};var Ce=function(){var e=Be(),n=e&&e.ha||null,l=e&&e.clientId;return ac("auth",{callback:function(){var d=x.gapi.auth,g={client_id:l,session_state:n};d.checkSessionState(g,function(jn){var Un=g.session_state,zn=Q("isLoggedIn");jn=Q("debug/forceIm")?!1:Un&&jn||!Un&&!jn,(zn=zn!=jn)&&(hc("isLoggedIn",jn),rc(),Rd(),jn||((jn=d.signOut)?jn():(jn=d.setToken)&&jn(null))),jn=mc();var qn=Q("savedUserState");Un=d._guss(jn.cookiepolicy),qn=qn!=Un&&typeof qn<"u",hc("savedUserState",Un),(zn||qn)&&nc(jn)&&!Q("disableRealtimeCallback")&&d._pimf(jn,!0)})}}),!0};L("bs0",!0,window.gapi._bs),L("bs1",!0),delete window.gapi._bs}).call(void 0);gapi.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"desktop","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"pt",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://classroom.google.com/sharewidget?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://workspace.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.pt_BR.l4Bv_WkVC6g.O/am=wQE/d=1/ct=zgms/rs=AGLTcCOuH5S2uqmF6E8zOW7n3yiqiwhzNQ/m=__features__",u:"https://apis.google.com/js/platform.js",hee:!0,fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",dpo:!1},platform:["additnow","backdrop","blogger","comments","commentcount","community","donation","family_creation","follow","hangout","health","page","partnersbadge","person","playemm","playreview","plus","plusone","post","ratingbadge","savetoandroidpay","savetodrive","savetowallet","sharetoclassroom","shortlists","signin2","surveyoptin","visibility","youtube","ytsubscribe","zoomableimage"],fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}});const CLIENT_ID="",API_KEY="",DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],SCOPES="https://www.googleapis.com/auth/drive.file",useGoogleDrive=()=>{const[e,n]=reactExports.useState(!1),[l,d]=reactExports.useState(!1),[g,jn]=reactExports.useState(null),[Un,zn]=reactExports.useState(null),[qn,Kn]=reactExports.useState(null),[Xn,Qn]=reactExports.useState("idle"),[Jn,Ai]=reactExports.useState(null),Ri=reactExports.useCallback(()=>{const qi=gapi.auth2.getAuthInstance();if(qi?.isSignedIn.get()){const zi=qi.currentUser.get(),Gi=zi.getBasicProfile(),Xi=zi.getAuthResponse(!0);jn({name:Gi.getName(),email:Gi.getEmail(),imageUrl:Gi.getImageUrl()}),Ai(Xi.expires_at),n(!0)}else jn(null),Ai(null),n(!1)},[]),Ni=reactExports.useCallback(async()=>{try{return await gapi.auth2.getAuthInstance().currentUser.get().reloadAuthResponse(),Ri(),!0}catch(qi){return console.error("Failed to refresh token",qi),Qn("expired"),!1}},[Ri]),$i=reactExports.useCallback(async()=>{const qi=gapi.auth2.getAuthInstance();if(!qi?.isSignedIn.get())return!1;const Xi=qi.currentUser.get().getAuthResponse(!0).expires_at,as=300*1e3;return Date.now()+as>Xi?(console.log("Token expiring soon, refreshing..."),await Ni()):!0},[Ni]);reactExports.useEffect(()=>{const qi=()=>{gapi.client.init({apiKey:API_KEY,clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(()=>{const zi=gapi.auth2.getAuthInstance();Ri(),zi.isSignedIn.listen(Ri),d(!0)}).catch(zi=>{console.error("Error initializing Google API",zi)})};gapi.load("client:auth2",qi)},[Ri]),reactExports.useEffect(()=>{if(!e)return;const qi=setInterval(()=>{$i()},6e4);return()=>clearInterval(qi)},[e,$i]);const Li=()=>{gapi.auth2.getAuthInstance().signIn({prompt:"select_account",ux_mode:"popup"})},ji=()=>{gapi.auth2.getAuthInstance().signOut()},Fi=reactExports.useCallback(async()=>{if(!e||!l)return;if(!await $i()){Qn("expired");return}Qn("syncing");try{const Gi=(await gapi.client.drive.files.list({pageSize:1,fields:"nextPageToken, files(id, name)",q:"name = 'diegesis-notes.yjs' and trashed = false"})).result.files;let Xi=Un;if(Gi&&Gi.length>0){Xi=Gi[0].id,zn(Xi);const as=await gapi.client.drive.files.get({fileId:Xi,alt:"media"});console.log("Found file, syncing...",as)}Kn(new Date),Qn("synced"),setTimeout(()=>Qn("idle"),3e3)}catch(zi){console.error("Error syncing with Drive",zi),zi&&typeof zi=="object"&&"status"in zi&&zi.status===401?Qn("expired"):Qn("error")}},[e,l,Un,$i]);return{isSignedIn:e,isInitialized:l,user:g,handleAuthClick:Li,handleSignOutClick:ji,syncWithDrive:Fi,lastSyncTime:qn,syncStatus:Xn,tokenExpiresAt:Jn}},rtop=e=>create$6((n,l)=>{e.onerror=d=>l(new Error(d.target.error)),e.onsuccess=d=>n(d.target.result)}),openDB=(e,n)=>create$6((l,d)=>{const g=indexedDB.open(e);g.onupgradeneeded=jn=>n(jn.target.result),g.onerror=jn=>d(create$7(jn.target.error)),g.onsuccess=jn=>{const Un=jn.target.result;Un.onversionchange=()=>{Un.close()},l(Un)}}),deleteDB=e=>rtop(indexedDB.deleteDatabase(e)),createStores=(e,n)=>n.forEach(l=>e.createObjectStore.apply(e,l)),transact=(e,n,l="readwrite")=>{const d=e.transaction(n,l);return n.map(g=>getStore(d,g))},count=(e,n)=>rtop(e.count(n)),get=(e,n)=>rtop(e.get(n)),del=(e,n)=>rtop(e.delete(n)),put=(e,n,l)=>rtop(e.put(n,l)),addAutoKey=(e,n)=>rtop(e.add(n)),getAll=(e,n,l)=>rtop(e.getAll(n,l)),queryFirst=(e,n,l)=>{let d=null;return iterateKeys(e,n,g=>(d=g,!1),l).then(()=>d)},getLastKey=(e,n=null)=>queryFirst(e,n,"prev"),iterateOnRequest=(e,n)=>create$6((l,d)=>{e.onerror=d,e.onsuccess=async g=>{const jn=g.target.result;if(jn===null||await n(jn)===!1)return l();jn.continue()}}),iterateKeys=(e,n,l,d="next")=>iterateOnRequest(e.openKeyCursor(n,d),g=>l(g.key)),getStore=(e,n)=>e.objectStore(n),createIDBKeyRangeUpperBound=(e,n)=>IDBKeyRange.upperBound(e,n),createIDBKeyRangeLowerBound=(e,n)=>IDBKeyRange.lowerBound(e,n),customStoreName="custom",updatesStoreName="updates",PREFERRED_TRIM_SIZE=500,fetchUpdates=(e,n=()=>{},l=()=>{})=>{const[d]=transact(e.db,[updatesStoreName]);return getAll(d,createIDBKeyRangeLowerBound(e._dbref,!1)).then(g=>{e._destroyed||(n(d),transact$1(e.doc,()=>{g.forEach(jn=>applyUpdate(e.doc,jn))},e,!1),l(d))}).then(()=>getLastKey(d).then(g=>{e._dbref=g+1})).then(()=>count(d).then(g=>{e._dbsize=g})).then(()=>d)},storeState=(e,n=!0)=>fetchUpdates(e).then(l=>{(n||e._dbsize>=PREFERRED_TRIM_SIZE)&&addAutoKey(l,encodeStateAsUpdate(e.doc)).then(()=>del(l,createIDBKeyRangeUpperBound(e._dbref,!0))).then(()=>count(l).then(d=>{e._dbsize=d}))});class IndexeddbPersistence extends Observable{constructor(n,l){super(),this.doc=l,this.name=n,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=openDB(n,d=>createStores(d,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=create$6(d=>this.on("synced",()=>d(this))),this._db.then(d=>{this.db=d,fetchUpdates(this,Un=>addAutoKey(Un,encodeStateAsUpdate(l)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(d,g)=>{if(this.db&&g!==this){const[jn]=transact(this.db,[updatesStoreName]);addAutoKey(jn,d),++this._dbsize>=PREFERRED_TRIM_SIZE&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{storeState(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},l.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),l.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(n=>{n.close()})}clearData(){return this.destroy().then(()=>{deleteDB(this.name)})}get(n){return this._db.then(l=>{const[d]=transact(l,[customStoreName],"readonly");return get(d,n)})}set(n,l){return this._db.then(d=>{const[g]=transact(d,[customStoreName]);return put(g,l,n)})}del(n){return this._db.then(l=>{const[d]=transact(l,[customStoreName]);return del(d,n)})}}const useYjs=()=>{const e=compilerRuntimeExports.c(7),[n]=reactExports.useState(_temp),[l,d]=reactExports.useState(null),[g,jn]=reactExports.useState(!1);let Un,zn;e[0]!==n?(Un=()=>{const Kn=new IndexeddbPersistence("diegesis-notes",n);return Kn.on("synced",()=>{console.log("IndexedDB content loaded"),jn(!0)}),d(Kn),()=>{Kn.destroy()}},zn=[n],e[0]=n,e[1]=Un,e[2]=zn):(Un=e[1],zn=e[2]),reactExports.useEffect(Un,zn);let qn;return e[3]!==n||e[4]!==l||e[5]!==g?(qn={doc:n,provider:l,synced:g},e[3]=n,e[4]=l,e[5]=g,e[6]=qn):qn=e[6],qn};function _temp(){return new Doc}function App(){const e=compilerRuntimeExports.c(35),{doc:n,synced:l}=useYjs(),{isSignedIn:d,handleAuthClick:g,handleSignOutClick:jn,syncWithDrive:Un,lastSyncTime:zn,user:qn,syncStatus:Kn}=useGoogleDrive();let Xn;e[0]!==Kn?(Xn=()=>{switch(Kn){case"syncing":return jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-sky-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"synced":return jsxRuntimeExports.jsx("svg",{className:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return jsxRuntimeExports.jsx("svg",{className:"h-4 w-4 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"expired":return jsxRuntimeExports.jsx("svg",{className:"h-4 w-4 text-amber-500 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});default:return jsxRuntimeExports.jsx("svg",{className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}},e[0]=Kn,e[1]=Xn):Xn=e[1];const Qn=Xn;let Jn;e[2]===Symbol.for("react.memo_cache_sentinel")?(Jn=jsxRuntimeExports.jsx("div",{className:"w-9 h-9 bg-sky-500 rounded-xl shadow-lg shadow-sky-500/30 flex items-center justify-center text-white font-bold text-xl",children:"D"}),e[2]=Jn):Jn=e[2];let Ai;e[3]===Symbol.for("react.memo_cache_sentinel")?(Ai=jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold tracking-tight text-slate-800 leading-tight",children:"Diegesis Notes"}),e[3]=Ai):Ai=e[3];const Ri=`w-1.5 h-1.5 rounded-full ${l?"bg-emerald-500":"bg-amber-500 animate-pulse"}`;let Ni;e[4]!==Ri?(Ni=jsxRuntimeExports.jsx("span",{className:Ri}),e[4]=Ri,e[5]=Ni):Ni=e[5];const $i=l?"Offline Active":"Connecting...";let Li;e[6]!==$i?(Li=jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-slate-400",children:$i}),e[6]=$i,e[7]=Li):Li=e[7];let ji;e[8]!==Ni||e[9]!==Li?(ji=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[Jn,jsxRuntimeExports.jsxs("div",{className:"hidden sm:block",children:[Ai,jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Ni,Li]})]})]}),e[8]=Ni,e[9]=Li,e[10]=ji):ji=e[10];let Fi;e[11]!==Qn||e[12]!==d||e[13]!==zn||e[14]!==Kn||e[15]!==Un?(Fi=d&&jsxRuntimeExports.jsxs("button",{onClick:()=>Un(),disabled:Kn==="syncing",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-white hover:shadow-sm border border-transparent hover:border-slate-200 transition-all group",title:zn?`Last synced: ${zn.toLocaleTimeString()}`:"Sync with Drive",children:[Qn(),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-slate-500 group-hover:text-slate-700 hidden md:block",children:Kn==="syncing"?"Syncing...":Kn==="synced"?"Synced":Kn==="expired"?"Session Expired":"Sync Now"})]}),e[11]=Qn,e[12]=d,e[13]=zn,e[14]=Kn,e[15]=Un,e[16]=Fi):Fi=e[16];let qi;e[17]===Symbol.for("react.memo_cache_sentinel")?(qi=jsxRuntimeExports.jsx("div",{className:"h-6 w-px bg-slate-200 hidden sm:block"}),e[17]=qi):qi=e[17];let zi;e[18]!==g||e[19]!==jn||e[20]!==d||e[21]!==qn?(zi=d?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end hidden md:flex",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-slate-700 leading-none",children:qn?.name}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-slate-400 leading-none mt-1",children:qn?.email})]}),jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",children:[qn?.imageUrl?jsxRuntimeExports.jsx("img",{src:qn.imageUrl,alt:qn.name,className:"w-9 h-9 rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105"}):jsxRuntimeExports.jsx("div",{className:"w-9 h-9 rounded-full bg-sky-100 border-2 border-white shadow-sm flex items-center justify-center text-sky-600 font-bold",children:qn?.name?.[0]}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white border border-slate-200 shadow-xl rounded-xl p-2 min-w-[140px]",children:[jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 border-b border-slate-50 md:hidden",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-bold text-slate-700",children:qn?.name}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-slate-400",children:qn?.email})]}),jsxRuntimeExports.jsxs("button",{onClick:jn,className:"w-full text-left px-3 py-2 rounded-lg text-rose-500 hover:bg-rose-50 text-xs font-bold transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})})]})]}):jsxRuntimeExports.jsxs("button",{onClick:g,className:"bg-sky-500 hover:bg-sky-400 text-white px-4 sm:px-5 py-2 rounded-xl text-sm font-bold shadow-lg shadow-sky-500/20 transition-all hover:translate-y-[-1px] active:translate-y-[1px] flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Connect Google Drive"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Login"})]}),e[18]=g,e[19]=jn,e[20]=d,e[21]=qn,e[22]=zi):zi=e[22];let Gi;e[23]!==zi||e[24]!==Fi?(Gi=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[Fi,qi,zi]}),e[23]=zi,e[24]=Fi,e[25]=Gi):Gi=e[25];let Xi;e[26]!==Gi||e[27]!==ji?(Xi=jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-10 backdrop-blur-md bg-white/70 border-b border-slate-200 px-4 sm:px-6 py-3",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[ji,Gi]})}),e[26]=Gi,e[27]=ji,e[28]=Xi):Xi=e[28];let as;e[29]!==n||e[30]!==l?(as=jsxRuntimeExports.jsx("main",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6",children:l?jsxRuntimeExports.jsx(Editor,{doc:n}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-400",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500 mb-4"}),jsxRuntimeExports.jsx("p",{children:"Loading your notes..."})]})}),e[29]=n,e[30]=l,e[31]=as):as=e[31];let ls;return e[32]!==Xi||e[33]!==as?(ls=jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans",children:[Xi,as]}),e[32]=Xi,e[33]=as,e[34]=ls):ls=e[34],ls}ReactDOM$1.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-CUxOn7EQ.js.map
